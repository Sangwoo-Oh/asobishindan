{"version":3,"sources":["../../../projects/igniteui-angular/src/lib/animations/easings.ts","../../../projects/igniteui-angular/src/lib/animations/fade/index.ts","../../../projects/igniteui-angular/src/lib/animations/flip/index.ts","../../../projects/igniteui-angular/src/lib/animations/rotate/index.ts","../../../projects/igniteui-angular/src/lib/animations/misc/shake.ts","../../../projects/igniteui-angular/src/lib/animations/misc/pulsate.ts","../../../projects/igniteui-angular/src/lib/animations/scale/index.ts","../../../projects/igniteui-angular/src/lib/animations/slide/index.ts","../../../projects/igniteui-angular/src/lib/animations/swing/index.ts","../../../projects/igniteui-angular/src/lib/animations/grow/index.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/igniteui-angular/src/lib/core/navigation/nav.service.ts","../../../projects/igniteui-angular/src/lib/core/navigation/directives.ts","../../../projects/igniteui-angular/src/lib/core/setImmediate.ts","../../../projects/igniteui-angular/src/lib/core/utils.ts","../../../projects/igniteui-angular/src/lib/data-operations/sorting-expression.interface.ts","../../../projects/igniteui-angular/src/lib/data-operations/operations.ts","../../../projects/igniteui-angular/src/lib/data-operations/sorting-strategy.ts","../../../projects/igniteui-angular/src/lib/data-operations/paging-state.interface.ts","../../../projects/igniteui-angular/src/lib/data-operations/filtering-expression.interface.ts","../../../projects/igniteui-angular/src/lib/data-operations/filtering-expressions-tree.ts","../../../projects/igniteui-angular/src/lib/data-operations/grouping-strategy.ts","../../../projects/igniteui-angular/src/lib/data-operations/filtering-strategy.ts","../../../projects/igniteui-angular/src/lib/services/transaction/transaction.ts","../../../projects/igniteui-angular/src/lib/data-operations/data-util.ts","../../../projects/igniteui-angular/src/lib/services/exporter-common/export-utilities.ts","../../../projects/igniteui-angular/src/lib/grids/api.service.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid.filtering.pipe.ts","../../../projects/igniteui-angular/src/lib/services/exporter-common/base-export-service.ts","../../../projects/igniteui-angular/src/lib/services/csv/csv-exporter-options.ts","../../../projects/igniteui-angular/src/lib/services/csv/char-separated-value-data.ts","../../../projects/igniteui-angular/src/lib/services/exporter-common/exporter-options-base.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-enums.ts","../../../projects/igniteui-angular/src/lib/services/csv/csv-exporter.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-strings.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-files.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-folders.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-elements-factory.ts","../../../projects/igniteui-angular/src/lib/services/excel/worksheet-data-dictionary.ts","../../../projects/igniteui-angular/src/lib/services/excel/worksheet-data.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-exporter.ts","../../../projects/igniteui-angular/src/lib/services/overlay/utilities.ts","../../../projects/igniteui-angular/src/lib/services/excel/excel-exporter-options.ts","../../../projects/igniteui-angular/src/lib/core/deprecateDecorators.ts","../../../projects/igniteui-angular/src/lib/services/overlay/position/auto-position-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/position/connected-positioning-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/position/global-position-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/scroll/scroll-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/scroll/NoOpScrollStrategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/position/container-position-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/position/base-fit-position-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/position/elastic-position-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/overlay.ts","../../../projects/igniteui-angular/src/lib/services/overlay/scroll/absolute-scroll-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/scroll/block-scroll-strategy.ts","../../../projects/igniteui-angular/src/lib/services/overlay/scroll/close-scroll-strategy.ts","../../../projects/igniteui-angular/src/lib/services/transaction/base-transaction.ts","../../../projects/igniteui-angular/src/lib/services/transaction/igx-transaction.ts","../../../projects/igniteui-angular/src/lib/services/transaction/igx-hierarchical-transaction.ts","../../../projects/igniteui-angular/src/lib/directives/toggle/toggle.directive.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down.common.ts","../../../projects/igniteui-angular/src/lib/core/selection.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down-group.component.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down-item.base.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down-item.component.ts","../../../projects/igniteui-angular/src/lib/core/displayDensity.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down.base.ts","../../../projects/igniteui-angular/src/lib/directives/for-of/display.container.ts","../../../projects/igniteui-angular/src/lib/directives/for-of/base.helper.component.ts","../../../projects/igniteui-angular/src/lib/directives/for-of/horizontal.virtual.helper.component.ts","../../../projects/igniteui-angular/src/lib/directives/for-of/virtual.helper.component.ts","../../../projects/igniteui-angular/src/lib/directives/scroll-inertia/scroll_inertia.directive.ts","../../../projects/igniteui-angular/src/lib/directives/for-of/for_of.sync.service.ts","../../../projects/igniteui-angular/src/lib/directives/for-of/for_of.directive.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down.component.ts","../../../projects/igniteui-angular/src/lib/drop-down/drop-down-navigation.directive.ts","../../../projects/igniteui-angular/src/lib/directives/hint/hint.directive.ts","../../../projects/igniteui-angular/src/lib/drop-down/public_api.ts","../../../projects/igniteui-angular/src/lib/directives/input/input.directive.ts","../../../projects/igniteui-angular/src/lib/input-group/input-group.common.ts","../../../projects/igniteui-angular/src/lib/directives/label/label.directive.ts","../../../projects/igniteui-angular/src/lib/directives/prefix/prefix.directive.ts","../../../projects/igniteui-angular/src/lib/directives/suffix/suffix.directive.ts","../../../projects/igniteui-angular/src/lib/input-group/inputGroupType.ts","../../../projects/igniteui-angular/src/lib/input-group/input-group.component.ts","../../../projects/igniteui-angular/src/lib/directives/autocomplete/autocomplete.directive.ts","../../../projects/igniteui-angular/src/lib/directives/button/button.directive.ts","../../../projects/igniteui-angular/src/lib/directives/divider/divider.directive.ts","../../../projects/igniteui-angular/src/lib/directives/drag-drop/drag-drop.directive.ts","../../../projects/igniteui-angular/src/lib/directives/drag-drop/drag-drop.strategy.ts","../../../projects/igniteui-angular/src/lib/directives/filter/filter.directive.ts","../../../projects/igniteui-angular/src/lib/directives/focus/focus.directive.ts","../../../projects/igniteui-angular/src/lib/directives/layout/layout.directive.ts","../../../projects/igniteui-angular/src/lib/directives/mask/mask-parsing.service.ts","../../../projects/igniteui-angular/src/lib/directives/mask/mask.directive.ts","../../../projects/igniteui-angular/src/lib/radio/radio.component.ts","../../../projects/igniteui-angular/src/lib/directives/ripple/ripple.directive.ts","../../../projects/igniteui-angular/src/lib/directives/radio/radio-group.directive.ts","../../../projects/igniteui-angular/src/lib/directives/text-highlight/text-highlight.directive.ts","../../../projects/igniteui-angular/src/lib/directives/text-selection/text-selection.directive.ts","../../../projects/igniteui-angular/src/lib/directives/tooltip/tooltip.directive.ts","../../../projects/igniteui-angular/src/lib/directives/date-time-editor/date-time-editor.common.ts","../../../projects/igniteui-angular/src/lib/date-picker/date-picker.utils.ts","../../../projects/igniteui-angular/src/lib/directives/date-time-editor/date-time-editor.directive.ts","../../../projects/igniteui-angular/src/lib/data-operations/filtering-condition.ts","../../../projects/igniteui-angular/src/lib/data-operations/filtering-state.interface.ts","../../../projects/igniteui-angular/src/lib/data-operations/groupby-record.interface.ts","../../../projects/igniteui-angular/src/lib/action-strip/grid-actions/grid-action-button.component.ts","../../../projects/igniteui-angular/src/lib/checkbox/checkbox.component.ts","../../../projects/igniteui-angular/src/lib/grids/selection/selection.service.ts","../../../projects/igniteui-angular/src/lib/grids/row.directive.ts","../../../projects/igniteui-angular/src/lib/icon/icon.service.ts","../../../projects/igniteui-angular/src/lib/action-strip/grid-actions/grid-actions-base.directive.ts","../../../projects/igniteui-angular/src/lib/action-strip/grid-actions/grid-editing-actions.component.ts","../../../projects/igniteui-angular/src/lib/action-strip/grid-actions/grid-pinning-actions.component.ts","../../../projects/igniteui-angular/src/lib/action-strip/action-strip.component.ts","../../../projects/igniteui-angular/src/lib/icon/icon.component.ts","../../../projects/igniteui-angular/src/lib/icon/public_api.ts","../../../projects/igniteui-angular/src/lib/action-strip/action-strip.module.ts","../../../projects/igniteui-angular/src/lib/avatar/avatar.component.ts","../../../projects/igniteui-angular/src/lib/badge/badge.component.ts","../../../projects/igniteui-angular/src/lib/expansion-panel/expansion-panel.common.ts","../../../projects/igniteui-angular/src/lib/expansion-panel/expansion-panel-body.component.ts","../../../projects/igniteui-angular/src/lib/expansion-panel/expansion-panel.directives.ts","../../../projects/igniteui-angular/src/lib/expansion-panel/expansion-panel-header.component.ts","../../../projects/igniteui-angular/src/lib/expansion-panel/expansion-panel.component.ts","../../../projects/igniteui-angular/src/lib/expansion-panel/expansion-panel.module.ts","../../../projects/igniteui-angular/src/lib/banner/banner.directives.ts","../../../projects/igniteui-angular/src/lib/banner/banner.component.ts","../../../projects/igniteui-angular/src/lib/buttonGroup/buttonGroup.component.ts","../../../projects/igniteui-angular/src/lib/core/dates/dateRange.ts","../../../projects/igniteui-angular/src/lib/calendar/calendar.ts","../../../projects/igniteui-angular/src/lib/core/i18n/resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/grid-resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/paginator-resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/time-picker-resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/calendar-resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/date-range-picker-resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/carousel-resources.ts","../../../projects/igniteui-angular/src/lib/core/i18n/list-resources.ts","../../../projects/igniteui-angular/src/lib/calendar/calendar-base.ts","../../../projects/igniteui-angular/src/lib/calendar/calendar.directives.ts","../../../projects/igniteui-angular/src/lib/calendar/month-picker-base.ts","../../../projects/igniteui-angular/src/lib/calendar/months-view/months-view.component.ts","../../../projects/igniteui-angular/src/lib/calendar/years-view/years-view.component.ts","../../../projects/igniteui-angular/src/lib/calendar/days-view/daysview-navigation.service.ts","../../../projects/igniteui-angular/src/lib/calendar/days-view/day-item.component.ts","../../../projects/igniteui-angular/src/lib/calendar/days-view/days-view.component.ts","../../../projects/igniteui-angular/src/lib/calendar/calendar.component.ts","../../../projects/igniteui-angular/src/lib/calendar/month-picker/month-picker.component.ts","../../../projects/igniteui-angular/src/lib/calendar/months-view.pipe.ts","../../../projects/igniteui-angular/src/lib/calendar/calendar.module.ts","../../../projects/igniteui-angular/src/lib/card/card.component.ts","../../../projects/igniteui-angular/src/lib/carousel/carousel.directives.ts","../../../projects/igniteui-angular/src/lib/carousel/slide.component.ts","../../../projects/igniteui-angular/src/lib/carousel/carousel.component.ts","../../../projects/igniteui-angular/src/lib/chips/chip.component.ts","../../../projects/igniteui-angular/src/lib/chips/chips-area.component.ts","../../../projects/igniteui-angular/src/lib/chips/chips.module.ts","../../../projects/igniteui-angular/src/lib/combo/combo.directives.ts","../../../projects/igniteui-angular/src/lib/combo/combo.api.ts","../../../projects/igniteui-angular/src/lib/combo/combo-item.component.ts","../../../projects/igniteui-angular/src/lib/combo/combo.common.ts","../../../projects/igniteui-angular/src/lib/combo/combo-add-item.component.ts","../../../projects/igniteui-angular/src/lib/combo/combo-dropdown.component.ts","../../../projects/igniteui-angular/src/lib/combo/combo.pipes.ts","../../../projects/igniteui-angular/src/lib/combo/combo.component.ts","../../../projects/igniteui-angular/src/lib/date-picker/date-picker.common.ts","../../../projects/igniteui-angular/src/lib/date-picker/date-picker.pipes.ts","../../../projects/igniteui-angular/src/lib/date-picker/date-picker.directives.ts","../../../projects/igniteui-angular/src/lib/core/enums.ts","../../../projects/igniteui-angular/src/lib/date-picker/calendar-container.component.ts","../../../projects/igniteui-angular/src/lib/date-picker/date-picker.component.ts","../../../projects/igniteui-angular/src/lib/dialog/dialog.directives.ts","../../../projects/igniteui-angular/src/lib/dialog/dialog.component.ts","../../../projects/igniteui-angular/src/lib/grids/common/enums.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/grid.excel-style-filtering.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-clear-filters.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-position-strategy.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/grid-filtering.service.ts","../../../projects/igniteui-angular/src/lib/select/select-item.component.ts","../../../projects/igniteui-angular/src/lib/select/select-positioning-strategy.ts","../../../projects/igniteui-angular/src/lib/select/select.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-default-expression.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-date-expression.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-custom-dialog.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-conditional-filter.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-header.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-hiding.component.ts","../../../projects/igniteui-angular/src/lib/grids/watch-changes.ts","../../../projects/igniteui-angular/src/lib/grids/summaries/grid-summary.ts","../../../projects/igniteui-angular/src/lib/grids/columns/templates.directive.ts","../../../projects/igniteui-angular/src/lib/grids/moving/moving.service.ts","../../../projects/igniteui-angular/src/lib/grids/columns/column.component.ts","../../../projects/igniteui-angular/src/lib/grids/columns/column-group.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-moving.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-pinning.component.ts","../../../projects/igniteui-angular/src/lib/list/list.common.ts","../../../projects/igniteui-angular/src/lib/core/touch.ts","../../../projects/igniteui-angular/src/lib/list/list-item.component.ts","../../../projects/igniteui-angular/src/lib/list/list.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-search.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-selecting.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/excel-style-sorting.component.ts","../../../projects/igniteui-angular/src/lib/grids/cell.component.ts","../../../projects/igniteui-angular/src/lib/grids/grid.common.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/common.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/grid-toolbar.component.ts","../../../projects/igniteui-angular/src/lib/grids/grid.rowEdit.directive.ts","../../../projects/igniteui-angular/src/lib/grids/grid-navigation.service.ts","../../../projects/igniteui-angular/src/lib/grids/resizing/resizing.service.ts","../../../projects/igniteui-angular/src/lib/grids/headers/grid-header.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/base/grid-filtering-cell.component.ts","../../../projects/igniteui-angular/src/lib/grids/headers/grid-header-group.component.ts","../../../projects/igniteui-angular/src/lib/grids/summaries/grid-summary.service.ts","../../../projects/igniteui-angular/src/lib/grids/summaries/summary-cell.component.ts","../../../projects/igniteui-angular/src/lib/grids/selection/drag-select.directive.ts","../../../projects/igniteui-angular/src/lib/grids/summaries/summary-row.component.ts","../../../projects/igniteui-angular/src/lib/directives/template-outlet/template_outlet.directive.ts","../../../projects/igniteui-angular/src/lib/grids/resizing/resizer.directive.ts","../../../projects/igniteui-angular/src/lib/grids/resizing/resizer.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/base/grid-filtering-row.component.ts","../../../projects/igniteui-angular/src/lib/grids/moving/moving.drag.directive.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid.directives.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/advanced-filtering/advanced-filtering-dialog.component.ts","../../../projects/igniteui-angular/src/lib/grids/selection/row-selectors.ts","../../../projects/igniteui-angular/src/lib/grids/row-drag.directive.ts","../../../projects/igniteui-angular/src/lib/snackbar/snackbar.component.ts","../../../projects/igniteui-angular/src/lib/grids/grid-base.directive.ts","../../../projects/igniteui-angular/src/lib/grids/grid-footer/grid-footer.component.ts","../../../projects/igniteui-angular/src/lib/select/select-group.component.ts","../../../projects/igniteui-angular/src/lib/select/select-navigation.directive.ts","../../../projects/igniteui-angular/src/lib/select/select.module.ts","../../../projects/igniteui-angular/src/lib/paginator/paginator.component.ts","../../../projects/igniteui-angular/src/lib/grids/column-actions/column-actions.component.ts","../../../projects/igniteui-angular/src/lib/grids/common/pipes.ts","../../../projects/igniteui-angular/src/lib/grids/common/grid-pipes.module.ts","../../../projects/igniteui-angular/src/lib/progressbar/progressbar.common.ts","../../../projects/igniteui-angular/src/lib/services/direction/directionality.ts","../../../projects/igniteui-angular/src/lib/progressbar/progressbar.component.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/excel-style/grid.excel-style-filtering.module.ts","../../../projects/igniteui-angular/src/lib/grids/selection/selection.module.ts","../../../projects/igniteui-angular/src/lib/grids/resizing/resize-handle.directive.ts","../../../projects/igniteui-angular/src/lib/grids/resizing/resize.module.ts","../../../projects/igniteui-angular/src/lib/grids/moving/moving.drop.directive.ts","../../../projects/igniteui-angular/src/lib/grids/moving/moving.module.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid-api.service.ts","../../../projects/igniteui-angular/src/lib/grids/grid/groupby-row.component.ts","../../../projects/igniteui-angular/src/lib/grids/grid-mrl-navigation.service.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid.component.ts","../../../projects/igniteui-angular/src/lib/grids/state.directive.ts","../../../projects/igniteui-angular/src/lib/grids/common/shared.module.ts","../../../projects/igniteui-angular/src/lib/grids/summaries/grid-root-summary.pipe.ts","../../../projects/igniteui-angular/src/lib/grids/summaries/summary.module.ts","../../../projects/igniteui-angular/src/lib/grids/column-actions/column-actions-base.directive.ts","../../../projects/igniteui-angular/src/lib/grids/column-actions/column-hiding.directive.ts","../../../projects/igniteui-angular/src/lib/grids/column-actions/column-pinning.directive.ts","../../../projects/igniteui-angular/src/lib/grids/column-actions/column-actions.module.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/grid-toolbar-advanced-filtering.component.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/grid-toolbar.base.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/grid-toolbar-exporter.component.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/grid-toolbar-hiding.component.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/grid-toolbar-pinning.component.ts","../../../projects/igniteui-angular/src/lib/grids/toolbar/toolbar.module.ts","../../../projects/igniteui-angular/src/lib/grids/columns/column-layout.component.ts","../../../projects/igniteui-angular/src/lib/grids/columns/column.module.ts","../../../projects/igniteui-angular/src/lib/grids/filtering/base/filtering.module.ts","../../../projects/igniteui-angular/src/lib/grids/headers/sorting-index.pipe.ts","../../../projects/igniteui-angular/src/lib/grids/headers/headers.module.ts","../../../projects/igniteui-angular/src/lib/grids/grid-common.module.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid.pipes.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid-row.component.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid.summary.pipe.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid.details.pipe.ts","../../../projects/igniteui-angular/src/lib/grids/grid/expandable-cell.component.ts","../../../projects/igniteui-angular/src/lib/grids/grid/grid.module.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid-api.service.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid.directives.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid.component.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid-row.component.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid.pipes.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-cell.component.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid.summary.pipe.ts","../../../projects/igniteui-angular/src/lib/grids/tree-grid/tree-grid.module.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/child-grid-row.component.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-grid-navigation.service.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-grid-base.directive.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-grid-api.service.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/row-island-api.service.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/row-island.component.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-grid.component.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-cell.component.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-row.component.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-grid.pipes.ts","../../../projects/igniteui-angular/src/lib/grids/hierarchical-grid/hierarchical-grid.module.ts","../../../projects/igniteui-angular/src/lib/navbar/navbar.component.ts","../../../projects/igniteui-angular/src/lib/navigation-drawer/navigation-drawer.directives.ts","../../../projects/igniteui-angular/src/lib/navigation-drawer/navigation-drawer.component.ts","../../../projects/igniteui-angular/src/lib/navigation-drawer/navigation-drawer.module.ts","../../../projects/igniteui-angular/src/lib/slider/slider.common.ts","../../../projects/igniteui-angular/src/lib/slider/thumb/thumb-slider.component.ts","../../../projects/igniteui-angular/src/lib/slider/label/thumb-label.component.ts","../../../projects/igniteui-angular/src/lib/slider/ticks/ticks.component.ts","../../../projects/igniteui-angular/src/lib/slider/ticks/tick.pipe.ts","../../../projects/igniteui-angular/src/lib/slider/slider.component.ts","../../../projects/igniteui-angular/src/lib/switch/switch.component.ts","../../../projects/igniteui-angular/src/lib/tabbar/tabbar.component.ts","../../../projects/igniteui-angular/src/lib/tabs/tabs.directives.ts","../../../projects/igniteui-angular/src/lib/tabs/tabs.common.ts","../../../projects/igniteui-angular/src/lib/tabs/tab-item.component.ts","../../../projects/igniteui-angular/src/lib/tabs/tabs-group.component.ts","../../../projects/igniteui-angular/src/lib/tabs/tabs.component.ts","../../../projects/igniteui-angular/src/lib/time-picker/time-picker.common.ts","../../../projects/igniteui-angular/src/lib/time-picker/time-picker.directives.ts","../../../projects/igniteui-angular/src/lib/time-picker/time-picker.pipes.ts","../../../projects/igniteui-angular/src/lib/time-picker/time-picker.component.ts","../../../projects/igniteui-angular/src/lib/toast/toast.component.ts","../../../projects/igniteui-angular/src/lib/splitter/splitter.component.ts","../../../projects/igniteui-angular/src/lib/splitter/splitter-pane/splitter-pane.component.ts","../../../projects/igniteui-angular/src/lib/splitter/splitter-bar/splitter-bar.component.ts","../../../projects/igniteui-angular/src/lib/splitter/splitter.module.ts","../../../projects/igniteui-angular/src/lib/date-range-picker/date-range-picker-inputs.common.ts","../../../projects/igniteui-angular/src/lib/date-range-picker/date-range-picker.component.ts","../../../projects/igniteui-angular/src/lib/date-range-picker/date-range-picker.module.ts"],"names":["EaseIn","EaseOut","EaseInOut","base","style","opacity","animate","baseParams","delay","duration","easing","sine","endOpacity","startOpacity","fadeIn","animation","params","fadeOut","baseRecipe","backfaceVisibility","transformStyle","keyframes","offset","transform","quad","endAngle","endDistance","rotateX","rotateY","rotateZ","startAngle","startDistance","flipTop","Object","assign","flipBottom","flipLeft","flipRight","flipHorFwd","flipHorBck","flipVerFwd","flipVerBck","transformOrigin","baseInParams","xPos","yPos","baseOutParams","rotateInCenter","rotateOutCenter","rotateInTop","rotateOutTop","rotateInRight","rotateOutRight","rotateInBottom","rotateOutBottom","rotateInLeft","rotateOutLeft","rotateInTr","rotateOutTr","rotateInBr","rotateOutBr","rotateInBl","rotateOutBl","rotateInTl","rotateOutTl","rotateInDiagonal1","rotateOutDiagonal1","rotateInDiagonal2","rotateOutDiagonal2","rotateInHor","rotateOutHor","rotateInVer","rotateOutVer","direction","shakeHor","shakeVer","shakeTop","shakeBottom","shakeRight","shakeLeft","shakeCenter","shakeTr","shakeBr","shakeBl","shakeTl","heartbeatBase","animationTimingFunction","pulsateBase","pulsateParams","fromScale","toScale","blinkBase","pulsateFwd","pulsateBck","heartbeat","blink","midScale","scaleInCenter","scaleInBl","scaleInVerCenter","scaleInTop","scaleInLeft","scaleInVerTop","scaleInTr","scaleInTl","scaleInVerBottom","scaleInRight","scaleInHorCenter","scaleInBr","scaleInHorLeft","scaleInBottom","scaleInHorRight","scaleOutCenter","scaleOutBl","scaleOutBr","scaleOutVerCenter","scaleOutVerTop","scaleOutVerBottom","scaleOutTop","scaleOutLeft","scaleOutTr","scaleOutTl","scaleOutRight","scaleOutBottom","scaleOutHorCenter","scaleOutHorLeft","scaleOutHorRight","fromPosition","toPosition","slideInTop","slideInLeft","slideInRight","slideInBottom","slideInTr","slideInTl","slideInBr","slideInBl","slideOutTop","slideOutRight","slideOutBottom","slideOutLeft","slideOutTr","slideOutBr","slideOutBl","slideOutTl","swingBase","swingParams","back","swingOutParams","swingInTopFwd","swingInRightFwd","swingInBottomFwd","swingInLeftFwd","swingInTopBck","swingInRightBck","swingInBottomBck","swingInLeftBck","swingOutTopFwd","swingOutRightFwd","swingOutBottomFwd","swingOutLefttFwd","swingOutTopBck","swingOutRightBck","swingOutBottomBck","swingOutLeftBck","height","startHeight","endHeight","growVerIn","growVerOut","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","__","this","constructor","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","pop","push","__values","o","s","m","__read","ar","error","__spread","concat","IgxNavigationService","navs","add","id","navItem","remove","get","toggle","args","_i","_a","open","close","Injectable","IgxNavigationToggleDirective","nav","state","toggleNavigationDrawer","Directive","selector","Input","HostListener","IgxNavigationCloseDirective","closeNavigationDrawer","NgModule","declarations","exports","providers","queue","counter","eventListenerAdded","run","fn","listener","event","data","cloneArray","array","deep","arr","cloneValue","cloneHierarchicalArray","childDataKey","array_1","array_1_1","item","clonedItem","isArray","mergeObjects","obj1","obj2","mergeWith","objValue","srcValue","isDate","Date","getTime","Map","Set","isObject","_c","keys","_d","parseDate","isNaN","toString","isEqual","getNodeSizeViaRange","range","node","overflow","isFirefox","selectNodeContents","width","getBoundingClientRect","isIE","navigator","appVersion","indexOf","isEdge","test","userAgent","platformId","isBrowser","isPlatformBrowser","isIOS","window","isLeftClick","button","flatten","forEach","el","children","toArray","providedIn","type","Inject","PLATFORM_ID","HORIZONTAL_NAV_KEYS","NAVIGATION_KEYS","ROW_EXPAND_KEYS","split","ROW_COLLAPSE_KEYS","ROW_ADD_KEYS","SUPPORTED_KEYS","from","HEADER_KEYS","resizeObservable","Observable","observer","instance","ResizeObserver","entries","observe","disconnect","compareMaps","map1","map2","size","match","keys_1","keys_1_1","has","resolveNestedPath","obj","path","parts","current","shift","prop","reverseMapper","mapping","_prop","yieldingLoop","count","chunkSize","callback","chunk","end","Math","min","cb","setImmediate","addEventListener","Function","undefined","windowLocation","location","postMessage","protocol","host","reverseAnimationResolver","oppositeAnimation","SortingDirection","horizontalAnimations","verticalAnimations","isHierarchyMatch","h1","h2","every","level","index","fieldName","getHierarchy","gRow","hierarchy","expression","groupParent","unshift","DATE_TYPE","DefaultSortingStrategy","_instance","sort","dir","ignoreCase","valueResolver","_this","reverse","Desc","arraySort","compareObjects","compareValues","a","bn","toLowerCase","compareFn","NoopSortingStrategy","expressions","PagingError","FilteringLogic","FilteringExpressionsTreeType","IgxSorting","grid","sortDataRecursive","groupedRecordsByExpression","groupval","res","len","getFieldValue","comparer","groupingComparer","expressionIndex","j","expr","gbData","gbDataLen","exprsLen","dataLen","strategy","getColumnByName","dataType","groupDataRecursive","parent","metadata","groupsRecords","fullResult","expansion","column","group","this_1","groupRow","records","groups","renderedRowHeight","expandState","find","expanded","defaultExpanded","recursiveResult","group_1","e_1","group_1_1","groupItem","slice","IgxDataRecordSorting","_super","IgxGrouping","groupBy","FilteringExpressionsTree","operator","filteringOperands","empty","expressionTree","findIndex","isFilteringExpressionsTreeForColumn","expressionsTree","NoopFilteringStrategy","filter","advancedExpressionsTree","TransactionType","TransactionEventOrigin","BaseFilteringStrategy","findMatchByExpression","rec","cond","condition","val","logic","searchVal","matchRecord","matchOperand","operand","And","Or","FilteringStrategy","_instace","DataType","String","Number","Boolean","DataUtil","sorting","treeGridSort","hierarchicalData","hr","cloneTreeGridRecord","hierarchicalRecord","rowID","isFilteredOutParent","grouping","splice","page","dataLength","recordsPerPage","countPages","countRecords","None","IncorrectPageIndex","IncorrectRecordsPerPage","ceil","correctPagingState","maxPage","mergeTransactions","transactions","primaryKey","deleteRows","rowId","transaction","UPDATE","newValue","DELETE","ADD","map","mergeHierarchicalTransactions","findParentFromPath","collection","updateIndex","x","deleteIndex","transactions_1","transactions_1_1","parseValue","parseFloat","path_1","path_1_1","ExportUtilities","getKeysFromData","dataEntry","dataEntryMiddle","floor","dataEntryLast","keys1","keys2","keys3","isSpecialData","saveBlobToFile","blob","fileName","document","createElement","msSaveOrOpenBlob","url","URL","createObjectURL","download","href","appendChild","click","removeChild","revokeObjectURL","stringToArrayBuffer","buf","ArrayBuffer","view","Uint8Array","charCodeAt","hasValue","isNullOrWhitespaces","trim","GridBaseAPIService","destroyMap","get_column_by_name","name","columnList","col","field","get_summary_data","filteredData","hasPinnedRecords","_filteredUnpinnedData","enabled","getAggregatedChanges","getTransactionLog","getRowData","get_all_data","get_row_index_in_data","dataCollection","record","recordRef","get_row_by_key","rowSelector","dataRowList","row","rowData","get_row_by_index","rowIndex","rowList","get_cell_by_key","cells","cell","get_cell_by_index","columnIndex","get_cell_by_visible_index","visibleColumnIndex","submit_value","crudService","update_cell","editValue","cellEditingBlocked","cancel","exitCellEdit","submit_add_value","update_add_cell","endAddRow","createEditEventArgs","oldValue","cellEdit","emit","doneArgs","createDoneEditEventArgs","cellEditDone","summaryService","clearSummaryCache","updateData","selectionService","isRowSelected","deselectRow","selectRowById","hasSummarizedColumns","removeSummaries","rowEditable","_pipeTrigger","rowValueInDataSource","rowCurrentValue","rowNewValue","_update_row","rowInEditMode","newData","transactionState","getState","update_row","selected","hasSummarized","rowEdit","cachedRowData","hasChanges","endPending","newId","rowEditDone","update_row_in_array","remove_grouping_expression","sortingState","sortingExpressions","prepare_sorting_expression","sort_multiple","expressions_1","expressions_1_1","each","term","conditionOrExpressionsTree","filteringTree","filteringExpressionsTree","endEdit","paging","fieldFilterIndex","prepare_filtering_expression","filter_global","_b","columns","filteringIgnoreCase","clear_filter","filteringState","clear_sort","insertAtIndex","newExpressionsTree","oldExpressionsTreeIndex","newExpression","stateCollections","maxCollection","maxExpr","myExpr","clear_groupby","should_apply_number_style","get_data","includeTransactions","dataWithAddedInTransactionRows","get_filtered_data","getSortStrategyPerColumn","sortStrategy","addRowToData","parentRowID","deleteRowFromData","deleteRowById","hasRowInNonDeletedState","onRowDeleted","clearHeaderCBState","notifyChanges","dataAfterDelete","refreshSearch","perPage","get_row_id","row_deleted_transaction","get_row_expansion_state","states","expansionStates","getDefaultExpandState","set_row_expansion_state","expandedStates","allow_expansion_state_change","onRowToggle","set","get_rec_by_id","isToggleKey","TreeGridFilteringStrategy","filterImpl","filteredChildren","IgxTreeGridFilteringPipe","gridAPI","hierarchyData","filterStrategy","advancedFilteringExpressionsTree","pipeTrigger","filteringPipeTrigger","pinned","resetFilteredOutProperty","setFilteredData","expandAllRecursive","updateNonProcessedRecord","Pipe","pure","CsvFileTypes","IgxBaseExporter","flatRecords","_isTreeGrid","_indexOfLastPinnedColumn","_sort","onExportEnded","EventEmitter","onRowExport","onColumnExport","_columnWidthList","export","options","Error","_columnList","hidden","hiddenColumns","lastVisbleColumnIndex","columnHeader","header","exportColumn","ignoreColumnsVisibility","ignoreColumnsOrder","visibleIndex","columnWidth","columnInfo","skip","formatter","skipFormatter","max","hiddenColumn","prepareData","exportData","k","fill","skippedPinnedColumnsCount","columnsWithoutHeaderCount","columnExportArgs","dataToExport","exportRow","exportDataImplementation","resetDefaults","rowArgs","reduce","rawValue","shouldApplyFormatter","originalRowData","rootRecords","prepareHierarchicalData","ignoreFiltering","filteringLogic","ignoreSorting","CharSeparatedValueData","_data","valueDelimiter","_headerRecord","_dataRecords","_eor","_escapeCharacters","_delimiterLength","_isSpecialData","setDelimiter","_delimiter","processHeaderRecord","processDataRecords","prepareDataAsync","processDataRecordsAsync","dr","processField","escapeChars","safeValue","some","includes","recordData","keyName","processRecord","join","currentData","dataRecords","IgxExporterOptionsBase","_fileExtension","setFileName","_fileName","endsWith","IgxCsvExporterOptions","fileType","getExtensionFromFileType","setFileType","fType","extension","CSV","TSV","TAB","_valueDelimiter","_fileType","oldExt","newName","replace","ExcelFolderTypes","ExcelFileTypes","IgxCsvExporterService","_stringData","saveFile","csvData","exportFile","Blob","Output","ExcelStrings","getRels","XML_STRING","getApp","worksheetName","getCore","getTheme","getStyles","hasNumberValues","hasDateValues","cellXFCount","additionalCellXF","getWorkbook","getWorksheetRels","getWorkbookRels","hasSharedStrings","retVal","SHARED_STRING_RELATIONSHIP","getSheetXML","dimension","freezePane","cols","sheetData","hasTable","hasGroupedRows","outlineLevel","tableParts","sheetOutlineProp","sOutlineLevel","getSharedStringXML","uniqueCount","table","getContentTypesXML","contentTypes","getTablesXML","tableColumns","getExcelColumn","returnString","char","fromCharCode","RootRelsFile","writeElement","folder","worksheetData","file","AppFile","CoreFile","WorkbookRelsFile","isEmpty","ThemeFile","WorksheetFile","maxOutlineLevel","rowHeight","dictionary","dataDictionary","columnCount","saveValue","rowCount","isTreeGridData","sCollapsed","sHidden","hasCollapsedParent","rowOutlineLevel","cellData","getCellData","columnWidths","widthInTwips","MIN_WIDTH","indexOfLastPinnedColumn","ignorePinning","frozenColumnCount","exportAsTable","writeElementAsync","rows","firstCell","rowDataArr","processRow","originalData","columnName","cellValue","savedValue","isSavedAsString","isSavedAsDate","timeZoneOffset","getTimezoneOffset","isoString","toISOString","substring","StyleFile","WorkbookFile","ContentTypesFile","SharedStringsFile","dict","sortedValues","getKeys","sharedStrings","sortedValues_1","sortedValues_1_1","getSanitizedValue","stringsCount","TablesFile","lastColumn","values","sortString","sortingExpression","sc","WorksheetRelsFile","RootExcelFolder","childFiles","childFolders","RootRelsExcelFolder","DocPropsExcelFolder","XLExcelFolder","XLRelsExcelFolder","ThemeExcelFolder","WorksheetsExcelFolder","TablesExcelFolder","WorksheetsRelsExcelFolder","ExcelElementsFactory","getExcelFolder","getExcelFile","WorksheetDataDictionary","columnWidthsList","_dictionary","_widthsDictionary","_counter","dirtyKeyCollections","_columnWidths","_columnTypeInfo","isHeader","isFinite","sanitizedValue","sanitizeValue","getValue","_keysAreValid","_keys","getTextWidth","metrics","getContext","measureText","TEXT_PADDING","_context","canvas","font","DEFAULT_FONT","WorksheetData","initializeData","_columnCount","_rowCount","_dataDictionary","actualData","IgxExcelExporterService","populateFolderAsync","zip","childFolder","folderInstance","zipFolder","folderName","_g","childFile","fileInstance","maxLevel_1","columnWidthList","_xlsx","JSZip","rootFolder","generateAsync","ZIP_OPTIONS","xlsx","atob","compression","HorizontalAlignment","VerticalAlignment","RelativePositionStrategy","RelativePosition","AbsolutePosition","IgxExcelExporterOptions","_columnWidth","_rowHeight","_worksheetName","DeprecateMethod","message","isMessageShown","descriptor","originalMethod_1","targetName","showMessage","DeprecateProperty","getter_1","setter_1","messageToDisplay","originalDescriptor","newKey","generateUniqueKey","configurable","enumerable","isDevMode","console","warn","FlipDirection","Util","getTargetRect","targetRect","bottom","left","right","top","HTMLElement","Point","targetPoint","getViewportRect","documentElement","clientWidth","clientHeight","scrollPosition","getViewportScrollPosition","documentRect","horizontalScrollPosition","scrollLeft","scrollX","verticalScrollPosition","scrollTop","scrollY","cloneInstance","object","clonedObj","getPrototypeOf","settings","ConnectedPositioningStrategy","_defaultSettings","horizontalDirection","Right","verticalDirection","Bottom","horizontalStartPoint","Left","verticalStartPoint","openAnimation","closeAnimation","minSize","calculateElementRectangles","contentElement","elementRect","position","initialCall","targetElement","rects","setStyle","clone","element","connectedFit","horizontalOffset","verticalOffset","startPoint","wrapperRect","parentElement","round","Center","Top","Middle","GlobalPositionStrategy","classList","setPosition","justifyContent","alignItems","scrollContainer","NoOpScrollStrategy","initialize","overlayService","attach","detach","ScrollStrategy","ContainerPositionStrategy","BaseFitPositionStrategy","contentElementRect","_initialSettings","viewPortRect","updateViewPortFit","shouldFitInViewPort","fitInViewport","calculateLeft","fitHorizontal","forward","calculateTop","fitVertical","ElasticPositionStrategy","transformString","maxReduction","leftExtend","rightExtend","reduction","translation","topExtend","bottomExtend","AutoPositionStrategy","canFlipHorizontal","flipHorizontal","flipAnimation","horizontal","horizontalPush","canFlipVertical","flipVertical","vertical","verticalPush","flippedStartPoint","flippedDirection","leftBorder","rightBorder","topBorder","bottomBorder","abs","flipDirection","updateAnimation","isHorizontalAnimation","isVerticalAnimation","warningShown","IgxOverlayService","_factoryResolver","_appRef","_injector","builder","_zone","platformUtil","_componentId","_overlayInfos","destroy$","Subject","_cursorStyleIsSet","excludeFromOutsideClick","positionStrategy","scrollStrategy","modal","closeOnOutsideClick","closeOnEscape","onOpening","onAppended","onOpened","onClosing","onClosed","onAnimation","documentClicked","ev","info","target_1","composed","composedPath","overlayElement","elementRef","nativeElement","contains","closeAnimationPlayer","hasStarted","_hide","repositionAll","reposition","_document","createAbsoluteOverlaySettings","outlet","positionSettings","createAbsolutePositionSettings","createRelativeOverlaySettings","createRelativePositionSettings","createPositionStrategy","Above","Below","After","Before","Default","Connected","Elastic","Auto","component","moduleRef","getOverlayInfo","show","compOrId","getOverlayById","_show","hide","hideAll","overlayInfo","setOffset","deltaX","deltaY","transformX","transformY","translate","eventArgs","componentRef","detachView","hostView","destroy","initialSize","hook","placeElementHook","moveElementToOverlay","changeDetectorRef","detectChanges","updateSize","addOutsideClickListener","addResizeHandler","addCloseOnEscapeListener","wrapperElement","applyAnimationParams","playOpenAnimation","visibility","removeOutsideClickListener","removeResizeHandler","child","parentNode","playCloseAnimation","onCloseDone","ngZone","ElementRef","dynamicFactory","factoryResolver","componentFactoryResolver","resolveComponentFactory","injector","dynamicComponent","attachView","insertBefore","getWrapperElement","getContentElement","getOverlayElement","wrapper","content","stopPropagation","_overlayElement","cleanUp","removeCloseOnEscapeListener","openAnimationPlayer","animationBuilder","build","innerRenderer","_renderer","openAnimationInnerPlayer","engine","players","onDone","reset","closeAnimationInnerPlayer","getPosition","init","animationPlayer","animationType","play","animationOptions","transitionDuration","transitionTimingFunction","fromEvent","pipe","takeUntil","subscribe","_cursorOriginalValue","cursor","shouldRemoveClickEventListener_1","removeEventListener","closingOverlaysCount","defaultView","_keyPressEventListener","targetOverlay","unsubscribe","ngOnDestroy","complete","ComponentFactoryResolver","ApplicationRef","Injector","AnimationBuilder","DOCUMENT","NgZone","PlatformUtil","AbsoluteScrollStrategy","_initialized","onScroll","_overlayService","_id","_scrollContainer","runOutsideAngular","addScrollEventListener","BlockScrollStrategy","preventDefault","_sourceElement","_initialScrollTop","_initialScrollLeft","CloseScrollStrategy","cumulativeScrollTop","cumulativeScrollLeft","initialScrollTop","_threshold","initialScrollLeft","scrollHeight","IgxBaseTransactionService","_isPending","_pendingTransactions","_pendingStates","onStateUpdate","updateState","undo","redo","mergeChanges","getAggregatedValue","updateValue","commit","clear","startPending","mergeValues","first","second","IgxTransactionService","_transactions","_redoStack","_undoStack","_states","verifyAddedTransaction","addTransaction","actions","origin","pending","pendingState","pendingChange","change","aggregatedValue","originalValue","END","updateRecord","delete","CLEAR","lastActions","currentActions","currentActions_1","e_3","currentActions_1_1","UNDO","actions_1","actions_1_1","action","REDO","cleanState","JSON","stringify","IgxHierarchicalTransactionService","clearArraysFromObject","currentState","primaryKeyOrId","IgxToggleDirective","cdr","navigationService","_overlaySubFilter","_overlayId","_collapsed","overlayClosed","closedEventArgs","owner","collapsed","overlaySettings","hasOpenAnimation","hasCloseAnimation","openEventArgs","_overlayAppendedSub","appendedEventArgs","_overlayOpenedSub","openedEventArgs","_overlayClosingSub","clearSubscription","_overlayClosedSub","isClosing","ngOnInit","subscription","closed","exportAs","ChangeDetectorRef","Optional","HostBinding","IgxToggleActionDirective","_target","_overlayDefaults","onClick","clonedSettings","updateOverlaySettings","positionStrategyClone","IgxOverlayOutletDirective","Navigate","DropDownActionKey","ESCAPE","ENTER","SPACE","IGX_DROPDOWN_BASE","InjectionToken","IgxSelectionAPIService","selection","componentID","newSelection","get_empty","sel","add_item","itemID","add_items","itemIDs","clearSelection","select_item","select_items","delete_item","delete_items","deselectedItem","deselect_item","deselect_items","is_item_selected","first_item","are_all_selected","dataCount","are_none_selected","get_all_ids","NEXT_ID","IgxDropDownGroupComponent","role","groupClass","disabled","labelId","Component","template","IgxDropDownItemBaseDirective","dropDown","_focused","_selected","_index","_disabled","selectedChange","itemIndex","displayDensity","isSelectable","items","ngDoCheck","dropDownSelectedItem","selectedItem","hasIndex","selectItem","ensureItemFocus","allowItemsFocus","focusedItem","focused","focus","preventScroll","clicked","IgxDropDownItemComponent","focusedState","focusedIndex","DisplayDensity","comfortable","cosy","compact","DisplayDensityToken","DisplayDensityBase","displayDensityOptions","onDensityChanged","oldDisplayDensityOptions","_displayDensity","currentDisplayDensity","densityChangedArgs","oldDensity","newDensity","initialDensity","getComponentDensityClass","baseStyleClass","IgxDropDownBaseDirective","_displayDensityOptions","_focusedItem","onSelection","maxHeight","cssClass","headers","onItemActionKey","oldSelection","navigate","currentIndex","newIndex","getNearestSiblingFocusableItemIndex","navigateItem","startIndex","oldItem","newItem","scrollToHiddenItem","navigateFirst","Down","navigateLast","Up","navigateNext","navigatePrev","parentRect","_viewContainer","notVirtual","ViewContainerRef","ViewChild","read","static","VirtualHelperBaseDirective","scrollAmount","_size","_afterViewInit","_detached","_scrollNativeSize","calculateScrollNativeSize","ngAfterViewInit","delayTime","throttleTime","handleMutations","destroyed","hasSize","contentRect","isAttachedToDom","restoreScroll","div","scrollWidth","offsetWidth","HVirtualHelperComponent","zone","cssClasses","VirtualHelperComponent","scrollNativeSize","IgxScrollInertiaDirective","wheelStep","inertiaStep","swipeToleranceX","inertiaDeltaY","inertiaDeltaX","inertiaDuration","_savedSpeedsX","setPointerCaptureFName","Element","releasePointerCaptureFName","baseDeltaMultiplier","firefoxDeltaMultiplier","targetElem","evt","onWheel","onTouchStart","onTouchMove","onTouchEnd","onPointerDown","onPointerUp","onMSGestureStart","onMSGestureChange","IgxScrollInertiaScrollContainer","ctrlKey","scrollDeltaX","scrollDeltaY","scrollStep","minWheelStep","_startX","_startY","wheelDeltaX","sign","deltaScaledX","deltaMode","calcAxisCoords","wheelDeltaY","deltaScaledY","IgxScrollInertiaDirection","_scrollToX","curScrollLeft","maxScrollLeft","parseInt","_scrollToY","preventParentScroll","curScrollTop","maxScrollTop","offsetHeight","MSGesture","cancelAnimationFrame","_touchInertiaAnimID","touch","touches","_touchStartX","pageX","_touchStartY","pageY","_lastTouchEnd","_lastTouchX","_lastTouchY","_savedSpeedsY","_totalMovedX","_offsetRecorded","_offsetDirection","_touchPrevented","scrolledXY","destX","destY","timeFromLastTouch","speedX","speedY","_lastMovedX","_lastMovedY","_scrollTo","_inertiaInit","pointerType","_pointer","pointerId","_gestureObject","addPointer","screenX","screenY","touchPos","dest","stepModifer","_nextX","_nextY","requestAnimationFrame","imports","CommonModule","IgxForOfSyncService","_master","isMaster","directive","igxForScrollOrientation","setMaster","forced","orientation","resetMaster","sizesCache","IgxForOfScrollSyncService","_masterScroll","setScrollMaster","scroll","getScrollMaster","IgxForOfContext","$implicit","even","IgxForOfDirective","_template","_differs","resolver","syncScrollService","_totalItemCount","onChunkLoad","onScrollbarVisibilityChanged","onContentSizeChange","onDataChanged","onBeforeViewDestroyed","onChunkPreload","_sizesCache","_differ","heightCache","MAX_PERF_SCROLL_DIFF","_virtHeight","_virtHeightRatio","_virtScrollTop","_bScrollInternal","_embeddedViews","contentResizeNotify","totalItemCount","newSize","initSizesCache","igxForOf","sizeDiff","scrollComponent","_adjustScrollPositionAfterSizeChange","dc","getScroll","igxForContainerSize","removeScrollEventListeners","func","verticalScrollHandler","isScrollable","totalSize","vc","igxForScrollContainer","igxForSizePropName","dcFactory","DisplayContainerComponent","createComponent","scrollDirection","touchAction","_calculateChunkSize","getIndexAt","input","embeddedView","_vcr","createEmbeddedView","getContextIndex","factory","_maxHeight","_calcMaxBrowserHeight","_calcHeight","bind","destructor","leading","trailing","runTask","updateSizes","onHScroll","hvFactory","_updateHScrollOffset","contentObserver","ngOnChanges","changes","forOf","currentValue","igxForTrackBy","getTypeNameForDebugging","defaultItemSize","firstChange","_applyChanges","containerSize","_recalcOnContainerChange","diff","_updateSizeCache","markForCheck","_updateScrollOffset","addScrollTop","addTop","originalVirtScrollTop","maxVirtScrollTop","scrollOffset","fixedUpdateAllElements","maxRealScrollTop","scrollTo","isRemote","isPrevItem","nextScroll","_adjustToIndex","scrollNext","scr","endIndex","scrollPrev","scrollNextPage","scrollPrevPage","getColumnScrollLeft","colIndex","getItemCountInView","getSizeAt","getScrollNativeSize","getScrollForIndex","_calcVirtualScrollTop","prevStartIndex","recalcUpdateSizes","diffs","totalDiff","l","rNodes","rootNodes","nodeType","Node","ELEMENT_NODE","nextElementSibling","rNode","h","igxForItemSize","oldVal","newVal","currDiff","totalWidth","reducer","acc","scrToBottom","_isScrolledToBottom","hSum","_isAtBottomIndex","updatesToIndex","sumDiffs","inScrollTop","newStart","prevStart","moveApplyScrollNext","moveApplyScrollPrev","fixedApplyScroll","prevIndex","start","container","embView","scrollFocus","updateTemplateContext","context","insert","activeElement","blur","_trackByFn","prevChunkSize","applyChunkSizeChange","_recalcScrollBarSize","embeddedViewCopy","_calcMaxChunkSize","getElement","viewref","nodeName","elem","getElementsByTagName","_getItemSize","maxLength","sum","availableSize","accumulator","currentItem","curItem","prevItem","prevSize","midIdx","cmp","resetScrollPosition","scrollable","removeLastElem","oldElem","addLastElem","elemIndex","_updateVScrollOffset","currentScrollTop","realPercentScrolled","dim","TemplateRef","IterableDiffers","IgxGridForOfDirective","_platformUtil","syncService","onDataChanging","getItemSize","summaries","masterSizesCache","itemsDimension","oldHeight","handleCacheChanges","identityChanges","newHeightCache","newSizesCache","newHeight","numRemovedItems","forEachRemovedItem","forEachIdentityChange","previousIndex","forEachItem","assumeMaster","onStable","_updateViews","entryComponents","IgxScrollInertiaModule","IgxDropDownComponent","virtDir","toggleDirective","scrollContainerRef","updateScrollPosition","setSelectedItem","collectionLength","direction_1","subRequired","isIndexOutOfBounds","take","skipHeader","virtState","currentPosition","itemPosition","indexOutOfChunk","scrollNeeded","targetScroll","focusItem","updateItemFocus","onToggleOpening","_scrollPosition","onToggleContentAppended","scrollToItem","onToggleOpened","onToggleClosing","onToggleClosed","calculateScrollPosition","setTimeout","scrollDelta","elementHeight","isSelectionValid","provide","useExisting","ContentChild","ContentChildren","forwardRef","descendants","IgxDropDownItemNavigationDirective","dropdown","handleKeyDown","onArrowUpKeyDown","onArrowDownKeyDown","onHomeKeyDown","onEndKeyDown","Self","IgxHintPosition","IgxToggleModule","IgxHintDirective","_element","_position","START","isPositionStart","isPositionEnd","toUpperCase","_applyPosition","IgxInputState","nativeValidationAttributes","IgxInputDirective","inputGroup","ngModel","formControl","_valid","INITIAL","isInput","isTextArea","checkValidity","hasAttribute","required","isRequired","INVALID","onFocus","isFocused","onBlur","ngControl","valid","_hasValidators","onInput","hasPlaceholder","control","validator","validation","tagName","_statusChanges$","statusChanges","onStatusChanged","asyncValidator","touched","dirty","VALID","placeholder","nativeValidationAttributes_1","nativeValidationAttributes_1_1","nativeValidationAttribute","IgxInputGroupBase","NgModel","FormControlName","defaultClass","IgxPrefixDirective","IgxInputGroupEnum","IgxSuffixDirective","IgxInputGroupThemeEnum","IGX_INPUT_GROUP_TYPE","IgxInputGroupComponent","_inputGroupType","_type","_filled","_variant","suppressInputAutofocus","hasWarning","hintClickHandler","ngAfterContentInit","variant","getComputedStyle","getPropertyValue","hints","IgxLabelDirective","IgxPrefixModule","IgxSuffixModule","IgxAutocompleteDirective","_shouldBeOpen","onItemSelected","autofill","select","model","setValue","highlightFirstItem","defaultSettings","autocompleteSettings","listId","onArrowDown","onTab","IgxDropDownModule","IgxButtonDirective","_defaultType","_cssClassPrefix","buttonClick","removeClass","addClass","_color","color","_backgroundColor","_label","setAttribute","Renderer2","IgxDividerType","SOLID","DASHED","IgxDividerDirective","_inset","middle","baseMargin","DragDirection","IgxDefaultDropStrategy","dropAction","drag","drop","atIndex","IgxAppendDropStrategy","dragElement","dropAreaElement","IgxPrependDropStrategy","IgxInsertDropStrategy","_pageX","_pageY","baseClass","IgxDragDirective","viewContainer","renderer","ghostContext","dragTolerance","dragDirection","BOTH","ghost","ghostClass","dragStart","dragMove","dragEnd","dragClick","ghostCreate","ghostDestroy","transitioned","selectDisabled","defaultReturnDuration","animInProgress","_lastX","_lastY","_dragStarted","_ghostHostX","_ghostHostY","_pointerDownId","_clicked","_lastDropArea","_destroy","_removeOnDestroy","_offsetX","_defaultOffsetX","_offsetY","_defaultOffsetY","IgxDragLocation","baseOriginLeft","baseOriginTop","PointerEvent","ghostElement","ghostLeft","baseLeft","ghostTop","baseTop","getTransformX","getTransformY","ghostMarginLeft","ghostMarginTop","dragHandles","pointerEventsEnabled","throttle","interval","animationFrameScheduler","onPointerMove","onPointerLost","touchEventsEnabled","onTransitionEnd","setLocation","newLocation","offsetHostX","ghostHost","ghostHostOffsetLeft","offsetHostY","ghostHostOffsetTop","getWindowScrollLeft","getWindowScrollTop","setTransformXY","transitionToOrigin","customAnimArgs","startLocation","_ghostStartX","_ghostStartY","createGhost","transitionProperty","timingFunction","transitionDelay","transitionTo","movedElem","targetRects","dragIgnoredElems","handleFound","handle","currentTarget","setPointerCapture","ghostOffsetX","ghostOffsetY","totalMovedX","totalMovedY","dragStartArgs_1","originalEvent","startX","startY","moveArgs","nextPageX","nextPageY","setPageX","setPageY","updatedTotalMovedX","VERTICAL","updatedTotalMovedY","HORIZONTAL","lastMovedX","lastMovedY","translateX","translateY","dispatchDragEvents","dispatchDropEvent","dynamicGhostRef","ghostTemplate","cloneNode","createEventArgs","topDropArea","customEventArgs","elementsFromPoint","getElementsAtPoint","getAttribute","dispatchEvent","ghostDestroyArgs","viewPortX","pageXOffset","viewPortY","pageYOffset","elements","eventName","dragLeaveEvent","createEvent","initCustomEvent","posX","matrix","posY","ghostPosition","offsetParent","IgxDragHandleDirective","IgxDragIgnoreDirective","IgxDropDirective","enter","over","leave","dropped","droppable","dragover","_dropStrategy","classRef","onDragEnter","onDragLeave","onDragOver","elementPosX","elementPosY","offsetX","detail","offsetY","dragData","isDragLinked","onDragDrop","elementsAtPoint","insertIndex","getInsertIndexAt","dragLinkArray","dragChannel","dropLinkArray","dropChannel","dropLinks","dragLinks","draggedDir","dropChildren","childUnder","draggedElemIndex","IgxFilterOptions","inputValue","get_value","textContent","valueToTest","matchFn","metConditionFn","overdueConditionFn","IgxFilterDirective","filtering","filtered","filterOptions","previousValue","IgxFilterPipe","filteredItems","IgxFocusDirective","comp","focusState","trigger","getEditElement","NG_VALUE_ACCESSOR","IgxLayoutDirective","wrap","justify","itemAlign","display","IgxFlexDirective","grow","shrink","flex","order","basis","MASK_FLAGS","MaskParsingService","applyMask","inputVal","maskOptions","outputVal","mask","format","literals","getMaskLiterals","literalKeys","nonLiteralIndices","getNonLiteralIndices","literalValues","mask_1","mask_1_1","promptChar","replaceCharAt","nonLiteralValues","getNonLiteralValues","validateCharOnPosition","pos","nonLiteralValues_1","nonLiteralValues_1_1","parseValueFromMask","maskedValue","maskedValue_1","maskedValue_1_1","replaceInMask","literalsPositions","chars","strValue","inputChar","isValid","charAt","RegExp","nonLiteralsIndices","value_1","value_1_1","noop","IgxMaskDirective","maskParser","onValueChange","_end","_start","_oldText","_dataValue","_onTouchedCallback","_onChangeCallback","selectionStart","selectionEnd","_hasDropAction","_droppedData","ngAfterViewChecked","onKeyDown","keyCode","charCode","_stopPropagation","_key","onInputChanged","valueToParse","replacedData","setSelectionRange","rawVal","includeLiterals","formattedValue","afterInput","onPaste","showMask","showDisplayValue","onDrop","dataTransfer","getData","focusedValuePipe","displayValuePipe","writeValue","registerOnChange","registerOnTouched","multi","RadioLabelPosition","BEFORE","AFTER","nextId","IgxRadioComponent","labelPosition","tabindex","disableRipple","ariaLabelledBy","ariaLabel","checked","inputId","_value","_onRadioChange","_onRadioClick","nativeRadio","_onLabelClick","radio","IgxRippleDirective","rippleTarget","rippleDuration","rippleDisabled","rippleElementClass","rippleHostClass","_centered","animationQueue","centered","onMouseDown","_ripple","setStyles","rippleElement","styleParams","radius","rippleColor","querySelector","rectBounds","clientX","clientY","dimensions","IgxRadioGroupDirective","_name","_isInitialized","_labelPosition","_required","_selectRadioButton","_setRadioButtonNames","_setRadioButtonsRequired","_disableRadioButtons","_setRadioButtonLabelPosition","_initRadioButtons","radioButtons","props_1","_selectedRadioButtonChanged","IgxRippleModule","IgxTextHighlightDirective","_div","_observer","_nodeWasRemoved","_forceEvaluation","_activeElementIndex","_defaultCssClass","_defaultActiveCssClass","groupName","onActiveElementChanged","deactivate","activateIfNecessary","_lastSearchInfo","setActiveHighlight","highlight","highlightGroupsMap","clearActiveHighlight","clearHighlight","_valueChanged","searchedText","matchCount","caseSensitive","exactMatch","_container","firstElementChild","text","caseSensitiveResolved","exactMatchResolved","searchNeedsEvaluation","clearChildElements","getHighlightedText","activate","MutationObserver","mutationList","mutation","removedNodes","addedNodes","childList","spans","querySelectorAll","elementToActivate","activeCssClass","elementToDeactivate","originalContentHidden","setProperty","searchText","appendDiv","stringValue","contentStringResolved","searchTextResolved","appendSpan","appendText","foundIndex","previousMatchEnd","textElement","createText","outerHTML","span","containerClass","IgxTextSelectionDirective","selectionState","IgxTooltipTargetDirective","_navigationService","showDelay","hideDelay","tooltipDisabled","onTooltipShow","onTooltipHide","useAnimation","hidingArgs","tooltip","checkOutletAndOutsideClick","preMouseEnterCheck","toBeShown","clearTimeout","timeoutId","toBeHidden","forceClose","mergedOverlaySettings","preMouseLeaveCheck","onMouseEnter","showingArgs","onMouseLeave","showTooltip","onDocumentTouchStart","hideTooltip","IgxTooltipDirective","forceOpen","finish","DatePart","DATE_CHARS","TIME_CHARS","DatePickerUtil","inputData","dateTimeParts","dp","getCleanVal","Month","Year","daysInMonth","Hours","Minutes","Seconds","parseDateTimeFormat","locale","DEFAULT_LOCALE","getDefaultInputFormat","formatArray","currentPart","determineDatePart","ensureLeadingZero","Intl","DateTimeFormat","formatToParts","SHORT_DATE_MASK","getDefaultLocaleMask","SEPARATOR","formatType","getMask","formatDate","timezone","formattedDate","logMissingLocaleSettings","getLocaleDateFormat","displayFormat","targetKey","FormatWidth","isDateOrTimeChar","spinDate","delta","newDate","isSpinLoop","maxDate","getFullYear","getMonth","date","getDate","setDate","spinMonth","month","setMonth","spinYear","setFullYear","spinHours","hours","getHours","setHours","spinMinutes","minutes","getMinutes","setMinutes","spinSeconds","seconds","getSeconds","setSeconds","spinAmPm","currentDate","amPmFromMask","greaterThanMaxValue","maxValue","includeTime","includeDate","_maxValue","lessThanMinValue","minValue","_minValue","part","repeat","datePart","trimEmptyPlaceholders","AmPm","Literal","parseDateFormat","maskValue","dateStruct","maskArray","monthInitPosition","dayInitPosition","yearInitPosition","initialPosition","getYearFormatType","getMonthFormatType","getDayFormatType","isDateChar","fillDatePartsPositions","getInputMask","inputMask","parseDateArray","dateFormatParts","prevDateValue","year","yearPrefix","dayStr","getDayValueFromInput","monthStr","getMonthValueFromInput","yearStr","getYearValueFromInput","yearFormat","getDateFormatPart","day","originalYear","fullYear","NaN","maskToPromptChars","PROMPT_CHAR","getModifiedDateInput","getDatePartOnPosition","datePartType","datePartFormatType","datePartValue","getDateValueFromInput","minMax","getMinMaxValue","tempValue","startIdx","endIdx","prefix","getNumericFormatPrefix","addPromptCharsEditMode","dateArray","checkForCompleteDateInput","dayValue","monthValue","yearValue","isFullInput","isFullYearInput","isValidDate","parse","formatterOptions","resolvedOptions","NUMBER_OF_MONTHS","getFullYearFromString","partPosition","yearPart","currentPos","DEFAULT_INPUT_FORMAT","IgxDateTimeEditorDirective","_locale","valueChange","validationFailed","onTouchCallback","onChangeCallback","onValidatorChange","_format","inputFormat","updateMask","_inputDateParts","updateInputFormat","_inputFormat","increment","targetDatePart","spinValue","decrement","validate","inputIsComplete","maxValueAsDate","minValueAsDate","hasTimeParts","hasDateParts","registerOnValidatorChange","setDisabledState","isDisabled","parsedDate","userInput","altKey","moveCursor","spin","_isFocused","emptyMask","getMaskedValue","toLocaleString","targetValue","getPartValue","defPlaceholder","valueInRange","formatPart","_oldValue","toTwelveHourFormat","hour","datePartInfo","partLength","prependValue","prependChar","getNewPosition","cursorPos","NG_VALIDATORS","LOCALE_ID","IgxFilteringOperand","operations","isUnary","iconName","findValueInSet","conditionList","append","operation","IgxBooleanFilteringOperand","IgxDateFilteringOperand","validateInputData","targetp","getDateParts","searchp","now","td","yesterday","dateFormat","milliseconds","getMilliseconds","IgxNumberFilteringOperand","IgxStringFilteringOperand","search","applyIgnoreCase","startsWith","filteringStateDefaults","GroupedRecords","IgxGridActionButtonComponent","onActionClick","asMenuItem","classNames","handleClick","preventEvent","LabelPosition","IgxCheckboxComponent","indeterminate","readonly","disableTransitions","checkbox","_onCheckboxChange","_onCheckboxClick","nativeCheckbox","preserveWhitespaces","IGX_CHECKBOX_REQUIRED_VALIDATOR","IgxCheckboxRequiredDirective","CheckboxRequiredValidator","IgxRow","includeNewValue","isAddRow","updatedData","IgxCell","castToNumber","inlineEditorTemplate","cellID","IgxGridCRUDService","isInCompositionMode","_cellEditingBlocked","_rowEditingBlocked","createCell","createRow","sameRow","sameCell","columnID","enterEditMode","cellInEditMode","tbody","addRow","beginAddRow","newCell","rowEditing","beginRowEdit","beginCellEdit","rowEditingBlocked","endRowEdit","rowEditEnter","endEditMode","openRowOverlay","exitRowEdit","rowEditingOverlay","endRowTransaction","enterAddMode","cellEditEnter","endCellEdit","cellEditExit","closeRowEditingOverlay","targetInEdit","IgxGridSelectionService","dragMode","keyboardState","pointerState","columnsState","temp","_ranges","rowSelection","columnSelection","selectedRowsChange","initPointerState","initKeyboardState","initColumnsState","addKeyboardRange","ranges","isCellSelectable","generateRange","primaryButton","active","ctrl","addToRange","isActiveNode","isInMap","isActive","hasColumnLayouts","layout","isActiveLayout","columnVisibleIndex","addRangeMeta","removeRangeMeta","rowStart","rowEnd","columnStart","columnEnd","keyboardStateOnKeydown","shiftTab","navigation","isDataRow","keyboardStateOnFocus","emitter","dom","kbState","isChromium","_moveSelectionChrome","dragSelect","pointerDown","pointerDownShiftKey","clearTextSelection","selectRange","mergeMap","source","pair","newValue_1","pointerEnter","buttons","pointerUp","restoreTextSelection","clearAcriveEl","getSelection","rangeCount","_selectionRange","getRangeAt","collapse","removeAllRanges","addRange","createRange","Range","selectNode","getSelectedRows","clearRowSelection","removedRec","isFilteringApplied","getRowIDs","allData","rID","emitRowSelectionEvent","selectAllRows","addedRows","clearPrevSelection","isRowSelectable","isRowDeleted","isMultiRowSelectionEnabled","removed","selectRowsWithNoEvent","rowIDs","allRowsSelected","deselectRowsWithNoEvent","selectMultipleRows","gridData","lastRowID","currIndex","getRowDataById","added","areAllRowSelected","dataItemsID","hasSomeRowSelected","currSelection","areEqualCollections","onRowSelectionChange","clearAllSelectedRows","pinnedRecordsCount","_filteredSortedUnpinnedData","filteredSortedData","rData","getSelectedColumns","isColumnSelected","selectColumn","selectColumnsRange","stateColumn","colField","emitColumnSelectionEvent","selectColumns","fields","filedStart","columnToVisibleIndex","columnsFields","visibleColumns","columnGroup","selectable","oldAdded","selectColumnsWithNoEvent","deselectColumn","deselectColumnsWithNoEvent","deselectColumns","onColumnSelectionChange","clearAllSelectedColumns","vendor","IgxRowDirective","animateAdd","onAnimationEnd","defaultCssClass","inEditMode","_rowData","isRecordPinned","pinRow","unpinRow","_addRow","multiRowLayoutRowSize","_virtDirRow","QueryList","_cells","cList","item1","item2","resolveClasses","groupingExpressions","pinnedColumns","unpinnedColumns","showRowSelectors","rowDraggable","dragRowID","editRowState","resetHorizontalForOfs","deleted","shiftKey","showActionStrip","actionStrip","onRowSelectorClick","update","isCellActive","activeNode","pin","unpin","shouldDisplayPinnedChip","animationEndHandler","indexClass","evenRowCSS","oddRowCSS","selectedClass","editClass","dirtyClass","deletedClass","mrlClass","dragClass","dragging","defaultDragIndicatorCssClass","rowDragging","beginAddRowByIndex","ViewChildren","IgxIconService","_sanitizer","_fontSet","_fontSetAliases","_cachedSvgIcons","_iconLoaded","iconLoaded","asObservable","className","registerFontSetAlias","alias","fontSetClassName","addSvgIcon","fontSet","safeUrl","bypassSecurityTrustResourceUrl","sanitize","SecurityContext","RESOURCE_URL","fetchSvg","addSvgIconFromText","iconText","cacheSvgIcon","isSvgIconCached","iconKey","getSvgIconKey","httpRequest","XMLHttpRequest","responseType","onload","request","status","statusText","responseText","onerror","send","ensureSvgContainerCreated","innerHTML","svg","oldChild","_svgContainer","DomSanitizer","IgxGridActionsBaseDirective","iconService","differs","asMenuItems","strip","isRow","IgxGridEditingActionsComponent","iconsRendered","addChild","registerIcons","startEdit","firstEditable","editable","hasEditableColumns","deleteRow","addRowHandler","asChild","isRoot","hasChildren","IgxGridPinningActionsComponent","registerSVGIcons","isRowPinningToTop","scrollToRow","pinLeft","unpinLeft","jumpDown","jumpUp","templateRef","IgxActionStripComponent","_hidden","menuOverlaySettings","classes","hostClass","actionButtons","_menuItems","menu","$event","allButtons","closeMenu","IgxActionStripMenuItemDirective","IgxIconComponent","_el","ref","ariaHidden","defaultFontSet","updateIconClass","iconColor","svgImage","noLigature","explicitLigature","IgxButtonModule","IgxIconModule","IgxAvatarSize","SMALL","MEDIUM","LARGE","IgxAvatarType","INITIALS","IMAGE","ICON","CUSTOM","IgxAvatarComponent","roundShape","src","icon","initials","imageTemplate","initialsTemplate","iconTemplate","defaultTemplate","roleDescription","getRole","getSrcUrl","IgxBadgeType","PRIMARY","INFO","SUCCESS","WARNING","ERROR","IgxBadgeComponent","IGX_EXPANSION_PANEL_COMPONENT","IgxExpansionPanelBodyComponent","panel","_labelledBy","ICON_POSITION","LEFT","NONE","RIGHT","IgxExpansionPanelHeaderComponent","_iconTemplate","lv","iconPosition","onInteraction","renderedTemplate","customIconRef","defaultIconRef","onAction","openPanel","expand","closePanel","Host","IgxExpansionPanelIconDirective","IgxExpansionPanelComponent","animationSettings","collapsedChange","onCollapsed","onExpanded","labelledBy","headerId","IgxExpansionPanelDescriptionDirective","IgxExpansionPanelTitleDirective","IgxAvatarModule","IgxBannerComponent","_bannerActionTemplate","_animationSettings","_expansionPanel","_bannerEvent","banner","openingArgs","closingArgs","onExpansionPanelOpen","onExpansionPanelClose","IgxBannerActionsDirective","ButtonGroupAlignment","IgxExpansionPanelModule","IgxButtonGroupComponent","_cdr","buttonClickNotifier$","queryListNotifier$","zIndex","multiSelection","selectedIndexes","onSelect","onUnselect","viewButtons","templateButtons","_itemContentCssClass","_isVertical","selectButton","buttonElement","indexInViewButtons","deselectButton","initButtons","_clickHandler","DateRangeType","TimeDeltaInterval","WEEKDAYS","MDAYS","stop","isLeap","weekDay","getDay","monthRange","nDays","isDateInRanges","dateInMs","ranges_1","ranges_1_1","dRanges","dateRange","dRange","datesInMs","datesInMs_1","e_2","datesInMs_1_1","Calendar","firstWeekDay","SUNDAY","_firstWeekDay","weekdays","monthdates","extraWeek","days","timedelta","generateICalendarDate","e_4","monthdatescalendar","dates","units","ret","checkRollover","setTime","full","formattedParts_1","toType","partType","literal","combined","parts_1","parts_1_1","parts_2","parts_2_1","getFirstViewDate","activeViewIdx","getDateByView","getNextMonth","getPrevMonth","getNextYear","getPrevYear","getWeekNumber","firstJan","dayOfYear","isCurrentMonth","isNextMonth","isPrevMonth","isPreviousMonth","CurrentResourceStrings","GridResStrings","igx_grid_groupByArea_message","igx_grid_groupByArea_select_message","igx_grid_groupByArea_deselect_message","igx_grid_emptyFilteredGrid_message","igx_grid_emptyGrid_message","igx_grid_filter","igx_grid_filter_row_close","igx_grid_filter_row_reset","igx_grid_filter_row_placeholder","igx_grid_filter_row_boolean_placeholder","igx_grid_filter_row_date_placeholder","igx_grid_filter_operator_and","igx_grid_filter_operator_or","igx_grid_complex_filter","igx_grid_filter_contains","igx_grid_filter_doesNotContain","igx_grid_filter_startsWith","igx_grid_filter_endsWith","igx_grid_filter_equals","igx_grid_filter_doesNotEqual","igx_grid_filter_empty","igx_grid_filter_notEmpty","igx_grid_filter_null","igx_grid_filter_notNull","igx_grid_filter_before","igx_grid_filter_after","igx_grid_filter_today","igx_grid_filter_yesterday","igx_grid_filter_thisMonth","igx_grid_filter_lastMonth","igx_grid_filter_nextMonth","igx_grid_filter_thisYear","igx_grid_filter_lastYear","igx_grid_filter_nextYear","igx_grid_filter_greaterThan","igx_grid_filter_lessThan","igx_grid_filter_greaterThanOrEqualTo","igx_grid_filter_lessThanOrEqualTo","igx_grid_filter_true","igx_grid_filter_false","igx_grid_filter_all","igx_grid_filter_condition_placeholder","igx_grid_summary_count","igx_grid_summary_min","igx_grid_summary_max","igx_grid_summary_sum","igx_grid_summary_average","igx_grid_summary_earliest","igx_grid_summary_latest","igx_grid_excel_filter_moving_left","igx_grid_excel_filter_moving_left_short","igx_grid_excel_filter_moving_right","igx_grid_excel_filter_moving_right_short","igx_grid_excel_filter_moving_header","igx_grid_excel_filter_sorting_asc","igx_grid_excel_filter_sorting_asc_short","igx_grid_excel_filter_sorting_desc","igx_grid_excel_filter_sorting_desc_short","igx_grid_excel_filter_sorting_header","igx_grid_excel_filter_clear","igx_grid_excel_custom_dialog_add","igx_grid_excel_custom_dialog_clear","igx_grid_excel_custom_dialog_header","igx_grid_excel_cancel","igx_grid_excel_apply","igx_grid_excel_search_placeholder","igx_grid_excel_select_all","igx_grid_excel_select_all_search_results","igx_grid_excel_add_to_filter","igx_grid_excel_blanks","igx_grid_excel_hide","igx_grid_excel_show","igx_grid_excel_pin","igx_grid_excel_unpin","igx_grid_excel_select","igx_grid_excel_text_filter","igx_grid_excel_number_filter","igx_grid_excel_date_filter","igx_grid_excel_boolean_filter","igx_grid_excel_custom_filter","igx_grid_advanced_filter_title","igx_grid_advanced_filter_and_group","igx_grid_advanced_filter_or_group","igx_grid_advanced_filter_end_group","igx_grid_advanced_filter_create_and_group","igx_grid_advanced_filter_create_or_group","igx_grid_advanced_filter_and_label","igx_grid_advanced_filter_or_label","igx_grid_advanced_filter_add_condition","igx_grid_advanced_filter_ungroup","igx_grid_advanced_filter_delete","igx_grid_advanced_filter_delete_filters","igx_grid_advanced_filter_initial_text","igx_grid_advanced_filter_column_placeholder","igx_grid_advanced_filter_value_placeholder","igx_grid_pinned_row_indicator","igx_grid_hiding_check_all_label","igx_grid_hiding_uncheck_all_label","igx_grid_pinning_check_all_label","igx_grid_pinning_uncheck_all_label","igx_grid_toolbar_actions_filter_prompt","igx_grid_toolbar_pinning_button_tooltip","igx_grid_toolbar_hiding_button_tooltip","igx_grid_toolbar_pinning_title","igx_grid_toolbar_hiding_title","igx_grid_toolbar_advanced_filtering_button_tooltip","igx_grid_toolbar_advanced_filtering_button_label","igx_grid_toolbar_exporter_button_tooltip","igx_grid_toolbar_exporter_button_label","igx_grid_toolbar_exporter_excel_entry_text","igx_grid_toolbar_exporter_csv_entry_text","igx_grid_snackbar_addrow_label","igx_grid_snackbar_addrow_actiontext","igx_grid_actions_edit_label","igx_grid_actions_add_label","igx_grid_add_row_label","igx_grid_actions_add_child_label","igx_grid_actions_delete_label","igx_grid_actions_pin_label","igx_grid_actions_unpin_label","igx_grid_actions_jumpUp_label","igx_grid_actions_jumpDown_label","PaginatorResStrings","igx_paginator_label","igx_paginator_pager_text","igx_paginator_first_page_button_text","igx_paginator_previous_page_button_text","igx_paginator_last_page_button_text","igx_paginator_next_page_button_text","TimePickerResStrings","igx_time_picker_ok","igx_time_picker_cancel","CalendarResStrings","igx_calendar_previous_month","igx_calendar_next_month","igx_calendar_select_month","igx_calendar_select_year","igx_calendar_range_start","igx_calendar_range_end","igx_calendar_selected_month_is","igx_calendar_first_picker_of","igx_calendar_multi_selection","igx_calendar_range_selection","igx_calendar_single_selection","igx_calendar_singular_multi_selection","igx_calendar_singular_range_selection","igx_calendar_singular_single_selection","DateRangePickerResStrings","igx_date_range_picker_date_separator","CarouselResStrings","igx_carousel_of","ListResStrings","igx_list_no_items","igx_list_loading","updateResourceStrings","currentStrings","newStrings","ScrollMonth","CalendarSelection","SINGLE","MULTI","RANGE","IgxCalendarBaseDirective","_resourceStrings","hideOutsideDays","viewDateChanged","activeViewChanged","_selection","rangeStarted","_disabledDates","_specialDates","_formatOptions","weekday","_formatViews","monthScrollDirection","scrollMonth$","stopMonthScroll$","startMonthScroll$","calendarModel","viewDate","weekStart","initFormatters","formatOptions","formatViews","selectedDates","selectedDatesWithoutFocus","valueDate","getDateOnly","selectDate","_viewDate","getDateOnlyInMs","generateDateRange","selectSingle","selectMultiple","newDates","selDates","valueDateOnly_1","isDateDisabled","valueOf","excludeDisabledDates","deselectSingle","deselectMultiple","selectedDatesCount","datesInMsToDeselect","deselectMultipleInMonth","valueDateOnly","deselectRange","valueStart","valueEnd","selectedDatesStart","selectedDatesEnd","formatterDay","formatterWeekday","formatterMonth","formatterYear","formatterMonthday","disabledDates","deselectDate","selectDateFromClient","IgxCalendarYearDirective","onYearSelection","isCurrentYear","IgxCalendarMonthDirective","onMonthSelection","CalendarView","IgxCalendarScrollMonthDirective","debounce","stopScroll","tap","startScroll","onMouseUp","IgxMonthPickerBaseDirective","_activeView","DEFAULT","DECADE","changeYear","previousViewDate","activeView","yearsBtns","idx","activeViewDecade","activeViewDecadeKB","formattedYear","IgxMonthsViewComponent","formatView","styleClass","_date","_monthFormat","initMonthFormatter","_calendarModel","activeMonth","formattedMonth","_formatterMonth","selectMonth","monthTracker","monthFormat","onKeydownArrowUp","monthsRef","months","nodeRect","nextNodeRect","onKeydownArrowDown","onKeydownArrowRight","onKeydownArrowLeft","onKeydownHome","onKeydownEnd","onKeydownEnter","resetActiveMonth","CalendarHammerConfig","overrides","pan","Hammer","DIRECTION_VERTICAL","threshold","HammerGestureConfig","IgxYearsViewComponent","_yearFormat","initYearFormatter","_formatterYear","selectYear","generateYearRange","yearTracker","calendarDir","previousElementSibling","currentYear","HAMMER_GESTURE_CONFIG","useClass","Direction","IgxDayItemComponent","isLastInRange","isFirstInRange","isWithinRange","onDateSelection","isInactive","today","outOfRangeDates","isHidden","isOutOfRange","isSingleSelection","specialDates","isWeekend","IgxDaysViewNavigationService","focusNextDate","nextView","childElementCount","nextDate","monthView","isFocusable","dayIsNextMonth","nextMonthView","prevMonthView","daysNavService","changeDaysView","monthAction","NEXT","PREV","onViewChanging","focusHomeDate","focusFirstDay","focusEndDate","focusLastDay","IgxDaysViewComponent","activeDateChange","monthsViewBlur","shouldResetDate","_activeDate","toLocaleDateString","isToday","activeDate","disableOutOfRangeDates","tabIndex","generateWeekHeader","dayNames","rv","rv_1","rv_1_1","rowTracker","dateTracker","isSelected","checkForRange","Between","focusActiveDate","selectDay","Specific","getFirstMonthView","getLastMonthView","onKeydownArrow","IgxCalendarComponent","hasHeader","showWeekNumbers","animationAction","isKeydownTrigger","_monthsViewNumber","startPrevMonthScroll","previousMonth","startNextMonthScroll","nextMonth","stopMonthScroll","daysView","prevMonthBtn","nextMonthBtn","resetActiveDate","YEAR","headerTemplateDirective","subheaderTemplateDirective","headerDate","generateContext","setSiblingMonths","monthViews","_monthViewsChanges$","switchMap","skipLast","suppressBlur","onActiveViewDecade","dacadeView","onActiveViewDecadeKB","getFormattedDate","monthday","childClicked","deselectDateInMonthViews","viewChanging","changeMonth","monthsBtns","onActiveViewYear","monthsView","focusMonth","onActiveViewYearKB","getViewDate","animationDone","fromState","toState","viewRendered","mv","onKeydownPageDown","isPageDown","dayItem","onKeydownShiftPageUp","yearView","getMonthView","viewIndex","animations","transition","IgxCalendarHeaderTemplateDirective","IgxCalendarSubheaderTemplateDirective","IgxMonthPickerComponent","yearAction","nextYear","previousYear","changeYearKB","yearsBtn","IgxMonthViewSlotsCalendar","IgxGetViewDateCalendar","calendar","wholeDate","FormsModule","IgxCardType","ELEVATED","OUTLINED","IgxCardComponent","IgxCardActionsLayout","JUSTIFY","IgxCardActionsComponent","card","isVerticalSet","IgxCardHeaderComponent","IgxCardMediaDirective","IgxCardContentDirective","IgxCardFooterDirective","IgxCardHeaderTitleDirective","IgxCardHeaderSubtitleDirective","IgxCardThumbnailDirective","IgxSlideComponent","_active","_destroy$","previous","activeChange","CarouselIndicatorsOrientation","CarouselAnimationType","none","slide","fade","CarouselHammerConfig","DIRECTION_HORIZONTAL","IgxCarouselComponent","iterableDiffers","loop","pause","keyboardSupport","gesturesSupport","maximumIndicatorsCount","indicatorsOrientation","indicatorTemplate","nextButtonTemplate","prevButtonTemplate","onSlideChanged","onSlideAdded","onSlideRemoved","onCarouselPaused","onCarouselPlaying","differ","animationDuration","animationPosition","newDuration","_interval","restartInterval","slides","initSlides","lastInterval","clearInterval","unsubscriber","merge","isDestroyed","onSlideActivated","currentSlide","previousSlide","animationStarted","leaveAnimationPlayer","enterAnimationPlayer","resetAnimations","playAnimations","carousel","playLeaveAnimation","playEnterAnimation","finishAnimations","getAnimation","trans","enterAnimation","leaveAnimation","any","ind","forEachAddedItem","total","updateSlidesSelection","defaultIndicator","defaultNextButton","defaultPrevButton","setAriaLabel","resourceStrings","getNextIndex","getPrevIndex","playing","newSlides","notifyOnChanges","prev","stoppedByInteraction","resetInterval","setInterval","tick","onTap","isPlaying","last","onPanLeft","onPanRight","resetSlideStyles","slideWidth","panOffset","isFinal","incomingSlide","onPanEnd","velocity","IgxCarouselIndicatorDirective","IgxCarouselNextButtonDirective","IgxCarouselPrevButtonDirective","CHIP_ID","IgxChipComponent","draggable","animateOnRelease","hideBaseOnDrag","removable","class","onMoveStart","onMoveEnd","onRemove","onSelectionDone","hideBaseElement","_tabIndex","_selectedItemClass","_movedWhileRemoving","changeSelection","chipArea","backgroundColor","newColor","removeIcon","defaultRemoveIcon","selectIcon","defaultSelectIcon","selectClass","SELECT_CLASS","srcEvent","onSelectArgs","selectContainer","propertyName","onSelectTransitionDone","onChipKeyDown","keyDownArgs","keyEvent","onRemoveBtnKeyDown","onRemoveMouseDown","onRemoveClick","onRemoveTouchMove","onRemoveTouchEnd","onChipDragStart","onChipDragEnd","dragDirective","onChipMoveEnd","onChipGhostCreate","onChipGhostDestroy","onChipDragClicked","clickEventArgs","onChipDragEnterHandler","chip","dragChip","onChipDrop","IgxChipsAreaComponent","_iterableDiffers","onReorder","chipsList","selectedChips","addedChip","onChipMoveStart","onChipDragEnter","onChipSelectionChange","modifiedChipsArray","chipsArray","dragChipIndex","positionChipAtIndex","dropChipIndex","chipIndex","targetIndex","shiftRestLeft","eventData","IgxDragDropModule","IgxComboAPIService","register","combo","valueKey","add_custom_item","addItemToCollection","set_selected_item","isItemSelected","deselectItems","selectItems","IgxComboItemComponent","comboAPI","itemHeight","comboID","isVisible","rect","parentDiv","disableCheck","IGX_COMBO_COMPONENT","IgxComboAddItemComponent","IgxComboDropDownComponent","scrollHandler","itemsMaxHeight","focusSearchInput","lastIndex","focusAddItemButton","isAddButtonVisible","sortedChildren","sortedChildren_1","sortedChildren_1_1","handleEnter","handleSpace","isAddItemFocused","IgxComboFilteringPipe","searchValue","displayKey","shouldFilter","filteringOptions","searchTerm_1","DataTypes","IgxComboGroupingPipe","groupKey","sorted","Asc","inserts","currentHeader","insertFlag","IgxComboState","ItemHeights","diffInSets","set1","set2","results","entry","IgxComboComponent","_iconService","customValueFlag","defaultFallbackGroup","filterValue","stringFilters","booleanFilters","_groupKey","_prevInputValue","_dataType","_searchValue","_filteredData","_itemHeight","_itemsMaxHeight","_remoteSelection","searchInput","itemTemplate","headerTemplate","footerTemplate","headerItemTemplate","addItemTemplate","emptyTemplate","toggleIconTemplate","clearIconTemplate","dropdownContainer","onSelectionChange","onAddition","onSearchInput","onDataPreLoad","allowCustomValues","searchPlaceholder","showSearchCaseIcon","filterable","autoFocusSearch","manageRequiredAsterisk","_displayKey","comboInput","onInputClick","checkMatch","handleKeyUp","itemMatch","handleInputChange","COMPLEX","PRIMITIVE","registerRemoteEntries","ids","getValueDisplayPairs","selection_1","selection_1_1","ids_1","ids_1_1","triggerCheck","handleSelectAll","selectAllItems","deselectAllItems","addedItem","oldCollection","newCollection","opening","displaySearchInput","NgControl","_overlaySettings","selectedItems","createDisplayText","complexTemplate","primitiveTemplate","handleClearItems","newItems","clearCurrentSelection","setSelection","ignoreFilter","allVisible","newSelectionAsArray","oldSelectionAsArray","displayText","concatDisplayText","convertKeysToItems","removedItems","addedItems","handleOpening","handleOpened","handleClosing","handleClosed","toggleCaseSensitive","IgxComboItemDirective","IgxComboHeaderDirective","IgxComboFooterDirective","IgxComboHeaderItemDirective","IgxComboAddItemDirective","IgxComboEmptyDirective","IgxComboToggleIconDirective","IgxComboClearIconDirective","IgxInputGroupModule","ReactiveFormsModule","IgxForOfModule","IgxCheckboxModule","IGX_DATE_PICKER_COMPONENT","DatePickerDisplayValuePipe","_datePicker","rawDateString","DatePickerInputValuePipe","invalidDate","_getEditorDate","InteractionMode","IgxCalendarContainerComponent","mode","Dialog","onClose","onTodaySelection","DropDown","onEscape","closeCalendar","triggerTodaySelection","PredefinedFormatOptions","ShortDate","MediumDate","LongDate","FullDate","IgxDatePickerComponent","_moduleRef","labelVisibility","monthsViewNumber","onDisabledDate","onValidationFailed","inputValuePipe","spinDelta","defaultLocale","_onOpen","_onClose","_ngControl","_onValidatorChange","_modalOverlay","_dropDownOverlaySettings","_defaultDropDownOverlaySettings","_customFormatChecker","_transformedDate","_getDisplayDate","datePickerTemplateDirective","readOnlyDatePickerTemplate","editableDatePickerTemplate","displayData","openDialog","dateIsDisabled","onSpaceClick","inputDirectiveElementRef","_inputElementRef","_inputUserTemplateElementRef","_inputGroup","_inputGroupUserTemplate","_inputDirective","_inputDirectiveUserTemplates","_labelDirective","_labelDirectiveUserTemplate","_positionSettings","inputGroupElement","_modalOverlaySettings","overlay","_componentID","_onOpening","_onOpened","_onClosed","_updateValidityOnBlur","attachTemplateBlur","_templateInputBlur$","labelDirective","inputDirective","handleSelection","emitValueChangeEvent","modalOverlay","modalOverlaySettings","dropDownOverlaySettings","_setCursorPosition","setMilliseconds","onOpenClick","calcDate","_isInEditMode","calculateDate","cursorPosition","_getCursorPosition","checkInput","inputType","dateString","invokedByEvent","newDateArray","datePicker","prevValue","eventType","modifiedInputValue","_initializeCalendarContainer","_focusCalendarDate","componentInstance","isVertical","subheaderTemplate","cancelButtonLabel","todayButtonLabel","datePickerActions","datePickerActionsDirective","_setLocaleToDate","changedValue","NgModuleRef","IgxDatePickerTemplateDirective","IgxDatePickerActionsDirective","IgxCalendarModule","IgxMaskModule","IgxTextSelectionModule","defaultStyle","DIALOG_ID","IgxDialogComponent","navService","title","leftButtonLabel","leftButtonType","leftButtonColor","leftButtonBackgroundColor","leftButtonRipple","rightButtonLabel","rightButtonType","rightButtonColor","rightButtonBackgroundColor","rightButtonRipple","onOpen","onLeftButtonSelect","onRightButtonSelect","isOpenChange","_closeOnOutsideSelect","_closeOnEscape","_isModal","_titleId","_overlayDefaultSettings","isModal","closeOnOutsideSelect","isOpen","toggleRef","emitCloseFromDialog","dialog","onDialogSelected","DIALOG_CLASS","onInternalLeftButtonSelect","onInternalRightButtonSelect","IgxDialogTitleDirective","IgxDialogActionsDirective","IgxFocusModule","ColumnPinningPosition","RowPinningPosition","GridPagingMode","FilterMode","quickFilter","excelStyleFilter","GridSummaryPosition","GridSummaryCalculationMode","rootLevelOnly","childLevelsOnly","rootAndChildLevels","GridSelectionMode","single","multiple","ColumnDisplayOrder","Alphabetical","DisplayOrder","isSpecial","isBlanks","IgxGridExcelStyleFilteringComponent","containsNullOrEmpty","selectAllSelected","selectAllIndeterminate","filterValues","expressionsList","listData","uniqueValues","inline","loadingStart","loadingEnd","initialized","sortingChanged","columnChange","listDataLoaded","_column","_columnPinning","_columnVisibilityChanged","_sortingChanged","_filteringChanged","_densityChanged","_columnMoved","filteringService","onColumnPinning","onColumnVisibilityChanged","sortingExpressionsChange","filteringExpressionsTreeChange","onColumnMovingEnd","_minHeight","minHeight","generateExpressionsList","populateColumnData","overlayComponentId","_originalDisplay","onColumnMoving","closeDropdown","onPin","columnSelectable","onHideToggle","areExpressionsSelectable","exp","beforeOperator","afterOperator","areExpressionsValuesInTheList","firstValue","getExpressionValue","uniqueColumnValuesStrategy","renderColumnValuesRemotely","renderColumnValuesFromData","getColumnFilterExpressionsTree","prevColumn","colVals","columnValues","getFilterItemLabel","renderValues","columnField","generateUniqueValues","generateFilterValues","generateListData","filteredUniqueValues","cache","uniqueDates","isDateColumn","shouldUpdateSelection","addBooleanItems","addItems","sortData","addBlanksItem","addSelectAllItem","gridExpressionsTree","_e","_f","filterListItem","FilterListItem","isFiltered","getFilterItemValue","selectAll","blanks","valueA","valueB","datePipe","pipeArgs","decimalPipe","digitsInfo","changeDetection","ChangeDetectionStrategy","OnPush","IgxExcelStyleColumnOperationsTemplateDirective","IgxExcelStyleFilterOperationsTemplateDirective","IgxExcelStyleClearFiltersComponent","esf","clearFilterClass","clearFilter","selectAllFilterItems","onClearFilterKeyDown","ExcelStylePositionStrategy","ExpressionUI","IgxFilteringService","columnsWithComplexFilter","areEventsSubscribed","isFiltering","columnToExpressionsMap","columnStartIndex","isFilterRowVisible","filteredColumn","selectedExpression","columnToMoreIconHidden","activeFilterCell","toggleFilterDropdown","_componentOverlayId","initFilteringSettings","filterIcon","filterIconTarget","_filterMenuOverlaySettings","excelStyleFilteringComponent","_filterMenuPositionSettings","lastActiveNode","theadRow","hideExcelFiltering","subscribeToEvents","onColumnResized","updateFilteringCell","parentVirtDir","filterCellList","filterCell","updateFilterCellArea","hideFilteringRowOnColumnVisibilityChange","filteringRow","filterInternal","createSimpleFilteringTree","conditionOrExpressionTree","expressionsTreeForColumn","expressionForColumn","onFilteringDone","getExpressions","filterGlobal","editor","columnId","expressionUIs","refreshExpressions","isFilteringTreeComplex","removeExpression","indexToRemove","expressionUIList","currAndBranch","currExpressionUI","isFilterComplex","isComplex","getOperatorAsString","getChipLabel","getChildAndOperatorsCount","expressionsUIs","generateExpressionsListRecursive","exprUI","prevExprUI","isFilteringExpressionsTreeEmpty","exprTree","IgxSelectItemComponent","_text","SelectPositioningStrategy","_selectDefaultSettings","global_yOffset","global_xOffset","global_styles","selectFit","styles","scrollContainerRect","itemElement","getInteractionItemElement","itemRect","calculateStyles","calculateScrollAmount","calculateYoffset","calculateXoffset","itemElementRect","footer","lastItemFitSize","itemTextToInputTextDiff","firstItemFitSize","contentElementNewWidth","inputElementStyles","itemElementStyles","numericInputFontSize","fontSize","numericItemFontSize","inputTextToInputTop","itemTextToItemTop","negateInputPaddings","paddingTop","paddingBottom","numericLeftPadding","paddingLeft","numericTextIndent","textIndent","itemTextPadding","itemTextIndent","getFirstItemElement","IgxSelectComponent","itemText","inputGroupClick","hintElement","changes$","hasRequiredHTMLAttribute","mousedownHandler","IgxSelectToggleIconDirective","IgxSelectHeaderDirective","IgxSelectFooterDirective","IgxExcelStyleDefaultExpressionComponent","onExpressionRemoved","onLogicOperatorChanged","expressionUI","filters","inputValuesDirective","overlayOutlet","dropdownConditions","inputValuesElement","translateCondition","getCondition","getIconName","conditions","isConditionSelected","conditionName","onConditionsChanged","onValuesInput","onLogicOperatorButtonClicked","buttonIndex","logicOperatorButtonGroup","selectedButtons","onLogicOperatorKeyDown","onRemoveButtonClick","onOutletPointerDown","IgxExcelStyleDateExpressionComponent","IgxExcelStyleCustomDialogComponent","_customDialogPositionSettings","_customDialogOverlaySettings","dateExpressionTemplate","defaultExpressionTemplate","onCustomDialogOpening","selectedOperator","createInitialExpressionUIElement","onCustomDialogOpened","expressionComponents","rootGrid","onClearButtonClick","closeDialog","onApplyButtonClick","onAddButtonClick","markChildrenForCheck","scrollToBottom","onApplyButtonKeyDown","createCondition","expressionDateComponents","firstExprUI","secondExprUI","expressionsContainer","IgxExcelStyleConditionalFilterComponent","shouldOpenSubMenu","_subMenuPositionSettings","_subMenuOverlaySettings","onTextFilterKeyDown","onTextFilterClick","gridRect","dropdownRect","mainDropdown","x1","subMenu","onSubMenuSelection","customDialog","onSubMenuClosed","showCustomFilterItem","WatchChanges","propDesc","privateKey","originalSetter","_init","SimpleChange","WatchColumnChanges","onColumnChange","repaint","IgxSummaryOperand","operate","summaryResult","DecimalPipe","IgxNumberSummaryOperand","average","IgxDateSummaryOperand","latest","earliest","DatePipe","DropPosition","IgxColumnMovingService","_icon","IgxColumnComponent","sortable","groupable","resizable","hiddenChange","expandedChange","collapsibleChange","visibleWhenCollapsedChange","disableHiding","disablePinning","movable","widthChange","_calcWidth","_applySelectableClass","headerClasses","headerGroupClasses","cellStyles","sortingIgnoreCase","pinnedChange","searchable","_columnPipeArgs","_pinned","_summaries","_filters","_sortStrategy","_disablePinning","_defaultMinWidth","_hasSummary","_collapsible","_expanded","_selectable","_vIndex","hasTransactions","isPrimaryColumn","_editable","resetSummaryHeight","columnLayoutChild","widthSetByUser","_width","defaultWidth","calcPixelWidth","cacheCalcWidth","getCalcWidth","gridAvailableSize","calcWidth","maxWidth","minWidth","defaultMinWidth","minVal","_unpinnedIndex","removeSummariesCachePerColumn","_summaryPipeTrigger","_groupingComparer","funcRef","_bodyTemplate","_headerTemplate","_inlineEditorTemplate","_filterCellTemplate","vIndex","allChildren","childrenVisibleIndexes","indexInCollection","isPinningToStart","columnLayout","ptr","lvl","pinnedCols","pinnedWidth","headerFeaturesWidth","colEnd","colStart","_visibleWhenCollapsed","setExpandCollapseState","resetCaches","cellTemplate","headTemplate","editorTemplate","filterCellTemplateDirective","getGridTemplate","rowsCount","getColumnSizesString","getInitialChildColumnSizes","columnSizes","newWidthSet","newSpanSmaller","colSpan","gridColumnSpan","bothWidthsSet","bothWidthsNotSet","columnWidthSetByUser","getFilledChildColumnSizes","getPossibleColumnWidth","getResizableColUnderEnd","spanUsed","columnSized","targets","targetsSquashed","topLevelParent","pinnable","_unpinnedColumns","rootPinnedCols","_pinnedColumns","targetColumn","isPinned","hasColumnGroups","allPinned_1","childrenCount","_moveColumns","reinitPinStates","populateVisibleIndexes","moveColumn","move","li","isPreceding","calcChildren","AfterDropTarget","BeforeDropTarget","headerCellList","headerGroupsList","headerGroup","autosize","byHeader","getAutoSize","reflow","newWidth","getHeaderCellWidths","getLargestCellWidth","headerWidth","headerCell","headerStyle","headerPadding","paddingRight","borderRightWidth","headerGroupStyle","borderSize","borderLeftWidth","padding","largest","cellsContentWidths_1","calculateSizeToFit","cellStyle","cellPadding","headerCellWidths","largestCell","getCellWidth","colWidth","isPercentageWidth","cellWidth","visibleWhenCollapsed","collapsible","checkCollapsibleState","IgxCellTemplateDirective","IgxCellHeaderTemplateDirective","IgxCellEditorTemplateDirective","IgxFilterCellTemplateDirective","IgxCollapsibleIndicatorTemplateDirective","IgxColumnGroupComponent","selectableChildren","collapseIndicatorTemplate","collapsibleIndicatorTemplate","applySelectableClass","visibleChildren","fi","IgxExcelStyleMovingComponent","findColumn","onMoveButtonClicked","moveDirection","isLastPinned","isFirstPinned","IgxListPanState","IgxListBaseDirective","HammerGesturesManager","doc","hammerOptions","_hammerManagers","platformBrowser","inputClass","TouchInput","recognizers","Pan","Swipe","Tap","taps","supports","eventHandler","mc","getManagerForElement","addManagerForElement","handler","eventObj","on","off","addGlobalEventListener","getGlobalEventTarget","getDOM","setManagerOption","manager","removeManagerForElement","IgxListItemComponent","list","_panState","lastPanDir","onItemClicked","panStart","isTrue","allowLeftPanning","allowRightPanning","panMove","isPanningToLeft","showLeftPanTemplate","setContentElementLeft","maxLeft","showRightPanTemplate","maxRight","panEnd","relativeOffset","widthTriggeringGrip","panEndTriggeringThreshold","oldPanState","hideLeftAndRightPanTemplates","keepItem","onLeftPan","onRightPan","args2","oldState","newState","onPanStateChange","setLeftAndRightTemplatesVisibility","leftVisibility","rightVisibility","leftPanningTemplateElement","rightPanningTemplateElement","candidates","getElementsByClassName","IgxListComponent","isLoading","isListEmpty","dataLoadingTemplate","defaultDataLoadingTemplate","emptyListTemplate","defaultEmptyListTemplate","IgxEmptyListTemplateDirective","IgxDataLoadingTemplateDirective","IgxListItemLeftPanningTemplateDirective","IgxListItemRightPanningTemplateDirective","IgxListThumbnailDirective","IgxListActionDirective","IgxListLineDirective","IgxListLineTitleDirective","IgxListLineSubTitleDirective","IgxExcelStyleSearchComponent","displayedListData","refreshSize","clearInput","filterListData","_addToCurrentFilter","addToCurrentFilterItem","_isLoading","excelStyleLoadingValuesTemplateDirective","defaultExcelStyleLoadingValuesTemplate","onCheckboxChange","selectedIndex","selectAllBtn","addToCurrentFilter","indexToStartSlicing","slicedArray","itemSize","onInputKeyDown","applyFilter","searchAllBtn","anyFiltered","anyUnfiltered","it","filterTree","filterOptimizationThreshold","blanksItemIndex","blanksItem","IgxExcelStyleSortingComponent","updateSelectedButtons","sortIndex","sortButtonGroup","sortDirection","onSortButtonClicked","isColumnGrouped","clearSort","IgxGridCellComponent","touchManager","highlightClass","activeHighlightClass","lastPinned","firstPinned","editMode","displayPinnedChip","_cellSelection","pointerdown","cellSelectionMode","setActiveNode","selectionNode","pointerenter","gridID","pointerup","isHierarchicalGrid","onRangeSelection","onDoubleClick","addRowCellTemplate","defaultCellTemplate","pinnedIndicator","defaultPinnedIndicator","addPointerListeners","removePointerListeners","highlightText","gridRowSpan","_highlight","lastSearchInfo","compositionStartHandler","compositionEndHandler","cssProps","_updateCRUDStatus","crud","editableCell","isCellSelected","setEditMode","onCellClick","onContextMenu","shouldEmitSelection","meta","isRecordPinnedByViewIndex","RowEditPositionStrategy","isTop","isTopInitialPosition","IgxGridToolbarComponent","api","showProgress","_grid","rendered$","outerWidth","sub","resizeNotify","IgxGridToolbarTitleDirective","IgxGridToolbarActionsDirective","IgxRowEditTabStopDirective","handleTab","rowEditTabs","handleEscape","currentCellIndex","lastEditableColumnIndex","firstEditableColumnIndex","navigateTo","IgxGridNavigationService","_activeNode","pendingNavigation","handleNavigation","emitKeyDown","handleAlt","getNextPosition","navigateInBody","verticalScrollContainer","editCell_1","handleEditing","findLastDataRowIndex","lastColumnIndex","findFirstDataRowIndex","getCellByColumnVisibleIndex","rowObj","getRowByIndex","isGroupRow","onGroupSelectorClick","summaryNav","horizontalNav","dataView","headerNavigation","alt","performHeaderKeyCombination","currentActiveColumn","handleMCHeaderNav","tag","newActiveNode","mchCache","getColumnByVisibleIndex","performHorizontalScrollToCell","focusTbody","gridRows","clearCellSelection","focusFirstCell","headerContainer","isColumnFullyVisible","isColumnPinned","forOfDir","getColumnUnpinnedIndex","displayContainerWidth","displayContainerScrollLeft","virtDirRow","summariesRowList","isAddKey","treeRow","beginAddChild","getPreviousCell","getNextCell","shouldPerformHorizontalScroll","visibleColIndex","detailsData","shouldPerformVerticalScroll","targetRowIndex","scrollRowIndex","pinnedDataView","targetRow","getRowElementByIndex","containerHeight","calcHeight","endTopOffset","offsetTop","containerTopOffset","isValidPosition","performVerticalScrollToCell","includeSummary","curRow","isGroupByRecord","isDetailRecord","childGridsData","isActiveNodeChanged","currRow","activeNodeChange","isChanged","checkInnerProp","aciveNode","props","getOwnPropertyNames","propName","keydownArgs","targetType","summaryCells","onGridKeydown","hasDetails","clearGrouping","hideGroupedColumns","handleMCHExpandCollapse","handleColumnSelection","allowAdvancedFiltering","openAdvancedFilteringDialog","allowFiltering","filterMode","headerEl","newHeaderNode","activeCol","lastGroupIndex","nextCol","getNextColumnMCH","nextVIndex","columnsToSelect","rIndex","cIndex","IgxColumnResizingService","resizeCursor","showResizer","getVisibleContentHeight","columnHeightMultiplier","actualWidth","minWidthPx","maxWidthPx","MAX_SAFE_INTEGER","autosizeColumnOnDblClick","currentColWidth","maxWidthPercent","minWidthPercent","prevWidth","resizeColumn","startResizePos","resizeColumnLayoutFor","_handlePercentageResize","_handlePixelResize","isColumnResizing","colMinWidth","colMaxWidth","currentPercentWidth","diffPercentage","getColMinWidth","actualMinWidth","relativeColumns","combinedSpan","columnsToResize","updatedDiff","updatedCombinedSpan","setMinMaxCols","newCombinedSpan","newColsToResize","currentResizeWidth","resizeScaled","IgxGridHeaderComponent","colResizingService","hostRole","defaultClasses","igx-grid__th","asc","ascending","descending","igx-grid__th--number","igx-grid__th--sortable","igx-grid__th--selectable","igx-grid__th--filtrable","igx-grid__th--sorted","igx-grid__th--selected","klass","maxLevelHeaderDepth","defaultRowHeight","_baseFontSize","excelStyleHeaderIconTemplate","defaultESFHeaderIconTemplate","getSortDirection","filterCellTemplate","rangeSelection","onFilteringIconClick","onSortingIconClick","triggerSort","sortDir","onPinterEnter","onPointerLeave","IgxGridFilteringCellComponent","moreFiltersCount","isChipVisible","updateVisibleFilters","complexFilter","defaultFilter","emptyFilter","onChipClicked","onChipRemoved","clearFiltering","filteringIndicatorClass","isMoreIconHidden","ex","moreIcon","chipsArea","areaWidth","viewWidth","chipsAreaElements","visibleChipsCount","moreIconWidth","IgxGridHeaderGroupComponent","getHeaderGroupWidth","igx-grid__th--pinned","igx-grid__th--pinned-last","igx-grid__th--pinned-first","igx-grid__drag-col-header","isHeaderDragged","igx-grid__th--filtering","draggedColumn","groupClicked","selectedFields","toggleExpandState","IgxGridSummaryService","summaryCacheMap","rootSummaryID","summaryHeight","maxSummariesLenght","retriggerRootPipe","deleteOperation","recalculateSummaries","rootSummariesEnabled","isGroupedColumn","deleteSummaryCache","isTreeGrid","removeAllTreeGridSummaries","getSummaryID","calcMaxSummaryHeight","maxSummaryLength","hasSummary","getCurrentSummaryColumn","defaultSummaryHeight","calculateSummaries","rowSummaries","updateSummaryCache","groupingArgs","compareGroupingExpressions","filteringApplied","summaryIDs","removeChildRowSummaries","newExpressions","removedCols","ungroupedColumns","newExpr","colName","IgxSummaryCellComponent","firstCellIndentation","currNode","isSummaryRow","translateSummary","summary","DragScrollDirection","IgxSummaryRowComponent","_summaryCells","isConnected","getColumnSummaries","IgxGridDragSelectDirective","onDragStop","onDragScroll","end$","lastDirection","startDragSelection","activeDrag","_measureDimensions","_sub","_interval$","stopDragSelection","_activeDrag","clientRect","RATIO","trunc","TOPLEFT","TOPRIGHT","BOTTOMLEFT","BOTTOMRIGHT","TOP","BOTTOM","TemplateOutletAction","IgxTemplateOutletDirective","_viewContainerRef","_embeddedViewsMap","onViewCreated","onViewMoved","onCachedViewLoaded","onBeforeViewDetach","_getActionType","CreateView","_recreateView","MoveView","_moveView","UseCachedView","_useCachedView","UpdateViewContext","_updateExistingContext","igxTemplateOutletContext","cleanCache","cleanView","tmplID","_viewRef","igxTemplateOutlet","cachedView","oldContext","_cloneContext","_shouldRecreateView","ctxChange","_hasContextShapeChanged","prevCtxKeys","currCtxKeys","currCtxKeys_1","currCtxKeys_1_1","ctx","movedView","shouldRecreate","IgxColumnResizerDirective","restrictHResizeMin","MIN_SAFE_INTEGER","restrictHResizeMax","resizeEnd","resizeStart","resize","_left","onMousemove","onMouseup","onMousedown","IgxGridFilteringRowComponent","_conditionsOverlaySettings","_operatorsOverlaySettings","chipAreaScrollOffset","isKeyPressed","isComposing","_cancelChipClick","resetExpression","addExpression","showHideArrowButtons","onKeydownHandler","defaultDateUI","defaultFilterUI","onPrefixKeyDown","dropDownConditions","toggleConditionsDropDown","inputGroupPrefix","stopImmediatePropagation","commitInput","onInputKeyUp","onCompositionStart","onCompositionEnd","datePickerClose","indexToDeselect","scrollChipsWhenAddingExpression","onClearKeyDown","onClearClick","onCommitKeyDown","onCommitClick","onInputGroupFocusout","focusedElement","condToRemove","onDateSelected","inputGroupPrefixClick","toggleOperatorsDropDown","dropDownOperators","unaryConditionChangedCallback","conditionChangedCallback","onChipPointerdown","onChipClick","toggleChip","onLeftArrowKeyDown","scrollChipsOnRemove","scrollChipsOnArrowPress","arrowPosition","chipAraeChildren","containerRect","containerWidth","chipsAreaWidth","showArrows","isColumnFiltered","containerRectRight","lastChipRectRight","resetChipsArea","dif","IgxColumnMovingDragDirective","cms","_ghostClass","ghostImgIconClass","ghostImgIconGroupClass","columnSelectedClass","_unsubscribe","cancelDrop","isColumnMoving","onColumnMovingStart","subscription$","flexBasis","createTextNode","childNodes","IgxGroupAreaDropDirective","hovered","columnBelongsToGrid","isGrouped","innerText","column_1","closestParentByAttr","attr","closestGridID","ExpressionItem","ExpressionGroupItem","ExpressionOperandItem","IgxAdvancedFilteringDialogComponent","selectedExpressions","selectedGroups","columnSelectOverlaySettings","conditionSelectOverlaySettings","_dblClickDelay","_preventChipClick","_editingInputsContainer","scrollElementIntoView","_addModeContainer","_currentGroupButtonsContainer","_selectedColumn","selectedCondition","_filteringChange","advancedFilteringExpressionsTreeChange","dragArgs","_overlayComponentId","contextMenuToggle","calculateContextMenuTarget","onDragMove","addCondition","afterExpression","cancelOperandAdd","operandItem","enterExpressionEdit","addAndGroup","addGroup","addOrGroup","endGroup","currentGroup","commitOperandEdit","editedExpression","selectedColumn","addModeExpression","inAddMode","cancelOperandEdit","deleteItem","operandCanBeCommitted","exitOperandEdit","isExpressionGroup","rootGroup","createExpressionGroupItem","filteringExpr","exprCopy","createExpressionsTreeFromGroupItem","subTree","onChipRemove","expressionItem","_clickTimer","onToggleExpression","onChipDblClick","columnSelect","conditionSelect","searchValueInput","toggleContextMenu","enterExpressionAdd","toggleExpression","deselectParentRecursive","contextMenuClosed","contextualGroup","findSingleSelectedGroup","filteringLogics","isInsideGroup","createAndGroup","createGroup","createOrGroup","chips","minIndex","MAX_VALUE","firstExpression","deleteFilters","onGroupClick","toggleGroup","toggleGroupRecursive","operandExpression","minTop","targetOffset","ungroup","selectedGroup","deleteGroup","selectFilteringLogic","getConditionFriendlyName","onExpressionsScrolled","invokeClick","getConditionList","getFormat","getTimezone","setAddButtonFocus","addRootAndGroupButton","addConditionButton","applyChanges","cancelChanges","onChipSelectionEnd","IgxRowDragDirective","_rowDragStarted","transitionEndEvent","endDragging","onRowDragStart","onRowDragEnd","dropArea","expander","expanderWidth","rowRect","ghostCells","IgxDragIndicatorIconDirective","IgxRowDragGhostDirective","IgxSnackbarComponent","autoHide","displayTime","snackbarMessage","triggerAction","snackbarAnimationStarted","snackbarAnimationDone","toOpacity","FAKE_ROW_ID","MINIMUM_COLUMN_WIDTH","IgxGridTransaction","IgxGridBaseDirective","viewRef","localeId","_cdrRequests","_cdrRequestRepaint","_emptyGridMessage","_emptyFilteredGridMessage","_destroyed","overlayIDs","_pinning","Start","_advancedFilteringPositionSettings","_advancedFilteringOverlaySettings","snackbarDisplayTime","autoGenerate","cancelAddMode","pageChange","perPageChange","addRowParent","rowEditExit","onColumnInit","onSortingDone","onPagingDone","onRowAdded","onGridCopy","expansionStatesChange","onRowPinning","tmpOutlets","rowExpandedIndicatorTemplate","rowCollapsedIndicatorTemplate","headerExpandIndicatorTemplate","headerCollapseIndicatorTemplate","columnsWithNoSetWidths","_showToolbar","_exportExcel","_exportCsv","_toolbarTitle","_rowEditable","_filteredSortedData","clipboardOptions","copyHeaders","copyFormatters","separator","snackbarActionText","snackbarLabel","onToolbarExporting","chipsGoupingExpressions","activeMatchIndex","matchInfoCache","rendered","shareReplay","_perPage","_page","_paging","_pagingMode","local","_totalRecords","_hideRowSelectors","_rowDrag","_filteringPipeTrigger","_columns","_filteringExpressionsTree","_sortingExpressions","_maxLevelHeaderDepth","_columnHiding","_pinnedRecordIDs","_allowFiltering","_allowAdvancedFiltering","_filterMode","_hiddenColumnsText","_pinnedColumnsText","_height","_horizontalForOfs","_multiRowLayoutRowSize","_expansionStates","_defaultExpandState","_totalWidth","_pinnedVisible","_unpinnedVisible","_pinnedWidth","_unpinnedWidth","_visibleColumns","_columnGroups","_autoGeneratedCols","_headerFeaturesWidth","_defaultTargetRecordNumber","_summaryPosition","_summaryCalculationMode","_showSummaryOnCollapse","_cellSelectionMode","_rowSelectionMode","_columnSelectionMode","rowEditPositioningStrategy","rowEditSettings","rowOutletDirective","paginatorSettings","changeRowEditingOverlayStateOnScroll","hideOverlays","horizontalScrollHandler","vfor","preventContainerScroll","rowEditingWheelHandler","Regular","_advancedFilteringExpressionsTree","Advanced","totalPages","hasVisibleColumns","refreshGridState","_hostWidth","evaluateLoadingState","_columnHidingTitle","_columnPinningTitle","calcGridHeadRow","_filteringStrategy","_sortingStrategy","selectRows","deselectAllRows","excelStyleFilteringComponents","headerGroups","_summaryRowList","sumList","_rowList","rList","_dataRowList","headSelectorsTemplates","pinning","End","rowSelectorsTemplates","rowEditingOutletDirective","rowEditCustom","defaultRowEditTemplate","_customDragIndicatorIconTemplate","dragIndicatorIconTemplates","rowEditTabsCUSTOM","rowEditTabsDEFAULT","activeElem","_currentRowState","getExportExcel","getExportCsv","_exportText","_exportExcelText","_exportCsvText","selectionMode","isGhostRecord","ghostRecord","isAddRowRecord","getDataViewIndex","unpinnedDataView","overlayID","isRecordPinnedByIndex","_filteredSortedPinnedData","getInitialPinnedIndex","_setupServices","_setupListeners","tfoot","_advancedFilteringOverlayId","overlayId","isPercentHeight","getDataBasedBodyHeight","calculateGridHeight","calculateGridSizes","rowListDiffer","columnListDiffer","shouldGenerate","setupColumns","autogenerateColumns","initColumns","onColumnsChanged","resetColumnsCaches","generateRowID","primaryColumn","uuidv4","resetForOfCache","firstVirtRow","_filteredPinnedData","filteredUnpinned","resetColumnCollections","resetCachedWidths","recalcFeatureWidth","toolbar","setFilteredSortedData","pinnedRecords","elementFilter","isDefined","_setupRowObservers","extractForOfs","rowListObserver","summaryRowObserver","_zoneBegoneListeners","hideActionStrip","initPinning","reattach","displayContainer","_pinnedRowList","onPinnedRowsChanged","addRowSnackbar","lastAddedRowIndex","resetNotifyChanges","getDragGhostCustomTemplate","dragGhostCustomTemplates","tmplOutlet","vertScrDC","toggleColumnVisibility","expandAll","collapseAll","expandRow","collapseRow","toggleRow","resolveOutlet","_userOutletDirective","_outletDirective","paginatorClassName","getPinnedWidth","getUnpinnedWidth","unpinnedWidth","featureColumnsWidth","rowSelectArea","headerSelectorContainer","rowDragArea","headerDragContainer","groupableArea","headerGroupContainer","defaultHeaderGroupMinWidth","getRowByKey","keyValue","getCellByColumn","getCellByKey","pagingState","nextPage","isLastPage","previousPage","isFirstPage","hideRowSelectors","hiddenColumnsCount","to","_reorderColumns","newList","_resetColumnList","columnCollection","inGroup","fromIndex","childColumnsCount","dropIndex","_moveChildColumns","buffer","_columnsReordered","paginate","isInPinnedArea","pinIndex","unpinIndex","getUnpinnedIndexById","newRowIndex","updateCell","updateRow","enableSummaries","rest","_multipleSummaries","disableSummaries","_disableMultipleSummaries","pinColumn","unpinColumn","pinContainer","pinnedRowHeight","findNext","findPrev","updateActiveInfo","rebuildMatchCache","activeInfo_1","clearSearch","summaryCalculationMode","_hasVisibleColumns","_derivePossibleWidth","columnWidthCombined","allItems","summariesHeight","_calculateGridBodyHeight","getGroupAreaHeight","getComputedHeight","getFooterHeight","getTheadRowHeight","getFilterCellHeight","getToolbarHeight","toolbarHeight","getPagingFooterHeight","pagingHeight","headerGroupNativeEl","filterCellNativeEl","actualTheadRow","footerHeight","renderedHeight","gridHeight","computed","_shouldAutoSize","bodyHeight","defaultTargetBodyHeight","checkContainerSizeChange","origHeight","hasVerticalScroll","scrollSize","baseWidth","computedWidth","visibleChildColumns","visibleCols","colsPerBlock","block","combinedBlocksSize","blockCols","columnsWithSetWidths","columnsToSize","sumExistingWidths","curr","widthValue","calculateGridWidth","isPercentWidth","getColumnWidthSum","colSum","added_1","removed_1","hasScroll","repositionRowEditingOverlay","isStable","_applyWidthHostBinding","currentWidth","takeHidden","fc","fc_1","fc_1_1","hostWidth","summaryOperand","customSummary","resolveDataTypes","generateDataFields","onlyTopLevel","layoutSize","columnLayoutColumns","onHeaderSelectorClick","unpinnedRecords","deselectRows","onlyFilterData","dragScroll","arg","startNode","endNode","getSelectedRanges","extractDataFromSelection","formatters","selectedData","activeEl","totalItems","selectionMap","tuple","cellSelection","virtualizationState","temp_1","temp_1_1","getSelectableColumnsAt","selectionMap_1","selectionMap_1_1","_j","colLayout","getSelectedData","selectedColumns","fieldToSelect","fieldToDeselect","deselectAllColumns","selectAllColumns","extractDataFromColumnsSelection","getSelectedColumnsData","copyHandler","clipboardData","setData","showSnackbarFor","actionText","shouldScrollVertically","shouldScrollHorizontally","executeCallback","currRowIndex","curVisibleColIndex","colIndexes","editCol","nextCellIndex","getNextDataRowIndex","prevCellIndex","cbArgs","getNavigationArguments","currentRowIndex","nextRowIndex","findPrevEditableDataRowIndex","isEditableDataRecordAtIndex","dataViewIndex","isGhostRecordAtIndex","trackColumnChanges","rebuildCache","matchInfo","inCollection","delayScrolling","scrollDirective","scrollToHorizontally","scrollRow","goal","columnItems","c1","c2","dataRow","occurenceIndex","searchIndex","isExpandedGroup","_group","toggleRowEditingOverlay","shouldOverlayLoading","loadingOutlet","loadingOverlay","configureRowEditingOverlay","rowStyle","useOuter","parentRowOutletDirective","pinnedRows","rowChanges","writeToData","rowEditArgs","nonCancelableArgs","canceled","endAdd","activeCell","cancelable","pinnedIndex","findRecordIndexInView","dataIndex","showIndex","parentId","_getParentRecordId","triggerPipes","hasZeroResultFilter","hasNoData","loadingGridTemplate","loadingGridDefaultTemplate","emptyGridTemplate","emptyFilteredGridTemplate","emptyGridDefaultTemplate","hasHorizontalScroll","_restoreVirtState","rowForOf","gridScrLeft","cachedViewLoaded","tmplId_1","templateID","index_1","summaryRow","sr","dataRowIndex","closeAdvancedFilteringDialog","advancedFilteringDialog","getEmptyRecordObjectFor","IgxGridColumnResizerComponent","IgxExcelStyleLoadingValuesTemplateDirective","IgxHeadSelectorDirective","IgxRowSelectorDirective","IgxRowEditTemplateDirective","IgxRowEditTextDirective","IgxRowEditActionsDirective","IgxRowExpandedIndicatorDirective","IgxRowCollapsedIndicatorDirective","IgxHeaderExpandIndicatorDirective","IgxHeaderCollapseIndicatorDirective","IgxExcelStyleHeaderIconDirective","IgxSelectGroupComponent","IgxSelectItemNavigationDirective","inputStream","clearStream$","Subscription","EMPTY","captureKey","timer","activateItemByText","activeItemIndex","nextItem","IgxPaginatorComponent","defaultSelectValues","pagerEnabled","pagerHidden","dropdownEnabled","dropdownHidden","_selectOptions","sortUniqueOptions","totalRecords","newOption","paginatorSelectDisplayDensity","IgxSelectModule","IgxColumnActionsComponent","actionableColumns","filteredColumns","_filterColumnsPrompt","hideFilter","_filterCriteria","_columnDisplayOrder","columnsAreaMaxHeight","indentation","onColumnToggled","trackChanges","actionsDirective","actionEnabledColumnsFilter","_uncheckAllText","uncheckAllLabel","_checkAllText","checkAllLabel","allUnchecked","allChecked","uncheckAllColumns","uncheckAll","checkAllColumns","checkAll","toggleColumn","IgxGridCellStyleClassesPipe","callbackOrValue","IgxGridCellStylesPipe","css","IgxGridNotGroupedPipe","IgxGridTopLevelColumns","IgxGridFilterConditionPipe","IgxGridTransactionPipe","IgxGridPaginatorOptionsPipe","IgxHasVisibleColumnsPipe","IgxGridRowPinningPipe","rec1","rec2","IgxColumnActionEnabledPipe","columnActions","actionFilter","copy","IgxFilterActionColumnsPipe","filterCriteria","filterFunc_1","filterText","toLocaleLowerCase","IgxSortActionColumnsPipe","displayOrder","localeCompare","IgxGridDataMapperPipe","IgxStringReplacePipe","replacement","IgxGridTransactionStatePipe","row_id","___","rowCurrentState","IgxColumnFormatterPipe","IgxGridAddRowPipe","parentIndex","DIR_DOCUMENT","DIR_DOCUMENT_FACTORY","inject","IgxDirectionality","bodyDir","htmlDir","extractedDir","_dir","IgxTextAlign","CENTER","IgxProgressType","BaseProgressDirective","requestAnimationId","_initValue","_contentInit","_valueInPercent","_max","_newVal","_animate","onProgressChanged","_step","maxNum","triggerProgressTransition","changedValues","stepDirection","directionFlow","runAnimation","updateProgressDirectly","updateProgressSmoothly","passedValue","toPercent","progressValue","valueInPercent","isInLimitRange","updateProgress","comparator","isExceedingUpperLimit","isExceedingLowerLimit","NEXT_LINEAR_ID","NEXT_CIRCULAR_ID","NEXT_GRADIENT_ID","IgxLinearProgressBarComponent","valueMin","striped","textAlign","textVisibility","textTop","valInRange","IgxCircularProgressBarComponent","_directionality","STROKE_OPACITY_DVIDER","STROKE_OPACITY_ADDITION","gradientId","_circleRadius","_circumference","PI","_svgCircle","FRAMES","strokeDashoffset","getProgress","strokeOpacity","percentage","rtl","IgxProcessBarTextTemplateDirective","IgxProgressBarGradientDirective","IgxExcelStyleHeaderComponent","IgxExcelStylePinningComponent","IgxExcelStyleHidingComponent","IgxExcelStyleSelectingComponent","IgxGridPipesModule","IgxButtonGroupModule","IgxDatePickerModule","IgxFilterModule","IgxListModule","IgxProgressBarModule","IgxGroupByRowSelectorDirective","IgxResizeHandleDirective","_dblClick","DEBOUNCE_TIME","debounceTime","_onResizeAreaMouseDown","resizeLine","resizer","onMouseOver","IgxColumnMovingDropDirective","_dropIndicator","_lastDropIndicator","_dragLeave","_dropIndicatorClass","_hVirtDir","hasMovableColumns","isDropTarget","_dropPos","lastElementChild","horizontalScroll","IgxGridAPIService","groupingState","arrange_sorting_expressions","groupBy_multiple","names_1","groupedCols","newSortingExpr","grExprIndex","grpExpandState","groupingExpansionState","newExpandState","grExpr","sortExprIndex","groupingState_1","groupingState_1_1","groupBy_get_expanded_for_group","grState","groupBy_is_row_in_group","rowInGroup","groupBy_toggle_group","expansionState","groupsExpanded","groupBy_fully_expand_group","groupBy_select_all_rows_in_group","groupBy_deselect_all_rows_in_group","groupExprA","groupExprB","get_groupBy_record_id","recordId","hierrarchy","groupByKey","IgxGridGroupByRowComponent","gridSelection","paddingIndentationCssClass","grRowExpr","getRowID","areAllRowsInTheGroupSelected","defaultGroupByExpandedTemplate","defaultGroupByCollapsedTemplate","filteredSelectedRowIds","selectedRowsInTheGroup","hideGroupRowSelectors","IgxGridMRLNavigationService","lastColIndexPerMRLBlock","lastIndexPerRow","firstIndexPerRow","getNextHorizontalCellPosition","prevPos","getNextVerticalPosition","nextPos","nextLayout","newLayout","scrollPos","getVerticalScrollPositions","topOffset","rowBottom","targetCol","isParentColumnFullyVisible","getChildColumnScrollPositions","rightScroll","leftScroll","parentVIndex","rowSpan","rowTop","parentByChildIndex","hasNextHorizontalPosition","hasNextVerticalPosition","currentRowStart","nextBlock","lastRowStartPerBlock","nextRI","getPreviousRowIndex","getNextRowIndex","co","lastLayoutIndex","IgxGridComponent","_groupingExpressions","_groupingExpandState","_hideGroupedColumns","_dropAreaMessage","_showGroupArea","childDetailTemplates","groupingExpressionsChange","groupingExpansionStateChange","onGroupingDone","detailTemplate","oldExpressions","_gridAPI","_applyGrouping","groupedCols_1","ungroupedCols_1","groupingDoneArgs","groupedColumns","groupingDiffer","_setGroupColsVisibility","_groupsRowList","groupByRowSelectorsTemplates","getDetailsContext","detailsViewFocused","gridDetailsTemplate","getRowTemplate","defaultGroupTemplate","summaryTemplate","detailTemplateContainer","recordTemplate","isDetailActive","_groupRowTemplate","_groupAreaTemplate","checkIfNoColumnField","preventHeaderScroll","_getStateForGroupRow","_toggleGroup","selectRowsInGroup","deselectRowsInGroup","fullyExpandGroup","_fullyExpandGroup","toggleAllGroupRows","cachedData","tmlpOutlet","moveView","viewCreatedHandler","viewMovedHandler","chipsOrderChanged","newGrouping","KeyboardEvent","chipsMovingEnded","columnExpr","groupArea","groupingResult","groupByRecord","groupingMetadata","groupingFlatResult","dropAreaTemplate","defaultDropAreaTemplate","getGroupByChipTitle","defaultExpandedTemplate","defaultCollapsedTemplate","getColumnGroupable","groupTemplate","_setupNavigationService","dataLoading","source_1","expression_1","expression_1_1","IgxGroupByRowTemplateDirective","IgxGridDetailTemplateDirective","IgxGridStateDirective","featureKeys","_options","advancedFiltering","rowPinning","rowIslands","FEATURES","getFeatureState","currGrid","restoreFeatureState","createExpressionsTreeFromObject","newColumns","colState","selectedRows","pinningConfig","childGridStates","allLayoutList","rowIsland","rowIslandAPI","getChildGrids","chGrid","getParentRowID","childGridState","buildState","st","restoreGridState","childGrid","childRow","hgridAPI","getParentRowId","serialize","features","stringifyCallback","setState","applyFeatures","gridState","featureState","getFeature","exprTreeObject","expr_1","generateFilteringCondition","IgxTemplateOutletModule","IgxTextHighlightModule","IgxBadgeModule","IgxChipsModule","IgxGridStateModule","IgxSnackbarModule","IgxSummaryDataPipe","IgxGridSharedModules","IgxColumnHidingDirective","columnChecked","IgxColumnActionsBaseDirective","IgxColumnPinningDirective","IgxGridToolbarAdvancedFilteringComponent","BaseToolbarDirective","anchorElement","columnListHeight","focusSearch","IgxGridToolbarExporterComponent","excelExporter","csvExporter","exportCSV","exportExcel","filename","isExporting","exportStarted","exportEnded","exporter","IgxExcelTextDirective","IgxCSVTextDirective","IgxGridToolbarHidingComponent","IgxGridToolbarPinningComponent","IgxGridToolbarDirective","IgxColumnActionsModule","IgxColumnLayoutComponent","borderWidth","hasLastPinnedChildColumn","headerStyles","orderedCols","rs","IgxCellFooterTemplateDirective","SortingIndexPipe","IgxGridFilteringModule","IgxColumnMovingModule","IgxGridResizingModule","IgxGridBodyDirective","IgxGridFooterComponent","IgxGridColumnModule","IgxGridHeadersModule","IgxGridExcelStyleFilteringModule","IgxRowDragModule","IgxPaginatorModule","IgxGridSelectionModule","IgxGridSummaryModule","IgxGridToolbarModule","IgxGridSortingPipe","IgxGridGroupingPipe","IgxGridPagingPipe","pagingMode","IgxGridFilteringPipe","IgxGridRowComponent","getContextMRL","IgxGridSummaryPipe","summaryPosition","showSummary","summaryPipeTrigger","addSummaryRows","gridId","recordsWithSummary","lastChildMap","maxSummaryHeight","skipAdd","removeDeletedRecord","summaryRecord","groupRecords","groupRecord","groupRecordId","showSummaries","lastChild","lastChildId","IgxGridDetailsPipe","addDetailRows","detailsObj","IgxGridExpandableCellComponent","onIndicatorFocus","indicatorWidth","indicator","indicatorStyle","indicatorMargin","marginRight","leftPadding","indentationDiv","indentationStyle","isGhost","IgxGridCommonModule","schemas","CUSTOM_ELEMENTS_SCHEMA","IgxTreeGridAPIService","flatData","processedRootRecords","loadChildrenOnDemand","hasChildrenKey","expand_path_to_record","expansionDepth","foreignKey","childData","treeGrid","flatDataWithCascadeOnDeleteAndTransactions","cascadeOnDelete","selectedChildren","get_selected_children","generateRowPath","selectedRowIDs","row_deleted_parent","parentRecord","parentData","childKey","IgxTreeGridComponent","processedRecords","_expansionDepth","Infinity","loadingRows","_rowLoadingIndicatorTemplate","loadChildrenOnRowExpansion","deselectChildren","rowLoadingTemplate","parentID_1","addChildRows","parentID","children_1","children_1_1","pid","cloneMap","mapIn","mapCloned","mapObj","spawnedForRecord","processedExpandedFlatData","nonColumnLayoutColumns","recordID","rowToDeselect","IgxRowLoadingIndicatorTemplateDirective","IgxTreeGridRowComponent","_treeRow","treeRec","IgxTreeGridHierarchizingPipe","hierarchicalRecords","treeGridRecordsMap","hierarchizeFlatData","hierarchizeRecursive","missingParentRecords","setIndentationLevels","indentationLevel","IgxTreeGridFlatteningPipe","expandedLevels","getFlatDataRecursive","parentExpanded","updateNonProcessedRecordExpansion","IgxTreeGridSortingPipe","flattenTreeGridRecords","records_1","records_1_1","IgxTreeGridPagingPipe","IgxTreeGridTransactionPipe","aggregatedChanges","flatDataClone","hierarchicalDataClone","IgxTreeGridNormalizeRecordsPipe","IgxTreeGridCellComponent","showIndicator","treeGridAPI","onLoadingDblClick","IgxTreeGridSummaryPipe","showSummaryOnCollapse","cellIndentation","isExpanded","childRecord","deletedRows","lenght","IgxChildGridRowComponent","parentGrid","onLayoutChange","ch","_handleLayoutChanges","initialChanges","hGrid","parentIsland","setupEventEmitters","onGridCreated","childLayoutList","registerChildRowIsland","registerChildGrid","onGridInitialized","inputNames","inputs","outputs","matchingInputPropName","output","IgxHierarchicalGridNavigationService","_pendingNavigation","getClosestElemByTag","isChildGridRecord","inView","isNext_1","targetLayoutIndex_1","childLayoutKeys","_moveToChild","isLast","isNext_2","_handleScrollInChild","nextSiblingIndex","_moveToParent","isNext","targetRec","currScroll","layoutKey","layoutIndex","nextIndex","positionInParent","positionInfo","getPositionInfo","scrollableGrid","getNextScrollableDown","getNextScrollableUp","parentRowIndex","childLayoutIndex","ri","pathSegment","rowIslandKey","getChildGrid","targetLayoutIndex","childGridNav","clearActivation","lastVisibleIndex","indexInParent","hasNextTarget","nextColumnIndex","rowElem","riKey","gridBottom","_getMinBottom","diffBottom","gridTop","_getMaxTop","diffTop","hasTargetRecordInParent","sourceElem","targetTag","pinnedRowsHeight","nonScrollable","IgxHierarchicalTransactionServiceFactory","useFactory","hierarchicalTransactionServiceFactory","IgxHierarchicalGridBaseDirective","transactionFactory","showExpandAll","createColumnsList","_createColumn","_createColGroupComponent","_createColComponent","factoryGroup","newChildren_1","newCol","factoryColumn","getGridsForIsland","rowIslandID","getChildGridsForRowIsland","IgxHierarchicalGridAPIService","childRowIslands","childGrids","unsetChildRowIsland","getChildRowIsland","currPath","pathElem","childrenForLayout","inDepth","layoutMap","getChildGridByID","IgxRowIslandAPIService","unset","oldId","IgxRowIslandComponent","childColumns","layout_id","isInit","expandChildren","updateOnRender","pId","ri_columnListDiffer","updateChildren","onRowIslandChange","nestedColumns","colsArray","topCols","updateColumnList","actionStrips","pluck","islandToolbarTemplate","toolbarOutlet","cleanGridState","childGridTemplates","tmpl","IgxHierarchicalGridComponent","highlightedRowID","h_id","hg_verticalScrollHandler","hg_horizontalScrollHandler","dragIndicatorIconTemplate","headerHierarchyExpander","recalcColSizes","colLength","_clearSeletionHighlights","isRowHighlighted","isHierarchicalRecord","hasExpandedRecords","hasExpandableChildren","rootHeight","topDiff","toggleAll","hasExpandedEntry","relatedGrid","vScr","hScr","inDeph","onContainerScroll","IgxHierarchicalGridCellComponent","helement","_rootGrid","_getRootGrid","_clearAllHighlights","currentElement","IgxHierarchicalRowComponent","expanderClass","rolActionClass","deselect","expanderClick","expandable","defaultEmptyTemplate","IgxGridHierarchicalPipe","childKeys","addHierarchy","IgxGridHierarchicalPagingPipe","IgxGridModule","IgxNavbarComponent","titleId","actionIconTemplate","actionButtonIcon","titleContent","_triggerAction","IgxNavbarActionDirective","IgxNavbarTitleDirective","IgxNavDrawerItemDirective","activeClass","IgxNavigationDrawerComponent","_state","_touchManager","_isOpen","enableGestures","pinThreshold","disableAnimation","miniWidth","pinChange","opened","closing","_gesturesAttached","_widthCache","windowWidth","drawer","mini","styleDummy","_panning","_maxEdgeZone","checkPinThreshold","getWindowWidth","swipe","startPosition","center","distance","maxEdgeZone","panstart","_panStartWidth","getExpectedWidth","_panLimit","visibleWidth","newX","percent","hasAnimateWidth","setXSize","toPrecision","resetPan","toggleOpenedEvent","toggleClosedEvent","miniTemplate","contentTemplate","_miniTemplate","setDrawerWidth","_drawer","_overlay","_styleDummy","updateEdgeZone","ensureEvents","_resizeObserver","set_maxEdgeZone","innerWidth","screen","getDrawerWidth","IgxNavDrawerMiniTemplateDirective","IgxNavDrawerTemplateDirective","IgxSliderType","SliderHandle","TickLabelsOrientation","TicksOrientation","IgxSliderThumbComponent","_elementRef","_isActive","_isPressed","onThumbValueChange","onChange","onHoverChange","thumbBounderies","thumbCenter","FROM","TO","onPan","mouseX","updateThumbValue","onFocusListener","showThumbIndicators","toggleThumbIndicators","hideThumbIndicators","calculateTrackUpdate","scaleX","thumbPositionX","stepDistanceCenter","stepDistance","stepToProceed","stepDist","visible","continuous","deactiveState","IgxThumbLabelComponent","thumb","thumbPressedClass","IgxTicksComponent","ticksClass","ticksOrientation","primaryTicks","tickLabelsOrientation","TopToBottom","BottomToTop","tickLabel","isPrimary","labels","secondaryTicks","hiddenTickLabels","primaryTickLabels","secondaryTickLabels","labelsViewEnabled","labelVal","ticksLength","toFixed","IgxTickLabelsPipe","IgxSliderComponent","_ngZone","_pMin","_pMax","_hasViewInit","_continuous","_primaryTicks","_secondaryTicks","_labels","SLIDER","_destroyer$","_indicatorsDestroyer$","thumbs","labelRefs","slierClass","thumbLabelVisibilityDuration","showTicks","Horizontal","onValueChanged","lowerValue","upperValue","updateTrack","valueToFraction","upperBound","lowerBound","positionHandlersAndUpdateTrack","calculateStepDistance","setTickInterval","normalizeByStep","disable","changeThumbFocusableState","updateUpperBoundAndMaxTravelZone","updateLowerBoundAndMinTravelZone","_lowerBound","_upperBound","isRange","lower","upper","Mirror","findClosestThumb","thumbTo","thumbFrom","showSliderIndicators","releasePointerCapture","hideSliderIndicators","toggleSliderIndicators","onPanListener","_lowerValue","_upperValue","sliderSetup","subscribeTo","thumbChanged","positionHandler","labelFrom","thumbType","swapThumb","hasValueChanged","emitValueChanged","onThumbChange","toggleThumb","closestHandle","generateTickMarks","thumbHandle","labelHandle","labelTo","fromOffset","offsetLeft","toOffset","xPointer","closestTo","trackRange","renderCallbackExecution","ticks","_indicatorsTimer","positions","pMin","pMax","positionGap","trackLeftIndention","trackRef","validateInitialValue","isSliderWithDifferentValue","isRangeWithOneDifferentValue","triggerChange","IgxThumbFromTemplateDirective","IgxThumbToTemplateDirective","IgxTickLabelTemplateDirective","SwitchLabelPosition","IgxSwitchComponent","switch","_onSwitchChange","_onSwitchClick","IGX_SWITCH_REQUIRED_VALIDATOR","IgxSwitchRequiredDirective","IgxBottomNavComponent","_currentBottomNavId","onTabSelected","onTabDeselected","_itemStyle","hasContentTabs","contentTabs","viewTabs","tabs","setPanelsAttributes","_panelsChanges$","panels","panelsArray","tabPanels","getTabPanelId","getTabId","_selectedPanelHandler","tab","_deselectTab","_deselectPanel","selectedTab","aTab","IgxTabComponent","IgxTabPanelComponent","_tabBar","_isSelected","relatedTab","changesCount","_tabTemplate","tabTemplate","IgxTabTemplateDirective","ariaDisabled","ariaSelected","_changesCount","relatedPanel","customTabTemplate","customTabTemplateDir","defaultTabTemplate","autoGenerated","ButtonStyle","IgxTabsBase","scrollElement","scrollRight","performSelectionChange","newTab","transformContentAnimation","transformIndicatorAnimation","IgxTabItemBase","setSelectedInternal","IgxTabsGroupBase","IgxRightButtonStyleDirective","getRightButtonStyle","VISIBLE","HIDDEN","NOT_DISPLAYED","viewPortWidth","viewPort","itemsContainerChildrenCount","itemsContainer","itemsContainerWidth","lastTab","headerContainerWidth","IgxLeftButtonStyleDirective","getLeftButtonStyle","IgxTabItemComponent","_tabs","_nativeTabItem","relatedGroup","onKeydown","tabsArray","finalIndex","nativeTabItem","IgxTabItemTemplateDirective","IgxTabsGroupComponent","IgxTabsType","FIXED","CONTENTFIT","NEXT_TABS_ID","IgxTabsComponent","_currentTabsId","selectedIndexChange","onTabItemDeselected","onTabItemSelected","_selectedIndex","iconLabelFoundInGroups","iconLabelFoundInTabs","performSelection","hideIndicator","tabsContainer","setGroupsAttributes","_groupChanges$","resetSelectionOnCollectionChanged","groupsArray","tabsGroup","getTabsGroupId","getTabItemId","currentTab","tabsArray_1","tabsArray_1_1","oldTab","selectedTabItem","performDeselection","oldTabRelatedGroup","newTabRelatedGroup","bringNewTabIntoView","tabNativeElement","viewPortOffsetWidth","contentOffset","contentsContainer","selectedIndicator","TimeParts","IGX_TIME_PICKER_COMPONENT","IgxItemListDirective","timePicker","nextHour","nextMinute","nextSeconds","nextAmPm","prevHour","prevMinute","prevSeconds","prevAmPm","listName","minuteList","secondsList","ampmList","hourList","okButtonClick","onKeydownEscape","cancelButtonClick","onHover","onPanMove","IgxHourItemDirective","itemList","isSelectedHour","selectedHour","scrollHourIntoView","IgxMinuteItemDirective","isSelectedMinute","selectedMinute","scrollMinuteIntoView","IgxSecondsItemDirective","isSelectedSeconds","selectedSeconds","scrollSecondsIntoView","IgxAmPmItemDirective","isSelectedAmPm","selectedAmPm","scrollAmPmIntoView","TimeDisplayFormatPipe","amPM","maskAmPM","parseMask","sections","showHoursList","showMinutesList","showSecondsList","showAmPmList","prompt","regExp","hourVal","minutesVal","secondsVal","lastIndexOf","TimeInputFormatPipe","cleared","displayValue","leadZeroHour","leadZeroMinutes","leadZeroSeconds","TimePickerHammerConfig","IgxTimePickerComponent","timeParts","_hourItems","_minuteItems","_secondsItems","_ampmItems","isNotEmpty","_okButtonLabel","_cancelButtonLabel","_itemsDelta","_isHourListLoop","_isMinuteListLoop","_isSecondsListLoop","_hourView","_minuteView","_secondsView","_ampmView","_hoursPos","_minutesPos","_secondsPos","_amPmPos","_isValueValid","dispVal","_formatTime","_displayValue","setThroughUI","formatValue","trimMask","determineCursorPos","_dialogOverlaySettings","_dateFromModel","applyDisabledStyleForItem","period","minValueDate","convertMinMaxValue","maxValueDate","minute","Hour","Minute","_mask","secondsEntries","minuteEntries","hourEntries","timePickerTemplateDirective","defaultTimePickerTemplate","dropdownInputTemplate","_generateHours","_generateMinutes","_generateSeconds","_generateAmPm","spinOnEdit","_onDropDownClosed","onKeydownSpace","getInputGroupElement","onAltArrowDown","clearCursorPos","_scrollItemIntoView","isListLoop","viewType","itemIntoView","_itemToString","_nextItem","_prevItem","_viewToString","itemsCount","formattedSeconds","formattedMinute","formattedHour","_updateHourView","_updateMinuteView","_updateSecondsView","_updateAmPmView","_addEmptyItems","hourItemsCount","itemsDelta","minuteItemsCount","secondsItemsCount","_getSelectedTime","_isEntryValid","validH","validM","validS","re","validHourEntries","validMinuteEntries","validSecondsEntries","_updateEditableInput","_spinHours","currentVal","maxVal","hDelta","_spinMinutes","mDelta","_spinSeconds","sDelta","_initializeContainer","_prevSelectedHour","_prevSelectedMinute","_prevSelectedSeconds","_prevSelectedAmPm","_inputDirectiveUserTemplate","hourIntoView","minuteIntoView","secondsIntoView","ampmIntoView","time","hoursInView","minutesInView","secondsInView","ampmInView","ampm","preserveAmPm","maskWithAmPm","pureMask","isReset","mouseDown","displayVal","cursorOnHours","cursorOnMinutes","cursorOnSeconds","cursorOnAmPm","showHours","showMinutes","showSeconds","showAmPm","IgxTimePickerTemplateDirective","IgxTimePickerActionsDirective","IgxToastPosition","IgxToastComponent","d$","_isVisible","onShowing","onShown","onHiding","onHidden","isVisibleChange","toastMessage","SplitterType","IgxSplitterPaneComponent","onToggle","_dragSize","dragSize","_getSiblings","panes","siblings","sibling","IgxSplitterComponent","pane","assignFlexOrder","paneRect","initialPaneSize","siblingRect","initialSiblingSize","onMoving","maxSize","minSibling","maxSibling","paneSize","siblingSize","isPercentageSize","percentPaneSize","getTotalSize","percentSiblingPaneSize","getPaneSiblingsByOrder","barIndex","SPLITTER_INTERACTION_KEYS","IgxSplitBarComponent","moveStart","moving","movingEnd","resizeDisallowed","Vertical","onCollapsing","onDragStart","onDragEnd","prevSibling","nextSibling","DateRangePickerFormatPipe","appliedFormat","formatted","startDate","endDate","IgxDateRangeInputsBaseComponent","setFocus","updateInputValue","dateTimeEditor","updateInputValidity","IgxPickerToggleComponent","IgxDateRangeStartComponent","IgxDateRangeEndComponent","IgxDateRangePickerComponent","doneButtonText","rangeSelected","dateSeparator","$destroy","$toggleClickNotifier","getInputState","hasProjectedInputs","projectedInputs","setRequiredToInputs","updateCalendar","dialogOverlaySettings","dropdownOverlaySettings","updateInputs","errors","startInput","endInput","startValue","endValue","attachOnKeydown","subscribeToDateEditorEvents","configPositionStrategy","configOverlaySettings","cacheFocusedInput","attachOnTouched","subsToClicked","toggleComponents","updateDisabledState","initialSetValue","updateDisplayFormat","updateValidityOnBlur","_focusedInput","selectionData","extractRange","parseMinValue","parseMaxValue","swapEditorDates","_h","IgxDateRangeSeparatorDirective","IgxDateTimeEditorModule"],"mappings":"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IAAAmP,EAAAA,EAAInP,EAW/C,ICvgBYkY,GDugBND,GAAiF,IAAI/F,IAAI,CAC3F,CAACnS,EAAQA,GACT,CAACG,EAASA,GACV,CAACe,EAASG,GACV,CAACA,EAAYH,GACb,CAACK,EAAWD,GACZ,CAACA,EAAUC,GACX,CAACC,EAAYC,GACb,CAACA,EAAYD,GACb,CAACE,EAAYC,GACb,CAACA,EAAYD,GACb,CAACgI,GAAWA,IACZ,CAACC,GAAYA,IACb,CAAC3E,GAAWA,IACZ,CAACF,GAAYC,IACb,CAACA,GAAYD,IACb,CAACG,GAAOA,IACR,CAACrB,GAAUA,IACX,CAACC,GAAUA,IACX,CAACC,GAAUA,IACX,CAACC,GAAaA,IACd,CAACC,GAAYA,IACb,CAACC,GAAWA,IACZ,CAACC,GAAaA,IACd,CAACC,GAASA,IACV,CAACC,GAASA,IACV,CAACC,GAASA,IACV,CAACC,GAASA,IACV,CAACrC,EAAgBA,GACjB,CAACC,EAAiBA,GAClB,CAACC,EAAaI,GACd,CAACH,EAAcI,GACf,CAACH,EAAeI,GAChB,CAACH,EAAgBI,GACjB,CAACD,EAAcJ,GACf,CAACK,EAAeJ,GAChB,CAACC,EAAgBJ,GACjB,CAACK,EAAiBJ,GAClB,CAACO,EAAYI,GACb,CAACH,EAAaI,IACd,CAACH,EAAYI,IACb,CAACH,EAAaI,IACd,CAACH,EAAYJ,GACb,CAACK,GAAaJ,GACd,CAACK,GAAYJ,GACb,CAACK,GAAaJ,GACd,CAACK,GAAmBA,IACpB,CAACC,GAAoBA,IACrB,CAACC,GAAmBA,IACpB,CAACC,GAAoBA,IACrB,CAACC,GAAaA,IACd,CAACC,GAAcA,IACf,CAACC,GAAaA,IACd,CAACC,GAAcA,IACf,CAAC4B,GAAYU,IACb,CAACQ,GAAaK,IACd,CAACjB,GAAcL,IACf,CAACqB,GAAeH,IAChB,CAACT,GAAeV,IAChB,CAACuB,GAAgBL,IACjB,CAACjB,GAAaK,IACd,CAACa,GAAcG,IACf,CAACzB,GAAeA,IAChB,CAACe,GAAgBA,IACjB,CAACT,GAAWL,IACZ,CAACsB,GAAYP,IACb,CAACL,GAAWJ,IACZ,CAACU,GAAYO,IACb,CAACvB,GAAWK,IACZ,CAACU,GAAYO,IACb,CAAChB,GAAWI,IACZ,CAACa,GAAYP,IACb,CAACZ,GAAeG,IAChB,CAACW,GAAgBC,IACjB,CAACZ,GAAkBH,IACnB,CAACe,GAAmBD,IACpB,CAACjB,GAAkBA,IACnB,CAACgB,GAAmBA,IACpB,CAACR,GAAkBA,IACnB,CAACiB,GAAmBA,IACpB,CAACf,GAAgBE,IACjB,CAACc,GAAiBC,IAClB,CAACf,GAAiBF,IAClB,CAACiB,GAAkBD,IACnB,CAACI,GAAYG,IACb,CAACK,GAAaE,IACd,CAACR,GAAcD,IACf,CAACQ,GAAeE,IAChB,CAACR,GAAeH,IAChB,CAACU,GAAgBF,IACjB,CAACP,GAAaC,IACd,CAACS,GAAcF,IACf,CAACL,GAAWG,IACZ,CAACK,GAAYE,IACb,CAACR,GAAWD,IACZ,CAACQ,GAAYE,IACb,CAACR,GAAWH,IACZ,CAACU,GAAYF,IACb,CAACP,GAAWC,IACZ,CAACS,GAAYF,IACb,CAACO,GAAeE,IAChB,CAACM,GAAgBE,IACjB,CAACT,GAAiBE,IAClB,CAACM,GAAkBE,IACnB,CAACR,GAAgBF,IACjB,CAACU,GAAkBF,IACnB,CAACP,GAAkBF,IACnB,CAACU,GAAmBF,IACpB,CAACJ,GAAeE,IAChB,CAACM,GAAgBE,IACjB,CAACT,GAAiBE,IAClB,CAACM,GAAkBE,IACnB,CAACT,GAAkBF,IACnB,CAACU,GAAmBF,IACpB,CAACL,GAAgBF,IACjB,CAACU,GAAiBF,MAGhBgP,GAAqD,CACvD7W,EACAD,EACAI,EACAC,EACAU,EACAC,EACAG,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GACAC,GACAC,GACA0C,GACAgB,GACArB,GACAkB,GACAhB,GACAiB,GACAZ,GACAM,GACAhB,GACAe,GACAT,GACAiB,GACAZ,GACAgB,GACAd,GACAe,GACAK,GACAO,GACAR,GACAU,GACAP,GACAQ,GACAN,GACAO,GACAN,GACAO,GACAT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","sourcesContent":["enum EaseIn {\n    quad = `cubic-bezier(0.550, 0.085, 0.680, 0.530)` as any,\n    cubic = `cubic-bezier(0.550, 0.055, 0.675, 0.190)` as any,\n    quart = `cubic-bezier(0.895, 0.030, 0.685, 0.220)` as any,\n    quint = `cubic-bezier(0.755, 0.050, 0.855, 0.060)` as any,\n    sine = `cubic-bezier(0.470, 0.000, 0.745, 0.715)` as any,\n    expo = `cubic-bezier(0.950, 0.050, 0.795, 0.035)` as any,\n    circ = `cubic-bezier(0.600, 0.040, 0.980, 0.335)` as any,\n    back = `cubic-bezier(0.600, -0.280, 0.735, 0.045)` as any\n}\n\nenum EaseOut {\n    quad = `cubic-bezier(0.250, 0.460, 0.450, 0.940)` as any,\n    cubic = `cubic-bezier(0.215, 0.610, 0.355, 1.000)` as any,\n    quart = `cubic-bezier(0.165, 0.840, 0.440, 1.000)` as any,\n    quint = `cubic-bezier(0.230, 1.000, 0.320, 1.000)` as any,\n    sine = `cubic-bezier(0.390, 0.575, 0.565, 1.000)` as any,\n    expo = `cubic-bezier(0.190, 1.000, 0.220, 1.000)` as any,\n    circ = `cubic-bezier(0.075, 0.820, 0.165, 1.000)` as any,\n    back = `cubic-bezier(0.175, 0.885, 0.320, 1.275)` as any\n}\n\nenum EaseInOut {\n    quad = `cubic-bezier(0.455, 0.030, 0.515, 0.955)` as any,\n    cubic = `cubic-bezier(0.645, 0.045, 0.355, 1.000)` as any,\n    quart = `cubic-bezier(0.770, 0.000, 0.175, 1.000)` as any,\n    quint = `cubic-bezier(0.860, 0.000, 0.070, 1.000)` as any,\n    sine = `cubic-bezier(0.445, 0.050, 0.550, 0.950)` as any,\n    expo = `cubic-bezier(1.000, 0.000, 0.000, 1.000)` as any,\n    circ = `cubic-bezier(0.785, 0.135, 0.150, 0.860)` as any,\n    back = `cubic-bezier(0.680, -0.550, 0.265, 1.550)` as any\n}\n\nexport { EaseIn, EaseOut, EaseInOut };\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`\n        })\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseOut.sine,\n    endOpacity: 1,\n    startOpacity: 0\n};\n\nconst fadeIn: AnimationReferenceMetadata = animation(base, {\n    params: baseParams\n});\n\nconst fadeOut: AnimationReferenceMetadata = animation(base, {\n    params: {\n        delay: '0s',\n        duration: '350ms',\n        easing: EaseOut.sine,\n        endOpacity: 0,\n        startOpacity: 1\n    }\n});\n\nexport { fadeIn, fadeOut };\n","import {\n    animate,\n    animation,\n    AnimationMetadata,\n    AnimationReferenceMetadata,\n    keyframes,\n    style\n} from '@angular/animations';\nimport { EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst baseRecipe: AnimationMetadata[] = [\n    style({\n        backfaceVisibility: 'hidden',\n        transformStyle: 'preserve-3d'\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                transform: `translateZ({{startDistance}})\n                rotate3d({{rotateX}}, {{rotateY}}, {{rotateZ}}, {{startAngle}}deg)`\n            }),\n            style({\n                offset: 1,\n                transform: `translateZ({{endDistance}})\n                rotate3d({{rotateX}}, {{rotateY}}, {{rotateZ}}, {{endAngle}}deg)`\n            })\n        ])\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    duration: '600ms',\n    easing: EaseOut.quad,\n    endAngle: 180,\n    endDistance: '0px',\n    rotateX: 1,\n    rotateY: 0,\n    rotateZ: 0,\n    startAngle: 0,\n    startDistance: '0px'\n};\n\nconst flipTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams\n    }\n});\n\nconst flipBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endAngle: -180\n    }\n});\n\nconst flipLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nconst flipRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endAngle: -180,\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nconst flipHorFwd: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '170px'\n    }\n});\n\nconst flipHorBck: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '-170px'\n    }\n});\n\nconst flipVerFwd: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '170px',\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nconst flipVerBck: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endDistance: '-170px',\n        rotateX: 0,\n        rotateY: 1\n    }\n});\n\nexport {\n    flipTop,\n    flipRight,\n    flipBottom,\n    flipLeft,\n    flipHorFwd,\n    flipHorBck,\n    flipVerFwd,\n    flipVerBck\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseIn, EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst baseRecipe: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `rotate3d({{rotateX}},{{rotateY}},{{rotateZ}},{{startAngle}}deg)`,\n        transformOrigin: `{{xPos}} {{yPos}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            offset: 0,\n            opacity: `{{endOpacity}}`,\n            transform: `rotate3d({{rotateX}},{{rotateY}},{{rotateZ}},{{endAngle}}deg)`,\n            transformOrigin: `{{xPos}} {{yPos}}`\n        })\n    )\n];\n\nconst baseInParams: IAnimationParams = {\n    delay: '0s',\n    duration: '600ms',\n    easing: EaseOut.quad,\n    endAngle: 0,\n    endOpacity: 1,\n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 1,\n    startAngle: -360,\n    startOpacity: 0,\n    xPos: 'center',\n    yPos: 'center'\n};\n\nconst baseOutParams: IAnimationParams = {\n    ...baseInParams,\n    easing: EaseIn.quad,\n    endOpacity: 0,\n    startOpacity: 1\n};\n\nconst rotateInCenter: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: { ...baseInParams }\n});\n\nconst rotateOutCenter: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: { ...baseOutParams }\n});\n\nconst rotateInTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'top'\n    }\n});\n\nconst rotateOutTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'top'\n    }\n});\n\nconst rotateInRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'right'\n    }\n});\n\nconst rotateOutRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'right'\n    }\n});\n\nconst rotateInBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'bottom'\n    }\n});\n\nconst rotateOutBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'bottom'\n    }\n});\n\nconst rotateInLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'left'\n    }\n});\n\nconst rotateOutLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'left'\n    }\n});\n\nconst rotateInTr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'right',\n        yPos: 'top'\n    }\n});\n\nconst rotateOutTr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'right',\n        yPos: 'top'\n    }\n});\n\nconst rotateInBr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'right',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateOutBr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'right',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateInBl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'left',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateOutBl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'left',\n        yPos: 'bottom'\n    }\n});\n\nconst rotateInTl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        xPos: 'left',\n        yPos: 'top'\n    }\n});\n\nconst rotateOutTl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        xPos: 'left',\n        yPos: 'top'\n    }\n});\n\nconst rotateInDiagonal1: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: 1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutDiagonal1: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: 1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateInDiagonal2: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: -1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutDiagonal2: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: -1,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateInHor: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: 0,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutHor: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: 0,\n        rotateY: 1,\n        rotateZ: 0\n    }\n});\n\nconst rotateInVer: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseInParams,\n        rotateX: 1,\n        rotateY: 0,\n        rotateZ: 0\n    }\n});\n\nconst rotateOutVer: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseOutParams,\n        rotateX: 1,\n        rotateY: 0,\n        rotateZ: 0\n    }\n});\n\nexport {\n    rotateInCenter,\n    rotateInTop,\n    rotateInRight,\n    rotateInLeft,\n    rotateInBottom,\n    rotateInTr,\n    rotateInBr,\n    rotateInBl,\n    rotateInTl,\n    rotateInDiagonal1,\n    rotateInDiagonal2,\n    rotateInHor,\n    rotateInVer,\n    rotateOutCenter,\n    rotateOutTop,\n    rotateOutRight,\n    rotateOutLeft,\n    rotateOutBottom,\n    rotateOutTr,\n    rotateOutBr,\n    rotateOutBl,\n    rotateOutTl,\n    rotateOutDiagonal1,\n    rotateOutDiagonal2,\n    rotateOutHor,\n    rotateOutVer\n};\n","import {\n    animate,\n    animation,\n    AnimationMetadata,\n    AnimationReferenceMetadata,\n    keyframes,\n    style\n} from '@angular/animations';\nimport { EaseInOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst baseRecipe: AnimationMetadata[] = [\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                transform: `rotate(0deg) translate{{direction}}(0)`,\n                transformOrigin: `{{xPos}} {{yPos}}`\n            }),\n            style({\n                offset: 0.1,\n                transform: `rotate({{endAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.2,\n                transform: `rotate(-{{startAngle}}deg) translate{{direction}}({{startDistance}})`\n            }),\n            style({\n                offset: 0.3,\n                transform: `rotate({{startAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.4,\n                transform: `rotate(-{{startAngle}}deg) translate{{direction}}({{startDistance}})`\n\n            }),\n            style({\n                offset: 0.5,\n                transform: `rotate({{startAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.6,\n                transform: `rotate(-{{startAngle}}deg) translate{{direction}}({{startDistance}})`\n\n            }),\n            style({\n                offset: 0.7,\n                transform: `rotate({{startAngle}}deg) translate{{direction}}(-{{startDistance}})`\n            }),\n            style({\n                offset: 0.8,\n                transform: `rotate(-{{endAngle}}deg) translate{{direction}}({{endDistance}})`\n\n            }),\n            style({\n                offset: 0.9,\n                transform: `rotate({{endAngle}}deg) translate{{direction}}(-{{endDistance}})`\n\n            }),\n            style({\n                offset: 1,\n                transform: `rotate(0deg) translate{{direction}}(0)`,\n                transformOrigin: `{{xPos}} {{yPos}}`\n            })\n        ])\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    direction: 'X',\n    duration: '800ms',\n    easing: EaseInOut.quad,\n    endAngle: 0,\n    endDistance: '8px',\n    startAngle: 0,\n    startDistance: '10px',\n    xPos: 'center',\n    yPos: 'center'\n};\n\nconst shakeHor: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'X'\n    }\n});\n\nconst shakeVer: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y'\n    }\n});\n\nconst shakeTop: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        yPos: 'top'\n    }\n});\n\nconst shakeBottom: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        yPos: 'bottom'\n    }\n});\n\nconst shakeRight: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'right',\n        yPos: 'center'\n    }\n});\n\nconst shakeLeft: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'left',\n        yPos: 'center'\n    }\n});\n\nconst shakeCenter: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 8,\n        endDistance: '0',\n        startAngle: 10,\n        startDistance: '0',\n        xPos: 'center',\n        yPos: 'center'\n    }\n});\n\nconst shakeTr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'right',\n        yPos: 'top'\n    }\n});\n\nconst shakeBr: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'right',\n        yPos: 'bottom'\n    }\n});\n\nconst shakeBl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'left',\n        yPos: 'bottom'\n    }\n});\n\nconst shakeTl: AnimationReferenceMetadata = animation(baseRecipe, {\n    params: {\n        ...baseParams,\n        direction: 'Y',\n        endAngle: 2,\n        endDistance: '0',\n        startAngle: 4,\n        startDistance: '0',\n        xPos: 'left',\n        yPos: 'top'\n    }\n});\n\nexport {\n    shakeHor,\n    shakeVer,\n    shakeTop,\n    shakeBottom,\n    shakeRight,\n    shakeLeft,\n    shakeCenter,\n    shakeTr,\n    shakeBr,\n    shakeBl,\n    shakeTl\n};\n","import {\n    animate,\n    animation,\n    AnimationMetadata,\n    keyframes,\n    style\n} from '@angular/animations';\nimport { IAnimationParams } from '../interface';\n\nconst heartbeatBase: AnimationMetadata[] = [\n    style({\n        animationTimingFunction: `ease-out`,\n        transform: `scale(1)`,\n        transformOrigin: `center center`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                animationTimingFunction: `ease-in`,\n                offset: 0.1,\n                transform: `scale(0.91)`\n            }),\n            style({\n                animationTimingFunction: `ease-out`,\n                offset: 0.17,\n                transform: `scale(0.98)`\n            }),\n            style({\n                animationTimingFunction: `ease-in`,\n                offset: 0.33,\n                transform: `scale(0.87)`\n            }),\n            style({\n                animationTimingFunction: `ease-out`,\n                offset: 0.45,\n                transform: `scale(1)`\n            })\n        ])\n    )\n];\n\nconst heartbeatParams: IAnimationParams = {\n    delay: '0s',\n    duration: '1.5s',\n    easing: 'ease-in-out'\n};\n\nconst pulsateBase: AnimationMetadata[] = [\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                transform: `scale({{fromScale}})`\n            }),\n            style({\n                offset: 0.5,\n                transform: `scale({{toScale}})`\n            }),\n            style({\n                offset: 1,\n                transform: `scale({{fromScale}})`\n            })\n        ])\n    )\n];\n\nconst pulsateParams: IAnimationParams = {\n    delay: '0s',\n    duration: '.5s',\n    easing: 'ease-in-out',\n    fromScale: 1,\n    toScale: 1.1\n};\n\nconst blinkBase: AnimationMetadata[] = [\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        keyframes([\n            style({\n                offset: 0,\n                opacity: .8,\n                transform: `scale({{fromScale}})`\n            }),\n            style({\n                offset: 0.8,\n                opacity: 0,\n                transform: `scale({{midScale}})`\n            }),\n            style({\n                offset: 1,\n                opacity: 0,\n                transform: `scale({{toScale}})`\n            })\n        ])\n    )\n];\n\nconst blinkParams: IAnimationParams = {\n    delay: '0s',\n    duration: '.8s',\n    easing: 'ease-in-out',\n    fromScale: .2,\n    midScale: 1.2,\n    toScale: 2.2\n};\n\nconst pulsateFwd = animation(pulsateBase, {\n    params: {\n        ...pulsateParams\n    }\n});\n\nconst pulsateBck = animation(pulsateBase, {\n    params: {\n        ...pulsateParams,\n        toScale: .9\n    }\n});\n\nconst heartbeat = animation(heartbeatBase, {\n    params: {\n        ...heartbeatParams\n    }\n});\n\nconst blink = animation(blinkBase, {\n    params: {\n        ...blinkParams\n    }\n});\n\nexport {\n    heartbeat,\n    pulsateFwd,\n    pulsateBck,\n    blink\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `scale{{direction}}({{fromScale}})`,\n        transformOrigin: `{{xPos}} {{yPos}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`,\n            transform: `scale{{direction}}({{toScale}})`,\n            transformOrigin: `{{xPos}} {{yPos}}`\n        })\n    )\n];\n\nconst baseInParams: IAnimationParams = {\n    delay: '0s',\n    direction: '',\n    duration: '350ms',\n    easing: EaseOut.quad,\n    endOpacity: 1,\n    fromScale: .5,\n    startOpacity: 0,\n    toScale: 1,\n    xPos: '50%',\n    yPos: '50%'\n};\n\nconst baseOutParams: IAnimationParams = {\n    ...baseInParams,\n    easing: EaseOut.sine,\n    endOpacity: 0,\n    fromScale: 1,\n    startOpacity: 1,\n    toScale: .5\n};\n\nconst scaleInCenter: AnimationReferenceMetadata = animation(base, { params: baseInParams });\n\nconst scaleInBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInVerCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'Y',\n            fromScale: .4\n        }\n    }\n);\n\nconst scaleInTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '50%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '0',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleInVerTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'Y',\n            fromScale: .4,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInTr = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInVerBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'Y',\n            fromScale: .4,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '100%',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleInHorCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'X',\n            fromScale: .4\n        }\n    }\n);\n\nconst scaleInBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInHorLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'X',\n            fromScale: .4,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleInBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            xPos: '50%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleInHorRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            direction: 'X',\n            fromScale: .4,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutCenter: AnimationReferenceMetadata = animation(base, { params: baseOutParams });\n\nconst scaleOutBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutVerCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'Y',\n            toScale: .3\n        }\n    }\n);\n\nconst scaleOutVerTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'Y',\n            toScale: .3,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutVerBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'Y',\n            toScale: .3,\n            xPos: '0',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutTop: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '50%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '0',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleOutTr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '100%',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '100%',\n            yPos: '50%'\n        }\n    }\n);\n\nconst scaleOutBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            xPos: '50%',\n            yPos: '100%'\n        }\n    }\n);\n\nconst scaleOutHorCenter: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'X',\n            toScale: .3\n        }\n    }\n);\n\nconst scaleOutHorLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'X',\n            toScale: .3,\n            xPos: '0',\n            yPos: '0'\n        }\n    }\n);\n\nconst scaleOutHorRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            direction: 'X',\n            toScale: .3,\n            xPos: '100%',\n            yPos: '100%'\n        }\n    }\n);\n\nexport {\n    scaleInTop,\n    scaleInRight,\n    scaleInBottom,\n    scaleInLeft,\n    scaleInCenter,\n    scaleInTr,\n    scaleInBr,\n    scaleInBl,\n    scaleInTl,\n    scaleInVerTop,\n    scaleInVerBottom,\n    scaleInVerCenter,\n    scaleInHorCenter,\n    scaleInHorLeft,\n    scaleInHorRight,\n    scaleOutTop,\n    scaleOutRight,\n    scaleOutBottom,\n    scaleOutLeft,\n    scaleOutCenter,\n    scaleOutTr,\n    scaleOutBr,\n    scaleOutBl,\n    scaleOutTl,\n    scaleOutVerTop,\n    scaleOutVerBottom,\n    scaleOutVerCenter,\n    scaleOutHorCenter,\n    scaleOutHorLeft,\n    scaleOutHorRight\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseIn, EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `{{fromPosition}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`,\n            transform: `{{toPosition}}`\n        })\n    )\n];\n\nconst baseInParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseOut.quad,\n    endOpacity: 1,\n    fromPosition: 'translateY(-500px)',\n    startOpacity: 0,\n    toPosition: 'translateY(0)'\n};\n\nconst baseOutParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseIn.quad,\n    endOpacity: 0,\n    fromPosition: 'translateY(0)',\n    startOpacity: 1,\n    toPosition: 'translateY(-500px)'\n};\n\nconst slideInTop: AnimationReferenceMetadata = animation(base, { params: baseInParams });\n\nconst slideInLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseOut.quad,\n            endOpacity: 1,\n            fromPosition: 'translateX(-500px)',\n            startOpacity: 0,\n            toPosition: 'translateY(0)'\n        }\n    }\n);\n\nconst slideInRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseOut.quad,\n            endOpacity: 1,\n            fromPosition: 'translateX(500px)',\n            startOpacity: 0,\n            toPosition: 'translateY(0)'\n        }\n    }\n);\n\nconst slideInBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseOut.quad,\n            endOpacity: 1,\n            fromPosition: 'translateY(500px)',\n            startOpacity: 0,\n            toPosition: 'translateY(0)'\n        }\n    }\n);\n\nconst slideInTr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(-500px) translateX(500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideInTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(-500px) translateX(-500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideInBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(500px) translateX(500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideInBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseInParams,\n            fromPosition: 'translateY(500px) translateX(-500px)',\n            toPosition: 'translateY(0) translateX(0)'\n        }\n    }\n);\n\nconst slideOutTop: AnimationReferenceMetadata = animation(base, { params: baseOutParams });\n\nconst slideOutRight: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            toPosition: 'translateX(500px)'\n        }\n    }\n);\n\nconst slideOutBottom: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            delay: '0s',\n            duration: '350ms',\n            easing: EaseIn.quad,\n            endOpacity: 0,\n            fromPosition: 'translateY(0)',\n            startOpacity: 1,\n            toPosition: 'translateY(500px)'\n        }\n    }\n);\n\nconst slideOutLeft: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            toPosition: 'translateX(-500px)'\n        }\n    }\n);\n\nconst slideOutTr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(-500px) translateX(500px)'\n        }\n    }\n);\n\nconst slideOutBr: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(500px) translateX(500px)'\n        }\n    }\n);\n\nconst slideOutBl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(500px) translateX(-500px)'\n        }\n    }\n);\n\nconst slideOutTl: AnimationReferenceMetadata = animation(base,\n    {\n        params: {\n            ...baseOutParams,\n            fromPosition: 'translateY(0) translateX(0)',\n            toPosition: 'translateY(-500px) translateX(-500px)'\n        }\n    }\n);\n\nexport {\n    slideInTop,\n    slideInRight,\n    slideInBottom,\n    slideInLeft,\n    slideInTr,\n    slideInBr,\n    slideInBl,\n    slideInTl,\n    slideOutTop,\n    slideOutBottom,\n    slideOutRight,\n    slideOutLeft,\n    slideOutTr,\n    slideOutBr,\n    slideOutBl,\n    slideOutTl\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseIn, EaseOut } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst swingBase: AnimationMetadata[] = [\n    style({\n        opacity: `{{startOpacity}}`,\n        transform: `rotate{{direction}}({{startAngle}}deg)`,\n        transformOrigin: `{{xPos}} {{yPos}}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{endOpacity}}`,\n            transform: `rotate{{direction}}({{endAngle}}deg)`,\n            transformOrigin: `{{xPos}} {{yPos}}`\n        })\n    )\n];\n\nconst swingParams: IAnimationParams = {\n    delay: '0s',\n    direction: 'X',\n    duration: '.5s',\n    easing: EaseOut.back,\n    endAngle: 0,\n    endOpacity: 1,\n    startAngle: -100,\n    startOpacity: 0,\n    xPos: 'top',\n    yPos: 'center'\n};\n\nconst swingOutParams: IAnimationParams = {\n    ...swingParams,\n    duration: '.55s',\n    easing: EaseIn.back,\n    endAngle: 70,\n    endOpacity: 0,\n    startAngle: 0,\n    startOpacity: 1\n};\n\nconst swingInTopFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams\n    }\n});\n\nconst swingInRightFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingInBottomFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        startAngle: 100,\n        xPos: 'bottom'\n    }\n});\n\nconst swingInLeftFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        startAngle: 100,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nconst swingInTopBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        duration: '.6s',\n        startAngle: 70\n    }\n});\n\nconst swingInRightBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        duration: '.6s',\n        startAngle: 70,\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingInBottomBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        duration: '.6s',\n        startAngle: -70,\n        xPos: 'bottom'\n    }\n});\n\nconst swingInLeftBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingParams,\n        direction: 'Y',\n        duration: '.6s',\n        startAngle: -70,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nconst swingOutTopFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams\n    }\n});\n\nconst swingOutRightFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingOutBottomFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        endAngle: -70,\n        xPos: 'bottom'\n    }\n});\n\nconst swingOutLefttFwd: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        endAngle: -70,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nconst swingOutTopBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        duration: '.45s',\n        endAngle: -100\n    }\n});\n\nconst swingOutRightBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        duration: '.45s',\n        endAngle: -100,\n        xPos: 'center',\n        yPos: 'right'\n    }\n});\n\nconst swingOutBottomBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        duration: '.45s',\n        endAngle: 100,\n        xPos: 'bottom'\n    }\n});\n\nconst swingOutLeftBck: AnimationReferenceMetadata = animation(swingBase, {\n    params: {\n        ...swingOutParams,\n        direction: 'Y',\n        duration: '.45s',\n        endAngle: 100,\n        xPos: 'center',\n        yPos: 'left'\n    }\n});\n\nexport {\n    swingInTopFwd,\n    swingInRightFwd,\n    swingInLeftFwd,\n    swingInBottomFwd,\n    swingInTopBck,\n    swingInRightBck,\n    swingInBottomBck,\n    swingInLeftBck,\n    swingOutTopFwd,\n    swingOutRightFwd,\n    swingOutBottomFwd,\n    swingOutLefttFwd,\n    swingOutTopBck,\n    swingOutRightBck,\n    swingOutBottomBck,\n    swingOutLeftBck\n};\n","import { animate, animation, AnimationMetadata, AnimationReferenceMetadata, style } from '@angular/animations';\nimport { EaseOut, EaseIn } from '../easings';\nimport { IAnimationParams } from '../interface';\n\nconst base: AnimationMetadata[] = [\n    style({\n        opacity: `{{ startOpacity }}`,\n        height: `{{ startHeight }}`\n    }),\n    animate(\n        `{{duration}} {{delay}} {{easing}}`,\n        style({\n            opacity: `{{ endOpacity }}`,\n            height: `{{ endHeight }}`\n        })\n    )\n];\n\nconst baseParams: IAnimationParams = {\n    delay: '0s',\n    duration: '350ms',\n    easing: EaseIn.quad,\n    startOpacity: 0,\n    endOpacity: 1,\n    startHeight: '',\n    endHeight: ''\n};\n\nconst growVerIn: AnimationReferenceMetadata = animation(base, {\n    params: {\n        ...baseParams,\n        easing: EaseOut.quad,\n        startOpacity: 0,\n        endOpacity: 1,\n        startHeight: '0px',\n        endHeight: '*'\n    }\n});\n\nconst growVerOut: AnimationReferenceMetadata = animation(base, {\n    params: {\n        ...baseParams,\n        easing: EaseOut.quad,\n        startOpacity: 1,\n        endOpacity: 0,\n        startHeight: '*',\n        endHeight: '0px'\n    }\n});\n\nexport { growVerIn, growVerOut };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { IToggleView } from './IToggleView';\nimport { Injectable } from '@angular/core';\n\n/**\n * Common service to be injected between components where those implementing common\n * ToggleView interface can register and toggle directives can call their methods.\n * TODO: Track currently active? Events?\n */\n@Injectable()\nexport class IgxNavigationService {\n    private navs: { [id: string]: IToggleView; };\n\n    constructor() {\n        this.navs = {};\n    }\n\n    public add(id: string, navItem: IToggleView) {\n        this.navs[id] = navItem;\n    }\n\n    public remove(id: string) {\n        delete this.navs[id];\n    }\n\n    public get(id: string): IToggleView {\n        if (id) {\n            return this.navs[id];\n        }\n    }\n\n    public toggle(id: string, ...args) {\n        if (this.navs[id]) {\n            return this.navs[id].toggle(...args);\n        }\n    }\n    public open(id: string, ...args) {\n        if (this.navs[id]) {\n            return this.navs[id].open(...args);\n        }\n    }\n    public close(id: string, ...args) {\n        if (this.navs[id]) {\n            return this.navs[id].close(...args);\n        }\n    }\n}\n","import { Directive, HostListener, Input, NgModule } from '@angular/core';\nimport {IgxNavigationService} from './nav.service';\n\n/**\n * Directive that can toggle targets through provided NavigationService.\n *\n * Usage:\n * ```\n * <button igxNavToggle=\"ID\"> Toggle </button>\n * ```\n * Where the `ID` matches the ID of compatible `IToggleView` component.\n */\n@Directive({ selector: '[igxNavToggle]' })\nexport class IgxNavigationToggleDirective {\n    public state: IgxNavigationService;\n\n    @Input('igxNavToggle') private target;\n\n    constructor(nav: IgxNavigationService) {\n        this.state = nav;\n    }\n\n    @HostListener('click')\n    public toggleNavigationDrawer() {\n        this.state.toggle(this.target, true);\n    }\n}\n\n/**\n * Directive that can close targets through provided NavigationService.\n *\n * Usage:\n * ```\n * <button igxNavClose=\"ID\"> Close </button>\n * ```\n * Where the `ID` matches the ID of compatible `IToggleView` component.\n */\n@Directive({ selector: '[igxNavClose]' })\nexport class IgxNavigationCloseDirective {\n    public state: IgxNavigationService;\n\n    @Input('igxNavClose') private target;\n\n    constructor(nav: IgxNavigationService) {\n        this.state = nav;\n    }\n\n    @HostListener('click')\n    public closeNavigationDrawer() {\n        this.state.close(this.target, true);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxNavigationCloseDirective, IgxNavigationToggleDirective],\n    exports: [IgxNavigationCloseDirective, IgxNavigationToggleDirective],\n    providers: [IgxNavigationService]\n})\nexport class IgxNavigationModule {}\n","/* Copyright (c) 2014-2020 Denis Pushkarev\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE\n */\n\n// Note: Originally copied from core-js-pure package and modified. (https://github.com/zloirock/core-js)\n\nconst queue = {};\nlet counter = 0;\nlet eventListenerAdded = false;\n\nconst run = function (id) {\n    if (queue.hasOwnProperty(id)) {\n        const fn = queue[id];\n        delete queue[id];\n        fn();\n    }\n};\n\nconst listener = function (event) {\n    run(event.data);\n};\n\nexport function setImmediate(cb: any) {\n    if (window.setImmediate) {\n        return window.setImmediate(cb);\n    }\n\n    if (!eventListenerAdded) {\n        eventListenerAdded = true;\n        window.addEventListener('message', listener, false);\n    }\n\n    const args = [];\n    let i = 1;\n\n    while (arguments.length > i) {\n        args.push(arguments[i++]);\n    }\n\n    queue[++counter] = function () {\n        (typeof cb === 'function' ? cb : Function(cb)).apply(undefined, args);\n    };\n\n    const windowLocation = window.location;\n    window.postMessage(counter + '', windowLocation.protocol + '//' + windowLocation.host);\n\n    return counter;\n}\n\nexport function clearImmediate(id: any) {\n    if (window.clearImmediate) {\n        return window.clearImmediate(id);\n    }\n\n    delete queue[id];\n}\n","import { AnimationReferenceMetadata } from '@angular/animations';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport mergeWith from 'lodash.mergewith';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { Observable } from 'rxjs';\nimport {\n    blink, fadeIn, fadeOut, flipBottom, flipHorBck, flipHorFwd, flipLeft, flipRight, flipTop,\n    flipVerBck, flipVerFwd, growVerIn, growVerOut, heartbeat, pulsateBck, pulsateFwd, rotateInBl,\n    rotateInBottom, rotateInBr, rotateInCenter, rotateInDiagonal1, rotateInDiagonal2, rotateInHor,\n    rotateInLeft, rotateInRight, rotateInTl, rotateInTop, rotateInTr, rotateInVer, rotateOutBl,\n    rotateOutBottom, rotateOutBr, rotateOutCenter, rotateOutDiagonal1, rotateOutDiagonal2,\n    rotateOutHor, rotateOutLeft, rotateOutRight, rotateOutTl, rotateOutTop, rotateOutTr,\n    rotateOutVer, scaleInBl, scaleInBottom, scaleInBr, scaleInCenter, scaleInHorCenter,\n    scaleInHorLeft, scaleInHorRight, scaleInLeft, scaleInRight, scaleInTl, scaleInTop, scaleInTr,\n    scaleInVerBottom, scaleInVerCenter, scaleInVerTop, scaleOutBl, scaleOutBottom, scaleOutBr,\n    scaleOutCenter, scaleOutHorCenter, scaleOutHorLeft, scaleOutHorRight, scaleOutLeft,\n    scaleOutRight, scaleOutTl, scaleOutTop, scaleOutTr, scaleOutVerBottom, scaleOutVerCenter,\n    scaleOutVerTop, shakeBl, shakeBottom, shakeBr, shakeCenter, shakeHor, shakeLeft, shakeRight,\n    shakeTl, shakeTop, shakeTr, shakeVer, slideInBl, slideInBottom, slideInBr, slideInLeft,\n    slideInRight, slideInTl, slideInTop, slideInTr, slideOutBl, slideOutBottom, slideOutBr,\n    slideOutLeft, slideOutRight, slideOutTl, slideOutTop, slideOutTr, swingInBottomBck,\n    swingInBottomFwd, swingInLeftBck, swingInLeftFwd, swingInRightBck, swingInRightFwd,\n    swingInTopBck, swingInTopFwd, swingOutBottomBck, swingOutBottomFwd, swingOutLeftBck,\n    swingOutLefttFwd, swingOutRightBck, swingOutRightFwd, swingOutTopBck, swingOutTopFwd\n} from '../animations/main';\nimport { setImmediate } from './setImmediate';\n\n/**\n * @hidden\n */\nexport function cloneArray(array: any[], deep?: boolean) {\n    const arr = [];\n    if (!array) {\n        return arr;\n    }\n    let i = array.length;\n    while (i--) {\n        arr[i] = deep ? cloneValue(array[i]) : array[i];\n    }\n    return arr;\n}\n\n/**\n * Doesn't clone leaf items\n * @hidden\n */\nexport function cloneHierarchicalArray(array: any[], childDataKey: any): any[] {\n    const result: any[] = [];\n    if (!array) {\n        return result;\n    }\n\n    for (const item of array) {\n        const clonedItem = cloneValue(item);\n        if (Array.isArray(item[childDataKey])) {\n            clonedItem[childDataKey] = cloneHierarchicalArray(clonedItem[childDataKey], childDataKey);\n        }\n        result.push(clonedItem);\n    }\n    return result;\n}\n\n/**\n * Deep clones all first level keys of Obj2 and merges them to Obj1\n * @param obj1 Object to merge into\n * @param obj2 Object to merge from\n * @returns Obj1 with merged cloned keys from Obj2\n * @hidden\n */\nexport function mergeObjects(obj1: {}, obj2: {}): any {\n    return mergeWith(obj1, obj2, (objValue, srcValue) => {\n        if (Array.isArray(srcValue)) {\n            return objValue = srcValue;\n        }\n    });\n}\n\n/**\n * Creates deep clone of provided value.\n * Supports primitive values, dates and objects.\n * If passed value is array returns shallow copy of the array.\n * @param value value to clone\n * @returns Deep copy of provided value\n * @hidden\n */\nexport function cloneValue(value: any): any {\n    if (isDate(value)) {\n        return new Date(value.getTime());\n    }\n    if (Array.isArray(value)) {\n        return [...value];\n    }\n\n    if (value instanceof Map || value instanceof Set) {\n        return value;\n    }\n\n    if (isObject(value)) {\n        const result = {};\n\n        for (const key of Object.keys(value)) {\n            result[key] = cloneValue(value[key]);\n        }\n        return result;\n    }\n    return value;\n}\n\n/**\n * Parse provided input to Date.\n * @param value input to parse\n * @returns Date if parse succeed or null\n * @hidden\n */\nexport function parseDate(value: any): Date | null {\n    // if value is Invalid Date return null\n    if (isDate(value)) {\n        return !isNaN(value.getTime()) ? value : null;\n    }\n    return value ? new Date(value) : null;\n}\n\n/**\n * Returns an array with unique dates only.\n * @param columnValues collection of date values (might be numbers or ISO 8601 strings)\n * @returns collection of unique dates.\n * @hidden\n */\nexport function uniqueDates(columnValues: any[]) {\n    return columnValues.reduce((a, c) => {\n        if (!a.cache[c.label]) { a.result.push(c); }\n        a.cache[c.label] = true;\n        return a;\n    }, { result: [], cache: {} }).result;\n}\n\n/**\n * Checks if provided variable is Object\n * @param value Value to check\n * @returns true if provided variable is Object\n * @hidden\n */\nexport function isObject(value: any): boolean {\n    return value && value.toString() === '[object Object]';\n}\n\n/**\n * Checks if provided variable is Date\n * @param value Value to check\n * @returns true if provided variable is Date\n * @hidden\n */\nexport function isDate(value: any): boolean {\n    return value instanceof Date;\n}\n\n/**\n * Checks if the two passed arguments are equal\n * Currently supports date objects\n * @param obj1\n * @param obj2\n * @returns: `boolean`\n * @hidden\n */\nexport function isEqual(obj1, obj2): boolean {\n    if (isDate(obj1) && isDate(obj2)) {\n        return obj1.getTime() === obj2.getTime();\n    }\n    return obj1 === obj2;\n}\n\n/**\n * @hidden\n */\nexport const enum KEYCODES {\n    ENTER = 13,\n    SPACE = 32,\n    ESCAPE = 27,\n    LEFT_ARROW = 37,\n    UP_ARROW = 38,\n    RIGHT_ARROW = 39,\n    DOWN_ARROW = 40,\n    F2 = 113,\n    TAB = 9,\n    CTRL = 17,\n    Z = 90,\n    Y = 89,\n    X = 88,\n    BACKSPACE = 8,\n    DELETE = 46,\n    INPUT_METHOD = 229\n}\n\n/**\n * @hidden\n */\nexport const enum KEYS {\n    ENTER = 'Enter',\n    SPACE = ' ',\n    SPACE_IE = 'Spacebar',\n    ESCAPE = 'Escape',\n    ESCAPE_IE = 'Esc',\n    LEFT_ARROW = 'ArrowLeft',\n    LEFT_ARROW_IE = 'Left',\n    UP_ARROW = 'ArrowUp',\n    UP_ARROW_IE = 'Up',\n    RIGHT_ARROW = 'ArrowRight',\n    RIGHT_ARROW_IE = 'Right',\n    DOWN_ARROW = 'ArrowDown',\n    DOWN_ARROW_IE = 'Down',\n    F2 = 'F2',\n    TAB = 'Tab',\n    SEMICOLON = ';',\n    HOME = 'Home',\n    END = 'End'\n}\n\n/**\n * @hidden\n * Returns the actual size of the node content, using Range\n * ```typescript\n * let range = document.createRange();\n * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n *\n * let size = getNodeSizeViaRange(range, column.cells[0].nativeElement);\n * ```\n */\nexport function getNodeSizeViaRange(range: Range, node: any): number {\n    let overflow = null;\n    if (!isFirefox()) {\n        overflow = node.style.overflow;\n        // we need that hack - otherwise content won't be measured correctly in IE/Edge\n        node.style.overflow = 'visible';\n    }\n\n    range.selectNodeContents(node);\n    const width = range.getBoundingClientRect().width;\n\n    if (!isFirefox()) {\n        // we need that hack - otherwise content won't be measured correctly in IE/Edge\n        node.style.overflow = overflow;\n    }\n\n    return width;\n}\n/**\n * @hidden\n * Returns the actual size of the node content, using Canvas\n * ```typescript\n * let ctx = document.createElement('canvas').getContext('2d');\n * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n *\n * let size = valToPxlsUsingCanvas(ctx, column.cells[0].nativeElement);\n * ```\n */\nexport function getNodeSizeViaCanvas(canvas2dCtx: any, node: any): number {\n    const s = this.grid.document.defaultView.getComputedStyle(node);\n\n    // need to set the font to get correct width\n    canvas2dCtx.font = s.fontSize + ' ' + s.fontFamily;\n\n    return canvas2dCtx.measureText(node.textContent).width;\n}\n/**\n * @hidden\n */\nexport function isIE(): boolean {\n    return navigator.appVersion.indexOf('Trident/') > 0;\n}\n/**\n * @hidden\n */\nexport function isEdge(): boolean {\n    const edgeBrowser = /Edge[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent);\n    return edgeBrowser;\n}\n\n/**\n * @hidden\n */\nexport function isFirefox(): boolean {\n    const firefoxBrowser = /Firefox[\\/\\s](\\d+\\.\\d+)/.test(navigator.userAgent);\n    return firefoxBrowser;\n}\n\n/**\n * @hidden\n */\n@Injectable({ providedIn: 'root' })\nexport class PlatformUtil {\n    public isBrowser: boolean = isPlatformBrowser(this.platformId);\n\n    public isIOS = this.isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !('MSStream' in window);\n\n    constructor(@Inject(PLATFORM_ID) private platformId: Object) {\n    }\n}\n\n/**\n * @hidden\n */\nexport function isLeftClick(event: PointerEvent) {\n    return event.button === 0;\n}\n\n/** @hidden */\nexport function isNavigationKey(key: string): boolean {\n    return [\n        'down',\n        'up',\n        'left',\n        'right',\n        'arrowdown',\n        'arrowup',\n        'arrowleft',\n        'arrowright',\n        'home',\n        'end',\n        'space',\n        'spacebar',\n        ' '\n    ].indexOf(key) !== -1;\n}\n\n/**\n * @hidden\n */\nexport function flatten(arr: any[]) {\n    let result = [];\n\n    arr.forEach(el => {\n        result.push(el);\n        if (el.children) {\n            const children = Array.isArray(el.children) ? el.children : el.children.toArray();\n            result = result.concat(flatten(children));\n        }\n    });\n    return result;\n}\n\nexport interface CancelableEventArgs {\n    /**\n     * Provides the ability to cancel the event.\n     */\n    cancel: boolean;\n}\n\nexport interface IBaseEventArgs {\n    /**\n     * Provides reference to the owner component.\n     */\n    owner?: any;\n}\n\nexport interface CancelableBrowserEventArgs extends CancelableEventArgs {\n    /** Browser event */\n    event?: Event;\n}\n\nexport interface IBaseCancelableBrowserEventArgs extends CancelableBrowserEventArgs, IBaseEventArgs { }\n\nexport interface IBaseCancelableEventArgs extends CancelableEventArgs, IBaseEventArgs { }\n\nexport const HORIZONTAL_NAV_KEYS = new Set(['arrowleft', 'left', 'arrowright', 'right', 'home', 'end']);\n\nexport const NAVIGATION_KEYS = new Set([\n    'down',\n    'up',\n    'left',\n    'right',\n    'arrowdown',\n    'arrowup',\n    'arrowleft',\n    'arrowright',\n    'home',\n    'end',\n    'space',\n    'spacebar',\n    ' '\n]);\nexport const ROW_EXPAND_KEYS = new Set('right down arrowright arrowdown'.split(' '));\nexport const ROW_COLLAPSE_KEYS = new Set('left up arrowleft arrowup'.split(' '));\nexport const ROW_ADD_KEYS = new Set(['+', 'add', '', '', '=']);\nexport const SUPPORTED_KEYS = new Set([...Array.from(NAVIGATION_KEYS), ...Array.from(ROW_ADD_KEYS), 'enter', 'f2', 'escape', 'esc', 'pagedown', 'pageup']);\nexport const HEADER_KEYS = new Set([...Array.from(NAVIGATION_KEYS), 'escape', 'esc', 'l',\n    /** This symbol corresponds to the Alt + L combination under MAC. */\n    '']);\n\n/**\n * @hidden\n * @internal\n *\n * Creates a new ResizeObserver on `target` and returns it as an Observable.\n * Run the resizeObservable outside angular zone, because it patches the MutationObserver which causes an infinite loop.\n * Related issue: https://github.com/angular/angular/issues/31712\n */\nexport function resizeObservable(target: HTMLElement): Observable<ResizeObserverEntry[]> {\n    return new Observable((observer) => {\n        const instance = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n            observer.next(entries);\n        });\n        instance.observe(target);\n        const unsubscribe = () => instance.disconnect();\n        return unsubscribe;\n    });\n}\n\n/**\n * @hidden\n * @internal\n *\n * Compares two maps.\n */\nexport function compareMaps(map1: Map<any, any>, map2: Map<any, any>): boolean {\n    if (!map2) {\n        return !map1 ? true : false;\n    }\n    if (map1.size !== map2.size) {\n        return false;\n    }\n    let match = true;\n    const keys = Array.from(map2.keys());\n    for (const key of keys) {\n        if (map1.has(key)) {\n            match = map1.get(key) === map2.get(key);\n        } else {\n            match = false;\n        }\n        if (!match) {\n            break;\n        }\n    }\n    return match;\n}\n\n/**\n *\n * Given a property access path in the format `x.y.z` resolves and returns\n * the value of the `z` property in the passed object.\n *\n * @hidden\n * @internal\n */\nexport function resolveNestedPath(obj: any, path: string) {\n    const parts = path?.split('.') ?? [];\n    let current = obj[parts.shift()];\n\n    parts.forEach(prop => {\n        if (current) {\n            current = current[prop];\n        }\n    });\n\n    return current;\n}\n\n/**\n *\n * Given a property access path in the format `x.y.z` and a value\n * this functions builds and returns an object following the access path.\n *\n * @example\n * ```typescript\n * console.log('x.y.z.', 42);\n * >> { x: { y: { z: 42 } } }\n * ```\n *\n * @hidden\n * @internal\n */\nexport function reverseMapper(path: string, value: any) {\n    const obj = {};\n    const parts = path?.split('.') ?? [];\n\n    let _prop = parts.shift();\n    let mapping: any;\n\n    // Initial binding for first level bindings\n    obj[_prop] = value;\n    mapping = obj;\n\n    parts.forEach(prop => {\n        // Start building the hierarchy\n        mapping[_prop] = {};\n        // Go down a level\n        mapping = mapping[_prop];\n        // Bind the value and move the key\n        mapping[prop] = value;\n        _prop = prop;\n    });\n\n    return obj;\n}\n\nexport function yieldingLoop(count: number, chunkSize: number, callback: (index: number) => void, done: () => void) {\n    let i = 0;\n    const chunk = () => {\n        const end = Math.min(i + chunkSize, count);\n        for (; i < end; ++i) {\n            callback(i);\n        }\n        if (i < count) {\n            setImmediate(chunk);\n        } else {\n            done();\n        }\n    };\n    chunk();\n}\n\nexport function mkenum<T extends { [index: string]: U }, U extends string>(x: T) { return x; }\n\nexport function reverseAnimationResolver(animation: AnimationReferenceMetadata): AnimationReferenceMetadata {\n    return oppositeAnimation.get(animation) ?? animation;\n}\n\nexport function isHorizontalAnimation(animation: AnimationReferenceMetadata): boolean {\n    return horizontalAnimations.includes(animation);\n}\n\nexport function isVerticalAnimation(animation: AnimationReferenceMetadata): boolean {\n    return verticalAnimations.includes(animation);\n}\n\nconst oppositeAnimation: Map<AnimationReferenceMetadata, AnimationReferenceMetadata> = new Map([\n    [fadeIn, fadeIn],\n    [fadeOut, fadeOut],\n    [flipTop, flipBottom],\n    [flipBottom, flipTop],\n    [flipRight, flipLeft],\n    [flipLeft, flipRight],\n    [flipHorFwd, flipHorBck],\n    [flipHorBck, flipHorFwd],\n    [flipVerFwd, flipVerBck],\n    [flipVerBck, flipVerFwd],\n    [growVerIn, growVerIn],\n    [growVerOut, growVerOut],\n    [heartbeat, heartbeat],\n    [pulsateFwd, pulsateBck],\n    [pulsateBck, pulsateFwd],\n    [blink, blink],\n    [shakeHor, shakeHor],\n    [shakeVer, shakeVer],\n    [shakeTop, shakeTop],\n    [shakeBottom, shakeBottom],\n    [shakeRight, shakeRight],\n    [shakeLeft, shakeLeft],\n    [shakeCenter, shakeCenter],\n    [shakeTr, shakeTr],\n    [shakeBr, shakeBr],\n    [shakeBl, shakeBl],\n    [shakeTl, shakeTl],\n    [rotateInCenter, rotateInCenter],\n    [rotateOutCenter, rotateOutCenter],\n    [rotateInTop, rotateInBottom],\n    [rotateOutTop, rotateOutBottom],\n    [rotateInRight, rotateInLeft],\n    [rotateOutRight, rotateOutLeft],\n    [rotateInLeft, rotateInRight],\n    [rotateOutLeft, rotateOutRight],\n    [rotateInBottom, rotateInTop],\n    [rotateOutBottom, rotateOutTop],\n    [rotateInTr, rotateInBl],\n    [rotateOutTr, rotateOutBl],\n    [rotateInBr, rotateInTl],\n    [rotateOutBr, rotateOutTl],\n    [rotateInBl, rotateInTr],\n    [rotateOutBl, rotateOutTr],\n    [rotateInTl, rotateInBr],\n    [rotateOutTl, rotateOutBr],\n    [rotateInDiagonal1, rotateInDiagonal1],\n    [rotateOutDiagonal1, rotateOutDiagonal1],\n    [rotateInDiagonal2, rotateInDiagonal2],\n    [rotateOutDiagonal2, rotateOutDiagonal2],\n    [rotateInHor, rotateInHor],\n    [rotateOutHor, rotateOutHor],\n    [rotateInVer, rotateInVer],\n    [rotateOutVer, rotateOutVer],\n    [scaleInTop, scaleInBottom],\n    [scaleOutTop, scaleOutBottom],\n    [scaleInRight, scaleInLeft],\n    [scaleOutRight, scaleOutLeft],\n    [scaleInBottom, scaleInTop],\n    [scaleOutBottom, scaleOutTop],\n    [scaleInLeft, scaleInRight],\n    [scaleOutLeft, scaleOutRight],\n    [scaleInCenter, scaleInCenter],\n    [scaleOutCenter, scaleOutCenter],\n    [scaleInTr, scaleInBl],\n    [scaleOutTr, scaleOutBl],\n    [scaleInBr, scaleInTl],\n    [scaleOutBr, scaleOutTl],\n    [scaleInBl, scaleInTr],\n    [scaleOutBl, scaleOutTr],\n    [scaleInTl, scaleInBr],\n    [scaleOutTl, scaleOutBr],\n    [scaleInVerTop, scaleInVerBottom],\n    [scaleOutVerTop, scaleOutVerBottom],\n    [scaleInVerBottom, scaleInVerTop],\n    [scaleOutVerBottom, scaleOutVerTop],\n    [scaleInVerCenter, scaleInVerCenter],\n    [scaleOutVerCenter, scaleOutVerCenter],\n    [scaleInHorCenter, scaleInHorCenter],\n    [scaleOutHorCenter, scaleOutHorCenter],\n    [scaleInHorLeft, scaleInHorRight],\n    [scaleOutHorLeft, scaleOutHorRight],\n    [scaleInHorRight, scaleInHorLeft],\n    [scaleOutHorRight, scaleOutHorLeft],\n    [slideInTop, slideInBottom],\n    [slideOutTop, slideOutBottom],\n    [slideInRight, slideInLeft],\n    [slideOutRight, slideOutLeft],\n    [slideInBottom, slideInTop],\n    [slideOutBottom, slideOutTop],\n    [slideInLeft, slideInRight],\n    [slideOutLeft, slideOutRight],\n    [slideInTr, slideInBl],\n    [slideOutTr, slideOutBl],\n    [slideInBr, slideInTl],\n    [slideOutBr, slideOutTl],\n    [slideInBl, slideInTr],\n    [slideOutBl, slideOutTr],\n    [slideInTl, slideInBr],\n    [slideOutTl, slideOutBr],\n    [swingInTopFwd, swingInBottomFwd],\n    [swingOutTopFwd, swingOutBottomFwd],\n    [swingInRightFwd, swingInLeftFwd],\n    [swingOutRightFwd, swingOutLefttFwd],\n    [swingInLeftFwd, swingInRightFwd],\n    [swingOutLefttFwd, swingOutRightFwd],\n    [swingInBottomFwd, swingInTopFwd],\n    [swingOutBottomFwd, swingOutTopFwd],\n    [swingInTopBck, swingInBottomBck],\n    [swingOutTopBck, swingOutBottomBck],\n    [swingInRightBck, swingInLeftBck],\n    [swingOutRightBck, swingOutLeftBck],\n    [swingInBottomBck, swingInTopBck],\n    [swingOutBottomBck, swingOutTopBck],\n    [swingInLeftBck, swingInRightBck],\n    [swingOutLeftBck, swingOutRightBck],\n]);\n\nconst horizontalAnimations: AnimationReferenceMetadata[] = [\n    flipRight,\n    flipLeft,\n    flipVerFwd,\n    flipVerBck,\n    rotateInRight,\n    rotateOutRight,\n    rotateInLeft,\n    rotateOutLeft,\n    rotateInTr,\n    rotateOutTr,\n    rotateInBr,\n    rotateOutBr,\n    rotateInBl,\n    rotateOutBl,\n    rotateInTl,\n    rotateOutTl,\n    scaleInRight,\n    scaleOutRight,\n    scaleInLeft,\n    scaleOutLeft,\n    scaleInTr,\n    scaleOutTr,\n    scaleInBr,\n    scaleOutBr,\n    scaleInBl,\n    scaleOutBl,\n    scaleInTl,\n    scaleOutTl,\n    scaleInHorLeft,\n    scaleOutHorLeft,\n    scaleInHorRight,\n    scaleOutHorRight,\n    slideInRight,\n    slideOutRight,\n    slideInLeft,\n    slideOutLeft,\n    slideInTr,\n    slideOutTr,\n    slideInBr,\n    slideOutBr,\n    slideInBl,\n    slideOutBl,\n    slideInTl,\n    slideOutTl,\n    swingInRightFwd,\n    swingOutRightFwd,\n    swingInLeftFwd,\n    swingOutLefttFwd,\n    swingInRightBck,\n    swingOutRightBck,\n    swingInLeftBck,\n    swingOutLeftBck,\n];\nconst verticalAnimations: AnimationReferenceMetadata[] = [\n    flipTop,\n    flipBottom,\n    flipHorFwd,\n    flipHorBck,\n    growVerIn,\n    growVerOut,\n    rotateInTop,\n    rotateOutTop,\n    rotateInBottom,\n    rotateOutBottom,\n    rotateInTr,\n    rotateOutTr,\n    rotateInBr,\n    rotateOutBr,\n    rotateInBl,\n    rotateOutBl,\n    rotateInTl,\n    rotateOutTl,\n    scaleInTop,\n    scaleOutTop,\n    scaleInBottom,\n    scaleOutBottom,\n    scaleInTr,\n    scaleOutTr,\n    scaleInBr,\n    scaleOutBr,\n    scaleInBl,\n    scaleOutBl,\n    scaleInTl,\n    scaleOutTl,\n    scaleInVerTop,\n    scaleOutVerTop,\n    scaleInVerBottom,\n    scaleOutVerBottom,\n    slideInTop,\n    slideOutTop,\n    slideInBottom,\n    slideOutBottom,\n    slideInTr,\n    slideOutTr,\n    slideInBr,\n    slideOutBr,\n    slideInBl,\n    slideOutBl,\n    slideInTl,\n    slideOutTl,\n    swingInTopFwd,\n    swingOutTopFwd,\n    swingInBottomFwd,\n    swingOutBottomFwd,\n    swingInTopBck,\n    swingOutTopBck,\n    swingInBottomBck,\n    swingOutBottomBck,\n];\n","import { ISortingStrategy } from './sorting-strategy';\nimport { IBaseEventArgs } from '../core/utils';\n\n/**\n * Represents sorting expressions.\n */\nexport enum SortingDirection {\n    None = 0,\n    Asc = 1,\n    Desc = 2\n}\n\nexport interface ISortingExpression extends IBaseEventArgs {\n   fieldName: string;\n   dir: SortingDirection;\n   ignoreCase?: boolean;\n   strategy?: ISortingStrategy;\n}\n","import { IGroupByKey } from './groupby-expand-state.interface';\nimport { IGroupByRecord } from './groupby-record.interface';\n\nexport function isHierarchyMatch(h1: Array<IGroupByKey>, h2: Array<IGroupByKey>): boolean {\n    if (h1.length !== h2.length) {\n        return false;\n    }\n    return h1.every((level, index): boolean => {\n        return level.fieldName === h2[index].fieldName && level.value === h2[index].value;\n    });\n}\n\nexport function getHierarchy(gRow: IGroupByRecord): Array<IGroupByKey> {\n    const hierarchy: Array<IGroupByKey> = [];\n    if (gRow !== undefined && gRow.expression) {\n        hierarchy.push({ fieldName: gRow.expression.fieldName, value: gRow.value });\n        while (gRow.groupParent) {\n            gRow = gRow.groupParent;\n            hierarchy.unshift({ fieldName: gRow.expression.fieldName, value: gRow.value });\n        }\n    }\n    return hierarchy;\n}\n","import { cloneArray, resolveNestedPath, parseDate } from '../core/utils';\nimport { IGroupByRecord } from './groupby-record.interface';\nimport { ISortingExpression, SortingDirection } from './sorting-expression.interface';\nimport { IGroupingExpression } from './grouping-expression.interface';\nimport { IGroupingState } from './groupby-state.interface';\nimport { IGroupByExpandState } from './groupby-expand-state.interface';\nimport { IGroupByResult } from './grouping-result.interface';\nimport { getHierarchy, isHierarchyMatch } from './operations';\nimport { GridType } from '../grids/common/grid.interface';\n\nconst DATE_TYPE = 'date';\n\nexport interface ISortingStrategy {\n    sort: (data: any[],\n           fieldName: string,\n           dir: SortingDirection,\n           ignoreCase: boolean,\n           valueResolver: (obj: any, key: string, isDate?: boolean) => any,\n           isDate?: boolean) => any[];\n}\n\nexport class DefaultSortingStrategy implements ISortingStrategy {\n    private static _instance: DefaultSortingStrategy = null;\n\n    protected constructor() {}\n\n    public static instance(): DefaultSortingStrategy {\n        return this._instance || (this._instance = new this());\n    }\n\n    public sort(data: any[],\n                fieldName: string,\n                dir: SortingDirection,\n                ignoreCase: boolean,\n                valueResolver: (obj: any, key: string, isDate?: boolean) => any,\n                isDate?: boolean) {\n        const key = fieldName;\n        const reverse = (dir === SortingDirection.Desc ? -1 : 1);\n        const cmpFunc = (obj1, obj2) => {\n            return this.compareObjects(obj1, obj2, key, reverse, ignoreCase, valueResolver, isDate);\n        };\n        return this.arraySort(data, cmpFunc);\n    }\n\n    public compareValues(a: any, b: any) {\n        const an = (a === null || a === undefined);\n        const bn = (b === null || b === undefined);\n        if (an) {\n            if (bn) {\n                return 0;\n            }\n            return -1;\n        } else if (bn) {\n            return 1;\n        }\n        return a > b ? 1 : a < b ? -1 : 0;\n    }\n\n    protected compareObjects(obj1: object,\n                             obj2: object,\n                             key: string,\n                             reverse: number,\n                             ignoreCase: boolean,\n                             valueResolver: (obj: any, key: string, isDate?: boolean) => any,\n                             isDate: boolean) {\n        let a = valueResolver(obj1, key, isDate);\n        let b = valueResolver(obj2, key, isDate);\n        if (ignoreCase) {\n            a = a && a.toLowerCase ? a.toLowerCase() : a;\n            b = b && b.toLowerCase ? b.toLowerCase() : b;\n        }\n        return reverse * this.compareValues(a, b);\n    }\n\n    protected arraySort(data: any[], compareFn?): any[] {\n        return data.sort(compareFn);\n    }\n}\n\nexport interface IGridSortingStrategy {\n    sort(data: any[], expressions: ISortingExpression[], grid?: GridType): any[];\n}\n\nexport class NoopSortingStrategy implements IGridSortingStrategy {\n    private static _instance: NoopSortingStrategy = null;\n\n    private constructor() {  }\n\n    public static instance() {\n        return this._instance || (this._instance = new NoopSortingStrategy());\n    }\n\n    public sort(data: any[], expressions: ISortingExpression[]): any[] {\n        return data;\n    }\n}\n\nexport class IgxSorting implements IGridSortingStrategy {\n    public sort(data: any[], expressions: ISortingExpression[], grid?: GridType): any[] {\n        return this.sortDataRecursive(data, expressions, 0, grid);\n    }\n\n    private groupedRecordsByExpression(data: any[],\n            index: number,\n            expression: IGroupingExpression,\n            isDate: boolean = false): any[] {\n        let i;\n        let groupval;\n        const res = [];\n        const key = expression.fieldName;\n        const len = data.length;\n        res.push(data[index]);\n        groupval = this.getFieldValue(data[index], key, isDate);\n        index++;\n        const comparer = expression.groupingComparer || DefaultSortingStrategy.instance().compareValues;\n        for (i = index; i < len; i++) {\n            if (comparer(this.getFieldValue(data[i], key, isDate), groupval) === 0) {\n                res.push(data[i]);\n            } else {\n                break;\n            }\n        }\n        return res;\n    }\n    private sortDataRecursive<T>(data: T[],\n                                 expressions: ISortingExpression[],\n                                 expressionIndex: number = 0,\n                                 grid: GridType): T[] {\n        let i;\n        let j;\n        let expr: ISortingExpression;\n        let gbData;\n        let gbDataLen;\n        const exprsLen = expressions.length;\n        const dataLen = data.length;\n        expressionIndex = expressionIndex || 0;\n        if (expressionIndex >= exprsLen || dataLen <= 1) {\n            return data;\n        }\n        expr = expressions[expressionIndex];\n        if (!expr.strategy) {\n            expr.strategy = DefaultSortingStrategy.instance();\n        }\n        const isDate = grid && grid.getColumnByName(expr.fieldName) ?\n            grid.getColumnByName(expr.fieldName).dataType === DATE_TYPE : false;\n        data = expr.strategy.sort(data, expr.fieldName, expr.dir, expr.ignoreCase, this.getFieldValue, isDate);\n        if (expressionIndex === exprsLen - 1) {\n            return data;\n        }\n        // in case of multiple sorting\n        for (i = 0; i < dataLen; i++) {\n            gbData = this.groupedRecordsByExpression(data, i, expr, isDate);\n            gbDataLen = gbData.length;\n            if (gbDataLen > 1) {\n                gbData = this.sortDataRecursive(gbData, expressions, expressionIndex + 1, grid);\n            }\n            for (j = 0; j < gbDataLen; j++) {\n                data[i + j] = gbData[j];\n            }\n            i += gbDataLen - 1;\n        }\n        return data;\n    }\n    protected groupDataRecursive<T>(data: T[], state: IGroupingState, level: number,\n        parent: IGroupByRecord, metadata: IGroupByRecord[], grid: GridType = null,\n        groupsRecords: any[] = [], fullResult: IGroupByResult = { data: [], metadata: [] }): T[] {\n        const expressions = state.expressions;\n        const expansion = state.expansion;\n        let i = 0;\n        let result = [];\n        while (i < data.length) {\n            const column = grid ? grid.getColumnByName(expressions[level].fieldName) : null;\n            const isDate = column?.dataType === DATE_TYPE;\n            const group = this.groupedRecordsByExpression(data, i, expressions[level], isDate);\n            const groupRow: IGroupByRecord = {\n                expression: expressions[level],\n                level,\n                records: cloneArray(group),\n                value: this.getFieldValue(group[0], expressions[level].fieldName, isDate),\n                groupParent: parent,\n                groups: [],\n                height: grid ? grid.renderedRowHeight : null,\n                column: column\n            };\n            if (parent) {\n                parent.groups.push(groupRow);\n            } else {\n                groupsRecords.push(groupRow);\n            }\n            const hierarchy = getHierarchy(groupRow);\n            const expandState: IGroupByExpandState = expansion.find((s) =>\n                isHierarchyMatch(s.hierarchy || [{ fieldName: groupRow.expression.fieldName, value: groupRow.value }], hierarchy));\n            const expanded = expandState ? expandState.expanded : state.defaultExpanded;\n            let recursiveResult;\n            result.push(groupRow);\n            metadata.push(null);\n            fullResult.data.push(groupRow);\n            fullResult.metadata.push(null);\n            if (level < expressions.length - 1) {\n                recursiveResult = this.groupDataRecursive(group, state, level + 1, groupRow,\n                    expanded ? metadata : [], grid, groupsRecords, fullResult);\n                if (expanded) {\n                    result = result.concat(recursiveResult);\n                }\n            } else {\n                for (const groupItem of group) {\n                    fullResult.metadata.push(groupRow);\n                    fullResult.data.push(groupItem);\n                }\n                if (expanded) {\n                    metadata.push(...fullResult.metadata.slice(fullResult.metadata.length - group.length));\n                    result.push(...fullResult.data.slice(fullResult.data.length - group.length));\n                }\n            }\n            i += group.length;\n        }\n        return result;\n    }\n    protected getFieldValue(obj: any, key: string, isDate: boolean = false): any {\n        return isDate ? parseDate(resolveNestedPath(obj, key)) : resolveNestedPath(obj, key);\n    }\n}\n\nexport class IgxDataRecordSorting extends IgxSorting {\n\n    protected getFieldValue(obj: any, key: string, isDate: boolean = false): any {\n        return isDate ? parseDate(resolveNestedPath(obj.data, key)) : resolveNestedPath(obj.data, key);\n    }\n}\n","export enum PagingError {\n    None,\n    IncorrectPageIndex,\n    IncorrectRecordsPerPage\n}\n\nexport declare interface IPagingState {\n    index: number;\n    recordsPerPage: number;\n    metadata?: {\n        countPages: number;\n        error: PagingError;\n        countRecords: number;\n    };\n}\n","import { IFilteringOperation } from './filtering-condition';\n\nexport enum FilteringLogic {\n    And,\n    Or\n}\n\n/**\n * Represents filtering expressions.\n */\nexport declare interface IFilteringExpression {\n    fieldName: string;\n    condition: IFilteringOperation;\n    searchVal?: any;\n    ignoreCase?: boolean;\n}\n","import { IFilteringExpression, FilteringLogic } from './filtering-expression.interface';\nimport { IBaseEventArgs } from '../core/utils';\n\nexport enum FilteringExpressionsTreeType {\n    Regular,\n    Advanced\n}\n\nexport declare interface IFilteringExpressionsTree extends IBaseEventArgs {\n    filteringOperands: (IFilteringExpressionsTree | IFilteringExpression)[];\n    operator: FilteringLogic;\n    fieldName?: string;\n    type?: FilteringExpressionsTreeType;\n\n    find(fieldName: string): IFilteringExpressionsTree | IFilteringExpression;\n    findIndex(fieldName: string): number;\n}\n\nexport class FilteringExpressionsTree implements IFilteringExpressionsTree {\n\n    /**\n     * Sets/gets the filtering operands.\n     * ```typescript\n     * const gridExpressionsTree = new FilteringExpressionsTree(FilteringLogic.And);\n     * const expression = [\n     * {\n     *   condition: IgxStringFilteringOperand.instance().condition('contains'),\n     *   fieldName: 'Column Field',\n     *   searchVal: 'Value',\n     *   ignoreCase: false\n     * }];\n     * gridExpressionsTree.filteringOperands.push(expression);\n     * this.grid.filteringExpressionsTree = gridExpressionsTree;\n     * ```\n     * ```typescript\n     * let filteringOperands = gridExpressionsTree.filteringOperands;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    filteringOperands: (IFilteringExpressionsTree | IFilteringExpression)[] = [];\n\n    /**\n     * Sets/gets the operator.\n     * ```typescript\n     * gridExpressionsTree.operator = FilteringLogic.And;\n     * ```\n     * ```typescript\n     * let operator = gridExpressionsTree.operator;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    operator: FilteringLogic;\n\n    /**\n     * Sets/gets the field name of the column where the filtering expression is placed.\n     * ```typescript\n     *  gridExpressionTree.fieldName = 'Column Field';\n     * ```\n     * ```typescript\n     * let columnField = expressionTree.fieldName;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    fieldName?: string;\n\n    /**\n     * Sets/gets the type of the filtering expressions tree.\n     * ```typescript\n     *  gridExpressionTree.type = FilteringExpressionsTree.Advanced;\n     * ```\n     * ```typescript\n     * let type = expressionTree.type;\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    type?: FilteringExpressionsTreeType;\n\n    constructor(operator: FilteringLogic, fieldName?: string) {\n        this.operator = operator;\n        this.fieldName = fieldName;\n    }\n\n\n    /**\n     * Checks if filtering expressions tree is empty.\n     * @param expressionTree filtering expressions tree.\n     */\n    public static empty(expressionTree: IFilteringExpressionsTree): boolean {\n        return !expressionTree || !expressionTree.filteringOperands || !expressionTree.filteringOperands.length;\n    }\n\n    /**\n     * Returns the filtering expression for a column with the provided fieldName.\n     * ```typescript\n     * let filteringExpression = gridExpressionTree.find('Column Field');\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    public find(fieldName: string): IFilteringExpressionsTree | IFilteringExpression {\n        const index = this.findIndex(fieldName);\n\n        if (index > -1) {\n            return this.filteringOperands[index];\n        }\n\n        return null;\n    }\n\n    /**\n     * Returns the index of the filtering expression for a column with the provided fieldName.\n     * ```typescript\n     * let filteringExpressionIndex = gridExpressionTree.findIndex('Column Field');\n     * ```\n     * @memberof FilteringExpressionsTree\n     */\n    public findIndex(fieldName: string): number {\n        let expr;\n        for (let i = 0; i < this.filteringOperands.length; i++) {\n            expr = this.filteringOperands[i];\n            if (expr instanceof FilteringExpressionsTree) {\n                if (this.isFilteringExpressionsTreeForColumn(expr, fieldName)) {\n                    return i;\n                }\n            } else {\n                if ((expr as IFilteringExpression).fieldName === fieldName) {\n                    return i;\n                }\n            }\n        }\n\n        return -1;\n    }\n\n    protected isFilteringExpressionsTreeForColumn(expressionsTree: IFilteringExpressionsTree, fieldName: string): boolean {\n        if (expressionsTree.fieldName === fieldName) {\n            return true;\n        }\n\n        let expr;\n        for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n            expr = expressionsTree.filteringOperands[i];\n            if ((expr instanceof FilteringExpressionsTree)) {\n                return this.isFilteringExpressionsTreeForColumn(expr, fieldName);\n            } else {\n                return (expr as IFilteringExpression).fieldName === fieldName;\n            }\n        }\n\n        return false;\n    }\n}\n","import { IGroupByRecord } from './groupby-record.interface';\nimport { IgxSorting } from './sorting-strategy';\nimport { IGroupingState } from './groupby-state.interface';\nimport { IGroupByResult } from './grouping-result.interface';\n\nexport class IgxGrouping extends IgxSorting {\n    public groupBy(data: any[], state: IGroupingState, grid?: any,\n        groupsRecords?: any[], fullResult: IGroupByResult = { data: [], metadata: [] }): IGroupByResult {\n        const metadata: IGroupByRecord[] = [];\n        const grouping = this.groupDataRecursive(data, state, 0, null, metadata, grid, groupsRecords, fullResult);\n        return {\n            data: grouping,\n            metadata: metadata\n        };\n    }\n}\n\n","import { FilteringLogic, IFilteringExpression } from './filtering-expression.interface';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from './filtering-expressions-tree';\nimport { resolveNestedPath, parseDate } from '../core/utils';\nimport { GridType } from '../grids/common/grid.interface';\n\nconst DateType = 'date';\n\nexport interface IFilteringStrategy {\n    filter(data: any[], expressionsTree: IFilteringExpressionsTree, advancedExpressionsTree?: IFilteringExpressionsTree,\n        grid?: GridType): any[];\n}\n\nexport class NoopFilteringStrategy implements IFilteringStrategy {\n    private static _instance: NoopFilteringStrategy = null;\n\n    private constructor() {  }\n\n    public static instance() {\n        return this._instance || (this._instance = new NoopFilteringStrategy());\n    }\n\n    public filter(data: any[], expressionsTree: IFilteringExpressionsTree, advancedExpressionsTree?: IFilteringExpressionsTree): any[] {\n        return data;\n    }\n}\n\nexport abstract class BaseFilteringStrategy implements IFilteringStrategy  {\n    public abstract filter(data: any[], expressionsTree: IFilteringExpressionsTree,\n        advancedExpressionsTree?: IFilteringExpressionsTree, grid?: GridType): any[];\n\n    protected abstract getFieldValue(rec: object, fieldName: string, isDate: boolean): any;\n\n    public findMatchByExpression(rec: object, expr: IFilteringExpression, isDate?: boolean): boolean {\n        const cond = expr.condition;\n        const val = this.getFieldValue(rec, expr.fieldName, isDate);\n        return cond.logic(val, expr.searchVal, expr.ignoreCase);\n    }\n\n    public matchRecord(rec: object, expressions: IFilteringExpressionsTree | IFilteringExpression, grid?: GridType): boolean {\n        if (expressions) {\n            if (expressions instanceof FilteringExpressionsTree) {\n                const expressionsTree = expressions as IFilteringExpressionsTree;\n                const operator = expressionsTree.operator as FilteringLogic;\n                let matchOperand, operand;\n\n                if (expressionsTree.filteringOperands && expressionsTree.filteringOperands.length) {\n                    for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n                        operand = expressionsTree.filteringOperands[i];\n                        matchOperand = this.matchRecord(rec, operand, grid);\n\n                        // Return false if at least one operand does not match and the filtering logic is And\n                        if (!matchOperand && operator === FilteringLogic.And) {\n                            return false;\n                        }\n\n                        // Return true if at least one operand matches and the filtering logic is Or\n                        if (matchOperand && operator === FilteringLogic.Or) {\n                            return true;\n                        }\n                    }\n\n                    return matchOperand;\n                }\n\n                return true;\n            } else {\n                const expression = expressions as IFilteringExpression;\n                const isDate = grid && grid.getColumnByName(expression.fieldName) ?\n                    grid.getColumnByName(expression.fieldName).dataType === DateType : false;\n                return this.findMatchByExpression(rec, expression, isDate);\n            }\n        }\n\n        return true;\n    }\n}\n\nexport class FilteringStrategy extends BaseFilteringStrategy {\n    private static _instace: FilteringStrategy = null;\n\n    public constructor() { super(); }\n\n    public static instance() {\n        return this._instace || (this._instace = new this());\n    }\n\n    public filter<T>(data: T[], expressionsTree: IFilteringExpressionsTree, advancedExpressionsTree: IFilteringExpressionsTree,\n        grid: GridType): T[] {\n        let i;\n        let rec;\n        const len = data.length;\n        const res: T[] = [];\n        if ((FilteringExpressionsTree.empty(expressionsTree) && FilteringExpressionsTree.empty(advancedExpressionsTree)) || !len) {\n            return data;\n        }\n        for (i = 0; i < len; i++) {\n            rec = data[i];\n            if (this.matchRecord(rec, expressionsTree, grid) && this.matchRecord(rec, advancedExpressionsTree, grid)) {\n                res.push(rec);\n            }\n        }\n        return res;\n    }\n\n    protected getFieldValue(rec: object, fieldName: string, isDate: boolean = false): any {\n        let value = resolveNestedPath(rec, fieldName);\n        value = value && isDate ? parseDate(value) : value;\n        return value;\n    }\n}\n","import { EventEmitter } from '@angular/core';\n\nexport enum TransactionType {\n    ADD = 'add',\n    DELETE = 'delete',\n    UPDATE = 'update'\n}\n\nexport enum TransactionEventOrigin {\n    UNDO = 'undo',\n    REDO = 'redo',\n    CLEAR = 'clear',\n    ADD = 'add',\n    END = 'endPending'\n}\n\nexport interface Transaction {\n    id: any;\n    type: TransactionType;\n    newValue: any;\n}\n\n/**\n * @experimental\n * @hidden\n */\nexport interface HierarchicalTransaction extends Transaction {\n    path?: any[];\n}\n\nexport interface State {\n    value: any;\n    recordRef: any;\n    type: TransactionType;\n}\n\nexport interface Action<T extends Transaction> {\n    transaction: T;\n    recordRef: any;\n}\n\nexport interface StateUpdateEvent {\n    origin: TransactionEventOrigin;\n    actions: Action<Transaction>[];\n}\n\n/**\n * @experimental\n * @hidden\n */\nexport interface HierarchicalState extends State {\n    path: any[];\n}\n\nexport interface TransactionService<T extends Transaction, S extends State> {\n    /**\n     * Returns whether transaction is enabled for this service\n     */\n    readonly enabled: boolean;\n\n    /**\n     * Event fired when transaction state has changed - add transaction, commit all transactions, undo and redo\n     */\n    onStateUpdate?: EventEmitter<StateUpdateEvent>;\n\n    /**\n     * @returns if there are any transactions in the Undo stack\n     */\n    canUndo: boolean;\n\n    /**\n     * @returns if there are any transactions in the Redo stack\n     */\n    canRedo: boolean;\n\n    /**\n     * Adds provided  transaction with recordRef if any\n     * @param transaction Transaction to be added\n     * @param recordRef Reference to the value of the record in the data source related to the changed item\n     */\n    add(transaction: T, recordRef?: any): void;\n\n    /**\n     * Returns all recorded transactions in chronological order\n     * @param id Optional record id to get transactions for\n     * @returns All transaction in the service or for the specified record\n     */\n    getTransactionLog(id?: any): T[];\n\n    /**\n     * Remove the last transaction if any\n     */\n    undo(): void;\n\n    /**\n     * Applies the last undone transaction if any\n     */\n    redo(): void;\n\n    /**\n     * Returns aggregated changes from all transactions\n     * @param mergeChanges If set to true will merge each state's value over relate recordRef\n     * and will record resulting value in the related transaction\n     * @returns Collection of aggregated transactions for each changed record\n     */\n    getAggregatedChanges(mergeChanges: boolean): T[];\n\n    /**\n     * Returns the state of the record with provided id\n     * @param id The id of the record\n     * @param pending Should get pending state\n     * @returns State of the record if any\n     */\n    getState(id: any, pending?: boolean): S;\n\n    /**\n     * Returns value of the required id including all uncommitted changes\n     * @param id The id of the record to return value for\n     * @param mergeChanges If set to true will merge state's value over relate recordRef\n     * and will return merged value\n     * @returns Value with changes or **null**\n     */\n    getAggregatedValue(id: any, mergeChanges: boolean): any;\n\n    /**\n     * Applies all transactions over the provided data\n     * @param data Data source to update\n     * @param id Optional record id to commit transactions for\n     */\n    commit(data: any[], id?: any): void;\n\n    /**\n     * Clears all transactions\n     * @param id Optional record id to clear transactions for\n     */\n    clear(id?: any): void;\n\n    /**\n     * Starts pending transactions. All transactions passed after call to startPending\n     * will not be added to transaction log\n     */\n    startPending(): void;\n\n    /**\n     * Clears all pending transactions and aggregated pending state. If commit is set to true\n     * commits pending states as single transaction\n     * @param commit Should commit the pending states\n     */\n    endPending(commit: boolean): void;\n}\n","import { IFilteringState } from './filtering-state.interface';\n\nimport { IgxSorting, IgxDataRecordSorting, IGridSortingStrategy } from './sorting-strategy';\nimport { IgxGrouping } from './grouping-strategy';\nimport { IGroupByResult } from './grouping-result.interface';\n\nimport { IPagingState, PagingError } from './paging-state.interface';\n\nimport { IGroupByKey } from './groupby-expand-state.interface';\nimport { IGroupByRecord } from './groupby-record.interface';\nimport { IGroupingState } from './groupby-state.interface';\nimport { ISortingExpression } from './sorting-expression.interface';\nimport { FilteringStrategy } from './filtering-strategy';\nimport { ITreeGridRecord } from '../grids/tree-grid/public_api';\nimport { cloneValue, mergeObjects, mkenum } from '../core/utils';\nimport { Transaction, TransactionType, HierarchicalTransaction } from '../services/transaction/transaction';\nimport { getHierarchy, isHierarchyMatch } from './operations';\nimport { GridType } from '../grids/common/grid.interface';\n\n/**\n * @hidden\n */\nexport const DataType = mkenum({\n    String: 'string',\n    Number: 'number',\n    Boolean: 'boolean',\n    Date: 'date'\n});\nexport type DataType = (typeof DataType)[keyof typeof DataType];\n\n/**\n * @hidden\n */\nexport class DataUtil {\n    public static sort<T>(data: T[], expressions: ISortingExpression[], sorting: IGridSortingStrategy = new IgxSorting(),\n        grid?: GridType): T[] {\n        return sorting.sort(data, expressions, grid);\n    }\n\n    public static treeGridSort(hierarchicalData: ITreeGridRecord[],\n        expressions: ISortingExpression[],\n        sorting: IGridSortingStrategy = new IgxDataRecordSorting(),\n        parent?: ITreeGridRecord,\n        grid?: GridType): ITreeGridRecord[] {\n        let res: ITreeGridRecord[] = [];\n        hierarchicalData.forEach((hr: ITreeGridRecord) => {\n            const rec: ITreeGridRecord = DataUtil.cloneTreeGridRecord(hr);\n            rec.parent = parent;\n            if (rec.children) {\n                rec.children = DataUtil.treeGridSort(rec.children, expressions, sorting, rec, grid);\n            }\n            res.push(rec);\n        });\n\n        res = DataUtil.sort(res, expressions, sorting, grid);\n\n        return res;\n    }\n\n    public static cloneTreeGridRecord(hierarchicalRecord: ITreeGridRecord) {\n        const rec: ITreeGridRecord = {\n            rowID: hierarchicalRecord.rowID,\n            data: hierarchicalRecord.data,\n            children: hierarchicalRecord.children,\n            isFilteredOutParent: hierarchicalRecord.isFilteredOutParent,\n            level: hierarchicalRecord.level,\n            expanded: hierarchicalRecord.expanded\n        };\n        return rec;\n    }\n\n    public static group<T>(data: T[], state: IGroupingState, grid: GridType = null,\n        groupsRecords: any[] = [], fullResult: IGroupByResult = { data: [], metadata: [] }): IGroupByResult {\n        const grouping = new IgxGrouping();\n        groupsRecords.splice(0, groupsRecords.length);\n        return grouping.groupBy(data, state, grid, groupsRecords, fullResult);\n    }\n\n    public static page<T>(data: T[], state: IPagingState, dataLength?: number): T[] {\n        if (!state) {\n            return data;\n        }\n        const len = dataLength !== undefined ? dataLength : data.length;\n        const index = state.index;\n        const res = [];\n        const recordsPerPage = dataLength !== undefined && state.recordsPerPage > dataLength ? dataLength : state.recordsPerPage;\n        state.metadata = {\n            countPages: 0,\n            countRecords: len,\n            error: PagingError.None\n        };\n        if (index < 0 || isNaN(index)) {\n            state.metadata.error = PagingError.IncorrectPageIndex;\n            return res;\n        }\n        if (recordsPerPage <= 0 || isNaN(recordsPerPage)) {\n            state.metadata.error = PagingError.IncorrectRecordsPerPage;\n            return res;\n        }\n        state.metadata.countPages = Math.ceil(len / recordsPerPage);\n        if (!len) {\n            return data;\n        }\n        if (index >= state.metadata.countPages) {\n            state.metadata.error = PagingError.IncorrectPageIndex;\n            return res;\n        }\n        return data.slice(index * recordsPerPage, (index + 1) * recordsPerPage);\n    }\n\n    public static filter<T>(data: T[], state: IFilteringState, grid?: GridType): T[] {\n        if (!state.strategy) {\n            state.strategy = new FilteringStrategy();\n        }\n        return state.strategy.filter(data, state.expressionsTree, state.advancedExpressionsTree, grid);\n    }\n\n    public static correctPagingState(state: IPagingState, length: number) {\n        const maxPage = Math.ceil(length / state.recordsPerPage) - 1;\n        if (!isNaN(maxPage) && state.index > maxPage) {\n            state.index = maxPage;\n        }\n    }\n\n    public static getHierarchy(gRow: IGroupByRecord): Array<IGroupByKey> {\n        return getHierarchy(gRow);\n    }\n\n    public static isHierarchyMatch(h1: Array<IGroupByKey>, h2: Array<IGroupByKey>): boolean {\n        return isHierarchyMatch(h1, h2);\n    }\n\n    /**\n     * Merges all changes from provided transactions into provided data collection\n     * @param data Collection to merge\n     * @param transactions Transactions to merge into data\n     * @param primaryKey Primary key of the collection, if any\n     * @param deleteRows Should delete rows with DELETE transaction type from data\n     * @returns Provided data collections updated with all provided transactions\n     */\n    public static mergeTransactions<T>(data: T[], transactions: Transaction[], primaryKey?: any, deleteRows: boolean = false): T[] {\n        data.forEach((item: any, index: number) => {\n            const rowId = primaryKey ? item[primaryKey] : item;\n            const transaction = transactions.find(t => t.id === rowId);\n            if (transaction && transaction.type === TransactionType.UPDATE) {\n                data[index] = transaction.newValue;\n            }\n        });\n\n        if (deleteRows) {\n            transactions\n                .filter(t => t.type === TransactionType.DELETE)\n                .forEach(t => {\n                    const index = primaryKey ? data.findIndex(d => d[primaryKey] === t.id) : data.findIndex(d => d === t.id);\n                    if (0 <= index && index < data.length) {\n                        data.splice(index, 1);\n                    }\n                });\n        }\n\n        data.push(...transactions\n            .filter(t => t.type === TransactionType.ADD)\n            .map(t => t.newValue));\n\n        return data;\n    }\n\n    /**\n     * Merges all changes from provided transactions into provided hierarchical data collection\n     * @param data Collection to merge\n     * @param transactions Transactions to merge into data\n     * @param childDataKey Data key of child collections\n     * @param primaryKey Primary key of the collection, if any\n     * @param deleteRows Should delete rows with DELETE transaction type from data\n     * @returns Provided data collections updated with all provided transactions\n     */\n    public static mergeHierarchicalTransactions(\n        data: any[],\n        transactions: HierarchicalTransaction[],\n        childDataKey: any,\n        primaryKey?: any,\n        deleteRows: boolean = false): any[] {\n        for (const transaction of transactions) {\n            if (transaction.path) {\n                const parent = this.findParentFromPath(data, primaryKey, childDataKey, transaction.path);\n                let collection: any[] = parent ? parent[childDataKey] : data;\n                switch (transaction.type) {\n                    case TransactionType.ADD:\n                        //  if there is no parent this is ADD row at root level\n                        if (parent && !parent[childDataKey]) {\n                            parent[childDataKey] = collection = [];\n                        }\n                        collection.push(transaction.newValue);\n                        break;\n                    case TransactionType.UPDATE:\n                        const updateIndex = collection.findIndex(x => x[primaryKey] === transaction.id);\n                        if (updateIndex !== -1) {\n                            collection[updateIndex] = mergeObjects(cloneValue(collection[updateIndex]), transaction.newValue);\n                        }\n                        break;\n                    case TransactionType.DELETE:\n                        if (deleteRows) {\n                            const deleteIndex = collection.findIndex(r => r[primaryKey] === transaction.id);\n                            if (deleteIndex !== -1) {\n                                collection.splice(deleteIndex, 1);\n                            }\n                        }\n                        break;\n                }\n            } else {\n                //  if there is no path this is ADD row in root. Push the newValue to data\n                data.push(transaction.newValue);\n            }\n        }\n        return data;\n    }\n\n    public static parseValue(dataType: DataType, value: any): any {\n        if (dataType === DataType.Number) {\n            value = parseFloat(value);\n        }\n\n        return value;\n    }\n\n    private static findParentFromPath(data: any[], primaryKey: any, childDataKey: any, path: any[]): any {\n        let collection: any[] = data;\n        let result: any;\n\n        for (const id of path) {\n            result = collection && collection.find(x => x[primaryKey] === id);\n            if (!result) {\n                break;\n            }\n\n            collection = result[childDataKey];\n        }\n\n        return result;\n    }\n}\n","\n/**\n * @hidden\n */\nexport class ExportUtilities {\n    public static getKeysFromData(data: any[]) {\n        const length = data.length;\n        if (length === 0) {\n            return [];\n        }\n\n        const dataEntry = data[0];\n        const dataEntryMiddle = data[Math.floor(length / 2)];\n        const dataEntryLast = data[length - 1];\n\n        const keys1 = Object.keys(dataEntry);\n        const keys2 = Object.keys(dataEntryMiddle);\n        const keys3 = Object.keys(dataEntryLast);\n\n        const keys = new Set(keys1.concat(keys2).concat(keys3));\n\n        return !ExportUtilities.isSpecialData(data) ? Array.from(keys) : [ 'Column 1' ];\n    }\n\n    public static saveBlobToFile(blob: Blob, fileName) {\n        const a = document.createElement('a');\n        if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n            window.navigator.msSaveOrOpenBlob(blob, fileName);\n        } else {\n            const url = window.URL.createObjectURL(blob);\n            a.download = fileName;\n\n            a.href = url;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(url);\n        }\n    }\n\n    public static stringToArrayBuffer(s: string): ArrayBuffer {\n        const buf = new ArrayBuffer(s.length);\n        const view = new Uint8Array(buf);\n        for (let i = 0; i !== s.length; ++i) {\n            /* tslint:disable no-bitwise */\n            view[i] = s.charCodeAt(i) & 0xFF;\n            /* tslint:enable no-bitwise */\n        }\n        return buf;\n    }\n\n    public static isSpecialData(data: any[]): boolean {\n        const dataEntry = data[0];\n        return (typeof dataEntry === 'string' ||\n                typeof dataEntry === 'number' ||\n                dataEntry instanceof Date);\n    }\n\n    public static hasValue(value: any): boolean {\n        return value !== undefined && value !== null;\n    }\n\n    public static isNullOrWhitespaces(value: string): boolean {\n        return value === undefined || value === null || !value.trim();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { cloneArray, isEqual, reverseMapper, mergeObjects } from '../core/utils';\nimport { DataUtil, DataType } from '../data-operations/data-util';\nimport { IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { ISortingExpression, SortingDirection } from '../data-operations/sorting-expression.interface';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxRowDirective } from './row.directive';\nimport { IFilteringOperation } from '../data-operations/filtering-condition';\nimport { IFilteringExpressionsTree, FilteringExpressionsTree } from '../data-operations/filtering-expressions-tree';\nimport { Transaction, TransactionType, State } from '../services/transaction/transaction';\nimport { IgxCell, IgxRow } from './selection/selection.service';\nimport { GridType } from './common/grid.interface';\nimport { ColumnType } from './common/column.interface';\nimport { IGridEditEventArgs, IRowToggleEventArgs } from './common/events';\nimport {\n    ROW_COLLAPSE_KEYS, ROW_EXPAND_KEYS\n} from '../core/utils';\n\n/**\n * @hidden\n */\n@Injectable()\nexport class GridBaseAPIService <T extends IgxGridBaseDirective & GridType> {\n\n    grid: T;\n    protected destroyMap: Map<string, Subject<boolean>> = new Map<string, Subject<boolean>>();\n\n    public get_column_by_name(name: string): ColumnType {\n        return this.grid.columnList.find((col: ColumnType) => col.field === name);\n    }\n\n    public get_summary_data() {\n        const grid = this.grid;\n        let data = grid.filteredData;\n        if (data && grid.hasPinnedRecords) {\n           data = grid._filteredUnpinnedData;\n        }\n        if (!data) {\n            if (grid.transactions.enabled) {\n                data = DataUtil.mergeTransactions(\n                    cloneArray(grid.data),\n                    grid.transactions.getAggregatedChanges(true),\n                    grid.primaryKey\n                );\n                const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === TransactionType.DELETE).map(t => t.id);\n                deletedRows.forEach(rowID => {\n                    const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n                    const index = tempData.indexOf(rowID);\n                    if (index !== -1) {\n                       data.splice(index, 1);\n                    }\n                });\n            } else {\n                data = grid.data;\n            }\n        }\n        return data;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getRowData(rowID: any) {\n        const data = this.get_all_data(this.grid.transactions.enabled);\n        const index = this.get_row_index_in_data(rowID, data);\n        return data[index];\n    }\n\n    public get_row_index_in_data(rowID: any, dataCollection?: any[]): number {\n        const grid = this.grid as IgxGridBaseDirective;\n        if (!grid) {\n            return -1;\n        }\n        const data = dataCollection ?? this.get_all_data(grid.transactions.enabled);\n        return grid.primaryKey ? data.findIndex(record => record.recordRef ? record.recordRef[grid.primaryKey] === rowID\n            : record[grid.primaryKey] === rowID) : data.indexOf(rowID);\n    }\n\n    public get_row_by_key(rowSelector: any): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        if (!this.grid) {\n            return null;\n        }\n        const primaryKey = this.grid.primaryKey;\n        if (primaryKey !== undefined && primaryKey !== null) {\n            return this.grid.dataRowList.find((row) => row.rowData[primaryKey] === rowSelector);\n        } else {\n            return this.grid.dataRowList.find((row) => row.rowData === rowSelector);\n        }\n    }\n\n    public get_row_by_index(rowIndex: number): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.grid.rowList.find((row) => row.index === rowIndex);\n    }\n\n    public get_cell_by_key(rowSelector: any, field: string): IgxGridCellComponent {\n        const row = this.get_row_by_key(rowSelector);\n        if (row && row.cells) {\n            return row.cells.find((cell) => cell.column.field === field);\n        }\n    }\n\n    public get_cell_by_index(rowIndex: number, columnIndex: number): IgxGridCellComponent {\n        const row = this.get_row_by_index(rowIndex);\n        if (row && row.cells) {\n            return row.cells.find((cell) => cell.columnIndex === columnIndex);\n        }\n    }\n\n    public get_cell_by_visible_index(rowIndex: number, columnIndex: number): IgxGridCellComponent {\n        const row = this.get_row_by_index(rowIndex);\n        if (row && row.cells) {\n            return row.cells.find((cell) => cell.visibleColumnIndex === columnIndex);\n        }\n    }\n\n    public submit_value() {\n        const cell = this.grid.crudService.cell;\n        if (cell) {\n            const args = this.update_cell(cell, cell.editValue);\n            this.grid.crudService.cellEditingBlocked = args.cancel;\n            if (args.cancel) {\n                return args.cancel;\n            }\n            this.grid.crudService.exitCellEdit();\n        }\n    }\n\n    public submit_add_value() {\n        const cell = this.grid.crudService.cell;\n        if (cell) {\n            const args = this.update_add_cell(cell, cell.editValue);\n            if (args.cancel) {\n                this.grid.endAddRow();\n                return args.cancel;\n            }\n            return this.grid.crudService.exitCellEdit();\n        }\n    }\n\n    public update_add_cell(cell: IgxCell, value: any): IGridEditEventArgs  {\n        cell.editValue = value;\n\n        const args = cell.createEditEventArgs();\n\n        if (isEqual(args.oldValue, args.newValue)) {\n            return args;\n        }\n\n        this.grid.cellEdit.emit(args);\n        this.grid.crudService.cellEditingBlocked = args.cancel;\n        if (args.cancel) {\n            return args;\n        }\n\n        const data = cell.rowData;\n        mergeObjects(data, reverseMapper(cell.column.field, args.newValue));\n        this.grid.crudService.row.data = data;\n        const doneArgs = cell.createDoneEditEventArgs(args.newValue);\n        doneArgs.rowData = data;\n        this.grid.cellEditDone.emit(doneArgs);\n        return args;\n    }\n\n    update_cell(cell: IgxCell, value: any) {\n        cell.editValue = value;\n        const args = cell.createEditEventArgs();\n\n        if (isEqual(args.oldValue, args.newValue)) {\n            return args;\n        }\n\n        this.grid.cellEdit.emit(args);\n        this.grid.crudService.cellEditingBlocked = args.cancel;\n        if (args.cancel) {\n            return args;\n        }\n\n\n        this.grid.summaryService.clearSummaryCache(args);\n        const data = this.getRowData(cell.id.rowID);\n        this.updateData(this.grid, cell.id.rowID, data, cell.rowData, reverseMapper(cell.column.field, args.newValue));\n        if (this.grid.primaryKey === cell.column.field) {\n            if (this.grid.selectionService.isRowSelected(cell.id.rowID)) {\n                this.grid.selectionService.deselectRow(cell.id.rowID);\n                this.grid.selectionService.selectRowById(args.newValue);\n            }\n            if (this.grid.hasSummarizedColumns) {\n                this.grid.summaryService.removeSummaries(cell.id.rowID);\n            }\n        }\n        if (!this.grid.rowEditable || !this.grid.crudService.row ||\n                this.grid.crudService.row.id !== cell.id.rowID || !this.grid.transactions.enabled) {\n            this.grid.summaryService.clearSummaryCache(args);\n            (this.grid as any)._pipeTrigger++;\n        }\n\n        const doneArgs = cell.createDoneEditEventArgs(args.newValue);\n        this.grid.cellEditDone.emit(doneArgs);\n        return args;\n    }\n\n    /**\n     * Updates related row of provided grid's data source with provided new row value\n     * @param grid Grid to update data for\n     * @param rowID ID of the row to update\n     * @param rowValueInDataSource Initial value of the row as it is in data source\n     * @param rowCurrentValue Current value of the row as it is with applied previous transactions\n     * @param rowNewValue New value of the row\n     */\n    protected updateData(grid, rowID, rowValueInDataSource: any, rowCurrentValue: any, rowNewValue: {[x: string]: any}) {\n        if (grid.transactions.enabled) {\n            const transaction: Transaction = {\n                id: rowID,\n                type: TransactionType.UPDATE,\n                newValue: rowNewValue\n            };\n            grid.transactions.add(transaction, rowCurrentValue);\n        } else {\n            mergeObjects(rowValueInDataSource, rowNewValue);\n        }\n    }\n\n    _update_row(row: IgxRow, value?: any) {\n        const grid = this.grid;\n\n        const rowInEditMode = grid.crudService.row;\n        row.newData = value ?? rowInEditMode.transactionState;\n\n\n        if (rowInEditMode && row.id === rowInEditMode.id) {\n            row.data = { ...row.data, ...rowInEditMode.transactionState };\n        // TODO: Workaround for updating a row in edit mode through the API\n        } else if (this.grid.transactions.enabled) {\n            const state = grid.transactions.getState(row.id);\n            row.data = state ? Object.assign({}, row.data, state.value) : row.data;\n        }\n    }\n\n    update_row(row: IgxRow, value: any) {\n        const grid = this.grid;\n        const selected = grid.selectionService.isRowSelected(row.id);\n        const rowInEditMode = grid.crudService.row;\n        const data = this.get_all_data(grid.transactions.enabled);\n        const index = this.get_row_index_in_data(row.id, data);\n        const hasSummarized = grid.hasSummarizedColumns;\n        this._update_row(row, value);\n\n        const args = row.createEditEventArgs();\n\n        // If no valid row is found\n        if (index === -1) {\n            return args;\n        }\n\n        grid.rowEdit.emit(args);\n\n        if (args.cancel) {\n            return args;\n        }\n\n        const cachedRowData = { ... args.oldValue };\n        if (rowInEditMode) {\n            const hasChanges = grid.transactions.getState(args.rowID, true);\n            grid.transactions.endPending(false);\n            if (!hasChanges) {\n                return args;\n            }\n        }\n\n        if (!args.newValue) {\n            return args;\n        }\n\n        if (hasSummarized) {\n            grid.summaryService.removeSummaries(args.rowID);\n        }\n\n        this.updateData(grid, row.id, data[index], args.oldValue, args.newValue);\n        const newId = grid.primaryKey ? args.newValue[grid.primaryKey] : args.newValue;\n        if (selected) {\n            grid.selectionService.deselectRow(row.id);\n            grid.selectionService.selectRowById(newId);\n        }\n        // make sure selection is handled prior to updating the row.id\n        row.id = newId;\n        if (hasSummarized) {\n            grid.summaryService.removeSummaries(newId);\n        }\n        (grid as any)._pipeTrigger++;\n\n        const doneArgs = row.createDoneEditEventArgs(cachedRowData);\n        grid.rowEditDone.emit(doneArgs);\n        return args;\n    }\n\n\n    protected update_row_in_array(value: any, rowID: any, index: number) {\n        const grid = this.grid;\n        grid.data[index] = value;\n    }\n\n    public sort(expression: ISortingExpression): void {\n        if (expression.dir === SortingDirection.None) {\n            this.remove_grouping_expression(expression.fieldName);\n        }\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n        this.prepare_sorting_expression([sortingState], expression);\n        this.grid.sortingExpressions = sortingState;\n    }\n\n    public sort_multiple(expressions: ISortingExpression[]): void {\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n\n        for (const each of expressions) {\n            if (each.dir === SortingDirection.None) {\n                this.remove_grouping_expression(each.fieldName);\n            }\n            this.prepare_sorting_expression([sortingState], each);\n        }\n\n        this.grid.sortingExpressions = sortingState;\n    }\n\n    public filter(fieldName: string, term, conditionOrExpressionsTree: IFilteringOperation | IFilteringExpressionsTree,\n        ignoreCase: boolean) {\n        const grid = this.grid;\n        const filteringTree = grid.filteringExpressionsTree;\n        this.grid.endEdit(false);\n\n        if (grid.paging) {\n            grid.page = 0;\n        }\n\n        const fieldFilterIndex = filteringTree.findIndex(fieldName);\n        if (fieldFilterIndex > -1) {\n            filteringTree.filteringOperands.splice(fieldFilterIndex, 1);\n        }\n\n        this.prepare_filtering_expression(filteringTree, fieldName, term, conditionOrExpressionsTree, ignoreCase, fieldFilterIndex);\n        grid.filteringExpressionsTree = filteringTree;\n    }\n\n    public filter_global(term, condition, ignoreCase) {\n        if (!condition) {\n            return;\n        }\n\n        const grid = this.grid;\n        const filteringTree = grid.filteringExpressionsTree;\n        grid.endEdit(false);\n        if (grid.paging) {\n            grid.page = 0;\n        }\n\n        filteringTree.filteringOperands = [];\n        for (const column of grid.columns) {\n            this.prepare_filtering_expression(filteringTree, column.field, term,\n                condition, ignoreCase || column.filteringIgnoreCase);\n        }\n\n        grid.filteringExpressionsTree = filteringTree;\n    }\n\n    public clear_filter(fieldName: string) {\n        const grid = this.grid;\n        grid.endEdit(false);\n        const filteringState = grid.filteringExpressionsTree;\n        const index = filteringState.findIndex(fieldName);\n\n        if (index > -1) {\n            filteringState.filteringOperands.splice(index, 1);\n        } else if (!fieldName) {\n            filteringState.filteringOperands = [];\n        }\n\n        grid.filteringExpressionsTree = filteringState;\n    }\n\n    public clear_sort(fieldName: string) {\n        const sortingState = this.grid.sortingExpressions;\n        const index = sortingState.findIndex((expr) => expr.fieldName === fieldName);\n        if (index > -1) {\n            sortingState.splice(index, 1);\n            this.grid.sortingExpressions = sortingState;\n        }\n    }\n\n    protected prepare_filtering_expression(filteringState: IFilteringExpressionsTree, fieldName: string, searchVal,\n        conditionOrExpressionsTree: IFilteringOperation | IFilteringExpressionsTree, ignoreCase: boolean, insertAtIndex = -1) {\n\n        let newExpressionsTree;\n        const oldExpressionsTreeIndex = filteringState.findIndex(fieldName);\n        const expressionsTree = conditionOrExpressionsTree instanceof FilteringExpressionsTree ?\n            conditionOrExpressionsTree as IFilteringExpressionsTree : null;\n        const condition = conditionOrExpressionsTree instanceof FilteringExpressionsTree ?\n            null : conditionOrExpressionsTree as IFilteringOperation;\n        const newExpression: IFilteringExpression = { fieldName, searchVal, condition, ignoreCase };\n\n        if (oldExpressionsTreeIndex === -1) {\n            // no expressions tree found for this field\n            if (expressionsTree) {\n                if (insertAtIndex > -1) {\n                    filteringState.filteringOperands.splice(insertAtIndex, 0, expressionsTree);\n                } else {\n                    filteringState.filteringOperands.push(expressionsTree);\n                }\n            } else if (condition) {\n                // create expressions tree for this field and add the new expression to it\n                newExpressionsTree = new FilteringExpressionsTree(filteringState.operator, fieldName);\n                newExpressionsTree.filteringOperands.push(newExpression);\n                filteringState.filteringOperands.push(newExpressionsTree);\n            }\n        }\n    }\n\n    protected prepare_sorting_expression(stateCollections: Array<Array<any>>, expression: ISortingExpression) {\n        if (expression.dir === SortingDirection.None) {\n            stateCollections.forEach(state => {\n                state.splice(state.findIndex((expr) => expr.fieldName === expression.fieldName), 1);\n            });\n            return;\n        }\n\n        /**\n         * We need to make sure the states in each collection with same fields point to the same object reference.\n         * If the different state collections provided have different sizes we need to get the largest one.\n         * That way we can get the state reference from the largest one that has the same fieldName as the expression to prepare.\n         */\n        let maxCollection = stateCollections[0];\n        for (let i = 1; i < stateCollections.length; i++) {\n            if (maxCollection.length < stateCollections[i].length) {\n                maxCollection = stateCollections[i];\n            }\n        }\n        const maxExpr = maxCollection.find((expr) => expr.fieldName === expression.fieldName);\n\n        stateCollections.forEach(collection => {\n            const myExpr = collection.find((expr) => expr.fieldName === expression.fieldName);\n            if (!myExpr && !maxExpr) {\n                // Expression with this fieldName is missing from the current and the max collection.\n                collection.push(expression);\n            } else if (!myExpr && maxExpr) {\n                // Expression with this fieldName is missing from the current and but the max collection has.\n                collection.push(maxExpr);\n                Object.assign(maxExpr, expression);\n            } else {\n                // The current collection has the expression so just update it.\n                Object.assign(myExpr, expression);\n            }\n        });\n    }\n\n    protected remove_grouping_expression(fieldName) {\n    }\n\n    public clear_groupby(name?: string | Array<string>) {\n    }\n\n    public should_apply_number_style(column: ColumnType): boolean {\n        return column.dataType === DataType.Number;\n    }\n\n    public get_data(): any[] {\n        const grid = this.grid;\n        const data = grid.data ? grid.data : [];\n        return data;\n    }\n\n    public get_all_data(includeTransactions = false): any[] {\n        const grid = this.grid;\n        let data = grid && grid.data ? grid.data : [];\n        data = includeTransactions ? grid.dataWithAddedInTransactionRows : data;\n        return data;\n    }\n\n    public get_filtered_data(): any[] {\n        return this.grid.filteredData;\n    }\n\n    protected getSortStrategyPerColumn(fieldName: string) {\n        return this.get_column_by_name(fieldName) ?\n            this.get_column_by_name(fieldName).sortStrategy : undefined;\n    }\n\n    public addRowToData(rowData: any, parentRowID?) {\n        // Add row goes to transactions and if rowEditable is properly implemented, added rows will go to pending transactions\n        // If there is a row in edit - > commit and close\n        const grid = this.grid;\n        if (grid.transactions.enabled) {\n            const transactionId = grid.primaryKey ? rowData[grid.primaryKey] : rowData;\n            const transaction: Transaction = { id: transactionId, type: TransactionType.ADD, newValue: rowData };\n            grid.transactions.add(transaction);\n        } else {\n            grid.data.push(rowData);\n        }\n    }\n\n    public deleteRowFromData(rowID: any, index: number) {\n        //  if there is a row (index !== 0) delete it\n        //  if there is a row in ADD or UPDATE state change it's state to DELETE\n        const grid = this.grid;\n        if (index !== -1) {\n            if (grid.transactions.enabled) {\n                const transaction: Transaction = { id: rowID, type: TransactionType.DELETE, newValue: null };\n                grid.transactions.add(transaction, grid.data[index]);\n            } else {\n                grid.data.splice(index, 1);\n            }\n        } else {\n            const state: State = grid.transactions.getState(rowID);\n            grid.transactions.add({ id: rowID, type: TransactionType.DELETE, newValue: null }, state && state.recordRef);\n        }\n    }\n\n    public deleteRowById(rowId: any) {\n        let index: number;\n        const grid = this.grid;\n        const data = this.get_all_data();\n        if (grid.primaryKey) {\n            index = data.map((record) => record[grid.primaryKey]).indexOf(rowId);\n        } else {\n            index = data.indexOf(rowId);\n        }\n        const state: State = grid.transactions.getState(rowId);\n        const hasRowInNonDeletedState = state && state.type !== TransactionType.DELETE;\n\n        //  if there is a row (index !== -1) and the we have cell in edit mode on same row exit edit mode\n        //  if there is no row (index === -1), but there is a row in ADD or UPDATE state do as above\n        //  Otherwise just exit - there is nothing to delete\n        if (index !== -1 || hasRowInNonDeletedState) {\n            // Always exit edit when row is deleted\n            grid.endEdit(true);\n        } else {\n            return;\n        }\n\n        //  TODO: should we emit this when cascadeOnDelete is true for each row?!?!\n        grid.onRowDeleted.emit({ data: data[index] });\n\n        this.deleteRowFromData(rowId, index);\n\n        grid.selectionService.isRowSelected(rowId) ? grid.selectionService.deselectRow(rowId) : grid.selectionService.clearHeaderCBState();\n        (grid as any)._pipeTrigger++;\n        grid.notifyChanges();\n        // Data needs to be recalculated if transactions are in place\n        // If no transactions, `data` will be a reference to the grid getter, otherwise it will be stale\n        const dataAfterDelete = grid.transactions.enabled ? grid.dataWithAddedInTransactionRows : data;\n        grid.refreshSearch();\n        if (dataAfterDelete.length % grid.perPage === 0 && dataAfterDelete.length / grid.perPage - 1 < grid.page && grid.page !== 0) {\n            grid.page--;\n        }\n    }\n\n    public get_row_id(rowData) {\n        return this.grid.primaryKey ? rowData[this.grid.primaryKey] : rowData;\n    }\n\n    public row_deleted_transaction(rowID: any): boolean {\n        const grid = this.grid;\n        if (!grid) {\n            return false;\n        }\n        if (!grid.transactions.enabled) {\n            return false;\n        }\n        const state = grid.transactions.getState(rowID);\n        if (state) {\n            return state.type === TransactionType.DELETE;\n        }\n\n        return false;\n    }\n\n    public get_row_expansion_state(record: any): boolean {\n        const grid = this.grid;\n        const states = grid.expansionStates;\n        const rowID = grid.primaryKey ? record[grid.primaryKey] : record;\n        const expanded = states.get(rowID);\n\n        if (expanded !== undefined) {\n            return expanded;\n        } else {\n            return grid.getDefaultExpandState(record);\n        }\n    }\n\n    public set_row_expansion_state(rowID: any, expanded: boolean, event?: Event) {\n        const grid = this.grid;\n        const expandedStates = grid.expansionStates;\n\n        if (!this.allow_expansion_state_change(rowID, expanded)) {\n            return;\n        }\n\n        const args: IRowToggleEventArgs = {\n            rowID: rowID,\n            expanded: expanded,\n            event: event,\n            cancel: false\n        };\n\n        grid.onRowToggle.emit(args);\n\n        if (args.cancel) {\n            return;\n        }\n        expandedStates.set(rowID, expanded);\n        grid.expansionStates = expandedStates;\n        if (grid.rowEditable) {\n            grid.endEdit(true);\n        }\n    }\n\n    public get_rec_by_id(rowID) {\n        return  this.grid.primaryKey ? this.getRowData(rowID) : rowID;\n    }\n\n    public allow_expansion_state_change(rowID, expanded) {\n        return this.grid.expansionStates.get(rowID) !== expanded;\n    }\n\n    private isToggleKey(key: string): boolean {\n        return ROW_COLLAPSE_KEYS.has(key) || ROW_EXPAND_KEYS.has(key);\n    }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { BaseFilteringStrategy, IFilteringStrategy } from '../../data-operations/filtering-strategy';\nimport { IFilteringExpressionsTree, FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { IFilteringState } from '../../data-operations/filtering-state.interface';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { IgxGridBaseDirective } from '../grid/public_api';\nimport { GridType } from '../common/grid.interface';\nimport { resolveNestedPath, parseDate } from '../../core/utils';\n\n/** @hidden */\nexport class TreeGridFilteringStrategy extends BaseFilteringStrategy {\n    public filter(data: ITreeGridRecord[], expressionsTree: IFilteringExpressionsTree,\n        advancedExpressionsTree?: IFilteringExpressionsTree, grid?: GridType): ITreeGridRecord[] {\n        return this.filterImpl(data, expressionsTree, advancedExpressionsTree, undefined, grid);\n    }\n\n    private filterImpl(data: ITreeGridRecord[], expressionsTree: IFilteringExpressionsTree,\n        advancedExpressionsTree: IFilteringExpressionsTree, parent: ITreeGridRecord, grid?: GridType): ITreeGridRecord[] {\n        let i: number;\n        let rec: ITreeGridRecord;\n        const len = data.length;\n        const res: ITreeGridRecord[] = [];\n        if ((FilteringExpressionsTree.empty(expressionsTree) && FilteringExpressionsTree.empty(advancedExpressionsTree)) || !len) {\n            return data;\n        }\n        for (i = 0; i < len; i++) {\n            rec = DataUtil.cloneTreeGridRecord(data[i]);\n            rec.parent = parent;\n            if (rec.children) {\n                const filteredChildren = this.filterImpl(rec.children, expressionsTree, advancedExpressionsTree, rec, grid);\n                rec.children = filteredChildren.length > 0 ? filteredChildren : null;\n            }\n\n            if (this.matchRecord(rec, expressionsTree, grid) && this.matchRecord(rec, advancedExpressionsTree, grid)) {\n                res.push(rec);\n            } else if (rec.children && rec.children.length > 0) {\n                rec.isFilteredOutParent = true;\n                res.push(rec);\n            }\n        }\n        return res;\n    }\n\n    protected getFieldValue(rec: object, fieldName: string, isDate: boolean = false): any {\n        const hierarchicalRecord = <ITreeGridRecord>rec;\n        let value = resolveNestedPath(hierarchicalRecord.data, fieldName);\n        value = value && isDate ? parseDate(value) : value;\n        return value;\n    }\n}\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridFiltering',\n    pure: true\n})\nexport class IgxTreeGridFilteringPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n     }\n\n    public transform(hierarchyData: ITreeGridRecord[], expressionsTree: IFilteringExpressionsTree,\n        filterStrategy: IFilteringStrategy,\n        advancedFilteringExpressionsTree: IFilteringExpressionsTree, id: string,\n        pipeTrigger: number, filteringPipeTrigger: number, pinned?): ITreeGridRecord[] {\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n        const state: IFilteringState = {\n            expressionsTree: expressionsTree,\n            advancedExpressionsTree: advancedFilteringExpressionsTree,\n            strategy: new TreeGridFilteringStrategy()\n        };\n\n        if (filterStrategy) {\n            state.strategy = filterStrategy;\n        }\n\n        this.resetFilteredOutProperty(grid.records);\n\n        if (FilteringExpressionsTree.empty(state.expressionsTree) && FilteringExpressionsTree.empty(state.advancedExpressionsTree)) {\n            grid.setFilteredData(null, pinned);\n            return hierarchyData;\n        }\n\n        const result = this.filter(hierarchyData, state, grid);\n        const filteredData: any[] = [];\n        this.expandAllRecursive(grid, result, grid.expansionStates, filteredData);\n        grid.setFilteredData(filteredData, pinned);\n\n        return result;\n    }\n\n    private resetFilteredOutProperty(map: Map<any, ITreeGridRecord>) {\n        const keys = Array.from(map.keys());\n        for (let i = 0; i < keys.length; i++) {\n            map.get(keys[i]).isFilteredOutParent = undefined;\n        }\n    }\n\n    private expandAllRecursive(grid: IgxTreeGridComponent, data: ITreeGridRecord[],\n        expandedStates: Map<any, boolean>, filteredData: any[]) {\n        for (let i = 0; i < data.length; i++) {\n            const rec: any = data[i];\n            filteredData.push(rec.data);\n            this.updateNonProcessedRecord(grid, rec);\n\n            if (rec.children && rec.children.length > 0) {\n                expandedStates.set(rec.rowID, true);\n                this.expandAllRecursive(grid, rec.children, expandedStates, filteredData);\n            }\n        }\n    }\n\n    private updateNonProcessedRecord(grid: IgxTreeGridComponent, record: ITreeGridRecord) {\n        const rec = grid.records.get(record.rowID);\n        rec.isFilteredOutParent = record.isFilteredOutParent;\n    }\n\n    private filter(data: ITreeGridRecord[], state: IFilteringState, grid?: GridType): ITreeGridRecord[] {\n        return state.strategy.filter(data, state.expressionsTree, state.advancedExpressionsTree, grid);\n    }\n}\n","import { EventEmitter } from '@angular/core';\n\nimport { cloneValue, IBaseEventArgs, resolveNestedPath, yieldingLoop } from '../../core/utils';\nimport { DataUtil } from '../../data-operations/data-util';\n\nimport { ExportUtilities } from './export-utilities';\nimport { IgxExporterOptionsBase } from './exporter-options-base';\nimport { ITreeGridRecord } from '../../grids/tree-grid/tree-grid.interfaces';\nimport { TreeGridFilteringStrategy } from '../../grids/tree-grid/tree-grid.filtering.pipe';\n\n/**\n * onRowExport event arguments\n * this.exporterService.onRowExport.subscribe((args: IRowExportingEventArgs) => {\n * // set args properties here\n * })\n */\nexport interface IRowExportingEventArgs extends IBaseEventArgs {\n    /**\n     * Contains the exporting row data\n     */\n    rowData: any;\n\n    /**\n     * Contains the exporting row index\n     */\n    rowIndex: number;\n\n    /**\n     * Skip the exporting row when set to true\n     */\n    cancel: boolean;\n}\n\n/**\n * onColumnExport event arguments\n * ```typescript\n * this.exporterService.onColumnExport.subscribe((args: IColumnExportingEventArgs) => {\n * // set args properties here\n * });\n * ```\n */\nexport interface IColumnExportingEventArgs extends IBaseEventArgs {\n    /**\n     * Contains the exporting column header\n     */\n    header: string;\n\n    /**\n     * Contains the exporting column field name\n     */\n    field: string;\n\n    /**\n     * Contains the exporting column index\n     */\n    columnIndex: number;\n\n    /**\n     * Skip the exporting column when set to true\n     */\n    cancel: boolean;\n\n    /**\n     * Export the column's data without applying its formatter, when set to true\n     */\n    skipFormatter: boolean;\n}\n\nconst DEFAULT_COLUMN_WIDTH = 8.43;\n\nexport abstract class IgxBaseExporter {\n    private _columnList: any[];\n    private flatRecords = [];\n    private _columnWidthList: number[];\n\n    protected _isTreeGrid = false;\n    protected _indexOfLastPinnedColumn = -1;\n    protected _sort = null;\n\n    public onExportEnded = new EventEmitter<IBaseEventArgs>();\n\n    /**\n     * This event is emitted when a row is exported.\n     * ```typescript\n     * this.exporterService.onRowExport.subscribe((args: IRowExportingEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public onRowExport = new EventEmitter<IRowExportingEventArgs>();\n\n    /**\n     * This event is emitted when a column is exported.\n     * ```typescript\n     * this.exporterService.onColumnExport.subscribe((args: IColumnExportingEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public onColumnExport = new EventEmitter<IColumnExportingEventArgs>();\n\n    public get columnWidthList() {\n        return this._columnWidthList;\n    }\n\n    /**\n     * Method for exporting IgxGrid component's data.\n     * ```typescript\n     * this.exporterService.export(this.igxGridForExport, this.exportOptions);\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public export(grid: any, options: IgxExporterOptionsBase): void {\n        if (options === undefined || options === null) {\n            throw Error('No options provided!');\n        }\n\n        const columns = grid.columnList.toArray();\n        this._columnList = new Array<any>(columns.length);\n        this._columnWidthList = new Array<any>(columns.filter(c => !c.hidden).length);\n\n        const hiddenColumns = [];\n        let lastVisbleColumnIndex = -1;\n\n        columns.forEach((column) => {\n            const columnHeader = column.header !== '' ? column.header : column.field;\n            const exportColumn = !column.hidden || options.ignoreColumnsVisibility;\n            const index = options.ignoreColumnsOrder ? column.index : column.visibleIndex;\n            const columnWidth = Number(column.width.slice(0, -2));\n\n            const columnInfo = {\n                header: columnHeader,\n                dataType: column.dataType,\n                field: column.field,\n                skip: !exportColumn,\n                formatter: column.formatter,\n                skipFormatter: false\n            };\n\n            if (index !== -1) {\n                this._columnList[index] = columnInfo;\n                this._columnWidthList[index] = columnWidth;\n                lastVisbleColumnIndex = Math.max(lastVisbleColumnIndex, index);\n            } else {\n                hiddenColumns.push(columnInfo);\n            }\n\n            if (column.pinned && exportColumn) {\n                this._indexOfLastPinnedColumn++;\n            }\n        });\n\n        // Append the hidden columns to the end of the list\n        hiddenColumns.forEach((hiddenColumn) => {\n            this._columnList[++lastVisbleColumnIndex] = hiddenColumn;\n        });\n\n        const data = this.prepareData(grid, options);\n        this.exportData(data, options);\n    }\n\n    /**\n     * Method for exporting any kind of array data.\n     * ```typescript\n     * this.exporterService.exportData(this.arrayForExport, this.exportOptions);\n     * ```\n     * @memberof IgxBaseExporter\n     */\n    public exportData(data: any[], options: IgxExporterOptionsBase): void {\n        if (options === undefined || options === null) {\n            throw Error('No options provided!');\n        }\n\n        if (!this._columnList || this._columnList.length === 0) {\n            const keys = ExportUtilities.getKeysFromData(data);\n            this._columnList = keys.map((k) => ({ header: k, field: k, skip: false }));\n            this._columnWidthList = new Array<number>(keys.length).fill(DEFAULT_COLUMN_WIDTH);\n        }\n\n        let skippedPinnedColumnsCount = 0;\n        let columnsWithoutHeaderCount = 1;\n        this._columnList.forEach((column, index) => {\n            if (!column.skip) {\n                const columnExportArgs = {\n                    header: ExportUtilities.isNullOrWhitespaces(column.header) ?\n                        'Column' + columnsWithoutHeaderCount++ : column.header,\n                    field: column.field,\n                    columnIndex: index,\n                    cancel: false,\n                    skipFormatter: false\n                };\n                this.onColumnExport.emit(columnExportArgs);\n\n                column.header = columnExportArgs.header;\n                column.skip = columnExportArgs.cancel;\n                column.skipFormatter = columnExportArgs.skipFormatter;\n\n                if (column.skip && index <= this._indexOfLastPinnedColumn) {\n                    skippedPinnedColumnsCount++;\n                }\n\n                if (this._sort && this._sort.fieldName === column.field) {\n                    if (column.skip) {\n                        this._sort = null;\n                    } else {\n                        this._sort.fieldName = column.header;\n                    }\n                }\n            }\n        });\n\n        this._indexOfLastPinnedColumn -= skippedPinnedColumnsCount;\n\n        const dataToExport = new Array<any>();\n        const isSpecialData = ExportUtilities.isSpecialData(data);\n\n        yieldingLoop(data.length, 100, (i) => {\n            const row = data[i];\n            this.exportRow(dataToExport, row, i, isSpecialData);\n        }, () => {\n            this.exportDataImplementation(dataToExport, options);\n            this.resetDefaults();\n        });\n    }\n\n    protected abstract exportDataImplementation(data: any[], options: IgxExporterOptionsBase): void;\n\n    private exportRow(data: any[], rowData: any, index: number, isSpecialData: boolean) {\n        let row;\n\n        if (!isSpecialData) {\n            row = this._columnList.reduce((a, e) => {\n                if (!e.skip) {\n                    let rawValue = this._isTreeGrid ? resolveNestedPath(rowData.data, e.field) : resolveNestedPath(rowData, e.field);\n                    const shouldApplyFormatter = e.formatter && !e.skipFormatter;\n\n                    if (e.dataType === 'date' &&\n                        !(rawValue instanceof Date) &&\n                        !shouldApplyFormatter &&\n                        rawValue !== undefined &&\n                        rawValue !== null) {\n                        rawValue = new Date(rawValue);\n                    } else if (e.dataType === 'string' && rawValue instanceof Date) {\n                        rawValue = rawValue.toString();\n                    }\n\n                    a[e.header] = shouldApplyFormatter ? e.formatter(rawValue) : rawValue;\n                }\n                return a;\n            }, {});\n        } else {\n            row = this._isTreeGrid ? rowData.data : rowData;\n        }\n\n        const rowArgs = {\n            rowData: row,\n            rowIndex: index,\n            cancel: false\n        };\n        this.onRowExport.emit(rowArgs);\n\n        if (!rowArgs.cancel) {\n            data.push({ rowData: rowArgs.rowData, originalRowData: rowData });\n        }\n    }\n\n    private prepareData(grid: any, options: IgxExporterOptionsBase): any[] {\n        this.flatRecords = [];\n        let rootRecords = grid.rootRecords;\n        this._isTreeGrid = rootRecords !== undefined;\n\n        if (this._isTreeGrid) {\n            this.prepareHierarchicalData(rootRecords);\n        }\n\n        let data = this._isTreeGrid ? this.flatRecords : grid.data;\n\n        if (((grid.filteringExpressionsTree &&\n            grid.filteringExpressionsTree.filteringOperands.length > 0) ||\n            (grid.advancedFilteringExpressionsTree &&\n            grid.advancedFilteringExpressionsTree.filteringOperands.length > 0)) &&\n            !options.ignoreFiltering) {\n            const filteringState: any = {\n                expressionsTree: grid.filteringExpressionsTree,\n                advancedExpressionsTree: grid.advancedFilteringExpressionsTree,\n                logic: grid.filteringLogic\n            };\n\n            if (this._isTreeGrid) {\n                this.flatRecords = [];\n                filteringState.strategy = (grid.filterStrategy) ? grid.filterStrategy : new TreeGridFilteringStrategy();\n                rootRecords = filteringState.strategy.filter(rootRecords,\n                    filteringState.expressionsTree, filteringState.advancedExpressionsTree);\n                this.prepareHierarchicalData(rootRecords);\n                data = this.flatRecords;\n            } else {\n                filteringState.strategy = grid.filterStrategy;\n                data = DataUtil.filter(data, filteringState, grid);\n            }\n        }\n\n        if (grid.sortingExpressions &&\n            grid.sortingExpressions.length > 0 &&\n            !options.ignoreSorting) {\n            this._sort = cloneValue(grid.sortingExpressions[0]);\n\n            if (this._isTreeGrid) {\n                this.flatRecords = [];\n                rootRecords = DataUtil.treeGridSort(rootRecords, grid.sortingExpressions, grid.sortStrategy);\n                this.prepareHierarchicalData(rootRecords);\n                data = this.flatRecords;\n            } else {\n                data = DataUtil.sort(data, grid.sortingExpressions, grid.sortStrategy, grid);\n            }\n        }\n\n        return data;\n    }\n\n    private prepareHierarchicalData(records: ITreeGridRecord[]) {\n        if (!records) {\n            return;\n        }\n        for (let i = 0; i < records.length; i++) {\n            const hierarchicalRecord = records[i];\n\n            this.flatRecords.push(hierarchicalRecord);\n            this.prepareHierarchicalData(hierarchicalRecord.children);\n        }\n    }\n\n    private resetDefaults() {\n        this._columnList = [];\n        this._indexOfLastPinnedColumn = -1;\n        this._sort = null;\n        this.flatRecords = [];\n    }\n}\n","import { IgxExporterOptionsBase } from '../exporter-common/exporter-options-base';\n\n/**\n * Objects of this class are used to configure the CSV exporting process.\n */\nexport class IgxCsvExporterOptions extends IgxExporterOptionsBase {\n\n    private _valueDelimiter;\n    private _fileType;\n\n    constructor(fileName: string, fileType: CsvFileTypes) {\n        super(fileName, IgxCsvExporterOptions.getExtensionFromFileType(fileType));\n        this.setFileType(fileType);\n        this.setDelimiter();\n    }\n\n    private static getExtensionFromFileType(fType: CsvFileTypes) {\n        let extension = '';\n        switch (fType) {\n            case CsvFileTypes.CSV:\n                extension = '.csv';\n                break;\n            case CsvFileTypes.TSV:\n                extension = '.tsv';\n                break;\n            case CsvFileTypes.TAB:\n                extension = '.tab';\n                break;\n            default:\n                throw Error('Unsupported CSV file type!');\n        }\n        return extension;\n    }\n\n    /**\n     * Gets the value delimiter which will be used for the exporting operation.\n     * ```typescript\n     * let delimiter = this.exportOptions.valueDelimiter;\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    get valueDelimiter() {\n        return this._valueDelimiter;\n    }\n\n    /**\n     * Sets a value delimiter which will overwrite the default delimiter of the selected export format.\n     * ```typescript\n     * this.exportOptions.valueDelimiter = '|';\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    set valueDelimiter(value) {\n        this.setDelimiter(value);\n    }\n\n    /**\n     * Gets the CSV export format.\n     * ```typescript\n     * let filetype = this.exportOptions.fileType;\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    get fileType() {\n        return this._fileType;\n    }\n\n    /**\n     * Sets the CSV export format.\n     * ```typescript\n     * this.exportOptions.fileType = CsvFileTypes.TAB;\n     * ```\n     * @memberof IgxCsvExporterOptions\n     */\n    set fileType(value) {\n        this.setFileType(value);\n    }\n\n    private setFileType(value) {\n        if (value !== undefined && value !== null && value !== this._fileType) {\n            this._fileType = value;\n            const extension = IgxCsvExporterOptions.getExtensionFromFileType(value);\n            if (!this.fileName.endsWith(extension)) {\n                const oldExt = '.' + this.fileName.split('.').pop();\n                const newName = this.fileName.replace(oldExt, extension);\n                this._fileExtension = extension;\n                this.fileName = newName;\n            }\n        }\n    }\n\n    private setDelimiter(value?) {\n        if (value !== undefined && value !== '' && value !== null) {\n            this._valueDelimiter = value;\n        } else {\n            switch (this.fileType) {\n                case CsvFileTypes.CSV:\n                    this._valueDelimiter = ',';\n                    break;\n                case CsvFileTypes.TSV:\n                case CsvFileTypes.TAB:\n                    this._valueDelimiter = '\\t';\n                    break;\n            }\n        }\n    }\n}\n\n/**\n * This enumeration is used to configure the default value separator\n * as well as the default file extension used when performing CSV exporting.\n */\nexport enum CsvFileTypes {\n    /**\n     * Character Separated Values, default separator is \"comma\", default file extension is .csv\n     */\n    CSV,\n    /**\n     * Tab Separated Values, default separator is tab, default file extension is .tsv\n     */\n    TSV,\n    /**\n     * Tab Separated Values, default separator is tab, default file extension is .tab\n     */\n    TAB\n}\n","import { ExportUtilities } from '../exporter-common/export-utilities';\nimport { yieldingLoop } from '../../core/utils';\n\n/**\n * @hidden\n */\nexport class CharSeparatedValueData {\n    private _headerRecord = '';\n    private _dataRecords = '';\n    private _eor = '\\r\\n';\n    private _delimiter;\n    private _escapeCharacters = ['\\r', '\\n', '\\r\\n'];\n    private _delimiterLength = 1;\n    private _isSpecialData = false;\n\n    constructor(private _data: any[], valueDelimiter: string)  {\n        this.setDelimiter(valueDelimiter);\n    }\n\n    public prepareData() {\n        if (!this._data || this._data.length === 0) {\n            return '';\n        }\n\n        const keys = ExportUtilities.getKeysFromData(this._data);\n\n        if (keys.length === 0) {\n            return '';\n        }\n\n        this._isSpecialData = ExportUtilities.isSpecialData(this._data);\n        this._escapeCharacters.push(this._delimiter);\n\n        this._headerRecord = this.processHeaderRecord(keys, this._escapeCharacters);\n        this._dataRecords = this.processDataRecords(this._data, keys, this._escapeCharacters);\n\n        return this._headerRecord + this._dataRecords;\n    }\n\n    public prepareDataAsync(done: (result: string) => void) {\n        if (!this._data || this._data.length === 0) {\n            done('');\n        }\n\n        const keys = ExportUtilities.getKeysFromData(this._data);\n\n        if (keys.length === 0) {\n            done('');\n        }\n\n        this._isSpecialData = ExportUtilities.isSpecialData(this._data);\n        this._escapeCharacters.push(this._delimiter);\n\n        this._headerRecord = this.processHeaderRecord(keys, this._escapeCharacters);\n        this.processDataRecordsAsync(this._data, keys, this._escapeCharacters, (dr) => {\n            done(this._headerRecord + dr);\n        });\n    }\n\n    private processField(value, escapeChars): string {\n        let safeValue = ExportUtilities.hasValue(value) ? String(value) : '';\n        if (escapeChars.some((v) => safeValue.includes(v))) {\n            safeValue = `\"${safeValue}\"`;\n        }\n        return safeValue + this._delimiter;\n    }\n\n    private processHeaderRecord(keys, escapeChars): string {\n        let recordData = '';\n        for (const keyName of keys) {\n            recordData += this.processField(keyName, this._escapeCharacters);\n        }\n\n        return recordData.slice(0, -this._delimiterLength) + this._eor;\n    }\n\n    private processRecord(record, keys, escapeChars): string {\n        const recordData = new Array(keys.length);\n        for (let index = 0; index < keys.length; index++) {\n            const value = (record[keys[index]] !== undefined) ? record[keys[index]] : this._isSpecialData ? record : '';\n            recordData[index] = this.processField(value, this._escapeCharacters);\n        }\n\n        return recordData.join('').slice(0, -this._delimiterLength) + this._eor;\n    }\n\n    private processDataRecords(currentData, keys, escapeChars) {\n        const dataRecords = new Array(currentData.length);\n\n        for (let i = 0; i < currentData.length; i++) {\n            const row = currentData[i];\n            dataRecords[i] = this.processRecord(row, keys, escapeChars);\n        }\n\n        return dataRecords.join('');\n    }\n\n    private processDataRecordsAsync(currentData, keys, escapeChars, done: (result: string) => void) {\n        const dataRecords = new Array(currentData.length);\n\n        yieldingLoop(currentData.length, 1000,\n            (i) => {\n                const row = currentData[i];\n                dataRecords[i] = this.processRecord(row, keys, escapeChars);\n            },\n            () => {\n                done(dataRecords.join(''));\n            });\n    }\n\n    private setDelimiter(value) {\n        this._delimiter = value;\n        this._delimiterLength = value.length;\n    }\n}\n","export abstract class IgxExporterOptionsBase {\n    private _fileName: string;\n\n    /**\n     * Specifies whether hidden columns should be exported.\n     * ```typescript\n     * let ignoreColumnsVisibility = this.exportOptions.ignoreColumnsVisibility;\n     * this.exportOptions.ignoreColumnsVisibility = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreColumnsVisibility = false;\n\n    /**\n     * Specifies whether filtered out rows should be exported.\n     * ```typescript\n     * let ignoreFiltering = this.exportOptions.ignoreFiltering;\n     * this.exportOptions.ignoreFiltering = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreFiltering = false;\n\n    /**\n     * Specifies if the exporter should ignore the current column order in the IgxGrid.\n     * ```typescript\n     * let ignoreColumnsOrder = this.exportOptions.ignoreColumnsOrder;\n     * this.exportOptions.ignoreColumnsOrder = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreColumnsOrder = false;\n\n    /**\n     * Specifies whether the exported data should be sorted as in the provided IgxGrid.\n     * ```typescript\n     * let ignoreSorting = this.exportOptions.ignoreSorting;\n     * this.exportOptions.ignoreSorting = true;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    public ignoreSorting = false;\n\n    constructor(fileName: string, protected _fileExtension: string) {\n        this.setFileName(fileName);\n    }\n\n    private setFileName(fileName: string): void {\n        this._fileName = fileName + (fileName.endsWith(this._fileExtension) === false ? this._fileExtension : '');\n    }\n\n    /**\n     * Gets the file name which will be used for the exporting operation.\n     * ```typescript\n     * let fileName = this.exportOptions.fileName;\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    get fileName() {\n        return this._fileName;\n    }\n\n    /**\n     * Sets the file name which will be used for the exporting operation.\n     * ```typescript\n     * this.exportOptions.fileName = 'exportedData01';\n     * ```\n     * @memberof IgxExporterOptionsBase\n     */\n    set fileName(value) {\n        this.setFileName(value);\n    }\n\n}\n","/**\n * @hidden\n */\nexport enum ExcelFolderTypes {\n    RootExcelFolder,\n    RootRelsExcelFolder,\n    DocPropsExcelFolder,\n    XLExcelFolder,\n    XLRelsExcelFolder,\n    ThemeExcelFolder,\n    WorksheetsExcelFolder,\n    WorksheetsRelsExcelFolder,\n    TablesExcelFolder\n}\n/**\n * @hidden\n */\nexport enum ExcelFileTypes {\n    RootRelsFile,\n    AppFile,\n    CoreFile,\n    WorkbookRelsFile,\n    ThemeFile,\n    WorksheetFile,\n    StyleFile,\n    WorkbookFile,\n    ContentTypesFile,\n    SharedStringsFile,\n    WorksheetRelsFile,\n    TablesFile\n}\n","import { EventEmitter, Injectable, Output } from '@angular/core';\nimport { IgxBaseExporter } from '../exporter-common/base-export-service';\nimport { ExportUtilities } from '../exporter-common/export-utilities';\nimport { CharSeparatedValueData } from './char-separated-value-data';\nimport { CsvFileTypes, IgxCsvExporterOptions } from './csv-exporter-options';\nimport { IBaseEventArgs } from '../../core/utils';\n\nexport interface ICsvExportEndedEventArgs extends IBaseEventArgs {\n    csvData?: string;\n}\n\n/**\n * **Ignite UI for Angular CSV Exporter Service** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/exporter-csv)\n *\n * The Ignite UI for Angular CSV Exporter service can export data in a Character Separated Values format from\n * both raw data (array) or from an `IgxGrid`.\n *\n * Example:\n * ```typescript\n * public localData = [\n *   { Name: \"Eric Ridley\", Age: \"26\" },\n *   { Name: \"Alanis Brook\", Age: \"22\" },\n *   { Name: \"Jonathan Morris\", Age: \"23\" }\n * ];\n *\n * constructor(private csvExportService: IgxCsvExporterService) {\n * }\n *\n * const opt: IgxCsvExporterOptions = new IgxCsvExporterOptions(\"FileName\", CsvFileTypes.CSV);\n * this.csvExportService.exportData(this.localData, opt);\n * ```\n */\n@Injectable()\nexport class IgxCsvExporterService extends IgxBaseExporter {\n    private _stringData: string;\n\n    /**\n     * This event is emitted when the export process finishes.\n     * ```typescript\n     * this.exporterService.onExportEnded.subscribe((args: ICsvExportEndedEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxCsvExporterService\n     */\n    @Output()\n    public onExportEnded = new EventEmitter<ICsvExportEndedEventArgs>();\n\n    protected exportDataImplementation(data: any[], options: IgxCsvExporterOptions) {\n        data = data.map((item) => item.rowData);\n        const csvData = new CharSeparatedValueData(data, options.valueDelimiter);\n        csvData.prepareDataAsync((r) => {\n            this._stringData = r;\n            this.saveFile(options);\n            this.onExportEnded.emit({ csvData: this._stringData });\n        });\n    }\n\n    private saveFile(options: IgxCsvExporterOptions) {\n        switch (options.fileType) {\n            case CsvFileTypes.CSV:\n                this.exportFile(this._stringData, options.fileName, 'text/csv;charset=utf-8;');\n                break;\n            case CsvFileTypes.TSV:\n            case CsvFileTypes.TAB:\n                this.exportFile(this._stringData, options.fileName, 'text/tab-separated-values;charset=utf-8;');\n                break;\n        }\n    }\n\n    private exportFile(data: string, fileName: string, fileType: string): void {\n        const blob = new Blob(['\\ufeff', data], { type: fileType });\n        ExportUtilities.saveBlobToFile(blob, fileName);\n    }\n}\n","/** @hidden */\nexport class ExcelStrings {\n    /* tslint:disable max-line-length */\n    private static XML_STRING = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\r\\n';\n    private static SHARED_STRING_RELATIONSHIP = '<Relationship Id=\"rId4\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\" />';\n\n    public static getRels(): string {\n        return ExcelStrings.XML_STRING + '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/></Relationships>';\n    }\n\n    public static getApp(worksheetName: string): string {\n        return ExcelStrings.XML_STRING + `<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size=\"2\" baseType=\"variant\"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>1</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size=\"1\" baseType=\"lpstr\"><vt:lpstr>${worksheetName}</vt:lpstr></vt:vector></TitlesOfParts><Company></Company><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>16.0300</AppVersion></Properties>`;\n    }\n\n    public static getCore(): string {\n        return ExcelStrings.XML_STRING + '<cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><dc:creator></dc:creator><cp:lastModifiedBy></cp:lastModifiedBy><dcterms:created xsi:type=\"dcterms:W3CDTF\">2015-06-05T18:17:20Z</dcterms:created><dcterms:modified xsi:type=\"dcterms:W3CDTF\">2015-06-05T18:17:26Z</dcterms:modified></cp:coreProperties>';\n    }\n\n    public static getTheme(): string {\n        return ExcelStrings.XML_STRING + '<a:theme xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\" name=\"Office Theme\"><a:themeElements><a:clrScheme name=\"Office\"><a:dk1><a:sysClr val=\"windowText\" lastClr=\"000000\"/></a:dk1><a:lt1><a:sysClr val=\"window\" lastClr=\"FFFFFF\"/></a:lt1><a:dk2><a:srgbClr val=\"44546A\"/></a:dk2><a:lt2><a:srgbClr val=\"E7E6E6\"/></a:lt2><a:accent1><a:srgbClr val=\"5B9BD5\"/></a:accent1><a:accent2><a:srgbClr val=\"ED7D31\"/></a:accent2><a:accent3><a:srgbClr val=\"A5A5A5\"/></a:accent3><a:accent4><a:srgbClr val=\"FFC000\"/></a:accent4><a:accent5><a:srgbClr val=\"4472C4\"/></a:accent5><a:accent6><a:srgbClr val=\"70AD47\"/></a:accent6><a:hlink><a:srgbClr val=\"0563C1\"/></a:hlink><a:folHlink><a:srgbClr val=\"954F72\"/></a:folHlink></a:clrScheme><a:fontScheme name=\"Office\"><a:majorFont><a:latin typeface=\"Calibri Light\" panose=\"020F0302020204030204\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\" Light\"/><a:font script=\"Hang\" typeface=\" \"/><a:font script=\"Hans\" typeface=\" Light\"/><a:font script=\"Hant\" typeface=\"\"/><a:font script=\"Arab\" typeface=\"Times New Roman\"/><a:font script=\"Hebr\" typeface=\"Times New Roman\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"MoolBoran\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Times New Roman\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:majorFont><a:minorFont><a:latin typeface=\"Calibri\" panose=\"020F0502020204030204\"/><a:ea typeface=\"\"/><a:cs typeface=\"\"/><a:font script=\"Jpan\" typeface=\"\"/><a:font script=\"Hang\" typeface=\" \"/><a:font script=\"Hans\" typeface=\"\"/><a:font script=\"Hant\" typeface=\"\"/><a:font script=\"Arab\" typeface=\"Arial\"/><a:font script=\"Hebr\" typeface=\"Arial\"/><a:font script=\"Thai\" typeface=\"Tahoma\"/><a:font script=\"Ethi\" typeface=\"Nyala\"/><a:font script=\"Beng\" typeface=\"Vrinda\"/><a:font script=\"Gujr\" typeface=\"Shruti\"/><a:font script=\"Khmr\" typeface=\"DaunPenh\"/><a:font script=\"Knda\" typeface=\"Tunga\"/><a:font script=\"Guru\" typeface=\"Raavi\"/><a:font script=\"Cans\" typeface=\"Euphemia\"/><a:font script=\"Cher\" typeface=\"Plantagenet Cherokee\"/><a:font script=\"Yiii\" typeface=\"Microsoft Yi Baiti\"/><a:font script=\"Tibt\" typeface=\"Microsoft Himalaya\"/><a:font script=\"Thaa\" typeface=\"MV Boli\"/><a:font script=\"Deva\" typeface=\"Mangal\"/><a:font script=\"Telu\" typeface=\"Gautami\"/><a:font script=\"Taml\" typeface=\"Latha\"/><a:font script=\"Syrc\" typeface=\"Estrangelo Edessa\"/><a:font script=\"Orya\" typeface=\"Kalinga\"/><a:font script=\"Mlym\" typeface=\"Kartika\"/><a:font script=\"Laoo\" typeface=\"DokChampa\"/><a:font script=\"Sinh\" typeface=\"Iskoola Pota\"/><a:font script=\"Mong\" typeface=\"Mongolian Baiti\"/><a:font script=\"Viet\" typeface=\"Arial\"/><a:font script=\"Uigh\" typeface=\"Microsoft Uighur\"/><a:font script=\"Geor\" typeface=\"Sylfaen\"/></a:minorFont></a:fontScheme><a:fmtScheme name=\"Office\"><a:fillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"110000\"/><a:satMod val=\"105000\"/><a:tint val=\"67000\"/></a:schemeClr></a:gs><a:gs pos=\"50000\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"105000\"/><a:satMod val=\"103000\"/><a:tint val=\"73000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"105000\"/><a:satMod val=\"109000\"/><a:tint val=\"81000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"5400000\" scaled=\"0\"/></a:gradFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:satMod val=\"103000\"/><a:lumMod val=\"102000\"/><a:tint val=\"94000\"/></a:schemeClr></a:gs><a:gs pos=\"50000\"><a:schemeClr val=\"phClr\"><a:satMod val=\"110000\"/><a:lumMod val=\"100000\"/><a:shade val=\"100000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:lumMod val=\"99000\"/><a:satMod val=\"120000\"/><a:shade val=\"78000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"5400000\" scaled=\"0\"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w=\"6350\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/><a:miter lim=\"800000\"/></a:ln><a:ln w=\"12700\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/><a:miter lim=\"800000\"/></a:ln><a:ln w=\"19050\" cap=\"flat\" cmpd=\"sng\" algn=\"ctr\"><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:prstDash val=\"solid\"/><a:miter lim=\"800000\"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst/></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad=\"57150\" dist=\"19050\" dir=\"5400000\" algn=\"ctr\" rotWithShape=\"0\"><a:srgbClr val=\"000000\"><a:alpha val=\"63000\"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val=\"phClr\"/></a:solidFill><a:solidFill><a:schemeClr val=\"phClr\"><a:tint val=\"95000\"/><a:satMod val=\"170000\"/></a:schemeClr></a:solidFill><a:gradFill rotWithShape=\"1\"><a:gsLst><a:gs pos=\"0\"><a:schemeClr val=\"phClr\"><a:tint val=\"93000\"/><a:satMod val=\"150000\"/><a:shade val=\"98000\"/><a:lumMod val=\"102000\"/></a:schemeClr></a:gs><a:gs pos=\"50000\"><a:schemeClr val=\"phClr\"><a:tint val=\"98000\"/><a:satMod val=\"130000\"/><a:shade val=\"90000\"/><a:lumMod val=\"103000\"/></a:schemeClr></a:gs><a:gs pos=\"100000\"><a:schemeClr val=\"phClr\"><a:shade val=\"63000\"/><a:satMod val=\"120000\"/></a:schemeClr></a:gs></a:gsLst><a:lin ang=\"5400000\" scaled=\"0\"/></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><a:extLst><a:ext uri=\"{05A4C25C-085E-4340-85A3-A5531E510DB2}\"><thm15:themeFamily xmlns:thm15=\"http://schemas.microsoft.com/office/thememl/2012/main\" name=\"Office Theme\" id=\"{62F939B6-93AF-4DB8-9C6B-D6C7DFDC589F}\" vid=\"{4A3C46E8-61CC-4603-A589-7422A47A8E4A}\"/></a:ext></a:extLst></a:theme>';\n    }\n\n    public static getStyles(hasNumberValues: boolean, hasDateValues: boolean): string {\n        const cellXFCount = hasDateValues ? 3 : hasNumberValues ? 2 : 1;\n        let additionalCellXF = '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\" applyNumberFormat=\"1\"/>';\n\n        if (hasDateValues) {\n            additionalCellXF = additionalCellXF + ' <xf numFmtId=\"14\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\" applyNumberFormat=\"1\"/>';\n        }\n\n        return ExcelStrings.XML_STRING + '<styleSheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac x16r2\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\" xmlns:x16r2=\"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main\"><fonts count=\"1\" x14ac:knownFonts=\"1\"><font><sz val=\"11\"/><color theme=\"1\"/><name val=\"Calibri\"/><family val=\"2\"/><scheme val=\"minor\"/></font></fonts><fills count=\"2\"><fill><patternFill patternType=\"none\"/></fill><fill><patternFill patternType=\"gray125\"/></fill></fills><borders count=\"1\"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count=\"1\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\"/></cellStyleXfs><cellXfs count=\"' + cellXFCount + '\"><xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>' + additionalCellXF + '</cellXfs><cellStyles count=\"1\"><cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/></cellStyles><dxfs count=\"0\"/><tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleLight16\"/><extLst><ext uri=\"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}\" xmlns:x14=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\"><x14:slicerStyles defaultSlicerStyle=\"SlicerStyleLight1\"/></ext><ext uri=\"{9260A510-F301-46a8-8635-F512D64BE5F5}\" xmlns:x15=\"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main\"><x15:timelineStyles defaultTimelineStyle=\"TimeSlicerStyleLight1\"/></ext></extLst></styleSheet>';\n    }\n\n    public static getWorkbook(worksheetName: string): string {\n        return ExcelStrings.XML_STRING + `<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x15\" xmlns:x15=\"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main\"><fileVersion appName=\"xl\" lastEdited=\"6\" lowestEdited=\"6\" rupBuild=\"14420\"/><workbookPr filterPrivacy=\"1\" defaultThemeVersion=\"164011\"/><bookViews><workbookView xWindow=\"0\" yWindow=\"0\" windowWidth=\"22260\" windowHeight=\"12645\"/></bookViews><sheets><sheet name=\"${worksheetName}\" sheetId=\"1\" r:id=\"rId1\"/></sheets><calcPr calcId=\"162913\"/><extLst><ext uri=\"{140A7094-0E35-4892-8432-C4D2E57EDEB5}\" xmlns:x15=\"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main\"><x15:workbookPr chartTrackingRefBase=\"1\"/></ext></extLst></workbook>`;\n    }\n\n    public static getWorksheetRels(): string {\n        return ExcelStrings.XML_STRING + `<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table\" Target=\"../tables/table1.xml\"/></Relationships>`;\n    }\n\n    public static getWorkbookRels(hasSharedStrings): string {\n        let retVal = ExcelStrings.XML_STRING + `<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"><Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\"/><Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme\" Target=\"theme/theme1.xml\"/><Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet1.xml\"/>`;\n\n        if (hasSharedStrings) {\n            retVal += ExcelStrings.SHARED_STRING_RELATIONSHIP;\n        }\n\n        retVal += '</Relationships>';\n\n        return retVal;\n    }\n\n    public static getSheetXML(dimension: string, freezePane: string, cols: string, sheetData: string, hasTable: boolean, hasGroupedRows = false, outlineLevel = 0): string {\n        const tableParts = hasTable ? '<tableParts count=\"1\"><tablePart r:id=\"rId1\"/></tableParts>' : '';\n        const sheetOutlineProp = hasGroupedRows ? '<sheetPr><outlinePr summaryBelow=\"0\"/></sheetPr>' : '';\n        const sOutlineLevel = outlineLevel > 0 ? `outlineLevelRow=\"${outlineLevel}\"` : '';\n        // return ExcelStrings.XML_STRING +\n        //     '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\"><dimension ref=\"' + dimension + '\"/><sheetViews><sheetView tabSelected=\"1\" workbookViewId=\"0\">' + freezePane + '</sheetView></sheetViews><sheetFormatPr defaultRowHeight=\"15\" x14ac:dyDescent=\"0.25\"/>' + cols + sheetData + '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>' + tableParts + '</worksheet>';\n\n        return `${ExcelStrings.XML_STRING}\n<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" mc:Ignorable=\"x14ac\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">\n${sheetOutlineProp}\n<dimension ref=\"${dimension}\"/>\n<sheetViews><sheetView tabSelected=\"1\" workbookViewId=\"0\">${freezePane}</sheetView></sheetViews>\n<sheetFormatPr defaultRowHeight=\"15\" ${sOutlineLevel} x14ac:dyDescent=\"0.25\"/>\n${cols}\n${sheetData}\n<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\"/>\n${tableParts}</worksheet>`;\n\n    }\n\n    public static getSharedStringXML(count: number, uniqueCount: number, table: string): string {\n        return ExcelStrings.XML_STRING + '<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"' + count + '\" uniqueCount=\"' + uniqueCount + '\">' + table + '</sst>';\n    }\n\n    public static getContentTypesXML(hasSharedStrings: boolean, hasTable: boolean): string {\n        let contentTypes = ExcelStrings.XML_STRING +\n        `<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\\\">\n            <Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\"/>\n            <Default Extension=\"xml\" ContentType=\"application/xml\"/>\n            <Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\"/>\n            <Override PartName=\"/xl/worksheets/sheet1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\"/>\n            <Override PartName=\"/xl/theme/theme1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.theme+xml\"/>\n            <Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>\n            <Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\"/>\n            <Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\"/>`;\n\n        contentTypes += hasSharedStrings ?\n        `\t<Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>` : '';\n\n        contentTypes += hasTable ?\n            `<Override PartName=\"/xl/tables/table1.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\"/>` : '';\n        contentTypes += `</Types>`;\n\n        return contentTypes;\n    }\n\n    public static getTablesXML(dimension: string, tableColumns: string, sort: string): string {\n        return `${ExcelStrings.XML_STRING}<table xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" id=\"1\" name=\"Table1\" displayName=\"Table1\" ref=\"${dimension}\" totalsRowShown=\"0\">\n    <autoFilter ref=\"${dimension}\"/>${sort}${tableColumns}<tableStyleInfo name=\"TableStyleMedium2\" showFirstColumn=\"0\" showLastColumn=\"0\" showRowStripes=\"1\" showColumnStripes=\"0\"/>\n</table>`;\n    }\n    /* tslint:enable max-line-length */\n\n    public static getExcelColumn(index: number): string {\n        // Returns the excel column name for given 0-based index\n        // For example 27 should return \"AB\"\n        let returnString = '';\n        while (index >= 0) {\n            const char = index % 26;\n            returnString = String.fromCharCode(65 + char) + returnString;\n            index = Math.floor(index / 26) - 1;\n        }\n        return returnString;\n    }\n}\n","import { IExcelFile } from './excel-interfaces';\nimport { ExcelStrings } from './excel-strings';\nimport { WorksheetData } from './worksheet-data';\n\nimport * as JSZip from 'jszip';\nimport { yieldingLoop } from '../../core/utils';\n\n/**\n * @hidden\n */\nexport class RootRelsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('.rels', ExcelStrings.getRels());\n    }\n}\n\n/**\n * @hidden\n */\nexport class AppFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('app.xml', ExcelStrings.getApp(worksheetData.options.worksheetName));\n    }\n}\n\n/**\n * @hidden\n */\nexport class CoreFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('core.xml', ExcelStrings.getCore());\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorkbookRelsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const hasSharedStrings = worksheetData.isEmpty === false;\n        folder.file('workbook.xml.rels', ExcelStrings.getWorkbookRels(hasSharedStrings));\n    }\n}\n\n/**\n * @hidden\n */\nexport class ThemeFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('theme1.xml', ExcelStrings.getTheme());\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorksheetFile implements IExcelFile {\n    private static MIN_WIDTH = 8.43;\n    private maxOutlineLevel = 0;\n    private dimension = '';\n    private freezePane = '';\n    private rowHeight = '';\n\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const sheetData = [];\n        const cols = [];\n        let dimension: string;\n        const dictionary = worksheetData.dataDictionary;\n        let freezePane = '';\n        let maxOutlineLevel = 0;\n\n        if (worksheetData.isEmpty) {\n            sheetData.push('<sheetData/>');\n            dimension = 'A1';\n        } else {\n            sheetData.push('<sheetData>');\n            const height =  worksheetData.options.rowHeight;\n            const rowHeight = height ? ' ht=\"' + height + '\" customHeight=\"1\"' : '';\n\n            sheetData.push(`<row r=\"1\"${rowHeight}>`);\n            for (let i = 0; i < worksheetData.columnCount; i++) {\n                const column = ExcelStrings.getExcelColumn(i) + 1;\n                const value = dictionary.saveValue(worksheetData.keys[i], i, true);\n                sheetData.push(`<c r=\"${column}\" t=\"s\"><v>${value}</v></c>`);\n            }\n            sheetData.push('</row>');\n\n            for (let i = 1; i < worksheetData.rowCount; i++) {\n                if (!worksheetData.isTreeGridData) {\n                    sheetData.push(`<row r=\"${(i + 1)}\"${rowHeight}>`);\n                } else {\n                    const rowData = worksheetData.data[i - 1].originalRowData;\n                    const sCollapsed = (!rowData.expanded) ? '' : (rowData.expanded === true) ? '' : ` collapsed=\"1\"`;\n                    const sHidden = (rowData.parent && this.hasCollapsedParent(rowData)) ? ` hidden=\"1\"` : '';\n                    const rowOutlineLevel = rowData.level ? rowData.level : 0;\n                    const sOutlineLevel = rowOutlineLevel > 0 ? ` outlineLevel=\"${rowOutlineLevel}\"` : '';\n                    maxOutlineLevel = maxOutlineLevel < rowOutlineLevel ? rowOutlineLevel : maxOutlineLevel;\n\n                    sheetData.push(`<row r=\"${(i + 1)}\"${rowHeight}${sOutlineLevel}${sCollapsed}${sHidden}>`);\n                }\n                for (let j = 0; j < worksheetData.columnCount; j++) {\n                    const cellData = WorksheetFile.getCellData(worksheetData, i, j);\n                    sheetData.push(cellData);\n                }\n                sheetData.push('</row>');\n            }\n            sheetData.push('</sheetData>');\n            dimension = 'A1:' + ExcelStrings.getExcelColumn(worksheetData.columnCount - 1) + worksheetData.rowCount;\n\n            cols.push('<cols>');\n\n            for (let i = 0; i < worksheetData.columnCount; i++) {\n                const width = dictionary.columnWidths[i];\n                // Use the width provided in the options if it exists\n                let widthInTwips = worksheetData.options.columnWidth !== undefined ?\n                                        worksheetData.options.columnWidth :\n                                        Math.max(((width / 96) * 14.4), WorksheetFile.MIN_WIDTH);\n                if (!(widthInTwips > 0)) {\n                    widthInTwips = WorksheetFile.MIN_WIDTH;\n                }\n\n                cols.push(`<col min=\"${(i + 1)}\" max=\"${(i + 1)}\" width=\"${widthInTwips}\" customWidth=\"1\"/>`);\n            }\n\n            cols.push('</cols>');\n\n            if (worksheetData.indexOfLastPinnedColumn !== -1 &&\n                !worksheetData.options.ignorePinning &&\n                !worksheetData.options.ignoreColumnsOrder) {\n                const frozenColumnCount = worksheetData.indexOfLastPinnedColumn + 1;\n                const firstCell = ExcelStrings.getExcelColumn(frozenColumnCount) + '1';\n                freezePane = `<pane xSplit=\"${frozenColumnCount}\" topLeftCell=\"${firstCell}\" activePane=\"topRight\" state=\"frozen\"/>`;\n            }\n        }\n        const hasTable = !worksheetData.isEmpty && worksheetData.options.exportAsTable;\n\n        folder.file('sheet1.xml',\n                    ExcelStrings.getSheetXML(dimension, freezePane, cols.join(''), sheetData.join(''), hasTable,\n                    worksheetData.isTreeGridData, maxOutlineLevel));\n    }\n\n    public async writeElementAsync(folder: JSZip, worksheetData: WorksheetData) {\n        return new Promise(resolve => {\n            this.prepareDataAsync(worksheetData, (cols, rows) => {\n                const hasTable = !worksheetData.isEmpty && worksheetData.options.exportAsTable;\n\n                folder.file('sheet1.xml', ExcelStrings.getSheetXML(\n                    this.dimension, this.freezePane, cols, rows, hasTable, worksheetData.isTreeGridData, this.maxOutlineLevel));\n                resolve();\n            });\n        });\n    }\n\n    private prepareDataAsync(worksheetData: WorksheetData, done: (cols: string, sheetData: string) => void) {\n        let sheetData = '';\n        let cols = '';\n        const dictionary = worksheetData.dataDictionary;\n\n        if (worksheetData.isEmpty) {\n            sheetData += '<sheetData/>';\n            this.dimension = 'A1';\n            done('', sheetData);\n        } else {\n            sheetData += '<sheetData>';\n            const height =  worksheetData.options.rowHeight;\n            this.rowHeight = height ? ' ht=\"' + height + '\" customHeight=\"1\"' : '';\n            sheetData += `<row r=\"1\"${this.rowHeight}>`;\n\n            for (let i = 0; i < worksheetData.columnCount; i++) {\n                const column = ExcelStrings.getExcelColumn(i) + 1;\n                const value = dictionary.saveValue(worksheetData.keys[i], i, true);\n                sheetData += `<c r=\"${column}\" t=\"s\"><v>${value}</v></c>`;\n            }\n            sheetData += '</row>';\n\n            this.dimension = 'A1:' + ExcelStrings.getExcelColumn(worksheetData.columnCount - 1) + worksheetData.rowCount;\n            cols += '<cols>';\n\n            for (let i = 0; i < worksheetData.columnCount; i++) {\n                const width = dictionary.columnWidths[i];\n                // Use the width provided in the options if it exists\n                let widthInTwips = worksheetData.options.columnWidth !== undefined ?\n                                        worksheetData.options.columnWidth :\n                                        Math.max(((width / 96) * 14.4), WorksheetFile.MIN_WIDTH);\n                if (!(widthInTwips > 0)) {\n                    widthInTwips = WorksheetFile.MIN_WIDTH;\n                }\n\n                cols += `<col min=\"${(i + 1)}\" max=\"${(i + 1)}\" width=\"${widthInTwips}\" customWidth=\"1\"/>`;\n            }\n\n            cols += '</cols>';\n\n            if (worksheetData.indexOfLastPinnedColumn !== -1 &&\n                !worksheetData.options.ignorePinning &&\n                !worksheetData.options.ignoreColumnsOrder) {\n                const frozenColumnCount = worksheetData.indexOfLastPinnedColumn + 1;\n                const firstCell = ExcelStrings.getExcelColumn(frozenColumnCount) + '1';\n                this.freezePane = `<pane xSplit=\"${frozenColumnCount}\" topLeftCell=\"${firstCell}\" activePane=\"topRight\" state=\"frozen\"/>`;\n            }\n\n            this.processDataRecordsAsync(worksheetData, (rows) => {\n                sheetData += rows;\n                sheetData += '</sheetData>';\n                done(cols, sheetData);\n            });\n        }\n    }\n\n    private processDataRecordsAsync(worksheetData: WorksheetData, done: (rows: string) => void) {\n        const rowDataArr = new Array(worksheetData.rowCount - 1);\n        const height =  worksheetData.options.rowHeight;\n        this.rowHeight = height ? ' ht=\"' + height + '\" customHeight=\"1\"' : '';\n\n        yieldingLoop(worksheetData.rowCount - 1, 1000,\n            (i) => {\n                rowDataArr[i] = this.processRow(worksheetData, i + 1);\n            },\n            () => {\n                done(rowDataArr.join(''));\n            });\n    }\n\n    private processRow(worksheetData: WorksheetData, i: number) {\n        const rowData = new Array(worksheetData.columnCount + 2);\n        if (!worksheetData.isTreeGridData) {\n            rowData[0] = `<row r=\"${(i + 1)}\"${this.rowHeight}>`;\n        } else {\n            const originalData = worksheetData.data[i - 1].originalRowData;\n            const sCollapsed = (!originalData.expanded) ? '' : (originalData.expanded === true) ? '' : ` collapsed=\"1\"`;\n            const sHidden = (originalData.parent && this.hasCollapsedParent(originalData)) ? ` hidden=\"1\"` : '';\n            const rowOutlineLevel = originalData.level ? originalData.level : 0;\n            const sOutlineLevel = rowOutlineLevel > 0 ? ` outlineLevel=\"${rowOutlineLevel}\"` : '';\n            this.maxOutlineLevel = this.maxOutlineLevel < rowOutlineLevel ? rowOutlineLevel : this.maxOutlineLevel;\n            rowData[0] = `<row r=\"${(i + 1)}\"${this.rowHeight}${sOutlineLevel}${sCollapsed}${sHidden}>`;\n        }\n\n        for (let j = 0; j < worksheetData.columnCount; j++) {\n            const cellData = WorksheetFile.getCellData(worksheetData, i, j);\n            rowData[j + 1] = cellData;\n        }\n        rowData[worksheetData.columnCount + 1] = '</row>';\n\n        return rowData.join('');\n    }\n\n    private hasCollapsedParent(rowData) {\n        let result = !rowData.parent.expanded;\n        while (rowData.parent) {\n            result = result || !rowData.parent.expanded;\n            rowData = rowData.parent;\n        }\n\n        return result;\n    }\n    /* tslint:disable member-ordering */\n    private static getCellData(worksheetData: WorksheetData, row: number, column: number): string {\n        const dictionary = worksheetData.dataDictionary;\n        const columnName = ExcelStrings.getExcelColumn(column) + (row + 1);\n        const columnHeader = worksheetData.keys[column];\n\n        const rowData = worksheetData.data[row - 1].rowData;\n\n        const cellValue = worksheetData.isSpecialData ? rowData : rowData[columnHeader];\n\n        if (cellValue === undefined || cellValue === null) {\n            return `<c r=\"${columnName}\" s=\"1\"/>`;\n        } else {\n            const savedValue = dictionary.saveValue(cellValue, column, false);\n            const isSavedAsString = savedValue !== -1;\n\n            const isSavedAsDate = !isSavedAsString && cellValue instanceof Date;\n\n            let value = isSavedAsString ? savedValue : cellValue;\n\n            if (isSavedAsDate) {\n                const timeZoneOffset = value.getTimezoneOffset() * 60000;\n                const isoString = (new Date(value - timeZoneOffset)).toISOString();\n                value = isoString.substring(0, isoString.indexOf('.'));\n            }\n\n            const type = isSavedAsString ? ` t=\"s\"` : isSavedAsDate ? ` t=\"d\"` : '';\n\n            const format = isSavedAsString ? '' : isSavedAsDate ? ` s=\"2\"` : ` s=\"1\"`;\n\n            return `<c r=\"${columnName}\"${type}${format}><v>${value}</v></c>`;\n        }\n    }\n    /* tslint:enable member-ordering */\n}\n\n/**\n * @hidden\n */\nexport class StyleFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const hasNumberValues = worksheetData.dataDictionary && worksheetData.dataDictionary.hasNumberValues;\n        const hasDateValues = worksheetData.dataDictionary && worksheetData.dataDictionary.hasDateValues;\n        folder.file('styles.xml', ExcelStrings.getStyles(hasNumberValues, hasDateValues));\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorkbookFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('workbook.xml', ExcelStrings.getWorkbook(worksheetData.options.worksheetName));\n    }\n}\n\n/**\n * @hidden\n */\nexport class ContentTypesFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('[Content_Types].xml', ExcelStrings.getContentTypesXML(!worksheetData.isEmpty, worksheetData.options.exportAsTable));\n    }\n}\n\n/**\n * @hidden\n */\nexport class SharedStringsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const dict = worksheetData.dataDictionary;\n        const sortedValues = dict.getKeys();\n        const sharedStrings = new Array<string>(sortedValues.length);\n\n        for (const value of sortedValues) {\n            sharedStrings[dict.getSanitizedValue(value)] = '<si><t>' + value + '</t></si>';\n        }\n\n        folder.file('sharedStrings.xml', ExcelStrings.getSharedStringXML(\n                        dict.stringsCount,\n                        sortedValues.length,\n                        sharedStrings.join(''))\n                    );\n    }\n}\n\n/**\n * @hidden\n */\nexport class TablesFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        const columnCount = worksheetData.columnCount;\n        const lastColumn = ExcelStrings.getExcelColumn(columnCount - 1) + worksheetData.rowCount;\n        const dimension = 'A1:' + lastColumn;\n        const values = worksheetData.keys;\n        let sortString = '';\n\n        let tableColumns = '<tableColumns count=\"' + columnCount + '\">';\n        for (let i = 0; i < columnCount; i++) {\n            const value =  values[i];\n            tableColumns += '<tableColumn id=\"' + (i + 1) + '\" name=\"' + value + '\"/>';\n        }\n\n        tableColumns += '</tableColumns>';\n\n        if (worksheetData.sort) {\n            const sortingExpression = worksheetData.sort;\n            const sc = ExcelStrings.getExcelColumn(values.indexOf(sortingExpression.fieldName));\n            const dir = sortingExpression.dir - 1;\n            sortString = `<sortState ref=\"A2:${lastColumn}\"><sortCondition descending=\"${dir}\" ref=\"${sc}1:${sc}15\"/></sortState>`;\n        }\n\n        folder.file('table1.xml', ExcelStrings.getTablesXML(dimension, tableColumns, sortString));\n    }\n}\n\n/**\n * @hidden\n */\nexport class WorksheetRelsFile implements IExcelFile {\n    public writeElement(folder: JSZip, worksheetData: WorksheetData) {\n        folder.file('sheet1.xml.rels', ExcelStrings.getWorksheetRels());\n    }\n}\n","import {\n    ExcelFileTypes,\n    ExcelFolderTypes\n} from './excel-enums';\n\nimport { IExcelFolder } from './excel-interfaces';\nimport { WorksheetData } from './worksheet-data';\n\n/** @hidden */\nexport class RootExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  '';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.ContentTypesFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [\n            ExcelFolderTypes.RootRelsExcelFolder,\n            ExcelFolderTypes.DocPropsExcelFolder,\n            ExcelFolderTypes.XLExcelFolder\n        ];\n    }\n}\n\n/** @hidden */\nexport class RootRelsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  '_rels';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.RootRelsFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class DocPropsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'docProps';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [\n            ExcelFileTypes.AppFile,\n            ExcelFileTypes.CoreFile\n        ];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class XLExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'xl';\n    }\n\n    childFiles(data: WorksheetData) {\n        const retVal = [\n            ExcelFileTypes.StyleFile,\n            ExcelFileTypes.WorkbookFile\n        ];\n\n        if (!data.isEmpty) {\n            retVal.push(ExcelFileTypes.SharedStringsFile);\n        }\n\n        return retVal;\n    }\n\n    childFolders(data: WorksheetData) {\n        const retVal = [\n            ExcelFolderTypes.XLRelsExcelFolder,\n            ExcelFolderTypes.ThemeExcelFolder,\n            ExcelFolderTypes.WorksheetsExcelFolder\n        ];\n\n        if (!data.isEmpty && data.options.exportAsTable) {\n            retVal.push(ExcelFolderTypes.TablesExcelFolder);\n        }\n\n        return retVal;\n    }\n}\n\n/** @hidden */\nexport class XLRelsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  '_rels';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.WorkbookRelsFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class ThemeExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'theme';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.ThemeFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class WorksheetsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return  'worksheets';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.WorksheetFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return data.isEmpty || !data.options.exportAsTable ? [] : [ExcelFolderTypes.WorksheetsRelsExcelFolder];\n    }\n}\n\n/** @hidden */\nexport class TablesExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return 'tables';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.TablesFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n\n/** @hidden */\nexport class WorksheetsRelsExcelFolder implements IExcelFolder {\n    public get folderName() {\n        return '_rels';\n    }\n\n    childFiles(data: WorksheetData) {\n        return [ExcelFileTypes.WorksheetRelsFile];\n    }\n\n    childFolders(data: WorksheetData) {\n        return [];\n    }\n}\n","import {\n    ExcelFileTypes,\n    ExcelFolderTypes\n} from './excel-enums';\n\nimport {\n    AppFile,\n    ContentTypesFile,\n    CoreFile,\n    RootRelsFile,\n    SharedStringsFile,\n    StyleFile,\n    TablesFile,\n    ThemeFile,\n    WorkbookFile,\n    WorkbookRelsFile,\n    WorksheetFile,\n    WorksheetRelsFile\n} from './excel-files';\n\nimport {\n    DocPropsExcelFolder,\n    RootExcelFolder,\n    RootRelsExcelFolder,\n    TablesExcelFolder,\n    ThemeExcelFolder,\n    WorksheetsExcelFolder,\n    WorksheetsRelsExcelFolder,\n    XLExcelFolder,\n    XLRelsExcelFolder\n} from './excel-folders';\n\nimport {\n    IExcelFile,\n    IExcelFolder\n} from './excel-interfaces';\n\n/** @hidden */\nexport class ExcelElementsFactory {\n\n    public static getExcelFolder(type: ExcelFolderTypes): IExcelFolder {\n        switch (type) {\n            case ExcelFolderTypes.RootExcelFolder:\n                return new RootExcelFolder();\n            case ExcelFolderTypes.RootRelsExcelFolder:\n                return new RootRelsExcelFolder();\n            case ExcelFolderTypes.DocPropsExcelFolder:\n                return new DocPropsExcelFolder();\n            case ExcelFolderTypes.XLExcelFolder:\n                return new XLExcelFolder();\n            case ExcelFolderTypes.XLRelsExcelFolder:\n                return new XLRelsExcelFolder();\n            case ExcelFolderTypes.ThemeExcelFolder:\n                return new ThemeExcelFolder();\n            case ExcelFolderTypes.WorksheetsExcelFolder:\n                return  new WorksheetsExcelFolder();\n            case ExcelFolderTypes.WorksheetsRelsExcelFolder:\n                return new WorksheetsRelsExcelFolder();\n            case ExcelFolderTypes.TablesExcelFolder:\n                return new TablesExcelFolder();\n            default:\n                throw new Error('Unknown excel folder type!');\n        }\n    }\n\n    public static getExcelFile(type: ExcelFileTypes): IExcelFile {\n        switch (type) {\n            case ExcelFileTypes.RootRelsFile:\n                return  new RootRelsFile();\n            case ExcelFileTypes.AppFile:\n                return  new AppFile();\n            case ExcelFileTypes.CoreFile:\n                return new CoreFile();\n            case ExcelFileTypes.WorkbookRelsFile:\n                return new WorkbookRelsFile();\n            case ExcelFileTypes.ThemeFile:\n                return new ThemeFile();\n            case ExcelFileTypes.WorksheetFile:\n                return new WorksheetFile();\n            case ExcelFileTypes.StyleFile:\n                return new StyleFile();\n            case ExcelFileTypes.WorkbookFile:\n                return new WorkbookFile();\n            case ExcelFileTypes.ContentTypesFile:\n                return new ContentTypesFile();\n            case ExcelFileTypes.SharedStringsFile:\n                return new SharedStringsFile();\n            case ExcelFileTypes.WorksheetRelsFile:\n                return new WorksheetRelsFile();\n            case ExcelFileTypes.TablesFile:\n                return new TablesFile();\n            default:\n                throw Error('Unknown excel file type!');\n        }\n    }\n}\n","import { ExportUtilities } from '../exporter-common/export-utilities';\n\n/** @hidden */\nexport class WorksheetDataDictionary {\n    private static DEFAULT_FONT = '11pt Calibri';\n    private static TEXT_PADDING = 5;\n\n    private _dictionary: any;\n    private _widthsDictionary: any;\n\n    private _sortedKeysByValue: string[];\n    private _sortedKeysByValueAreValid: boolean;\n\n    private _keys: string[];\n    private _keysAreValid: boolean;\n\n    private _counter: number;\n    private _columnWidths: number[];\n    private _context: any;\n\n    private _columnTypeInfo: boolean[];\n    public hasNumberValues = false;\n    public hasDateValues = false;\n\n    public stringsCount: number;\n\n    constructor(columnCount: number, columnWidth: number, columnWidthsList: number[]) {\n        this._dictionary = {};\n        this._widthsDictionary = {};\n        this._counter = 0;\n        this.dirtyKeyCollections();\n\n        this._columnWidths = new Array<number>(columnCount);\n        this._columnTypeInfo = new Array<boolean>(columnCount);\n\n        if (columnWidth) {\n            this._columnWidths.fill(columnWidth);\n        } else {\n            this._columnWidths = columnWidthsList;\n        }\n\n        this.stringsCount = 0;\n    }\n\n    public get columnWidths() {\n        return this._columnWidths;\n    }\n\n    public saveValue(value: any, column: number, isHeader: boolean): number {\n        if (this._columnTypeInfo[column] === undefined && isHeader === false) {\n            this._columnTypeInfo[column] = typeof value !== 'number' && value !== Number(value) && !Number.isFinite(value);\n        }\n\n        let sanitizedValue = '';\n        const isDate = value instanceof Date;\n        const isSavedAsString = (this._columnTypeInfo[column] || isHeader) && !isDate;\n\n        if (isSavedAsString) {\n            sanitizedValue = this.sanitizeValue(value);\n\n            if (this._dictionary[sanitizedValue] === undefined) {\n                this._dictionary[sanitizedValue] = this._counter++;\n                this.dirtyKeyCollections();\n            }\n\n            this.stringsCount ++;\n        } else if (isDate) {\n            this.hasDateValues = true;\n        } else {\n            this.hasNumberValues = true;\n        }\n\n        return isSavedAsString ? this.getSanitizedValue(sanitizedValue) : -1;\n    }\n\n    public getValue(value: string): number {\n        return this.getSanitizedValue(this.sanitizeValue(value));\n    }\n\n    public getSanitizedValue(sanitizedValue: string): number {\n        return this._dictionary[sanitizedValue];\n    }\n\n    public getKeys(): string[] {\n        if (!this._keysAreValid) {\n            this._keys = Object.keys(this._dictionary);\n            this._keysAreValid = true;\n        }\n\n        return this._keys;\n    }\n\n    private getTextWidth(value: any): number {\n        if (this._widthsDictionary[value] === undefined) {\n            const context = this.getContext();\n            const metrics = context.measureText(value);\n            this._widthsDictionary[value] = metrics.width + WorksheetDataDictionary.TEXT_PADDING;\n        }\n\n        return this._widthsDictionary[value];\n    }\n\n    private getContext(): any {\n        if (!this._context) {\n            const canvas = document.createElement('canvas');\n            this._context = canvas.getContext('2d');\n            this._context.font = WorksheetDataDictionary.DEFAULT_FONT;\n        }\n\n        return this._context;\n    }\n\n    private sanitizeValue(value: any): string {\n        if (ExportUtilities.hasValue(value) === false) {\n            return '';\n        } else {\n            const stringValue = String(value);\n            return stringValue.replace(/&/g, '&amp;')\n                            .replace(/</g, '&lt;')\n                            .replace(/>/g, '&gt;')\n                            .replace(/\"/g, '&quot;')\n                            .replace(/'/g, '&apos;');\n        }\n    }\n\n    private dirtyKeyCollections(): void {\n        this._keysAreValid = false;\n    }\n}\n","import { ExportUtilities } from '../exporter-common/export-utilities';\nimport { IgxExcelExporterOptions } from './excel-exporter-options';\nimport { WorksheetDataDictionary } from './worksheet-data-dictionary';\n\n/** @hidden */\nexport class WorksheetData {\n    private _columnCount: number;\n    private _rowCount: number;\n    private _dataDictionary: WorksheetDataDictionary;\n    private _keys: string[];\n    private _isSpecialData: boolean;\n\n    constructor(private _data: any[], private _columnWidths: number[], public options: IgxExcelExporterOptions,\n            public indexOfLastPinnedColumn, public sort: any, public isTreeGridData = false) {\n        this.initializeData();\n    }\n\n    public get data() {\n        return this._data;\n    }\n\n    public get columnCount(): number {\n        return this._columnCount;\n    }\n\n    public get rowCount(): number {\n        return this._rowCount;\n    }\n\n    public get isEmpty() {\n        return !this.rowCount || !this._columnCount;\n    }\n\n    public get keys(): string[] {\n        return this._keys;\n    }\n\n    public get isSpecialData(): boolean {\n        return this._isSpecialData;\n    }\n\n    public get dataDictionary() {\n        return this._dataDictionary;\n    }\n\n    private initializeData() {\n        if (!this._data || this._data.length === 0) {\n            return;\n        }\n\n        const actualData = this._data.map((item) => item.rowData);\n\n        this._keys = ExportUtilities.getKeysFromData(actualData);\n        if (this._keys.length === 0) {\n            return;\n        }\n\n        this._isSpecialData = ExportUtilities.isSpecialData(actualData);\n\n        this._columnCount = this._keys.length;\n        this._rowCount = this._data.length + 1;\n\n        this._dataDictionary = new WorksheetDataDictionary(this._columnCount, this.options.columnWidth, this._columnWidths);\n    }\n}\n","import * as JSZip from 'jszip';\n\nimport { EventEmitter, Injectable, Output } from '@angular/core';\nimport { ExcelElementsFactory } from './excel-elements-factory';\nimport { ExcelFolderTypes } from './excel-enums';\nimport { IgxExcelExporterOptions } from './excel-exporter-options';\nimport { IExcelFolder } from './excel-interfaces';\nimport { IgxBaseExporter } from '../exporter-common/base-export-service';\nimport { ExportUtilities } from '../exporter-common/export-utilities';\nimport { WorksheetData } from './worksheet-data';\nimport { IBaseEventArgs } from '../../core/utils';\nimport { WorksheetFile } from './excel-files';\n\nexport interface IExcelExportEndedEventArgs extends IBaseEventArgs {\n    xlsx?: JSZip;\n}\n\n/**\n * **Ignite UI for Angular Excel Exporter Service** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/exporter_excel.html)\n *\n * The Ignite UI for Angular Excel Exporter service can export data in Microsoft Excel format from both raw data\n * (array) or from an `IgxGrid`.\n *\n * Example:\n * ```typescript\n * public localData = [\n *   { Name: \"Eric Ridley\", Age: \"26\" },\n *   { Name: \"Alanis Brook\", Age: \"22\" },\n *   { Name: \"Jonathan Morris\", Age: \"23\" }\n * ];\n *\n * constructor(private excelExportService: IgxExcelExporterService) {\n * }\n *\n * this.excelExportService.exportData(this.localData, new IgxExcelExporterOptions(\"FileName\"));\n * ```\n */\n@Injectable()\nexport class IgxExcelExporterService extends IgxBaseExporter {\n\n    private static ZIP_OPTIONS = { compression: 'DEFLATE', type: 'base64' } as JSZip.JSZipGeneratorOptions<'base64'>;\n    private _xlsx: JSZip;\n\n    /**\n     * This event is emitted when the export process finishes.\n     * ```typescript\n     * this.exporterService.onExportEnded.subscribe((args: IExcelExportEndedEventArgs) => {\n     * // put event handler code here\n     * });\n     * ```\n     * @memberof IgxExcelExporterService\n     */\n    @Output()\n    public onExportEnded = new EventEmitter<IExcelExportEndedEventArgs>();\n\n    private static async populateFolderAsync(folder: IExcelFolder, zip: JSZip, worksheetData: WorksheetData) {\n        for (const childFolder of folder.childFolders(worksheetData)) {\n            const folderInstance = ExcelElementsFactory.getExcelFolder(childFolder);\n            const zipFolder = zip.folder(folderInstance.folderName);\n            await IgxExcelExporterService.populateFolderAsync(folderInstance, zipFolder, worksheetData);\n        }\n\n        for (const childFile of folder.childFiles(worksheetData)) {\n            const fileInstance = ExcelElementsFactory.getExcelFile(childFile);\n            if (fileInstance instanceof WorksheetFile) {\n                await (fileInstance as WorksheetFile).writeElementAsync(zip, worksheetData);\n            } else {\n                fileInstance.writeElement(zip, worksheetData);\n            }\n        }\n    }\n\n    protected exportDataImplementation(data: any[], options: IgxExcelExporterOptions): void {\n        if (this._isTreeGrid) {\n            let maxLevel = 0;\n            data.forEach((r) => {\n                maxLevel = Math.max(maxLevel, r.originalRowData.level);\n            });\n            if (maxLevel > 7) {\n                throw Error('Can create an outline of up to eight levels!');\n            }\n        }\n\n        const worksheetData =\n            new WorksheetData(data, this.columnWidthList, options, this._indexOfLastPinnedColumn, this._sort, this._isTreeGrid);\n\n        this._xlsx = new JSZip();\n\n        const rootFolder = ExcelElementsFactory.getExcelFolder(ExcelFolderTypes.RootExcelFolder);\n\n        IgxExcelExporterService.populateFolderAsync(rootFolder, this._xlsx, worksheetData)\n        .then(() => {\n            this._xlsx.generateAsync(IgxExcelExporterService.ZIP_OPTIONS).then((result) => {\n                this.saveFile(result, options.fileName);\n                this.onExportEnded.emit({ xlsx: this._xlsx });\n            });\n        });\n    }\n\n    private saveFile(data: string, fileName: string): void {\n        const blob = new Blob([ExportUtilities.stringToArrayBuffer(atob(data))], {\n            type: ''\n        });\n\n        ExportUtilities.saveBlobToFile(blob, fileName);\n    }\n}\n","import { IPositionStrategy } from './position/IPositionStrategy';\n\nimport { IScrollStrategy } from './scroll';\nimport { AnimationReferenceMetadata, AnimationPlayer } from '@angular/animations';\nimport { ComponentRef, ElementRef, NgZone } from '@angular/core';\nimport { IgxOverlayOutletDirective } from '../../directives/toggle/toggle.directive';\nimport { CancelableEventArgs, CancelableBrowserEventArgs, cloneValue, IBaseEventArgs, mkenum } from '../../core/utils';\n\nexport enum HorizontalAlignment {\n    Left = -1,\n    Center = -0.5,\n    Right = 0\n}\n\nexport enum VerticalAlignment {\n    Top = -1,\n    Middle = -0.5,\n    Bottom = 0\n}\n\n/**\n * Defines the possible values of the overlays' position strategy.\n */\nexport enum RelativePositionStrategy {\n    Connected = 'connected',\n    Auto = 'auto',\n    Elastic = 'elastic'\n}\n\n/**\n * Defines the possible positions for the relative overlay settings presets.\n */\nexport enum RelativePosition {\n    Above = 'above',\n    Below = 'below',\n    Before = 'before',\n    After = 'after',\n    Default = 'default'\n}\n\n/**\n * Defines the possible positions for the absolute overlay settings presets.\n */\nexport enum AbsolutePosition {\n    Bottom = 'bottom',\n    Top = 'top',\n    Center = 'center'\n}\n\nexport class Point {\n    constructor(public x: number, public y: number) { }\n}\n\n/** @hidden */\nexport interface OutOfViewPort {\n    /** Out of view port at Top or Left */\n    back: number;\n    /** Out of view port at Bottom or Right */\n    forward: number;\n}\n\nexport interface PositionSettings {\n    /**\n     * @deprecated Set the target point/element in the overlay settings instead.\n     * Attaching target for the component to show\n     */\n    target?: Point | HTMLElement;\n    /** Direction in which the component should show */\n    horizontalDirection?: HorizontalAlignment;\n    /** Direction in which the component should show */\n    verticalDirection?: VerticalAlignment;\n    /** Target's starting point */\n    horizontalStartPoint?: HorizontalAlignment;\n    /** Target's starting point */\n    verticalStartPoint?: VerticalAlignment;\n    /** Animation applied while overlay opens */\n    openAnimation?: AnimationReferenceMetadata;\n    /** Animation applied while overlay closes */\n    closeAnimation?: AnimationReferenceMetadata;\n    /** The size up to which element may shrink when shown in elastic position strategy */\n    minSize?: Size;\n}\n\nexport interface OverlaySettings {\n    /** Attaching target for the component to show */\n    target?: Point | HTMLElement;\n    /** Position strategy to use with these settings */\n    positionStrategy?: IPositionStrategy;\n    /** Scroll strategy to use with these settings */\n    scrollStrategy?: IScrollStrategy;\n    /** Set if the overlay should be in modal mode */\n    modal?: boolean;\n    /** Set if the overlay should close on outside click */\n    closeOnOutsideClick?: boolean;\n    /** Set if the overlay should close when `Esc` key is pressed */\n    closeOnEscape?: boolean;\n    /** Set the outlet container to attach the overlay to */\n    outlet?: IgxOverlayOutletDirective | ElementRef;\n    /**\n     * @hidden @internal\n     * Elements to be excluded for closeOnOutsideClick.\n     * Clicking on the elements in this collection will not close the overlay when closeOnOutsideClick = true.\n     */\n    excludeFromOutsideClick?: HTMLElement[];\n}\n\nexport interface OverlayEventArgs extends IBaseEventArgs {\n    /** Id of the overlay generated with `attach()` method */\n    id: string;\n    /** Available when `Type<T>` is provided to the `attach()` method and allows access to the created Component instance */\n    componentRef?: ComponentRef<{}>;\n}\n\nexport interface OverlayCancelableEventArgs extends OverlayEventArgs, CancelableEventArgs {\n}\n\nexport interface OverlayClosingEventArgs extends OverlayEventArgs, CancelableBrowserEventArgs {\n}\n\nexport interface OverlayAnimationEventArgs extends IBaseEventArgs {\n    /** Id of the overlay generated with `attach()` method */\n    id: string;\n    /** Animation player that will play the animation */\n    animationPlayer: AnimationPlayer;\n    /** Type of animation to be played. It should be either 'open' or 'close' */\n    animationType: 'open' | 'close';\n}\n\nexport interface Size {\n    /** Gets or sets the horizontal component of Size */\n    width: number;\n\n    /** Gets or sets the vertical component of Size */\n    height: number;\n}\n\n/** @hidden */\nexport interface OverlayInfo {\n    id?: string;\n    elementRef?: ElementRef;\n    componentRef?: ComponentRef<{}>;\n    settings?: OverlaySettings;\n    initialSize?: Size;\n    hook?: HTMLElement;\n    openAnimationPlayer?: AnimationPlayer;\n    closeAnimationPlayer?: AnimationPlayer;\n    openAnimationInnerPlayer?: any;\n    closeAnimationInnerPlayer?: any;\n    ngZone: NgZone;\n    transformX?: number;\n    transformY?: number;\n}\n\n/** @hidden */\nexport interface ConnectedFit {\n    contentElementRect?: ClientRect;\n    targetRect?: ClientRect;\n    viewPortRect?: ClientRect;\n    fitHorizontal?: OutOfViewPort;\n    fitVertical?: OutOfViewPort;\n    left?: number;\n    right?: number;\n    top?: number;\n    bottom?: number;\n    horizontalOffset?: number;\n    verticalOffset?: number;\n}\n\n/** @hidden */\nexport class Util {\n    /**\n     * @hidden\n     * Calculates the rectangle of target for provided overlay settings. Defaults to 0,0,0,0,0,0 rectangle\n     * if no target is provided\n     * @param settings Overlay settings for which to calculate target rectangle\n     */\n    static getTargetRect(target?: Point | HTMLElement): ClientRect {\n        let targetRect: ClientRect = {\n            bottom: 0,\n            height: 0,\n            left: 0,\n            right: 0,\n            top: 0,\n            width: 0\n        };\n\n        if (target instanceof HTMLElement) {\n            targetRect = (target as HTMLElement).getBoundingClientRect();\n        } else if (target instanceof Point) {\n            const targetPoint = target as Point;\n            targetRect = {\n                bottom: targetPoint.y,\n                height: 0,\n                left: targetPoint.x,\n                right: targetPoint.x,\n                top: targetPoint.y,\n                width: 0\n            };\n        }\n\n        return targetRect;\n    }\n\n    /** @hidden @internal */\n    static getViewportRect(document: Document): ClientRect {\n        const width = document.documentElement.clientWidth;\n        const height = document.documentElement.clientHeight;\n        const scrollPosition = Util.getViewportScrollPosition(document);\n\n        return {\n            top: scrollPosition.y,\n            left: scrollPosition.x,\n            right: scrollPosition.x + width,\n            bottom: scrollPosition.y + height,\n            width: width,\n            height: height,\n        };\n    }\n\n    /** @hidden @internal */\n    static getViewportScrollPosition(document: Document): Point {\n        const documentElement = document.documentElement;\n        const documentRect = documentElement.getBoundingClientRect();\n\n        const horizontalScrollPosition =\n            -documentRect.left || document.body.scrollLeft || window.scrollX || documentElement.scrollLeft || 0;\n        const verticalScrollPosition = -documentRect.top || document.body.scrollTop || window.scrollY || documentElement.scrollTop || 0;\n\n        return new Point(horizontalScrollPosition, verticalScrollPosition);\n    }\n\n    /** @hidden @internal */\n    static cloneInstance(object) {\n        const clonedObj = Object.assign(Object.create(Object.getPrototypeOf(object)), object);\n        clonedObj.settings = cloneValue(clonedObj.settings);\n        return clonedObj;\n    }\n}\n","import { IgxExporterOptionsBase } from '../exporter-common/exporter-options-base';\n\n/**\n * Objects of this class are used to configure the Excel exporting process.\n */\nexport class IgxExcelExporterOptions extends IgxExporterOptionsBase {\n    private _columnWidth: number;\n    private _rowHeight: number;\n    private _worksheetName: string;\n\n    /**\n     * Specifies if column pinning should be ignored. If ignoreColumnsOrder is set to true,\n     * this option will always be considered as set to true.\n     * ```typescript\n     * let ignorePinning = this.exportOptions.ignorePinning;\n     * this.exportOptions.ignorePinning = true;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public ignorePinning = false;\n\n    /**\n     * Specifies whether the exported data should be formatted as Excel table. (True by default)\n     * ```typescript\n     * let exportAsTable = this.exportOptions.exportAsTable;\n     * this.exportOptions.exportAsTable = false;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public exportAsTable = true;\n\n    constructor(fileName: string) {\n        super(fileName, '.xlsx');\n    }\n\n    /**\n     * Gets the width of the columns in the exported excel file.\n     * ```typescript\n     * let width = this.exportOptions.columnWidth;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public get columnWidth(): number {\n        return this._columnWidth;\n    }\n\n    /**\n     * Sets the width of the columns in the exported excel file. If left unspecified,\n     * the width of the column or the default width of the excel columns will be used.\n     * ```typescript\n     * this.exportOptions.columnWidth = 55;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public set columnWidth(value: number) {\n        if (value < 0) {\n            throw Error('Invalid value for column width!');\n        }\n\n        this._columnWidth = value;\n    }\n\n    /**\n     * Gets the height of the rows in the exported excel file.\n     * ```typescript\n     * let height = this.exportOptions.rowHeight;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public get rowHeight(): number {\n        return this._rowHeight;\n    }\n\n    /**\n     * Sets the height of the rows in the exported excel file. If left unspecified or 0,\n     * the default height of the excel rows will be used.\n     * ```typescript\n     * this.exportOptions.rowHeight = 25;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public set rowHeight(value: number) {\n        if (value < 0) {\n            throw Error('Invalid value for row height!');\n        }\n\n        this._rowHeight = value;\n    }\n\n    /**\n     * Gets the name of the worksheet in the exported excel file.\n     * ```typescript\n     * let worksheetName = this.exportOptions.worksheetName;\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public get worksheetName(): string {\n        if (this._worksheetName === undefined || this._worksheetName === null) {\n            return 'Sheet1';\n        }\n\n        return this._worksheetName;\n    }\n\n    /**\n     * Sets the name of the worksheet in the exported excel file.\n     * ```typescript\n     * this.exportOptions.worksheetName = \"Worksheet\";\n     * ```\n     * @memberof IgxExcelExporterOptions\n     */\n    public set worksheetName(value: string) {\n        this._worksheetName = value;\n    }\n}\n","import { isDevMode } from '@angular/core';\n\n/**\n * @hidden\n */\nexport function DeprecateClass(message: string) {\n    let isMessageShown = false;\n\n    return function<T extends new(...args: any[]) => {} >(originalClass: T) {\n        return class extends originalClass {\n            constructor(...args) {\n                const target: any = originalClass;\n                const targetName = typeof target === 'function' ? target.name : target.constructor.name;\n                isMessageShown = showMessage(`${targetName}: ${message}`, isMessageShown);\n\n                super(...args);\n            }\n        };\n    };\n}\n\n/**\n * @hidden\n */\nexport function DeprecateMethod(message: string): MethodDecorator {\n    let isMessageShown = false;\n\n    return function (target: any, key: string, descriptor: PropertyDescriptor) {\n        if (descriptor && descriptor.value) {\n            const originalMethod = descriptor.value;\n\n            descriptor.value = function () {\n                const targetName = typeof target === 'function' ? target.name : target.constructor.name;\n                isMessageShown = showMessage(`${targetName}.${key}: ${message}`, isMessageShown);\n\n                return originalMethod.call(this, arguments);\n            };\n\n            return descriptor;\n        }\n    };\n}\n\n/**\n * @hidden\n */\nexport function DeprecateProperty(message: string): PropertyDecorator {\n    return function(target: any, key: string) {\n        let isMessageShown = false;\n        const messageToDisplay = `${target.constructor.name}.${key}: ${message}`;\n\n        // if the target already has the property defined\n        const originalDescriptor = Object.getOwnPropertyDescriptor(target, key);\n        if (originalDescriptor) {\n            let getter, setter;\n            getter = originalDescriptor.get;\n            setter = originalDescriptor.set;\n\n            if (getter) {\n                originalDescriptor.get = function() {\n                    isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                    return getter.call(this);\n                };\n            }\n\n            if (setter) {\n                originalDescriptor.set = function (value) {\n                    isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                    setter.call(this, value);\n                };\n            }\n\n            return originalDescriptor;\n        }\n\n        // the target doesn't contain a descriptor for that property, so create one\n        // use backing field to set/get the value of the property to ensure there won't be infinite recursive calls\n        const newKey = generateUniqueKey(target, key);\n        Object.defineProperty(target, key, {\n            configurable: true,\n            enumerable: true,\n            set: function(value) {\n                isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                this[newKey] = value;\n            },\n            get: function() {\n                isMessageShown = showMessage(messageToDisplay, isMessageShown);\n                return this[newKey];\n            }\n        });\n    };\n}\n\n/**\n * @hidden\n */\nfunction generateUniqueKey(target: any, key: string): string {\n    let newKey = '_' + key;\n    while (target.hasOwnProperty(newKey)) {\n        newKey = '_' + newKey;\n    }\n\n    return newKey;\n}\n\n/**\n * @hidden\n */\nexport function showMessage(message: string, isMessageShown: boolean): boolean {\n    if (!isMessageShown && isDevMode()) {\n        console.warn(message);\n    }\n\n    return true;\n}\n","import { AnimationReferenceMetadata } from '@angular/animations';\nimport { isHorizontalAnimation, isVerticalAnimation, reverseAnimationResolver } from '../../../core/utils';\nimport { ConnectedFit, HorizontalAlignment, VerticalAlignment } from './../utilities';\nimport { BaseFitPositionStrategy } from './base-fit-position-strategy';\n\n/**\n * Positions the element as in **Connected** positioning strategy and re-positions the element in\n * the view port (calculating a different start point) in case the element is partially getting out of view\n */\nexport class AutoPositionStrategy extends BaseFitPositionStrategy {\n\n    /** @inheritdoc */\n    protected fitInViewport(element: HTMLElement, connectedFit: ConnectedFit) {\n        const transformString: string[] = [];\n        if (connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0) {\n            if (this.canFlipHorizontal(connectedFit)) {\n                this.flipHorizontal();\n                this.flipAnimation(FlipDirection.horizontal);\n            } else {\n                const horizontalPush = this.horizontalPush(connectedFit);\n                transformString.push(`translateX(${horizontalPush}px)`);\n            }\n        }\n\n        if (connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0) {\n            if (this.canFlipVertical(connectedFit)) {\n                this.flipVertical();\n                this.flipAnimation(FlipDirection.vertical);\n            } else {\n                const verticalPush = this.verticalPush(connectedFit);\n                transformString.push(`translateY(${verticalPush}px)`);\n            }\n        }\n\n        element.style.transform = transformString.join(' ').trim();\n    }\n\n    /**\n     * Checks if element can be flipped without get off the viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns true if element can be flipped and stain in viewport\n     */\n    private canFlipHorizontal(connectedFit: ConnectedFit): boolean {\n        //  HorizontalAlignment can be Left = -1; Center = -0.5 or Right = 0.\n        //  To virtually flip direction and start point (both are HorizontalAlignment) we can do this:\n        //  flippedAlignment = (-1) * (HorizontalAlignment + 1)\n        //  this way:\n        //  (-1) * (Left + 1) = 0 = Right\n        //  (-1) * (Center + 1) = -0.5 = Center\n        //  (-1) * (Right + 1) = -1 = Left\n        const flippedStartPoint = (-1) * (this.settings.horizontalStartPoint + 1);\n        const flippedDirection = (-1) * (this.settings.horizontalDirection + 1);\n\n        const leftBorder = this.calculateLeft(\n            connectedFit.targetRect, connectedFit.contentElementRect, flippedStartPoint, flippedDirection, 0);\n        const rightBorder = leftBorder + connectedFit.contentElementRect.width;\n        return 0 < leftBorder && rightBorder < connectedFit.viewPortRect.width;\n    }\n\n    /**\n     * Checks if element can be flipped without get off the viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns true if element can be flipped and stain in viewport\n     */\n    private canFlipVertical(connectedFit: ConnectedFit): boolean {\n        const flippedStartPoint = (-1) * (this.settings.verticalStartPoint + 1);\n        const flippedDirection = (-1) * (this.settings.verticalDirection + 1);\n\n        const topBorder = this.calculateTop(\n            connectedFit.targetRect, connectedFit.contentElementRect, flippedStartPoint, flippedDirection, 0);\n        const bottomBorder = topBorder + connectedFit.contentElementRect.height;\n        return 0 < topBorder && bottomBorder < connectedFit.viewPortRect.height;\n    }\n\n    /**\n     * Flips direction and start point of the position settings\n     */\n    private flipHorizontal() {\n        switch (this.settings.horizontalDirection) {\n            case HorizontalAlignment.Left:\n                this.settings.horizontalDirection = HorizontalAlignment.Right;\n                break;\n            case HorizontalAlignment.Right:\n                this.settings.horizontalDirection = HorizontalAlignment.Left;\n                break;\n        }\n        switch (this.settings.horizontalStartPoint) {\n            case HorizontalAlignment.Left:\n                this.settings.horizontalStartPoint = HorizontalAlignment.Right;\n                break;\n            case HorizontalAlignment.Right:\n                this.settings.horizontalStartPoint = HorizontalAlignment.Left;\n                break;\n        }\n    }\n\n    /**\n     * Flips direction and start point of the position settings\n     */\n    private flipVertical() {\n        switch (this.settings.verticalDirection) {\n            case VerticalAlignment.Top:\n                this.settings.verticalDirection = VerticalAlignment.Bottom;\n                break;\n            case VerticalAlignment.Bottom:\n                this.settings.verticalDirection = VerticalAlignment.Top;\n                break;\n        }\n        switch (this.settings.verticalStartPoint) {\n            case VerticalAlignment.Top:\n                this.settings.verticalStartPoint = VerticalAlignment.Bottom;\n                break;\n            case VerticalAlignment.Bottom:\n                this.settings.verticalStartPoint = VerticalAlignment.Top;\n                break;\n        }\n    }\n\n    /**\n     * Calculates necessary horizontal push according to provided connectedFit\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns amount of necessary translation which will push the element into viewport\n     */\n    private horizontalPush(connectedFit: ConnectedFit): number {\n        const leftExtend = connectedFit.left;\n        const rightExtend = connectedFit.right - connectedFit.viewPortRect.width;\n        //  if leftExtend < 0 overlay goes beyond left end of the screen. We should push it back with exactly\n        //  as much as it is beyond the screen.\n        //  if rightExtend > 0 overlay goes beyond right end of the screen. We should push it back with the\n        //  extend but with amount not bigger than what left between left border of screen and left border of\n        //  overlay, e.g. leftExtend\n        if (leftExtend < 0) {\n            return Math.abs(leftExtend);\n        } else if (rightExtend > 0) {\n            return - Math.min(rightExtend, leftExtend);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Calculates necessary vertical push according to provided connectedFit\n     * @param connectedFit connectedFit object containing all necessary parameters\n     * @returns amount of necessary translation which will push the element into viewport\n     */\n    private verticalPush(connectedFit: ConnectedFit): number {\n        const topExtend = connectedFit.top;\n        const bottomExtend = connectedFit.bottom - connectedFit.viewPortRect.height;\n        if (topExtend < 0) {\n            return Math.abs(topExtend);\n        } else if (bottomExtend > 0) {\n            return - Math.min(bottomExtend, topExtend);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Changes open and close animation with reverse animation if one exists\n     * @param flipDirection direction for which to change the animations\n     */\n    private flipAnimation(flipDirection: FlipDirection): void {\n        if (this.settings.openAnimation) {\n            this.settings.openAnimation = this.updateAnimation(this.settings.openAnimation, flipDirection);\n        }\n        if (this.settings.closeAnimation) {\n            this.settings.closeAnimation = this.updateAnimation(this.settings.closeAnimation, flipDirection);\n        }\n    }\n\n    /**\n     * Tries to find the reverse animation according to provided direction\n     * @param animation animation to update\n     * @param direction required animation direction\n     * @returns reverse animation in given direction if one exists\n     */\n    private updateAnimation(animation: AnimationReferenceMetadata, direction: FlipDirection): AnimationReferenceMetadata {\n        switch (direction) {\n            case FlipDirection.horizontal:\n                if (isHorizontalAnimation(animation)) {\n                    return reverseAnimationResolver(animation);\n                }\n                break;\n            case FlipDirection.vertical:\n                if (isVerticalAnimation(animation)) {\n                    return reverseAnimationResolver(animation);\n                }\n                break;\n        }\n\n        return animation;\n    }\n}\n\nenum FlipDirection {\n    horizontal,\n    vertical\n}\n","import { IPositionStrategy } from './IPositionStrategy';\nimport {\n  HorizontalAlignment,\n  Point,\n  PositionSettings,\n  Size,\n  Util,\n  VerticalAlignment\n} from './../utilities';\nimport { scaleInVerTop, scaleOutVerTop } from '../../../animations/main';\nimport { ConnectedFit } from '../utilities';\n\n/**\n * Positions the element based on the directions and start point passed in trough PositionSettings.\n * It is possible to either pass a start point or an HTMLElement as a positioning base.\n */\nexport class ConnectedPositioningStrategy implements IPositionStrategy {\n  private _defaultSettings: PositionSettings = {\n    horizontalDirection: HorizontalAlignment.Right,\n    verticalDirection: VerticalAlignment.Bottom,\n    horizontalStartPoint: HorizontalAlignment.Left,\n    verticalStartPoint: VerticalAlignment.Bottom,\n    openAnimation: scaleInVerTop,\n    closeAnimation: scaleOutVerTop,\n    minSize: { width: 0, height: 0 }\n  };\n\n  /** @inheritdoc */\n  public settings: PositionSettings;\n\n  constructor(settings?: PositionSettings) {\n    this.settings = Object.assign({}, this._defaultSettings, settings);\n  }\n\n  /**\n   * Obtains the ClientRect objects for the required elements - target and element to position\n   * @returns target and element ClientRect objects\n   */\n  protected calculateElementRectangles(contentElement, target: Point | HTMLElement): { targetRect: ClientRect, elementRect: ClientRect } {\n      return {\n          targetRect: Util.getTargetRect(target),\n          elementRect: contentElement.getBoundingClientRect() as ClientRect\n      };\n  }\n\n  /** @inheritdoc */\n  position(contentElement: HTMLElement, size: Size, document?: Document, initialCall?: boolean, target?: Point | HTMLElement): void {\n    const targetElement = target || this.settings.target;\n    const rects =  this.calculateElementRectangles(contentElement, targetElement);\n    this.setStyle(contentElement, rects.targetRect, rects.elementRect, {});\n  }\n\n  /**\n   * @inheritdoc\n   * Creates clone of this position strategy\n   * @returns clone of this position strategy\n   */\n  clone(): IPositionStrategy {\n    return Util.cloneInstance(this);\n  }\n\n  /**\n   * Sets element's style which effectively positions provided element according\n   * to provided position settings\n   * @param element Element to position\n   * @param targetRect Bounding rectangle of strategy target\n   * @param elementRect Bounding rectangle of the element\n   */\n  protected setStyle(element: HTMLElement, targetRect: ClientRect, elementRect: ClientRect, connectedFit: ConnectedFit) {\n      const horizontalOffset = connectedFit.horizontalOffset ? connectedFit.horizontalOffset : 0;\n      const verticalOffset = connectedFit.verticalOffset ? connectedFit.verticalOffset : 0;\n    const startPoint: Point = {\n      x: targetRect.right + targetRect.width * this.settings.horizontalStartPoint + horizontalOffset,\n      y: targetRect.bottom + targetRect.height * this.settings.verticalStartPoint + verticalOffset\n    };\n    const wrapperRect: ClientRect = element.parentElement.getBoundingClientRect();\n\n    //  clean up styles - if auto position strategy is chosen we may pass here several times\n    element.style.right = '';\n    element.style.left = '';\n    element.style.bottom = '';\n    element.style.top = '';\n\n    switch (this.settings.horizontalDirection) {\n      case HorizontalAlignment.Left:\n        element.style.right = `${Math.round(wrapperRect.right - startPoint.x)}px`;\n        break;\n      case HorizontalAlignment.Center:\n        element.style.left = `${Math.round(startPoint.x - wrapperRect.left - elementRect.width / 2)}px`;\n        break;\n      case HorizontalAlignment.Right:\n        element.style.left = `${Math.round(startPoint.x - wrapperRect.left)}px`;\n        break;\n    }\n\n    switch (this.settings.verticalDirection) {\n      case VerticalAlignment.Top:\n        element.style.bottom = `${Math.round(wrapperRect.bottom - startPoint.y)}px`;\n        break;\n      case VerticalAlignment.Middle:\n        element.style.top = `${Math.round(startPoint.y - wrapperRect.top - elementRect.height / 2)}px`;\n        break;\n      case VerticalAlignment.Bottom:\n        element.style.top = `${Math.round(startPoint.y - wrapperRect.top)}px`;\n        break;\n    }\n  }\n}\n","import { IPositionStrategy } from './IPositionStrategy';\nimport { PositionSettings, HorizontalAlignment, VerticalAlignment, Size, Util, OverlaySettings } from './../utilities';\nimport { fadeIn, fadeOut } from '../../../animations/main';\n\n/**\n * Positions the element based on the directions passed in trough PositionSettings.\n * These are Top/Middle/Bottom for verticalDirection and Left/Center/Right for horizontalDirection\n */\nexport class GlobalPositionStrategy implements IPositionStrategy {\n    protected _defaultSettings: PositionSettings = {\n        horizontalDirection: HorizontalAlignment.Center,\n        verticalDirection: VerticalAlignment.Middle,\n        horizontalStartPoint: HorizontalAlignment.Center,\n        verticalStartPoint: VerticalAlignment.Middle,\n        openAnimation: fadeIn,\n        closeAnimation: fadeOut,\n        minSize: { width: 0, height: 0 }\n    };\n\n    /** @inheritdoc */\n    public settings: PositionSettings;\n\n    constructor(settings?: PositionSettings) {\n        this.settings = Object.assign({}, this._defaultSettings, settings);\n    }\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size?: Size, document?: Document, initialCall?: boolean): void {\n        contentElement.classList.add('igx-overlay__content--relative');\n        contentElement.parentElement.classList.add('igx-overlay__wrapper--flex');\n        this.setPosition(contentElement, this.settings);\n    }\n\n    protected setPosition(contentElement: HTMLElement, settings: PositionSettings) {\n        switch (this.settings.horizontalDirection) {\n            case HorizontalAlignment.Left:\n                contentElement.parentElement.style.justifyContent = 'flex-start';\n                break;\n            case HorizontalAlignment.Center:\n                contentElement.parentElement.style.justifyContent = 'center';\n                break;\n            case HorizontalAlignment.Right:\n                contentElement.parentElement.style.justifyContent = 'flex-end';\n                break;\n            default:\n                break;\n        }\n\n        switch (this.settings.verticalDirection) {\n            case VerticalAlignment.Top:\n                contentElement.parentElement.style.alignItems = 'flex-start';\n                break;\n            case VerticalAlignment.Middle:\n                contentElement.parentElement.style.alignItems = 'center';\n                break;\n            case VerticalAlignment.Bottom:\n                contentElement.parentElement.style.alignItems = 'flex-end';\n                break;\n            default:\n                break;\n        }\n    }\n\n    /** @inheritdoc */\n    clone(): IPositionStrategy {\n        return Util.cloneInstance(this);\n    }\n}\n\n","import { IScrollStrategy } from './IScrollStrategy';\nimport { IgxOverlayService } from '../overlay';\n\nexport abstract class ScrollStrategy implements IScrollStrategy {\n    constructor(scrollContainer?: HTMLElement) { }\n    /** @inheritdoc */\n    abstract initialize(document: Document, overlayService: IgxOverlayService, id: string);\n\n    /** @inheritdoc */\n    abstract attach(): void;\n\n    /** @inheritdoc */\n    abstract detach(): void;\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\n\n/**\n * Empty scroll strategy. Does nothing.\n */\nexport class NoOpScrollStrategy extends ScrollStrategy {\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n    }\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) { }\n\n    /** @inheritdoc */\n    attach(): void { }\n\n    /** @inheritdoc */\n    detach(): void { }\n}\n","import { PositionSettings, Size } from '../utilities';\nimport { GlobalPositionStrategy } from './global-position-strategy';\n\n/**\n * Positions the element inside the containing outlet based on the directions passed in trough PositionSettings.\n * These are Top/Middle/Bottom for verticalDirection and Left/Center/Right for horizontalDirection\n */\nexport class ContainerPositionStrategy extends GlobalPositionStrategy {\n    constructor(settings?: PositionSettings) {\n        super(settings);\n    }\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size?: Size, document?: Document, initialCall?: boolean): void {\n        contentElement.classList.add('igx-overlay__content--relative');\n        contentElement.parentElement.classList.add('igx-overlay__wrapper--flex-container');\n        this.setPosition(contentElement, this.settings);\n    }\n}\n\n","import { ConnectedPositioningStrategy } from './connected-positioning-strategy';\nimport { HorizontalAlignment, VerticalAlignment, PositionSettings, Size, Util, ConnectedFit, OutOfViewPort, Point } from '../utilities';\n\nexport abstract class BaseFitPositionStrategy extends ConnectedPositioningStrategy {\n    protected _initialSize: Size;\n    protected _initialSettings: PositionSettings;\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size: Size, document?: Document, initialCall?: boolean, target?: Point | HTMLElement): void {\n        const targetElement = target || this.settings.target;\n        const rects = super.calculateElementRectangles(contentElement, targetElement);\n        const connectedFit: ConnectedFit = {};\n        if (initialCall) {\n            connectedFit.targetRect = rects.targetRect;\n            connectedFit.contentElementRect = rects.elementRect;\n            this._initialSettings = this._initialSettings || Object.assign({}, this.settings);\n            this.settings = Object.assign({}, this._initialSettings);\n            connectedFit.viewPortRect = Util.getViewportRect(document);\n            this.updateViewPortFit(connectedFit);\n            if (this.shouldFitInViewPort(connectedFit)) {\n                this.fitInViewport(contentElement, connectedFit);\n            }\n        }\n        this.setStyle(contentElement, rects.targetRect, rects.elementRect, connectedFit);\n    }\n\n    /**\n     * Checks if element can fit in viewport and updates provided connectedFit\n     * with the result\n     * @param connectedFit connectedFit to update\n     */\n    protected updateViewPortFit(connectedFit: ConnectedFit) {\n        connectedFit.left = this.calculateLeft(\n            connectedFit.targetRect,\n            connectedFit.contentElementRect,\n            this.settings.horizontalStartPoint,\n            this.settings.horizontalDirection,\n            connectedFit.horizontalOffset ? connectedFit.horizontalOffset : 0);\n        connectedFit.right = connectedFit.left + connectedFit.contentElementRect.width;\n        connectedFit.fitHorizontal = {\n                back: Math.round(connectedFit.left),\n                forward: Math.round(connectedFit.viewPortRect.width - connectedFit.right)\n            };\n\n        connectedFit.top = this.calculateTop(\n            connectedFit.targetRect,\n            connectedFit.contentElementRect,\n            this.settings.verticalStartPoint,\n            this.settings.verticalDirection,\n            connectedFit.verticalOffset ? connectedFit.verticalOffset : 0);\n        connectedFit.bottom = connectedFit.top + connectedFit.contentElementRect.height;\n        connectedFit.fitVertical = {\n            back: Math.round(connectedFit.top),\n            forward: Math.round(connectedFit.viewPortRect.height - connectedFit.bottom)\n        };\n    }\n\n    /**\n     * Calculates the position of the left border of the element if it gets positioned\n     * with provided start point and direction\n     * @param targetRect Rectangle of the target where element is attached\n     * @param elementRect Rectangle of the element\n     * @param startPoint Start point of the target\n     * @param direction Direction in which to show the element\n     */\n    protected calculateLeft(\n        targetRect: ClientRect, elementRect: ClientRect, startPoint: HorizontalAlignment, direction: HorizontalAlignment, offset?: number):\n        number {\n        return targetRect.right + targetRect.width * startPoint + elementRect.width * direction + offset;\n    }\n\n    /**\n     * Calculates the position of the top border of the element if it gets positioned\n     * with provided position settings related to the target\n     * @param targetRect Rectangle of the target where element is attached\n     * @param elementRect Rectangle of the element\n     * @param startPoint Start point of the target\n     * @param direction Direction in which to show the element\n     */\n    protected calculateTop(\n        targetRect: ClientRect, elementRect: ClientRect, startPoint: VerticalAlignment, direction: VerticalAlignment, offset?: number):\n        number {\n        return targetRect.bottom + targetRect.height * startPoint + elementRect.height * direction + offset;\n    }\n\n    /**\n     * Returns whether the element should fit in viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     */\n    protected shouldFitInViewPort(connectedFit: ConnectedFit) {\n        return connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0 ||\n            connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0;\n    }\n\n    /**\n     * Fits the element into viewport according to the position settings\n     * @param element element to fit in viewport\n     * @param connectedFit connectedFit object containing all necessary parameters\n     */\n    protected abstract fitInViewport(\n        element: HTMLElement,\n        connectedFit: ConnectedFit);\n}\n","import { BaseFitPositionStrategy } from './base-fit-position-strategy';\nimport { HorizontalAlignment, VerticalAlignment, ConnectedFit } from '../utilities';\n\n/**\n * Positions the element as in **Connected** positioning strategy and resize the element\n * to fit in the view port in case the element is partially getting out of view\n */\nexport class ElasticPositionStrategy extends BaseFitPositionStrategy {\n    /** @inheritdoc */\n    protected fitInViewport(element: HTMLElement, connectedFit: ConnectedFit) {\n        element.classList.add('igx-overlay__content--elastic');\n        const transformString: string[] = [];\n        if (connectedFit.fitHorizontal.back < 0 || connectedFit.fitHorizontal.forward < 0) {\n            const maxReduction = Math.max(0, connectedFit.contentElementRect.width - this.settings.minSize.width);\n            const leftExtend = Math.max(0, -connectedFit.fitHorizontal.back);\n            const rightExtend = Math.max(0, -connectedFit.fitHorizontal.forward);\n            const reduction = Math.min(maxReduction, leftExtend + rightExtend);\n            element.style.width = `${connectedFit.contentElementRect.width - reduction}px`;\n\n            //  if direction is center and element goes off the screen in left direction we should push the\n            //  element to the right. Prevents left still going out of view when normally positioned\n            if (this.settings.horizontalDirection === HorizontalAlignment.Center) {\n                //  the amount of translation depends on whether element goes off the screen to the left,\n                //  to the right or in both directions, as well as how much it goes of the screen and finally\n                //  on the minSize. The translation should be proportional between left and right extend\n                //  taken from the reduction\n                const translation = leftExtend * reduction / (leftExtend + rightExtend);\n                if (translation > 0) {\n                    transformString.push(`translateX(${translation}px)`);\n                }\n            }\n        }\n\n        if (connectedFit.fitVertical.back < 0 || connectedFit.fitVertical.forward < 0) {\n            const maxReduction = Math.max(0, connectedFit.contentElementRect.height - this.settings.minSize.height);\n            const topExtend = Math.max(0, -connectedFit.fitVertical.back);\n            const bottomExtend = Math.max(0, -connectedFit.fitVertical.forward);\n            const reduction = Math.min(maxReduction, topExtend + bottomExtend);\n            element.style.height = `${connectedFit.contentElementRect.height - reduction}px`;\n\n            //  if direction is middle and element goes off the screen in top direction we should push the\n            //  element to the bottom. Prevents top still going out of view when normally positioned\n            if (this.settings.verticalDirection === VerticalAlignment.Middle) {\n                //  the amount of translation depends on whether element goes off the screen to the top,\n                //  to the bottom or in both directions, as well as how much it goes of the screen and finally\n                //  on the minSize. The translation should be proportional between top and bottom extend\n                //  taken from the reduction\n                const translation = topExtend * reduction / (topExtend + bottomExtend);\n                if (translation > 0) {\n                    transformString.push(`translateY(${translation}px)`);\n                }\n            }\n        }\n        element.style.transform = transformString.join(' ').trim();\n    }\n}\n","import { AnimationAnimateRefMetadata, AnimationBuilder, AnimationMetadataType, AnimationReferenceMetadata } from '@angular/animations';\nimport { DOCUMENT } from '@angular/common';\nimport {\n    ApplicationRef,\n    ComponentFactory,\n    ComponentFactoryResolver,\n    ComponentRef,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Injectable,\n    Injector,\n    NgModuleRef,\n    NgZone, OnDestroy, Type\n} from '@angular/core';\nimport { fromEvent, Subject, Subscription } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport {\n    IAnimationParams, slideInTop, slideOutBottom, slideOutTop, slideInBottom, fadeIn, fadeOut,\n    scaleInVerTop, scaleOutVerTop, scaleOutVerBottom, scaleInVerBottom, scaleInHorRight, scaleOutHorRight,\n    scaleOutHorLeft, scaleInHorLeft\n} from '../../animations/main';\nimport { showMessage } from '../../core/deprecateDecorators';\nimport { PlatformUtil } from '../../core/utils';\nimport { IPositionStrategy } from './position/IPositionStrategy';\nimport { ConnectedPositioningStrategy } from './position/connected-positioning-strategy';\nimport { GlobalPositionStrategy } from './position/global-position-strategy';\nimport { NoOpScrollStrategy } from './scroll/NoOpScrollStrategy';\nimport {\n    OverlayAnimationEventArgs,\n    OverlayCancelableEventArgs,\n    OverlayClosingEventArgs, OverlayEventArgs,\n    OverlayInfo, OverlaySettings,\n    HorizontalAlignment, VerticalAlignment, Point,\n    PositionSettings, AbsolutePosition, RelativePosition, RelativePositionStrategy\n} from './utilities';\nimport { ContainerPositionStrategy } from './position/container-position-strategy';\nimport { ElasticPositionStrategy } from './position/elastic-position-strategy';\nimport { AutoPositionStrategy } from './position/auto-position-strategy';\nimport { IgxOverlayOutletDirective } from '../../directives/toggle/toggle.directive';\n\n\nlet warningShown = false;\n\n/**\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/overlay-main)\n * The overlay service allows users to show components on overlay div above all other elements in the page.\n */\n@Injectable({ providedIn: 'root' })\nexport class IgxOverlayService implements OnDestroy {\n    private _componentId = 0;\n    private _overlayInfos: OverlayInfo[] = [];\n    private _overlayElement: HTMLElement;\n    private _document: Document;\n    private _keyPressEventListener: Subscription;\n    private destroy$ = new Subject<boolean>();\n    private _cursorStyleIsSet = false;\n    private _cursorOriginalValue: string;\n\n    private _defaultSettings: OverlaySettings = {\n        excludeFromOutsideClick: [],\n        positionStrategy: new GlobalPositionStrategy(),\n        scrollStrategy: new NoOpScrollStrategy(),\n        modal: true,\n        closeOnOutsideClick: true,\n        closeOnEscape: false\n    };\n\n    /**\n     * Emitted before the component is opened.\n     * ```typescript\n     * onOpening(event: OverlayCancelableEventArgs){\n     *     const onOpening = event;\n     * }\n     * ```\n     */\n    public onOpening = new EventEmitter<OverlayCancelableEventArgs>();\n\n    /**\n     * Emitted after the component is appended to the overlay, and before animations are started.\n     * ```typescript\n     * onAppended(event: OverlayEventArgs){\n     *     const onAppended = event;\n     * }\n     * ```\n     */\n    public onAppended = new EventEmitter<OverlayEventArgs>();\n\n    /**\n     * Emitted after the component is opened and all animations are finished.\n     * ```typescript\n     * onOpened(event: OverlayEventArgs){\n     *     const onOpened = event;\n     * }\n     * ```\n     */\n    public onOpened = new EventEmitter<OverlayEventArgs>();\n\n    /**\n     * Emitted before the component is closed.\n     * ```typescript\n     * onClosing(event: OverlayCancelableEventArgs){\n     *     const onClosing = event;\n     * }\n     * ```\n     */\n    public onClosing = new EventEmitter<OverlayClosingEventArgs>();\n\n    /**\n     * Emitted after the component is closed and all animations are finished.\n     * ```typescript\n     * onClosed(event: OverlayEventArgs){\n     *     const onClosed = event;\n     * }\n     * ```\n     */\n    public onClosed = new EventEmitter<OverlayEventArgs>();\n\n    /**\n     * Emitted before animation is started\n     * ```typescript\n     * onAnimation(event: OverlayAnimationEventArgs){\n     *     const onAnimation = event;\n     * }\n     * ```\n     */\n    public onAnimation = new EventEmitter<OverlayAnimationEventArgs>();\n\n    /**\n     * Creates overlay settings with global or container position strategy and preset position settings\n     * @param position Preset position settings. Default position is 'center'\n     * @param outlet The outlet container to attach the overlay to\n     * @returns Non-modal overlay settings based on Global or Container position strategy and the provided position.\n     */\n    public static createAbsoluteOverlaySettings(\n        position?: AbsolutePosition, outlet?: IgxOverlayOutletDirective | ElementRef): OverlaySettings {\n        const positionSettings = this.createAbsolutePositionSettings(position);\n        const strategy = outlet ? new ContainerPositionStrategy(positionSettings) : new GlobalPositionStrategy(positionSettings);\n        const overlaySettings: OverlaySettings = {\n            positionStrategy: strategy,\n            scrollStrategy: new NoOpScrollStrategy(),\n            modal: false,\n            closeOnOutsideClick: true,\n            outlet: outlet\n        };\n        return overlaySettings;\n    }\n\n    /**\n     * Creates overlay settings with auto, connected or elastic position strategy and preset position settings\n     * @param target Attaching target for the component to show\n     * @param strategy The relative position strategy to be applied to the overlay settings. Default is Auto positioning strategy.\n     * @param position Preset position settings. By default the element is positioned below the target, left aligned.\n     * @returns Non-modal overlay settings based on the provided target, strategy and position.\n     */\n    public static createRelativeOverlaySettings(\n        target: Point | HTMLElement,\n        position?: RelativePosition,\n        strategy?: RelativePositionStrategy):\n        OverlaySettings {\n        const positionSettings = this.createRelativePositionSettings(position);\n        const overlaySettings: OverlaySettings = {\n            target: target,\n            positionStrategy: this.createPositionStrategy(strategy, positionSettings),\n            scrollStrategy: new NoOpScrollStrategy(),\n            modal: false,\n            closeOnOutsideClick: true\n        };\n        return overlaySettings;\n    }\n\n    private static createAbsolutePositionSettings(position: AbsolutePosition): PositionSettings {\n        let positionSettings: PositionSettings;\n        switch (position) {\n            case AbsolutePosition.Bottom:\n                positionSettings = {\n                    horizontalDirection: HorizontalAlignment.Center,\n                    verticalDirection: VerticalAlignment.Bottom,\n                    openAnimation: slideInBottom,\n                    closeAnimation: slideOutBottom\n                };\n                break;\n            case AbsolutePosition.Top:\n                positionSettings = {\n                    horizontalDirection: HorizontalAlignment.Center,\n                    verticalDirection: VerticalAlignment.Top,\n                    openAnimation: slideInTop,\n                    closeAnimation: slideOutTop\n                };\n                break;\n            case AbsolutePosition.Center:\n            default:\n                positionSettings = {\n                    horizontalDirection: HorizontalAlignment.Center,\n                    verticalDirection: VerticalAlignment.Middle,\n                    openAnimation: fadeIn,\n                    closeAnimation: fadeOut\n                };\n        }\n        return positionSettings;\n    }\n\n    private static createRelativePositionSettings(position: RelativePosition): PositionSettings {\n        let positionSettings: PositionSettings;\n        switch (position) {\n            case RelativePosition.Above:\n                positionSettings = {\n                    horizontalStartPoint: HorizontalAlignment.Center,\n                    verticalStartPoint: VerticalAlignment.Top,\n                    horizontalDirection: HorizontalAlignment.Center,\n                    verticalDirection: VerticalAlignment.Top,\n                    openAnimation: scaleInVerBottom,\n                    closeAnimation: scaleOutVerBottom,\n                };\n                break;\n            case RelativePosition.Below:\n                positionSettings = {\n                    horizontalStartPoint: HorizontalAlignment.Center,\n                    verticalStartPoint: VerticalAlignment.Bottom,\n                    horizontalDirection: HorizontalAlignment.Center,\n                    verticalDirection: VerticalAlignment.Bottom,\n                    openAnimation: scaleInVerTop,\n                    closeAnimation: scaleOutVerTop\n                };\n                break;\n            case RelativePosition.After:\n                positionSettings = {\n                    horizontalStartPoint: HorizontalAlignment.Right,\n                    verticalStartPoint: VerticalAlignment.Middle,\n                    horizontalDirection: HorizontalAlignment.Right,\n                    verticalDirection: VerticalAlignment.Middle,\n                    openAnimation: scaleInHorLeft,\n                    closeAnimation: scaleOutHorLeft\n                };\n                break;\n            case RelativePosition.Before:\n                positionSettings = {\n                    horizontalStartPoint: HorizontalAlignment.Left,\n                    verticalStartPoint: VerticalAlignment.Middle,\n                    horizontalDirection: HorizontalAlignment.Left,\n                    verticalDirection: VerticalAlignment.Middle,\n                    openAnimation: scaleInHorRight,\n                    closeAnimation: scaleOutHorRight\n                };\n                break;\n            case RelativePosition.Default:\n            default:\n                positionSettings = {\n                    horizontalStartPoint: HorizontalAlignment.Left,\n                    verticalStartPoint: VerticalAlignment.Bottom,\n                    horizontalDirection: HorizontalAlignment.Right,\n                    verticalDirection: VerticalAlignment.Bottom,\n                    openAnimation: scaleInVerTop,\n                    closeAnimation: scaleOutVerTop,\n                };\n                break;\n        }\n        return positionSettings;\n    }\n\n    private static createPositionStrategy(strategy: RelativePositionStrategy, positionSettings: PositionSettings): IPositionStrategy {\n        switch (strategy) {\n            case RelativePositionStrategy.Connected:\n                return new ConnectedPositioningStrategy(positionSettings);\n            case RelativePositionStrategy.Elastic:\n                return new ElasticPositionStrategy(positionSettings);\n            case RelativePositionStrategy.Auto:\n            default:\n                return new AutoPositionStrategy(positionSettings);\n        }\n    }\n\n    constructor(\n        private _factoryResolver: ComponentFactoryResolver,\n        private _appRef: ApplicationRef,\n        private _injector: Injector,\n        private builder: AnimationBuilder,\n        @Inject(DOCUMENT) private document: any,\n        private _zone: NgZone,\n        protected platformUtil: PlatformUtil) {\n        this._document = <Document>this.document;\n    }\n\n    /**\n     * Generates Id. Provide this Id when call `show(id, settings?)` method\n     * @param component ElementRef to show in overlay\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     * @returns Id of the created overlay. Valid until `onClosed` is emitted.\n     */\n    attach(element: ElementRef, settings?: OverlaySettings): string;\n    /**\n     * Generates Id. Provide this Id when call `show(id, settings?)` method\n     * @param component Component Type to show in overlay\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     * @param moduleRef Optional reference to an object containing Injector and ComponentFactoryResolver\n     * that can resolve the component's factory\n     * @returns Id of the created overlay. Valid until `onClosed` is emitted.\n     */\n    attach(component: Type<any>, settings?: OverlaySettings,\n        moduleRef?: Pick<NgModuleRef<any>, 'injector' | 'componentFactoryResolver'>): string;\n    attach(component: ElementRef | Type<any>, settings?: OverlaySettings,\n        moduleRef?: Pick<NgModuleRef<any>, 'injector' | 'componentFactoryResolver'>): string {\n        let info: OverlayInfo;\n        info = this.getOverlayInfo(component, moduleRef);\n\n        //  if there is no info most probably wrong type component was provided and we just go out\n        if (!info) {\n            return null;\n        }\n\n        info.id = (this._componentId++).toString();\n        settings = Object.assign({}, this._defaultSettings, settings);\n        info.settings = settings;\n        this._overlayInfos.push(info);\n        return info.id;\n    }\n\n    /**\n     * Shows the overlay for provided id.\n     * @param id Id to show overlay for\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     */\n    show(id: string, settings?: OverlaySettings): string;\n    /**\n     * Shows the provided component.\n     * @param component ElementRef or Component Type to show in overlay\n     * @param settings Display settings for the overlay, such as positioning and scroll/close behavior.\n     * @returns Id of the created overlay. Valid until `onClosed` is emitted.\n     * ```typescript\n     * this.overlay.show(element, settings);\n     * ```\n     * @deprecated Use `attach(component)` to obtain an Id. Then `show(id, settings?)` with provided Id.\n     */\n    // tslint:disable-next-line:unified-signatures\n    show(component: ElementRef | Type<any>, settings?: OverlaySettings): string;\n    show(compOrId: string | ElementRef | Type<any>, settings?: OverlaySettings): string {\n        let info: OverlayInfo;\n        let id: string;\n        if (typeof compOrId === 'string') {\n            id = compOrId;\n            info = this.getOverlayById(compOrId);\n            if (!info) {\n                console.warn('igxOverlay.show was called with wrong id: ' + compOrId);\n                return null;\n            }\n        } else {\n            warningShown = showMessage(\n                '`show(component, settings?)` overload is deprecated. Use `attach(component)` to obtain an Id.' +\n                'Then `show(id, settings?)` with provided Id.',\n                warningShown);\n            id = (this._componentId++).toString();\n            info = this.getOverlayInfo(compOrId);\n\n            //  if there is no info most probably wrong type component was provided and we just go out\n            if (!info) {\n                return;\n            }\n\n            info.id = id;\n        }\n\n        settings = Object.assign({}, this._defaultSettings, info.settings, settings);\n        info.settings = settings;\n\n        this._show(info);\n        return id;\n    }\n\n    /**\n     * Hides the component with the ID provided as a parameter.\n     * ```typescript\n     * this.overlay.hide(id);\n     * ```\n     */\n    hide(id: string) {\n        this._hide(id);\n    }\n\n    /**\n     * Hides all the components and the overlay.\n     * ```typescript\n     * this.overlay.hideAll();\n     * ```\n     */\n    hideAll() {\n        // since overlays are removed on animation done, que all hides\n        for (let i = this._overlayInfos.length; i--;) {\n            this.hide(this._overlayInfos[i].id);\n        }\n    }\n\n    /**\n     * Repositions the component with ID provided as a parameter.\n     * ```typescript\n     * this.overlay.reposition(id);\n     * ```\n     */\n    reposition(id: string) {\n        const overlayInfo = this.getOverlayById(id);\n        if (!overlayInfo || !overlayInfo.settings) {\n            console.error('Wrong id provided in overlay.reposition method. Id: ' + id);\n            return;\n        }\n\n        const contentElement = overlayInfo.elementRef.nativeElement.parentElement;\n        const contentElementRect = contentElement.getBoundingClientRect();\n        overlayInfo.settings.positionStrategy.position(\n            contentElement,\n            {\n                width: contentElementRect.width,\n                height: contentElementRect.height\n            },\n            this._document,\n            false,\n            overlayInfo.settings.target);\n    }\n\n    /**\n     * Offsets the content along the corresponding axis by the provided amount\n     * ```typescript\n     * this.overlay.setOffset(id, deltaX, deltaY);\n     * ```\n     */\n    setOffset(id: string, deltaX: number, deltaY: number) {\n        const info: OverlayInfo = this.getOverlayById(id);\n\n        if (!info) {\n            return;\n        }\n\n        info.transformX += deltaX;\n        info.transformY += deltaY;\n\n        const transformX = info.transformX;\n        const transformY = info.transformY;\n\n        const translate = `translate(${transformX}px, ${transformY}px)`;\n        info.elementRef.nativeElement.parentElement.style.transform = translate;\n    }\n\n    private _show(info: OverlayInfo) {\n        const eventArgs: OverlayCancelableEventArgs = { id: info.id, componentRef: info.componentRef, cancel: false };\n        this.onOpening.emit(eventArgs);\n        if (eventArgs.cancel) {\n            if (info.componentRef) {\n                this._appRef.detachView(info.componentRef.hostView);\n                info.componentRef.destroy();\n            }\n\n            return;\n        }\n\n        //  if there is no close animation player, or there is one but it is not started yet we are in clear\n        //  opening. Otherwise, if there is close animation player playing animation now we should not setup\n        //  overlay this is already done\n        if (!info.closeAnimationPlayer || (info.closeAnimationPlayer && !info.closeAnimationPlayer.hasStarted())) {\n            const elementRect = info.elementRef.nativeElement.getBoundingClientRect();\n            info.initialSize = { width: elementRect.width, height: elementRect.height };\n            info.hook = this.placeElementHook(info.elementRef.nativeElement);\n\n            this.moveElementToOverlay(info);\n            if (info.componentRef) {\n                info.componentRef.changeDetectorRef.detectChanges();\n            }\n\n            this.onAppended.emit({ id: info.id, componentRef: info.componentRef });\n\n            this.updateSize(info);\n            if (this._overlayInfos.indexOf(info) === -1) {\n                this._overlayInfos.push(info);\n            }\n\n            info.settings.positionStrategy.position(\n                info.elementRef.nativeElement.parentElement,\n                { width: info.initialSize.width, height: info.initialSize.height },\n                document,\n                true,\n                info.settings.target);\n            info.settings.scrollStrategy.initialize(this._document, this, info.id);\n            info.settings.scrollStrategy.attach();\n        }\n\n        this.addOutsideClickListener(info);\n        this.addResizeHandler();\n        this.addCloseOnEscapeListener(info);\n\n        if (info.settings.modal) {\n            const wrapperElement = info.elementRef.nativeElement.parentElement.parentElement;\n            wrapperElement.classList.remove('igx-overlay__wrapper');\n            this.applyAnimationParams(wrapperElement, info.settings.positionStrategy.settings.openAnimation);\n            wrapperElement.classList.add('igx-overlay__wrapper--modal');\n        }\n\n\n        if (info.settings.positionStrategy.settings.openAnimation) {\n            this.playOpenAnimation(info);\n        } else {\n            //  to eliminate flickering show the element just before onOpened fire\n            info.elementRef.nativeElement.parentElement.style.visibility = '';\n            this.onOpened.emit({ id: info.id, componentRef: info.componentRef });\n        }\n    }\n\n    private _hide(id: string, event?: Event) {\n        const info: OverlayInfo = this.getOverlayById(id);\n\n        if (!info) {\n            console.warn('igxOverlay.hide was called with wrong id: ' + id);\n            return;\n        }\n\n        const eventArgs = { id, componentRef: info.componentRef, cancel: false, event };\n        this.onClosing.emit(eventArgs);\n        if (eventArgs.cancel) {\n            return;\n        }\n\n        //  TODO: synchronize where these are added/attached and where removed/detached\n        info.settings.scrollStrategy.detach();\n        this.removeOutsideClickListener(info);\n        this.removeResizeHandler();\n\n        const child: HTMLElement = info.elementRef.nativeElement;\n        if (info.settings.modal) {\n            const parent = child.parentNode.parentNode as HTMLElement;\n            this.applyAnimationParams(parent, info.settings.positionStrategy.settings.closeAnimation);\n            parent.classList.remove('igx-overlay__wrapper--modal');\n            parent.classList.add('igx-overlay__wrapper');\n        }\n\n        if (info.settings.positionStrategy.settings.closeAnimation) {\n            this.playCloseAnimation(info);\n        } else {\n            this.onCloseDone(info);\n        }\n    }\n\n    private getOverlayInfo(component: any, moduleRef?: Pick<NgModuleRef<any>, 'injector' | 'componentFactoryResolver'>): OverlayInfo {\n        const info: OverlayInfo = { ngZone: this._zone, transformX: 0, transformY: 0 };\n        if (component instanceof ElementRef) {\n            info.elementRef = <ElementRef>component;\n        } else {\n            let dynamicFactory: ComponentFactory<{}>;\n            const factoryResolver = moduleRef ? moduleRef.componentFactoryResolver : this._factoryResolver;\n            try {\n                dynamicFactory = factoryResolver.resolveComponentFactory(component);\n            } catch (error) {\n                console.error(error);\n                return null;\n            }\n\n            const injector = moduleRef ? moduleRef.injector : this._injector;\n            const dynamicComponent: ComponentRef<{}> = dynamicFactory.create(injector);\n            this._appRef.attachView(dynamicComponent.hostView);\n\n            // If the element is newly created from a Component, it is wrapped in 'ng-component' tag - we do not want that.\n            const element = dynamicComponent.location.nativeElement;\n            info.elementRef = <ElementRef>{ nativeElement: element };\n            info.componentRef = dynamicComponent;\n        }\n\n        return info;\n    }\n\n    private placeElementHook(element: HTMLElement): HTMLElement {\n        if (!element.parentElement) {\n            return null;\n        }\n\n        const hook = this._document.createElement('div');\n        element.parentElement.insertBefore(hook, element);\n        return hook;\n    }\n\n    private moveElementToOverlay(info: OverlayInfo) {\n        const wrapperElement = this.getWrapperElement();\n        const contentElement = this.getContentElement(wrapperElement, info.settings.modal);\n        this.getOverlayElement(info).appendChild(wrapperElement);\n        contentElement.appendChild(info.elementRef.nativeElement);\n    }\n\n    private getWrapperElement(): HTMLElement {\n        const wrapper: HTMLElement = this._document.createElement('div');\n        wrapper.classList.add('igx-overlay__wrapper');\n        return wrapper;\n    }\n\n    private getContentElement(wrapperElement: HTMLElement, modal: boolean): HTMLElement {\n        const content: HTMLElement = this._document.createElement('div');\n        if (modal) {\n            content.classList.add('igx-overlay__content--modal');\n            content.addEventListener('click', (ev: Event) => {\n                ev.stopPropagation();\n            });\n        } else {\n            content.classList.add('igx-overlay__content');\n        }\n\n        content.addEventListener('scroll', (ev: Event) => {\n            ev.stopPropagation();\n        });\n\n        //  hide element to eliminate flickering. Show the element exactly before animation starts\n        content.style.visibility = 'hidden';\n\n        wrapperElement.appendChild(content);\n        return content;\n    }\n\n    private getOverlayElement(info: OverlayInfo): HTMLElement {\n        if (info.settings.outlet) {\n            return info.settings.outlet.nativeElement || info.settings.outlet;\n        }\n        if (!this._overlayElement) {\n            this._overlayElement = this._document.createElement('div');\n            this._overlayElement.classList.add('igx-overlay');\n            this._document.body.appendChild(this._overlayElement);\n        }\n\n        return this._overlayElement;\n    }\n\n    private updateSize(info: OverlayInfo) {\n        if (info.componentRef) {\n            //  if we are positioning component this is first time it gets visible\n            //  and we can finally get its size\n            info.initialSize = info.elementRef.nativeElement.getBoundingClientRect();\n        }\n\n        // set content div width only if element to show has width\n        if (info.initialSize.width !== 0) {\n            info.elementRef.nativeElement.parentElement.style.width = info.initialSize.width + 'px';\n        }\n    }\n\n    private onCloseDone(info: OverlayInfo) {\n        this.cleanUp(info);\n        this.onClosed.emit({ id: info.id, componentRef: info.componentRef });\n    }\n\n    private cleanUp(info: OverlayInfo) {\n        const child: HTMLElement = info.elementRef.nativeElement;\n        const outlet = this.getOverlayElement(info);\n        if (!outlet.contains(child)) {\n            console.warn('Component with id:' + info.id + ' is already removed!');\n            return;\n        }\n\n        outlet.removeChild(child.parentNode.parentNode);\n        if (info.componentRef) {\n            this._appRef.detachView(info.componentRef.hostView);\n            info.componentRef.destroy();\n        }\n\n        if (info.hook) {\n            info.hook.parentElement.insertBefore(info.elementRef.nativeElement, info.hook);\n            info.hook.parentElement.removeChild(info.hook);\n        }\n\n        const index = this._overlayInfos.indexOf(info);\n        this._overlayInfos.splice(index, 1);\n\n        // this._overlayElement.parentElement check just for tests that manually delete the element\n        if (this._overlayInfos.length === 0 && this._overlayElement && this._overlayElement.parentElement) {\n            this._overlayElement.parentElement.removeChild(this._overlayElement);\n            this._overlayElement = null;\n            this.removeCloseOnEscapeListener();\n        }\n    }\n\n    private playOpenAnimation(info: OverlayInfo) {\n        if (!info.openAnimationPlayer) {\n            const animationBuilder = this.builder.build(info.settings.positionStrategy.settings.openAnimation);\n            info.openAnimationPlayer = animationBuilder.create(info.elementRef.nativeElement);\n\n            //  AnimationPlayer.getPosition returns always 0. To workaround this we are getting inner WebAnimationPlayer\n            //  and then getting the positions from it.\n            //  This is logged in Angular here - https://github.com/angular/angular/issues/18891\n            //  As soon as this is resolved we can remove this hack\n            const innerRenderer = (<any>info.openAnimationPlayer)._renderer;\n            info.openAnimationInnerPlayer = innerRenderer.engine.players[innerRenderer.engine.players.length - 1];\n            info.openAnimationPlayer.onDone(() => {\n                this.onOpened.emit({ id: info.id, componentRef: info.componentRef });\n                if (info.openAnimationPlayer) {\n                    info.openAnimationPlayer.reset();\n                    info.openAnimationPlayer = null;\n                }\n\n                if (info.closeAnimationPlayer && info.closeAnimationPlayer.hasStarted()) {\n                    info.closeAnimationPlayer.reset();\n                }\n            });\n        }\n\n        //  if there is opening animation already started do nothing\n        if (info.openAnimationPlayer.hasStarted()) {\n            return;\n        }\n\n        //  if there is closing animation already started start open animation from where close one has reached\n        //  and remove close animation\n        if (info.closeAnimationPlayer && info.closeAnimationPlayer.hasStarted()) {\n            //  getPosition() returns what part of the animation is passed, e.g. 0.5 if half the animation\n            //  is done, 0.75 if 3/4 of the animation is done. As we need to start next animation from where\n            //  the previous has finished we need the amount up to 1, therefore we are subtracting what\n            //  getPosition() returns from one\n            const position = 1 - info.closeAnimationInnerPlayer.getPosition();\n            info.closeAnimationPlayer.reset();\n            info.closeAnimationPlayer = null;\n            info.openAnimationPlayer.init();\n            info.openAnimationPlayer.setPosition(position);\n        }\n\n        this.onAnimation.emit({ id: info.id, animationPlayer: info.openAnimationPlayer, animationType: 'open' });\n\n        //  to eliminate flickering show the element just before animation start\n        info.elementRef.nativeElement.parentElement.style.visibility = '';\n        info.openAnimationPlayer.play();\n    }\n\n    private playCloseAnimation(info: OverlayInfo) {\n        if (!info.closeAnimationPlayer) {\n            const animationBuilder = this.builder.build(info.settings.positionStrategy.settings.closeAnimation);\n            info.closeAnimationPlayer = animationBuilder.create(info.elementRef.nativeElement);\n\n            //  AnimationPlayer.getPosition returns always 0. To workaround this we are getting inner WebAnimationPlayer\n            //  and then getting the positions from it.\n            //  This is logged in Angular here - https://github.com/angular/angular/issues/18891\n            //  As soon as this is resolved we can remove this hack\n            const innerRenderer = (<any>info.closeAnimationPlayer)._renderer;\n            info.closeAnimationInnerPlayer = innerRenderer.engine.players[innerRenderer.engine.players.length - 1];\n\n            info.closeAnimationPlayer.onDone(() => {\n                if (info.closeAnimationPlayer) {\n                    info.closeAnimationPlayer.reset();\n                    info.closeAnimationPlayer = null;\n                }\n\n                if (info.openAnimationPlayer && info.openAnimationPlayer.hasStarted()) {\n                    info.openAnimationPlayer.reset();\n                }\n                this.onCloseDone(info);\n            });\n        }\n\n        //  if there is closing animation already started do nothing\n        if (info.closeAnimationPlayer.hasStarted()) {\n            return;\n        }\n\n        //  if there is opening animation already started start close animation from where open one has reached\n        //  and remove open animation\n        if (info.openAnimationPlayer && info.openAnimationPlayer.hasStarted()) {\n            //  getPosition() returns what part of the animation is passed, e.g. 0.5 if half the animation\n            //  is done, 0.75 if 3/4 of the animation is done. As we need to start next animation from where\n            //  the previous has finished we need the amount up to 1, therefore we are subtracting what\n            //  getPosition() returns from one\n            const position = 1 - info.openAnimationInnerPlayer.getPosition();\n            info.openAnimationPlayer.reset();\n            info.openAnimationPlayer = null;\n            info.closeAnimationPlayer.init();\n            info.closeAnimationPlayer.setPosition(position);\n        }\n\n        this.onAnimation.emit({ id: info.id, animationPlayer: info.closeAnimationPlayer, animationType: 'close' });\n        info.closeAnimationPlayer.play();\n    }\n\n    //  TODO: check if applyAnimationParams will work with complex animations\n    private applyAnimationParams(wrapperElement: HTMLElement, animationOptions: AnimationReferenceMetadata) {\n        if (!animationOptions) {\n            wrapperElement.style.transitionDuration = '0ms';\n            return;\n        }\n        if (animationOptions.type === AnimationMetadataType.AnimateRef) {\n            animationOptions = (animationOptions as AnimationAnimateRefMetadata).animation;\n        }\n        if (!animationOptions.options || !animationOptions.options.params) {\n            return;\n        }\n        const params = animationOptions.options.params as IAnimationParams;\n        if (params.duration) {\n            wrapperElement.style.transitionDuration = params.duration;\n        }\n        if (params.easing) {\n            wrapperElement.style.transitionTimingFunction = params.easing;\n        }\n    }\n\n    /** @hidden @internal */\n    public getOverlayById(id: string): OverlayInfo {\n        if (!id) {\n            return null;\n        }\n\n        const info = this._overlayInfos.find(e => e.id === id);\n        return info;\n    }\n\n    private documentClicked = (ev: MouseEvent) => {\n        //  if we get to modal overlay just return - we should not close anything under it\n        //  if we get to non-modal overlay do the next:\n        //   1. Check it has close on outside click. If not go on to next overlay;\n        //   2. If true check if click is on the element. If it is on the element we have closed\n        //  already all previous non-modal with close on outside click elements, so we return. If\n        //  not close the overlay and check next\n        for (let i = this._overlayInfos.length; i--;) {\n            const info = this._overlayInfos[i];\n            if (info.settings.modal) {\n                return;\n            }\n            if (info.settings.closeOnOutsideClick) {\n                const target = ev.composed ? ev.composedPath()[0] : ev.target;\n                const overlayElement = info.elementRef.nativeElement;\n                // check if the click is on the overlay element or on an element from the exclusion list, and if so do not close the overlay\n                const excludeElements = info.settings.excludeFromOutsideClick ?\n                    [...info.settings.excludeFromOutsideClick, overlayElement] : [overlayElement];\n                const isInsideClick: boolean = excludeElements.some(e => e.contains(target as Node));\n                if (isInsideClick) {\n                    return;\n                    //  if the click is outside click, but close animation has started do nothing\n                } else if (!(info.closeAnimationPlayer && info.closeAnimationPlayer.hasStarted())) {\n                    this._hide(info.id, ev);\n                }\n            }\n        }\n    }\n\n    private addOutsideClickListener(info: OverlayInfo) {\n        if (info.settings.closeOnOutsideClick) {\n            if (info.settings.modal) {\n                fromEvent(info.elementRef.nativeElement.parentElement.parentElement, 'click')\n                    .pipe(takeUntil(this.destroy$))\n                    .subscribe((e: Event) => this._hide(info.id, e));\n            } else if (\n                //  if all overlays minus closing overlays equals one add the handler\n                this._overlayInfos.filter(x => x.settings.closeOnOutsideClick && !x.settings.modal).length -\n                this._overlayInfos.filter(x => x.settings.closeOnOutsideClick && !x.settings.modal &&\n                    x.closeAnimationPlayer &&\n                    x.closeAnimationPlayer.hasStarted()).length === 1) {\n\n                // click event is not fired on iOS. To make element \"clickable\" we are\n                // setting the cursor to pointer\n                if (this.platformUtil.isIOS && !this._cursorStyleIsSet) {\n                    this._cursorOriginalValue = this._document.body.style.cursor;\n                    this._document.body.style.cursor = 'pointer';\n                    this._cursorStyleIsSet = true;\n                }\n\n                this._document.addEventListener('click', this.documentClicked, true);\n            }\n        }\n    }\n\n    private removeOutsideClickListener(info: OverlayInfo) {\n        if (info.settings.modal === false) {\n            let shouldRemoveClickEventListener = true;\n            this._overlayInfos.forEach(o => {\n                if (o.settings.modal === false && o.id !== info.id) {\n                    shouldRemoveClickEventListener = false;\n                }\n            });\n\n            if (shouldRemoveClickEventListener) {\n                if (this._cursorStyleIsSet) {\n                    this._document.body.style.cursor = this._cursorOriginalValue;\n                    this._cursorOriginalValue = '';\n                    this._cursorStyleIsSet = false;\n                }\n                this._document.removeEventListener('click', this.documentClicked, true);\n            }\n        }\n    }\n\n    private addResizeHandler() {\n        const closingOverlaysCount =\n            this._overlayInfos\n                .filter(o => o.closeAnimationPlayer && o.closeAnimationPlayer.hasStarted())\n                .length;\n        if (this._overlayInfos.length - closingOverlaysCount === 1) {\n            this._document.defaultView.addEventListener('resize', this.repositionAll);\n        }\n    }\n\n    private removeResizeHandler() {\n        const closingOverlaysCount =\n            this._overlayInfos\n                .filter(o => o.closeAnimationPlayer && o.closeAnimationPlayer.hasStarted())\n                .length;\n        if (this._overlayInfos.length - closingOverlaysCount === 1) {\n            this._document.defaultView.removeEventListener('resize', this.repositionAll);\n        }\n    }\n\n    private addCloseOnEscapeListener(info: OverlayInfo) {\n        if (info.settings.closeOnEscape && !this._keyPressEventListener) {\n            this._keyPressEventListener = fromEvent(this._document, 'keydown').pipe(\n                filter((ev: KeyboardEvent) => ev.key === 'Escape' || ev.key === 'Esc')\n            ).subscribe(() => {\n                const targetOverlay = this._overlayInfos[this._overlayInfos.length - 1];\n                if (targetOverlay.settings.closeOnEscape) {\n                    this.hide(targetOverlay.id);\n                }\n            });\n        }\n    }\n\n    private removeCloseOnEscapeListener() {\n        if (this._keyPressEventListener) {\n            this._keyPressEventListener.unsubscribe();\n            this._keyPressEventListener = null;\n        }\n    }\n\n    /** @hidden */\n    public repositionAll = () => {\n        for (let i = this._overlayInfos.length; i--;) {\n            this.reposition(this._overlayInfos[i].id);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\nimport { NgZone } from '@angular/core';\n\n/**\n * On scroll reposition the overlay content.\n */\nexport class AbsoluteScrollStrategy extends ScrollStrategy {\n    private _initialized = false;\n    private _document: Document;\n    private _overlayService: IgxOverlayService;\n    private _id: string;\n    private _scrollContainer: HTMLElement;\n    private _zone: NgZone;\n\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n        this._scrollContainer = scrollContainer;\n    }\n\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) {\n        if (this._initialized) {\n            return;\n        }\n        this._overlayService = overlayService;\n        this._id = id;\n        this._document = document;\n        this._zone = overlayService.getOverlayById(id).ngZone;\n        this._initialized = true;\n    }\n\n    /** @inheritdoc */\n    public attach(): void {\n        if (this._zone) {\n            this._zone.runOutsideAngular(() => {\n                this.addScrollEventListener();\n            });\n        } else {\n            this.addScrollEventListener();\n        }\n    }\n\n    /** @inheritdoc */\n    public detach(): void {\n        if (this._scrollContainer) {\n            this._scrollContainer.removeEventListener('scroll', this.onScroll, true);\n        } else {\n            // Tired of this thing throwing every other time. Fix it ffs!\n            this._document?.removeEventListener('scroll', this.onScroll, true);\n        }\n\n        this._initialized = false;\n    }\n\n    private addScrollEventListener() {\n        if (this._scrollContainer) {\n            this._scrollContainer.addEventListener('scroll', this.onScroll, true);\n        } else {\n            this._document.addEventListener('scroll', this.onScroll, true);\n        }\n    }\n\n    private onScroll = (e: Event) => {\n        const overlayInfo = this._overlayService.getOverlayById(this._id);\n        if (!overlayInfo) {\n            return;\n        }\n        if (!overlayInfo.elementRef.nativeElement.contains(e.target)) {\n            this._overlayService.reposition(this._id);\n        }\n    }\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\n\n/**\n * Prevents scrolling while the overlay content is shown.\n */\nexport class BlockScrollStrategy extends ScrollStrategy {\n    private _initialized = false;\n    private _document: Document;\n    private _initialScrollTop: number;\n    private _initialScrollLeft: number;\n    private _sourceElement: Element;\n\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n    }\n\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) {\n        if (this._initialized) {\n            return;\n        }\n\n        this._document = document;\n        this._initialized = true;\n    }\n\n    /** @inheritdoc */\n    public attach(): void {\n        this._document.addEventListener('scroll', this.onScroll, true);\n    }\n\n    /** @inheritdoc */\n    public detach(): void {\n        this._document.removeEventListener('scroll', this.onScroll, true);\n        this._sourceElement = null;\n        this._initialScrollTop = 0;\n        this._initialScrollLeft = 0;\n        this._initialized = false;\n    }\n\n    private onScroll = (ev: Event) => {\n        ev.preventDefault();\n        if (!this._sourceElement || this._sourceElement !== ev.target) {\n            this._sourceElement = ev.target as Element;\n            this._initialScrollTop = this._sourceElement.scrollTop;\n            this._initialScrollLeft = this._sourceElement.scrollLeft;\n        }\n\n        this._sourceElement.scrollTop = this._initialScrollTop;\n        this._sourceElement.scrollLeft = this._initialScrollLeft;\n    }\n}\n","import { IgxOverlayService } from '../overlay';\nimport { ScrollStrategy } from './scroll-strategy';\n\n/**\n * Uses a tolerance and closes the shown component upon scrolling if the tolerance is exceeded\n */\nexport class CloseScrollStrategy extends ScrollStrategy {\n    private _document: Document;\n    private _overlayService: IgxOverlayService;\n    private _id: string;\n    private initialScrollTop: number;\n    private initialScrollLeft: number;\n    private cumulativeScrollTop: number;\n    private cumulativeScrollLeft: number;\n    private _threshold: number;\n    private _initialized = false;\n    private _sourceElement: Element;\n    private _scrollContainer: HTMLElement;\n\n    constructor(scrollContainer?: HTMLElement) {\n        super(scrollContainer);\n        this._scrollContainer = scrollContainer;\n        this._threshold = 10;\n        this.cumulativeScrollTop = 0;\n        this.cumulativeScrollLeft = 0;\n    }\n\n    /** @inheritdoc */\n    public initialize(document: Document, overlayService: IgxOverlayService, id: string) {\n        if (this._initialized) {\n            return;\n        }\n        this._overlayService = overlayService;\n        this._id = id;\n        this._document = document;\n        this._initialized = true;\n    }\n\n    /** @inheritdoc */\n    public attach(): void {\n        if (this._scrollContainer) {\n            this._scrollContainer.addEventListener('scroll', this.onScroll);\n            this._sourceElement = this._scrollContainer;\n        } else {\n            this._document.addEventListener('scroll', this.onScroll);\n            if (document.documentElement.scrollHeight > document.documentElement.clientHeight) {\n                this._sourceElement = document.documentElement as Element;\n            } else if (document.body.scrollHeight > document.body.clientHeight) {\n                this._sourceElement = document.body as Element;\n            }\n        }\n\n        if (!this._sourceElement) {\n            return;\n        }\n\n        this.cumulativeScrollTop = 0;\n        this.cumulativeScrollLeft = 0;\n        this.initialScrollTop = this._sourceElement.scrollTop;\n        this.initialScrollLeft = this._sourceElement.scrollLeft;\n    }\n\n    /** @inheritdoc */\n    public detach(): void {\n        // TODO: check why event listener removes only on first call and remains on each next!!!\n        if (this._scrollContainer) {\n            this._scrollContainer.removeEventListener('scroll', this.onScroll);\n        } else {\n            this._document.removeEventListener('scroll', this.onScroll);\n        }\n        this._sourceElement = null;\n        this.cumulativeScrollTop = 0;\n        this.cumulativeScrollLeft = 0;\n        this.initialScrollTop = 0;\n        this.initialScrollLeft = 0;\n        this._initialized = false;\n    }\n\n    private onScroll = (ev: Event) => {\n        if (!this._sourceElement) {\n            return;\n        }\n\n        this.cumulativeScrollTop += this._sourceElement.scrollTop;\n        this.cumulativeScrollLeft += this._sourceElement.scrollLeft;\n\n        if (Math.abs(this.cumulativeScrollTop - this.initialScrollTop) > this._threshold ||\n            Math.abs(this.cumulativeScrollLeft - this.initialScrollLeft) > this._threshold) {\n            this._document.removeEventListener('scroll', this.onScroll, true);\n            this._overlayService.hide(this._id);\n        }\n    }\n}\n","import { TransactionService, Transaction, State, StateUpdateEvent } from './transaction';\nimport { EventEmitter, Injectable } from '@angular/core';\nimport { isObject, mergeObjects, cloneValue } from '../../core/utils';\n\n@Injectable()\nexport class IgxBaseTransactionService<T extends Transaction, S extends State> implements TransactionService<T, S> {\n    protected _isPending = false;\n    protected _pendingTransactions: T[] = [];\n    protected _pendingStates: Map<any, S> = new Map();\n\n    /**\n     * @inheritdoc\n     */\n    public get canRedo(): boolean {\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public get canUndo(): boolean {\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public get enabled(): boolean {\n        return this._isPending;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public onStateUpdate = new EventEmitter<StateUpdateEvent>();\n\n    /**\n     * @inheritdoc\n     */\n    public add(transaction: T, recordRef?: any): void {\n        if (this._isPending) {\n            this.updateState(this._pendingStates, transaction, recordRef);\n            this._pendingTransactions.push(transaction);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getTransactionLog(id?: any): T[] { return []; }\n\n    /**\n     * @inheritdoc\n     */\n    undo(): void { }\n\n    /**\n     * @inheritdoc\n     */\n    redo(): void { }\n\n    /**\n     * @inheritdoc\n     */\n    getAggregatedChanges(mergeChanges: boolean): T[] {\n        const result: T[] = [];\n        this._pendingStates.forEach((state: S, key: any) => {\n            const value = mergeChanges ? this.getAggregatedValue(key, mergeChanges) : state.value;\n            result.push({ id: key, newValue: value, type: state.type } as T);\n        });\n        return result;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getState(id: any): S {\n        return this._pendingStates.get(id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getAggregatedValue(id: any, mergeChanges: boolean): any {\n        const state = this._pendingStates.get(id);\n        if (!state) {\n            return null;\n        }\n        if (mergeChanges) {\n            return this.updateValue(state);\n        }\n        return state.value;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    commit(data: any[], id?: any): void { }\n\n    /**\n     * @inheritdoc\n     */\n    clear(id?: any): void {\n        this._pendingStates.clear();\n        this._pendingTransactions = [];\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public startPending(): void {\n        this._isPending = true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public endPending(commit: boolean): void {\n        this._isPending = false;\n        this._pendingStates.clear();\n        this._pendingTransactions = [];\n    }\n\n\n    /**\n     * Updates the provided states collection according to passed transaction and recordRef\n     * @param states States collection to apply the update to\n     * @param transaction Transaction to apply to the current state\n     * @param recordRef Reference to the value of the record in data source, if any, where transaction should be applied\n     */\n    protected updateState(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        let state = states.get(transaction.id);\n        if (state) {\n            if (isObject(state.value)) {\n                mergeObjects(state.value, transaction.newValue);\n            } else {\n                state.value = transaction.newValue;\n            }\n        } else {\n            state = { value: cloneValue(transaction.newValue), recordRef: recordRef, type: transaction.type } as S;\n            states.set(transaction.id, state);\n        }\n    }\n\n    /**\n     * Updates the recordRef of the provided state with all the changes in the state. Accepts primitive and object value types\n     * @param state State to update value for\n     * @returns updated value including all the changes in provided state\n     */\n    protected updateValue(state: S) {\n        return this.mergeValues(state.recordRef, state.value);\n    }\n\n    /**\n     * Merges second values in first value and the result in empty object. If values are primitive type\n     * returns second value if exists, or first value.\n     * @param first Value to merge into\n     * @param second Value to merge\n     */\n    protected mergeValues<U>(first: U, second: U): U {\n        if (isObject(first) || isObject(second)) {\n            return mergeObjects(cloneValue(first), second);\n        } else {\n            return second ? second : first;\n        }\n    }\n}\n","import { Transaction, State, TransactionType, StateUpdateEvent, TransactionEventOrigin, Action } from './transaction';\nimport { IgxBaseTransactionService } from './base-transaction';\nimport { EventEmitter, Injectable } from '@angular/core';\nimport { isObject, mergeObjects, cloneValue } from '../../core/utils';\n\n@Injectable()\nexport class IgxTransactionService<T extends Transaction, S extends State> extends IgxBaseTransactionService<T, S> {\n    protected _transactions: T[] = [];\n    protected _redoStack: Action<T>[][] = [];\n    protected _undoStack: Action<T>[][] = [];\n    protected _states: Map<any, S> = new Map();\n\n    /**\n     * @inheritdoc\n     */\n    get canUndo(): boolean {\n        return this._undoStack.length > 0;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    get canRedo(): boolean {\n        return this._redoStack.length > 0;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public onStateUpdate = new EventEmitter<StateUpdateEvent>();\n\n    /**\n     * @inheritdoc\n     */\n    public add(transaction: T, recordRef?: any): void {\n        const states = this._isPending ? this._pendingStates : this._states;\n        this.verifyAddedTransaction(states, transaction, recordRef);\n        this.addTransaction(transaction, states, recordRef);\n    }\n\n    protected addTransaction(transaction: T, states: Map<any, S>, recordRef?: any) {\n        this.updateState(states, transaction, recordRef);\n\n        const transactions = this._isPending ? this._pendingTransactions : this._transactions;\n        transactions.push(transaction);\n\n        if (!this._isPending) {\n            const actions = [{ transaction, recordRef }];\n            this._undoStack.push(actions);\n            this._redoStack = [];\n            this.onStateUpdate.emit({ origin: TransactionEventOrigin.ADD, actions });\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getTransactionLog(id?: any): T[] {\n        if (id !== undefined) {\n            return this._transactions.filter(t => t.id === id);\n        }\n        return [...this._transactions];\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getAggregatedChanges(mergeChanges: boolean): T[] {\n        const result: T[] = [];\n        this._states.forEach((state: S, key: any) => {\n            const value = mergeChanges ? this.mergeValues(state.recordRef, state.value) : state.value;\n            result.push({ id: key, newValue: value, type: state.type } as T);\n        });\n        return result;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getState(id: any, pending: boolean = false): S {\n        return pending ? this._pendingStates.get(id) : this._states.get(id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public get enabled(): boolean {\n        return true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public getAggregatedValue(id: any, mergeChanges: boolean): any {\n        const state = this._states.get(id);\n        const pendingState = super.getState(id);\n\n        //  if there is no state and there is no pending state return null\n        if (!state && !pendingState) {\n            return null;\n        }\n\n        const pendingChange = super.getAggregatedValue(id, false);\n        const change = state && state.value;\n        let aggregatedValue = this.mergeValues(change, pendingChange);\n        if (mergeChanges) {\n            const originalValue = state ? state.recordRef : pendingState.recordRef;\n            aggregatedValue = this.mergeValues(originalValue, aggregatedValue);\n        }\n        return aggregatedValue;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public endPending(commit: boolean): void {\n        this._isPending = false;\n        if (commit) {\n            const actions: Action<T>[] = [];\n            // don't use addTransaction due to custom undo handling\n            for (const transaction of this._pendingTransactions) {\n                const pendingState = this._pendingStates.get(transaction.id);\n                this._transactions.push(transaction);\n                this.updateState(this._states, transaction, pendingState.recordRef);\n                actions.push({ transaction, recordRef: pendingState.recordRef });\n            }\n\n            this._undoStack.push(actions);\n            this._redoStack = [];\n\n            this.onStateUpdate.emit({ origin: TransactionEventOrigin.END, actions});\n        }\n        super.endPending(commit);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public commit(data: any[], id?: any): void {\n        if (id !== undefined) {\n            const state = this.getState(id);\n            if (state) {\n                this.updateRecord(data, state);\n            }\n        } else {\n            this._states.forEach((s: S) => {\n                this.updateRecord(data, s);\n            });\n        }\n        this.clear(id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public clear(id?: any): void {\n        if (id !== undefined) {\n            this._transactions = this._transactions.filter(t => t.id !== id);\n            this._states.delete(id);\n            //  Undo stack is an array of actions. Each action is array of transaction like objects\n            //  We are going trough all the actions. For each action we are filtering out transactions\n            //  with provided id. Finally if any action ends up as empty array we are removing it from\n            //  undo stack\n            this._undoStack = this._undoStack.map(a => a.filter(t => t.transaction.id !== id)).filter(a => a.length > 0);\n        } else {\n            this._transactions = [];\n            this._states.clear();\n            this._undoStack = [];\n        }\n        this._redoStack = [];\n        this.onStateUpdate.emit({ origin: TransactionEventOrigin.CLEAR, actions: []});\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public undo(): void {\n        if (this._undoStack.length <= 0) {\n            return;\n        }\n\n        const lastActions: Action<T>[] = this._undoStack.pop();\n        this._transactions.splice(this._transactions.length - lastActions.length);\n        this._redoStack.push(lastActions);\n\n        this._states.clear();\n        for (const currentActions of this._undoStack) {\n            for (const transaction of currentActions) {\n                this.updateState(this._states, transaction.transaction, transaction.recordRef);\n            }\n        }\n\n        this.onStateUpdate.emit({ origin: TransactionEventOrigin.UNDO, actions: lastActions });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public redo(): void {\n        if (this._redoStack.length > 0) {\n            let actions: Action<T>[];\n            actions = this._redoStack.pop();\n            for (const action of actions) {\n                this.updateState(this._states, action.transaction, action.recordRef);\n                this._transactions.push(action.transaction);\n            }\n\n            this._undoStack.push(actions);\n            this.onStateUpdate.emit({ origin: TransactionEventOrigin.REDO, actions });\n        }\n    }\n\n    /**\n     * Verifies if the passed transaction is correct. If not throws an exception.\n     * @param transaction Transaction to be verified\n     */\n    protected verifyAddedTransaction(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        const state = states.get(transaction.id);\n        switch (transaction.type) {\n            case TransactionType.ADD:\n                if (state) {\n                    //  cannot add same item twice\n                    throw new Error(`Cannot add this transaction. Transaction with id: ${transaction.id} has been already added.`);\n                }\n                break;\n            case TransactionType.DELETE:\n            case TransactionType.UPDATE:\n                if (state && state.type === TransactionType.DELETE) {\n                    //  cannot delete or update deleted items\n                    throw new Error(`Cannot add this transaction. Transaction with id: ${transaction.id} has been already deleted.`);\n                }\n                if (!state && !recordRef && !this._isPending) {\n                    //  cannot initially add transaction or delete item with no recordRef\n                    throw new Error(`Cannot add this transaction. This is first transaction of type ${transaction.type} ` +\n                        `for id ${transaction.id}. For first transaction of this type recordRef is mandatory.`);\n                }\n                break;\n        }\n    }\n\n    /**\n     * Updates the provided states collection according to passed transaction and recordRef\n     * @param states States collection to apply the update to\n     * @param transaction Transaction to apply to the current state\n     * @param recordRef Reference to the value of the record in data source, if any, where transaction should be applied\n     */\n    protected updateState(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        let state = states.get(transaction.id);\n        //  if TransactionType is ADD simply add transaction to states;\n        //  if TransactionType is DELETE:\n        //    - if there is state with this id of type ADD remove it from the states;\n        //    - if there is state with this id of type UPDATE change its type to DELETE;\n        //    - if there is no state with this id add transaction to states;\n        //  if TransactionType is UPDATE:\n        //    - if there is state with this id of type ADD merge new value and state recordRef into state new value\n        //    - if there is state with this id of type UPDATE merge new value into state new value\n        //    - if there is state with this id and state type is DELETE change its type to UPDATE\n        //    - if there is no state with this id add transaction to states;\n        if (state) {\n            switch (transaction.type) {\n                case TransactionType.DELETE:\n                    if (state.type === TransactionType.ADD) {\n                        states.delete(transaction.id);\n                    } else if (state.type === TransactionType.UPDATE) {\n                        state.value = transaction.newValue;\n                        state.type = TransactionType.DELETE;\n                    }\n                    break;\n                case TransactionType.UPDATE:\n                    if (isObject(state.value)) {\n                        if (state.type === TransactionType.ADD) {\n                            state.value = this.mergeValues(state.value, transaction.newValue);\n                        }\n                        if (state.type === TransactionType.UPDATE) {\n                            mergeObjects(state.value, transaction.newValue);\n                        }\n                    } else {\n                        state.value = transaction.newValue;\n                    }\n            }\n        } else {\n            state = { value: cloneValue(transaction.newValue), recordRef: recordRef, type: transaction.type } as S;\n            states.set(transaction.id, state);\n        }\n\n        //  should not clean pending state. This will happen automatically on endPending call\n        if (!this._isPending) {\n            this.cleanState(transaction.id, states);\n        }\n    }\n\n    /**\n     * Compares the state with recordRef and clears all duplicated values. If any state ends as\n     * empty object removes it from states.\n     * @param state State to clean\n     */\n    protected cleanState(id: any, states: Map<any, S>): void {\n        const state = states.get(id);\n        //  do nothing if\n        //  there is no state, or\n        //  there is no state value (e.g. DELETED transaction), or\n        //  there is no recordRef (e.g. ADDED transaction)\n        if (state && state.value && state.recordRef) {\n            //  if state's value is object compare each key with the ones in recordRef\n            //  if values in any key are the same delete it from state's value\n            //  if state's value is not object, simply compare with recordRef and remove\n            //  the state if they are equal\n            if (isObject(state.recordRef)) {\n                for (const key of Object.keys(state.value)) {\n                    if (JSON.stringify(state.recordRef[key]) === JSON.stringify(state.value[key])) {\n                        delete state.value[key];\n                    }\n                }\n\n                //  if state's value is empty remove the state from the states, only if state is not DELETE type\n                if (state.type !== TransactionType.DELETE && Object.keys(state.value).length === 0) {\n                    states.delete(id);\n                }\n            } else {\n                if (state.recordRef === state.value) {\n                    states.delete(id);\n                }\n            }\n        }\n    }\n\n    /**\n     * Updates state related record in the provided data\n     * @param data Data source to update\n     * @param state State to update data from\n     */\n    protected updateRecord(data: any[], state: S) {\n        const index = data.findIndex(i => JSON.stringify(i) === JSON.stringify(state.recordRef || {}));\n        switch (state.type) {\n            case TransactionType.ADD:\n                data.push(state.value);\n                break;\n            case TransactionType.DELETE:\n                if (0 <= index && index < data.length) {\n                    data.splice(index, 1);\n                }\n                break;\n            case TransactionType.UPDATE:\n                if (0 <= index && index < data.length) {\n                    data[index] = this.updateValue(state);\n                }\n                break;\n        }\n    }\n}\n","import { HierarchicalTransaction, HierarchicalState, TransactionType } from './transaction';\nimport { Injectable } from '@angular/core';\nimport { IgxTransactionService } from './igx-transaction';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneValue } from '../../core/utils';\nimport { HierarchicalTransactionService } from './hierarchical-transaction';\n\n/** @experimental @hidden */\n@Injectable()\nexport class IgxHierarchicalTransactionService<T extends HierarchicalTransaction, S extends HierarchicalState>\n    extends IgxTransactionService<T, S> implements HierarchicalTransactionService<T, S> {\n\n    public getAggregatedChanges(mergeChanges: boolean): T[] {\n        const result: T[] = [];\n        this._states.forEach((state: S, key: any) => {\n            const value = mergeChanges ? this.mergeValues(state.recordRef, state.value) : cloneValue(state.value);\n            this.clearArraysFromObject(value);\n            result.push({ id: key, path: state.path, newValue: value, type: state.type } as T);\n        });\n        return result;\n    }\n\n    protected updateState(states: Map<any, S>, transaction: T, recordRef?: any): void {\n        super.updateState(states, transaction, recordRef);\n\n        //  if transaction has no path, e.g. flat data source, get out\n        if (!transaction.path) {\n            return;\n        }\n\n        const currentState = states.get(transaction.id);\n        if (currentState) {\n            currentState.path = transaction.path;\n        }\n\n        //  if transaction has path, Hierarchical data source, and it is DELETE\n        //  type transaction for all child rows remove ADD states and update\n        //  transaction type and value of UPDATE states\n        if (transaction.type === TransactionType.DELETE) {\n            states.forEach((v: S, k: any) => {\n                if (v.path && v.path.indexOf(transaction.id) !== -1) {\n                    switch (v.type) {\n                        case TransactionType.ADD:\n                            states.delete(k);\n                            break;\n                        case TransactionType.UPDATE:\n                            states.get(k).type = TransactionType.DELETE;\n                            states.get(k).value = null;\n                    }\n                }\n            });\n        }\n    }\n\n    public commit(data: any[], primaryKeyOrId?: any, childDataKey?: any, id?: any): void {\n        if (childDataKey !== undefined) {\n            let transactions = this.getAggregatedChanges(true);\n            if (id !== undefined) {\n                transactions = transactions.filter(t => t.id === id);\n            }\n            DataUtil.mergeHierarchicalTransactions(data, transactions, childDataKey, primaryKeyOrId, true);\n            this.clear(id);\n        } else {\n            super.commit(data, primaryKeyOrId);\n        }\n    }\n\n    //  TODO: remove this method. Force cloning to strip child arrays when needed instead\n    private clearArraysFromObject(obj: {}) {\n        if (obj) {\n            for (const prop of Object.keys(obj)) {\n                if (Array.isArray(obj[prop])) {\n                    delete obj[prop];\n                }\n            }\n        }\n    }\n}\n\n","import {\n    ChangeDetectorRef,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    Inject\n} from '@angular/core';\nimport { IgxNavigationService, IToggleView } from '../../core/navigation';\nimport { IgxOverlayService } from '../../services/overlay/overlay';\nimport {\n    AbsoluteScrollStrategy,\n    ConnectedPositioningStrategy,\n    IPositionStrategy,\n    OverlayEventArgs,\n    OverlaySettings\n} from '../../services/public_api';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { Subscription, Subject, MonoTypeOperatorFunction } from 'rxjs';\nimport { OverlayClosingEventArgs } from '../../services/overlay/utilities';\nimport { CancelableBrowserEventArgs, IBaseEventArgs } from '../../core/utils';\n\nexport interface ToggleViewEventArgs extends IBaseEventArgs {\n    /** Id of the toggle view */\n    id: string;\n}\n\nexport interface ToggleViewCancelableEventArgs extends ToggleViewEventArgs, CancelableBrowserEventArgs { }\n\n@Directive({\n    exportAs: 'toggle',\n    selector: '[igxToggle]'\n})\nexport class IgxToggleDirective implements IToggleView, OnInit, OnDestroy {\n    protected _overlayId: string;\n    private destroy$ = new Subject<boolean>();\n    private _overlaySubFilter: [MonoTypeOperatorFunction<OverlayEventArgs>, MonoTypeOperatorFunction<OverlayEventArgs>] = [\n        filter(x => x.id === this._overlayId),\n        takeUntil(this.destroy$)\n    ];\n    private _overlayOpenedSub: Subscription;\n    private _overlayClosingSub: Subscription;\n    private _overlayClosedSub: Subscription;\n    private _overlayAppendedSub: Subscription;\n\n    /**\n     * Emits an event after the toggle container is opened.\n     *\n     * ```typescript\n     * onToggleOpened(event) {\n     *    alert(\"Toggle opened!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onOpened)='onToggleOpened($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<ToggleViewEventArgs>();\n\n    /**\n     * Emits an event before the toggle container is opened.\n     *\n     * ```typescript\n     * onToggleOpening(event) {\n     *  alert(\"Toggle opening!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onOpening)='onToggleOpening($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<ToggleViewCancelableEventArgs>();\n\n    /**\n     * Emits an event after the toggle container is closed.\n     *\n     * ```typescript\n     * onToggleClosed(event) {\n     *  alert(\"Toggle closed!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onClosed)='onToggleClosed($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<ToggleViewEventArgs>();\n\n    /**\n     * Emits an event before the toggle container is closed.\n     *\n     * ```typescript\n     * onToggleClosing(event) {\n     *  alert(\"Toggle closing!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *  igxToggle\n     *  (onClosing)='onToggleClosing($event)'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<ToggleViewCancelableEventArgs>();\n\n    /**\n     * Emits an event after the toggle element is appended to the overlay container.\n     *\n     * ```typescript\n     * onAppended() {\n     *  alert(\"Content appended!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <div\n     *   igxToggle\n     *   (onAppended)='onToggleAppended()'>\n     * </div>\n     * ```\n     */\n    @Output()\n    public onAppended = new EventEmitter<ToggleViewEventArgs>();\n\n    private _collapsed = true;\n    /**\n     * @hidden\n     */\n    public get collapsed(): boolean {\n        return this._collapsed;\n    }\n\n    /**\n     * Identifier which is registered into `IgxNavigationService`\n     *\n     * ```typescript\n     * let myToggleId = this.toggle.id;\n     * ```\n     */\n    @Input()\n    public id: string;\n\n    /**\n     * @hidden\n     */\n    public get element(): HTMLElement {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-toggle--hidden')\n    @HostBinding('attr.aria-hidden')\n    public get hiddenClass() {\n        return this.collapsed;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-toggle')\n    public get defaultClass() {\n        return !this.collapsed;\n    }\n\n    /**\n     * @hidden\n     */\n    constructor(\n        private elementRef: ElementRef,\n        private cdr: ChangeDetectorRef,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        @Optional() private navigationService: IgxNavigationService) {\n    }\n\n    /**\n     * Opens the toggle.\n     *\n     * ```typescript\n     * this.myToggle.open();\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings) {\n        //  if there is open animation do nothing\n        //  if toggle is not collapsed and there is no close animation do nothing\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasOpenAnimation = info ? info.openAnimationPlayer : false;\n        const hasCloseAnimation = info ? info.closeAnimationPlayer : false;\n        if (hasOpenAnimation || !(this._collapsed || hasCloseAnimation)) {\n            return;\n        }\n\n        if (!info) {\n            this._overlayId = this.overlayService.attach(this.elementRef, overlaySettings);\n        }\n\n        this._collapsed = false;\n        this.cdr.detectChanges();\n\n        const openEventArgs: ToggleViewCancelableEventArgs = { cancel: false, owner: this, id: this._overlayId };\n        this.onOpening.emit(openEventArgs);\n        if (openEventArgs.cancel) {\n            this._collapsed = true;\n            this.cdr.detectChanges();\n            return;\n        }\n\n        this.unsubscribe();\n\n        this._overlayAppendedSub = this.overlayService.onAppended.pipe(...this._overlaySubFilter).subscribe(() => {\n            const appendedEventArgs: ToggleViewEventArgs = { owner: this, id: this._overlayId };\n            this.onAppended.emit(appendedEventArgs);\n        });\n\n        this._overlayOpenedSub = this.overlayService.onOpened.pipe(...this._overlaySubFilter).subscribe(() => {\n            const openedEventArgs: ToggleViewEventArgs = { owner: this, id: this._overlayId };\n            this.onOpened.emit(openedEventArgs);\n        });\n\n        this._overlayClosingSub = this.overlayService\n            .onClosing\n            .pipe(...this._overlaySubFilter)\n            .subscribe((e: OverlayClosingEventArgs) => {\n                const eventArgs: ToggleViewCancelableEventArgs = { cancel: false, event: e.event, owner: this, id: this._overlayId };\n                this.onClosing.emit(eventArgs);\n                e.cancel = eventArgs.cancel;\n\n                //  in case event is not canceled this will close the toggle and we need to unsubscribe.\n                //  Otherwise if for some reason, e.g. close on outside click, close() gets called before\n                //  onClosed was fired we will end with calling onClosing more than once\n                if (!e.cancel) {\n                    this.clearSubscription(this._overlayClosingSub);\n                }\n            });\n\n        this._overlayClosedSub = this.overlayService.onClosed\n            .pipe(...this._overlaySubFilter)\n            .subscribe(this.overlayClosed);\n\n        this.overlayService.show(this._overlayId, overlaySettings);\n    }\n\n    /**\n     * Closes the toggle.\n     *\n     * ```typescript\n     * this.myToggle.close();\n     * ```\n     */\n    public close() {\n        //  if toggle is collapsed do nothing\n        //  if there is close animation do nothing, toggle will close anyway\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasCloseAnimation = info ? info.closeAnimationPlayer : false;\n        if (this._collapsed || hasCloseAnimation) {\n            return;\n        }\n\n        this.overlayService.hide(this._overlayId);\n    }\n\n    /**\n     * Opens or closes the toggle, depending on its current state.\n     *\n     * ```typescript\n     * this.myToggle.toggle();\n     * ```\n     */\n    public toggle(overlaySettings?: OverlaySettings) {\n        //  if toggle is collapsed call open\n        //  if there is close animation call open\n        if (this.collapsed || this.isClosing) {\n            this.open(overlaySettings);\n        } else {\n            this.close();\n        }\n    }\n\n    /** @hidden @internal */\n    public get isClosing() {\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        return info ? info.closeAnimationPlayer : false;\n    }\n\n    /**\n     * Returns the id of the overlay the content is rendered in.\n     * ```typescript\n     * this.myToggle.overlayId;\n     * ```\n     */\n    public get overlayId() {\n        return this._overlayId;\n    }\n\n    /**\n     * Repositions the toggle.\n     * ```typescript\n     * this.myToggle.reposition();\n     * ```\n     */\n    public reposition() {\n        this.overlayService.reposition(this._overlayId);\n    }\n\n    /**\n     * Offsets the content along the corresponding axis by the provided amount\n     */\n    setOffset(deltaX: number, deltaY: number) {\n        this.overlayService.setOffset(this._overlayId, deltaX, deltaY);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        if (this.navigationService && this.id) {\n            this.navigationService.add(this.id, this);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        if (this.navigationService && this.id) {\n            this.navigationService.remove(this.id);\n        }\n        if (!this.collapsed && this._overlayId) {\n            this.overlayService.hide(this._overlayId);\n        }\n        this.unsubscribe();\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    private overlayClosed = () => {\n        this._collapsed = true;\n        this.cdr.detectChanges();\n        delete this._overlayId;\n        this.unsubscribe();\n        const closedEventArgs: ToggleViewEventArgs = { owner: this, id: this._overlayId };\n        this.onClosed.emit(closedEventArgs);\n    }\n\n    private unsubscribe() {\n        this.clearSubscription(this._overlayOpenedSub);\n        this.clearSubscription(this._overlayClosingSub);\n        this.clearSubscription(this._overlayClosedSub);\n        this.clearSubscription(this._overlayAppendedSub);\n    }\n\n    private clearSubscription(subscription: Subscription) {\n        if (subscription && !subscription.closed) {\n            subscription.unsubscribe();\n        }\n    }\n}\n\n@Directive({\n    exportAs: 'toggle-action',\n    selector: '[igxToggleAction]'\n})\nexport class IgxToggleActionDirective implements OnInit {\n    protected _overlayDefaults: OverlaySettings;\n\n    /**\n     * Provide settings that control the toggle overlay positioning, interaction and scroll behavior.\n     * ```typescript\n     * const settings: OverlaySettings = {\n     *      closeOnOutsideClick: false,\n     *      modal: false\n     *  }\n     * ```\n     * ---\n     * ```html\n     * <!--set-->\n     * <div igxToggleAction [overlaySettings]=\"settings\"></div>\n     * ```\n     */\n    @Input()\n    public overlaySettings: OverlaySettings;\n\n    /**\n     * Determines where the toggle element overlay should be attached.\n     *\n     * ```html\n     * <!--set-->\n     * <div igxToggleAction [igxToggleOutlet]=\"outlet\"></div>\n     * ```\n     * Where `outlet` in an instance of `IgxOverlayOutletDirective` or an `ElementRef`\n     */\n    @Input('igxToggleOutlet')\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n     * @hidden\n     */\n    @Input('igxToggleAction')\n    set target(target: any) {\n        if (target !== null && target !== '') {\n            this._target = target;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get target(): any {\n        if (typeof this._target === 'string') {\n            return this.navigationService.get(this._target);\n        }\n        return this._target;\n    }\n\n    protected _target: IToggleView | string;\n\n    constructor(private element: ElementRef, @Optional() private navigationService: IgxNavigationService) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        const targetElement = this.element.nativeElement;\n        this._overlayDefaults = {\n            target: targetElement,\n            positionStrategy: new ConnectedPositioningStrategy(),\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            closeOnOutsideClick: true,\n            modal: false,\n            excludeFromOutsideClick: [targetElement as HTMLElement]\n        };\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click')\n    public onClick() {\n        if (this.outlet) {\n            this._overlayDefaults.outlet = this.outlet;\n        }\n\n        const clonedSettings = Object.assign({}, this._overlayDefaults, this.overlaySettings);\n        this.updateOverlaySettings(clonedSettings);\n        this.target.toggle(clonedSettings);\n    }\n\n    /**\n     * Updates provided overlay settings\n     * @param settings settings to update\n     * @returns returns updated copy of provided overlay settings\n     */\n    protected updateOverlaySettings(settings: OverlaySettings): OverlaySettings {\n        if (settings && settings.positionStrategy) {\n            const positionStrategyClone: IPositionStrategy = settings.positionStrategy.clone();\n            settings.target = this.element.nativeElement;\n            settings.positionStrategy = positionStrategyClone;\n        }\n\n        return settings;\n    }\n}\n\n/**\n * Mark an element as an igxOverlay outlet container.\n * Directive instance is exported as `overlay-outlet` to be assigned to templates variables:\n * ```html\n * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n * ```\n */\n@Directive({\n    exportAs: 'overlay-outlet',\n    selector: '[igxOverlayOutlet]'\n})\nexport class IgxOverlayOutletDirective {\n    constructor(public element: ElementRef) { }\n\n    /** @hidden */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxToggleDirective, IgxToggleActionDirective, IgxOverlayOutletDirective],\n    exports: [IgxToggleDirective, IgxToggleActionDirective, IgxOverlayOutletDirective],\n    providers: [IgxNavigationService]\n})\nexport class IgxToggleModule { }\n","import { CancelableEventArgs, CancelableBrowserEventArgs, IBaseEventArgs, mkenum } from '../core/utils';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\nimport { IToggleView } from '../core/navigation/IToggleView';\nimport { EventEmitter, InjectionToken } from '@angular/core';\nimport { DisplayDensityBase } from '../core/density';\n\n/** @hidden */\nexport enum Navigate {\n    Up = -1,\n    Down = 1\n}\n\n/** Key actions that have designated handlers in IgxDropDownComponent */\nexport const DropDownActionKey = mkenum({\n    ESCAPE: 'escape',\n    ENTER: 'enter',\n    SPACE: 'space'\n});\nexport type DropDownActionKey = (typeof DropDownActionKey)[keyof typeof DropDownActionKey];\n\n/**\n * Interface that encapsulates onSelection event arguments - old selection, new selection and cancel selection.\n * @export\n */\nexport interface ISelectionEventArgs extends CancelableEventArgs, IBaseEventArgs {\n    oldSelection: IgxDropDownItemBaseDirective;\n    newSelection: IgxDropDownItemBaseDirective;\n}\n\n/**\n * Interface for an instance of IgxDropDownNavigationDirective\n * @export\n */\nexport interface IDropDownNavigationDirective {\n    target: any;\n    handleKeyDown(event: KeyboardEvent): void;\n    onArrowDownKeyDown(event?: KeyboardEvent): void;\n    onArrowUpKeyDown(event?: KeyboardEvent): void;\n    onEndKeyDown(event?: KeyboardEvent): void;\n    onHomeKeyDown(event?: KeyboardEvent): void;\n}\n\nexport const IGX_DROPDOWN_BASE = new InjectionToken<IDropDownBase>('IgxDropDownBaseToken');\n\n/**\n * @hidden\n */\nexport interface IDropDownList extends DisplayDensityBase {\n    onSelection: EventEmitter<ISelectionEventArgs>;\n    width: string;\n    height: string;\n    id: string;\n    maxHeight: string;\n    collapsed: boolean;\n    items: IgxDropDownItemBaseDirective[];\n    headers: IgxDropDownItemBaseDirective[];\n    focusedItem: IgxDropDownItemBaseDirective;\n    navigateFirst(): void;\n    navigateLast(): void;\n    navigateNext(): void;\n    navigatePrev(): void;\n    navigateItem(newIndex: number, direction?: Navigate): void;\n    onItemActionKey(key: DropDownActionKey, event?: Event): void;\n}\n\n/**\n * @hidden\n */\nexport interface IDropDownBase extends IDropDownList, IToggleView {\n    selectedItem: any;\n    onOpening: EventEmitter<CancelableEventArgs>;\n    onOpened: EventEmitter<void>;\n    onClosing: EventEmitter<CancelableBrowserEventArgs>;\n    onClosed: EventEmitter<void>;\n    allowItemsFocus?: boolean;\n    setSelectedItem(index: number): void;\n    selectItem(item: IgxDropDownItemBaseDirective, event?: Event): void;\n}\n\n","import { Injectable } from '@angular/core';\n\n/** @hidden */\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxSelectionAPIService {\n    /**\n     * If primaryKey is defined, then multiple selection is based on the primaryKey, and it is array of numbers, strings, etc.\n     * If the primaryKey is omitted, then selection is based on the item data\n     */\n    protected selection: Map<string,  Set<any>> = new Map<string, Set<any>>();\n\n    /**\n     * Get current component selection.\n     * @param componentID ID of the component.\n     */\n    public get(componentID: string): Set<any> {\n        return this.selection.get(componentID);\n    }\n\n    /**\n     * Set new component selection.\n     * @param componentID ID of the component.\n     * @param newSelection The new component selection to be set.\n     */\n    public set(componentID: string, newSelection: Set<any>) {\n        if (!componentID) {\n            throw Error('Invalid value for component id!');\n        }\n        this.selection.set(componentID, newSelection);\n    }\n\n    /**\n     * Clears selection for component.\n     * @param componentID ID of the component.\n     */\n    public clear(componentID: string) {\n        this.selection.set(componentID, this.get_empty());\n    }\n\n    /**\n     * Get current component selection length.\n     * @param componentID ID of the component.\n     */\n    public size(componentID: string): number {\n        const sel = this.get(componentID);\n        return sel ? sel.size : 0;\n    }\n\n    /**\n     * Creates new selection that consist of the new item added to the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the select_item() one.\n     * @param componentID ID of the component, which we add new item to.\n     * @param itemID ID of the item to add to component selection.\n     * @param sel Used internally only by the selection (add_items method) to accumulate selection for multiple items.\n     *\n     * @returns Selection after the new item is added.\n     */\n    public add_item(componentID: string, itemID, sel?: Set<any>): Set<any> {\n        if (!sel) {\n            sel = new Set(this.get(componentID));\n        }\n        if (sel === undefined) {\n            sel = this.get_empty();\n        }\n        if (!itemID && itemID !== 0) {\n            throw Error('Invalid value for item id!');\n        }\n        sel.add(itemID);\n        return sel;\n    }\n\n    /**\n     * Creates new selection that consist of the new items added to the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the select_items() one.\n     * @param componentID ID of the component, which we add new items to.\n     * @param itemIDs Array of IDs of the items to add to component selection.\n     * @param clearSelection If true it will clear previous selection.\n     *\n     * @returns Selection after the new items are added.\n     */\n    public add_items(componentID: string, itemIDs: any[], clearSelection?: boolean): Set<any> {\n        let selection: Set<any>;\n        if (clearSelection) {\n            selection = this.get_empty();\n        } else if (itemIDs && itemIDs.length === 0) {\n            selection = new Set(this.get(componentID));\n        }\n        itemIDs.forEach((item) => selection = this.add_item(componentID, item, selection));\n        return selection;\n    }\n\n    /**\n     * Add item to the current component selection.\n     * @param componentID ID of the component, which we add new item to.\n     * @param itemID ID of the item to add to component selection.\n     * @param sel Used internally only by the selection (select_items method) to accumulate selection for multiple items.\n     */\n    public select_item(componentID: string, itemID, sel?: Set<any>) {\n        this.set(componentID, this.add_item(componentID, itemID, sel));\n    }\n\n    /**\n     * Add items to the current component selection.\n     * @param componentID ID of the component, which we add new items to.\n     * @param itemIDs Array of IDs of the items to add to component selection.\n     * @param clearSelection If true it will clear previous selection.\n     */\n    public select_items(componentID: string, itemID: any[], clearSelection?: boolean) {\n        this.set(componentID, this.add_items(componentID, itemID, clearSelection));\n    }\n\n    /**\n     * Creates new selection that consist of the new items excluded from the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the deselect_item() one.\n     * @param componentID ID of the component, which we remove items from.\n     * @param itemID ID of the item to remove from component selection.\n     * @param sel Used internally only by the selection (delete_items method) to accumulate deselected items.\n     *\n     * @returns Selection after the item is removed.\n     */\n    public delete_item(componentID: string, itemID, sel?: Set<any>) {\n        if (!sel) {\n            sel = new Set(this.get(componentID));\n        }\n        if (sel === undefined) {\n            return;\n        }\n        sel.delete(itemID);\n        return sel;\n    }\n\n    /**\n     * Creates new selection that consist of the new items removed to the current component selection.\n     * The returned collection is new Set,\n     * therefore if you want to update component selection you need to call in addition the set_selection() method\n     * or instead use the deselect_items() one.\n     * @param componentID ID of the component, which we remove items from.\n     * @param itemID ID of the items to remove from component selection.\n     *\n     * @returns Selection after the items are removed.\n     */\n    public delete_items(componentID: string, itemIDs: any[]): Set<any> {\n        let selection: Set<any>;\n        itemIDs.forEach((deselectedItem) => selection = this.delete_item(componentID, deselectedItem, selection));\n        return selection;\n    }\n\n    /**\n     * Remove item from the current component selection.\n     * @param componentID ID of the component, which we remove item from.\n     * @param itemID ID of the item to remove from component selection.\n     * @param sel Used internally only by the selection (deselect_items method) to accumulate selection for multiple items.\n     */\n    public deselect_item(componentID: string, itemID, sel?: Set<any>) {\n        this.set(componentID, this.delete_item(componentID, itemID, sel));\n    }\n\n    /**\n     * Remove items to the current component selection.\n     * @param componentID ID of the component, which we add new items to.\n     * @param itemIDs Array of IDs of the items to add to component selection.\n     */\n    public deselect_items(componentID: string, itemID: any[], clearSelection?: boolean) {\n        this.set(componentID, this.delete_items(componentID, itemID));\n    }\n\n    /**\n     * Check if the item is selected in the component selection.\n     * @param componentID ID of the component.\n     * @param itemID ID of the item to search.\n     *\n     * @returns If item is selected.\n     */\n    public is_item_selected(componentID: string, itemID): boolean {\n        const sel = this.get(componentID);\n        if (!sel) {\n            return false;\n        }\n        return sel.has(itemID);\n    }\n\n    /**\n     * Get first element in the selection.\n     * This is correct when we have only one item in the collection (for single selection purposes)\n     * and the method returns that item.\n     * @param componentID ID of the component.\n     *\n     * @returns First element in the set.\n     */\n    public first_item(componentID: string) {\n        const sel = this.get(componentID);\n        if (sel && sel.size > 0) {\n            return sel.values().next().value;\n       }\n    }\n\n    /**\n     * Returns whether all items are selected.\n     * @param componentID ID of the component.\n     * @param dataCount: number Number of items in the data.\n     *\n     * @returns If all items are selected.\n     */\n    public are_all_selected(componentID: string, dataCount: number): boolean {\n        return dataCount > 0 && dataCount === this.size(componentID);\n    }\n\n    /**\n     * Returns whether any of the items is selected.\n     * @param componentID ID of the component.\n     * @param data Entire data array.\n     *\n     * @returns If there is any item selected.\n     */\n    public are_none_selected(componentID: string): boolean {\n        return this.size(componentID) === 0;\n    }\n\n    /**\n     * Get all primary key values from a data array. If there isn't a primary key defined that the entire data is returned instead.\n     * @param data Entire data array.\n     * @param primaryKey Data primary key.\n     *\n     * @returns Array of identifiers, either primary key values or the entire data array.\n     */\n    public get_all_ids(data, primaryKey?) {\n        // If primaryKey is 0, this should still map to the property\n        return primaryKey !== undefined && primaryKey !== null ? data.map((x) => x[primaryKey]) : data;\n    }\n\n    /**\n     * Returns empty selection collection.\n     * @returns empty set.\n     */\n    public get_empty() {\n        return new Set();\n    }\n}\n","import { Component, Input, HostBinding } from '@angular/core';\n\nlet NEXT_ID = 0;\n/**\n * The `<igx-drop-down-item>` is a container intended for row items in\n * a `<igx-drop-down>` container.\n */\n@Component({\n    selector: 'igx-drop-down-item-group',\n    template: `\n        <label id=\"{{labelId}}\">{{ label }}</label>\n        <ng-content select=\"igx-drop-down-item\"></ng-content>\n    `\n})\nexport class IgxDropDownGroupComponent {\n    private _id = NEXT_ID++;\n\n    /**\n     * @hidden @internal\n     */\n    public get labelId(): string {\n        return `igx-item-group-label-${this._id}`;\n    }\n\n    @HostBinding(`attr.aria-labelledby`)\n    public get labelledBy(): string {\n        return this.labelId;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.role')\n    public role = 'group';\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-drop-down__group')\n    public groupClass = true;\n    /**\n     * Sets/gets if the item group is disabled\n     *\n     * ```typescript\n     * const myDropDownGroup: IgxDropDownGroupComponent = this.dropdownGroup;\n     * // get\n     * ...\n     * const groupState: boolean = myDropDownGroup.disabled;\n     * ...\n     * //set\n     * ...\n     * myDropDownGroup,disabled = false;\n     * ...\n     * ```\n     *\n     * ```html\n     * <igx-drop-down-item-group [label]=\"'My Items'\" [disabled]=\"true\">\n     *     <igx-drop-down-item *ngFor=\"let item of items[index]\" [value]=\"item.value\">\n     *         {{ item.text }}\n     *     </igx-drop-down-item>\n     * </igx-drop-down-item-group>\n     * ```\n     *\n     * **NOTE:** All items inside of a disabled drop down group will be treated as disabled\n     */\n    @Input()\n    @HostBinding(`attr.aria-disabled`)\n    @HostBinding('class.igx-drop-down__group--disabled')\n    public disabled = false;\n\n    /**\n     * Sets/gets the label of the item group\n     *\n     * ```typescript\n     * const myDropDownGroup: IgxDropDownGroupComponent = this.dropdownGroup;\n     * // get\n     * ...\n     * const myLabel: string = myDropDownGroup.label;\n     * ...\n     * // set\n     * ...\n     * myDropDownGroup.label = 'My New Label';\n     * ...\n     * ```\n     *\n     * ```html\n     * <igx-drop-down-item-group [label]=\"'My new Label'\">\n     *      ...\n     * </igx-drop-down-item-group>\n     * ```\n     */\n    @Input()\n    public label: string;\n}\n","import { IDropDownBase, IGX_DROPDOWN_BASE } from './drop-down.common';\nimport { Directive, Input, HostBinding, HostListener, ElementRef, Optional, Inject, DoCheck, Output, EventEmitter } from '@angular/core';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { DeprecateProperty, showMessage } from '../core/deprecateDecorators';\nimport { IgxDropDownGroupComponent } from './drop-down-group.component';\n\nlet NEXT_ID = 0;\nlet warningShown = false;\n\n/**\n * An abstract class defining a drop-down item:\n * With properties / styles for selection, highlight, height\n * Bindable property for passing data (`value: any`)\n * Parent component (has to be used under a parent with type `IDropDownBase`)\n * Method for handling click on Host()\n */\n@Directive({\n    selector: '[igxDropDownItemBase]'\n})\nexport class IgxDropDownItemBaseDirective implements DoCheck {\n    /**\n     * @hidden\n     */\n    protected _focused = false;\n    protected _selected = false;\n    protected _index = null;\n    protected _disabled = false;\n    protected get hasIndex(): boolean {\n        return this._index !== null && this._index !== undefined;\n    }\n\n    /**\n     * Sets/gets the `id` of the item.\n     * ```html\n     * <igx-drop-down-item [id] = 'igx-drop-down-item-0'></igx-drop-down-item>\n     * ```\n     * ```typescript\n     * let itemId =  this.item.id;\n     * ```\n     * @memberof IgxSelectItemComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-drop-down-item-${NEXT_ID++}`;\n\n    /**\n     * @hidden @internal\n     */\n    public get itemID() {\n        return this;\n    }\n\n    /**\n     * The data index of the dropdown item.\n     *\n     * ```typescript\n     * // get the data index of the selected dropdown item\n     * let selectedItemIndex = this.dropdown.selectedItem.index\n     * ```\n     */\n    @Input()\n    public get index(): number {\n        if (this._index === null) {\n            warningShown = showMessage(\n                'IgxDropDownItemBaseDirective: Automatic index is deprecated.' +\n                'Bind in the template instead using `<igx-drop-down-item [index]=\"i\"` instead.`',\n                warningShown);\n            return this.itemIndex;\n        }\n        return this._index;\n    }\n\n    public set index(value) {\n        this._index = value;\n    }\n\n    /**\n     * Gets/sets the value of the item if the item is databound\n     *\n     * ```typescript\n     * // usage in IgxDropDownItemComponent\n     * // get\n     * let mySelectedItemValue = this.dropdown.selectedItem.value;\n     *\n     * // set\n     * let mySelectedItem = this.dropdown.selectedItem;\n     * mySelectedItem.value = { id: 123, name: 'Example Name' }\n     *\n     * // usage in IgxComboItemComponent\n     * // get\n     * let myComboItemValue = this.combo.items[0].value;\n     * ```\n     */\n    @Input()\n    public value: any;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__item')\n    get itemStyle(): boolean {\n        return !this.isHeader;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__item--cosy')\n    public get itemStyleCosy() {\n        return this.dropDown.displayDensity === 'cosy' && !this.isHeader;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__item--compact')\n    public get itemStyleCompact() {\n        return this.dropDown.displayDensity === 'compact' && !this.isHeader;\n    }\n\n    /**\n     * Sets/Gets if the item is the currently selected one in the dropdown\n     *\n     * ```typescript\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let isMyItemSelected = mySelectedItem.selected; // true\n     * ```\n     *\n     * Two-way data binding\n     * ```html\n     * <igx-drop-down-item [(selected)]='model.isSelected'></igx-drop-down-item>\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-selected')\n    @HostBinding('class.igx-drop-down__item--selected')\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    set selected(value: boolean) {\n        if (this.isHeader) {\n            return;\n        }\n        this._selected = value;\n        this.selectedChange.emit(this._selected);\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public selectedChange = new EventEmitter<boolean>();\n\n    /**\n     * Sets/gets if the given item is focused\n     * ```typescript\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let isMyItemFocused = mySelectedItem.focused;\n     * ```\n     */\n    @HostBinding('class.igx-drop-down__item--focused')\n    get focused(): boolean {\n        return this.isSelectable && this._focused;\n    }\n\n    /**\n     * ```html\n     *  <igx-drop-down-item *ngFor=\"let item of items\" focused={{!item.focused}}>\n     *      <div>\n     *          {{item.field}}\n     *      </div>\n     *  </igx-drop-down-item>\n     * ```\n     */\n    set focused(value: boolean) {\n        this._focused = value;\n    }\n\n    /**\n     * Sets/gets if the given item is header\n     * ```typescript\n     *  // get\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let isMyItemHeader = mySelectedItem.isHeader;\n     * ```\n     *\n     * ```html\n     *  <!--set-->\n     *  <igx-drop-down-item *ngFor=\"let item of items\">\n     *      <div *ngIf=\"items.indexOf(item) === 5; then item.isHeader = true\">\n     *          {{item.field}}\n     *      </div>\n     *  </igx-drop-down-item>\n     * ```\n     */\n    @Input()\n    @HostBinding('class.igx-drop-down__header')\n    public isHeader: boolean;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__header--cosy')\n    public get headerClassCosy() {\n        return this.isHeader && this.dropDown.displayDensity === 'cosy';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down__header--compact')\n    public get headerClassCompact() {\n        return this.isHeader && this.dropDown.displayDensity === 'compact';\n    }\n\n    /**\n     * Sets/gets if the given item is disabled\n     *\n     * ```typescript\n     *  // get\n     *  let mySelectedItem = this.dropdown.selectedItem;\n     *  let myItemIsDisabled = mySelectedItem.disabled;\n     * ```\n     *\n     * ```html\n     *  <igx-drop-down-item *ngFor=\"let item of items\" disabled={{!item.disabled}}>\n     *      <div>\n     *          {{item.field}}\n     *      </div>\n     *  </igx-drop-down-item>\n     * ```\n     * **NOTE:** Drop-down items inside of a disabled `IgxDropDownGroup` will always count as disabled\n     */\n    @Input()\n    @HostBinding('attr.aria-disabled')\n    @HostBinding('class.igx-drop-down__item--disabled')\n    public get disabled(): boolean {\n        return this.group ? this.group.disabled || this._disabled : this._disabled;\n    }\n\n    public set disabled(value: boolean) {\n        this._disabled = value;\n    }\n\n    /**\n     * Gets/sets the `role` attribute of the item. Default is 'option'.\n     *\n     * ```html\n     *  <igx-drop-down-item [role]=\"customRole\"></igx-drop-down-item>\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.role')\n    public role = 'option';\n\n    /**\n     * Gets item index\n     * @hidden @internal\n     */\n    public get itemIndex(): number {\n        return this.dropDown.items.indexOf(this);\n    }\n\n    /**\n     * Gets item element height\n     * @hidden @internal\n     */\n    public get elementHeight(): number {\n        return this.elementRef.nativeElement.clientHeight;\n    }\n\n    /**\n     * Get item html element\n     * @hidden @internal\n     */\n    public get element(): ElementRef {\n        return this.elementRef;\n    }\n\n    constructor(\n        @Inject(IGX_DROPDOWN_BASE) protected dropDown: IDropDownBase,\n        protected elementRef: ElementRef,\n        @Optional() protected group: IgxDropDownGroupComponent,\n        @Optional() @Inject(IgxSelectionAPIService) protected selection?: IgxSelectionAPIService\n    ) { }\n\n    ngDoCheck(): void {\n        if (this._selected) {\n            const dropDownSelectedItem = this.dropDown.selectedItem;\n            if (!dropDownSelectedItem) {\n                this.dropDown.selectItem(this);\n            } else if (this.hasIndex\n                ? this._index !== dropDownSelectedItem.index || this.value !== dropDownSelectedItem.value :\n                this !== dropDownSelectedItem) {\n                this.dropDown.selectItem(this);\n            }\n        }\n    }\n\n    /** Returns true if the items is not a header or disabled  */\n    protected get isSelectable(): boolean {\n        return  !(this.disabled || this.isHeader);\n    }\n\n    /** If `allowItemsFocus` is enabled, keep the browser focus on the active item */\n    protected ensureItemFocus() {\n        if (this.dropDown.allowItemsFocus) {\n            const focusedItem = this.dropDown.items.find((item) => item.focused);\n            if (!focusedItem) { return; }\n            focusedItem.element.nativeElement.focus({ preventScroll: true });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    clicked(event): void {\n    }\n}\n","import {\n    Component,\n    HostBinding\n} from '@angular/core';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\n\n/**\n * The `<igx-drop-down-item>` is a container intended for row items in\n * a `<igx-drop-down>` container.\n */\n@Component({\n    selector: 'igx-drop-down-item',\n    templateUrl: 'drop-down-item.component.html'\n})\nexport class IgxDropDownItemComponent extends IgxDropDownItemBaseDirective {\n    /**\n     * @inheritdoc\n     */\n    get focused(): boolean {\n        let focusedState = this._focused;\n        if (this.hasIndex) {\n            const focusedItem = this.selection.first_item(`${this.dropDown.id}-active`);\n            const focusedIndex = focusedItem ? focusedItem.index : -1;\n            focusedState = this._index === focusedIndex;\n        }\n        return this.isSelectable && focusedState;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    set focused(value: boolean) {\n        this._focused = value;\n    }\n    /**\n     * @inheritdoc\n     */\n    get selected(): boolean {\n        if (this.hasIndex) {\n            const item = this.selection.first_item(`${this.dropDown.id}`);\n            return item ? item.index === this._index && item.value === this.value : false;\n        }\n        return this._selected;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    set selected(value: boolean) {\n        if (this.isHeader) {\n            return;\n        }\n        this._selected = value;\n        this.selectedChange.emit(this._selected);\n    }\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.tabindex')\n    get setTabIndex() {\n        const shouldSetTabIndex = this.dropDown.allowItemsFocus && this.isSelectable;\n        if (shouldSetTabIndex) {\n            return 0;\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    clicked(event): void {\n        if (!this.isSelectable) {\n            this.ensureItemFocus();\n            return;\n        }\n        if (this.selection) {\n            this.dropDown.selectItem(this, event);\n        }\n    }\n}\n","import { InjectionToken, Input, Output, EventEmitter, DoCheck, OnInit, Directive, NgModule, Optional, Inject } from '@angular/core';\nimport { IBaseEventArgs, mkenum } from './utils';\n\n/**\n * Defines the possible values of the components' display density.\n */\nexport const DisplayDensity = mkenum({\n    comfortable: 'comfortable',\n    cosy: 'cosy',\n    compact: 'compact'\n});\nexport type DisplayDensity = (typeof DisplayDensity)[keyof typeof DisplayDensity];\n\n/**\n * Describes the object used to configure the DisplayDensity in Angular DI.\n */\nexport interface IDisplayDensityOptions {\n    displayDensity: DisplayDensity;\n}\n\nexport interface IDensityChangedEventArgs extends IBaseEventArgs {\n    oldDensity: DisplayDensity;\n    newDensity: DisplayDensity;\n}\n\n/**\n * Defines the DisplayDensity DI token.\n */\nexport const DisplayDensityToken = new InjectionToken<IDisplayDensityOptions>('DisplayDensity');\n\n/**\n * Base class containing all logic required for implementing DisplayDensity.\n */\n@Directive({\n    selector: '[igxDisplayDensityBase]'\n})\n// tslint:disable-next-line: directive-class-suffix\nexport class DisplayDensityBase implements DoCheck, OnInit {\n    protected _displayDensity: DisplayDensity;\n\n    /**\n     * @hidden\n     */\n    public initialDensity: DisplayDensity;\n\n    /**\n     * Returns the theme of the component.\n     * The default theme is `comfortable`.\n     * Available options are `comfortable`, `cosy`, `compact`.\n     * ```typescript\n     * let componentTheme = this.component.displayDensity;\n     * ```\n     */\n    @Input()\n    public get displayDensity(): DisplayDensity | string {\n        return this._displayDensity ||\n            ((this.displayDensityOptions && this.displayDensityOptions.displayDensity) || DisplayDensity.comfortable);\n    }\n\n    /**\n     * Sets the theme of the component.\n     */\n    public set displayDensity(val: DisplayDensity | string) {\n        const currentDisplayDensity = this._displayDensity;\n        this._displayDensity = val as DisplayDensity;\n\n        if (currentDisplayDensity !== this._displayDensity) {\n            const densityChangedArgs: IDensityChangedEventArgs = {\n                oldDensity: currentDisplayDensity,\n                newDensity: this._displayDensity\n            };\n\n            this.onDensityChanged.emit(densityChangedArgs);\n        }\n    }\n\n    @Output()\n    public onDensityChanged = new EventEmitter<IDensityChangedEventArgs>();\n\n    protected oldDisplayDensityOptions: IDisplayDensityOptions = { displayDensity: DisplayDensity.comfortable };\n\n\n    constructor(@Optional() @Inject(DisplayDensityToken) protected displayDensityOptions: IDisplayDensityOptions) {\n        Object.assign(this.oldDisplayDensityOptions, displayDensityOptions);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit(): void {\n        this.initialDensity = this._displayDensity;\n    }\n\n    public ngDoCheck() {\n        if (!this._displayDensity && this.displayDensityOptions &&\n                this.oldDisplayDensityOptions.displayDensity !== this.displayDensityOptions.displayDensity) {\n            const densityChangedArgs: IDensityChangedEventArgs = {\n                oldDensity: this.oldDisplayDensityOptions.displayDensity,\n                newDensity: this.displayDensityOptions.displayDensity\n            };\n\n            this.onDensityChanged.emit(densityChangedArgs);\n            this.oldDisplayDensityOptions = Object.assign(this.oldDisplayDensityOptions, this.displayDensityOptions);\n        }\n    }\n\n    /**\n     * Given a style class of a component/element returns the modified version of it based\n     * on the current display density.\n     */\n    protected getComponentDensityClass(baseStyleClass: string): string {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return `${baseStyleClass}--${DisplayDensity.cosy}`;\n            case DisplayDensity.compact:\n                return `${baseStyleClass}--${DisplayDensity.compact}`;\n            default:\n                return baseStyleClass;\n        }\n    }\n}\n\n@NgModule({\n    declarations: [\n        DisplayDensityBase\n    ],\n    exports: [\n        DisplayDensityBase\n    ]\n})\nexport class IgxDisplayDensityModule {}\n","import {\n    Input, HostBinding, ElementRef, QueryList, Output, EventEmitter, ChangeDetectorRef, Optional, Inject, Directive\n} from '@angular/core';\n\nimport { Navigate, ISelectionEventArgs } from './drop-down.common';\nimport { IDropDownList } from './drop-down.common';\nimport { DropDownActionKey } from './drop-down.common';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\nlet NEXT_ID = 0;\n\n/**\n * An abstract class, defining a drop-down component, with:\n * Properties for display styles and classes\n * A collection items of type `IgxDropDownItemBaseDirective`\n * Properties and methods for navigating (highlighting/focusing) items from the collection\n * Properties and methods for selecting items from the collection\n */\n@Directive()\nexport abstract class IgxDropDownBaseDirective extends DisplayDensityBase implements IDropDownList {\n    protected _width;\n    protected _height;\n    protected _focusedItem: any = null;\n    protected _id = `igx-drop-down-${NEXT_ID++}`;\n\n    /**\n     * @hidden @internal\n     * Get dropdown's html element of its scroll container\n     */\n    public get scrollContainer(): HTMLElement {\n        return this.element;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public children: QueryList<IgxDropDownItemBaseDirective>;\n\n    /**\n     * Emitted when item selection is changing, before the selection completes\n     *\n     * ```html\n     * <igx-drop-down (onSelection)='handleSelection()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<ISelectionEventArgs>();\n\n    /**\n     *  Gets/Sets the width of the drop down\n     *\n     * ```typescript\n     * // get\n     * let myDropDownCurrentWidth = this.dropdown.width;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [width]='160px'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public width: string;\n\n    /**\n     * Gets/Sets the height of the drop down\n     *\n     * ```typescript\n     * // get\n     * let myDropDownCurrentHeight = this.dropdown.height;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [height]='400px'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public height: string;\n\n    /**\n     * Gets/Sets the drop down's id\n     *\n     * ```typescript\n     * // get\n     * let myDropDownCurrentId = this.dropdown.id;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [id]='newDropDownId'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this._id = value;\n    }\n\n    /**\n     * Gets/Sets the drop down's container max height.\n     *\n     * ```typescript\n     * // get\n     * let maxHeight = this.dropdown.maxHeight;\n     * ```\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [maxHeight]='200px'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    @HostBinding('style.maxHeight')\n    public maxHeight = null;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-drop-down')\n    public cssClass = true;\n\n    /**\n     * Get all non-header items\n     *\n     * ```typescript\n     * let myDropDownItems = this.dropdown.items;\n     * ```\n     */\n    public get items(): IgxDropDownItemBaseDirective[] {\n        const items: IgxDropDownItemBaseDirective[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.children.toArray()) {\n                if (!child.isHeader) {\n                    items.push(child);\n                }\n            }\n        }\n\n        return items;\n    }\n\n    /**\n     * Get all header items\n     *\n     * ```typescript\n     * let myDropDownHeaderItems = this.dropdown.headers;\n     * ```\n     */\n    public get headers(): IgxDropDownItemBaseDirective[] {\n        const headers: IgxDropDownItemBaseDirective[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.children.toArray()) {\n                if (child.isHeader) {\n                    headers.push(child);\n                }\n            }\n        }\n\n        return headers;\n    }\n\n    /**\n     * Get dropdown html element\n     *\n     * ```typescript\n     * let myDropDownElement = this.dropdown.element;\n     * ```\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Gets if the dropdown is collapsed\n     */\n    public abstract readonly collapsed: boolean;\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n            super(_displayDensityOptions);\n        }\n\n    /** Keydown Handler */\n    public onItemActionKey(key: DropDownActionKey, event?: Event) {\n        switch (key) {\n            case DropDownActionKey.ENTER:\n            case DropDownActionKey.SPACE:\n                this.selectItem(this.focusedItem, event);\n                break;\n            case DropDownActionKey.ESCAPE:\n        }\n    }\n\n    /**\n     * Emits onSelection with the target item & event\n     * @hidden @internal\n     * @param newSelection the item selected\n     * @param event the event that triggered the call\n     */\n    public selectItem(newSelection?: IgxDropDownItemBaseDirective, event?: Event) {\n        this.onSelection.emit({\n            newSelection,\n            oldSelection: null,\n            cancel: false\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get focusedItem(): IgxDropDownItemBaseDirective {\n        return this._focusedItem;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set focusedItem(item: IgxDropDownItemBaseDirective) {\n        this._focusedItem = item;\n    }\n\n    protected navigate(direction: Navigate, currentIndex?: number) {\n        let index = -1;\n        if (this._focusedItem) {\n            index = currentIndex ? currentIndex : this.focusedItem.itemIndex;\n        }\n        const newIndex = this.getNearestSiblingFocusableItemIndex(index, direction);\n        this.navigateItem(newIndex);\n    }\n\n    protected getNearestSiblingFocusableItemIndex(startIndex: number, direction: Navigate): number {\n        let index = startIndex;\n        const items = this.items;\n        while (items[index + direction] && items[index + direction].disabled) {\n            index += direction;\n        }\n\n        index += direction;\n        if (index >= 0 && index < items.length) {\n            return index;\n        } else {\n            return -1;\n        }\n    }\n\n    /**\n     * Navigates to the item on the specified index\n     * @param newIndex number - the index of the item in the `items` collection\n     */\n    public navigateItem(newIndex: number) {\n        if (newIndex !== -1) {\n            const oldItem = this._focusedItem;\n            const newItem = this.items[newIndex];\n            if (oldItem) {\n                oldItem.focused = false;\n            }\n            this.focusedItem = newItem;\n            this.scrollToHiddenItem(newItem);\n            this.focusedItem.focused = true;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateFirst() {\n        this.navigate(Navigate.Down, -1);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateLast() {\n        this.navigate(Navigate.Up, this.items.length);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateNext() {\n        this.navigate(Navigate.Down);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigatePrev() {\n        this.navigate(Navigate.Up);\n    }\n\n    protected scrollToHiddenItem(newItem: IgxDropDownItemBaseDirective) {\n        const elementRect = newItem.element.nativeElement.getBoundingClientRect();\n        const parentRect = this.scrollContainer.getBoundingClientRect();\n        if (parentRect.top > elementRect.top) {\n            this.scrollContainer.scrollTop -= (parentRect.top - elementRect.top);\n        }\n\n        if (parentRect.bottom < elementRect.bottom) {\n            this.scrollContainer.scrollTop += (elementRect.bottom - parentRect.bottom);\n        }\n    }\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    HostBinding,\n    ViewChild,\n    ViewContainerRef\n} from '@angular/core';\n\n@Component({\n    selector: 'igx-display-container',\n    template: `\n        <ng-template\n            #display_container\n            igxScrollInertia\n            [IgxScrollInertiaScrollContainer]=\"scrollContainer\"\n            [IgxScrollInertiaDirection]=\"scrollDirection\">\n        </ng-template>\n    `\n})\nexport class DisplayContainerComponent {\n    @ViewChild('display_container', { read: ViewContainerRef, static: true })\n    public _vcr;\n\n    public scrollDirection: string;\n\n    @HostBinding('class')\n    public cssClass = 'igx-display-container';\n\n    @HostBinding('class.igx-display-container--inactive')\n    public notVirtual = true;\n\n    public scrollContainer;\n\n    constructor(public cdr: ChangeDetectorRef, public _viewContainer: ViewContainerRef) { }\n}\n","import {\n    EventEmitter,\n    Output,\n    HostListener,\n    ElementRef,\n    ChangeDetectorRef,\n    OnDestroy,\n    Directive,\n    AfterViewInit,\n    Inject,\n    NgZone\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\nimport { resizeObservable, isIE, PlatformUtil } from '../../core/utils';\n\n@Directive({\n    selector: '[igxVirtualHelperBase]'\n})\nexport class VirtualHelperBaseDirective implements OnDestroy, AfterViewInit {\n    public scrollAmount = 0;\n\n    public _size = 0;\n\n    public destroyed;\n\n    private _afterViewInit = false;\n    private _scrollNativeSize: number;\n    private _detached = false;\n    protected destroy$ = new Subject<any>();\n\n\n    ngAfterViewInit() {\n        this._afterViewInit = true;\n        if (!this.platformUtil.isBrowser) {\n            return;\n        }\n        const delayTime = isIE() ? 40 : 0;\n        this._zone.runOutsideAngular(() => {\n            resizeObservable(this.nativeElement).pipe(\n                throttleTime(delayTime),\n                takeUntil(this.destroy$)).subscribe((event) => this.handleMutations(event));\n        });\n    }\n\n    @HostListener('scroll', ['$event'])\n    onScroll(event) {\n        this.scrollAmount = event.target.scrollTop || event.target.scrollLeft;\n    }\n    constructor(\n        public elementRef: ElementRef,\n        public cdr: ChangeDetectorRef,\n        protected _zone: NgZone,\n        @Inject(DOCUMENT) public document: any,\n        protected platformUtil: PlatformUtil,\n    ) {\n        this._scrollNativeSize = this.calculateScrollNativeSize();\n    }\n\n    get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    public ngOnDestroy() {\n        this.destroyed = true;\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public set size(value) {\n        if (this.destroyed) {\n            return;\n        }\n        this._size = value;\n        if (this._afterViewInit) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    public get size() {\n        return this._size;\n    }\n\n    public get scrollNativeSize() {\n        return this._scrollNativeSize;\n    }\n\n    protected get isAttachedToDom(): boolean {\n        return this.document.body.contains(this.nativeElement);\n    }\n\n    protected handleMutations(event) {\n        const hasSize = !(event[0].contentRect.height === 0 && event[0].contentRect.width === 0);\n        if (!hasSize && !this.isAttachedToDom) {\n            // scroll bar detached from DOM\n            this._detached = true;\n        } else if (this._detached && hasSize && this.isAttachedToDom) {\n            // attached back now.\n            this.restoreScroll();\n        }\n    }\n\n    protected restoreScroll() {}\n\n    public calculateScrollNativeSize() {\n        const div = this.document.createElement('div');\n        const style = div.style;\n        style.width = '100px';\n        style.height = '100px';\n        style.position = 'absolute';\n        style.top = '-10000px';\n        style.top = '-10000px';\n        style.overflow = 'scroll';\n        this.document.body.appendChild(div);\n        const scrollWidth = div.offsetWidth - div.clientWidth;\n        this.document.body.removeChild(div);\n        return scrollWidth ? scrollWidth + 1 : 1;\n    }\n}\n","import { Component, ElementRef, HostBinding, Input, ViewChild, ViewContainerRef, ChangeDetectorRef, Inject, NgZone } from '@angular/core';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\nimport { DOCUMENT } from '@angular/common';\nimport { PlatformUtil } from '../../core/utils';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-horizontal-virtual-helper',\n    template: '<div #horizontal_container class=\"igx-vhelper__placeholder-content\" [style.width.px]=\"size\"></div>'\n})\nexport class HVirtualHelperComponent extends VirtualHelperBaseDirective {\n    @ViewChild('horizontal_container', { read: ViewContainerRef, static: true }) public _vcr;\n    @Input() public width: number;\n    @HostBinding('class')\n    public cssClasses = 'igx-vhelper--horizontal';\n\n    constructor(elementRef: ElementRef, cdr: ChangeDetectorRef, zone: NgZone, @Inject(DOCUMENT) document, platformUtil: PlatformUtil) {\n        super(elementRef, cdr, zone, document, platformUtil);\n    }\n\n    protected restoreScroll() {\n        this.nativeElement.scrollLeft = this.scrollAmount;\n    }\n}\n","import { Component, ElementRef, HostBinding, Input, ViewChild, ViewContainerRef,\n     ChangeDetectorRef, OnDestroy, OnInit, Inject, NgZone } from '@angular/core';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\nimport { DOCUMENT } from '@angular/common';\nimport { PlatformUtil } from '../../core/utils';\n\n@Component({\n    selector: 'igx-virtual-helper',\n    template: '<div #container class=\"igx-vhelper__placeholder-content\" [style.height.px]=\"size\"></div>'\n})\nexport class VirtualHelperComponent extends VirtualHelperBaseDirective implements OnInit, OnDestroy  {\n    @HostBinding('scrollTop')\n    public scrollTop;\n\n    @HostBinding('style.width.px')\n    public scrollWidth;\n\n    @ViewChild('container', { read: ViewContainerRef, static: true }) public _vcr;\n    @Input() public itemsLength: number;\n\n\n    @HostBinding('class')\n    public cssClasses = 'igx-vhelper--vertical';\n\n    constructor(elementRef: ElementRef, cdr: ChangeDetectorRef, zone: NgZone, @Inject(DOCUMENT) document, platformUtil: PlatformUtil) {\n        super(elementRef, cdr, zone, document, platformUtil);\n    }\n\n    ngOnInit() {\n        this.scrollWidth = this.scrollNativeSize;\n    }\n\n    protected restoreScroll() {\n        this.nativeElement.scrollTop = this.scrollAmount;\n    }\n}\n","import { Directive, Input, ElementRef, NgZone, OnInit, NgModule, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n/**\n * @hidden\n */\n@Directive({ selector: '[igxScrollInertia]' })\nexport class IgxScrollInertiaDirective implements OnInit, OnDestroy {\n\n    constructor(private element: ElementRef, private _zone: NgZone) {\n\n    }\n\n    @Input()\n    public IgxScrollInertiaDirection: string;\n\n    @Input()\n    public IgxScrollInertiaScrollContainer: any;\n\n    @Input()\n    public wheelStep = 50;\n\n    @Input()\n    public inertiaStep = 1.5;\n\n    @Input()\n    public swipeToleranceX = 20;\n\n    @Input()\n    public inertiaDeltaY = 3;\n\n    @Input()\n    public inertiaDeltaX = 2;\n\n    @Input()\n    public inertiaDuration = 0.5;\n\n    private _touchInertiaAnimID;\n    private _startX;\n    private _startY;\n    private _touchStartX;\n    private _touchStartY;\n    private _lastTouchEnd;\n    private _lastTouchX;\n    private _lastTouchY;\n    private _savedSpeedsX = [];\n    private _savedSpeedsY;\n    private _totalMovedX;\n    private _offsetRecorded;\n    private _offsetDirection;\n    private _touchPrevented;\n    private _lastMovedX;\n    private _lastMovedY;\n    private _gestureObject;\n    private setPointerCaptureFName = typeof Element.prototype['msSetPointerCapture'] === 'function' ?\n    'msSetPointerCapture' :\n    'setPointerCapture';\n    private releasePointerCaptureFName = typeof Element.prototype['msReleasePointerCapture'] === 'function' ?\n    'msReleasePointerCapture' :\n    'releasePointerCapture';\n    private _pointer;\n    private _nextX;\n    private _nextY;\n    private parentElement;\n    private baseDeltaMultiplier = 1 / 120;\n    private firefoxDeltaMultiplier = 1 / 30;\n\n    ngOnInit(): void {\n        this._zone.runOutsideAngular(() => {\n            this.parentElement = this.element.nativeElement.parentElement || this.element.nativeElement.parentNode;\n            if (!this.parentElement) {\n                return;\n            }\n            const targetElem = this.parentElement;\n            targetElem.addEventListener('wheel',\n                    (evt) => { this.onWheel(evt); });\n            targetElem.addEventListener('touchstart',\n                    (evt) => { this.onTouchStart(evt); });\n            targetElem.addEventListener('touchmove',\n                    (evt) => { this.onTouchMove(evt); });\n            targetElem.addEventListener('touchend',\n                    (evt) => { this.onTouchEnd(evt); });\n            targetElem.addEventListener('pointerdown',\n                    (evt) => { this.onPointerDown(evt); });\n            targetElem.addEventListener('pointerup',\n                     (evt) => { this.onPointerUp(evt); });\n            targetElem.addEventListener('MSGestureStart',\n                    (evt) => { this.onMSGestureStart(evt); });\n            targetElem.addEventListener('MSGestureChange',\n                    (evt) => { this.onMSGestureChange(evt); });\n        });\n    }\n\n    /**\n     * @hidden\n     * Function that is called when scrolling with the mouse wheel or using touchpad\n     */\n    protected onWheel(evt) {\n        // if no scrollbar return\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        // if ctrl key is pressed and the user want to zoom in/out the page\n        if (evt.ctrlKey) {\n            return;\n        }\n        let scrollDeltaX;\n        let scrollDeltaY;\n        const scrollStep = this.wheelStep;\n        const minWheelStep = 1 / this.wheelStep;\n\n        this._startX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n        this._startY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n        if (evt.wheelDeltaX) {\n            /* Option supported on Chrome, Safari, Opera.\n            /* 120 is default for mousewheel on these browsers. Other values are for trackpads */\n            scrollDeltaX = -evt.wheelDeltaX * this.baseDeltaMultiplier;\n\n            if (-minWheelStep < scrollDeltaX && scrollDeltaX < minWheelStep) {\n                scrollDeltaX = Math.sign(scrollDeltaX) * minWheelStep;\n            }\n        } else if (evt.deltaX) {\n            /* For other browsers that don't provide wheelDelta, use the deltaY to determine direction and pass default values. */\n            const deltaScaledX = evt.deltaX * (evt.deltaMode === 0 ?  this.firefoxDeltaMultiplier : 1);\n            scrollDeltaX = this.calcAxisCoords(deltaScaledX, -1, 1);\n        }\n\n        /** Get delta for the Y axis */\n        if (evt.wheelDeltaY) {\n            /* Option supported on Chrome, Safari, Opera.\n            /* 120 is default for mousewheel on these browsers. Other values are for trackpads */\n            scrollDeltaY = -evt.wheelDeltaY * this.baseDeltaMultiplier;\n\n            if (-minWheelStep < scrollDeltaY && scrollDeltaY < minWheelStep) {\n                scrollDeltaY = Math.sign(scrollDeltaY) * minWheelStep;\n            }\n        } else if (evt.deltaY) {\n            /* For other browsers that don't provide wheelDelta, use the deltaY to determine direction and pass default values. */\n            const deltaScaledY = evt.deltaY * (evt.deltaMode === 0 ?  this.firefoxDeltaMultiplier : 1);\n            scrollDeltaY = this.calcAxisCoords(deltaScaledY, -1, 1);\n        }\n        if (scrollDeltaX && this.IgxScrollInertiaDirection === 'horizontal') {\n            this._scrollToX(\n                this._startX + scrollDeltaX * scrollStep\n            );\n            const curScrollLeft = this.IgxScrollInertiaScrollContainer.scrollLeft;\n            const maxScrollLeft = parseInt(this.IgxScrollInertiaScrollContainer.children[0].style.width, 10);\n            if (0 < curScrollLeft && curScrollLeft < maxScrollLeft) {\n                // Prevent navigating through pages when scrolling on Mac\n                evt.preventDefault();\n            }\n        } else if (scrollDeltaY && this.IgxScrollInertiaDirection === 'vertical') {\n            this._scrollToY(\n                this._startY + scrollDeltaY * scrollStep\n            );\n            this.preventParentScroll(evt, true);\n        }\n    }\n\n    /**\n     * @hidden\n     * When there is still room to scroll up/down prevent the parent elements from scrolling too.\n     */\n    protected preventParentScroll(evt, preventDefault) {\n        const curScrollTop = this.IgxScrollInertiaScrollContainer.scrollTop;\n        const maxScrollTop = this.IgxScrollInertiaScrollContainer.children[0].scrollHeight -\n            this.IgxScrollInertiaScrollContainer.offsetHeight;\n        if (0 < curScrollTop && curScrollTop < maxScrollTop) {\n            if (preventDefault) {\n                 evt.preventDefault();\n            }\n            if (evt.stopPropagation) {\n                evt.stopPropagation();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called the first moment we start interacting with the content on a touch device\n     */\n    protected onTouchStart(event) {\n        if (typeof MSGesture === 'function' || !this.IgxScrollInertiaScrollContainer) {\n            return false;\n        }\n\n        // stops any current ongoing inertia\n        cancelAnimationFrame(this._touchInertiaAnimID);\n\n        const touch = event.touches[ 0 ];\n\n        this._startX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n\n        this._startY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n        this._touchStartX = touch.pageX;\n        this._touchStartY = touch.pageY;\n\n        this._lastTouchEnd = new Date().getTime();\n        this._lastTouchX = touch.pageX;\n        this._lastTouchY = touch.pageY;\n        this._savedSpeedsX = [];\n        this._savedSpeedsY = [];\n\n        // Vars regarding swipe offset\n        this._totalMovedX = 0;\n        this._offsetRecorded = false;\n        this._offsetDirection = 0;\n\n        this._touchPrevented = false;\n        if (this.IgxScrollInertiaDirection === 'vertical') {\n            this.preventParentScroll(event, false);\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called when we need to scroll the content based on touch interactions\n     */\n    protected onTouchMove(event) {\n        if (typeof MSGesture === 'function') {\n            this._touchPrevented = false;\n            return false;\n        }\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n\n        const touch = event.touches[ 0 ];\n        const destX = this._startX + (this._touchStartX - touch.pageX) * Math.sign(this.inertiaStep);\n        const destY = this._startY + (this._touchStartY - touch.pageY) * Math.sign(this.inertiaStep);\n\n        /* Handle complex touchmoves when swipe stops but the toch doesn't end and then a swipe is initiated again */\n        /* **********************************************************/\n\n\n        const timeFromLastTouch = (new Date().getTime()) - this._lastTouchEnd;\n        if (timeFromLastTouch !== 0 && timeFromLastTouch < 100) {\n            const speedX = (this._lastTouchX - touch.pageX) / timeFromLastTouch;\n            const speedY = (this._lastTouchY - touch.pageY) / timeFromLastTouch;\n\n            // Save the last 5 speeds between two touchmoves on X axis\n            if (this._savedSpeedsX.length < 5) {\n                this._savedSpeedsX.push(speedX);\n            } else {\n                this._savedSpeedsX.shift();\n                this._savedSpeedsX.push(speedX);\n            }\n\n            // Save the last 5 speeds between two touchmoves on Y axis\n            if (this._savedSpeedsY.length < 5) {\n                this._savedSpeedsY.push(speedY);\n            } else {\n                this._savedSpeedsY.shift();\n                this._savedSpeedsY.push(speedY);\n            }\n        }\n        this._lastTouchEnd = new Date().getTime();\n        this._lastMovedX = this._lastTouchX - touch.pageX;\n        this._lastMovedY = this._lastTouchY - touch.pageY;\n        this._lastTouchX = touch.pageX;\n        this._lastTouchY = touch.pageY;\n\n        this._totalMovedX += this._lastMovedX;\n\n        let scrolledXY; // Object: {x, y}\n        /*\tDo not scroll using touch untill out of the swipeToleranceX bounds */\n        if (Math.abs(this._totalMovedX) < this.swipeToleranceX && !this._offsetRecorded) {\n            scrolledXY = this._scrollTo(this._startX, destY);\n        } else {\n            /*\tRecord the direction the first time we are out of the swipeToleranceX bounds.\n\t\t\t*\tThat way we know which direction we apply the offset so it doesn't hickup when moving out of the swipeToleranceX bounds */\n            if (!this._offsetRecorded) {\n                this._offsetDirection = Math.sign(destX - this._startX);\n                this._offsetRecorded = true;\n            }\n\n            /*\tScroll with offset ammout of swipeToleranceX in the direction we have exited the bounds and\n            don't change it after that ever until touchend and again touchstart */\n            scrolledXY = this._scrollTo(destX - this._offsetDirection * this.swipeToleranceX,\n                destY);\n        }\n\n        if (scrolledXY.x === 0 && scrolledXY.y === 0) {\n            this._touchPrevented = true;\n        }\n\n        // On Safari preventing the touchmove would prevent default page scroll behaviour even if there is the element doesn't have overflow\n        if (this.IgxScrollInertiaDirection === 'vertical') {\n            this.preventParentScroll(event, true);\n        }\n    }\n\n    protected onTouchEnd(event) {\n        if (typeof MSGesture === 'function') {\n            return;\n        }\n        let speedX = 0;\n        let speedY = 0;\n\n        // savedSpeedsX and savedSpeedsY have same length\n        for (let i = 0; i < this._savedSpeedsX.length; i++) {\n            speedX += this._savedSpeedsX[ i ];\n            speedY += this._savedSpeedsY[ i ];\n        }\n        speedX = this._savedSpeedsX.length ? speedX / this._savedSpeedsX.length : 0;\n        speedY = this._savedSpeedsX.length ? speedY / this._savedSpeedsY.length : 0;\n\n         // Use the lastMovedX and lastMovedY to determine if the swipe stops without lifting the finger so we don't start inertia\n        if ((Math.abs(speedX) > 0.1 || Math.abs(speedY) > 0.1) &&\n                        (Math.abs(this._lastMovedX) > 2 || Math.abs(this._lastMovedY) > 2)) {\n                    this._inertiaInit(speedX, speedY);\n        }\n        if (this.IgxScrollInertiaDirection === 'vertical') {\n            this.preventParentScroll(event, false);\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called when we need to detect touch starting on a touch device on IE/Edge\n     */\n    protected onPointerDown(event) {\n        if (!event || (event.pointerType !== 2 && event.pointerType !== 'touch') ||\n            typeof MSGesture !== 'function') {\n            return true;\n        }\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        // setPointerCaptureFName is the name of the function that is supported\n        event.target[this.setPointerCaptureFName](this._pointer = event.pointerId);\n\n        // create gestureObject only one time to prevent overlapping during intertia\n        if (!this._gestureObject) {\n            this._gestureObject = new MSGesture();\n            this._gestureObject.target = this.parentElement;\n        }\n        this._gestureObject.addPointer(this._pointer);\n    }\n\n    /**\n     * @hidden\n     * Function that is called when we need to detect touch ending on a touch device on IE/Edge\n     */\n    protected onPointerUp(event) {\n        if (!this._pointer) {\n            return true;\n        }\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        /* releasePointerCaptureFName is the name of the function that is supported */\n        event.target[ this.releasePointerCaptureFName ](this._pointer);\n\n        delete this._pointer;\n    }\n\n    /**\n     * @hidden\n     *  Function that is called when a gesture begins on IE/Edge\n     */\n    protected onMSGestureStart(event) {\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        this._startX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n        this._startY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n\n        this._touchStartX = event.screenX;\n        this._touchStartY = event.screenY;\n\n        // Vars regarding swipe offset\n        this._totalMovedX = 0;\n        this._offsetRecorded = false;\n        this._offsetDirection = 0;\n        return false;\n    }\n\n    /**\n     * @hidden\n     * Function that is called when a we need to scroll based on the gesture performed on IE/Edge\n     */\n    protected onMSGestureChange(event) {\n        if (!this.IgxScrollInertiaScrollContainer) {\n            return;\n        }\n        const touchPos = event,\n            destX = this._startX + this._touchStartX - touchPos.screenX,\n            destY = this._startY + this._touchStartY - touchPos.screenY;\n        /* Logic regarding x tolerance to prevent accidental horizontal scrolling when scrolling vertically */\n        this._totalMovedX = this._touchStartX - touchPos.screenX;\n        if (Math.abs(this._totalMovedX) < this.swipeToleranceX && !this._offsetRecorded) {\n            /* Do not scroll horizontally yet while in the tolerance range */\n            this._scrollToY(destY);\n        } else {\n            if (!this._offsetRecorded) {\n                this._offsetDirection = Math.sign(destX - this._startX);\n                this._offsetRecorded = true;\n            }\n            /* Once the tolerance is exceeded it can be scrolled horizontally */\n            this._scrollTo(destX - this._offsetDirection * this.swipeToleranceX, destY);\n        }\n\n        return false;\n    }\n\n    private calcAxisCoords(target, min, max) {\n        if (target === undefined || target < min) {\n            target = min;\n        } else if (target > max) {\n            target = max;\n        }\n\n        return target;\n    }\n\n    private _scrollTo(destX, destY) {\n        const curPosX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n        const curPosY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n         // TODO Trigger scrolling event?\n        const scrolledX = this._scrollToX(destX);\n        const scrolledY = this._scrollToY(destY);\n\n        return { x: scrolledX, y: scrolledY };\n    }\n    private _scrollToX(dest) {\n        this.IgxScrollInertiaScrollContainer.scrollLeft = dest;\n    }\n    private _scrollToY(dest) {\n        this.IgxScrollInertiaScrollContainer.scrollTop = dest;\n    }\n\n   protected _inertiaInit(speedX, speedY) {\n    const stepModifer = this.inertiaStep,\n        inertiaDuration = this.inertiaDuration;\n    let x = 0;\n    this._nextX = this.IgxScrollInertiaScrollContainer.scrollLeft;\n    this._nextY = this.IgxScrollInertiaScrollContainer.scrollTop;\n\n    // Sets timeout until executing next movement iteration of the inertia\n    const inertiaStep = () => {\n        if (x > 6) {\n            cancelAnimationFrame(this._touchInertiaAnimID);\n            return;\n        }\n\n        if (Math.abs(speedX) > Math.abs(speedY)) {\n            x += 0.05 / (1 * inertiaDuration);\n        } else {\n            x += 0.05 / (1 * inertiaDuration);\n        }\n\n        if (x <= 1) {\n            // We use constant quation to determine the offset without speed falloff befor x reaches 1\n            if (Math.abs(speedY) <= Math.abs(speedX) * this.inertiaDeltaY) {\n                this._nextX += 1 * speedX * 15 * stepModifer;\n            }\n            if (Math.abs(speedY) >= Math.abs(speedX) * this.inertiaDeltaX) {\n                this._nextY += 1 * speedY * 15 * stepModifer;\n            }\n        } else {\n            // We use the quation \"y = 2 / (x + 0.55) - 0.3\" to determine the offset\n            if (Math.abs(speedY) <= Math.abs(speedX) * this.inertiaDeltaY) {\n                this._nextX += Math.abs(2 / (x + 0.55) - 0.3) * speedX * 15 * stepModifer;\n            }\n            if (Math.abs(speedY) >= Math.abs(speedX) * this.inertiaDeltaX) {\n                this._nextY += Math.abs(2 / (x + 0.55) - 0.3) * speedY * 15 * stepModifer;\n            }\n        }\n\n        // If we have mixed environment we use the default behaviour. i.e. touchscreen + mouse\n        this._scrollTo(this._nextX, this._nextY);\n\n        this._touchInertiaAnimID = requestAnimationFrame(inertiaStep);\n    };\n\n    // Start inertia and continue it recursively\n    this._touchInertiaAnimID = requestAnimationFrame(inertiaStep);\n   }\n\n    ngOnDestroy() {\n        this._zone.runOutsideAngular(() => {\n            const targetElem = this.parentElement;\n            if (!targetElem) {\n                return;\n            }\n            targetElem.removeEventListener('wheel',\n                (evt) => { this.onWheel(evt); });\n            targetElem.removeEventListener('touchstart',\n                (evt) => { this.onTouchStart(evt); });\n            targetElem.removeEventListener('touchmove',\n                (evt) => { this.onTouchMove(evt); });\n            targetElem.removeEventListener('touchend',\n                (evt) => { this.onTouchEnd(evt); });\n            targetElem.removeEventListener('pointerdown',\n                (evt) => { this.onPointerDown(evt); });\n            targetElem.removeEventListener('pointerup',\n                (evt) => { this.onPointerUp(evt); });\n            targetElem.removeEventListener('MSGestureStart',\n                (evt) => { this.onMSGestureStart(evt); });\n            targetElem.removeEventListener('MSGestureChange',\n                (evt) => { this.onMSGestureChange(evt); });\n        });\n    }\n\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxScrollInertiaDirective],\n    exports: [IgxScrollInertiaDirective],\n    imports: [CommonModule]\n})\n\nexport class IgxScrollInertiaModule {\n}\n\n","import { Injectable, Component } from '@angular/core';\nimport { IgxGridForOfDirective } from './for_of.directive';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxForOfSyncService {\n\n    private _master: Map<string, IgxGridForOfDirective<any>> = new Map<string, IgxGridForOfDirective<any>>();\n\n    /**\n     * @hidden\n     */\n    public isMaster(directive: IgxGridForOfDirective<any>): boolean {\n        return this._master.get(directive.igxForScrollOrientation) === directive;\n    }\n\n    /**\n     * @hidden\n     */\n    public setMaster(directive: IgxGridForOfDirective<any>, forced = false) {\n        const orientation = directive.igxForScrollOrientation;\n        if (orientation && (forced || !this._master.has(orientation))) {\n            this._master.set(orientation, directive);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public resetMaster() {\n        this._master.clear();\n    }\n\n    /**\n     * @hidden\n     */\n    public sizesCache(dir: string): number[] {\n        return this._master.get(dir).sizesCache;\n    }\n\n    /**\n     * @hidden\n     */\n    public chunkSize(dir: string): number {\n        return this._master.get(dir).state.chunkSize;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxForOfScrollSyncService {\n    private _masterScroll: Map<string, VirtualHelperBaseDirective> = new Map<string, any>();\n    public setScrollMaster(dir: string, scroll: VirtualHelperBaseDirective) {\n        this._masterScroll.set(dir, scroll);\n    }\n\n    public getScrollMaster(dir: string) {\n        return this._masterScroll.get(dir);\n    }\n}\n","import { CommonModule, DOCUMENT, NgForOfContext } from '@angular/common';\nimport {\n    ChangeDetectorRef,\n    ComponentFactory,\n    ComponentFactoryResolver,\n    ComponentRef,\n    Directive,\n    DoCheck,\n    EmbeddedViewRef,\n    EventEmitter,\n    Input,\n    IterableChanges,\n    IterableDiffer,\n    IterableDiffers,\n    NgModule,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    TrackByFunction,\n    ViewContainerRef,\n    AfterViewInit,\n    Inject\n} from '@angular/core';\n\nimport { DisplayContainerComponent } from './display.container';\nimport { HVirtualHelperComponent } from './horizontal.virtual.helper.component';\nimport { VirtualHelperComponent } from './virtual.helper.component';\nimport { IgxScrollInertiaModule } from './../scroll-inertia/scroll_inertia.directive';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from './for_of.sync.service';\nimport { Subject } from 'rxjs';\nimport { takeUntil, filter, throttleTime, first } from 'rxjs/operators';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { IBaseEventArgs, PlatformUtil } from '../../core/utils';\nimport { VirtualHelperBaseDirective } from './base.helper.component';\n\n/**\n *  @publicApi\n */\nexport class IgxForOfContext<T> {\n    constructor(\n       public $implicit: T,\n       public index: number,\n       public count: number\n    ) {}\n\n    /**\n     * A function that returns whether the element is the first or not\n     */\n    get first(): boolean { return this.index === 0; }\n\n    /**\n     * A function that returns whether the element is the last or not\n     */\n    get last(): boolean { return this.index === this.count - 1; }\n\n    /**\n     * A function that returns whether the element is even or not\n     */\n    get even(): boolean { return this.index % 2 === 0; }\n\n    /**\n     * A function that returns whether the element is odd or not\n     */\n    get odd(): boolean { return !this.even; }\n\n}\n\n@Directive({ selector: '[igxFor][igxForOf]',\nproviders: [ IgxForOfScrollSyncService ] })\nexport class IgxForOfDirective<T> implements OnInit, OnChanges, DoCheck, OnDestroy, AfterViewInit {\n\n    /**\n     * An @Input property that sets the data to be rendered.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\"></ng-template>\n     * ```\n     */\n    @Input()\n    public igxForOf: any[];\n\n    /**\n     * An @Input property that sets the property name from which to read the size in the data object.\n     */\n    @Input()\n    public igxForSizePropName;\n\n    /**\n     * An @Input property that specifies the scroll orientation.\n     * Scroll orientation can be \"vertical\" or \"horizontal\".\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\"></ng-template>\n     * ```\n     */\n    @Input()\n    public igxForScrollOrientation = 'vertical';\n\n    /**\n     * Optionally pass the parent `igxFor` instance to create a virtual template scrolling both horizontally and vertically.\n     * ```html\n     * <ng-template #scrollContainer igxFor let-rowData [igxForOf]=\"data\"\n     *       [igxForScrollOrientation]=\"'vertical'\"\n     *       [igxForContainerSize]=\"'500px'\"\n     *       [igxForItemSize]=\"'50px'\"\n     *       let-rowIndex=\"index\">\n     *       <div [style.display]=\"'flex'\" [style.height]=\"'50px'\">\n     *           <ng-template #childContainer igxFor let-item [igxForOf]=\"data\"\n     *               [igxForScrollOrientation]=\"'horizontal'\"\n     *               [igxForScrollContainer]=\"parentVirtDir\"\n     *               [igxForContainerSize]=\"'500px'\">\n     *                   <div [style.min-width]=\"'50px'\">{{rowIndex}} : {{item.text}}</div>\n     *           </ng-template>\n     *       </div>\n     * </ng-template>\n     * ```\n     */\n    @Input()\n    public igxForScrollContainer: any;\n\n    /**\n     * An @Input property that sets the px-affixed size of the container along the axis of scrolling.\n     * For \"horizontal\" orientation this value is the width of the container and for \"vertical\" is the height.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForContainerSize]=\"'500px'\"\n     *      [igxForScrollOrientation]=\"'horizontal'\">\n     * </ng-template>\n     * ```\n     */\n    @Input()\n    public igxForContainerSize: any;\n\n    /**\n     * An @Input property that sets the px-affixed size of the item along the axis of scrolling.\n     * For \"horizontal\" orientation this value is the width of the column and for \"vertical\" is the height or the row.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" [igxForItemSize]=\"'50px'\"></ng-template>\n     * ```\n     */\n    @Input()\n    public igxForItemSize: any;\n\n    /**\n     * The total count of the virtual data items, when using remote service.\n     * Similar to the property totalItemCount, but this will allow setting the data count into the template.\n     * ```html\n     * <ng-template igxFor let-item [igxForOf]=\"data | async\" [igxForTotalItemCount]=\"count | async\"\n     *  [igxForContainerSize]=\"'500px'\" [igxForItemSize]=\"'50px'\"></ng-template>\n     * ```\n     */\n    @Input()\n    get igxForTotalItemCount(): number {\n        return this.totalItemCount;\n    }\n    set igxForTotalItemCount(value: number) {\n        this.totalItemCount = value;\n    }\n    /**\n     * @hidden\n     */\n    public dc: ComponentRef<DisplayContainerComponent>;\n\n    /**\n     * The current state of the directive. It contains `startIndex` and `chunkSize`.\n     * state.startIndex - The index of the item at which the current visible chunk begins.\n     * state.chunkSize - The number of items the current visible chunk holds.\n     * These options can be used when implementing remote virtualization as they provide the necessary state information.\n     * ```typescript\n     * const gridState = this.parentVirtDir.state;\n     * ```\n     */\n    public state: IForOfState = {\n        startIndex: 0,\n        chunkSize: 0\n    };\n    /**\n     * The total count of the virtual data items, when using remote service.\n     * ```typescript\n     * this.parentVirtDir.totalItemCount = data.Count;\n     * ```\n     */\n    public get totalItemCount() {\n        return this._totalItemCount;\n    }\n\n    public set totalItemCount(val) {\n        if (this._totalItemCount !== val) {\n            this._totalItemCount = val;\n            // update sizes in case total count changes.\n            const newSize = this.initSizesCache(this.igxForOf);\n            const sizeDiff = this.scrollComponent.size - newSize;\n            this.scrollComponent.size = newSize;\n            const lastChunkExceeded = this.state.startIndex + this.state.chunkSize > val;\n            if (lastChunkExceeded) {\n                this.state.startIndex = val - this.state.chunkSize;\n            }\n            this._adjustScrollPositionAfterSizeChange(sizeDiff);\n        }\n    }\n\n    private _totalItemCount: number = null;\n\n    /**\n     * An event that is emitted after a new chunk has been loaded.\n     * ```html\n     * <ng-template igxFor [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" (onChunkLoad)=\"chunkLoad($event)\"></ng-template>\n     * ```\n     * ```typescript\n     * chunkLoad(e){\n     * alert(\"chunk loaded!\");\n     * }\n     * ```\n     */\n    @Output()\n    public onChunkLoad = new EventEmitter<IForOfState>();\n\n    /**\n     * @hidden @internal\n     * An event that is emitted when scrollbar visibility has changed.\n     */\n    @Output()\n    public onScrollbarVisibilityChanged = new EventEmitter<any>();\n\n    /**\n     * An event that is emitted after the rendered content size of the igxForOf has been changed.\n     */\n    @Output()\n    public onContentSizeChange = new EventEmitter<any>();\n\n    /**\n     * An event that is emitted after data has been changed.\n     * ```html\n     * <ng-template igxFor [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" (onDataChanged)=\"dataChanged($event)\"></ng-template>\n     * ```\n     * ```typescript\n     * dataChanged(e){\n     * alert(\"data changed!\");\n     * }\n     * ```\n     */\n    @Output()\n    public onDataChanged = new EventEmitter<any>();\n\n    @Output()\n    public onBeforeViewDestroyed = new EventEmitter<EmbeddedViewRef<any>>();\n\n    /**\n     * An event that is emitted on chunk loading to emit the current state information - startIndex, endIndex, totalCount.\n     * Can be used for implementing remote load on demand for the igxFor data.\n     * ```html\n     * <ng-template igxFor [igxForOf]=\"data\" [igxForScrollOrientation]=\"'horizontal'\" (onChunkPreload)=\"chunkPreload($event)\"></ng-template>\n     * ```\n     * ```typescript\n     * chunkPreload(e){\n     * alert(\"chunk is loading!\");\n     * }\n     * ```\n     */\n    @Output()\n    public onChunkPreload = new EventEmitter<IForOfState>();\n    protected func;\n    protected _sizesCache: number[] = [];\n    protected scrollComponent: VirtualHelperBaseDirective;\n    protected _differ: IterableDiffer<T> | null = null;\n    protected _trackByFn: TrackByFunction<T>;\n    protected heightCache = [];\n    private _adjustToIndex;\n    private MAX_PERF_SCROLL_DIFF = 4;\n\n\n    public get displayContainer(): HTMLElement | undefined {\n        return this.dc?.instance?._viewContainer?.element?.nativeElement;\n    }\n\n    public get virtualHelper() {\n        return this.scrollComponent.nativeElement;\n    }\n\n    protected get sizesCache(): number[] {\n        return this._sizesCache;\n    }\n    protected set sizesCache(value: number[]) {\n        this._sizesCache = value;\n    }\n\n    private get _isScrolledToBottom() {\n        if (!this.getScroll()) {\n            return true;\n        }\n        const scrollHeight = this.getScroll().scrollHeight;\n        // Use === and not >= because `scrollTop + container size` can't be bigger than `scrollHeight`, unless something isn't updated.\n        // Also use Math.round because Chrome has some inconsistencies and `scrollTop + container` can be float when zooming the page.\n        return Math.round(this.getScroll().scrollTop + this.igxForContainerSize) === scrollHeight;\n    }\n\n    private get _isAtBottomIndex() {\n        return this.igxForOf && this.state.startIndex + this.state.chunkSize > this.igxForOf.length;\n    }\n\n    // Start properties related to virtual height handling due to browser limitation\n    /** Maximum height for an element of the browser. */\n    private _maxHeight;\n\n    /** Height that is being virtualized. */\n    protected _virtHeight = 0;\n\n    /**\n     * Ratio for height that's being virtualizaed and the one visible\n     * If _virtHeightRatio = 1, the visible height and the virtualized are the same, also _maxHeight > _virtHeight.\n     */\n    private _virtHeightRatio = 1;\n\n    /** Internal track for scroll top that is being virtualized */\n    protected _virtScrollTop = 0;\n\n    /** If the next onScroll event is triggered due to internal setting of scrollTop */\n    protected _bScrollInternal = false;\n    // End properties related to virtual height handling\n\n    protected _embeddedViews: Array<EmbeddedViewRef<any>> = [];\n\n    protected contentResizeNotify = new Subject();\n    protected contentObserver: ResizeObserver;\n\n    /**\n     * @hidden\n     */\n    protected destroy$ = new Subject<any>();\n\n    constructor(\n        private _viewContainer: ViewContainerRef,\n        protected _template: TemplateRef<NgForOfContext<T>>,\n        protected _differs: IterableDiffers,\n        private resolver: ComponentFactoryResolver,\n        public cdr: ChangeDetectorRef,\n        protected _zone: NgZone,\n        protected syncScrollService: IgxForOfScrollSyncService,\n        protected platformUtil: PlatformUtil,\n        @Inject(DOCUMENT)\n        protected document: any,\n    ) { }\n\n    /**\n     * @hidden\n     */\n    public get isRemote(): boolean {\n        return this.totalItemCount !== null;\n    }\n\n    /**\n     *\n     * Gets/Sets the scroll position.\n     * ```typescript\n     * const position = directive.scrollPosition;\n     * directive.scrollPosition = value;\n     * ```\n     */\n    public get scrollPosition(): number {\n        return this.scrollComponent.scrollAmount;\n    }\n    public set scrollPosition(val: number) {\n        if (val === this.scrollComponent.scrollAmount) {\n            return;\n        }\n        if (this.igxForScrollOrientation === 'horizontal' && this.scrollComponent) {\n            this.scrollComponent.nativeElement.scrollLeft = val;\n        } else if (this.scrollComponent) {\n            this.scrollComponent.nativeElement.scrollTop = val;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected removeScrollEventListeners() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this._zone.runOutsideAngular(() =>\n                this.scrollComponent?.nativeElement?.removeEventListener('scroll', this.func)\n            );\n        } else {\n            this._zone.runOutsideAngular(() =>\n                this.scrollComponent?.nativeElement?.removeEventListener('scroll', this.verticalScrollHandler)\n            );\n        }\n    }\n\n    public verticalScrollHandler(event) {\n        this.onScroll(event);\n    }\n\n    public isScrollable() {\n        return this.scrollComponent.size > parseInt(this.igxForContainerSize, 10);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit(): void {\n        let totalSize = 0;\n        const vc = this.igxForScrollContainer ? this.igxForScrollContainer._viewContainer : this._viewContainer;\n        this.igxForSizePropName = this.igxForSizePropName || 'width';\n\n        const dcFactory: ComponentFactory<DisplayContainerComponent> = this.resolver.resolveComponentFactory(DisplayContainerComponent);\n        this.dc = this._viewContainer.createComponent(dcFactory, 0);\n        this.dc.instance.scrollDirection = this.igxForScrollOrientation;\n        if (typeof MSGesture === 'function') {\n            // On Edge and IE when scrolling on touch the page scroll instead of the grid.\n            this.dc.instance._viewContainer.element.nativeElement.style.touchAction = 'none';\n        }\n        if (this.igxForOf && this.igxForOf.length) {\n            totalSize = this.initSizesCache(this.igxForOf);\n            this.scrollComponent = this.syncScrollService.getScrollMaster(this.igxForScrollOrientation);\n            this.state.chunkSize = this._calculateChunkSize();\n            this.dc.instance.notVirtual = !(this.igxForContainerSize && this.state.chunkSize < this.igxForOf.length);\n            if (this.scrollComponent && !this.scrollComponent.destroyed) {\n                this.state.startIndex = Math.min(this.getIndexAt(this.scrollPosition, this.sizesCache, 0),\n                    this.igxForOf.length - this.state.chunkSize);\n            }\n            for (let i = this.state.startIndex; i < this.state.startIndex + this.state.chunkSize &&\n                    this.igxForOf[i] !== undefined; i++) {\n                const input = this.igxForOf[i];\n                const embeddedView = this.dc.instance._vcr.createEmbeddedView(\n                    this._template,\n                    new IgxForOfContext<T>(input, this.getContextIndex(input), this.igxForOf.length)\n                );\n                this._embeddedViews.push(embeddedView);\n            }\n        }\n\n        if (this.igxForScrollOrientation === 'vertical') {\n            this.dc.instance._viewContainer.element.nativeElement.style.top = '0px';\n            const factory: ComponentFactory<VirtualHelperComponent> = this.resolver.resolveComponentFactory(VirtualHelperComponent);\n            this.scrollComponent = vc.createComponent(factory).instance;\n            this._maxHeight = this._calcMaxBrowserHeight();\n            this.scrollComponent.size = this.igxForOf ? this._calcHeight() : 0;\n            this.syncScrollService.setScrollMaster(this.igxForScrollOrientation, this.scrollComponent);\n            this._zone.runOutsideAngular(() => {\n                this.verticalScrollHandler = this.verticalScrollHandler.bind(this);\n                this.scrollComponent.nativeElement.addEventListener('scroll', this.verticalScrollHandler);\n                this.dc.instance.scrollContainer = this.scrollComponent.nativeElement;\n            });\n            const destructor = takeUntil<any>(this.destroy$);\n            this.contentResizeNotify.pipe(destructor,\n            filter(() => this.igxForContainerSize && this.igxForOf && this.igxForOf.length > 0),\n            throttleTime(40, undefined, {leading: true, trailing: true}))\n            .subscribe(() => {\n                this._zone.runTask(() => {\n                    this.updateSizes();\n                });\n            });\n        }\n\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.func = (evt) => { this.onHScroll(evt); };\n            this.scrollComponent = this.syncScrollService.getScrollMaster(this.igxForScrollOrientation);\n            if (!this.scrollComponent) {\n                const hvFactory: ComponentFactory<HVirtualHelperComponent> =\n                    this.resolver.resolveComponentFactory(HVirtualHelperComponent);\n                this.scrollComponent = vc.createComponent(hvFactory).instance;\n                this.scrollComponent.size = totalSize;\n                this.syncScrollService.setScrollMaster(this.igxForScrollOrientation, this.scrollComponent);\n                this._zone.runOutsideAngular(() => {\n                    this.scrollComponent.nativeElement.addEventListener('scroll', this.func);\n                    this.dc.instance.scrollContainer = this.scrollComponent.nativeElement;\n                });\n            } else {\n                this._zone.runOutsideAngular(() => {\n                    this.scrollComponent.nativeElement.addEventListener('scroll', this.func);\n                    this.dc.instance.scrollContainer = this.scrollComponent.nativeElement;\n                });\n            }\n            this._updateHScrollOffset();\n        }\n    }\n\n    ngAfterViewInit(): void {\n        if (this.igxForScrollOrientation === 'vertical') {\n            this._zone.runOutsideAngular(() => {\n                this.contentObserver = new ResizeObserver(() => this.contentResizeNotify.next());\n                this.contentObserver.observe(this.dc.instance._viewContainer.element.nativeElement);\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.removeScrollEventListeners();\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        if (this.contentObserver) {\n            this.contentObserver.disconnect();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnChanges(changes: SimpleChanges): void {\n        const forOf = 'igxForOf';\n        if (forOf in changes) {\n            const value = changes[forOf].currentValue;\n            if (!this._differ && value) {\n                try {\n                    this._differ = this._differs.find(value).create(this.igxForTrackBy);\n                } catch (e) {\n                    throw new Error(\n                        `Cannot find a differ supporting object \"${value}\" of type \"${getTypeNameForDebugging(value)}\".\n                     NgFor only supports binding to Iterables such as Arrays.`);\n                }\n            }\n        }\n        const defaultItemSize = 'igxForItemSize';\n        if (defaultItemSize in changes && !changes[defaultItemSize].firstChange &&\n            this.igxForScrollOrientation === 'vertical' && this.igxForOf) {\n            // handle default item size changed.\n            this.initSizesCache(this.igxForOf);\n            this._applyChanges();\n        }\n        const containerSize = 'igxForContainerSize';\n        if (containerSize in changes && !changes[containerSize].firstChange && this.igxForOf) {\n            this._recalcOnContainerChange(changes);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck(): void {\n        if (this._differ) {\n            const changes = this._differ.diff(this.igxForOf);\n            if (changes) {\n                //  re-init cache.\n                if (!this.igxForOf) {\n                    this.igxForOf = [];\n                }\n                this._updateSizeCache();\n                this._zone.run(() => {\n                    this._applyChanges();\n                    this.cdr.markForCheck();\n                    this._updateScrollOffset();\n                    this.onDataChanged.emit();\n                });\n            }\n        }\n    }\n\n    /**\n     * Shifts the scroll thumb position.\n     * ```typescript\n     * this.parentVirtDir.addScrollTop(5);\n     * ```\n     * @param addTop negative value to scroll up and positive to scroll down;\n     */\n    public addScrollTop(addTop: number): boolean {\n        if (addTop === 0 && this.igxForScrollOrientation === 'horizontal') {\n            return false;\n        }\n        const originalVirtScrollTop = this._virtScrollTop;\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const maxVirtScrollTop = this._virtHeight - containerSize;\n\n        this._bScrollInternal = true;\n        this._virtScrollTop += addTop;\n        this._virtScrollTop = this._virtScrollTop > 0 ?\n            (this._virtScrollTop < maxVirtScrollTop ? this._virtScrollTop : maxVirtScrollTop) :\n            0;\n\n        this.scrollPosition += addTop / this._virtHeightRatio;\n        if (Math.abs(addTop / this._virtHeightRatio) < 1) {\n            // Actual scroll delta that was added is smaller than 1 and onScroll handler doesn't trigger when scrolling < 1px\n            const scrollOffset = this.fixedUpdateAllElements(this._virtScrollTop);\n            // scrollOffset = scrollOffset !== parseInt(this.igxForItemSize, 10) ? scrollOffset : 0;\n            this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n        }\n\n        const maxRealScrollTop = this.scrollComponent.nativeElement.scrollHeight - containerSize;\n        if ((this._virtScrollTop > 0 && this.scrollPosition === 0) ||\n            (this._virtScrollTop < maxVirtScrollTop && this.scrollPosition === maxRealScrollTop)) {\n            // Actual scroll position is at the top or bottom, but virtual one is not at the top or bottom (there's more to scroll)\n            // Recalculate actual scroll position based on the virtual scroll.\n            this.scrollPosition = this._virtScrollTop / this._virtHeightRatio;\n        } else if (this._virtScrollTop === 0 && this.scrollPosition > 0) {\n            // Actual scroll position is not at the top, but virtual scroll is. Just update the actual scroll\n            this.scrollPosition = 0;\n        } else if (this._virtScrollTop === maxVirtScrollTop && this.scrollPosition < maxRealScrollTop) {\n            // Actual scroll position is not at the bottom, but virtual scroll is. Just update the acual scroll\n            this.scrollPosition = maxRealScrollTop;\n        }\n        return this._virtScrollTop !== originalVirtScrollTop;\n    }\n\n    /**\n     * Scrolls to the specified index.\n     * ```typescript\n     * this.parentVirtDir.scrollTo(5);\n     * ```\n     * @param index\n     */\n    public scrollTo(index) {\n        if (index < 0 || index > (this.isRemote ? this.totalItemCount : this.igxForOf.length) - 1) {\n            return;\n        }\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const isPrevItem = index < this.state.startIndex || this.scrollPosition > this.sizesCache[index];\n        let nextScroll = isPrevItem ? this.sizesCache[index] : this.sizesCache[index + 1] - containerSize;\n        if (nextScroll < 0) {\n            return;\n        }\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.scrollPosition = nextScroll;\n        } else {\n            const maxVirtScrollTop = this._virtHeight - containerSize;\n            if (nextScroll > maxVirtScrollTop) {\n                nextScroll = maxVirtScrollTop;\n            }\n            this._bScrollInternal = true;\n            this._virtScrollTop = nextScroll;\n            this.scrollPosition = this._virtScrollTop / this._virtHeightRatio;\n            this._adjustToIndex = !isPrevItem ? index : null;\n        }\n    }\n\n    /**\n     * Scrolls by one item into the appropriate next direction.\n     * For \"horizontal\" orientation that will be the right column and for \"vertical\" that is the lower row.\n     * ```typescript\n     * this.parentVirtDir.scrollNext();\n     * ```\n     */\n    public scrollNext() {\n        const scr = Math.ceil(this.scrollPosition);\n        const endIndex = this.getIndexAt(\n            scr + parseInt(this.igxForContainerSize, 10),\n            this.sizesCache,\n            0\n        );\n        this.scrollTo(endIndex);\n    }\n\n    /**\n     * Scrolls by one item into the appropriate previous direction.\n     * For \"horizontal\" orientation that will be the left column and for \"vertical\" that is the upper row.\n     * ```typescript\n     * this.parentVirtDir.scrollPrev();\n     * ```\n     */\n    public scrollPrev() {\n        this.scrollTo(this.state.startIndex - 1);\n    }\n\n    /**\n     * Scrolls by one page into the appropriate next direction.\n     * For \"horizontal\" orientation that will be one view to the right and for \"vertical\" that is one view to the bottom.\n     * ```typescript\n     * this.parentVirtDir.scrollNextPage();\n     * ```\n     */\n    public scrollNextPage() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.scrollPosition += parseInt(this.igxForContainerSize, 10);\n        } else {\n            this.addScrollTop(parseInt(this.igxForContainerSize, 10));\n        }\n    }\n\n    /**\n     * Scrolls by one page into the appropriate previous direction.\n     * For \"horizontal\" orientation that will be one view to the left and for \"vertical\" that is one view to the top.\n     * ```typescript\n     * this.parentVirtDir.scrollPrevPage();\n     * ```\n     */\n    public scrollPrevPage() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.scrollPosition -= parseInt(this.igxForContainerSize, 10);\n        } else {\n            const containerSize = (parseInt(this.igxForContainerSize, 10));\n            this.addScrollTop(-containerSize);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getColumnScrollLeft(colIndex) {\n        return this.sizesCache[colIndex];\n    }\n\n    /**\n     * Returns the total number of items that are fully visible.\n     * ```typescript\n     * this.parentVirtDir.getItemCountInView();\n     * ```\n     */\n    public getItemCountInView() {\n        let startIndex = this.getIndexAt(\n            this.scrollPosition,\n            this.sizesCache,\n            0\n        );\n        if (this.scrollPosition - this.sizesCache[startIndex] > 0) {\n            // fisrt item is not fully in view\n            startIndex++;\n        }\n        const endIndex = this.getIndexAt(\n            this.scrollPosition + parseInt(this.igxForContainerSize, 10),\n            this.sizesCache,\n            0\n        );\n        return endIndex - startIndex;\n    }\n\n    /**\n     * Returns a reference to the scrollbar DOM element.\n     * This is either a vertical or horizontal scrollbar depending on the specified igxForScrollOrientation.\n     * ```typescript\n     * dir.getScroll();\n     * ```\n     */\n    public getScroll() {\n        return this.scrollComponent?.nativeElement;\n    }\n    /**\n     * Returns the size of the element at the specified index.\n     * ```typescript\n     * this.parentVirtDir.getSizeAt(1);\n     * ```\n     */\n    public getSizeAt(index: number) {\n        return this.sizesCache[index + 1] - this.sizesCache[index];\n    }\n\n    /**\n     * @hidden\n     * Function that is called to get the native scrollbar size that the browsers renders.\n     */\n    public getScrollNativeSize() {\n        return this.scrollComponent ? this.scrollComponent.scrollNativeSize : 0;\n    }\n\n    /**\n     * Returns the scroll offset of the element at the specified index.\n     * ```typescript\n     * this.parentVirtDir.getScrollForIndex(1);\n     * ```\n     */\n    public getScrollForIndex(index: number, bottom?: boolean) {\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const scroll = bottom ? Math.max(0, this.sizesCache[index + 1] - containerSize) : this.sizesCache[index];\n        return scroll;\n    }\n\n    /**\n     * @hidden\n     * Function that is called when scrolling vertically\n     */\n    protected onScroll(event) {\n        /* in certain situations this may be called when no scrollbar is visible */\n        if (!parseInt(this.scrollComponent.nativeElement.style.height, 10)) {\n            return;\n        }\n        if (!this._bScrollInternal) {\n            this._calcVirtualScrollTop(event.target.scrollTop);\n        } else {\n            this._bScrollInternal = false;\n        }\n        const prevStartIndex = this.state.startIndex;\n        const scrollOffset = this.fixedUpdateAllElements(this._virtScrollTop);\n\n        this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n\n        this.dc.changeDetectorRef.detectChanges();\n        if (prevStartIndex !== this.state.startIndex) {\n            this.onChunkLoad.emit(this.state);\n        }\n    }\n\n    protected updateSizes() {\n        this.recalcUpdateSizes();\n        this._applyChanges();\n        this._updateScrollOffset();\n        this.onContentSizeChange.emit();\n    }\n\n    /**\n     * @hidden\n     * Function that recaculates and updates cache sizes.\n     */\n    public recalcUpdateSizes() {\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        const diffs = [];\n        let totalDiff = 0;\n        const l = this._embeddedViews.length;\n        const rNodes = this._embeddedViews.map(view =>\n            view.rootNodes.find(node => node.nodeType === Node.ELEMENT_NODE) || view.rootNodes[0].nextElementSibling);\n        for (let i = 0; i < l; i++) {\n            const rNode = rNodes[i];\n            if (rNode) {\n                const h = rNode.offsetHeight || parseInt(this.igxForItemSize, 10);\n                const index = this.state.startIndex + i;\n                if (!this.isRemote && !this.igxForOf[index]) {\n                    continue;\n                }\n                const oldVal = dimension === 'height' ? this.heightCache[index] : this.igxForOf[index][dimension];\n                const newVal = dimension === 'height' ? h : rNode.clientWidth;\n                if (dimension === 'height') {\n                    this.heightCache[index] = newVal;\n                } else {\n                    this.igxForOf[index][dimension] = newVal;\n                }\n                const currDiff = newVal - oldVal;\n                diffs.push(currDiff);\n                totalDiff += currDiff;\n                this.sizesCache[index + 1] += totalDiff;\n            }\n        }\n        // update cache\n        if (Math.abs(totalDiff) > 0) {\n            for (let j = this.state.startIndex + this.state.chunkSize + 1; j < this.sizesCache.length; j++) {\n                this.sizesCache[j] += totalDiff;\n            }\n\n            // update scrBar heights/widths\n            if (this.igxForScrollOrientation === 'horizontal') {\n                const totalWidth = parseInt(this.scrollComponent.nativeElement.children[0].style.width, 10) + totalDiff;\n                this.scrollComponent.nativeElement.children[0].style.width = totalWidth + 'px';\n            }\n            const reducer = (acc, val) => acc + val;\n            if (this.igxForScrollOrientation === 'vertical') {\n                const scrToBottom = this._isScrolledToBottom && !this.dc.instance.notVirtual;\n                const hSum = this.heightCache.reduce(reducer);\n                if (hSum > this._maxHeight) {\n                    this._virtHeightRatio = hSum / this._maxHeight;\n                }\n                this.scrollComponent.size = Math.min(this.scrollComponent.size + totalDiff, this._maxHeight);\n                this._virtHeight = hSum;\n                if (!this.scrollComponent.destroyed) {\n                    this.scrollComponent.cdr.detectChanges();\n                }\n                if (scrToBottom && !this._isAtBottomIndex) {\n                    const containerSize = parseInt(this.igxForContainerSize, 10);\n                    const maxVirtScrollTop = this._virtHeight - containerSize;\n                    this._bScrollInternal = true;\n                    this._virtScrollTop = maxVirtScrollTop;\n                    this.scrollPosition = maxVirtScrollTop;\n                    return;\n                }\n                if (this._adjustToIndex) {\n                    // in case scrolled to specific index where after scroll heights are changed\n                    // need to adjust the offsets so that item is last in view.\n                    const updatesToIndex = this._adjustToIndex - this.state.startIndex + 1;\n                    const sumDiffs = diffs.slice(0, updatesToIndex).reduce(reducer);\n                    if (sumDiffs !== 0) {\n                        this.addScrollTop(sumDiffs);\n                    }\n                    this._adjustToIndex = null;\n                }\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected fixedUpdateAllElements(inScrollTop: number): number {\n        const count = this.isRemote ? this.totalItemCount : this.igxForOf.length;\n        let newStart = this.getIndexAt(\n            inScrollTop,\n            this.sizesCache,\n            0\n        );\n\n        if (newStart + this.state.chunkSize > count) {\n            newStart = count - this.state.chunkSize;\n        }\n\n        const prevStart = this.state.startIndex;\n        const diff = newStart - this.state.startIndex;\n        this.state.startIndex = newStart;\n\n        if (diff) {\n            this.onChunkPreload.emit(this.state);\n            if (!this.isRemote) {\n\n                // recalculate and apply page size.\n                if (diff && Math.abs(diff) <= this.MAX_PERF_SCROLL_DIFF) {\n                    diff > 0 ? this.moveApplyScrollNext(prevStart) : this.moveApplyScrollPrev(prevStart);\n                } else {\n                    this.fixedApplyScroll();\n                }\n            }\n        }\n\n        return inScrollTop - this.sizesCache[this.state.startIndex];\n    }\n\n    /**\n     * @hidden\n     * The function applies an optimized state change for scrolling down/right employing context change with view rearrangement\n     */\n    protected moveApplyScrollNext(prevIndex: number): void {\n        const start = prevIndex + this.state.chunkSize;\n        const end = start + this.state.startIndex - prevIndex;\n        const container = this.dc.instance._vcr as ViewContainerRef;\n\n        for (let i = start; i < end && this.igxForOf[i] !== undefined; i++) {\n            const embView = this._embeddedViews.shift();\n            this.scrollFocus(embView.rootNodes.find(node => node.nodeType === Node.ELEMENT_NODE)\n                || embView.rootNodes[0].nextElementSibling);\n            const view = container.detach(0);\n\n            this.updateTemplateContext(embView.context, i);\n            container.insert(view);\n            this._embeddedViews.push(embView);\n        }\n    }\n\n    /**\n     * @hidden\n     * The function applies an optimized state change for scrolling up/left employing context change with view rearrangement\n     */\n    protected moveApplyScrollPrev(prevIndex: number): void {\n        const container = this.dc.instance._vcr as ViewContainerRef;\n        for (let i = prevIndex - 1; i >= this.state.startIndex && this.igxForOf[i] !== undefined; i--) {\n            const embView = this._embeddedViews.pop();\n            this.scrollFocus(embView.rootNodes.find(node => node.nodeType === Node.ELEMENT_NODE)\n                || embView.rootNodes[0].nextElementSibling);\n            const view = container.detach(container.length - 1);\n\n            this.updateTemplateContext(embView.context, i);\n            container.insert(view, 0);\n            this._embeddedViews.unshift(embView);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected getContextIndex(input) {\n        return this.isRemote ? this.state.startIndex + this.igxForOf.indexOf(input) : this.igxForOf.indexOf(input);\n    }\n\n    /**\n     * @hidden\n     * Function which updates the passed context of an embedded view with the provided index\n     * from the view container.\n     * Often, called while handling a scroll event.\n     */\n    protected updateTemplateContext(context: any, index: number = 0): void {\n        context.$implicit = this.igxForOf[index];\n        context.index = this.getContextIndex(this.igxForOf[index]);\n        context.count = this.igxForOf.length;\n    }\n\n    /**\n     * @hidden\n     * The function applies an optimized state change through context change for each view\n     */\n    protected fixedApplyScroll(): void {\n        let j = 0;\n        const endIndex = this.state.startIndex + this.state.chunkSize;\n        for (let i = this.state.startIndex; i < endIndex && this.igxForOf[i] !== undefined; i++) {\n            const embView = this._embeddedViews[j++];\n            this.updateTemplateContext(embView.context, i);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     *\n     * Clears focus inside the virtualized container on small scroll swaps.\n     */\n    protected scrollFocus(node?: HTMLElement): void {\n        const activeElement = this.document.activeElement as HTMLElement;\n\n        // Remove focus in case the the active element is inside the view container.\n        // Otherwise we hit an exception while doing the 'small' scrolls swapping.\n        // For more information:\n        //\n        // https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=432392\n        if (node && node.contains(this.document.activeElement)) {\n            activeElement.blur();\n        }\n    }\n\n    /**\n     * @hidden\n     * Function that is called when scrolling horizontally\n     */\n    protected onHScroll(event) {\n        /* in certain situations this may be called when no scrollbar is visible */\n        if (!parseInt(this.scrollComponent.nativeElement.children[0].style.width, 10)) {\n            return;\n        }\n        const prevStartIndex = this.state.startIndex;\n        // Updating horizontal chunks\n        const scrollOffset = this.fixedUpdateAllElements(event.target.scrollLeft);\n        this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n\n        this.dc.changeDetectorRef.detectChanges();\n        if (prevStartIndex !== this.state.startIndex) {\n            this.onChunkLoad.emit(this.state);\n        }\n    }\n\n    /**\n     * Gets the function used to track changes in the items collection.\n     * By default the object references are compared. However this can be optimized if you have unique identifier\n     * value that can be used for the comparison instead of the object ref or if you have some other property values\n     * in the item object that should be tracked for changes.\n     * This option is similar to ngForTrackBy.\n     * ```typescript\n     * const trackFunc = this.parentVirtDir.igxForTrackBy;\n     * ```\n     */\n    @Input()\n    get igxForTrackBy(): TrackByFunction<T> { return this._trackByFn; }\n\n    /**\n     * Sets the function used to track changes in the items collection.\n     * This function can be set in scenarios where you want to optimize or\n     * customize the tracking of changes for the items in the collection.\n     * The igxForTrackBy function takes the index and the current item as arguments and needs to return the unique identifier for this item.\n     * ```typescript\n     * this.parentVirtDir.igxForTrackBy = (index, item) => {\n     *      return item.id + item.width;\n     * };\n     * ```\n     */\n    set igxForTrackBy(fn: TrackByFunction<T>) { this._trackByFn = fn; }\n\n    /**\n     * @hidden\n     */\n    protected _applyChanges() {\n        const prevChunkSize = this.state.chunkSize;\n        this.applyChunkSizeChange();\n        this._recalcScrollBarSize();\n        if (this.igxForOf && this.igxForOf.length && this.dc) {\n            const embeddedViewCopy = Object.assign([], this._embeddedViews);\n            let startIndex = this.state.startIndex;\n            let endIndex = this.state.chunkSize + this.state.startIndex;\n            if (this.isRemote) {\n                startIndex = 0;\n                endIndex = this.igxForOf.length;\n            }\n            for (let i = startIndex; i < endIndex && this.igxForOf[i] !== undefined; i++) {\n                const embView = embeddedViewCopy.shift();\n                this.updateTemplateContext(embView.context, i);\n            }\n            if (prevChunkSize !== this.state.chunkSize) {\n                this.onChunkLoad.emit(this.state);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calcMaxBrowserHeight(): number {\n        if (!this.platformUtil.isBrowser) {\n            return 0;\n        }\n        const div = this.document.createElement('div');\n        const style = div.style;\n        style.position = 'absolute';\n        style.top = '9999999999999999px';\n        this.document.body.appendChild(div);\n        const size = Math.abs(div.getBoundingClientRect()['top']);\n        this.document.body.removeChild(div);\n        return size;\n    }\n\n    /**\n     * @hidden\n     * Recalculates the chunkSize based on current startIndex and returns the new size.\n     * This should be called after this.state.startIndex is updated, not before.\n     */\n    protected _calculateChunkSize(): number {\n        let chunkSize = 0;\n        if (this.igxForContainerSize !== null && this.igxForContainerSize !== undefined) {\n            if (!this.sizesCache) {\n                this.initSizesCache(this.igxForOf);\n            }\n            chunkSize = this._calcMaxChunkSize();\n            if (this.igxForOf && chunkSize > this.igxForOf.length) {\n                chunkSize = this.igxForOf.length;\n            }\n        } else {\n            if (this.igxForOf) {\n                chunkSize = this.igxForOf.length;\n            }\n        }\n        return chunkSize;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getElement(viewref, nodeName) {\n        const elem = viewref.element.nativeElement.parentNode.getElementsByTagName(nodeName);\n        return elem.length > 0 ? elem[0] : null;\n    }\n\n    /**\n     * @hidden\n     */\n    protected initSizesCache(items: any[]): number {\n        let totalSize = 0;\n        let size = 0;\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        let i = 0;\n        this.sizesCache = [];\n        this.heightCache = [];\n        this.sizesCache.push(0);\n        const count = this.isRemote ? this.totalItemCount : items.length;\n        for (i; i < count; i++) {\n            if (dimension === 'height') {\n                // cols[i][dimension] = parseInt(this.igxForItemSize, 10) || 0;\n                size = parseInt(this.igxForItemSize, 10) || 0;\n                this.heightCache.push(size);\n            } else {\n                size = this._getItemSize(items[i], dimension);\n            }\n            totalSize += size;\n            this.sizesCache.push(totalSize);\n        }\n        return totalSize;\n    }\n\n    protected _updateSizeCache() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.initSizesCache(this.igxForOf);\n            return;\n        }\n        const oldHeight = this.heightCache.length > 0 ? this.heightCache.reduce((acc, val) => acc + val) : 0;\n        const newHeight = this.initSizesCache(this.igxForOf);\n\n        const diff = oldHeight - newHeight;\n        this._adjustScrollPositionAfterSizeChange(diff);\n    }\n\n    private _adjustScrollPositionAfterSizeChange(sizeDiff) {\n        // if data has been changed while container is scrolled\n        // should update scroll top/left according to change so that same startIndex is in view\n        if (Math.abs(sizeDiff) > 0 && this.scrollPosition > 0) {\n            this.recalcUpdateSizes();\n            const offset = parseInt(this.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n            const newSize = this.sizesCache[this.state.startIndex] - offset;\n            this.scrollPosition = newSize === this.scrollPosition ? newSize + 1 : newSize;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calcMaxChunkSize(): number {\n        let i = 0;\n        let length = 0;\n        let maxLength = 0;\n        const arr = [];\n        let sum = 0;\n        const availableSize = parseInt(this.igxForContainerSize, 10);\n        if (!availableSize) {\n            return 0;\n        }\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        const reducer = (accumulator, currentItem) => accumulator + this._getItemSize(currentItem, dimension);\n        for (i; i < this.igxForOf.length; i++) {\n            let item = this.igxForOf[i];\n            if (dimension === 'height') {\n                item = { value: this.igxForOf[i], height: this.heightCache[i] };\n            }\n            const size = dimension === 'height' ?\n                this.heightCache[i] :\n                this._getItemSize(item, dimension);\n            sum = arr.reduce(reducer, size);\n            if (sum < availableSize) {\n                arr.push(item);\n                length = arr.length;\n                if (i === this.igxForOf.length - 1) {\n                    // reached end without exceeding\n                    // include prev items until size is filled or first item is reached.\n                    let curItem = dimension === 'height' ? arr[0].value : arr[0];\n                    let prevIndex = this.igxForOf.indexOf(curItem) - 1;\n                    while (prevIndex >= 0 && sum <= availableSize) {\n                        curItem = dimension === 'height' ? arr[0].value : arr[0];\n                        prevIndex = this.igxForOf.indexOf(curItem) - 1;\n                        const prevItem = this.igxForOf[prevIndex];\n                        const prevSize = dimension === 'height' ?\n                            this.heightCache[prevIndex] :\n                            parseInt(prevItem[dimension], 10);\n                        sum = arr.reduce(reducer, prevSize);\n                        arr.unshift(prevItem);\n                        length = arr.length;\n                    }\n                }\n            } else {\n                arr.push(item);\n                length = arr.length + 1;\n                arr.shift();\n            }\n            if (length > maxLength) {\n                maxLength = length;\n            }\n        }\n        return maxLength;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getIndexAt(left, set, index) {\n        let start = 0;\n        let end = set.length - 1;\n        if (left === 0) {\n            return 0;\n        }\n        while (start <= end) {\n            const midIdx = Math.floor((start + end) / 2);\n            const midLeft = set[midIdx];\n            const cmp = left - midLeft;\n            if (cmp > 0) {\n                start = midIdx + 1;\n            } else if (cmp < 0) {\n                end = midIdx - 1;\n            } else {\n                return midIdx;\n            }\n        }\n        return end;\n    }\n\n    /**\n     * @hidden\n     * Reset scroll position.\n     * Needed in case scrollbar is hidden/detached but we still need to reset it.\n     */\n    public resetScrollPosition() {\n        this.scrollPosition = 0;\n        this.scrollComponent.scrollAmount = 0;\n        this.state.startIndex = 0;\n    }\n\n    protected _recalcScrollBarSize() {\n        const count = this.isRemote ? this.totalItemCount : (this.igxForOf ? this.igxForOf.length : 0);\n        this.dc.instance.notVirtual = !(this.igxForContainerSize && this.dc && this.state.chunkSize < count);\n        const scrollable = this.isScrollable();\n        if (this.igxForScrollOrientation === 'horizontal') {\n            const totalWidth = this.igxForContainerSize ? this.initSizesCache(this.igxForOf) : 0;\n            this.scrollComponent.nativeElement.style.width = this.igxForContainerSize + 'px';\n            this.scrollComponent.size = totalWidth;\n            if (totalWidth <= parseInt(this.igxForContainerSize, 10)) {\n               this.resetScrollPosition();\n            }\n        }\n        if (this.igxForScrollOrientation === 'vertical') {\n            this.scrollComponent.nativeElement.style.height = parseInt(this.igxForContainerSize, 10) + 'px';\n            this.scrollComponent.size = this._calcHeight();\n            if ( this.scrollComponent.size <= parseInt(this.igxForContainerSize, 10)) {\n                this.resetScrollPosition();\n            }\n        }\n        if (scrollable !== this.isScrollable()) {\n            // scrollbar visibility has changed\n            this.onScrollbarVisibilityChanged.emit();\n        }\n    }\n\n    protected _calcHeight(): number {\n        let height;\n        if (this.heightCache) {\n            height = this.heightCache.reduce((acc, val) => acc + val, 0);\n        } else {\n            height = this.initSizesCache(this.igxForOf);\n        }\n        this._virtHeight = height;\n        if (height > this._maxHeight) {\n            this._virtHeightRatio = height / this._maxHeight;\n            height = this._maxHeight;\n        }\n        return height;\n    }\n\n    protected _recalcOnContainerChange(changes: SimpleChanges) {\n        this.dc.instance._viewContainer.element.nativeElement.style.top = '0px';\n        this.dc.instance._viewContainer.element.nativeElement.style.left = '0px';\n        const prevChunkSize = this.state.chunkSize;\n        this.applyChunkSizeChange();\n        this._recalcScrollBarSize();\n        if (prevChunkSize !== this.state.chunkSize) {\n            this.onChunkLoad.emit(this.state);\n        }\n        if (this.sizesCache && this.igxForScrollOrientation === 'horizontal') {\n            // Updating horizontal chunks and offsets based on the new scrollLeft\n            const scrollOffset = this.fixedUpdateAllElements(this.scrollPosition);\n            this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n        }\n    }\n\n    /**\n     * @hidden\n     * Removes an elemenet from the embedded views and updates chunkSize.\n     */\n    protected removeLastElem() {\n        const oldElem = this._embeddedViews.pop();\n        this.onBeforeViewDestroyed.emit(oldElem);\n        // also detach from ViewContainerRef to make absolutely sure this is removed from the view container.\n        this.dc.instance._vcr.detach(this.dc.instance._vcr.length - 1);\n        oldElem.destroy();\n\n        this.state.chunkSize--;\n    }\n\n    /**\n     * @hidden\n     * If there exists an element that we can create embedded view for creates it, appends it and updates chunkSize\n     */\n    protected addLastElem() {\n        let elemIndex = this.state.startIndex + this.state.chunkSize;\n        if (!this.isRemote && !this.igxForOf) {\n            return;\n        }\n\n        if (elemIndex >= this.igxForOf.length) {\n            elemIndex = this.igxForOf.length - this.state.chunkSize;\n        }\n        const input = this.igxForOf[elemIndex];\n        const embeddedView = this.dc.instance._vcr.createEmbeddedView(\n            this._template,\n            new IgxForOfContext<T>(input, this.getContextIndex(input), this.igxForOf.length)\n        );\n\n        this._embeddedViews.push(embeddedView);\n        this.state.chunkSize++;\n\n        this._zone.run(() => {\n            this.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * Recalculates chunkSize and adds/removes elements if need due to the change.\n     * this.state.chunkSize is updated in @addLastElem() or @removeLastElem()\n     */\n    protected applyChunkSizeChange() {\n        const chunkSize = this.isRemote ? (this.igxForOf ? this.igxForOf.length : 0) : this._calculateChunkSize();\n        if (chunkSize > this.state.chunkSize) {\n            const diff = chunkSize - this.state.chunkSize;\n            for (let i = 0; i < diff; i++) {\n                this.addLastElem();\n            }\n        } else if (chunkSize < this.state.chunkSize) {\n            const diff = this.state.chunkSize - chunkSize;\n            for (let i = 0; i < diff; i++) {\n                this.removeLastElem();\n            }\n        }\n    }\n\n    protected _updateScrollOffset() {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this._updateHScrollOffset();\n        } else {\n            this._updateVScrollOffset();\n        }\n    }\n    private _updateVScrollOffset() {\n        let scrollOffset = 0;\n        let currentScrollTop = this.scrollPosition;\n        if (this._virtHeightRatio !== 1) {\n            this._calcVirtualScrollTop(this.scrollPosition);\n            currentScrollTop = this._virtScrollTop;\n        }\n        const vScroll =  this.scrollComponent.nativeElement;\n        scrollOffset = vScroll && this.scrollComponent.size ?\n        currentScrollTop - this.sizesCache[this.state.startIndex] : 0;\n        this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n    }\n\n    protected _calcVirtualScrollTop(scrollTop: number) {\n        const containerSize = parseInt(this.igxForContainerSize, 10);\n        const maxRealScrollTop = this.scrollComponent.size - containerSize;\n        const realPercentScrolled = maxRealScrollTop !== 0 ?  scrollTop / maxRealScrollTop : 0;\n        const maxVirtScrollTop = this._virtHeight - containerSize;\n        this._virtScrollTop = realPercentScrolled * maxVirtScrollTop;\n    }\n\n    private _updateHScrollOffset() {\n        let scrollOffset = 0;\n        scrollOffset =  this.scrollComponent.nativeElement &&\n            this.scrollComponent.size ?\n            this.scrollPosition - this.sizesCache[this.state.startIndex] : 0;\n        this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n    }\n\n    private _getItemSize(item, dimension: string): number {\n        const dim = item[dimension];\n        return typeof dim === 'number' ? dim : parseInt(this.igxForItemSize, 10) || 0;\n    }\n}\n\nexport function getTypeNameForDebugging(type: any): string {\n    const name = 'name';\n    return type[name] || typeof type;\n}\n\nexport interface IForOfState extends IBaseEventArgs {\n    startIndex?: number;\n    chunkSize?: number;\n}\n\nexport interface IForOfDataChangingEventArgs extends IBaseEventArgs {\n    containerSize: number;\n}\n\n@Directive({\n    selector: '[igxGridFor][igxGridForOf]'\n})\nexport class IgxGridForOfDirective<T> extends IgxForOfDirective<T> implements OnInit, OnChanges, DoCheck {\n\n    constructor(\n        _viewContainer: ViewContainerRef,\n        _template: TemplateRef<NgForOfContext<T>>,\n        _differs: IterableDiffers,\n        resolver: ComponentFactoryResolver,\n        cdr: ChangeDetectorRef,\n        _zone: NgZone,\n        _platformUtil: PlatformUtil,\n        @Inject(DOCUMENT) _document: any,\n        protected syncScrollService: IgxForOfScrollSyncService,\n        protected syncService: IgxForOfSyncService) {\n        super(_viewContainer, _template, _differs, resolver, cdr, _zone, syncScrollService, _platformUtil, _document);\n    }\n\n    @Input()\n    set igxGridForOf(value) {\n        this.igxForOf = value;\n    }\n\n    get igxGridForOf() {\n        return this.igxForOf;\n    }\n\n    /**\n     * @hidden @internal\n     * An event that is emitted after data has been changed but before the view is refreshed\n     */\n    @Output()\n    public onDataChanging = new EventEmitter<IForOfDataChangingEventArgs>();\n\n    ngOnInit() {\n        this.syncService.setMaster(this);\n        super.ngOnInit();\n        this.removeScrollEventListeners();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const forOf = 'igxGridForOf';\n        this.syncService.setMaster(this);\n        if (forOf in changes) {\n            const value = changes[forOf].currentValue;\n            if (!this._differ && value) {\n                try {\n                    this._differ = this._differs.find(value).create(this.igxForTrackBy);\n                } catch (e) {\n                    throw new Error(\n                        `Cannot find a differ supporting object \"${value}\" of type \"${getTypeNameForDebugging(value)}\".\n                     NgFor only supports binding to Iterables such as Arrays.`);\n                }\n            }\n        }\n        const defaultItemSize = 'igxForItemSize';\n        if (defaultItemSize in changes && !changes[defaultItemSize].firstChange &&\n             this.igxForScrollOrientation === 'vertical' && this.igxForOf) {\n            // handle default item size changed.\n            this.initSizesCache(this.igxForOf);\n        }\n        const containerSize = 'igxForContainerSize';\n        if (containerSize in changes && !changes[containerSize].firstChange && this.igxForOf) {\n            this._recalcOnContainerChange(changes);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get sizesCache(): number[] {\n        if (this.syncService.isMaster(this)) {\n            return this._sizesCache;\n        }\n        return this.syncService.sizesCache(this.igxForScrollOrientation);\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public set sizesCache(value: number[]) {\n        this._sizesCache = value;\n    }\n\n    protected get itemsDimension() {\n        return this.igxForScrollOrientation === 'horizontal' ? this.igxForSizePropName : 'height';\n    }\n\n    protected getItemSize(item) {\n        let size = 0;\n        const dimension = this.igxForScrollOrientation === 'horizontal' ?\n            this.igxForSizePropName : 'height';\n        if (dimension === 'height') {\n            size = parseInt(this.igxForItemSize, 10) || 0;\n            if (item && item.summaries) {\n                size = item.max;\n            } else if (item && item.groups && item.height) {\n                size = item.height;\n            }\n        } else {\n            size = parseInt(item[dimension], 10) || 0;\n        }\n        return size;\n    }\n\n    protected initSizesCache(items: any[]): number {\n        if (!this.syncService.isMaster(this)) {\n            const masterSizesCache = this.syncService.sizesCache(this.igxForScrollOrientation);\n            return masterSizesCache[masterSizesCache.length - 1];\n        }\n        let totalSize = 0;\n        let size = 0;\n        let i = 0;\n        this.sizesCache = [];\n        this.heightCache = [];\n        this.sizesCache.push(0);\n        const count = this.isRemote ? this.totalItemCount : items.length;\n        for (i; i < count; i++) {\n            size = this.getItemSize(items[i]);\n            if (this.itemsDimension === 'height') {\n                this.heightCache.push(size);\n            }\n            totalSize += size;\n            this.sizesCache.push(totalSize);\n        }\n        return totalSize;\n    }\n\n    protected _updateSizeCache(changes: IterableChanges<T> = null) {\n        if (this.igxForScrollOrientation === 'horizontal') {\n            this.initSizesCache(this.igxForOf);\n            return;\n        }\n\n        const oldHeight = this.heightCache.length > 0 ? this.heightCache.reduce((acc, val) => acc + val) : 0;\n        let newHeight = oldHeight;\n        if (changes && !this.isRemote) {\n            newHeight = this.handleCacheChanges(changes);\n        } else {\n            return;\n        }\n\n        const diff = oldHeight - newHeight;\n\n        // if data has been changed while container is scrolled\n        // should update scroll top/left according to change so that same startIndex is in view\n        if (Math.abs(diff) > 0 && this.platformUtil.isBrowser) {\n            // TODO: This code can be removed. However tests need to be rewritten in a way that they wait for ResizeObserved to complete.\n            // So leaving as is for the moment.\n            requestAnimationFrame(() => {\n                this.recalcUpdateSizes();\n                const offset = parseInt(this.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n                if (this.scrollPosition !== 0) {\n                    this.scrollPosition = this.sizesCache[this.state.startIndex] - offset;\n                } else {\n                    this._updateScrollOffset();\n                }\n            });\n        }\n    }\n\n    protected handleCacheChanges(changes: IterableChanges<T>) {\n        const identityChanges = [];\n        const newHeightCache = [];\n        const newSizesCache = [];\n        newSizesCache.push(0);\n        let newHeight = 0;\n\n        // When there are more than one removed items the changes are not reliable so those with identity change should be default size.\n        let numRemovedItems = 0;\n        changes.forEachRemovedItem(() => numRemovedItems++);\n\n        // Get the identity changes to determine later if those that have changed their indexes should be assigned default item size.\n        changes.forEachIdentityChange((item) => {\n            if (item.currentIndex !== item.previousIndex) {\n                // Filter out ones that have not changed their index.\n                identityChanges[item.currentIndex] = item;\n            }\n        });\n\n        // Processing each item that is passed to the igxForOf so far seem to be most reliable. We parse the updated list of items.\n        changes.forEachItem((item) => {\n            if (item.previousIndex !== null &&\n                (numRemovedItems < 2 || !identityChanges.length || identityChanges[item.currentIndex])) {\n                // Reuse cache on those who have previousIndex.\n                // When there are more than one removed items currently the changes are not readable so ones with identity change\n                // should be racalculated.\n                newHeightCache[item.currentIndex] = this.heightCache[item.previousIndex];\n            } else {\n                // Assign default item size.\n                newHeightCache[item.currentIndex] = this.getItemSize(item.item);\n            }\n            newSizesCache[item.currentIndex + 1] = newSizesCache[item.currentIndex] + newHeightCache[item.currentIndex];\n            newHeight += newHeightCache[item.currentIndex];\n        });\n        this.heightCache = newHeightCache;\n        this.sizesCache = newSizesCache;\n        return newHeight;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public assumeMaster(): void {\n        this._sizesCache = this.syncService.sizesCache(this.igxForScrollOrientation);\n        this.syncService.setMaster(this, true);\n    }\n\n    ngDoCheck() {\n        if (this._differ) {\n            const changes = this._differ.diff(this.igxForOf);\n            if (changes) {\n                const args: IForOfDataChangingEventArgs = {\n                    containerSize: this.igxForContainerSize\n                };\n                this.onDataChanging.emit(args);\n                //  re-init cache.\n                if (!this.igxForOf) {\n                    this.igxForOf = [];\n                }\n                /* we need to reset the master dir if all rows are removed\n                (e.g. because of filtering); if all columns are hidden, rows are\n                still rendered empty, so we should not reset master */\n                if (!this.igxForOf.length &&\n                    this.igxForScrollOrientation === 'vertical') {\n                    this.syncService.resetMaster();\n                }\n                this.syncService.setMaster(this);\n                this.igxForContainerSize = args.containerSize;\n                this._updateSizeCache(changes);\n                this._applyChanges();\n                this._updateScrollOffset();\n                this.onDataChanged.emit();\n            }\n        }\n    }\n\n    onScroll(event) {\n        if (!parseInt(this.scrollComponent.nativeElement.style.height, 10)) {\n            return;\n        }\n        if (!this._bScrollInternal) {\n            this._calcVirtualScrollTop(event.target.scrollTop);\n        } else {\n            this._bScrollInternal = false;\n        }\n        const scrollOffset = this.fixedUpdateAllElements(this._virtScrollTop);\n\n        this.dc.instance._viewContainer.element.nativeElement.style.top = -(scrollOffset) + 'px';\n\n        this._zone.onStable.pipe(first()).subscribe( () => {\n            this.recalcUpdateSizes();\n        });\n        this.cdr.markForCheck();\n    }\n\n    onHScroll(scrollAmount) {\n        /* in certain situations this may be called when no scrollbar is visible */\n        if (!this.scrollComponent || !parseInt(this.scrollComponent.nativeElement.children[0].style.width, 10)) {\n            return;\n        }\n        // Updating horizontal chunks\n        const scrollOffset = this.fixedUpdateAllElements(scrollAmount);\n        this.dc.instance._viewContainer.element.nativeElement.style.left = -scrollOffset + 'px';\n    }\n\n    protected addLastElem() {\n        let elemIndex = this.state.startIndex + this.state.chunkSize;\n        if (!this.isRemote && !this.igxForOf) {\n            return;\n        }\n\n        if (elemIndex >= this.igxForOf.length) {\n            elemIndex = this.igxForOf.length - this.state.chunkSize;\n        }\n        const input = this.igxForOf[elemIndex];\n        const embeddedView = this.dc.instance._vcr.createEmbeddedView(\n            this._template,\n            new IgxForOfContext<T>(input, this.getContextIndex(input), this.igxForOf.length)\n        );\n\n        this._embeddedViews.push(embeddedView);\n        this.state.chunkSize++;\n    }\n\n    protected _updateViews(prevChunkSize) {\n        if (this.igxForOf && this.igxForOf.length && this.dc) {\n            const embeddedViewCopy = Object.assign([], this._embeddedViews);\n            let startIndex;\n            let endIndex;\n            if (this.isRemote) {\n                startIndex = 0;\n                endIndex = this.igxForOf.length;\n            } else {\n                startIndex = this.getIndexAt(\n                    this.scrollPosition,\n                    this.sizesCache,\n                    0\n                );\n                if (startIndex + this.state.chunkSize > this.igxForOf.length) {\n                    startIndex = this.igxForOf.length - this.state.chunkSize;\n                }\n                this.state.startIndex = startIndex;\n                endIndex = this.state.chunkSize + this.state.startIndex;\n            }\n\n            for (let i = startIndex; i < endIndex && this.igxForOf[i] !== undefined; i++) {\n                const embView = embeddedViewCopy.shift();\n                this.updateTemplateContext(embView.context, i);\n            }\n            if (prevChunkSize !== this.state.chunkSize) {\n                this.onChunkLoad.emit(this.state);\n            }\n        }\n    }\n    protected _applyChanges() {\n        const prevChunkSize = this.state.chunkSize;\n        this.applyChunkSizeChange();\n        this._recalcScrollBarSize();\n        this._updateViews(prevChunkSize);\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calcMaxChunkSize(): number {\n        if (this.syncService.isMaster(this)) {\n            return super._calcMaxChunkSize();\n        }\n        return this.syncService.chunkSize(this.igxForScrollOrientation);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxForOfDirective, IgxGridForOfDirective, DisplayContainerComponent, VirtualHelperComponent,\n         HVirtualHelperComponent, VirtualHelperBaseDirective],\n    entryComponents: [DisplayContainerComponent, VirtualHelperComponent, HVirtualHelperComponent],\n    exports: [IgxForOfDirective, IgxGridForOfDirective],\n    imports: [IgxScrollInertiaModule, CommonModule]\n})\n\nexport class IgxForOfModule {\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    ElementRef,\n    forwardRef,\n    QueryList,\n    OnChanges,\n    Input,\n    OnDestroy,\n    ViewChild,\n    ContentChild,\n    AfterViewInit,\n    Output,\n    EventEmitter,\n    Optional,\n    Inject,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { IgxDropDownItemComponent } from './drop-down-item.component';\nimport { IgxDropDownBaseDirective } from './drop-down.base';\nimport { DropDownActionKey, Navigate } from './drop-down.common';\nimport { IGX_DROPDOWN_BASE, IDropDownBase } from './drop-down.common';\nimport { ISelectionEventArgs } from './drop-down.common';\nimport { IBaseCancelableBrowserEventArgs, isIE } from '../core/utils';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { Subject } from 'rxjs';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\nimport { OverlaySettings } from '../services/public_api';\nimport { IgxForOfDirective } from '../directives/for-of/for_of.directive';\nimport { take } from 'rxjs/operators';\nimport { DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\n/**\n * **Ignite UI for Angular DropDown** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/drop-down)\n *\n * The Ignite UI for Angular Drop Down displays a scrollable list of items which may be visually grouped and\n * supports selection of a single item. Clicking or tapping an item selects it and closes the Drop Down\n *\n * Example:\n * ```html\n * <igx-drop-down>\n *   <igx-drop-down-item *ngFor=\"let item of items\" disabled={{item.disabled}} isHeader={{item.header}}>\n *     {{ item.value }}\n *   </igx-drop-down-item>\n * </igx-drop-down>\n * ```\n */\n@Component({\n    selector: 'igx-drop-down',\n    templateUrl: './drop-down.component.html',\n    providers: [{ provide: IGX_DROPDOWN_BASE, useExisting: IgxDropDownComponent }]\n})\nexport class IgxDropDownComponent extends IgxDropDownBaseDirective implements IDropDownBase, OnChanges, AfterViewInit, OnDestroy {\n    protected destroy$ = new Subject<boolean>();\n    protected _scrollPosition: number;\n\n    @ContentChild(IgxForOfDirective, { read: IgxForOfDirective })\n    protected virtDir: IgxForOfDirective<any>;\n\n    @ViewChild(IgxToggleDirective, { static: true })\n    protected toggleDirective: IgxToggleDirective;\n\n    @ViewChild('scrollContainer', { static: true })\n    protected scrollContainerRef: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(forwardRef(() => IgxDropDownItemComponent), { descendants: true })\n    public children: QueryList<IgxDropDownItemBaseDirective>;\n\n    /**\n     * Emitted before the dropdown is opened\n     *\n     * ```html\n     * <igx-drop-down (onOpening)='handleOpening()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted after the dropdown is opened\n     *\n     * ```html\n     * <igx-drop-down (onOpened)='handleOpened()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<void>();\n\n    /**\n     * Emitted before the dropdown is closed\n     *\n     * ```html\n     * <igx-drop-down (onClosing)='handleClosing()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted after the dropdown is closed\n     *\n     * ```html\n     * <igx-drop-down (onClosed)='handleClosed()'></igx-drop-down>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<void>();\n\n    /**\n     * Gets/sets whether items take focus. Disabled by default.\n     * When enabled, drop down items gain tab index and are focused when active -\n     * this includes activating the selected item when opening the drop down and moving with keyboard navigation.\n     *\n     * Note: Keep that focus shift in mind when using the igxDropDownItemNavigation directive\n     * and ensure it's placed either on each focusable item or a common ancestor to allow it to handle keyboard events.\n     *\n     * ```typescript\n     * // get\n     * let dropDownAllowsItemFocus = this.dropdown.allowItemsFocus;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-drop-down [allowItemsFocus]='true'></igx-drop-down>\n     * ```\n     */\n    @Input()\n    public allowItemsFocus = false;\n\n    /**\n     * @hidden @internal\n     */\n    public get focusedItem(): IgxDropDownItemBaseDirective {\n        if (this.virtDir) {\n            return this._focusedItem && this._focusedItem.index !== -1 ?\n                (this.children.find(e => e.index === this._focusedItem.index) || null) :\n                null;\n        }\n        return this._focusedItem;\n    }\n\n    public set focusedItem(value: IgxDropDownItemBaseDirective) {\n        if (!value) {\n            this.selection.clear(`${this.id}-active`);\n            this._focusedItem = null;\n            return;\n        }\n        this._focusedItem = value;\n        if (this.virtDir) {\n            this._focusedItem = {\n                value: value.value,\n                index: value.index\n            } as IgxDropDownItemBaseDirective;\n        }\n        this.selection.set(`${this.id}-active`, new Set([this._focusedItem]));\n    }\n\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this.selection.set(value, this.selection.get(this.id));\n        this.selection.clear(this.id);\n        this.selection.set(value, this.selection.get(`${this.id}-active`));\n        this.selection.clear(`${this.id}-active`);\n        this._id = value;\n    }\n\n    /** Id of the internal listbox of the drop down */\n    public get listId() {\n        return this.id + '-list';\n    }\n\n    /**\n     * Get currently selected item\n     *\n     * ```typescript\n     * let currentItem = this.dropdown.selectedItem;\n     * ```\n     */\n    public get selectedItem(): IgxDropDownItemBaseDirective {\n        const selectedItem = this.selection.first_item(this.id);\n        if (selectedItem) {\n            return selectedItem;\n        }\n        return null;\n    }\n\n    /**\n     * Gets if the dropdown is collapsed\n     *\n     * ```typescript\n     * let isCollapsed = this.dropdown.collapsed;\n     * ```\n     */\n    public get collapsed(): boolean {\n        return this.toggleDirective.collapsed;\n    }\n\n    /** @hidden @internal */\n    public get scrollContainer(): HTMLElement {\n        return this.scrollContainerRef.nativeElement;\n    }\n\n    protected get collectionLength() {\n        if (this.virtDir) {\n            return this.virtDir.totalItemCount || this.virtDir.igxForOf.length;\n        }\n    }\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(elementRef, cdr, _displayDensityOptions);\n    }\n\n    /**\n     * Opens the dropdown\n     *\n     * ```typescript\n     * this.dropdown.open();\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings) {\n        this.toggleDirective.open(overlaySettings);\n        this.updateScrollPosition();\n    }\n\n    /**\n     * Closes the dropdown\n     *\n     * ```typescript\n     * this.dropdown.close();\n     * ```\n     */\n    public close() {\n        this.toggleDirective.close();\n    }\n\n    /**\n     * Toggles the dropdown\n     *\n     * ```typescript\n     * this.dropdown.toggle();\n     * ```\n     */\n    public toggle(overlaySettings?: OverlaySettings) {\n        if (this.collapsed || this.toggleDirective.isClosing) {\n            this.open(overlaySettings);\n        } else {\n            this.close();\n        }\n    }\n\n    /**\n     * Select an item by index\n     * @param index of the item to select; If the drop down uses *igxFor, pass the index in data\n     */\n    public setSelectedItem(index: number) {\n        if (index < 0 || index >= this.items.length) {\n            return;\n        }\n        let newSelection: IgxDropDownItemBaseDirective;\n        if (this.virtDir) {\n            newSelection = {\n                value: this.virtDir.igxForOf[index],\n                index\n            } as IgxDropDownItemBaseDirective;\n        } else {\n            newSelection = this.items[index];\n        }\n        this.selectItem(newSelection);\n    }\n\n    /**\n     * Navigates to the item on the specified index\n     * If the data in the drop-down is virtualized, pass the index of the item in the virtualized data.\n     * @param newIndex number\n     */\n    public navigateItem(index: number) {\n        if (this.virtDir) {\n            if (index === -1 || index >= this.collectionLength) {\n                return;\n            }\n            const direction = index > (this.focusedItem ? this.focusedItem.index : -1) ? Navigate.Down : Navigate.Up;\n            const subRequired = this.isIndexOutOfBounds(index, direction);\n            this.focusedItem = {\n                value: this.virtDir.igxForOf[index],\n                index: index\n            } as IgxDropDownItemBaseDirective;\n            if (subRequired) {\n                this.virtDir.scrollTo(index);\n            }\n            if (subRequired) {\n                this.virtDir.onChunkLoad.pipe(take(1)).subscribe(() => {\n                    this.skipHeader(direction);\n                });\n            } else {\n                this.skipHeader(direction);\n            }\n        } else {\n            super.navigateItem(index);\n        }\n        if (this.allowItemsFocus && this.focusedItem) {\n            this.focusedItem.element.nativeElement.focus();\n            this.cdr.markForCheck();\n        }\n    }\n\n    private isIndexOutOfBounds(index: number, direction: Navigate) {\n        const virtState = this.virtDir.state;\n        const currentPosition = this.virtDir.getScroll().scrollTop;\n        const itemPosition = this.virtDir.getScrollForIndex(index, direction === Navigate.Down);\n        const indexOutOfChunk = index < virtState.startIndex || index > virtState.chunkSize + virtState.startIndex;\n        const scrollNeeded = direction === Navigate.Down ? currentPosition < itemPosition : currentPosition > itemPosition;\n        const subRequired = indexOutOfChunk || scrollNeeded;\n        return subRequired;\n    }\n\n    protected skipHeader(direction: Navigate) {\n        if (!this.focusedItem) {\n            return;\n        }\n        if (this.focusedItem.isHeader || this.focusedItem.disabled) {\n            if (direction === Navigate.Up) {\n                this.navigatePrev();\n            } else {\n                this.navigateNext();\n            }\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    updateScrollPosition() {\n        if (!this.virtDir) {\n            return;\n        }\n        if (!this.selectedItem) {\n            this.virtDir.scrollTo(0);\n            return;\n        }\n        let targetScroll = this.virtDir.getScrollForIndex(this.selectedItem.index);\n        const itemsInView = this.virtDir.igxForContainerSize / this.virtDir.igxForItemSize;\n        targetScroll -= (itemsInView / 2 - 1) * this.virtDir.igxForItemSize;\n        this.virtDir.getScroll().scrollTop = targetScroll;\n    }\n\n    protected focusItem(value: boolean) {\n        if (value || this._focusedItem) {\n            this._focusedItem.focused = value;\n        }\n    }\n\n    protected updateItemFocus() {\n        if (this.selectedItem) {\n            this.focusedItem = this.selectedItem;\n            this.focusItem(true);\n        } else if (this.allowItemsFocus) {\n            this.navigateFirst();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleOpening(e: IBaseCancelableBrowserEventArgs) {\n        // do not mutate passed event args\n        const eventArgs: IBaseCancelableBrowserEventArgs = Object.assign({}, e, { owner: this });\n        this.onOpening.emit(eventArgs);\n        e.cancel = eventArgs.cancel;\n        if (e.cancel) {\n            return;\n        }\n\n        if (this.virtDir) {\n            this.virtDir.scrollPosition = this._scrollPosition;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleContentAppended() {\n        if (!this.virtDir && this.selectedItem) {\n           this.scrollToItem(this.selectedItem);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleOpened() {\n        this.updateItemFocus();\n        this.onOpened.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleClosing(e: IBaseCancelableBrowserEventArgs) {\n        const eventArgs: IBaseCancelableBrowserEventArgs = Object.assign({}, e, { owner: this });\n        this.onClosing.emit(eventArgs);\n        e.cancel = eventArgs.cancel;\n        if (e.cancel) {\n            return;\n        }\n        if (this.virtDir) {\n            this._scrollPosition = this.virtDir.scrollPosition;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleClosed() {\n        this.focusItem(false);\n        this.onClosed.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this.selection.clear(this.id);\n        this.selection.clear(`${this.id}-active`);\n    }\n\n    protected scrollToItem(item: IgxDropDownItemBaseDirective) {\n        const itemPosition = this.calculateScrollPosition(item);\n\n        //  in IE11 setting sctrollTop is somehow slow and forces dropdown\n        //  to appear on screen before animation start. As a result dropdown\n        //  flickers badly. This is why we set scrollTop just a little later\n        //  allowing animation to start and prevent dropdown flickering\n        if (isIE()) {\n            setTimeout(() => {\n                this.scrollContainer.scrollTop = (itemPosition);\n            }, 1);\n        } else {\n            this.scrollContainer.scrollTop = (itemPosition);\n        }\n    }\n\n    /** @hidden @internal */\n    public calculateScrollPosition(item: IgxDropDownItemBaseDirective): number {\n        if (!item) {\n            return 0;\n        }\n\n        const elementRect = item.element.nativeElement.getBoundingClientRect();\n        const parentRect = this.scrollContainer.getBoundingClientRect();\n        const scrollDelta = parentRect.top - elementRect.top;\n        let scrollPosition = this.scrollContainer.scrollTop - scrollDelta;\n\n        const dropDownHeight = this.scrollContainer.clientHeight;\n        scrollPosition -= dropDownHeight / 2;\n        scrollPosition += item.elementHeight / 2;\n\n        return Math.floor(scrollPosition);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.id) {\n            // temp workaround until fix --> https://github.com/angular/angular/issues/34992\n            this.toggleDirective.id = changes.id.currentValue;\n        }\n    }\n\n    ngAfterViewInit() {\n        if (this.virtDir) {\n            this.virtDir.igxForItemSize = 28;\n        }\n    }\n\n    /** Keydown Handler */\n    public onItemActionKey(key: DropDownActionKey, event?: Event) {\n        super.onItemActionKey(key, event);\n        this.close();\n    }\n\n    /**\n     * Virtual scroll implementation\n     * @hidden @internal\n     */\n    public navigateFirst() {\n        if (this.virtDir) {\n            this.navigateItem(0);\n        } else {\n            super.navigateFirst();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateLast() {\n        if (this.virtDir) {\n            this.navigateItem(this.virtDir.totalItemCount ? this.virtDir.totalItemCount - 1 : this.virtDir.igxForOf.length - 1);\n        } else {\n            super.navigateLast();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigateNext() {\n        if (this.virtDir) {\n            this.navigateItem(this._focusedItem ? this._focusedItem.index + 1 : 0);\n        } else {\n            super.navigateNext();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public navigatePrev() {\n        if (this.virtDir) {\n            this.navigateItem(this._focusedItem ? this._focusedItem.index - 1 : 0);\n        } else {\n            super.navigatePrev();\n        }\n    }\n\n    /**\n     * Handles the `onSelection` emit and the drop down toggle when selection changes\n     * @hidden\n     * @internal\n     * @param newSelection\n     * @param event\n     */\n    public selectItem(newSelection?: IgxDropDownItemBaseDirective, event?: Event) {\n        const oldSelection = this.selectedItem;\n        if (!newSelection) {\n            newSelection = this.focusedItem;\n        }\n        if (newSelection === null) {\n            return;\n        }\n        if (newSelection instanceof IgxDropDownItemBaseDirective && newSelection.isHeader) {\n            return;\n        }\n        if (this.virtDir) {\n            newSelection = {\n                value: newSelection.value,\n                index: newSelection.index\n            } as IgxDropDownItemBaseDirective;\n        }\n        const args: ISelectionEventArgs = { oldSelection, newSelection, cancel: false };\n        this.onSelection.emit(args);\n\n        if (!args.cancel) {\n            if (this.isSelectionValid(args.newSelection)) {\n                this.selection.set(this.id, new Set([args.newSelection]));\n                if (!this.virtDir) {\n                    if (oldSelection) {\n                        oldSelection.selected = false;\n                    }\n                    if (args.newSelection) {\n                        args.newSelection.selected = true;\n                    }\n                }\n                if (event) {\n                    this.toggleDirective.close();\n                }\n            } else {\n                throw new Error('Please provide a valid drop-down item for the selection!');\n            }\n        }\n    }\n\n    /**\n     * Clears the selection of the dropdown\n     * ```typescript\n     * this.dropdown.clearSelection();\n     * ```\n     */\n    public clearSelection() {\n        const oldSelection = this.selectedItem;\n        const newSelection: IgxDropDownItemBaseDirective = null;\n        const args: ISelectionEventArgs = { oldSelection, newSelection, cancel: false };\n        this.onSelection.emit(args);\n        if (this.selectedItem && !args.cancel) {\n            this.selectedItem.selected = false;\n            this.selection.clear(this.id);\n        }\n    }\n\n    /**\n     * Checks whether the selection is valid\n     * `null` - the selection should be emptied\n     * Virtual? - the selection should at least have and `index` and `value` property\n     * Non-virtual? - the selection should be a valid drop-down item and **not** be a header\n     */\n    protected isSelectionValid(selection: any): boolean {\n        return selection === null\n        || (this.virtDir && selection.hasOwnProperty('value') && selection.hasOwnProperty('index'))\n        || (selection instanceof IgxDropDownItemComponent && !selection.isHeader);\n    }\n}\n\n","import { Directive, Optional, Self, Input, HostListener, Inject } from '@angular/core';\nimport { IGX_DROPDOWN_BASE } from './drop-down.common';\nimport { IDropDownNavigationDirective } from './drop-down.common';\nimport { IgxDropDownBaseDirective } from './drop-down.base';\nimport { DropDownActionKey } from './drop-down.common';\n\n/**\n * Navigation Directive that handles keyboard events on its host and controls a targeted IgxDropDownBaseDirective component\n */\n@Directive({\n    selector: '[igxDropDownItemNavigation]'\n})\nexport class IgxDropDownItemNavigationDirective implements IDropDownNavigationDirective {\n\n    protected _target: IgxDropDownBaseDirective = null;\n\n    constructor(@Self() @Optional() @Inject(IGX_DROPDOWN_BASE) public dropdown: IgxDropDownBaseDirective) { }\n\n    /**\n     * Gets the target of the navigation directive;\n     *\n     * ```typescript\n     * // Get\n     * export class MyComponent {\n     *  ...\n     *  @ContentChild(IgxDropDownNavigationDirective)\n     *  navDirective: IgxDropDownNavigationDirective = null\n     *  ...\n     *  const navTarget: IgxDropDownBaseDirective = navDirective.navTarget\n     * }\n     * ```\n     */\n    get target(): IgxDropDownBaseDirective {\n        return this._target;\n    }\n\n    /**\n     * Sets the target of the navigation directive;\n     * If no valid target is passed, it falls back to the drop down context\n     *\n     * ```html\n     * <!-- Set -->\n     * <input [igxDropDownItemNavigation]=\"dropdown\" />\n     * ...\n     * <igx-drop-down #dropdown>\n     * ...\n     * </igx-drop-down>\n     * ```\n     */\n    @Input('igxDropDownItemNavigation')\n    set target(target: IgxDropDownBaseDirective) {\n        this._target = target ? target : this.dropdown;\n    }\n\n    /**\n     * Captures keydown events and calls the appropriate handlers on the target component\n     */\n    @HostListener('keydown', ['$event'])\n    handleKeyDown(event: KeyboardEvent) {\n        if (event) {\n            const key = event.key.toLowerCase();\n            if (!this.target.collapsed) { // If dropdown is opened\n                const navKeys = ['esc', 'escape', 'enter', 'space', 'spacebar', ' ',\n            'arrowup', 'up', 'arrowdown', 'down', 'home', 'end'];\n                if (navKeys.indexOf(key) === -1) { // If key has appropriate function in DD\n                    return;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            } else { // If dropdown is closed, do nothing\n                return;\n            }\n            switch (key) {\n                case 'esc':\n                case 'escape':\n                    this.target.onItemActionKey(DropDownActionKey.ESCAPE, event);\n                    break;\n                case 'enter':\n                    this.target.onItemActionKey(DropDownActionKey.ENTER, event);\n                    break;\n                case 'space':\n                case 'spacebar':\n                case ' ':\n                    this.target.onItemActionKey(DropDownActionKey.SPACE, event);\n                    break;\n                case 'arrowup':\n                case 'up':\n                    this.onArrowUpKeyDown();\n                    break;\n                case 'arrowdown':\n                case 'down':\n                    this.onArrowDownKeyDown();\n                    break;\n                case 'home':\n                    this.onHomeKeyDown();\n                    break;\n                case 'end':\n                    this.onEndKeyDown();\n                    break;\n                default:\n                    return;\n            }\n        }\n    }\n\n    /**\n     * Navigates to previous item\n     */\n    onArrowDownKeyDown() {\n        this.target.navigateNext();\n    }\n\n    /**\n     * Navigates to previous item\n     */\n    onArrowUpKeyDown() {\n        this.target.navigatePrev();\n    }\n\n    /**\n     * Navigates to target's last item\n     */\n    onEndKeyDown() {\n        this.target.navigateLast();\n    }\n\n    /**\n     * Navigates to target's first item\n     */\n    onHomeKeyDown() {\n        this.target.navigateFirst();\n    }\n}\n","import { Directive, ElementRef, HostBinding, Input, OnInit } from '@angular/core';\n\nenum IgxHintPosition {\n    START,\n    END\n}\n\n@Directive({\n    selector: 'igx-hint,[igxHint]'\n})\nexport class IgxHintDirective implements OnInit {\n    private _position: IgxHintPosition = IgxHintPosition.START;\n    /**\n     * Sets/gets whether the hint position is at the start.\n     * Default value is `false`.\n     * ```typescript\n     * @ViewChild('hint', {read: IgxHintDirective})\n     * public igxHint: IgxHintDirective;\n     * this.igxHint.isPositionStart = true;\n     * ```\n     * ```typescript\n     * let isHintPositionStart = this.igxHint.isPositionStart;\n     * ```\n     * @memberof IgxHintDirective\n     */\n    @HostBinding('class.igx-input-group__hint-item--start')\n    public isPositionStart = false;\n    /**\n     * Sets/gets whether the hint position is at the end.\n     * Default value is `false`.\n     * ```typescript\n     * @ViewChild('hint', {read: IgxHintDirective})\n     * public igxHint: IgxHintDirective;\n     * this.igxHint.isPositionEnd = true;\n     * ```\n     * ```typescript\n     * let isHintPositionEnd = this.igxHint.isPositionEnd;\n     * ```\n     * @memberof IgxHintDirective\n     */\n    @HostBinding('class.igx-input-group__hint-item--end')\n    public isPositionEnd = false;\n\n    constructor(private _element: ElementRef) {\n    }\n    /**\n     * Sets the position of the hint.\n     * ```html\n     * <igx-input-group>\n     *  <input igxInput type=\"text\"/>\n     *  <igx-hint #hint [position]=\"'start'\">IgxHint displayed at the start</igx-hint>\n     * </igx-input-group>\n     * ```\n     * @memberof IgxHintDirective\n     */\n    @Input('position')\n    set position(value: string) {\n        const position: IgxHintPosition = (IgxHintPosition as any)[value.toUpperCase()];\n        if (position !== undefined) {\n            this._position = position;\n            this._applyPosition(this._position);\n        }\n    }\n    /**\n     * Gets the position of the hint.\n     * ```typescript\n     * @ViewChild('hint', {read: IgxHintDirective})\n     * public igxHint: IgxHintDirective;\n     * let hintPosition =  this.igxHint.position;\n     * ```\n     * @memberof IgxHintDirective\n     */\n    get position() {\n        return this._position.toString();\n    }\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        this._applyPosition(this._position);\n    }\n\n    private _applyPosition(position: IgxHintPosition) {\n        this.isPositionStart = this.isPositionEnd = false;\n        switch (position) {\n            case IgxHintPosition.START:\n                this.isPositionStart = true;\n                break;\n            case IgxHintPosition.END:\n                this.isPositionEnd = true;\n                break;\n            default: break;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxDropDownComponent } from './drop-down.component';\nimport { IgxDropDownItemComponent } from './drop-down-item.component';\nimport { IgxDropDownItemNavigationDirective } from './drop-down-navigation.directive';\nimport { CommonModule } from '@angular/common';\nimport { IgxToggleModule } from '../directives/toggle/toggle.directive';\nimport { IgxDropDownGroupComponent } from './drop-down-group.component';\nimport { IgxDropDownItemBaseDirective } from './drop-down-item.base';\n\nexport * from './drop-down.component';\nexport * from './drop-down-item.component';\nexport { ISelectionEventArgs, IDropDownNavigationDirective } from './drop-down.common';\nexport * from './drop-down-navigation.directive';\nexport * from './drop-down.base';\nexport * from './drop-down-item.base';\nexport * from './drop-down-group.component';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxDropDownComponent,\n        IgxDropDownItemBaseDirective,\n        IgxDropDownItemComponent,\n        IgxDropDownGroupComponent,\n        IgxDropDownItemNavigationDirective\n    ],\n    exports: [\n        IgxDropDownComponent,\n        IgxDropDownItemComponent,\n        IgxDropDownGroupComponent,\n        IgxDropDownItemNavigationDirective\n    ],\n    imports: [\n        CommonModule,\n        IgxToggleModule\n    ]\n})\nexport class IgxDropDownModule { }\n","import {\n    AfterViewInit,\n    ChangeDetectorRef,\n    Directive,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    OnDestroy,\n    Optional,\n    Self\n} from '@angular/core';\nimport { AbstractControl, FormControlName, NgControl, NgModel } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { IgxInputGroupBase } from '../../input-group/input-group.common';\n\nconst nativeValidationAttributes = ['required', 'pattern', 'minlength', 'maxlength', 'min', 'max', 'step'];\n\nexport enum IgxInputState {\n    INITIAL,\n    VALID,\n    INVALID\n}\n\n/**\n * The `igxInput` directive creates single- or multiline text elements, covering common scenarios when dealing with form inputs.\n *\n * @igxModule IgxInputGroupModule\n *\n * @igxParent Data Entry & Display\n *\n * @igxTheme igx-input-group-theme\n *\n * @igxKeywords input, input group, form, field, validation\n *\n * @igxGroup presentation\n *\n * @example\n * ```html\n * <input-group>\n *  <label for=\"address\">Address</label>\n *  <input igxInput name=\"address\" type=\"text\" [(ngModel)]=\"customer.address\">\n * </input-group>\n * ```\n */\n@Directive({\n    selector: '[igxInput]',\n    exportAs: 'igxInput'\n})\nexport class IgxInputDirective implements AfterViewInit, OnDestroy {\n    private _valid = IgxInputState.INITIAL;\n    private _statusChanges$: Subscription;\n\n    constructor(\n        public inputGroup: IgxInputGroupBase,\n        @Optional() @Self() @Inject(NgModel) protected ngModel: NgModel,\n        @Optional() @Self() @Inject(FormControlName) protected formControl: FormControlName,\n        protected element: ElementRef<HTMLInputElement>,\n        protected cdr: ChangeDetectorRef) { }\n\n    private get ngControl(): NgControl {\n        return this.ngModel ? this.ngModel : this.formControl;\n    }\n    /**\n     * Sets the `value` property.\n     *\n     * @example\n     * ```html\n     * <input-group>\n     *  <input igxInput #igxInput [value]=\"'IgxInput Value'\">\n     * </input-group>\n     * ```\n     */\n    @Input()\n    set value(value: any) {\n        this.nativeElement.value = value ?? '';\n        this.checkValidity();\n    }\n    /**\n     * Gets the `value` property.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild('igxInput', {read: IgxInputDirective})\n     *  public igxInput: IgxInputDirective;\n     * let inputValue = this.igxInput.value;\n     * ```\n     */\n    get value() {\n        return this.nativeElement.value;\n    }\n    /**\n     * Sets the `disabled` property.\n     *\n     * @example\n     * ```html\n     * <input-group>\n     *  <input igxInput #igxInput [disabled]=\"true\">\n     * </input-group>\n     * ```\n     */\n    @Input()\n    public set disabled(value: boolean) {\n        this.nativeElement.disabled = value;\n        this.inputGroup.disabled = value;\n    }\n    /**\n     * Gets the `disabled` property\n     *\n     * @example\n     * ```typescript\n     * @ViewChild('igxInput', {read: IgxInputDirective})\n     *  public igxInput: IgxInputDirective;\n     * let isDisabled = this.igxInput.disabled;\n     * ```\n     */\n    public get disabled() {\n        return this.nativeElement.hasAttribute('disabled');\n    }\n\n    /**\n     * Sets the `required` property.\n     *\n     * @example\n     * ```html\n     * <input-group>\n     *  <input igxInput #igxInput [required]=\"true\">\n     * </input-group>\n     * ```\n     */\n    @Input()\n    public set required(value: boolean) {\n        if (typeof value === 'boolean') {\n            this.nativeElement.required = this.inputGroup.isRequired = value;\n\n            if (value && !this.nativeElement.checkValidity()) {\n                this._valid = IgxInputState.INVALID;\n            } else {\n                this._valid = IgxInputState.INITIAL;\n            }\n        }\n    }\n\n    /**\n     * Gets whether the igxInput is required.\n     *\n     * @example\n     * ```typescript\n     * let isRequired = this.igxInput.required;\n     * ```\n     */\n    public get required() {\n        return this.nativeElement.hasAttribute('required');\n    }\n\n    /**\n     * Sets/gets whether the `\"igx-input-group__input\"` class is added to the host element.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.isInput = true;\n     * ```\n     *\n     * @example\n     * ```typescript\n     * let isCLassAdded = this.igxInput.isInput;\n     * ```\n     */\n    @HostBinding('class.igx-input-group__input')\n    public isInput = false;\n    /**\n     * Sets/gets whether the `\"class.igx-input-group__textarea\"` class is added to the host element.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.isTextArea = true;\n     * ```\n     *\n     * @example\n     * ```typescript\n     * let isCLassAdded = this.igxInput.isTextArea;\n     * ```\n     */\n    @HostBinding('class.igx-input-group__textarea')\n    public isTextArea = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('focus', ['$event'])\n    public onFocus(event) {\n        this.inputGroup.isFocused = true;\n    }\n    /**\n     * @param event The event to invoke the handler\n     *\n     * @hidden\n     * @internal\n     */\n    @HostListener('blur', ['$event'])\n    public onBlur(event) {\n        this.inputGroup.isFocused = false;\n        this._valid = IgxInputState.INITIAL;\n        if (this.ngControl) {\n            if (!this.ngControl.valid) {\n                this._valid = IgxInputState.INVALID;\n            }\n        } else if (this._hasValidators() && !this.nativeElement.checkValidity()) {\n            this._valid = IgxInputState.INVALID;\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('input')\n    public onInput() {\n        this.checkValidity();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngAfterViewInit() {\n        this.inputGroup.hasPlaceholder = this.nativeElement.hasAttribute('placeholder');\n        this.inputGroup.disabled = this.inputGroup.disabled || this.nativeElement.hasAttribute('disabled');\n        this.inputGroup.isRequired = this.nativeElement.hasAttribute('required');\n\n        // Make sure we do not invalidate the input on init\n        if (!this.ngControl) {\n            this._valid = IgxInputState.INITIAL;\n        }\n        // Also check the control's validators for required\n        if (!this.inputGroup.isRequired && this.ngControl && this.ngControl.control.validator) {\n            const validation = this.ngControl.control.validator({} as AbstractControl);\n            this.inputGroup.isRequired = validation && validation.required;\n        }\n\n\n        const elTag = this.nativeElement.tagName.toLowerCase();\n        if (elTag === 'textarea') {\n            this.isTextArea = true;\n        } else {\n            this.isInput = true;\n        }\n\n        if (this.ngControl) {\n            this._statusChanges$ = this.ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n        }\n\n        this.cdr.detectChanges();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy() {\n        if (this._statusChanges$) {\n            this._statusChanges$.unsubscribe();\n        }\n    }\n    /**\n     * Sets a focus on the igxInput.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.focus();\n     * ```\n     */\n    public focus() {\n        this.nativeElement.focus();\n    }\n    /**\n     * Gets the `nativeElement` of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * let igxInputNativeElement = this.igxInput.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onStatusChanged() {\n        // Enable/Disable control based on ngControl #7086\n        if (this.disabled !== this.ngControl.disabled) {\n            this.disabled = this.ngControl.disabled;\n        }\n        if (this.ngControl.control.validator || this.ngControl.control.asyncValidator) {\n            if (this.ngControl.control.touched || this.ngControl.control.dirty) {\n                //  TODO: check the logic when control is touched or dirty\n                if (this.inputGroup.isFocused) {\n                    // the user is still typing in the control\n                    this._valid = this.ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n                } else {\n                    // the user had touched the control previously but now the value is changing due to changes in the form\n                    this._valid = this.ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n                }\n            } else {\n                //  if control is untouched and pristine its state is initial. This is when user did not interact\n                //  with the input or when form/control is reset\n                this._valid = IgxInputState.INITIAL;\n            }\n        }\n    }\n    /**\n     * Gets whether the igxInput has a placeholder.\n     *\n     * @example\n     * ```typescript\n     * let hasPlaceholder = this.igxInput.hasPlaceholder;\n     * ```\n     */\n    public get hasPlaceholder() {\n        return this.nativeElement.hasAttribute('placeholder');\n    }\n    /**\n     * Gets the placeholder element of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * let igxInputPlaceholder = this.igxInput.placeholder;\n     * ```\n     */\n    public get placeholder() {\n        return this.nativeElement.placeholder;\n    }\n\n    /**\n     * @returns An indicator of whether the input has validator attributes or not\n     *\n     * @hidden\n     * @internal\n     */\n    private _hasValidators(): boolean {\n        for (const nativeValidationAttribute of nativeValidationAttributes) {\n            if (this.nativeElement.hasAttribute(nativeValidationAttribute)) {\n                return true;\n            }\n        }\n\n        return !!this.ngControl && (!!this.ngControl.control.validator || !!this.ngControl.control.asyncValidator);\n    }\n\n    /**\n     * Gets whether the igxInput is focused.\n     *\n     * @example\n     * ```typescript\n     * let isFocused = this.igxInput.focused;\n     * ```\n     */\n    public get focused() {\n        return this.inputGroup.isFocused;\n    }\n    /**\n     * Gets the state of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * let igxInputState = this.igxInput.valid;\n     * ```\n     */\n    public get valid(): IgxInputState {\n        return this._valid;\n    }\n\n    /**\n     * Gets whether the igxInput is valid.\n     *\n     * @example\n     * ```typescript\n     * let valid = this.igxInput.isValid;\n     * ```\n     */\n    public get isValid(): boolean {\n        return this.valid !== IgxInputState.INVALID;\n    }\n\n    /**\n     * Sets the state of the igxInput.\n     *\n     * @example\n     * ```typescript\n     * this.igxInput.valid = IgxInputState.INVALID;\n     * ```\n     */\n    public set valid(value: IgxInputState) {\n        this._valid = value;\n    }\n\n    /**\n     * A function to assign a validity property of an input.\n     *\n     * @hidden\n     * @internal\n     */\n    private checkValidity() {\n        if (!this.ngControl && this._hasValidators()) {\n            this._valid = this.nativeElement.checkValidity() ? IgxInputState.VALID : IgxInputState.INVALID;\n        }\n    }\n}\n","/** @hidden */\nexport abstract class IgxInputGroupBase {\n    disabled: boolean;\n    isFocused: boolean;\n    isRequired: boolean;\n    hasPlaceholder: boolean;\n}\n","import { Directive, HostBinding, Input } from '@angular/core';\n\nlet NEXT_ID = 0;\n\n@Directive({\n    selector: '[igxLabel]'\n})\nexport class IgxLabelDirective {\n    @HostBinding('class.igx-input-group__label')\n    public defaultClass = true;\n\n/**\n * @hidden\n */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-label-${NEXT_ID++}`;\n}\n","import { NgModule, Directive } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-prefix,[igxPrefix]'\n})\nexport class IgxPrefixDirective { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxPrefixDirective],\n    exports: [IgxPrefixDirective]\n})\nexport class IgxPrefixModule { }\n","import { NgModule, Directive } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-suffix,[igxSuffix]'\n})\nexport class IgxSuffixDirective { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxSuffixDirective],\n    exports: [IgxSuffixDirective]\n})\nexport class IgxSuffixModule { }\n","import { InjectionToken } from '@angular/core';\n\nenum IgxInputGroupEnum {\n    line,\n    box,\n    border,\n    search,\n}\n\n/**\n * Defines the InputGroupType DI token.\n */\n // Should this go trough Interface https://angular.io/api/core/InjectionToken\n export const IGX_INPUT_GROUP_TYPE = new InjectionToken<IgxInputGroupType>('InputGroupType');\n\n /**\n  * Determines the InputGroupType.\n  */\n export type IgxInputGroupType = keyof typeof IgxInputGroupEnum;\n","import { CommonModule, DOCUMENT } from '@angular/common';\nimport {\n    Component,\n    ContentChild,\n    ContentChildren,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    QueryList,\n    Inject,\n    Optional,\n    AfterContentInit\n} from '@angular/core';\nimport { IgxHintDirective } from '../directives/hint/hint.directive';\nimport {\n    IgxInputDirective,\n    IgxInputState,\n} from '../directives/input/input.directive';\nimport { IgxLabelDirective } from '../directives/label/label.directive';\nimport { IgxPrefixModule } from '../directives/prefix/prefix.directive';\nimport { IgxSuffixModule } from '../directives/suffix/suffix.directive';\nimport {\n    DisplayDensity,\n    IDisplayDensityOptions,\n    DisplayDensityToken,\n    DisplayDensityBase,\n} from '../core/displayDensity';\nimport { IgxInputGroupBase } from './input-group.common';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\nimport { IgxInputGroupType, IGX_INPUT_GROUP_TYPE } from './inputGroupType';\n\nlet NEXT_ID = 0;\n\nenum IgxInputGroupThemeEnum {\n    'material',\n    'fluent',\n    'bootstrap',\n    'indigo-design',\n}\n\n/**\n * Determines the Input Group theme.\n */\nexport type IgxInputGroupTheme = keyof typeof IgxInputGroupThemeEnum;\n\n@Component({\n    selector: 'igx-input-group',\n    templateUrl: 'input-group.component.html',\n    providers: [\n        { provide: IgxInputGroupBase, useExisting: IgxInputGroupComponent }\n    ],\n})\nexport class IgxInputGroupComponent extends DisplayDensityBase\n    implements IgxInputGroupBase, AfterContentInit {\n    private _type: IgxInputGroupType = null;\n    private _filled = false;\n    private _variant: IgxInputGroupTheme = 'material';\n\n    /**\n     * An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-input-group [id]=\"'igx-input-group-55'\"></igx-input-group>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-input-group-${NEXT_ID++}`;\n\n    /**\n     * Property that enables/disables the autogenerated class of the `IgxInputGroupComponent`.\n     * By default applied the class is applied.\n     * ```typescript\n     *  @ViewChild(\"MyInputGroup\")\n     *  public inputGroup: IgxInputGroupComponent;\n     *  ngAfterViewInit(){\n     *  this.inputGroup.defaultClass = false;\n     * ```\n     * }\n     */\n    @HostBinding('class.igx-input-group')\n    public defaultClass = true;\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--placeholder')\n    public hasPlaceholder = false;\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--required')\n    public isRequired = false;\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--focused')\n    public isFocused = false;\n\n    /**\n     * An @Input property that disables the `IgxInputGroupComponent`.\n     * ```html\n     * <igx-input-group [disabled]=\"'true'\"></igx-input-group>\n     * ```\n     */\n    @HostBinding('class.igx-input-group--disabled')\n    @Input()\n    public disabled = false;\n\n    /**\n     * Prevents automatically focusing the input when clicking on other elements in the input group (e.g. prefix or suffix).\n     * @remarks Automatic focus causes software keyboard to show on mobile devices.\n     *\n     * @example\n     * ```html\n     * <igx-input-group [suppressInputAutofocus]=\"true\"></igx-input-group>\n     * ```\n     */\n    @Input()\n    public suppressInputAutofocus = false;\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--valid')\n    public get validClass(): boolean {\n        return this.input.valid === IgxInputState.VALID;\n    }\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--invalid')\n    public get invalidClass(): boolean {\n        return this.input.valid === IgxInputState.INVALID;\n    }\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--warning')\n    public hasWarning = false;\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--filled')\n    public get isFilled() {\n        return this._filled || (this.input && this.input.value);\n    }\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--cosy')\n    public get isDisplayDensityCosy() {\n        return this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--comfortable')\n    public get isDisplayDensityComfortable() {\n        return this.displayDensity === DisplayDensity.comfortable;\n    }\n\n    /** @hidden */\n    @HostBinding('class.igx-input-group--compact')\n    public get isDisplayDensityCompact() {\n        return this.displayDensity === DisplayDensity.compact;\n    }\n\n    /** @hidden */\n    @ContentChildren(IgxHintDirective, { read: IgxHintDirective })\n    protected hints: QueryList<IgxHintDirective>;\n\n    /** @hidden */\n    @ContentChild(IgxInputDirective, { read: IgxInputDirective, static: true })\n    protected input: IgxInputDirective;\n\n    /** @hidden */\n    @HostListener('click', ['$event'])\n    public onClick(event: MouseEvent) {\n        if (\n            !this.isFocused &&\n            event.target !== this.input.nativeElement &&\n            !this.suppressInputAutofocus\n        ) {\n            this.input.focus();\n        }\n    }\n\n    /** @hidden */\n    @HostListener('pointerdown', ['$event'])\n    public onPointerDown(event: PointerEvent) {\n        if (this.isFocused && event.target !== this.input.nativeElement) {\n            event.preventDefault();\n        }\n    }\n\n    hintClickHandler(event) {\n        event.stopPropagation();\n    }\n\n    /**\n     * An @Input property that sets how the input will be styled.\n     * Allowed values of type IgxInputGroupType.\n     * ```html\n     * <igx-input-group [type]=\"'search'\">\n     * ```\n     */\n    @Input('type')\n    public set type(value: IgxInputGroupType) {\n        this._type = value;\n    }\n\n    /**\n     * Returns the type of the `IgxInputGroupComponent`. How the input is styled.\n     * The default is `line`.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let inputType = this.inputGroup.type;\n     * }\n     * ```\n     */\n    public get type() {\n        return this._type || this._inputGroupType || 'line';\n    }\n\n    /** @hidden @internal */\n    public get theme(): IgxInputGroupTheme {\n        return this._variant;\n    }\n\n    /**\n     * @hidden\n     * @deprecated Use 'suppressInputAutofocus' instead.\n     */\n    @DeprecateProperty(`Deprecated. Use 'suppressInputAutofocus' instead.`)\n    @Input()\n    public get supressInputAutofocus(): boolean {\n        return this.suppressInputAutofocus;\n    }\n\n    /**\n     * @hidden\n     * @deprecated Use 'suppressInputAutofocus' instead.\n     */\n    public set supressInputAutofocus(value: boolean) {\n        this.suppressInputAutofocus = value;\n    }\n\n    constructor(\n        public element: ElementRef<HTMLElement>,\n        @Optional()\n        @Inject(DisplayDensityToken)\n        private _displayDensityOptions: IDisplayDensityOptions,\n        @Optional()\n        @Inject(IGX_INPUT_GROUP_TYPE)\n        private _inputGroupType: IgxInputGroupType,\n        @Inject(DOCUMENT)\n        private document: any\n    ) {\n        super(_displayDensityOptions);\n    }\n\n    ngAfterContentInit() {\n        const variant = this.document.defaultView\n            .getComputedStyle(this.element.nativeElement)\n            .getPropertyValue('--igx-input-group-variant')\n            .trim();\n        this._variant = variant as IgxInputGroupTheme;\n    }\n    /**\n     * Returns whether the `IgxInputGroupComponent` has hints.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let inputHints = this.inputGroup.hasHints;\n     * }\n     * ```\n     */\n    public get hasHints() {\n        return this.hints.length > 0;\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` has border.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let inputBorder = this.inputGroup.hasBorder;\n     * }\n     * ```\n     */\n    public get hasBorder() {\n        return (\n            (this.type === 'line' || this.type === 'box') &&\n            this._variant === 'material'\n        );\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is line.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeLine = this.inputGroup.isTypeLine;\n     * }\n     * ```\n     */\n    public get isTypeLine(): boolean {\n        return this.type === 'line' && this._variant === 'material';\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is box.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeBox = this.inputGroup.isTypeBox;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-input-group--box')\n    public get isTypeBox() {\n        return this.type === 'box' && this._variant === 'material';\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is border.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeBorder = this.inputGroup.isTypeBorder;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-input-group--border')\n    public get isTypeBorder() {\n        return this.type === 'border' && this._variant === 'material';\n    }\n\n    /**\n     * Returns true if the `IgxInputGroupComponent` theme is Fluent.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeFluent = this.inputGroup.isTypeFluent;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-input-group--fluent')\n    public get isTypeFluent() {\n        return this._variant === 'fluent';\n    }\n\n    /**\n     * Returns true if the `IgxInputGroupComponent` theme is Bootstrap.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeBootstrap = this.inputGroup.isTypeBootstrap;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-input-group--bootstrap')\n    public get isTypeBootstrap() {\n        return this._variant === 'bootstrap';\n    }\n\n    /**\n     * Returns true if the `IgxInputGroupComponent` theme is Indigo.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeIndigo = this.inputGroup.isTypeIndigo;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-input-group--indigo')\n    public get isTypeIndigo() {\n        return this._variant === 'indigo-design';\n    }\n\n    /**\n     * Returns whether the `IgxInputGroupComponent` type is search.\n     * ```typescript\n     * @ViewChild(\"MyInputGroup1\")\n     * public inputGroup: IgxInputGroupComponent;\n     * ngAfterViewInit(){\n     *    let isTypeSearch = this.inputGroup.isTypeSearch;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-input-group--search')\n    public get isTypeSearch() {\n        return this.type === 'search';\n    }\n\n    /** @hidden */\n    public get filled() {\n        return this._filled;\n    }\n\n    /** @hidden */\n    public set filled(val) {\n        this._filled = val;\n    }\n}\n\n/** @hidden */\n@NgModule({\n    declarations: [\n        IgxInputGroupComponent,\n        IgxHintDirective,\n        IgxInputDirective,\n        IgxLabelDirective,\n    ],\n    exports: [\n        IgxInputGroupComponent,\n        IgxHintDirective,\n        IgxInputDirective,\n        IgxLabelDirective,\n        IgxPrefixModule,\n        IgxSuffixModule,\n    ],\n    imports: [CommonModule, IgxPrefixModule, IgxSuffixModule],\n})\nexport class IgxInputGroupModule {}\n","import {\n    ChangeDetectorRef,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    NgModule,\n    OnDestroy,\n    Optional,\n    Output,\n    Self,\n    AfterViewInit,\n    OnInit\n} from '@angular/core';\nimport { NgModel, FormControlName } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { CancelableEventArgs, IBaseEventArgs } from '../../core/utils';\nimport {\n    AbsoluteScrollStrategy,\n    AutoPositionStrategy,\n    IPositionStrategy,\n    IScrollStrategy,\n    OverlaySettings\n} from '../../services/public_api';\nimport {\n    IgxDropDownComponent,\n    IgxDropDownItemNavigationDirective,\n    IgxDropDownModule,\n    ISelectionEventArgs\n} from '../../drop-down/public_api';\nimport { IgxInputGroupComponent } from '../../input-group/public_api';\nimport { IgxOverlayOutletDirective } from '../toggle/toggle.directive';\n\n/**\n * Interface that encapsulates onItemSelection event arguments - new value and cancel selection.\n * @export\n */\nexport interface AutocompleteItemSelectionEventArgs extends CancelableEventArgs, IBaseEventArgs {\n    /**\n     * New value selected from the drop down\n     */\n    value: string;\n}\n\nexport interface AutocompleteOverlaySettings {\n    /** Position strategy to use with this settings */\n    positionStrategy?: IPositionStrategy;\n    /** Scroll strategy to use with this settings */\n    scrollStrategy?: IScrollStrategy;\n    /** Set the outlet container to attach the overlay to */\n    outlet?: IgxOverlayOutletDirective | ElementRef;\n}\n\n/**\n * **Ignite UI for Angular Autocomplete** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/autocomplete.html)\n *\n * The igxAutocomplete directive provides a way to enhance a text input\n * by showing a drop down of suggested options, provided by the developer.\n *\n * Example:\n * ```html\n * <input type=\"text\" [igxAutocomplete]=\"townsPanel\" />\n * <igx-drop-down #townsPanel>\n *     <igx-drop-down-item *ngFor=\"let town of towns | startsWith:townSelected\" [value]=\"town\">\n *         {{town}}\n *     </igx-drop-down-item>\n * </igx-drop-down>\n * ```\n */\n@Directive({\n    selector: '[igxAutocomplete]'\n})\nexport class IgxAutocompleteDirective extends IgxDropDownItemNavigationDirective implements OnDestroy, AfterViewInit, OnInit {\n\n    private _shouldBeOpen = false;\n    constructor(@Self() @Optional() @Inject(NgModel) protected ngModel: NgModel,\n        @Self() @Optional() @Inject(FormControlName) protected formControl: FormControlName,\n        @Optional() protected group: IgxInputGroupComponent,\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef) {\n        super(null);\n    }\n    private destroy$ = new Subject();\n\n    private defaultSettings: OverlaySettings;\n\n    protected id: string;\n    protected get model() {\n        return this.ngModel || this.formControl;\n    }\n\n    /** @hidden @internal */\n    get nativeElement(): HTMLInputElement {\n        return this.elementRef.nativeElement;\n    }\n\n    /** @hidden @internal */\n    get parentElement(): HTMLElement {\n        return this.group ? this.group.element.nativeElement : this.nativeElement;\n    }\n\n    private get settings(): OverlaySettings {\n        const settings = Object.assign({}, this.defaultSettings, this.autocompleteSettings);\n        const target = settings.target || settings.positionStrategy.settings.target;\n        if (!target) {\n            const positionStrategyClone: IPositionStrategy = settings.positionStrategy.clone();\n            settings.target = this.parentElement;\n            settings.positionStrategy = positionStrategyClone;\n        }\n        return settings;\n    }\n\n    /**\n     * Sets the target of the autocomplete directive\n     *\n     * ```html\n     * <!-- Set -->\n     * <input [igxAutocomplete]=\"dropdown\" />\n     * ...\n     * <igx-drop-down #dropdown>\n     * ...\n     * </igx-drop-down>\n     * ```\n     */\n    @Input('igxAutocomplete')\n    public get target(): IgxDropDownComponent {\n        return this._target as IgxDropDownComponent;\n    }\n    public set target(v: IgxDropDownComponent) {\n        this._target = v;\n    }\n\n    /**\n     * Enables/disables autocomplete component\n     *\n     * ```typescript\n     * // get\n     * let disabled = this.autocomplete.disabled;\n     * ```\n     * ```html\n     * <!--set-->\n     * <input type=\"text\" [igxAutocomplete]=\"townsPanel\" [igxAutocompleteDisabled]=\"disabled\"/>\n     * ```\n     * ```typescript\n     * // set\n     * public disabled = true;\n     * ```\n     */\n    @Input('igxAutocompleteDisabled')\n    public disabled = false;\n\n    /**\n     * Provide overlay settings for the autocomplete drop down\n     *\n     * ```typescript\n     * // get\n     * let settings = this.autocomplete.autocompleteSettings;\n     * ```\n     * ```html\n     * <!--set-->\n     * <input type=\"text\" [igxAutocomplete]=\"townsPanel\" [igxAutocompleteSettings]=\"settings\"/>\n     * ```\n     * ```typescript\n     * // set\n     * this.settings = {\n     *  positionStrategy: new ConnectedPositioningStrategy({\n     *      closeAnimation: null,\n     *      openAnimation: null\n     *  })\n     * };\n     * ```\n     */\n    @Input('igxAutocompleteSettings')\n    autocompleteSettings: AutocompleteOverlaySettings;\n\n    /**\n     * Emitted after item from the drop down is selected\n     *\n     * ```html\n     * <input igxInput [igxAutocomplete]=\"townsPanel\" (onItemSelected)='itemSelected($event)' />\n     * ```\n     */\n    @Output()\n    onItemSelected = new EventEmitter<AutocompleteItemSelectionEventArgs>();\n\n    /** @hidden @internal */\n    @HostBinding('attr.autocomplete')\n    public autofill = 'off';\n\n    /** @hidden  @internal */\n    @HostBinding('attr.role')\n    public role = 'combobox';\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-expanded')\n    public get ariaExpanded() {\n        return !this.collapsed;\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-haspopup')\n    public get hasPopUp() {\n        return 'listbox';\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-owns')\n    public get ariaOwns() {\n        return this.target.listId;\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-activedescendant')\n    public get ariaActiveDescendant() {\n        return !this.target.collapsed && this.target.focusedItem ? this.target.focusedItem.id : null;\n    }\n\n    /** @hidden  @internal */\n    @HostBinding('attr.aria-autocomplete')\n    public get ariaAutocomplete() {\n        return 'list';\n    }\n\n    /** @hidden  @internal */\n    @HostListener('input')\n    onInput() {\n        this.open();\n    }\n\n    /** @hidden  @internal */\n    @HostListener('keydown.ArrowDown', ['$event'])\n    @HostListener('keydown.Alt.ArrowDown', ['$event'])\n    @HostListener('keydown.ArrowUp', ['$event'])\n    @HostListener('keydown.Alt.ArrowUp', ['$event'])\n    onArrowDown(event: Event) {\n        event.preventDefault();\n        this.open();\n    }\n\n    /** @hidden  @internal */\n    @HostListener('keydown.Tab')\n    @HostListener('keydown.Shift.Tab')\n    onTab() {\n        this.close();\n    }\n\n    /** @hidden  @internal */\n    handleKeyDown(event) {\n        if (!this.collapsed) {\n            switch (event.key.toLowerCase()) {\n                case 'space':\n                case 'spacebar':\n                case ' ':\n                case 'home':\n                case 'end':\n                    return;\n                default:\n                    super.handleKeyDown(event);\n            }\n        }\n    }\n\n    /** @hidden  @internal */\n    onArrowDownKeyDown() {\n        super.onArrowDownKeyDown();\n    }\n\n    /** @hidden  @internal */\n    onArrowUpKeyDown() {\n        super.onArrowUpKeyDown();\n    }\n\n    /** @hidden  @internal */\n    onEndKeyDown() {\n        super.onEndKeyDown();\n    }\n\n    /** @hidden  @internal */\n    onHomeKeyDown() {\n        super.onHomeKeyDown();\n    }\n\n    /**\n     * Closes autocomplete drop down\n     */\n    public close() {\n        this._shouldBeOpen = false;\n        if (this.collapsed) {\n            return;\n        }\n        this.target.close();\n    }\n\n    /**\n     * Opens autocomplete drop down\n     */\n    public open() {\n        this._shouldBeOpen = true;\n        if (this.disabled || !this.collapsed || this.target.children.length === 0) {\n            return;\n        }\n        // if no drop-down width is set, the drop-down will be as wide as the autocomplete input;\n        this.target.width = this.target.width || (this.parentElement.clientWidth + 'px');\n        this.target.open(this.settings);\n        this.highlightFirstItem();\n    }\n\n    private get collapsed(): boolean {\n        return this.target ? this.target.collapsed : true;\n    }\n\n    private select = (value: ISelectionEventArgs) => {\n        if (!value.newSelection) {\n            return;\n        }\n        value.cancel = true; // Disable selection in the drop down, because in autocomplete we do not save selection.\n        const newValue = value.newSelection.value;\n        const args: AutocompleteItemSelectionEventArgs = { value: newValue, cancel: false };\n        this.onItemSelected.emit(args);\n        if (args.cancel) {\n            return;\n        }\n        this.close();\n        this.nativeElement.focus();\n\n        // Update model after the input is re-focused, in order to have proper valid styling.\n        // Otherwise when item is selected using mouse (and input is blurred), then valid style will be removed.\n        this.model ? this.model.control.setValue(newValue) : this.nativeElement.value = newValue;\n    }\n\n    private highlightFirstItem = () => {\n        if (this.target.focusedItem) {\n            this.target.focusedItem.focused = false;\n            this.target.focusedItem = null;\n        }\n        this.target.navigateFirst();\n        this.cdr.detectChanges();\n    }\n\n    /** @hidden @internal */\n    public ngOnInit() {\n        const targetElement = this.parentElement;\n        this.defaultSettings = {\n            target: targetElement,\n            modal: false,\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            positionStrategy: new AutoPositionStrategy(),\n            excludeFromOutsideClick: [targetElement]\n        };\n    }\n\n    /** @hidden */\n    public ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    public ngAfterViewInit() {\n        this.target.children.changes.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            if (this.target.children.length) {\n                if (!this.collapsed) {\n                    this.highlightFirstItem();\n                } else if (this._shouldBeOpen) {\n                    this.open();\n                }\n            } else {\n                this.close();\n            }\n        });\n        this.target.onSelection.pipe(takeUntil(this.destroy$)).subscribe(this.select);\n    }\n}\n\n/** @hidden */\n@NgModule({\n    imports: [IgxDropDownModule, CommonModule],\n    declarations: [IgxAutocompleteDirective],\n    exports: [IgxAutocompleteDirective]\n})\nexport class IgxAutocompleteModule { }\n","import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n    NgModule,\n    Renderer2,\n    HostListener,\n    Optional,\n    Inject\n} from '@angular/core';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions, DisplayDensity } from '../../core/density';\n\n/**\n * The Button directive provides the Ignite UI Button functionality to every component that's intended to be used as a button.\n *\n * @igxModule IgxButtonModule\n *\n * @igxParent Data Entry & Display\n *\n * @igxTheme igx-button-theme\n *\n * @igxKeywords button, span, div, click\n *\n * @remarks\n * The Ignite UI Button directive is intended to be used by any button, span or div and turn it into a fully functional button.\n *\n * @example\n * ```html\n * <button igxButton=\"outlined\">A Button</button>\n * ```\n */\n@Directive({\n    selector: '[igxButton]'\n})\nexport class IgxButtonDirective extends DisplayDensityBase {\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _type: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _defaultType = 'flat';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _cssClassPrefix = 'igx-button';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _color: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _label: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _backgroundColor: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _disabled: boolean;\n\n    constructor(public element: ElementRef, private _renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Returns the underlying DOM element.\n     */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * Called when the button is clicked.\n     */\n    @Output()\n    public buttonClick = new EventEmitter<any>();\n\n    /**\n     * Sets/gets the `role` attribute.\n     *\n     * @example\n     * ```typescript\n     * this.button.role = 'navbutton';\n     * let buttonRole = this.button.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'button';\n\n    /**\n     * Sets the type of the button.\n     *\n     * @example\n     * ```html\n     * <button igxButton=\"icon\"></button>\n     * ```\n     */\n    @Input('igxButton')\n    set type(value: string) {\n        const newValue = value ? value : this._defaultType;\n        if (this._type !== newValue) {\n            this._renderer.removeClass(this.nativeElement, `${this._cssClassPrefix}--${this._type}`);\n            this._type = newValue;\n            this._renderer.addClass(this.nativeElement, `${this._cssClassPrefix}--${this._type}`);\n        }\n    }\n\n    /**\n     * Sets the button text color.\n     *\n     * @example\n     * ```html\n     * <button igxButton=\"gradient\" igxButtonColor=\"blue\"></button>\n     * ```\n     */\n    @Input('igxButtonColor') set color(value: string) {\n        this._color = value || this.nativeElement.style.color;\n        this._renderer.setStyle(this.nativeElement, 'color', this._color);\n    }\n\n    /**\n     * Sets the background color of the button.\n     *\n     * @example\n     *  ```html\n     * <button igxButton=\"raised\" igxButtonBackground=\"red\"></button>\n     * ```\n     */\n    @Input('igxButtonBackground') set background(value: string) {\n        this._backgroundColor = value || this._backgroundColor;\n        this._renderer.setStyle(this.nativeElement, 'background', this._backgroundColor);\n    }\n\n    /**\n     * Sets the `aria-label` attribute.\n     *\n     * @example\n     *  ```html\n     * <button igxButton= \"flat\" igxLabel=\"Label\"></button>\n     * ```\n     */\n    @Input('igxLabel') set label(value: string) {\n        this._label = value || this._label;\n        this._renderer.setAttribute(this.nativeElement, `aria-label`, this._label);\n    }\n\n    /**\n     * Enables/disables the button.\n     *\n     * @example\n     * ```html\n     * <button igxButton= \"fab\" [disabled]=\"true\"></button>\n     * ```\n     */\n    @Input() set disabled(val) {\n        val = !!val;\n        this._disabled = val;\n        if (val) {\n            this._renderer.addClass(this.nativeElement, `${this._cssClassPrefix}--disabled`);\n        } else {\n            this._renderer.removeClass(this.nativeElement, `${this._cssClassPrefix}--disabled`);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--cosy')\n    public get cssClassCosy(): boolean {\n        return (this._type === 'flat' || this._type === 'raised') &&\n            this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--compact')\n    public get cssClassCompact(): boolean {\n        return (this._type === 'flat' || this._type === 'raised') &&\n            this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--outlined-cosy')\n    public get cssClassCosyOutlined(): boolean {\n        return this._type === 'outlined' && this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--outlined-compact')\n    public get cssClassCompactOutlined(): boolean {\n        return this._type === 'outlined' && this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--fab-cosy')\n    public get cssClassCosyFab(): boolean {\n        return this._type === 'fab' && this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-button--fab-compact')\n    public get cssClassCompactFab(): boolean {\n        return this._type === 'fab' && this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.disabled')\n    public get disabledAttribute() {\n        return this._disabled ? this._disabled : null;\n    }\n\n    /**\n     * Gets or sets whether the button is selected.\n     * Mainly used in the IgxButtonGroup component and it will have no effect if set separately.\n     *\n     * @example\n     * ```html\n     * <button igxButton=\"flat\" [selected]=\"button.selected\"></button>\n     * ```\n     */\n    @Input() public selected = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    public onClick(ev) {\n        this.buttonClick.emit(ev);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxButtonDirective],\n    exports: [IgxButtonDirective]\n})\nexport class IgxButtonModule { }\n","import { Directive, HostBinding, NgModule, Input } from '@angular/core';\nimport { mkenum } from '../../core/utils';\n\nexport const IgxDividerType = mkenum({\n    SOLID: 'solid',\n    DASHED: 'dashed'\n});\nexport type IgxDividerType = (typeof IgxDividerType)[keyof typeof IgxDividerType];\n\nlet NEXT_ID = 0;\n\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-divider'\n})\nexport class IgxDividerDirective {\n    /**\n     * Sets/gets the `id` of the divider.\n     * If not set, `id` will have value `\"igx-divider-0\"`;\n     * ```html\n     * <igx-divider id=\"my-divider\"></igx-divider>\n     * ```\n     * ```typescript\n     * let dividerId =  this.divider.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-divider-${NEXT_ID++}`;\n\n\n    /**\n     * An @Input property that sets the value of the `inset` attribute.\n     * If not provided it will be set to `'0'`.\n     * ```html\n     * <igx-divider inset=\"16px\"></igx-divider>\n     * ```\n     */\n    @Input('inset')\n    private _inset = '0';\n\n    /**\n     * An @Input property that sets the value of `role` attribute.\n     * If not the default value of `separator` will be used.\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'separator';\n\n    /**\n     * Sets the type of the divider. The default value\n     * is `default`. The divider can also be `dashed`;\n     * ```html\n     * <igx-divider type=\"dashed\"></igx-divider>\n     * ```\n     */\n    @HostBinding('class.igx-divider')\n    @Input()\n    public type: IgxDividerType | string = IgxDividerType.SOLID;\n\n    @HostBinding('class.igx-divider--dashed')\n    get isDashed() {\n        return this.type === IgxDividerType.DASHED;\n    }\n\n    /**\n     * An @Input that sets the `middle` attribute of the divider.\n     * If set to `true` and an `inset` value has been provided,\n     * the divider will start shrinking from both ends.\n     * ```html\n     * <igx-divider [middle]=\"true\"></igx-divider>\n     * ```\n     */\n    @HostBinding('class.igx-divider--inset')\n    @Input()\n    public middle = false;\n\n    /**\n     * A getter that returns `true` if the type of the divider is `default`;\n     * ```typescript\n     * const isDefault = this.divider.isDefault;\n     * ```\n     */\n    get isSolid() {\n        return this.type === IgxDividerType.SOLID;\n    }\n\n    /**\n     * An @Input that sets the vertical attribute of the divider.\n     * ```html\n     * <igx-divider [vertical]=\"true\"></igx-divider>\n     * ```\n     */\n    @HostBinding('class.igx-divider--vertical')\n    @Input()\n    public vertical = false;\n\n    /**\n     * Sets the inset of the divider from the side(s).\n     * If the divider attribute `middle` is set to `true`,\n     * it will inset the divider on both sides.\n     * ```typescript\n     * this.divider.inset = '32px';\n     * ```\n     */\n    @HostBinding('style.margin')\n    set inset(value: string) {\n        this._inset = value;\n    }\n\n    /**\n     * Gets the current divider inset in terms of\n     * margin representation as applied to the divider.\n     * ```typescript\n     * const inset = this.divider.inset;\n     * ```\n     */\n    get inset() {\n        const baseMargin = '0';\n\n        if (this.middle) {\n            if (this.vertical) {\n                return `${this._inset} ${baseMargin}`;\n            }\n            return `${baseMargin} ${this._inset}`;\n        } else {\n            if (this.vertical) {\n                return `${this._inset} ${baseMargin} 0 ${baseMargin}`;\n            }\n            return `${baseMargin} 0 ${baseMargin} ${this._inset}`;\n        }\n    }\n}\n\n@NgModule({\n    declarations: [IgxDividerDirective],\n    exports: [IgxDividerDirective]\n})\nexport class IgxDividerModule { }\n","import {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    Output,\n    Renderer2,\n    ChangeDetectorRef,\n    ViewContainerRef,\n    AfterContentInit,\n    TemplateRef,\n    ContentChildren,\n    QueryList\n} from '@angular/core';\nimport { animationFrameScheduler, fromEvent, interval, Subject } from 'rxjs';\nimport { takeUntil, throttle } from 'rxjs/operators';\nimport { IBaseEventArgs, PlatformUtil } from '../../core/utils';\nimport { IDropStrategy, IgxDefaultDropStrategy } from './drag-drop.strategy';\n\nexport enum DragDirection {\n    VERTICAL,\n    HORIZONTAL,\n    BOTH\n}\n\nexport interface IgxDragCustomEventDetails {\n    startX: number;\n    startY: number;\n    pageX: number;\n    pageY: number;\n    owner: IgxDragDirective;\n    originalEvent: any;\n}\n\nexport interface IDropBaseEventArgs extends IBaseEventArgs {\n    /**\n     * Reference to the original event that caused the draggable element to enter the igxDrop element.\n     * Can be PointerEvent, TouchEvent or MouseEvent.\n     */\n    originalEvent: any;\n    /** The owner igxDrop directive that triggered this event. */\n    owner: IgxDropDirective;\n    /** The igxDrag directive instanced on an element that entered the area of the igxDrop element */\n    drag: IgxDragDirective;\n    /** The data contained for the draggable element in igxDrag directive. */\n    dragData: any;\n    /** The initial position of the pointer on X axis when the dragged element began moving */\n    startX: number;\n    /** The initial position of the pointer on Y axis when the dragged element began moving */\n    startY: number;\n    /**\n     * The current position of the pointer on X axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageX: number;\n    /**\n     * The current position of the pointer on Y axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageY: number;\n    /**\n     * The current position of the pointer on X axis relative to the container that initializes the igxDrop.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    offsetX: number;\n    /**\n     * The current position of the pointer on Y axis relative to the container that initializes the igxDrop.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    offsetY: number;\n}\n\nexport interface IDropDroppedEventArgs extends IDropBaseEventArgs {\n    /** Specifies if the default drop logic related to the event should be canceled. */\n    cancel: boolean;\n}\n\nexport interface IDragBaseEventArgs extends IBaseEventArgs {\n    /**\n     * Reference to the original event that caused the interaction with the element.\n     * Can be PointerEvent, TouchEvent or MouseEvent.\n     */\n    originalEvent: PointerEvent | MouseEvent | TouchEvent;\n    /** The owner igxDrag directive that triggered this event. */\n    owner: IgxDragDirective;\n    /** The initial position of the pointer on X axis when the dragged element began moving */\n    startX: number;\n    /** The initial position of the pointer on Y axis when the dragged element began moving */\n    startY: number;\n    /**\n     * The current position of the pointer on X axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageX: number;\n    /**\n     * The current position of the pointer on Y axis when the event was triggered.\n     * Note: The browser might trigger the event with some delay and pointer would be already inside the igxDrop.\n     */\n    pageY: number;\n}\n\nexport interface IDragStartEventArgs extends IDragBaseEventArgs {\n    /** Set if the the dragging should be canceled. */\n    cancel: boolean;\n}\n\nexport interface IDragMoveEventArgs extends IDragStartEventArgs {\n    /** The new pageX position of the pointer that the igxDrag will use. It can be overridden to limit dragged element X movement. */\n    nextPageX: number;\n    /** The new pageX position of the pointer that the igxDrag will use. It can be overridden to limit dragged element Y movement. */\n    nextPageY: number;\n}\n\n\nexport interface IDragGhostBaseEventArgs extends IBaseEventArgs {\n    /** The owner igxDrag directive that triggered this event. */\n    owner: IgxDragDirective;\n    /** Instance to the ghost element that is created when dragging starts. */\n    ghostElement: any;\n    /** Set if the ghost creation/destruction should be canceled. */\n    cancel: boolean;\n}\n\nexport interface IDragCustomTransitionArgs {\n    duration?: number;\n    timingFunction?: string;\n    delay?: number;\n}\n\nexport class IgxDragLocation {\n    public pageX: number;\n    public pageY: number;\n\n    constructor(private _pageX, private _pageY) {\n        this.pageX = parseFloat(_pageX);\n        this.pageY = parseFloat(_pageY);\n    }\n}\n\n@Directive({\n    selector: '[igxDragHandle]'\n})\nexport class IgxDragHandleDirective {\n\n    @HostBinding('class.igx-drag__handle')\n    public baseClass = true;\n\n    constructor(public element: ElementRef<any>) {}\n}\n\n@Directive({\n    selector: '[igxDragIgnore]'\n})\nexport class IgxDragIgnoreDirective {\n\n    @HostBinding('class.igx-drag__ignore')\n    public baseClass = true;\n\n    constructor(public element: ElementRef<any>) {}\n}\n\n@Directive({\n    exportAs: 'drag',\n    selector: '[igxDrag]'\n})\nexport class IgxDragDirective implements AfterContentInit, OnDestroy {\n\n    protected ghostContext: any = null;\n\n    /**\n     * - Save data inside the `igxDrag` directive. This can be set when instancing `igxDrag` on an element.\n     * ```html\n     * <div [igxDrag]=\"{ source: myElement }\"></div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input('igxDrag')\n    public data: any;\n\n    /**\n     * An @Input property that indicates when the drag should start.\n     * By default the drag starts after the draggable element is moved by 5px.\n     * ```html\n     * <div igxDrag [dragTolerance]=\"100\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public dragTolerance = 5;\n\n    /**\n     * An @Input property that indicates the directions that the element can be dragged.\n     * By default it is set to both horizontal and vertical directions.\n     * ```html\n     * <div igxDrag [dragDirection]=\"dragDir\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public dragDir = DragDirection.HORIZONTAL;\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public dragDirection = DragDirection.BOTH;\n\n    /**\n     * An @Input property that provide a way for igxDrag and igxDrop to be linked through channels.\n     * It accepts single value or an array of values and evaluates then using strict equality.\n     * ```html\n     * <div igxDrag [dragChannel]=\"'odd'\">\n     *         <span>95</span>\n     * </div>\n     * <div igxDrop [dropChannel]=\"['odd', 'irrational']\">\n     *         <span>Numbers drop area!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public dragChannel: number | string | number[] | string[];\n\n    /**\n     * An @Input property that specifies if the base element should not be moved and a ghost element should be rendered that represents it.\n     * By default it is set to `true`.\n     * If it is set to `false` when dragging the base element is moved instead and no ghost elements are rendered.\n     * ```html\n     * <div igxDrag [ghost]=\"false\">\n     *      <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghost = true;\n\n    /**\n     * Sets a custom class that will be added to the `ghostElement` element.\n     * ```html\n     * <div igxDrag [ghostClass]=\"'ghostElement'\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghostClass = '';\n\n\n    /**\n     * An @Input property that specifies a template for the ghost element created when dragging starts and `ghost` is true.\n     * By default a clone of the base element the igxDrag is instanced is created.\n     * ```html\n     * <div igxDrag [ghostTemplate]=\"customGhost\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * <ng-template #customGhost>\n     *      <div class=\"customGhostStyle\">\n     *          <span>I am being dragged!</span>\n     *      </div>\n     * </ng-template>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghostTemplate: TemplateRef<any>;\n\n    /**\n     * An @Input property that sets the element to which the dragged element will be appended.\n     * By default it's set to null and the dragged element is appended to the body.\n     * ```html\n     * <div #hostDiv></div>\n     * <div igxDrag [ghostHost]=\"hostDiv\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public ghostHost;\n\n    /**\n     * An @Input property that specifies the offset of the dragged element relative to the mouse in pixels.\n     * By default it's taking the relative position to the mouse when the drag started and keeps it the same.\n     * ```html\n     * <div #hostDiv></div>\n     * <div igxDrag [ghostOffsetX]=\"0\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public set ghostOffsetX(value) {\n        this._offsetX = parseInt(value, 10);\n    }\n\n    public get ghostOffsetX() {\n        return this._offsetX !== undefined ? this._offsetX : this._defaultOffsetX;\n    }\n\n    /**\n     * An @Input property that specifies the offset of the dragged element relative to the mouse in pixels.\n     * By default it's taking the relative position to the mouse when the drag started and keeps it the same.\n     * ```html\n     * <div #hostDiv></div>\n     * <div igxDrag [ghostOffsetY]=\"0\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Input()\n    public set ghostOffsetY(value) {\n        this._offsetY = parseInt(value, 10);\n    }\n\n    public get ghostOffsetY() {\n        return this._offsetY !== undefined ? this._offsetY : this._defaultOffsetY ;\n    }\n\n    /**\n     * Event triggered when the draggable element drag starts.\n     * ```html\n     * <div igxDrag (dragStart)=\"onDragStart()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragStart(){\n     *      alert(\"The drag has stared!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragStart = new EventEmitter<IDragStartEventArgs>();\n\n    /**\n     * Event triggered when the draggable element has been moved.\n     * ```html\n     * <div igxDrag  (dragMove)=\"onDragMove()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragMove(){\n     *      alert(\"The element has moved!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragMove = new EventEmitter<IDragMoveEventArgs>();\n\n    /**\n     * Event triggered when the draggable element is released.\n     * ```html\n     * <div igxDrag (dragEnd)=\"onDragEnd()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragEnd(){\n     *      alert(\"The drag has ended!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragEnd = new EventEmitter<IDragBaseEventArgs>();\n\n    /**\n     * Event triggered when the draggable element is clicked.\n     * ```html\n     * <div igxDrag (dragClick)=\"onDragClick()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onDragClick(){\n     *      alert(\"The element has been clicked!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public dragClick = new EventEmitter<IDragBaseEventArgs>();\n\n    /**\n     * Event triggered when the drag ghost element is created.\n     * ```html\n     * <div igxDrag (ghostCreate)=\"ghostCreated()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public ghostCreated(){\n     *      alert(\"The ghost has been created!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public ghostCreate = new EventEmitter<IDragGhostBaseEventArgs>();\n\n    /**\n     * Event triggered when the drag ghost element is created.\n     * ```html\n     * <div igxDrag (ghostDestroy)=\"ghostDestroyed()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public ghostDestroyed(){\n     *      alert(\"The ghost has been destroyed!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public ghostDestroy = new EventEmitter<IDragGhostBaseEventArgs>();\n\n    /**\n     * Event triggered after the draggable element is released and after its animation has finished.\n     * ```html\n     * <div igxDrag (transitioned)=\"onMoveEnd()\">\n     *         <span>Drag Me!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * public onMoveEnd(){\n     *      alert(\"The move has ended!\");\n     * }\n     * ```\n     * @memberof IgxDragDirective\n     */\n    @Output()\n    public transitioned = new EventEmitter<IDragBaseEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxDragHandleDirective, { descendants: true })\n    public dragHandles: QueryList<IgxDragHandleDirective>;\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxDragIgnoreDirective, { descendants: true })\n    public dragIgnoredElems: QueryList<IgxDragIgnoreDirective>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-drag')\n    public baseClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-drag--select-disabled')\n    public selectDisabled = false;\n\n\n    /**\n     * Gets the current location of the element relative to the page.\n     */\n    public get location(): IgxDragLocation {\n        return new IgxDragLocation(this.pageX, this.pageY);\n    }\n\n    /**\n     * Gets the original location of the element before dragging started.\n     */\n    public get originLocation(): IgxDragLocation {\n        return new IgxDragLocation(this.baseOriginLeft, this.baseOriginTop);\n    }\n\n    /**\n     * @hidden\n     */\n    public get pointerEventsEnabled() {\n        return typeof PointerEvent !== 'undefined';\n    }\n\n    /**\n     * @hidden\n     */\n    public get touchEventsEnabled() {\n        return 'ontouchstart' in window;\n    }\n\n    /**\n     * @hidden\n     */\n    public get pageX() {\n        if (this.ghost && this.ghostElement) {\n            return this.ghostLeft;\n        }\n        return this.baseLeft;\n    }\n\n    /**\n     * @hidden\n     */\n    public get pageY() {\n        if (this.ghost && this.ghostElement) {\n            return this.ghostTop;\n        }\n        return this.baseTop;\n    }\n\n    protected get baseLeft(): number {\n        return this.element.nativeElement.getBoundingClientRect().left;\n    }\n\n    protected get baseTop(): number {\n        return this.element.nativeElement.getBoundingClientRect().top;\n    }\n\n    protected get baseOriginLeft(): number {\n        return this.baseLeft - this.getTransformX(this.element.nativeElement);\n    }\n\n    protected get baseOriginTop(): number {\n        return this.baseTop - this.getTransformY(this.element.nativeElement);\n    }\n\n    protected set ghostLeft(pageX: number) {\n        if (this.ghostElement) {\n            // We need to take into account marginLeft, since top style does not include margin, but pageX includes the margin.\n            const ghostMarginLeft = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-left'], 10);\n            // If ghost host is defined it needs to be taken into account.\n            this.ghostElement.style.left = (pageX - ghostMarginLeft - this._ghostHostX) + 'px';\n        }\n    }\n\n    protected get ghostLeft() {\n        return parseInt(this.ghostElement.style.left, 10) + this._ghostHostX;\n    }\n\n    protected set ghostTop(pageY: number) {\n        if (this.ghostElement) {\n            // We need to take into account marginTop, since top style does not include margin, but pageY includes the margin.\n            const ghostMarginTop = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-top'], 10);\n            // If ghost host is defined it needs to be taken into account.\n            this.ghostElement.style.top = (pageY - ghostMarginTop - this._ghostHostY) + 'px';\n        }\n    }\n\n    protected get ghostTop() {\n        return parseInt(this.ghostElement.style.top, 10) + this._ghostHostY;\n    }\n\n    /**\n     * @hidden\n     */\n    public defaultReturnDuration = '0.5s';\n\n    /**\n     * @hidden\n     */\n    public ghostElement;\n\n    /**\n     * @hidden\n     */\n    public animInProgress = false;\n\n    protected _startX = 0;\n    protected _startY = 0;\n    protected _lastX = 0;\n    protected _lastY = 0;\n    protected _dragStarted = false;\n\n    /** Drag ghost related properties */\n    protected _defaultOffsetX;\n    protected _defaultOffsetY;\n    protected _offsetX;\n    protected _offsetY;\n    protected _ghostStartX;\n    protected _ghostStartY;\n    protected _ghostHostX = 0;\n    protected _ghostHostY = 0;\n\n    protected _pointerDownId = null;\n    protected _clicked = false;\n    protected _lastDropArea = null;\n\n    protected _destroy = new Subject<boolean>();\n    protected _removeOnDestroy = true;\n\n    constructor(\n        public cdr: ChangeDetectorRef,\n        public element: ElementRef,\n        public viewContainer: ViewContainerRef,\n        public zone: NgZone,\n        public renderer: Renderer2,\n        protected platformUtil: PlatformUtil,\n    ) {\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        if (!this.dragHandles || !this.dragHandles.length ) {\n            // Set user select none to the whole draggable element if no drag handles are defined.\n            this.selectDisabled = true;\n        }\n\n        // Bind events\n        this.zone.runOutsideAngular(() => {\n            if (!this.platformUtil.isBrowser) {\n                return;\n            }\n            const targetElements = this.dragHandles && this.dragHandles.length ?\n                this.dragHandles.map((item) => item.element.nativeElement) : [this.element.nativeElement];\n            targetElements.forEach((element) => {\n                if (this.pointerEventsEnabled) {\n                    fromEvent(element, 'pointerdown').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerDown(res));\n\n                    fromEvent(element, 'pointermove').pipe(\n                        throttle(() => interval(0, animationFrameScheduler)),\n                        takeUntil(this._destroy)\n                    ).subscribe((res) => this.onPointerMove(res));\n\n                    fromEvent(element, 'pointerup').pipe(takeUntil(this._destroy))\n                        .subscribe((res) => this.onPointerUp(res));\n\n                    if (!this.ghost) {\n                        // Do not bind `lostpointercapture` to the target, because we will bind it on the ghost later.\n                        fromEvent(element, 'lostpointercapture').pipe(takeUntil(this._destroy))\n                        .subscribe((res) => this.onPointerLost(res));\n                    }\n                } else if (this.touchEventsEnabled) {\n                    fromEvent(element, 'touchstart').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerDown(res));\n                } else {\n                    // We don't have pointer events and touch events. Use then mouse events.\n                    fromEvent(element, 'mousedown').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerDown(res));\n                }\n            });\n\n            // We should bind to document events only once when there are no pointer events.\n            if (!this.pointerEventsEnabled && this.touchEventsEnabled) {\n                fromEvent(document.defaultView, 'touchmove').pipe(\n                    throttle(() => interval(0, animationFrameScheduler)),\n                    takeUntil(this._destroy)\n                ).subscribe((res) => this.onPointerMove(res));\n\n                fromEvent(document.defaultView, 'touchend').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerUp(res));\n            } else if (!this.pointerEventsEnabled) {\n                fromEvent(document.defaultView, 'mousemove').pipe(\n                    throttle(() => interval(0, animationFrameScheduler)),\n                    takeUntil(this._destroy)\n                ).subscribe((res) => this.onPointerMove(res));\n\n                fromEvent(document.defaultView, 'mouseup').pipe(takeUntil(this._destroy))\n                    .subscribe((res) => this.onPointerUp(res));\n            }\n\n            this.element.nativeElement.addEventListener('transitionend', (args) => {\n                this.onTransitionEnd(args);\n            });\n        });\n\n        // Set transition duration to 0s. This also helps with setting `visibility: hidden` to the base to not lag.\n        this.element.nativeElement.style.transitionDuration = '0.0s';\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy.next(true);\n        this._destroy.complete();\n\n        if (this.ghost && this.ghostElement && this._removeOnDestroy) {\n            this.ghostElement.parentNode.removeChild(this.ghostElement);\n            this.ghostElement = null;\n        }\n    }\n\n    /**\n     * Sets desired location of the base element or ghost element if rended relative to the document.\n     * @param newLocation New location that should be applied. It is advised to get new location using getBoundingClientRects() + scroll.\n     */\n    public setLocation(newLocation: IgxDragLocation) {\n        // We do not subtract marginLeft and marginTop here because here we calculate deltas.\n        if (this.ghost && this.ghostElement) {\n            const offsetHostX = this.ghostHost ? this.ghostHostOffsetLeft(this.ghostHost) : 0;\n            const offsetHostY = this.ghostHost ? this.ghostHostOffsetTop(this.ghostHost) : 0;\n            this.ghostLeft = newLocation.pageX - offsetHostX + this.getWindowScrollLeft();\n            this.ghostTop = newLocation.pageY - offsetHostY + this.getWindowScrollTop();\n        } else if (!this.ghost) {\n            const deltaX = newLocation.pageX - this.pageX;\n            const deltaY = newLocation.pageY - this.pageY;\n            const transformX = this.getTransformX(this.element.nativeElement);\n            const transformY = this.getTransformY(this.element.nativeElement);\n            this.setTransformXY(transformX + deltaX, transformY + deltaY);\n        }\n\n        this._startX = this.baseLeft;\n        this._startY = this.baseTop;\n    }\n\n    /**\n     * Animates the base or ghost element depending on the `ghost` input to its initial location.\n     * If `ghost` is true but there is not ghost rendered, it will be created and animated.\n     * If the base element has changed its DOM position its initial location will be changed accordingly.\n     * @param customAnimArgs Custom transition properties that will be applied when performing the transition.\n     * @param startLocation Start location from where the transition should start.\n     */\n    public transitionToOrigin(customAnimArgs?: IDragCustomTransitionArgs, startLocation?: IgxDragLocation) {\n        if ((!!startLocation && startLocation.pageX === this.baseOriginLeft && startLocation.pageY === this.baseOriginLeft) ||\n            (!startLocation && this.ghost && !this.ghostElement)) {\n            return;\n        }\n\n        if (!!startLocation && startLocation.pageX !== this.pageX && startLocation.pageY !== this.pageY) {\n            if (this.ghost && !this.ghostElement) {\n                this._startX = startLocation.pageX;\n                this._startY = startLocation.pageY;\n                this._ghostStartX = this._startX;\n                this._ghostStartY = this._startY;\n                this.createGhost(this._startX, this._startY);\n            }\n\n            this.setLocation(startLocation);\n        }\n\n        this.animInProgress = true;\n        // Use setTimeout because we need to be sure that the element is positioned first correctly if there is start location.\n        setTimeout(() => {\n            if (this.ghost) {\n                this.ghostElement.style.transitionProperty = 'top, left';\n                this.ghostElement.style.transitionDuration =\n                    customAnimArgs && customAnimArgs.duration ? customAnimArgs.duration + 's' : this.defaultReturnDuration ;\n                this.ghostElement.style.transitionTimingFunction =\n                    customAnimArgs && customAnimArgs.timingFunction ? customAnimArgs.timingFunction : '';\n                this.ghostElement.style.transitionDelay = customAnimArgs && customAnimArgs.delay ? customAnimArgs.delay + 's' : '';\n                this.setLocation(new IgxDragLocation(this.baseLeft, this.baseTop));\n            } else if (!this.ghost) {\n                this.element.nativeElement.style.transitionProperty = 'transform';\n                this.element.nativeElement.style.transitionDuration =\n                    customAnimArgs && customAnimArgs.duration ? customAnimArgs.duration + 's' : this.defaultReturnDuration ;\n                this.element.nativeElement.style.transitionTimingFunction =\n                    customAnimArgs && customAnimArgs.timingFunction ? customAnimArgs.timingFunction : '';\n                this.element.nativeElement.style.transitionDelay = customAnimArgs && customAnimArgs.delay ? customAnimArgs.delay + 's' : '';\n                this._startX = this.baseLeft;\n                this._startY = this.baseTop;\n                this.setTransformXY(0, 0);\n            }\n        }, 0);\n    }\n\n    /**\n     * Animates the base or ghost element to a specific target location or other element using transition.\n     * If `ghost` is true but there is not ghost rendered, it will be created and animated.\n     * It is recommended to use 'getBoundingClientRects() + pageScroll' when determining desired location.\n     * @param target Target that the base or ghost will transition to. It can be either location in the page or another HTML element.\n     * @param customAnimArgs Custom transition properties that will be applied when performing the transition.\n     * @param startLocation Start location from where the transition should start.\n     */\n    public transitionTo(target: IgxDragLocation | ElementRef, customAnimArgs?: IDragCustomTransitionArgs, startLocation?: IgxDragLocation) {\n        if (!!startLocation && this.ghost && !this.ghostElement) {\n            this._startX = startLocation.pageX;\n            this._startY = startLocation.pageY;\n            this._ghostStartX = this._startX;\n            this._ghostStartY = this._startY;\n        } else if (!!startLocation && (!this.ghost || this.ghostElement)) {\n            this.setLocation(startLocation);\n        } else if (this.ghost && !this.ghostElement) {\n            this._startX = this.baseLeft;\n            this._startY = this.baseTop;\n            this._ghostStartX = this._startX + this.getWindowScrollLeft();\n            this._ghostStartY = this._startY + this.getWindowScrollTop();\n        }\n\n        if (this.ghost && !this.ghostElement) {\n            this.createGhost(this._startX, this._startY);\n        }\n\n        this.animInProgress = true;\n        // Use setTimeout because we need to be sure that the element is positioned first correctly if there is start location.\n        setTimeout(() => {\n            const movedElem = this.ghost ? this.ghostElement : this.element.nativeElement;\n            movedElem.style.transitionProperty = this.ghost && this.ghostElement ? 'left, top' : 'transform';\n            movedElem.style.transitionDuration =\n                customAnimArgs && customAnimArgs.duration ? customAnimArgs.duration + 's' : this.defaultReturnDuration ;\n            movedElem.style.transitionTimingFunction =\n                customAnimArgs && customAnimArgs.timingFunction ? customAnimArgs.timingFunction : '';\n            movedElem.style.transitionDelay = customAnimArgs && customAnimArgs.delay ? customAnimArgs.delay + 's' : '';\n\n            if (target instanceof IgxDragLocation) {\n                this.setLocation(new IgxDragLocation (target.pageX, target.pageY));\n            } else {\n                const targetRects = target.nativeElement.getBoundingClientRect();\n                this.setLocation(new IgxDragLocation(\n                    targetRects.left -  this.getWindowScrollLeft(),\n                    targetRects.top - this.getWindowScrollTop()\n                ));\n            }\n        }, 0);\n    }\n\n    /**\n     * @hidden\n     * Method bound to the PointerDown event of the base element igxDrag is initialized.\n     * @param event PointerDown event captured\n     */\n    public onPointerDown(event) {\n        const ignoredElement = this.dragIgnoredElems.find(elem => elem.element.nativeElement === event.target);\n        if (ignoredElement) {\n            return;\n        }\n\n        this._clicked = true;\n        this._pointerDownId = event.pointerId;\n\n        // Set pointer capture so we detect pointermove even if mouse is out of bounds until ghostElement is created.\n        const handleFound = this.dragHandles.find(handle => handle.element.nativeElement === event.currentTarget);\n        const targetElement = handleFound ? handleFound.element.nativeElement : this.element.nativeElement;\n        if (this.pointerEventsEnabled) {\n            targetElement.setPointerCapture(this._pointerDownId);\n        } else {\n            targetElement.focus();\n            event.preventDefault();\n        }\n\n        if (this.pointerEventsEnabled || !this.touchEventsEnabled) {\n            // Check first for pointer events or non touch, because we can have pointer events and touch events at once.\n            this._startX = event.pageX;\n            this._startY = event.pageY;\n        } else if (this.touchEventsEnabled) {\n            this._startX = event.touches[0].pageX;\n            this._startY = event.touches[0].pageY;\n        }\n\n        this._defaultOffsetX = this.baseLeft - this._startX + this.getWindowScrollLeft();\n        this._defaultOffsetY = this.baseTop - this._startY + this.getWindowScrollTop();\n        this._ghostStartX = this._startX + this.ghostOffsetX;\n        this._ghostStartY = this._startY + this.ghostOffsetY;\n        this._lastX = this._startX;\n        this._lastY = this._startY;\n    }\n\n    /**\n     * @hidden\n     * Perform drag move logic when dragging and dispatching events if there is igxDrop under the pointer.\n     * This method is bound at first at the base element.\n     * If dragging starts and after the ghostElement is rendered the pointerId is reassigned it. Then this method is bound to it.\n     * @param event PointerMove event captured\n     */\n    public onPointerMove(event) {\n        if (this._clicked) {\n            let pageX, pageY;\n            if (this.pointerEventsEnabled || !this.touchEventsEnabled) {\n                // Check first for pointer events or non touch, because we can have pointer events and touch events at once.\n                pageX = event.pageX;\n                pageY = event.pageY;\n            } else if (this.touchEventsEnabled) {\n                pageX = event.touches[0].pageX;\n                pageY = event.touches[0].pageY;\n\n                // Prevent scrolling on touch while dragging\n                event.preventDefault();\n            }\n\n            const totalMovedX = pageX - this._startX;\n            const totalMovedY = pageY - this._startY;\n            if (!this._dragStarted &&\n                (Math.abs(totalMovedX) > this.dragTolerance || Math.abs(totalMovedY) > this.dragTolerance)) {\n                const dragStartArgs: IDragStartEventArgs = {\n                    originalEvent: event,\n                    owner: this,\n                    startX: pageX - totalMovedX,\n                    startY: pageY - totalMovedY,\n                    pageX: pageX,\n                    pageY: pageY,\n                    cancel: false\n                };\n                this.zone.run(() => {\n                    this.dragStart.emit(dragStartArgs);\n                });\n\n                if (!dragStartArgs.cancel) {\n                    this._dragStarted = true;\n                    if (this.ghost) {\n                        // We moved enough so ghostElement can be rendered and actual dragging to start.\n                        // When creating it will take into account any offset set by the user by default.\n                        this.createGhost(pageX, pageY);\n                    } else if (this._offsetX !== undefined || this._offsetY !== undefined) {\n                        // There is no need for ghost, but we will need to position initially the base element to reflect any offset.\n                        const transformX = (this._offsetX !== undefined ? this._offsetX - this._defaultOffsetX : 0) +\n                            this.getTransformX(this.element.nativeElement);\n                        const transformY = (this._offsetY !== undefined ? this._offsetY - this._defaultOffsetY : 0) +\n                            this.getTransformY(this.element.nativeElement);\n                        this.setTransformXY(transformX, transformY);\n                    }\n                } else {\n                    return;\n                }\n            } else if (!this._dragStarted) {\n                return;\n            }\n\n            const moveArgs: IDragMoveEventArgs = {\n                originalEvent: event,\n                owner: this,\n                startX: this._startX,\n                startY: this._startY,\n                pageX: this._lastX,\n                pageY: this._lastY,\n                nextPageX: pageX,\n                nextPageY: pageY,\n                cancel: false\n            };\n            this.dragMove.emit(moveArgs);\n\n            const setPageX = moveArgs.nextPageX;\n            const setPageY = moveArgs.nextPageY;\n            if (!moveArgs.cancel) {\n                if (this.ghost) {\n                    const updatedTotalMovedX = this.dragDirection === DragDirection.VERTICAL ? 0 : setPageX - this._startX;\n                    const updatedTotalMovedY = this.dragDirection === DragDirection.HORIZONTAL ? 0 : setPageY - this._startY;\n                    this.ghostLeft = this._ghostStartX + updatedTotalMovedX;\n                    this.ghostTop = this._ghostStartY + updatedTotalMovedY;\n                } else {\n                    const lastMovedX = this.dragDirection === DragDirection.VERTICAL ? 0 : setPageX - this._lastX;\n                    const lastMovedY = this.dragDirection === DragDirection.HORIZONTAL ? 0 : setPageY - this._lastY;\n                    const translateX = this.getTransformX(this.element.nativeElement) + lastMovedX;\n                    const translateY = this.getTransformY(this.element.nativeElement) + lastMovedY;\n                    this.setTransformXY(translateX, translateY);\n                }\n                this.dispatchDragEvents(pageX, pageY, event);\n            }\n\n            this._lastX = setPageX;\n            this._lastY = setPageY;\n        }\n    }\n\n    /**\n     * @hidden\n     * Perform drag end logic when releasing the ghostElement and dispatching drop event if igxDrop is under the pointer.\n     * This method is bound at first at the base element.\n     * If dragging starts and after the ghostElement is rendered the pointerId is reassigned to it. Then this method is bound to it.\n     * @param event PointerUp event captured\n     */\n    public onPointerUp(event) {\n        if (!this._clicked) {\n            return;\n        }\n\n        let pageX, pageY;\n        if (this.pointerEventsEnabled || !this.touchEventsEnabled) {\n            // Check first for pointer events or non touch, because we can have pointer events and touch events at once.\n            pageX = event.pageX;\n            pageY = event.pageY;\n        } else if (this.touchEventsEnabled) {\n            pageX = event.touches[0].pageX;\n            pageY = event.touches[0].pageY;\n\n            // Prevent scrolling on touch while dragging\n            event.preventDefault();\n        }\n\n        const eventArgs: IDragBaseEventArgs = {\n            originalEvent: event,\n            owner: this,\n            startX: this._startX,\n            startY: this._startY,\n            pageX: pageX,\n            pageY: pageY\n        };\n        this._pointerDownId = null;\n        this._clicked = false;\n        if (this._dragStarted) {\n            if (this._lastDropArea && this._lastDropArea !== this.element.nativeElement ) {\n                this.dispatchDropEvent(event.pageX, event.pageY, event);\n            }\n\n            this.zone.run(() => {\n                this.dragEnd.emit(eventArgs);\n            });\n\n            if (!this.animInProgress) {\n                this.onTransitionEnd(null);\n            }\n        } else {\n            // Trigger our own click event because when there is no ghost, native click cannot be prevented when dragging.\n            this.zone.run(() => {\n                this.dragClick.emit(eventArgs);\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * Execute this method whe the pointer capture has been lost.\n     * This means that during dragging the user has performed other action like right clicking and then clicking somewhere else.\n     * This method will ensure that the drag state is being reset in this case as if the user released the dragged element.\n     * @param event Event captured\n     */\n    public onPointerLost(event) {\n        if (!this._clicked) {\n            return;\n        }\n\n        const eventArgs = {\n            originalEvent: event,\n            owner: this,\n            startX: this._startX,\n            startY: this._startY,\n            pageX: event.pageX,\n            pageY: event.pageY\n        };\n        this._pointerDownId = null;\n        this._clicked = false;\n        if (this._dragStarted) {\n            this.zone.run(() => {\n                this.dragEnd.emit(eventArgs);\n            });\n            if (!this.animInProgress) {\n                this.onTransitionEnd(null);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * Create ghost element - if a Node object is provided it creates a clone of that node,\n     * otherwise it clones the host element.\n     * Bind all needed events.\n     * @param pageX Latest pointer position on the X axis relative to the page.\n     * @param pageY Latest pointer position on the Y axis relative to the page.\n     * @param node The Node object to be cloned.\n     */\n    protected createGhost(pageX, pageY, node: any = null) {\n        if (!this.ghost) {\n            return;\n        }\n\n        let dynamicGhostRef;\n        if (this.ghostTemplate) {\n            dynamicGhostRef = this.viewContainer.createEmbeddedView(this.ghostTemplate, this.ghostContext);\n            this.ghostElement = dynamicGhostRef.rootNodes[0];\n        } else {\n            this.ghostElement = node ? node.cloneNode(true) : this.element.nativeElement.cloneNode(true);\n        }\n\n        const totalMovedX = pageX - this._startX;\n        const totalMovedY = pageY - this._startY;\n        this._ghostHostX = this.ghostHost ? this.ghostHostOffsetLeft(this.ghostHost) : 0;\n        this._ghostHostY = this.ghostHost ? this.ghostHostOffsetTop(this.ghostHost) : 0;\n\n        this.ghostElement.style.transitionDuration = '0.0s';\n        this.ghostElement.style.position = 'absolute';\n\n\n        if (this.ghostClass) {\n            this.renderer.addClass(this.ghostElement, this.ghostClass);\n        }\n\n        const createEventArgs = {\n            owner: this,\n            ghostElement: this.ghostElement,\n            cancel: false\n        };\n        this.ghostCreate.emit(createEventArgs);\n        if (createEventArgs.cancel) {\n            this.ghostElement = null;\n            if (this.ghostTemplate && dynamicGhostRef) {\n                dynamicGhostRef.destroy();\n            }\n            return;\n        }\n\n        if (this.ghostHost) {\n            this.ghostHost.appendChild(this.ghostElement);\n        } else {\n            document.body.appendChild(this.ghostElement);\n        }\n\n        const ghostMarginLeft = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-left'], 10);\n        const ghostMarginTop = parseInt(document.defaultView.getComputedStyle(this.ghostElement)['margin-top'], 10);\n        this.ghostElement.style.left = (this._ghostStartX - ghostMarginLeft + totalMovedX - this._ghostHostX) + 'px';\n        this.ghostElement.style.top = (this._ghostStartY - ghostMarginTop + totalMovedY - this._ghostHostX) + 'px';\n\n        if (this.pointerEventsEnabled) {\n            // The ghostElement takes control for moving and dragging after it has been rendered.\n            if (this._pointerDownId !== null) {\n                this.ghostElement.setPointerCapture(this._pointerDownId);\n            }\n            this.ghostElement.addEventListener('pointermove', (args) => {\n                this.onPointerMove(args);\n            });\n            this.ghostElement.addEventListener('pointerup', (args) => {\n                this.onPointerUp(args);\n            });\n            this.ghostElement.addEventListener('lostpointercapture', (args) => {\n                this.onPointerLost(args);\n            });\n        }\n\n        // Transition animation when the ghostElement is released and it returns to it's original position.\n        this.ghostElement.addEventListener('transitionend', (args) => {\n            this.onTransitionEnd(args);\n        });\n\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden\n     * Dispatch custom igxDragEnter/igxDragLeave events based on current pointer position and if drop area is under.\n     */\n    protected dispatchDragEvents(pageX: number, pageY: number, originalEvent) {\n        let topDropArea;\n        const customEventArgs: IgxDragCustomEventDetails = {\n            startX: this._startX,\n            startY: this._startY,\n            pageX: pageX,\n            pageY: pageY,\n            owner: this,\n            originalEvent: originalEvent\n        };\n\n        const elementsFromPoint = this.getElementsAtPoint(pageX, pageY);\n        for (let i = 0; i < elementsFromPoint.length; i++) {\n            if (elementsFromPoint[i].getAttribute('droppable') === 'true' &&\n                elementsFromPoint[i] !== this.ghostElement && elementsFromPoint[i] !== this.element.nativeElement) {\n                topDropArea = elementsFromPoint[i];\n                break;\n            }\n        }\n\n        if (topDropArea &&\n            (!this._lastDropArea || (this._lastDropArea && this._lastDropArea !== topDropArea))) {\n                if (this._lastDropArea) {\n                    this.dispatchEvent(this._lastDropArea, 'igxDragLeave', customEventArgs);\n                }\n\n                this._lastDropArea = topDropArea;\n                this.dispatchEvent(this._lastDropArea, 'igxDragEnter', customEventArgs);\n            } else if (!topDropArea && this._lastDropArea) {\n                this.dispatchEvent(this._lastDropArea, 'igxDragLeave', customEventArgs);\n                this._lastDropArea = null;\n                return;\n            }\n\n        if (topDropArea) {\n            this.dispatchEvent(topDropArea, 'igxDragOver', customEventArgs);\n        }\n    }\n\n    /**\n     * @hidden\n     * Dispatch custom igxDrop event based on current pointer position if there is last recorder drop area under the pointer.\n     * Last recorder drop area is updated in @dispatchDragEvents method.\n     */\n    protected dispatchDropEvent(pageX: number, pageY: number, originalEvent) {\n        const eventArgs: IgxDragCustomEventDetails = {\n            startX: this._startX,\n            startY: this._startY,\n            pageX: pageX,\n            pageY: pageY,\n            owner: this,\n            originalEvent: originalEvent\n        };\n\n        this.dispatchEvent(this._lastDropArea, 'igxDrop', eventArgs);\n        this.dispatchEvent(this._lastDropArea, 'igxDragLeave', eventArgs);\n        this._lastDropArea = null;\n    }\n\n    /**\n     * @hidden\n     */\n    public onTransitionEnd(event) {\n        if ((!this._dragStarted && !this.animInProgress) || this._clicked) {\n            // Return if no dragging started and there is no animation in progress.\n            return ;\n        }\n\n        if (this.ghost && this.ghostElement) {\n            this._ghostStartX = this.baseLeft + this.getWindowScrollLeft();\n            this._ghostStartY = this.baseTop + this.getWindowScrollTop();\n\n            const ghostDestroyArgs: IDragGhostBaseEventArgs = {\n                owner: this,\n                ghostElement: this.ghostElement,\n                cancel: false\n            };\n            this.ghostDestroy.emit(ghostDestroyArgs);\n            if (ghostDestroyArgs.cancel) {\n                return;\n            }\n            this.ghostElement.parentNode.removeChild(this.ghostElement);\n            this.ghostElement = null;\n        } else if (!this.ghost) {\n            this.element.nativeElement.style.transitionProperty = '';\n            this.element.nativeElement.style.transitionDuration = '0.0s';\n            this.element.nativeElement.style.transitionTimingFunction = '';\n            this.element.nativeElement.style.transitionDelay = '';\n        }\n        this.animInProgress = false;\n        this._dragStarted = false;\n\n        // Execute transitioned after everything is reset so if the user sets new location on the base now it would work as expected.\n        this.zone.run(() => {\n            this.transitioned.emit({\n                originalEvent: event,\n                owner: this,\n                startX: this._startX,\n                startY: this._startY,\n                pageX: this._startX,\n                pageY: this._startY\n            });\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    protected getElementsAtPoint(pageX: number, pageY: number) {\n        // correct the coordinates with the current scroll position, because\n        // document.elementsFromPoint consider position within the current viewport\n        // window.pageXOffset == window.scrollX; // always true\n        // using window.pageXOffset for IE9 compatibility\n        const viewPortX = pageX - window.pageXOffset;\n        const viewPortY = pageY - window.pageYOffset;\n        if (document['msElementsFromPoint']) {\n            // Edge and IE special snowflakes\n            const elements = document['msElementsFromPoint'](viewPortX, viewPortY);\n            return elements === null ? [] : elements;\n        } else {\n            // Other browsers like Chrome, Firefox, Opera\n            return document.elementsFromPoint(viewPortX, viewPortY);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected dispatchEvent(target, eventName: string, eventArgs: IgxDragCustomEventDetails) {\n        // This way is IE11 compatible.\n        const dragLeaveEvent = document.createEvent('CustomEvent');\n        dragLeaveEvent.initCustomEvent(eventName, false, false, eventArgs);\n        target.dispatchEvent(dragLeaveEvent);\n        // Otherwise can be used `target.dispatchEvent(new CustomEvent(eventName, eventArgs));`\n    }\n\n    protected getTransformX(elem) {\n        let posX = 0;\n        if (elem.style.transform) {\n            const matrix = elem.style.transform;\n            const values = matrix ? matrix.match(/-?[\\d\\.]+/g) : undefined;\n            posX = values ? Number(values[ 1 ]) : 0;\n        }\n\n        return posX;\n    }\n\n    protected getTransformY(elem) {\n        let posY = 0;\n        if (elem.style.transform) {\n            const matrix = elem.style.transform;\n            const values = matrix ? matrix.match(/-?[\\d\\.]+/g) : undefined;\n            posY = values ? Number(values[ 2 ]) : 0;\n        }\n\n        return posY;\n    }\n\n    /** Method setting transformation to the base draggable element. */\n    protected setTransformXY(x: number, y: number) {\n        this.element.nativeElement.style.transform = 'translate3d(' + x + 'px, ' + y + 'px, 0px)';\n    }\n\n    protected getWindowScrollTop() {\n        return window.scrollY ? window.scrollY : (window.pageYOffset ? window.pageYOffset : 0);\n    }\n\n    protected getWindowScrollLeft() {\n        return window.scrollX ? window.scrollX : (window.pageXOffset ? window.pageXOffset : 0);\n    }\n\n    protected ghostHostOffsetLeft(ghostHost: any) {\n        const ghostPosition = document.defaultView.getComputedStyle(ghostHost).getPropertyValue('position');\n        if (ghostPosition === 'static' && ghostHost.offsetParent && ghostHost.offsetParent === document.body) {\n            return 0;\n        } else if (ghostPosition === 'static' && ghostHost.offsetParent) {\n            return ghostHost.offsetParent.getBoundingClientRect().left - this.getWindowScrollLeft();\n        }\n        return ghostHost.getBoundingClientRect().left - this.getWindowScrollLeft();\n    }\n\n    protected ghostHostOffsetTop(ghostHost: any) {\n        const ghostPosition = document.defaultView.getComputedStyle(ghostHost).getPropertyValue('position');\n        if (ghostPosition === 'static' && ghostHost.offsetParent && ghostHost.offsetParent === document.body) {\n            return 0;\n        } else if (ghostPosition === 'static' && ghostHost.offsetParent) {\n            return ghostHost.offsetParent.getBoundingClientRect().top - this.getWindowScrollTop();\n        }\n        return ghostHost.getBoundingClientRect().top - this.getWindowScrollTop();\n    }\n}\n\n@Directive({\n    exportAs: 'drop',\n    selector: '[igxDrop]'\n})\nexport class IgxDropDirective implements OnInit, OnDestroy {\n\n    /**\n     * - Save data inside the `igxDrop` directive. This can be set when instancing `igxDrop` on an element.\n     * ```html\n     * <div [igxDrop]=\"{ source: myElement }\"></div>\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Input('igxDrop')\n    private _data: any;\n    public get data(): any {\n        return this._data;\n    }\n    public set data(v: any) {\n        this._data = v;\n    }\n\n    /**\n     * An @Input property that provide a way for igxDrag and igxDrop to be linked through channels.\n     * It accepts single value or an array of values and evaluates then using strict equality.\n     * ```html\n     * <div igxDrag [dragChannel]=\"'odd'\">\n     *         <span>95</span>\n     * </div>\n     * <div igxDrop [dropChannel]=\"['odd', 'irrational']\">\n     *         <span>Numbers drop area!</span>\n     * </div>\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Input()\n    public dropChannel: number | string | number[] | string[];\n\n    /**\n     * An @Input property that specifies a drop strategy type that will be executed when an `IgxDrag` element is released inside\n     *  the current drop area. The provided strategies are:\n     *  - IgxDefaultDropStrategy - This is the default base strategy and it doesn't perform any actions.\n     *  - IgxAppendDropStrategy - Appends the dropped element to last position as a direct child to the `igxDrop`.\n     *  - IgxPrependDropStrategy - Prepends the dropped element to first position as a direct child to the `igxDrop`.\n     *  - IgxInsertDropStrategy - If the dropped element is released above a child element of the `igxDrop`, it will be inserted\n     *      at that position. Otherwise the dropped element will be appended if released outside any child of the `igxDrop`.\n     * ```html\n     * <div igxDrag>\n     *      <span>DragMe</span>\n     * </div>\n     * <div igxDrop [dropStrategy]=\"myDropStrategy\">\n     *         <span>Numbers drop area!</span>\n     * </div>\n     * ```\n     * ```typescript\n     * import { IgxAppendDropStrategy } from 'igniteui-angular';\n     *\n     * export class App {\n     *      public myDropStrategy = IgxAppendDropStrategy;\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Input()\n    public set dropStrategy(classRef: any) {\n        this._dropStrategy = new classRef(this._renderer);\n    }\n\n    public get dropStrategy() {\n        return this._dropStrategy;\n    }\n\n    /**\n     * Event triggered when dragged element enters the area of the element.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (enter)=\"dragEnter()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragEnter(){\n     *     alert(\"A draggable element has entered the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public enter = new EventEmitter<IDropBaseEventArgs>();\n\n    /**\n     * Event triggered when dragged element enters the area of the element.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (enter)=\"dragEnter()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragEnter(){\n     *     alert(\"A draggable element has entered the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public over = new EventEmitter<IDropBaseEventArgs>();\n\n    /**\n     * Event triggered when dragged element leaves the area of the element.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (leave)=\"dragLeave()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragLeave(){\n     *     alert(\"A draggable element has left the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public leave = new EventEmitter<IDropBaseEventArgs>();\n\n    /**\n     * Event triggered when dragged element is dropped in the area of the element.\n     * Since the `igxDrop` has default logic that appends the dropped element as a child, it can be canceled here.\n     * To cancel the default logic the `cancel` property of the event needs to be set to true.\n     * ```html\n     * <div class=\"cageArea\" igxDrop (dropped)=\"dragDrop()\" (igxDragEnter)=\"onDragCageEnter()\" (igxDragLeave)=\"onDragCageLeave()\">\n     * </div>\n     * ```\n     * ```typescript\n     * public dragDrop(){\n     *     alert(\"A draggable element has been dropped in the chip area!\");\n     * }\n     * ```\n     * @memberof IgxDropDirective\n     */\n    @Output()\n    public dropped = new EventEmitter<IDropDroppedEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.droppable')\n    public droppable = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.dragOver')\n    public dragover = false;\n\n    /**\n     * @hidden\n     */\n    protected _destroy = new Subject<boolean>();\n    protected _dropStrategy: IDropStrategy;\n\n    constructor(public element: ElementRef, private _renderer: Renderer2, private _zone: NgZone) {\n        this._dropStrategy = new IgxDefaultDropStrategy();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this._zone.runOutsideAngular(() => {\n            fromEvent(this.element.nativeElement, 'igxDragEnter').pipe(takeUntil(this._destroy))\n                .subscribe((res) => this.onDragEnter(res as CustomEvent<IgxDragCustomEventDetails>));\n\n            fromEvent(this.element.nativeElement, 'igxDragLeave').pipe(takeUntil(this._destroy)).subscribe((res) => this.onDragLeave(res));\n            fromEvent(this.element.nativeElement, 'igxDragOver').pipe(takeUntil(this._destroy)).subscribe((res) => this.onDragOver(res));\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy.next(true);\n        this._destroy.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public onDragOver(event) {\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const eventArgs: IDropBaseEventArgs = {\n            originalEvent: event.detail.originalEvent,\n            owner: this,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY\n        };\n\n        this.over.emit(eventArgs);\n     }\n\n    /**\n     * @hidden\n     */\n    public onDragEnter(event: CustomEvent<IgxDragCustomEventDetails>) {\n        if (!this.isDragLinked(event.detail.owner)) {\n            return;\n        }\n\n        this.dragover = true;\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const eventArgs: IDropBaseEventArgs = {\n            originalEvent: event.detail.originalEvent,\n            owner: this,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY\n        };\n        this._zone.run(() => {\n            this.enter.emit(eventArgs);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public onDragLeave(event) {\n        if (!this.isDragLinked(event.detail.owner)) {\n            return;\n        }\n\n        this.dragover = false;\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const eventArgs: IDropBaseEventArgs = {\n            originalEvent: event.detail.originalEvent,\n            owner: this,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY\n        };\n        this._zone.run(() => {\n            this.leave.emit(eventArgs);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('igxDrop', ['$event'])\n    public onDragDrop(event) {\n        if (!this.isDragLinked(event.detail.owner)) {\n            return;\n        }\n\n        const elementPosX = this.element.nativeElement.getBoundingClientRect().left + this.getWindowScrollLeft();\n        const elementPosY = this.element.nativeElement.getBoundingClientRect().top + this.getWindowScrollTop();\n        const offsetX = event.detail.pageX - elementPosX;\n        const offsetY = event.detail.pageY - elementPosY;\n        const args: IDropDroppedEventArgs = {\n            owner: this,\n            originalEvent: event.detail.originalEvent,\n            drag: event.detail.owner,\n            dragData: event.detail.owner.data,\n            startX: event.detail.startX,\n            startY: event.detail.startY,\n            pageX: event.detail.pageX,\n            pageY: event.detail.pageY,\n            offsetX: offsetX,\n            offsetY: offsetY,\n            cancel: false\n        };\n        this._zone.run(() => {\n            this.dropped.emit(args);\n        });\n\n        if (this._dropStrategy && !args.cancel) {\n            const elementsAtPoint = event.detail.owner.getElementsAtPoint(event.detail.pageX, event.detail.pageY);\n            const insertIndex = this.getInsertIndexAt(event.detail.owner, elementsAtPoint);\n            this._dropStrategy.dropAction(event.detail.owner, this, insertIndex);\n        }\n    }\n\n    protected getWindowScrollTop() {\n        return window.scrollY ? window.scrollY : (window.pageYOffset ? window.pageYOffset : 0);\n    }\n\n    protected getWindowScrollLeft() {\n        return window.scrollX ? window.scrollX : (window.pageXOffset ? window.pageXOffset : 0);\n    }\n\n    protected isDragLinked(drag: IgxDragDirective): boolean {\n        const dragLinkArray = drag.dragChannel instanceof Array;\n        const dropLinkArray = this.dropChannel instanceof Array;\n\n        if (!dragLinkArray && !dropLinkArray) {\n            return this.dropChannel === drag.dragChannel;\n        } else if (!dragLinkArray && dropLinkArray) {\n            const dropLinks = <Array<any>>this.dropChannel;\n            for (let i = 0; i < dropLinks.length; i ++) {\n                if (dropLinks[i] === drag.dragChannel) {\n                    return true;\n                }\n            }\n        } else if (dragLinkArray && !dropLinkArray) {\n            const dragLinks = <Array<any>>drag.dragChannel;\n            for (let i = 0; i < dragLinks.length; i ++) {\n                if (dragLinks[i] === this.dropChannel) {\n                    return true;\n                }\n            }\n        } else {\n            const dragLinks = <Array<any>>drag.dragChannel;\n            const dropLinks = <Array<any>>this.dropChannel;\n            for (let i = 0; i < dragLinks.length; i ++) {\n                for (let j = 0; j < dropLinks.length; j ++) {\n                    if (dragLinks[i] === dropLinks[j]) {\n                        return true;\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n\n    protected getInsertIndexAt(draggedDir: IgxDragDirective, elementsAtPoint: any[]): number {\n        let insertIndex = -1;\n        const dropChildren = Array.prototype.slice.call(this.element.nativeElement.children);\n        if (!dropChildren.length) {\n            return insertIndex;\n        }\n\n        let i = 0;\n        let childUnder = null;\n        while (!childUnder && i < elementsAtPoint.length) {\n            if (elementsAtPoint[i].parentElement === this.element.nativeElement) {\n                childUnder = elementsAtPoint[i];\n            }\n            i++;\n        }\n\n        const draggedElemIndex = dropChildren.indexOf(draggedDir.element.nativeElement);\n        insertIndex = dropChildren.indexOf(childUnder);\n        if (draggedElemIndex !== -1 && draggedElemIndex < insertIndex) {\n            insertIndex++;\n        }\n\n        return insertIndex;\n    }\n}\n\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxDragDirective, IgxDropDirective, IgxDragHandleDirective, IgxDragIgnoreDirective],\n    exports: [IgxDragDirective, IgxDropDirective, IgxDragHandleDirective, IgxDragIgnoreDirective]\n})\nexport class IgxDragDropModule { }\n","import { Renderer2 } from '@angular/core';\nimport { IgxDragDirective, IgxDropDirective } from './drag-drop.directive';\n\n\nexport interface IDropStrategy {\n    dropAction: (drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) => void;\n}\n\n// @dynamic\nexport class IgxDefaultDropStrategy implements IDropStrategy {\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) { }\n}\n\n// @dynamic\nexport class IgxAppendDropStrategy implements IDropStrategy {\n\n    constructor(private _renderer: Renderer2) { }\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) {\n        const dragElement = drag.element.nativeElement;\n        const dropAreaElement = drop.element.nativeElement;\n        this._renderer.removeChild(dragElement.parentNode, dragElement);\n        this._renderer.appendChild(dropAreaElement, dragElement);\n    }\n}\n\n// @dynamic\nexport class IgxPrependDropStrategy implements IDropStrategy {\n\n    constructor(private _renderer: Renderer2) { }\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) {\n        const dragElement = drag.element.nativeElement;\n        const dropAreaElement = drop.element.nativeElement;\n        this._renderer.removeChild(dragElement.parentNode, dragElement);\n        if (dropAreaElement.children.length) {\n            this._renderer.insertBefore(dropAreaElement, dragElement, dropAreaElement.children[0]);\n        } else {\n            this._renderer.appendChild(dropAreaElement, dragElement);\n        }\n    }\n}\n\n// @dynamic\nexport class IgxInsertDropStrategy implements IDropStrategy {\n\n    constructor(private _renderer: Renderer2) { }\n\n    dropAction(drag: IgxDragDirective, drop: IgxDropDirective, atIndex: number) {\n        if (drag.element.nativeElement.parentElement === drop.element.nativeElement && atIndex === -1) {\n            return;\n        }\n\n        const dragElement = drag.element.nativeElement;\n        const dropAreaElement = drop.element.nativeElement;\n        this._renderer.removeChild(dragElement.parentNode, dragElement);\n        if (atIndex !== -1 && dropAreaElement.children.length > atIndex) {\n            this._renderer.insertBefore(dropAreaElement, dragElement, dropAreaElement.children[atIndex]);\n        } else {\n            this._renderer.appendChild(dropAreaElement, dragElement);\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgModule,\n    OnChanges,\n    Output,\n    Pipe,\n    PipeTransform,\n    Renderer2,\n    SimpleChanges\n} from '@angular/core';\n\nexport class IgxFilterOptions {\n    // Input text value that will be used as a filtering pattern (matching condition is based on it)\n    public inputValue = '';\n\n    // Item property, which value should be used for filtering\n    public key: string;\n\n    // Represent items of the list. It should be used to handle decalaratevely defined widgets\n    public items: any[];\n\n    // Function - get value to be tested from the item\n    // item - single item of the list to be filtered\n    // key - property name of item, which value should be tested\n    // Default behavior - returns \"key\"- named property value of item if key si provided,\n    // otherwise textContent of the item's html element\n    public get_value(item: any, key: string): string {\n        let result = '';\n\n        if (key && item[key]) {\n            result = item[key].toString();\n        } else if (item.element) {\n            if (item.element.nativeElement) {\n                result = item.element.nativeElement.textContent.trim();\n            // Check if element doesn't return the DOM element directly\n            } else if (item.element.textContent) {\n                result = item.element.textContent.trim();\n            }\n        }\n\n        return result;\n    }\n\n    // Function - formats the original text before matching process\n    // Default behavior - returns text to lower case\n    public formatter(valueToTest: string): string {\n        return valueToTest.toLowerCase();\n    }\n\n    // Function - determines whether the item met the condition\n    // valueToTest - text value that should be tested\n    // inputValue - text value from input that condition is based on\n    // Default behavior - \"contains\"\n    public matchFn(valueToTest: string, inputValue: string): boolean {\n        return valueToTest.indexOf(inputValue && inputValue.toLowerCase() || '') > -1;\n    }\n\n    // Function - executed after matching test for every matched item\n    // Default behavior - shows the item\n    public metConditionFn(item: any) {\n        if (item.hasOwnProperty('hidden')) {\n            item.hidden = false;\n        }\n    }\n\n    // Function - executed for every NOT matched item after matching test\n    // Default behavior - hides the item\n    public overdueConditionFn(item: any) {\n        if (item.hasOwnProperty('hidden')) {\n            item.hidden = true;\n        }\n    }\n}\n\n\n@Directive({\n    selector: '[igxFilter]'\n})\nexport class IgxFilterDirective implements OnChanges {\n    @Output() public filtering = new EventEmitter(false); // synchronous event emitter\n    @Output() public filtered = new EventEmitter();\n\n    @Input('igxFilter') public filterOptions: IgxFilterOptions;\n\n    constructor(private element: ElementRef, renderer: Renderer2) {\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        // Detect only changes of input value\n        if (changes.filterOptions &&\n            changes.filterOptions.currentValue &&\n            changes.filterOptions.currentValue.inputValue !== undefined &&\n            changes.filterOptions.previousValue &&\n            changes.filterOptions.currentValue.inputValue !== changes.filterOptions.previousValue.inputValue) {\n            this.filter();\n        }\n    }\n\n    private filter() {\n        if (!this.filterOptions.items) {\n            return;\n        }\n\n        const args = { cancel: false, items: this.filterOptions.items };\n        this.filtering.emit(args);\n\n        if (args.cancel) {\n            return;\n        }\n\n        const pipe = new IgxFilterPipe();\n\n        const filtered = pipe.transform(this.filterOptions.items, this.filterOptions);\n        this.filtered.emit({ filteredItems: filtered });\n    }\n}\n\n@Pipe({\n    name: 'igxFilter',\n    pure: false\n})\n\nexport class IgxFilterPipe implements PipeTransform {\n    public transform(items: any[],\n                     // options - initial settings of filter functionality\n                     options: IgxFilterOptions) {\n\n        let result = [];\n\n        if (!items || !items.length || !options) {\n            return;\n        }\n\n        if (options.items) {\n            items = options.items;\n        }\n\n        result = items.filter((item: any) => {\n            const match = options.matchFn(options.formatter(options.get_value(item, options.key)), options.inputValue);\n\n            if (match) {\n                if (options.metConditionFn) {\n                    options.metConditionFn(item);\n                }\n            } else {\n                if (options.overdueConditionFn) {\n                    options.overdueConditionFn(item);\n                }\n            }\n\n            return match;\n        });\n\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxFilterDirective, IgxFilterPipe],\n    exports: [IgxFilterDirective, IgxFilterPipe],\n    imports: [CommonModule]\n})\nexport class IgxFilterModule {\n}\n","import { Directive, ElementRef, Input, NgModule, Optional, Inject, Self } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { EditorProvider } from '../../core/edit-provider';\n\n@Directive({\n    exportAs: 'igxFocus',\n    selector: '[igxFocus]'\n})\nexport class IgxFocusDirective {\n\n    private focusState = true;\n    /**\n     * Returns the state of the igxFocus.\n     * ```typescript\n     * @ViewChild('focusContainer', {read: IgxFocusDirective})\n     * public igxFocus: IgxFocusDirective;\n     * let isFocusOn = this.igxFocus.focused;\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    @Input('igxFocus')\n    get focused(): boolean {\n        return this.focusState;\n    }\n    /**\n     * Sets the state of the igxFocus.\n     * ```html\n     * <igx-input-group >\n     *  <input #focusContainer igxInput [igxFocus]=\"true\"/>\n     * </igx-input-group>\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    set focused(val: boolean) {\n        this.focusState = val;\n        this.trigger();\n    }\n    /**\n     * Gets the native element of the igxFocus.\n     * ```typescript\n     * @ViewChild('focusContainer', {read: IgxFocusDirective})\n     * public igxFocus: IgxFocusDirective;\n     * let igxFocusNativeElement = this.igxFocus.nativeElement;\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    get nativeElement() {\n        if (this.comp && this.comp[0] && this.comp[0].getEditElement) {\n            return (this.comp[0] as EditorProvider).getEditElement();\n        }\n        return this.element.nativeElement;\n    }\n\n    constructor(private element: ElementRef, @Inject(NG_VALUE_ACCESSOR) @Self() @Optional() private comp?: any[]) { }\n    /**\n     * Triggers the igxFocus state.\n     * ```typescript\n     * @ViewChild('focusContainer', {read: IgxFocusDirective})\n     * public igxFocus: IgxFocusDirective;\n     * this.igxFocus.trigger();\n     * ```\n     * @memberof IgxFocusDirective\n     */\n    trigger() {\n        if (this.focusState) {\n            requestAnimationFrame(() => this.nativeElement.focus({ preventScroll: true}));\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxFocusDirective],\n    exports: [IgxFocusDirective]\n})\nexport class IgxFocusModule { }\n","import { Directive, HostBinding, Input, NgModule } from '@angular/core';\n\n@Directive({\n    selector: '[igxLayout]'\n})\nexport class IgxLayoutDirective {\n    /**\n     * Sets the default flow direction of the container's children.\n     *\n     * Defaults to `rows`.\n     *\n     * ```html\n     *  <div\n     *   igxLayout\n     *   igxLayoutDir=\"row\">\n     *    <div igxFlex>1</div>\n     *    <div igxFlex>2</div>\n     *    <div igxFlex>3</div>\n     *  </div>\n     * ```\n     */\n    @Input('igxLayoutDir') public dir = 'row';\n\n    /**\n     * Defines the direction flex children are placed in the flex container.\n     *\n     * When set to `true`, the `rows` direction goes right to left and `columns` goes bottom to top.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutReverse=\"true\">\n     *    <div igxFlex>1</div>\n     *    <div igxFlex>2</div>\n     *    <div igxFlex>3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutReverse') public reverse = false;\n\n    /**\n     * By default the immediate children will all try to fit onto one line.\n     *\n     * The default value `nowrap` sets this behavior.\n     *\n     * Other accepted values are `wrap` and `wrap-reverse`.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutDir=\"row\"\n     *   igxLayoutWrap=\"wrap\">\n     *    <div igxFlex igxFlexGrow=\"0\">1</div>\n     *    <div igxFlex igxFlexGrow=\"0\">2</div>\n     *    <div igxFlex igxFlexGrow=\"0\">3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutWrap') public wrap = 'nowrap';\n\n    /**\n     * Defines the alignment along the main axis.\n     *\n     * Defaults to `flex-start` which packs the children toward the start line.\n     *\n     * Other possible values are `flex-end`, `center`, `space-between`, `space-around`.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutDir=\"column\"\n     *   igxLayoutJustify=\"space-between\">\n     *    <div>1</div>\n     *    <div>2</div>\n     *    <div>3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutJustify') public justify = 'flex-start';\n\n    /**\n     * Defines the default behavior for how children are laid out along the corss axis of the current line.\n     *\n     * Defaults to `flex-start`.\n     *\n     * Other possible values are `flex-end`, `center`, `baseline`, and `stretch`.\n     *\n     * ```html\n     * <div\n     *   igxLayout\n     *   igxLayoutDir=\"column\"\n     *   igxLayoutItemAlign=\"start\">\n     *    <div igxFlex igxFlexGrow=\"0\">1</div>\n     *    <div igxFlex igxFlexGrow=\"0\">2</div>\n     *    <div igxFlex igxFlexGrow=\"0\">3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxLayoutItemAlign') public itemAlign = 'stretch';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.display') public display = 'flex';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flex-wrap') get flexwrap() { return this.wrap; }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.justify-content') get justifycontent() { return this.justify; }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.align-items') get align() { return this.itemAlign; }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flex-direction')\n    get direction() {\n        if (this.reverse) {\n            return (this.dir === 'row') ? 'row-reverse' : 'column-reverse';\n        }\n        return (this.dir === 'row') ? 'row' : 'column';\n    }\n}\n\n@Directive({\n    selector: '[igxFlex]'\n})\nexport class IgxFlexDirective {\n\n    /**\n     * Applies the `grow` attribute to an element that uses the directive.\n     *\n     * Default value is `1`.\n     *\n     * ```html\n     * <div>\n     *    <div igxFlex igxFlexGrow=\"0\">Content1</div>\n     *    <div igxFlex igxFlexGrow=\"1\">Content2</div>\n     *    <div igxFlex igxFlexGrow=\"0\">Content3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxFlexGrow') public grow = 1;\n\n    /**\n     * Applies the `shrink` attribute to an element that uses the directive.\n     *\n     * Default value is `1`.\n     *\n     * ```html\n     * <div>\n     *    <div igxFlex igxFlexShrink=\"1\">Content1</div>\n     *    <div igxFlex igxFlexShrink=\"0\">Content2</div>\n     *    <div igxFlex igxFlexShrink=\"1\">Content3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxFlexShrink') public shrink = 1;\n\n    /**\n     * Applies the directive to an element.\n     *\n     * Possible values include `igxFlexGrow`, `igxFlexShrink`, `igxFlexOrder`, `igxFlexBasis`.\n     *\n     * ```html\n     * <div igxFlex>Content</div>\n     * ```\n     */\n    @Input('igxFlex') public flex = '';\n\n    /**\n     * Applies the `order` attribute to an element that uses the directive.\n     *\n     * Default value is `0`.\n     *\n     * ```html\n     * <div>\n     *    <div igxFlex igxFlexOrder=\"1\">Content1</div>\n     *    <div igxFlex igxFlexOrder=\"0\">Content2</div>\n     *    <div igxFlex igxFlexOrder=\"2\">Content3</div>\n     * </div>\n     * ```\n     */\n    @Input('igxFlexOrder') public order = 0;\n\n    /**\n     * Applies the `flex-basis` attribute to an element that uses the directive.\n     *\n     * Default value is `auto`.\n     *\n     * Other possible values include `content`, `max-content`, `min-content`, `fit-content`.\n     *\n     * ```html\n     * <div igxFlex igxFlexBasis=\"fit-content\">Content</div>\n     * ```\n     */\n    @Input('igxFlexBasis') public basis = 'auto';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flex')\n    get style() {\n        if (this.flex) {\n            return `${this.flex}`;\n        }\n        return `${this.grow} ${this.shrink} ${this.basis}`;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.order')\n    get itemorder() {\n        return this.order || 0;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxFlexDirective, IgxLayoutDirective],\n    exports: [IgxFlexDirective, IgxLayoutDirective]\n})\nexport class IgxLayoutModule { }\n","import { Injectable } from '@angular/core';\n\n/** @hidden */\nexport const MASK_FLAGS = ['C', '&', 'a', 'A', '?', 'L', '9', '0', '#'];\n\n/** @hidden */\nexport interface MaskOptions {\n    format: string;\n    promptChar: string;\n}\n\n/** @hidden */\nexport interface Replaced {\n    value: string;\n    end: number;\n}\n\n/** @hidden */\n@Injectable({\n    providedIn: 'root'\n})\nexport class MaskParsingService {\n    public applyMask(inputVal: string, maskOptions: MaskOptions): string {\n        let outputVal = '';\n        let value = '';\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalKeys: number[] = Array.from(literals.keys());\n        const nonLiteralIndices: number[] = this.getNonLiteralIndices(mask, literalKeys);\n        const literalValues: string[] = Array.from(literals.values());\n\n        if (inputVal != null) {\n            value = inputVal.toString();\n        }\n\n        for (const maskSym of mask) {\n            outputVal += maskOptions.promptChar;\n        }\n\n        literals.forEach((val: string, key: number) => {\n            outputVal = this.replaceCharAt(outputVal, key, val);\n        });\n\n        if (!value) {\n            return outputVal;\n        }\n\n        const nonLiteralValues: string[] = this.getNonLiteralValues(value, literalValues);\n\n        for (let i = 0; i < nonLiteralValues.length; i++) {\n            const char = nonLiteralValues[i];\n            const isCharValid = this.validateCharOnPosition(char, nonLiteralIndices[i], mask);\n\n            if (!isCharValid && char !== maskOptions.promptChar) {\n                nonLiteralValues[i] = maskOptions.promptChar;\n            }\n        }\n\n        if (nonLiteralValues.length > nonLiteralIndices.length) {\n            nonLiteralValues.splice(nonLiteralIndices.length);\n        }\n\n        let pos = 0;\n        for (const nonLiteralValue of nonLiteralValues) {\n            const char = nonLiteralValue;\n            outputVal = this.replaceCharAt(outputVal, nonLiteralIndices[pos++], char);\n        }\n\n        return outputVal;\n    }\n\n    public parseValueFromMask(maskedValue: string, maskOptions: MaskOptions): string {\n        let outputVal = '';\n        const mask: string = maskOptions.format;\n        const literals: Map<number, string> = this.getMaskLiterals(mask);\n        const literalValues: string[] = Array.from(literals.values());\n\n        for (const val of maskedValue) {\n            if (literalValues.indexOf(val) === -1) {\n                if (val !== maskOptions.promptChar) {\n                    outputVal += val;\n                }\n            }\n        }\n\n        return outputVal;\n    }\n\n    public replaceInMask(maskedValue: string, value: string, maskOptions: MaskOptions, start: number, end: number): Replaced {\n        const literalsPositions: number[] = Array.from(this.getMaskLiterals(maskOptions.format).keys());\n        const chars = Array.from(value);\n        let cursor = start;\n        end = Math.min(end, maskedValue.length);\n\n        for (let i = start; i < end || (chars.length && i < maskedValue.length); i++) {\n            if (literalsPositions.indexOf(i) !== -1) {\n                if (chars[0] === maskedValue[i]) {\n                    cursor = i + 1;\n                    chars.shift();\n                }\n                continue;\n            }\n            if (chars[0]\n                && !this.validateCharOnPosition(chars[0], i, maskOptions.format)\n                && chars[0] !== maskOptions.promptChar) {\n                break;\n            }\n\n            let char = maskOptions.promptChar;\n            if (chars.length) {\n                cursor = i + 1;\n                char = chars.shift();\n            }\n            maskedValue = this.replaceCharAt(maskedValue, i, char);\n        }\n\n        return { value: maskedValue, end: cursor };\n    }\n\n    public replaceCharAt(strValue: string, index: number, char: string): string {\n        if (strValue !== undefined) {\n            return strValue.substring(0, index) + char + strValue.substring(index + 1);\n        }\n    }\n\n    /** Validates only non literal positions. */\n    private validateCharOnPosition(inputChar: string, position: number, mask: string): boolean {\n        let regex: RegExp;\n        let isValid: boolean;\n        const letterOrDigitRegEx = '[\\\\d\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z]';\n        const letterDigitOrSpaceRegEx = '[\\\\d\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z\\\\u0020]';\n        const letterRegEx = '[\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z]';\n        const letterSpaceRegEx = '[\\\\u00C0-\\\\u1FFF\\\\u2C00-\\\\uD7FFa-zA-Z\\\\u0020]';\n        const digitRegEx = '[\\\\d]';\n        const digitSpaceRegEx = '[\\\\d\\\\u0020]';\n        const digitSpecialRegEx = '[\\\\d-\\\\+]';\n\n        switch (mask.charAt(position)) {\n            case 'C':\n                isValid = inputChar !== '';\n                break;\n            case '&':\n                regex = new RegExp('[\\\\u0020]');\n                isValid = !regex.test(inputChar);\n                break;\n            case 'a':\n                regex = new RegExp(letterDigitOrSpaceRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case 'A':\n                regex = new RegExp(letterOrDigitRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '?':\n                regex = new RegExp(letterSpaceRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case 'L':\n                regex = new RegExp(letterRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '0':\n                regex = new RegExp(digitRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '9':\n                regex = new RegExp(digitSpaceRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            case '#':\n                regex = new RegExp(digitSpecialRegEx);\n                isValid = regex.test(inputChar);\n                break;\n            default: {\n                isValid = null;\n            }\n        }\n\n        return isValid;\n    }\n    private getMaskLiterals(mask: string): Map<number, string> {\n        const literals = new Map<number, string>();\n\n        for (let i = 0; i < mask.length; i++) {\n            const char = mask.charAt(i);\n            if (MASK_FLAGS.indexOf(char) === -1) {\n                literals.set(i, char);\n            }\n        }\n\n        return literals;\n    }\n    private getNonLiteralIndices(mask: string, literalKeys: number[]): number[] {\n        const nonLiteralsIndices: number[] = new Array();\n\n        for (let i = 0; i < mask.length; i++) {\n            if (literalKeys.indexOf(i) === -1) {\n                nonLiteralsIndices.push(i);\n            }\n        }\n\n        return nonLiteralsIndices;\n    }\n    private getNonLiteralValues(value: string, literalValues: string[]): string[] {\n        const nonLiteralValues: string[] = new Array();\n\n        for (const val of value) {\n            if (literalValues.indexOf(val) === -1) {\n                nonLiteralValues.push(val);\n            }\n        }\n\n        return nonLiteralValues;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Directive, ElementRef, EventEmitter, HostListener,\n    Output, PipeTransform, Renderer2,\n    Input, NgModule, OnInit, AfterViewChecked,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { DeprecateProperty } from '../../core/deprecateDecorators';\nimport { MaskParsingService, MaskOptions } from './mask-parsing.service';\nimport { isIE, IBaseEventArgs, KEYCODES } from '../../core/utils';\n\nconst noop = () => { };\n\n@Directive({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxMaskDirective, multi: true }],\n    selector: '[igxMask]',\n    exportAs: 'igxMask'\n})\nexport class IgxMaskDirective implements OnInit, AfterViewChecked, ControlValueAccessor {\n    /**\n     * Sets the input mask.\n     * ```html\n     * <input [igxMask] = \"'00/00/0000'\">\n     * ```\n     */\n    @Input('igxMask')\n    public mask: string;\n\n    /**\n     * Sets the character representing a fillable spot in the input mask.\n     * Default value is \"'_'\".\n     * ```html\n     * <input [promptChar] = \"'/'\">\n     * ```\n     */\n    @Input()\n    public promptChar = '_';\n\n    /**\n     * Specifies if the bound value includes the formatting symbols.\n     * ```html\n     * <input [includeLiterals] = \"true\">\n     * ```\n     */\n    @Input()\n    public includeLiterals: boolean;\n\n    /**\n     * Specifies a placeholder.\n     * ```html\n     * <input placeholder = \"enter text...\">\n     * ```\n     */\n    @DeprecateProperty('\"placeholder\" is deprecated, use native placeholder instead.')\n    public set placeholder(val: string) {\n        this.renderer.setAttribute(this.nativeElement, 'placeholder', val);\n    }\n\n    public get placeholder(): string {\n        return this.nativeElement.placeholder;\n    }\n\n    /**\n     * Specifies a pipe to be used on blur.\n     * ```html\n     * <input [displayValuePipe] = \"displayFormatPipe\">\n     * ```\n     */\n    @Input()\n    public displayValuePipe: PipeTransform;\n\n    /**\n     * Specifies a pipe to be used on focus.\n     * ```html\n     * <input [focusedValuePipe] = \"inputFormatPipe\">\n     * ```\n     */\n    @Input()\n    public focusedValuePipe: PipeTransform;\n\n    /**\n     * Emits an event each time the value changes.\n     * Provides `rawValue: string` and `formattedValue: string` as event arguments.\n     * ```html\n     * <input (onValueChange) = \"onValueChange(rawValue: string, formattedValue: string)\">\n     * ```\n     */\n    @Output()\n    public onValueChange = new EventEmitter<IMaskEventArgs>();\n\n    /** @hidden */\n    public get nativeElement(): HTMLInputElement {\n        return this.elementRef.nativeElement;\n    }\n\n    /** @hidden @internal; */\n    protected get inputValue(): string {\n        return this.nativeElement.value;\n    }\n\n    /** @hidden @internal */\n    protected set inputValue(val) {\n        this.nativeElement.value = val;\n    }\n\n    /** @hidden */\n    protected get maskOptions(): MaskOptions {\n        const format = this.mask || 'CCCCCCCCCC';\n        const promptChar = this.promptChar && this.promptChar.substring(0, 1);\n        return { format, promptChar };\n    }\n\n    /** @hidden */\n    protected get selectionStart(): number {\n        // Edge(classic) and FF don't select text on drop\n        return this.nativeElement.selectionStart === this.nativeElement.selectionEnd && this._hasDropAction ?\n            this.nativeElement.selectionEnd - this._droppedData.length :\n            this.nativeElement.selectionStart;\n    }\n\n    /** @hidden */\n    protected get selectionEnd(): number {\n        return this.nativeElement.selectionEnd;\n    }\n\n    /** @hidden */\n    protected get start(): number {\n        return this._start;\n    }\n\n    /** @hidden */\n    protected get end(): number {\n        return this._end;\n    }\n\n    private _end = 0;\n    private _start = 0;\n    private _key: number;\n    private _oldText = '';\n    private _dataValue = '';\n    private _focused = false;\n    private _droppedData: string;\n    private _hasDropAction: boolean;\n    private _stopPropagation: boolean;\n\n    private _onTouchedCallback: () => void = noop;\n    private _onChangeCallback: (_: any) => void = noop;\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected maskParser: MaskParsingService,\n        protected renderer: Renderer2) { }\n\n    /** @hidden */\n    public ngOnInit(): void {\n        if (!this.nativeElement.placeholder) {\n            this.renderer.setAttribute(this.nativeElement, 'placeholder', this.maskOptions.format);\n        }\n    }\n\n    /**\n     * TODO: Remove after date/time picker integration refactor\n     * @hidden\n     */\n    public ngAfterViewChecked(): void {\n        this._oldText = this.inputValue;\n    }\n\n    /** @hidden */\n    @HostListener('keydown', ['$event'])\n    public onKeyDown(event): void {\n        const key = event.keyCode || event.charCode;\n        if (!key) { return; }\n\n        if (isIE() && this._stopPropagation) {\n            this._stopPropagation = false;\n        }\n\n        if ((key === KEYCODES.CTRL && key === KEYCODES.Z) || (key === KEYCODES.CTRL && key === KEYCODES.Y)) {\n            event.preventDefault();\n        }\n\n        this._key = key;\n        this._start = this.selectionStart;\n        this._end = this.selectionEnd;\n    }\n\n    /** @hidden */\n    @HostListener('input')\n    public onInputChanged(): void {\n        /**\n         * '!this._focused' is a fix for #8165\n         * On page load IE triggers input events before focus events and\n         * it does so for every single input on the page.\n         * The mask needs to be prevented from doing anything while this is happening because\n         * the end user will be unable to blur the input.\n         * https://stackoverflow.com/questions/21406138/input-event-triggered-on-internet-explorer-when-placeholder-changed\n         */\n        if (isIE() && (this._stopPropagation || !this._focused)) {\n            this._stopPropagation = false;\n            return;\n        }\n\n        if (this._hasDropAction) {\n            this._start = this.selectionStart;\n        }\n        if (this.inputValue.length < this._oldText.length && this._key === KEYCODES.INPUT_METHOD) {\n            // software keyboard input delete\n            this._key = KEYCODES.BACKSPACE;\n        }\n\n        let valueToParse = '';\n        switch (this._key) {\n            case KEYCODES.DELETE:\n                this._end = this._start === this._end ? ++this._end : this._end;\n                break;\n            case KEYCODES.BACKSPACE:\n                this._start = this.selectionStart;\n                break;\n            default:\n                valueToParse = this.inputValue.substring(this._start, this.selectionEnd);\n                break;\n        }\n\n        const replacedData = this.maskParser.replaceInMask(this._oldText, valueToParse, this.maskOptions, this._start, this._end);\n        this.inputValue = replacedData.value;\n        if (this._key === KEYCODES.BACKSPACE) { replacedData.end = this._start; }\n        this.setSelectionRange(replacedData.end);\n\n        const rawVal = this.maskParser.parseValueFromMask(this.inputValue, this.maskOptions);\n        this._dataValue = this.includeLiterals ? this.inputValue : rawVal;\n        this._onChangeCallback(this._dataValue);\n\n        this.onValueChange.emit({ rawValue: rawVal, formattedValue: this.inputValue });\n\n        this.afterInput();\n    }\n\n    /** @hidden */\n    @HostListener('paste')\n    public onPaste(): void {\n        this._oldText = this.inputValue;\n        this._start = this.selectionStart;\n    }\n\n    /** @hidden */\n    @HostListener('focus')\n    public onFocus(): void {\n        this._focused = true;\n        this.showMask(this._dataValue);\n    }\n\n    /** @hidden */\n    @HostListener('blur', ['$event.target.value'])\n    public onBlur(value: string): void {\n        this._focused = false;\n        this.showDisplayValue(value);\n        this._onTouchedCallback();\n    }\n\n    /** @hidden */\n    @HostListener('dragenter')\n    public onDragEnter(): void {\n        if (!this._focused) {\n            this.showMask(this._dataValue);\n        }\n    }\n\n    /** @hidden */\n    @HostListener('dragleave')\n    public onDragLeave(): void {\n        if (!this._focused) {\n            this.showDisplayValue(this.inputValue);\n        }\n    }\n\n    /** @hidden */\n    @HostListener('drop', ['$event'])\n    public onDrop(event: DragEvent): void {\n        this._hasDropAction = true;\n        this._droppedData = event.dataTransfer.getData('text');\n    }\n\n    /** @hidden */\n    protected showMask(value: string) {\n        if (this.focusedValuePipe) {\n            if (isIE()) {\n                this._stopPropagation = true;\n            }\n            // TODO(D.P.): focusedValuePipe should be deprecated or force-checked to match mask format\n            this.inputValue = this.focusedValuePipe.transform(value);\n        } else {\n            this.inputValue = this.maskParser.applyMask(this.inputValue, this.maskOptions);\n        }\n\n        this._oldText = this.inputValue;\n    }\n\n    /** @hidden */\n    protected setSelectionRange(start: number, end: number = start): void {\n        this.nativeElement.setSelectionRange(start, end);\n    }\n\n    /** @hidden */\n    protected afterInput() {\n        this._oldText = this.inputValue;\n        this._hasDropAction = false;\n        this._start = 0;\n        this._end = 0;\n        this._key = null;\n    }\n\n    private showDisplayValue(value: string) {\n        if (this.displayValuePipe) {\n            this.inputValue = this.displayValuePipe.transform(value);\n        } else if (value === this.maskParser.applyMask(null, this.maskOptions)) {\n            this.inputValue = '';\n        }\n    }\n\n    /** @hidden */\n    public writeValue(value: string): void {\n        if (this.promptChar && this.promptChar.length > 1) {\n            this.maskOptions.promptChar = this.promptChar.substring(0, 1);\n        }\n\n        this.inputValue = value ? this.maskParser.applyMask(value, this.maskOptions) : '';\n        if (this.displayValuePipe) {\n            this.inputValue = this.displayValuePipe.transform(this.inputValue);\n        }\n\n        this._dataValue = this.includeLiterals ? this.inputValue : value;\n\n        this.onValueChange.emit({ rawValue: value, formattedValue: this.inputValue });\n    }\n\n    /** @hidden */\n    public registerOnChange(fn: (_: any) => void): void { this._onChangeCallback = fn; }\n\n    /** @hidden */\n    public registerOnTouched(fn: () => void): void { this._onTouchedCallback = fn; }\n}\n\n/**\n * The IgxMaskModule provides the {@link IgxMaskDirective} inside your application.\n */\nexport interface IMaskEventArgs extends IBaseEventArgs {\n    rawValue: string;\n    formattedValue: string;\n}\n\n/** @hidden */\n@NgModule({\n    declarations: [IgxMaskDirective],\n    exports: [IgxMaskDirective],\n    imports: [CommonModule]\n})\nexport class IgxMaskModule { }\n","import {\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { isIE, IBaseEventArgs, mkenum } from '../core/utils';\nimport { EditorProvider } from '../core/edit-provider';\n\nexport interface IChangeRadioEventArgs extends IBaseEventArgs {\n    value: any;\n    radio: IgxRadioComponent;\n}\n\n\nexport const RadioLabelPosition = mkenum({\n    BEFORE: 'before',\n    AFTER: 'after'\n});\nexport type RadioLabelPosition = (typeof RadioLabelPosition)[keyof typeof RadioLabelPosition];\n\nlet nextId = 0;\nconst noop = () => { };\n/**\n * **Ignite UI for Angular Radio Button** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/radio_button.html)\n *\n * The Ignite UI Radio Button allows the user to select a single option from an available set of options that are listed side by side.\n *\n * Example:\n * ```html\n * <igx-radio>\n *   Simple radio button\n * </igx-radio>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxRadioComponent, multi: true }],\n    selector: 'igx-radio',\n    templateUrl: 'radio.component.html'\n})\n\nexport class IgxRadioComponent implements ControlValueAccessor, EditorProvider {\n    /**\n     * Returns reference to native radio element.\n     * ```typescript\n     * let radioElement =  this.radio.nativeRadio;\n     * ```\n     * @memberof IgxSwitchComponent\n     */\n    @ViewChild('radio', { static: true }) public nativeRadio: ElementRef;\n    /**\n     * Returns reference to native label element.\n     * ```typescript\n     * let labelElement =  this.radio.nativeLabel;\n     * ```\n     * @memberof IgxSwitchComponent\n     */\n    @ViewChild('nativeLabel', { static: true }) public nativeLabel;\n    /**\n     * Returns reference to the label placeholder element.\n     * ```typescript\n     * let labelPlaceholder =  this.radio.placeholderLabel;\n     * ```\n     * @memberof IgxSwitchComponent\n     */\n    @ViewChild('placeholderLabel', { static: true }) public placeholderLabel;\n\n    /**\n     * Sets/gets the `id` of the radio component.\n     * If not set, the `id` of the first radio component will be `\"igx-radio-0\"`.\n     * ```html\n     * <igx-radio id = \"my-first-radio\"></igx-radio>\n     * ```\n     * ```typescript\n     * let radioId =  this.radio.id;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-radio-${nextId++}`;\n    /**\n     * Sets/gets the id of the `label` element in the radio component.\n     * If not set, the id of the `label` in the first radio component will be `\"igx-radio-0-label\"`.\n     * ```html\n     * <igx-radio labelId = \"Label1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let labelId =  this.radio.labelId;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public labelId = `${this.id}-label`;\n    /**\n     * Sets/gets the position of the `label` in the radio component.\n     * If not set, `labelPosition` will have value `\"after\"`.\n     * ```html\n     * <igx-radio labelPosition = \"before\"></igx-radio>\n     * ```\n     * ```typescript\n     * let labelPosition =  this.radio.labelPosition;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public labelPosition: RadioLabelPosition | string = 'after';\n    /**\n     * Sets/gets the `value` attribute.\n     * ```html\n     * <igx-radio [value] = \"'radioButtonValue'\"></igx-radio>\n     * ```\n     * ```typescript\n     * let value =  this.radio.value;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public value: any;\n    /**\n     * Sets/gets the `name` attribute of the radio component.\n     * ```html\n     * <igx-radio name = \"Radio1\"></igx-radio>\n     *  ```\n     * ```typescript\n     * let name =  this.radio.name;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public name: string;\n    /**\n     * Sets the value of the `tabindex` attribute.\n     * ```html\n     * <igx-radio [tabindex] = \"1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let tabIndex =  this.radio.tabindex;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public tabindex: number = null;\n    /**\n     * Enables/disables the ripple effect on the radio button..\n     * If not set, the `disableRipple` will have value `false`.\n     * ```html\n     * <igx-radio [disableRipple] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isDisabledRipple =  this.radio.disableRipple;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public disableRipple = false;\n    /**\n     * Sets/gets whether the radio button is required.\n     * If not set, `required` will have value `false`.\n     * ```html\n     * <igx-radio [required] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isRequired =  this.radio.required;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input() public required = false;\n    /**\n     * Sets/gets the `aria-labelledby` attribute of the radio component.\n     * If not set, the `aria-labelledby` will be equal to the value of `labelId` attribute.\n     * ```html\n     * <igx-radio aria-labelledby = \"Radio1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let ariaLabelledBy = this.radio.ariaLabelledBy;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input('aria-labelledby')\n    public ariaLabelledBy = this.labelId;\n    /**\n     * Sets/gets the `aria-label` attribute of the radio component.\n     * ```html\n     * <igx-radio aria-label = \"Radio1\"></igx-radio>\n     * ```\n     * ```typescript\n     * let ariaLabel =  this.radio.ariaLabel;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @Input('aria-label')\n    public ariaLabel: string | null = null;\n    /**\n     * An event that is emitted after the radio `value` is changed.\n     * Provides references to the `IgxRadioComponent` and the `value` property as event arguments.\n     * @memberof IgxRadioComponent\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeRadioEventArgs> = new EventEmitter<IChangeRadioEventArgs>();\n    /**\n     * Returns the class of the radio component.\n     * ```typescript\n     * let radioClass = this.radio.cssClass;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio')\n    public cssClass = 'igx-radio';\n    /**\n     * Sets/gets  the `checked` attribute.\n     * Default value is `false`.\n     * ```html\n     * <igx-radio [checked] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isChecked =  this.radio.checked;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio--checked')\n    @Input() public checked = false;\n    /**\n     * Sets/gets  the `disabled` attribute.\n     * Default value is `false`.\n     * ```html\n     * <igx-radio [disabled] = \"true\"></igx-radio>\n     * ```\n     * ```typescript\n     * let isDisabled =  this.radio.disabled;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio--disabled')\n    @Input() public disabled = false;\n    /**\n     * Sets/gets whether the radio component is on focus.\n     * Default value is `false`.\n     * ```typescript\n     * this.radio.focus = true;\n     * ```\n     * ```typescript\n     * let isFocused =  this.radio.focused;\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    @HostBinding('class.igx-radio--focused')\n    public focused = false;\n    /**\n     * @hidden\n     */\n    public inputId = `${this.id}-input`;\n    /**\n     * @hidden\n     */\n    protected _value: any = null;\n\n    constructor() { }\n    /**\n     * @hidden\n     */\n    private _onTouchedCallback: () => void = noop;\n    /**\n     * @hidden\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * @hidden\n     */\n    public _onRadioChange(event) {\n        event.stopPropagation();\n    }\n    /**\n     * @hidden\n     */\n    public _onRadioClick(event) {\n        event.stopPropagation();\n        this.select();\n\n        if (isIE()) {\n            this.nativeRadio.nativeElement.blur();\n        }\n    }\n    /**\n     * @hidden\n     */\n    public _onLabelClick() {\n        this.select();\n    }\n    /**\n     * Selects the current radio button.\n     * ```typescript\n     * this.radio.select();\n     * ```\n     * @memberof IgxRadioComponent\n     */\n    public select() {\n        if (this.disabled) {\n            return;\n        }\n\n        this.checked = true;\n        this.focused = false;\n        this.change.emit({ value: this.value, radio: this });\n        this._onChangeCallback(this.value);\n    }\n    /**\n     * Checks whether the provided value is consistent to the current radio button.\n     * If it is, the checked attribute will have value `true`;\n     * ```typescript\n     * this.radio.writeValue('radioButtonValue');\n     * ```\n     */\n    public writeValue(value: any) {\n        this._value = value;\n        this.checked = (this._value === this.value);\n    }\n    /** @hidden */\n    getEditElement() {\n        return this.nativeRadio.nativeElement;\n    }\n    /**\n     * @hidden\n     */\n    public get labelClass(): string {\n        switch (this.labelPosition) {\n            case RadioLabelPosition.BEFORE:\n                return `${this.cssClass}__label--before`;\n            case RadioLabelPosition.AFTER:\n            default:\n                return `${this.cssClass}__label`;\n        }\n    }\n    /**\n     * @hidden\n     */\n    public onFocus() {\n        this.focused = true;\n    }\n    /**\n     * @hidden\n     */\n    public onBlur() {\n        this.focused = false;\n        this._onTouchedCallback();\n    }\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n}\n","import { Directive, ElementRef, HostListener, Input, NgModule, NgZone, Renderer2 } from '@angular/core';\nimport { AnimationBuilder, style, animate } from '@angular/animations';\n\n@Directive({\n    selector: '[igxRipple]'\n})\nexport class IgxRippleDirective {\n    /**\n     * Sets/gets the ripple target.\n     * ```html\n     * <div  #rippleContainer class=\"div-1\" igxRipple [igxRippleTarget] = \"'.div-1'\"></div>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let rippleTarget = this.ripple.rippleTarget;\n     * ```\n     * Can set the ripple to activate on a child element inside the parent where igxRipple is defined.\n     * ```html\n     * <div #rippleContainer [igxRippleTarget] = \"'#child\"'>\n     *  <button id=\"child\">Click</button>\n     * </div>\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleTarget')\n    public rippleTarget = '';\n    /**\n     * Sets/gets the ripple color.\n     * ```html\n     * <button #rippleContainer [igxRipple] = \"'red'\" ></button>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let rippleColor = this.ripple.rippleColor;\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRipple')\n    public rippleColor: string;\n    /**\n     * Sets/gets the ripple duration(in milliseconds).\n     * Default value is `600`.\n     * ```html\n     * <button #rippleContainer igxRipple [igxRippleDuration] = \"800\"></button>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let rippleDuration = this.ripple.rippleDuration;\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleDuration')\n    public rippleDuration = 600;\n    /**\n     * Enables/disables the ripple to be centered.\n     * ```html\n     * <button #rippleContainer igxRipple [igxRippleCentered] = \"true\"></button>\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleCentered') set centered(value: boolean) {\n        this._centered = value || this.centered;\n    }\n    /**\n     * Sets/gets whether the ripple is disabled.\n     * Default value is `false`.\n     * ```html\n     * <button #rippleContainer igxRipple [igxRippleDisabled] = \"true\"></button>\n     * ```\n     * ```typescript\n     * @ViewChild('rippleContainer', {read: IgxRippleDirective})\n     * public ripple: IgxRippleDirective;\n     * let isRippleDisabled = this.ripple.rippleDisabled;\n     * ```\n     * @memberof IgxRippleDirective\n     */\n    @Input('igxRippleDisabled')\n    public rippleDisabled = false;\n\n    protected get nativeElement(): HTMLElement {\n        return this.elementRef.nativeElement;\n    }\n\n    private rippleElementClass = 'igx-ripple__inner';\n    private rippleHostClass = 'igx-ripple';\n    private _centered = false;\n    private animationQueue = [];\n\n    constructor(\n        protected builder: AnimationBuilder,\n        protected elementRef: ElementRef,\n        protected renderer: Renderer2,\n        private zone: NgZone) { }\n    /**\n     * @hidden\n     */\n    @HostListener('mousedown', ['$event'])\n    public onMouseDown(event) {\n        this.zone.runOutsideAngular(() => this._ripple(event));\n    }\n\n    private setStyles(rippleElement: HTMLElement, styleParams: any) {\n        this.renderer.addClass(rippleElement, this.rippleElementClass);\n        this.renderer.setStyle(rippleElement, 'width', `${styleParams.radius}px`);\n        this.renderer.setStyle(rippleElement, 'height', `${styleParams.radius}px`);\n        this.renderer.setStyle(rippleElement, 'top', `${styleParams.top}px`);\n        this.renderer.setStyle(rippleElement, 'left', `${styleParams.left}px`);\n        if (this.rippleColor) {\n            this.renderer.setStyle(rippleElement, 'background', this.rippleColor);\n        }\n    }\n\n    private _ripple(event) {\n        if (this.rippleDisabled) {\n            return;\n        }\n\n        const target = (this.rippleTarget ? this.nativeElement.querySelector(this.rippleTarget) || this.nativeElement : this.nativeElement);\n\n        const rectBounds = target.getBoundingClientRect();\n        const radius = Math.max(rectBounds.width, rectBounds.height);\n        let left = Math.round(event.clientX - rectBounds.left - radius / 2);\n        let top = Math.round(event.clientY - rectBounds.top - radius / 2);\n\n        if (this._centered) {\n            left = top = 0;\n        }\n\n        const dimensions = {\n            radius,\n            top,\n            left\n        };\n\n        const rippleElement = this.renderer.createElement('span');\n\n        this.setStyles(rippleElement, dimensions);\n        this.renderer.addClass(target, this.rippleHostClass);\n        this.renderer.appendChild(target, rippleElement);\n\n        const animation = this.builder.build([\n            style({ opacity: 0.5, transform: 'scale(.3)' }),\n            animate(this.rippleDuration, style({ opacity: 0, transform: 'scale(2)' }))\n        ]).create(rippleElement);\n\n        this.animationQueue.push(animation);\n\n        animation.onDone(() => {\n            this.animationQueue.splice(this.animationQueue.indexOf(animation), 1);\n            target.removeChild(rippleElement);\n            if (this.animationQueue.length < 1) {\n                this.renderer.removeClass(target, this.rippleHostClass);\n            }\n        });\n\n        animation.play();\n\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxRippleDirective],\n    exports: [IgxRippleDirective]\n})\nexport class IgxRippleModule { }\n","import {\n    Directive,\n    NgModule,\n    Input,\n    QueryList,\n    Output,\n    EventEmitter,\n    AfterContentInit,\n    ContentChildren,\n    OnDestroy,\n    HostBinding\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxRadioComponent, RadioLabelPosition, IChangeRadioEventArgs } from '../../radio/radio.component';\nimport { IgxRippleModule } from '../ripple/ripple.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nconst noop = () => { };\nlet nextId = 0;\n\n/**\n * Radio group directive renders set of radio buttons.\n *\n * @igxModule IgxRadioModule\n *\n * @igxTheme igx-radio-theme\n *\n * @igxKeywords radiogroup, radio, button, input\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n * The Ignite UI Radio Group allows the user to select a single option from an available set of options that are listed side by side.\n *\n * @example:\n * ```html\n * <igx-radio-group name=\"radioGroup\">\n *   <igx-radio *ngFor=\"let item of ['Foo', 'Bar', 'Baz']\" value=\"{{item}}\">\n *      {{item}}\n *   </igx-radio>\n * </igx-radio-group>\n * ```\n */\n@Directive({\n    exportAs: 'igxRadioGroup',\n    selector: 'igx-radio-group, [igxRadioGroup]',\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxRadioGroupDirective, multi: true }]\n})\nexport class IgxRadioGroupDirective implements AfterContentInit, ControlValueAccessor, OnDestroy {\n    /**\n     * Returns reference to the child radio buttons.\n     *\n     * @example\n     * ```typescript\n     * let radioButtons =  this.radioGroup.radioButtons;\n     * ```\n     */\n    @ContentChildren(IgxRadioComponent, { descendants: true }) public radioButtons: QueryList<IgxRadioComponent>;\n\n    /**\n     * Sets/gets the `value` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group [value] = \"'radioButtonValue'\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get value(): any { return this._value; }\n    set value(newValue: any) {\n        if (this._value !== newValue) {\n            this._value = newValue;\n            this._selectRadioButton();\n        }\n    }\n\n    /**\n     * Sets/gets the `name` attribute of the radio group component. All child radio buttons inherits this name.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group name = \"Radio1\"></igx-radio-group>\n     *  ```\n     */\n    @Input()\n    get name(): string { return this._name; }\n    set name(newValue: string) {\n        if (this._name !== newValue) {\n            this._name = newValue;\n            this._setRadioButtonNames();\n        }\n    }\n\n    /**\n     * Sets/gets whether the radio group is required.\n     *\n     * @remarks\n     * If not set, `required` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group [required] = \"true\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get required(): boolean { return this._required; }\n    set required(newValue: boolean) {\n        if (this._required !== newValue) {\n            this._required = newValue;\n            this._setRadioButtonsRequired();\n        }\n    }\n\n    /**\n     * An @Input property that allows you to disable the radio group. By default it's false.\n     *\n     * @example\n     *  ```html\n     * <igx-radio-group [disabled]=\"true\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get disabled(): boolean { return this._disabled; }\n    set disabled(newValue: boolean) {\n        if (this._disabled !== newValue) {\n            this._disabled = newValue;\n            this._disableRadioButtons();\n        }\n    }\n\n    /**\n     * Sets/gets the position of the `label` in the child radio buttons.\n     *\n     * @remarks\n     * If not set, `labelPosition` will have value `\"after\"`.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group labelPosition = \"before\"></igx-radio-group>\n     * ```\n     */\n    @Input()\n    get labelPosition(): RadioLabelPosition | string { return this._labelPosition; }\n    set labelPosition(newValue: RadioLabelPosition | string) {\n        if (this._labelPosition !== newValue) {\n            this._labelPosition = newValue === RadioLabelPosition.BEFORE ? RadioLabelPosition.BEFORE : RadioLabelPosition.AFTER;\n            this._setRadioButtonLabelPosition();\n        }\n    }\n\n    /**\n     * Sets/gets the selected child radio button.\n     *\n     * @example\n     * ```typescript\n     * let selectedButton = this.radioGroup.selected;\n     * this.radioGroup.selected = selectedButton;\n     * ```\n     */\n    @Input()\n    get selected() { return this._selected; }\n    set selected(selected: IgxRadioComponent | null) {\n        if (this._selected !== selected) {\n            this._selected = selected;\n            this.value = selected ? selected.value : null;\n        }\n    }\n\n    /**\n     * An event that is emitted after the radio group `value` is changed.\n     *\n     * @remarks\n     * Provides references to the selected `IgxRadioComponent` and the `value` property as event arguments.\n     *\n     * @example\n     * ```html\n     * <igx-radio-group (change)=\"handler($event)\"></igx-radio-group>\n     * ```\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeRadioEventArgs> = new EventEmitter<IChangeRadioEventArgs>();\n\n    /**\n     * The css class applied to the component.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-radio-group')\n    public cssClass = 'igx-radio-group';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _name = `igx-radio-group-${nextId++}`;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _value: any = null;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _selected: IgxRadioComponent | null = null;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _isInitialized = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _labelPosition: RadioLabelPosition | string = 'after';\n    /**\n     * @hidden\n     * @internal\n     */\n    private _disabled = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _required = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    private destroy$ = new Subject<boolean>();\n\n    ngAfterContentInit() {\n        // The initial value can possibly be set by NgModel and it is possible that\n        // the OnInit of the NgModel occurs after the OnInit of this class.\n        this._isInitialized = true;\n\n        setTimeout(() => { this._initRadioButtons(); });\n    }\n\n    /**\n     * Sets the \"checked\" property value on the radio input element.\n     *\n     * @remarks\n     * Checks whether the provided value is consistent to the current radio button.\n     * If it is, the checked attribute will have value `true` and selected property will contain the selected `IgxRadioComponent`.\n     *\n     * @example\n     * ```typescript\n     * this.radioGroup.writeValue('radioButtonValue');\n     * ```\n     */\n    public writeValue(value: any) {\n        this.value = value;\n    }\n\n    /**\n     * Registers a function called when the control value changes.\n     *\n     * @hidden\n     * @internal\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n\n    /**\n     * Registers a function called when the control is touched.\n     *\n     * @hidden\n     * @internal\n     */\n    public registerOnTouched(fn: () => void) {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.registerOnTouched(fn);\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _initRadioButtons() {\n        if (this.radioButtons) {\n            const props = { name: this._name, labelPosition: this._labelPosition, disabled: this._disabled, required: this._required };\n            this.radioButtons.forEach((button) => {\n                Object.assign(button, props);\n\n                if (button.value === this._value) {\n                    button.checked = true;\n                    this._selected = button;\n                }\n\n                button.change.pipe(takeUntil(this.destroy$)).subscribe((ev) => this._selectedRadioButtonChanged(ev));\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _selectedRadioButtonChanged(args: IChangeRadioEventArgs) {\n        if (this._selected !== args.radio) {\n            if (this._selected) {\n                this._selected.checked = false;\n            }\n            this._selected = args.radio;\n        }\n\n        this._value = args.value;\n\n        if (this._isInitialized) {\n            this.change.emit(args);\n            this._onChangeCallback(this.value);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _setRadioButtonNames() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.name = this._name;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _selectRadioButton() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                if (!this._value) {\n                    // no value - uncheck all radio buttons\n                    if (button.checked) {\n                        button.checked = false;\n                    }\n                } else {\n                    if (this._value === button.value) {\n                        // selected button\n                        if (this._selected !== button) {\n                            this._selected = button;\n                        }\n\n                        if (!button.checked) {\n                            button.select();\n                        }\n                    } else {\n                        // non-selected button\n                        if (button.checked) {\n                            button.checked = false;\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _setRadioButtonLabelPosition() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.labelPosition = this._labelPosition;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _disableRadioButtons() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.disabled = this._disabled;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _setRadioButtonsRequired() {\n        if (this.radioButtons) {\n            this.radioButtons.forEach((button) => {\n                button.required = this._required;\n            });\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxRadioGroupDirective, IgxRadioComponent],\n    exports: [IgxRadioGroupDirective, IgxRadioComponent],\n    imports: [IgxRippleModule]\n})\nexport class IgxRadioModule { }\n","import {\n    AfterViewInit,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgModule,\n    OnChanges,\n    OnDestroy,\n    Renderer2,\n    SimpleChanges,\n    AfterViewChecked,\n} from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { compareMaps } from '../../core/utils';\n\ninterface ISearchInfo {\n    searchedText: string;\n    content: string;\n    matchCount: number;\n    caseSensitive: boolean;\n    exactMatch: boolean;\n}\n\n/**\n * An interface describing information for the active highlight.\n */\nexport interface IActiveHighlightInfo {\n    /**\n     * The row of the highlight.\n     */\n    row?: any;\n    /**\n     * The column of the highlight.\n     */\n    column?: any;\n    /**\n     * The index of the highlight.\n     */\n    index: number;\n    /**\n     * Additional, custom checks to perform prior an element highlighting.\n     */\n    metadata?: Map<string, any>;\n}\n\n@Directive({\n    selector: '[igxTextHighlight]'\n})\nexport class IgxTextHighlightDirective implements AfterViewInit, AfterViewChecked, OnDestroy, OnChanges {\n    private static onActiveElementChanged = new EventEmitter<string>();\n    public static highlightGroupsMap = new Map<string, IActiveHighlightInfo>();\n\n    private _lastSearchInfo: ISearchInfo;\n    private _div = null;\n    private _observer: MutationObserver = null;\n    private _nodeWasRemoved = false;\n    private _forceEvaluation = false;\n    private _activeElementIndex = -1;\n    private _valueChanged: boolean;\n    private _defaultCssClass = 'igx-highlight';\n    private _defaultActiveCssClass = 'igx-highlight--active';\n\n    /**\n     * Determines the `CSS` class of the highlight elements.\n     * This allows the developer to provide custom `CSS` to customize the highlight.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [cssClass]=\"myClass\">\n     * </div>\n     * ```\n     */\n    @Input('cssClass')\n    public cssClass: string;\n\n    /**\n     * Determines the `CSS` class of the active highlight element.\n     * This allows the developer to provide custom `CSS` to customize the highlight.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [activeCssClass]=\"activeHighlightClass\">\n     * </div>\n     * ```\n     */\n    @Input('activeCssClass')\n    public activeCssClass: string;\n\n    /**\n     * @hidden\n     */\n    @Input('containerClass')\n    public containerClass: string;\n\n    /**\n     * Identifies the highlight within a unique group.\n     * This allows it to have several different highlight groups,\n     * with each of them having their own active highlight.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [groupName]=\"myGroupName\">\n     * </div>\n     * ```\n     */\n    @Input('groupName')\n    public groupName = '';\n\n    private _value = '';\n\n    /**\n     * The underlying value of the element that will be highlighted.\n     *\n     * ```typescript\n     * // get\n     * const elementValue = this.textHighlight.value;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <div\n     *   igxTextHighlight\n     *   [value]=\"newValue\">\n     * </div>\n     * ```\n     */\n    @Input('value')\n    public get value(): any {\n        return this._value;\n    }\n    public set value(value: any) {\n        if (value === undefined || value === null) {\n            this._value = '';\n        } else {\n            this._value = value;\n        }\n    }\n\n    /**\n     * The identifier of the row on which the directive is currently on.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [row]=\"0\">\n     * </div>\n     * ```\n     */\n    @Input('row')\n    public row: any;\n\n    /**\n     * The identifier of the column on which the directive is currently on.\n     *\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [column]=\"0\">\n     * </div>\n     * ```\n     */\n    @Input('column')\n    public column: any;\n\n    /**\n     * A map that contains all aditional conditions, that you need to activate a highlighted\n     * element. To activate the condition, you will have to add a new metadata key to\n     * the `metadata` property of the IActiveHighlightInfo interface.\n     *\n     * @example\n     * ```typescript\n     *  // Set a property, which would disable the highlight for a given element on a cetain condition\n     *  const metadata = new Map<string, any>();\n     *  metadata.set('highlightElement', false);\n     * ```\n     * ```html\n     * <div\n     *   igxTextHighlight\n     *   [metadata]=\"metadata\">\n     * </div>\n     * ```\n     */\n    @Input()\n    public metadata: Map<string, any>;\n\n    /**\n     * @hidden\n     */\n    public get lastSearchInfo(): ISearchInfo {\n        return this._lastSearchInfo;\n    }\n\n    /**\n     * @hidden\n     */\n    public parentElement: any;\n\n    private _container: any;\n\n    private destroy$ = new Subject<boolean>();\n\n    /**\n     * Activates the highlight at a given index.\n     * (if such index exists)\n     */\n    public static setActiveHighlight(groupName: string, highlight: IActiveHighlightInfo) {\n        IgxTextHighlightDirective.highlightGroupsMap.set(groupName, highlight);\n        IgxTextHighlightDirective.onActiveElementChanged.emit(groupName);\n    }\n\n    /**\n     * Clears any existing highlight.\n     */\n    public static clearActiveHighlight(groupName) {\n        IgxTextHighlightDirective.highlightGroupsMap.set(groupName, {\n            index: -1\n        });\n        IgxTextHighlightDirective.onActiveElementChanged.emit(groupName);\n    }\n\n    constructor(private element: ElementRef, public renderer: Renderer2) {\n        IgxTextHighlightDirective.onActiveElementChanged.pipe(takeUntil(this.destroy$)).subscribe((groupName) => {\n            if (this.groupName === groupName) {\n                if (this._activeElementIndex !== -1) {\n                    this.deactivate();\n                }\n                this.activateIfNecessary();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnDestroy() {\n        this.clearHighlight();\n\n        if (this._observer !== null) {\n            this._observer.disconnect();\n        }\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.value && !changes.value.firstChange) {\n            this._valueChanged = true;\n        } else if ((changes.row !== undefined && !changes.row.firstChange) ||\n            (changes.column !== undefined && !changes.column.firstChange) ||\n            (changes.page !== undefined && !changes.page.firstChange)) {\n            if (this._activeElementIndex !== -1) {\n                this.deactivate();\n            }\n            this.activateIfNecessary();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        this.parentElement = this.renderer.parentNode(this.element.nativeElement);\n\n        if (IgxTextHighlightDirective.highlightGroupsMap.has(this.groupName) === false) {\n            IgxTextHighlightDirective.highlightGroupsMap.set(this.groupName, {\n                index: -1\n            });\n        }\n\n        this._lastSearchInfo = {\n            searchedText: '',\n            content: this.value,\n            matchCount: 0,\n            caseSensitive: false,\n            exactMatch: false\n        };\n\n        this._container = this.parentElement.firstElementChild;\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewChecked() {\n        if (this._valueChanged) {\n            this.highlight(this._lastSearchInfo.searchedText, this._lastSearchInfo.caseSensitive, this._lastSearchInfo.exactMatch);\n            this.activateIfNecessary();\n            this._valueChanged = false;\n        }\n    }\n\n    /**\n     * Clears the existing highlight and highlights the searched text.\n     * Returns how many times the element contains the searched text.\n     */\n    public highlight(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        const caseSensitiveResolved = caseSensitive ? true : false;\n        const exactMatchResolved = exactMatch ? true : false;\n\n        if (this.searchNeedsEvaluation(text, caseSensitiveResolved, exactMatchResolved)) {\n            this._lastSearchInfo.searchedText = text;\n            this._lastSearchInfo.caseSensitive = caseSensitiveResolved;\n            this._lastSearchInfo.exactMatch = exactMatchResolved;\n            this._lastSearchInfo.content = this.value;\n\n            if (text === '' || text === undefined || text === null) {\n                this.clearHighlight();\n            } else {\n                this.clearChildElements(true);\n                this._lastSearchInfo.matchCount = this.getHighlightedText(text, caseSensitive, exactMatch);\n            }\n        } else if (this._nodeWasRemoved) {\n            this._lastSearchInfo.searchedText = text;\n            this._lastSearchInfo.caseSensitive = caseSensitiveResolved;\n            this._lastSearchInfo.exactMatch = exactMatchResolved;\n        }\n\n        return this._lastSearchInfo.matchCount;\n    }\n\n    /**\n     * Clears any existing highlight.\n     */\n    public clearHighlight(): void {\n        this.clearChildElements(false);\n\n        this._lastSearchInfo.searchedText = '';\n        this._lastSearchInfo.matchCount = 0;\n    }\n\n    /**\n     * Activates the highlight if it is on the currently active row and column.\n     */\n    public activateIfNecessary(): void {\n        const group = IgxTextHighlightDirective.highlightGroupsMap.get(this.groupName);\n\n        if (group.column === this.column && group.row === this.row && compareMaps(this.metadata, group.metadata)) {\n            this.activate(group.index);\n        }\n    }\n\n    /**\n     * Attaches a MutationObserver to the parentElement and watches for when the container element is removed/readded to the DOM.\n     * Should be used only when necessary as using many observers may lead to performance degradation.\n     */\n    public observe(): void {\n        if (this._observer === null) {\n            const callback = (mutationList) => {\n                mutationList.forEach((mutation) => {\n                    const removedNodes = Array.from(mutation.removedNodes);\n                    removedNodes.forEach((n) => {\n                        if (n === this._container) {\n                            this._nodeWasRemoved = true;\n                            this.clearChildElements(false);\n                        }\n                    });\n\n                    const addedNodes = Array.from(mutation.addedNodes);\n                    addedNodes.forEach((n) => {\n                        if (n === this.parentElement.firstElementChild && this._nodeWasRemoved) {\n                            this._container = this.parentElement.firstElementChild;\n                            this._nodeWasRemoved = false;\n\n                            this._forceEvaluation = true;\n                            this.highlight(this._lastSearchInfo.searchedText,\n                                this._lastSearchInfo.caseSensitive,\n                                this._lastSearchInfo.exactMatch);\n                            this._forceEvaluation = false;\n\n                            this.activateIfNecessary();\n                            this._observer.disconnect();\n                            this._observer = null;\n                        }\n                    });\n                });\n            };\n\n            this._observer = new MutationObserver(callback);\n            this._observer.observe(this.parentElement, {childList: true});\n        }\n    }\n\n    private activate(index: number) {\n        this.deactivate();\n\n        if (this._div !== null) {\n            const spans = this._div.querySelectorAll('span');\n            this._activeElementIndex = index;\n\n            if (spans.length <= index) {\n                return;\n            }\n\n            const elementToActivate = spans[index];\n            this.renderer.addClass(elementToActivate, this._defaultActiveCssClass);\n            this.renderer.addClass(elementToActivate, this.activeCssClass);\n        }\n    }\n\n    private deactivate() {\n        if (this._activeElementIndex === -1) {\n            return;\n        }\n\n        const spans = this._div.querySelectorAll('span');\n\n        if (spans.length <= this._activeElementIndex) {\n            this._activeElementIndex = -1;\n            return;\n        }\n\n        const elementToDeactivate = spans[this._activeElementIndex];\n        this.renderer.removeClass(elementToDeactivate, this._defaultActiveCssClass);\n        this.renderer.removeClass(elementToDeactivate, this.activeCssClass);\n        this._activeElementIndex = -1;\n    }\n\n    private clearChildElements(originalContentHidden: boolean): void {\n        this.renderer.setProperty(this.element.nativeElement, 'hidden', originalContentHidden);\n\n        if (this._div !== null) {\n            this.renderer.removeChild(this.parentElement, this._div);\n\n            this._div = null;\n            this._activeElementIndex = -1;\n        }\n    }\n\n    private getHighlightedText(searchText: string, caseSensitive: boolean, exactMatch: boolean) {\n        this.appendDiv();\n\n        const stringValue = String(this.value);\n        const contentStringResolved = !caseSensitive ? stringValue.toLowerCase() : stringValue;\n        const searchTextResolved = !caseSensitive ? searchText.toLowerCase() : searchText;\n\n        let matchCount = 0;\n\n        if (exactMatch) {\n            if (contentStringResolved === searchTextResolved) {\n                // tslint:disable-next-line:max-line-length\n                this.appendSpan(`<span class=\"${this._defaultCssClass} ${this.cssClass ? this.cssClass : ''}\">${stringValue}</span>`);\n                matchCount++;\n            } else {\n                this.appendText(stringValue);\n            }\n        } else {\n            let foundIndex = contentStringResolved.indexOf(searchTextResolved, 0);\n            let previousMatchEnd = 0;\n\n            while (foundIndex !== -1) {\n                const start = foundIndex;\n                const end = foundIndex + searchTextResolved.length;\n\n                this.appendText(stringValue.substring(previousMatchEnd, start));\n                // tslint:disable-next-line:max-line-length\n                this.appendSpan(`<span class=\"${this._defaultCssClass} ${this.cssClass ? this.cssClass : ''}\">${stringValue.substring(start, end)}</span>`);\n\n                previousMatchEnd = end;\n                matchCount++;\n\n                foundIndex = contentStringResolved.indexOf(searchTextResolved, end);\n            }\n\n            this.appendText(stringValue.substring(previousMatchEnd, stringValue.length));\n        }\n\n        return matchCount;\n    }\n\n    private appendText(text: string) {\n        const textElement = this.renderer.createText(text);\n        this.renderer.appendChild(this._div, textElement);\n    }\n\n    private appendSpan(outerHTML: string) {\n        const span = this.renderer.createElement('span');\n        this.renderer.appendChild(this._div, span);\n        this.renderer.setProperty(span, 'outerHTML', outerHTML);\n    }\n\n    private appendDiv() {\n        this._div = this.renderer.createElement('div');\n        if ( this.containerClass) {\n            this.renderer.addClass(this._div, this.containerClass);\n        }\n        this.renderer.appendChild(this.parentElement, this._div);\n    }\n\n    private searchNeedsEvaluation(text: string, caseSensitive: boolean, exactMatch: boolean): boolean {\n        const searchedText = this._lastSearchInfo.searchedText;\n\n        return !this._nodeWasRemoved &&\n            (searchedText === null ||\n                searchedText !== text ||\n                this._lastSearchInfo.content !== this.value ||\n                this._lastSearchInfo.caseSensitive !== caseSensitive ||\n                this._lastSearchInfo.exactMatch !== exactMatch ||\n                this._forceEvaluation);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTextHighlightDirective],\n    exports: [IgxTextHighlightDirective]\n})\nexport class IgxTextHighlightModule { }\n","import { Directive, ElementRef, HostListener, Input, NgModule } from '@angular/core';\n\n@Directive({\n    exportAs: 'igxTextSelection',\n    selector: '[igxTextSelection]'\n})\nexport class IgxTextSelectionDirective {\n\n    private selectionState = true;\n\n    /**\n     * Returns whether the input element is selectable through the directive.\n     *\n     * ```typescript\n     * // get\n     * @ViewChild('firstName',\n     *  {read: IgxTextSelectionDirective})\n     * public firstName: IgxTextSelectionDirective;\n     *\n     * public getFirstNameSelectionStatus() {\n     *  return this.firstName.selected;\n     * }\n     * ```\n     */\n    @Input('igxTextSelection')\n    get selected(): boolean {\n        return this.selectionState;\n    }\n\n    /**\n     *  Determines whether the input element could be selected through the directive.\n     *\n     * ```html\n     * <!--set-->\n     * <input\n     *   type=\"text\"\n     *   id=\"firstName\"\n     *   [igxTextSelection]=\"true\">\n     * </input>\n     *\n     * <input\n     *   type=\"text\"\n     *   id=\"lastName\"\n     *   igxTextSelection\n     *   [selected]=\"true\">\n     * </input>\n     * ```\n     */\n    set selected(val: boolean) {\n        this.selectionState = val;\n    }\n\n    /**\n     * Returns the nativeElement of the element where the directive was applied.\n     *\n     * ```html\n     * <input\n     *   type=\"text\"\n     *   id=\"firstName\"\n     *   igxTextSelection>\n     * </input>\n     * ```\n     *\n     * ```typescript\n     * @ViewChild('firstName',\n     *  {read: IgxTextSelectionDirective})\n     * public inputElement: IgxTextSelectionDirective;\n     *\n     * public getNativeElement() {\n     *  return this.inputElement.nativeElement;\n     * }\n     * ```\n     */\n    get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('focus')\n    onFocus() {\n        this.trigger();\n    }\n\n    constructor(private element: ElementRef) { }\n\n    /**\n     * Triggers the selection of the element if it is marked as selectable.\n     *\n     * ```html\n     * <input\n     *   type=\"text\"\n     *   id=\"firstName\"\n     *   igxTextSelection>\n     * </input>\n     * ```\n     *\n     * ```typescript\n     * @ViewChild('firstName',\n     *  {read: IgxTextSelectionDirective})\n     * public inputElement: IgxTextSelectionDirective;\n     *\n     * public triggerElementSelection() {\n     *  this.inputElement.trigger();\n     * }\n     * ```\n     */\n    trigger() {\n        if (this.selected && this.nativeElement.value.length) {\n            requestAnimationFrame(() => this.nativeElement.setSelectionRange(0, this.nativeElement.value.length));\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTextSelectionDirective],\n    exports: [IgxTextSelectionDirective]\n})\nexport class IgxTextSelectionModule { }\n","import {\n    Directive, ElementRef, HostListener, Input, NgModule, ChangeDetectorRef, OnInit,\n    Output, EventEmitter, Optional, HostBinding, Inject, OnDestroy\n} from '@angular/core';\nimport { useAnimation } from '@angular/animations';\nimport { scaleInCenter } from '../../animations/scale/index';\nimport { fadeOut } from '../../animations/fade/index';\nimport { IgxOverlayService } from '../../services/overlay/overlay';\nimport { HorizontalAlignment, AutoPositionStrategy, PositionSettings, OverlaySettings } from '../../services/public_api';\nimport { CommonModule } from '@angular/common';\nimport { IgxNavigationService } from '../../core/navigation';\nimport { IgxToggleDirective, IgxToggleActionDirective } from '../toggle/toggle.directive';\nimport { IBaseEventArgs } from '../../core/utils';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport interface ITooltipShowEventArgs extends IBaseEventArgs {\n    target: IgxTooltipTargetDirective;\n    tooltip: IgxTooltipDirective;\n    cancel: boolean;\n}\nexport interface ITooltipHideEventArgs extends IBaseEventArgs {\n    target: IgxTooltipTargetDirective;\n    tooltip: IgxTooltipDirective;\n    cancel: boolean;\n}\n\n/**\n * **Ignite UI for Angular Tooltip Target** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/tooltip)\n *\n * The Ignite UI for Angular Tooltip Target directive is used to mark an HTML element in the markup as one that has a tooltip.\n * The tooltip target is used in combination with the Ignite UI for Angular Tooltip by assigning the exported tooltip reference to the\n * target's selector property.\n *\n * Example:\n * ```html\n * <button [igxTooltipTarget]=\"tooltipRef\">Hover me</button>\n * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n * ```\n */\n@Directive({\n    exportAs: 'tooltipTarget',\n    selector: '[igxTooltipTarget]'\n})\nexport class IgxTooltipTargetDirective extends IgxToggleActionDirective implements OnInit, OnDestroy {\n    private destroy$ = new Subject();\n\n    /**\n     * Gets/sets the amount of milliseconds that should pass before showing the tooltip.\n     *\n     * ```typescript\n     * // get\n     * let tooltipShowDelay = this.tooltipTarget.showDelay;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <button [igxTooltipTarget]=\"tooltipRef\" showDelay=\"1500\">Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Input('showDelay')\n    public showDelay = 500;\n\n    /**\n     * Gets/sets the amount of milliseconds that should pass before hiding the tooltip.\n     *\n     * ```typescript\n     * // get\n     * let tooltipHideDelay = this.tooltipTarget.hideDelay;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <button [igxTooltipTarget]=\"tooltipRef\" hideDelay=\"1500\">Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Input('hideDelay')\n    public hideDelay = 500;\n\n    /**\n     * Specifies if the tooltip should not show when hovering its target with the mouse. (defaults to false)\n     * While setting this property to 'true' will disable the user interactions that shows/hides the tooltip,\n     * the developer will still be able to show/hide the tooltip through the API.\n     *\n     * ```typescript\n     * // get\n     * let tooltipDisabledValue = this.tooltipTarget.tooltipDisabled;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <button [igxTooltipTarget]=\"tooltipRef\" [tooltipDisabled]=\"true\">Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Input('tooltipDisabled')\n    public tooltipDisabled = false;\n\n    /**\n     * @hidden\n     */\n    @Input('igxTooltipTarget')\n    set target(target: any) {\n        if (target !== null && target !== '') {\n            this._target = target;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get target(): any {\n        if (typeof this._target === 'string') {\n            return this._navigationService.get(this._target);\n        }\n        return this._target;\n    }\n\n    /**\n     * Gets the respective native element of the directive.\n     *\n     * ```typescript\n     * let tooltipTargetElement = this.tooltipTarget.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * Indicates if the tooltip that is is associated with this target is currently hidden.\n     *\n     * ```typescript\n     * let tooltipHiddenValue = this.tooltipTarget.tooltipHidden;\n     * ```\n     */\n    public get tooltipHidden(): boolean {\n        return !this.target || this.target.collapsed;\n    }\n\n    /**\n     * Emits an event when the tooltip that is associated with this target starts showing.\n     * This event is fired before the start of the countdown to showing the tooltip.\n     *\n     * ```typescript\n     * tooltipShowing(args: ITooltipShowEventArgs) {\n     *    alert(\"Tooltip started showing!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <button [igxTooltipTarget]=\"tooltipRef\"\n     *         (onTooltipShow)='tooltipShowing($event)'>Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Output()\n    public onTooltipShow = new EventEmitter<ITooltipShowEventArgs>();\n\n    /**\n     * Emits an event when the tooltip that is associated with this target starts hiding.\n     * This event is fired before the start of the countdown to hiding the tooltip.\n     *\n     * ```typescript\n     * tooltipHiding(args: ITooltipHideEventArgs) {\n     *    alert(\"Tooltip started hiding!\");\n     * }\n     * ```\n     *\n     * ```html\n     * <button [igxTooltipTarget]=\"tooltipRef\"\n     *         (onTooltipHide)='tooltipHiding($event)'>Hover me</button>\n     * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n     * ```\n     */\n    @Output()\n    public onTooltipHide = new EventEmitter<ITooltipHideEventArgs>();\n\n    constructor(private _element: ElementRef,\n        @Optional() private _navigationService: IgxNavigationService) {\n        super(_element, _navigationService);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n\n        const positionSettings: PositionSettings = {\n            horizontalDirection: HorizontalAlignment.Center,\n            horizontalStartPoint: HorizontalAlignment.Center,\n            openAnimation: useAnimation(scaleInCenter, { params: { duration: '150ms' } }),\n            closeAnimation: useAnimation(fadeOut, { params: { duration: '75ms' } })\n        };\n\n        this._overlayDefaults.positionStrategy = new AutoPositionStrategy(positionSettings);\n        this._overlayDefaults.closeOnOutsideClick = false;\n        this._overlayDefaults.closeOnEscape = true;\n\n        this.target.onClosing.pipe(takeUntil(this.destroy$)).subscribe((event) => {\n            const hidingArgs = { target: this, tooltip: this.target, cancel: false };\n            this.onTooltipHide.emit(hidingArgs);\n\n            if (hidingArgs.cancel) {\n                event.cancel = true;\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    private checkOutletAndOutsideClick() {\n        if (this.outlet) {\n            this._overlayDefaults.outlet = this.outlet;\n        }\n    }\n\n    private get mergedOverlaySettings() {\n        return Object.assign({}, this._overlayDefaults, this.overlaySettings);\n    }\n\n    // Return true if the execution in onMouseEnter should be terminated after this method\n    private preMouseEnterCheck() {\n        // If tooltip is about to be opened\n        if (this.target.toBeShown) {\n            clearTimeout(this.target.timeoutId);\n            this.target.toBeShown = false;\n        }\n\n        // If Tooltip is opened or about to be hidden\n        if (!this.target.collapsed || this.target.toBeHidden) {\n            clearTimeout(this.target.timeoutId);\n\n            //  if close animation has started finish it, or close the tooltip with no animation\n            this.target.forceClose(this.mergedOverlaySettings);\n            this.target.toBeHidden = false;\n        }\n\n        return false;\n    }\n\n    // Return true if the execution in onMouseLeave should be terminated after this method\n    private preMouseLeaveCheck(): boolean {\n        clearTimeout(this.target.timeoutId);\n\n        // If tooltip is about to be opened\n        if (this.target.toBeShown) {\n            this.target.toBeShown = false;\n            this.target.toBeHidden = false;\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click')\n    public onClick() {\n        if (!this.target.collapsed) {\n            this.target.forceClose(this.mergedOverlaySettings);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseenter')\n    public onMouseEnter() {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        this.checkOutletAndOutsideClick();\n        const shouldReturn = this.preMouseEnterCheck();\n        if (shouldReturn) {\n            return;\n        }\n\n        const showingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipShow.emit(showingArgs);\n\n        if (showingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeShown = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.open(this.mergedOverlaySettings); // Call open() of IgxTooltipDirective\n            this.target.toBeShown = false;\n        }, this.showDelay);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseleave')\n    public onMouseLeave() {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        this.checkOutletAndOutsideClick();\n        const shouldReturn = this.preMouseLeaveCheck();\n        if (shouldReturn || this.target.collapsed) {\n            return;\n        }\n\n        this.target.toBeHidden = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.close(); // Call close() of IgxTooltipDirective\n            this.target.toBeHidden = false;\n        }, this.hideDelay);\n\n\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('touchstart', ['$event'])\n    public onTouchStart(event) {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        this.showTooltip();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('document:touchstart', ['$event'])\n    public onDocumentTouchStart(event) {\n        if (this.tooltipDisabled) {\n            return;\n        }\n\n        if (this.nativeElement !== event.target &&\n            !this.nativeElement.contains(event.target)\n        ) {\n            this.hideTooltip();\n        }\n    }\n\n    /**\n     * Shows the tooltip by respecting the 'showDelay' property.\n     *\n     * ```typescript\n     * this.tooltipTarget.showTooltip();\n     * ```\n     */\n    public showTooltip() {\n        clearTimeout(this.target.timeoutId);\n\n        if (!this.target.collapsed) {\n            //  if close animation has started finish it, or close the tooltip with no animation\n            this.target.forceClose(this.mergedOverlaySettings);\n            this.target.toBeHidden = false;\n        }\n\n        const showingArgs = { target: this, tooltip: this.target, cancel: false };\n        this.onTooltipShow.emit(showingArgs);\n\n        if (showingArgs.cancel) {\n            return;\n        }\n\n        this.target.toBeShown = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.open(this.mergedOverlaySettings); // Call open() of IgxTooltipDirective\n            this.target.toBeShown = false;\n        }, this.showDelay);\n    }\n\n    /**\n     * Hides the tooltip by respecting the 'hideDelay' property.\n     *\n     * ```typescript\n     * this.tooltipTarget.hideTooltip();\n     * ```\n     */\n    public hideTooltip() {\n        if (this.target.collapsed && this.target.toBeShown) {\n            clearTimeout(this.target.timeoutId);\n        }\n\n        if (this.target.collapsed || this.target.toBeHidden) {\n            return;\n        }\n\n        this.target.toBeHidden = true;\n        this.target.timeoutId = setTimeout(() => {\n            this.target.close(); // Call close() of IgxTooltipDirective\n            this.target.toBeHidden = false;\n        }, this.hideDelay);\n    }\n}\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Tooltip** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/tooltip)\n *\n * The Ignite UI for Angular Tooltip directive is used to mark an HTML element in the markup as one that should behave as a tooltip.\n * The tooltip is used in combination with the Ignite UI for Angular Tooltip Target by assigning the exported tooltip reference to the\n * respective target's selector property.\n *\n * Example:\n * ```html\n * <button [igxTooltipTarget]=\"tooltipRef\">Hover me</button>\n * <span #tooltipRef=\"tooltip\" igxTooltip>Hello there, I am a tooltip!</span>\n * ```\n */\n@Directive({\n    exportAs: 'tooltip',\n    selector: '[igxTooltip]'\n})\nexport class IgxTooltipDirective extends IgxToggleDirective {\n\n    /**\n     * @hidden\n     */\n    public timeoutId;\n\n    /**\n     * @hidden\n     * Returns whether close time out has started\n     */\n    public toBeHidden = false;\n\n    /**\n     * @hidden\n     * Returns whether open time out has started\n     */\n    public toBeShown = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-tooltip--hidden')\n    public get hiddenClass() {\n        return this.collapsed;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-tooltip--desktop')\n    public get defaultClass() {\n        return !this.collapsed;\n    }\n\n    /**\n     * Gets/sets any tooltip related data.\n     * The 'context' can be used for storing any information that is necessary\n     * to access when working with the tooltip.\n     *\n     * ```typescript\n     * // get\n     * let tooltipContext = this.tooltip.context;\n     * ```\n     *\n     * ```typescript\n     * // set\n     * this.tooltip.context = \"Tooltip's context\";\n     * ```\n     */\n    @Input('context')\n    public context;\n\n    /**\n     * Identifier for the tooltip.\n     * If this is property is not explicitly set, it will be automatically generated.\n     *\n     * ```typescript\n     * let tooltipId = this.tooltip.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-tooltip-${NEXT_ID++}`;\n\n    /**\n     * Get the role attribute of the tooltip.\n     *\n     * ```typescript\n     * let tooltipRole = this.tooltip.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public get role() {\n        return 'tooltip';\n    }\n\n    /** @hidden */\n    constructor(\n        elementRef: ElementRef,\n        cdr: ChangeDetectorRef,\n        @Inject(IgxOverlayService) overlayService: IgxOverlayService,\n        @Optional() navigationService: IgxNavigationService) {\n        // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n        super(elementRef, cdr, overlayService, navigationService);\n    }\n\n    /**\n     * If there is open animation in progress this method will finish is.\n     * If there is no open animation in progress this method will open the toggle with no animation.\n     * @param overlaySettings setting to use for opening the toggle\n     */\n    protected forceOpen(overlaySettings?: OverlaySettings) {\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasOpenAnimation = info ? info.openAnimationPlayer : false;\n        if (hasOpenAnimation) {\n            info.openAnimationPlayer.finish();\n            info.openAnimationPlayer.reset();\n            info.openAnimationPlayer = null;\n        } else if (this.collapsed) {\n            const animation = overlaySettings.positionStrategy.settings.openAnimation;\n            overlaySettings.positionStrategy.settings.openAnimation = null;\n            this.open(overlaySettings);\n            overlaySettings.positionStrategy.settings.openAnimation = animation;\n        }\n    }\n\n    /**\n     * If there is close animation in progress this method will finish is.\n     * If there is no close animation in progress this method will close the toggle with no animation.\n     * @param overlaySettings settings to use for closing the toggle\n     */\n    protected forceClose(overlaySettings?: OverlaySettings) {\n        const info = this.overlayService.getOverlayById(this._overlayId);\n        const hasCloseAnimation = info ? info.closeAnimationPlayer : false;\n\n        if (hasCloseAnimation) {\n            info.closeAnimationPlayer.finish();\n            info.closeAnimationPlayer.reset();\n            info.closeAnimationPlayer = null;\n        } else if (!this.collapsed) {\n            const animation = overlaySettings.positionStrategy.settings.closeAnimation;\n            overlaySettings.positionStrategy.settings.closeAnimation = null;\n            this.close();\n            overlaySettings.positionStrategy.settings.closeAnimation = animation;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTooltipDirective, IgxTooltipTargetDirective],\n    exports: [IgxTooltipDirective, IgxTooltipTargetDirective],\n    imports: [CommonModule],\n    providers: [IgxOverlayService]\n})\nexport class IgxTooltipModule { }\n\n","export interface IgxDateTimeEditorEventArgs {\n    readonly oldValue?: Date;\n    newValue?: Date;\n    readonly userInput: string;\n}\n\n/**\n * Specify a particular date, time or AmPm part.\n */\nexport enum DatePart {\n    Date = 'date',\n    Month = 'month',\n    Year = 'year',\n    Hours = 'hour',\n    Minutes = 'minute',\n    Seconds = 'second',\n    AmPm = 'ampm',\n    Literal = 'literal'\n}\n\n/** @hidden @internal */\nexport interface DatePartInfo {\n    type: DatePart;\n    start: number;\n    end: number;\n    format: string;\n}\n","import { isIE } from '../core/utils';\nimport { DatePart, DatePartInfo } from '../directives/date-time-editor/date-time-editor.common';\nimport { formatDate, FormatWidth, getLocaleDateFormat } from '@angular/common';\n\n/**\n * This enum is used to keep the date validation result.\n *\n * @hidden\n */\nexport const enum DateState {\n    Valid = 'valid',\n    Invalid = 'invalid',\n}\n\n/** @hidden */\nconst enum FormatDesc {\n    Numeric = 'numeric',\n    TwoDigits = '2-digit'\n}\n\n/** @hidden */\nconst enum DateChars {\n    YearChar = 'y',\n    MonthChar = 'M',\n    DayChar = 'd'\n}\n\nconst DATE_CHARS = ['h', 'H', 'm', 's', 'S', 't', 'T'];\nconst TIME_CHARS = ['d', 'D', 'M', 'y', 'Y'];\n\n/** @hidden */\nconst enum DateParts {\n    Day = 'day',\n    Month = 'month',\n    Year = 'year'\n}\n\n\n/** @hidden */\nexport abstract class DatePickerUtil {\n    public static readonly DEFAULT_INPUT_FORMAT = 'MM/dd/yyyy';\n    // TODO: this is the def mask for the date-picker, should remove it during refactoring\n    private static readonly SHORT_DATE_MASK = 'MM/dd/yy';\n    private static readonly SEPARATOR = 'literal';\n    private static readonly NUMBER_OF_MONTHS = 12;\n    private static readonly PROMPT_CHAR = '_';\n    private static readonly DEFAULT_LOCALE = 'en';\n\n\n\n    /**\n     *  TODO: (in issue #6483) Unit tests and docs for all public methods.\n     */\n\n\n\n    /**\n     * Parse a Date value from masked string input based on determined date parts\n     * @param inputData masked value to parse\n     * @param dateTimeParts Date parts array for the mask\n     */\n    public static parseValueFromMask(inputData: string, dateTimeParts: DatePartInfo[], promptChar?: string): Date | null {\n        const parts: { [key in DatePart]: number } = {} as any;\n        dateTimeParts.forEach(dp => {\n            let value = parseInt(this.getCleanVal(inputData, dp, promptChar), 10);\n            if (!value) {\n                value = dp.type === DatePart.Date || dp.type === DatePart.Month ? 1 : 0;\n            }\n            parts[dp.type] = value;\n        });\n        parts[DatePart.Month] -= 1;\n\n        if (parts[DatePart.Month] < 0 || 11 < parts[DatePart.Month]) {\n            return null;\n        }\n\n        // TODO: Century threshold\n        if (parts[DatePart.Year] < 50) {\n            parts[DatePart.Year] += 2000;\n        }\n\n        if (parts[DatePart.Date] > DatePickerUtil.daysInMonth(parts[DatePart.Year], parts[DatePart.Month])) {\n            return null;\n        }\n\n        if (parts[DatePart.Hours] > 23 || parts[DatePart.Minutes] > 59 || parts[DatePart.Seconds] > 59) {\n            return null;\n        }\n\n        return new Date(\n            parts[DatePart.Year] || 2000,\n            parts[DatePart.Month] || 0,\n            parts[DatePart.Date] || 1,\n            parts[DatePart.Hours] || 0,\n            parts[DatePart.Minutes] || 0,\n            parts[DatePart.Seconds] || 0\n        );\n    }\n\n    /**\n     * Parse the mask into date/time and literal parts\n     */\n    public static parseDateTimeFormat(mask: string, locale: string = DatePickerUtil.DEFAULT_LOCALE): DatePartInfo[] {\n        const format = mask || DatePickerUtil.getDefaultInputFormat(locale);\n        const dateTimeParts: DatePartInfo[] = [];\n        const formatArray = Array.from(format);\n        let currentPart: DatePartInfo = null;\n        let position = 0;\n\n        for (let i = 0; i < formatArray.length; i++, position++) {\n            const type = DatePickerUtil.determineDatePart(formatArray[i]);\n            if (currentPart) {\n                if (currentPart.type === type) {\n                    currentPart.format += formatArray[i];\n                    if (i < formatArray.length - 1) {\n                        continue;\n                    }\n                }\n\n                DatePickerUtil.ensureLeadingZero(currentPart);\n                currentPart.end = currentPart.start + currentPart.format.length;\n                position = currentPart.end;\n                dateTimeParts.push(currentPart);\n            }\n\n            currentPart = {\n                start: position,\n                end: position + formatArray[i].length,\n                type: type,\n                format: formatArray[i]\n            };\n        }\n\n        return dateTimeParts;\n    }\n\n    public static getDefaultInputFormat(locale: string): string {\n        if (!Intl || !Intl.DateTimeFormat || !Intl.DateTimeFormat.prototype.formatToParts) {\n            // TODO: fallback with Intl.format for IE?\n            return DatePickerUtil.SHORT_DATE_MASK;\n        }\n        const parts = DatePickerUtil.getDefaultLocaleMask(locale);\n        parts.forEach(p => {\n            if (p.type !== DatePart.Year && p.type !== DatePickerUtil.SEPARATOR) {\n                p.formatType = FormatDesc.TwoDigits;\n            }\n        });\n\n        return DatePickerUtil.getMask(parts);\n    }\n\n    public static formatDate(value: number | Date, format: string, locale: string, timezone?: string): string {\n        let formattedDate: string;\n        try {\n            formattedDate = formatDate(value, format, locale, timezone);\n        } catch {\n            this.logMissingLocaleSettings(locale);\n            const formatter = new Intl.DateTimeFormat(locale);\n            formattedDate = formatter.format(value);\n        }\n\n        return formattedDate;\n    }\n\n    public static getLocaleDateFormat(locale: string, displayFormat?: string): string {\n        const formatKeys = Object.keys(FormatWidth) as (keyof FormatWidth)[];\n        const targetKey = formatKeys.find(k => k.toLowerCase() === displayFormat?.toLowerCase().replace('date', ''));\n        if (!targetKey) {\n            // if displayFormat is not shortDate, longDate, etc.\n            // or if it is not set by the user\n            return displayFormat;\n        }\n        let format: string;\n        try {\n            format = getLocaleDateFormat(locale, FormatWidth[targetKey]);\n        } catch {\n            this.logMissingLocaleSettings(locale);\n            format = DatePickerUtil.getDefaultInputFormat(locale);\n        }\n\n        return format;\n    }\n\n    public static isDateOrTimeChar(char: string): boolean {\n        return DATE_CHARS.indexOf(char) !== -1 || TIME_CHARS.indexOf(char) !== -1;\n    }\n\n    public static spinDate(delta: number, newDate: Date, isSpinLoop: boolean): void {\n        const maxDate = DatePickerUtil.daysInMonth(newDate.getFullYear(), newDate.getMonth());\n        let date = newDate.getDate() + delta;\n        if (date > maxDate) {\n            date = isSpinLoop ? date % maxDate : maxDate;\n        } else if (date < 1) {\n            date = isSpinLoop ? maxDate + (date % maxDate) : 1;\n        }\n\n        newDate.setDate(date);\n    }\n\n    public static spinMonth(delta: number, newDate: Date, isSpinLoop: boolean): void {\n        const maxDate = DatePickerUtil.daysInMonth(newDate.getFullYear(), newDate.getMonth() + delta);\n        if (newDate.getDate() > maxDate) {\n            newDate.setDate(maxDate);\n        }\n\n        const maxMonth = 11;\n        const minMonth = 0;\n        let month = newDate.getMonth() + delta;\n        if (month > maxMonth) {\n            month = isSpinLoop ? (month % maxMonth) - 1 : maxMonth;\n        } else if (month < minMonth) {\n            month = isSpinLoop ? maxMonth + (month % maxMonth) + 1 : minMonth;\n        }\n\n        newDate.setMonth(month);\n    }\n\n    public static spinYear(delta: number, newDate: Date): void {\n        const maxDate = DatePickerUtil.daysInMonth(newDate.getFullYear() + delta, newDate.getMonth());\n        if (newDate.getDate() > maxDate) {\n            // clip to max to avoid leap year change shifting the entire value\n            newDate.setDate(maxDate);\n        }\n        newDate.setFullYear(newDate.getFullYear() + delta);\n    }\n\n    public static spinHours(delta: number, newDate: Date, isSpinLoop: boolean): void {\n        const maxHour = 23;\n        const minHour = 0;\n        let hours = newDate.getHours() + delta;\n        if (hours > maxHour) {\n            hours = isSpinLoop ? hours % maxHour - 1 : maxHour;\n        } else if (hours < minHour) {\n            hours = isSpinLoop ? maxHour + (hours % maxHour) + 1 : minHour;\n        }\n\n        newDate.setHours(hours);\n    }\n\n    public static spinMinutes(delta: number, newDate: Date, isSpinLoop: boolean): void {\n        const maxMinutes = 59;\n        const minMinutes = 0;\n        let minutes = newDate.getMinutes() + delta;\n        if (minutes > maxMinutes) {\n            minutes = isSpinLoop ? minutes % maxMinutes - 1 : maxMinutes;\n        } else if (minutes < minMinutes) {\n            minutes = isSpinLoop ? maxMinutes + (minutes % maxMinutes) + 1 : minMinutes;\n        }\n\n        newDate.setMinutes(minutes);\n    }\n\n    public static spinSeconds(delta: number, newDate: Date, isSpinLoop: boolean): void {\n        const maxSeconds = 59;\n        const minSeconds = 0;\n        let seconds = newDate.getSeconds() + delta;\n        if (seconds > maxSeconds) {\n            seconds = isSpinLoop ? seconds % maxSeconds - 1 : maxSeconds;\n        } else if (seconds < minSeconds) {\n            seconds = isSpinLoop ? maxSeconds + (seconds % maxSeconds) + 1 : minSeconds;\n        }\n\n        newDate.setSeconds(seconds);\n    }\n\n    public static spinAmPm(newDate: Date, currentDate: Date, amPmFromMask: string): Date {\n        switch (amPmFromMask) {\n            case 'AM':\n                newDate = new Date(newDate.setHours(newDate.getHours() + 12));\n                break;\n            case 'PM':\n                newDate = new Date(newDate.setHours(newDate.getHours() - 12));\n                break;\n        }\n        if (newDate.getDate() !== currentDate.getDate()) {\n            return currentDate;\n        }\n\n        return newDate;\n    }\n\n    /**\n     * Determines whether the provided value is greater than the provided max value.\n     * @param includeTime set to false if you want to exclude time portion of the two dates\n     * @param includeDate set to false if you want to exclude the date portion of the two dates\n     * @returns true if provided value is greater than provided maxValue\n     */\n    public static greaterThanMaxValue(value: Date, maxValue: Date, includeTime = true, includeDate = true): boolean {\n        // TODO: check if provided dates are valid dates and not Invalid Date\n        // if maxValue is Invalid Date and value is valid date this will return:\n        // - false if includeDate is true\n        // - true if includeDate is false\n        if (includeTime && includeDate) {\n            return value.getTime() > maxValue.getTime();\n        }\n\n        const _value = new Date(value.getTime());\n        const _maxValue = new Date(maxValue.getTime());\n        if (!includeTime) {\n            _value.setHours(0, 0, 0, 0);\n            _maxValue.setHours(0, 0, 0, 0);\n        }\n        if (!includeDate) {\n            _value.setFullYear(0, 0, 0);\n            _maxValue.setFullYear(0, 0, 0);\n        }\n\n        return _value.getTime() > _maxValue.getTime();\n    }\n\n    /**\n     * Determines whether the provided value is less than the provided min value.\n     * @param includeTime set to false if you want to exclude time portion of the two dates\n     * @param includeDate set to false if you want to exclude the date portion of the two dates\n     * @returns true if provided value is less than provided minValue\n     */\n    public static lessThanMinValue(value: Date, minValue: Date, includeTime = true, includeDate = true): boolean {\n        // TODO: check if provided dates are valid dates and not Invalid Date\n        // if value is Invalid Date and minValue is valid date this will return:\n        // - false if includeDate is true\n        // - true if includeDate is false\n        if (includeTime && includeDate) {\n            return value.getTime() < minValue.getTime();\n        }\n\n        const _value = new Date(value.getTime());\n        const _minValue = new Date(minValue.getTime());\n        if (!includeTime) {\n            _value.setHours(0, 0, 0, 0);\n            _minValue.setHours(0, 0, 0, 0);\n        }\n        if (!includeDate) {\n            _value.setFullYear(0, 0, 0);\n            _minValue.setFullYear(0, 0, 0);\n        }\n\n        return _value.getTime() < _minValue.getTime();\n    }\n\n    private static logMissingLocaleSettings(locale: string): void {\n        console.warn(`Missing locale data for the locale ${locale}. Please refer to https://angular.io/guide/i18n#i18n-pipes`);\n        console.warn('Using default browser locale settings.');\n    }\n\n    private static ensureLeadingZero(part: DatePartInfo) {\n        switch (part.type) {\n            case DatePart.Date:\n            case DatePart.Month:\n            case DatePart.Hours:\n            case DatePart.Minutes:\n            case DatePart.Seconds:\n                if (part.format.length === 1) {\n                    part.format = part.format.repeat(2);\n                }\n                break;\n        }\n    }\n\n    private static getCleanVal(inputData: string, datePart: DatePartInfo, promptChar?: string): string {\n        return DatePickerUtil.trimEmptyPlaceholders(inputData.substring(datePart.start, datePart.end), promptChar);\n    }\n\n    private static determineDatePart(char: string): DatePart {\n        switch (char) {\n            case 'd':\n            case 'D':\n                return DatePart.Date;\n            case 'M':\n                return DatePart.Month;\n            case 'y':\n            case 'Y':\n                return DatePart.Year;\n            case 'h':\n            case 'H':\n                return DatePart.Hours;\n            case 'm':\n                return DatePart.Minutes;\n            case 's':\n            case 'S':\n                return DatePart.Seconds;\n            case 't':\n            case 'T':\n                return DatePart.AmPm;\n            default:\n                return DatePart.Literal;\n        }\n    }\n\n    /**\n     * This method generates date parts structure based on editor mask and locale.\n     * @param maskValue: string\n     * @param locale: string\n     * @returns array containing information about date parts - type, position, format\n     */\n    public static parseDateFormat(maskValue: string, locale: string = DatePickerUtil.DEFAULT_LOCALE): any[] {\n        let dateStruct = [];\n        if (maskValue === undefined && !isIE()) {\n            dateStruct = DatePickerUtil.getDefaultLocaleMask(locale);\n        } else {\n            const mask = (maskValue) ? maskValue : DatePickerUtil.SHORT_DATE_MASK;\n            const maskArray = Array.from(mask);\n            const monthInitPosition = mask.indexOf(DateChars.MonthChar);\n            const dayInitPosition = mask.indexOf(DateChars.DayChar);\n            const yearInitPosition = mask.indexOf(DateChars.YearChar);\n\n            if (yearInitPosition !== -1) {\n                dateStruct.push({\n                    type: DateParts.Year,\n                    initialPosition: yearInitPosition,\n                    formatType: DatePickerUtil.getYearFormatType(mask)\n                });\n            }\n\n            if (monthInitPosition !== -1) {\n                dateStruct.push({\n                    type: DateParts.Month,\n                    initialPosition: monthInitPosition,\n                    formatType: DatePickerUtil.getMonthFormatType(mask)\n                });\n            }\n\n            if (dayInitPosition !== -1) {\n                dateStruct.push({\n                    type: DateParts.Day,\n                    initialPosition: dayInitPosition,\n                    formatType: DatePickerUtil.getDayFormatType(mask)\n                });\n            }\n\n            for (let i = 0; i < maskArray.length; i++) {\n                if (!DatePickerUtil.isDateChar(maskArray[i])) {\n                    dateStruct.push({\n                        type: DatePickerUtil.SEPARATOR,\n                        initialPosition: i,\n                        value: maskArray[i]\n                    });\n                }\n            }\n\n            dateStruct.sort((a, b) => a.initialPosition - b.initialPosition);\n            DatePickerUtil.fillDatePartsPositions(dateStruct);\n        }\n        return dateStruct;\n    }\n\n    /**\n     * This method generates input mask based on date parts.\n     * @param dateStruct array\n     * @returns input mask\n     */\n    public static getInputMask(dateStruct: any[]): string {\n        const inputMask = [];\n        for (let i = 0; i < dateStruct.length; i++) {\n            if (dateStruct[i].type === DatePickerUtil.SEPARATOR) {\n                inputMask.push(dateStruct[i].value);\n            } else if (dateStruct[i].type === DateParts.Day || dateStruct[i].type === DateParts.Month) {\n                inputMask.push('00');\n            } else if (dateStruct[i].type === DateParts.Year) {\n                switch (dateStruct[i].formatType) {\n                    case FormatDesc.Numeric: {\n                        inputMask.push('0000');\n                        break;\n                    }\n                    case FormatDesc.TwoDigits: {\n                        inputMask.push('00');\n                        break;\n                    }\n                }\n            }\n        }\n        return inputMask.join('');\n    }\n\n    /**\n     * This method generates editor mask.\n     * @param dateStruct\n     * @returns editor mask\n     */\n    public static getMask(dateStruct: any[]): string {\n        const mask = [];\n        for (let i = 0; i < dateStruct.length; i++) {\n            switch (dateStruct[i].formatType) {\n                case FormatDesc.Numeric: {\n                    if (dateStruct[i].type === DateParts.Day) {\n                        mask.push('d');\n                    } else if (dateStruct[i].type === DateParts.Month) {\n                        mask.push('M');\n                    } else {\n                        mask.push('yyyy');\n                    }\n                    break;\n                }\n                case FormatDesc.TwoDigits: {\n                    if (dateStruct[i].type === DateParts.Day) {\n                        mask.push('dd');\n                    } else if (dateStruct[i].type === DateParts.Month) {\n                        mask.push('MM');\n                    } else {\n                        mask.push('yy');\n                    }\n                }\n            }\n\n            if (dateStruct[i].type === DatePickerUtil.SEPARATOR) {\n                mask.push(dateStruct[i].value);\n            }\n        }\n\n        return mask.join('');\n    }\n    /**\n     * This method parses an input string base on date parts and returns a date and its validation state.\n     * @param dateFormatParts\n     * @param prevDateValue\n     * @param inputValue\n     * @returns object containing a date and its validation state\n     */\n    public static parseDateArray(dateFormatParts: any[], prevDateValue: Date, inputValue: string): any {\n        const dayStr = DatePickerUtil.getDayValueFromInput(dateFormatParts, inputValue);\n        const monthStr = DatePickerUtil.getMonthValueFromInput(dateFormatParts, inputValue);\n        const yearStr = DatePickerUtil.getYearValueFromInput(dateFormatParts, inputValue);\n        const yearFormat = DatePickerUtil.getDateFormatPart(dateFormatParts, DateParts.Year).formatType;\n        const day = (dayStr !== '') ? parseInt(dayStr, 10) : 1;\n        const month = (monthStr !== '') ? parseInt(monthStr, 10) - 1 : 0;\n\n        let year;\n        if (yearStr === '') {\n            year = (yearFormat === FormatDesc.TwoDigits) ? '00' : '2000';\n        } else {\n            year = yearStr;\n        }\n        let yearPrefix;\n        if (prevDateValue) {\n            const originalYear = prevDateValue.getFullYear().toString();\n            if (originalYear.length === 4) {\n                yearPrefix = originalYear.substring(0, 2);\n            }\n        } else {\n            yearPrefix = '20';\n        }\n        const fullYear = (yearFormat === FormatDesc.TwoDigits) ? yearPrefix.concat(year) : year;\n\n        if ((month < 0) || (month > 11) || (month === NaN)) {\n            return { state: DateState.Invalid, value: inputValue };\n        }\n\n        if ((day < 1) || (day > DatePickerUtil.daysInMonth(fullYear, month)) || (day === NaN)) {\n            return { state: DateState.Invalid, value: inputValue };\n        }\n\n        return { state: DateState.Valid, date: new Date(fullYear, month, day) };\n    }\n\n    public static maskToPromptChars(mask: string): string {\n        const result = mask.replace(/0|L/g, DatePickerUtil.PROMPT_CHAR);\n        return result;\n    }\n\n    /**\n     * This method replaces prompt chars with empty string.\n     * @param value\n     */\n    public static trimEmptyPlaceholders(value: string, promptChar?: string): string {\n        const result = value.replace(new RegExp(promptChar || '_', 'g'), '');\n        return result;\n    }\n\n    /**\n     * This method is used for spinning date parts.\n     * @param dateFormatParts\n     * @param inputValue\n     * @param position\n     * @param delta\n     * @param isSpinLoop\n     * @return modified text input\n     */\n    public static getModifiedDateInput(dateFormatParts: any[],\n        inputValue: string,\n        position: number,\n        delta: number,\n        isSpinLoop: boolean): string {\n        const datePart = DatePickerUtil.getDatePartOnPosition(dateFormatParts, position);\n        const datePartType = datePart.type;\n        const datePartFormatType = datePart.formatType;\n        let newValue;\n\n        const datePartValue = DatePickerUtil.getDateValueFromInput(dateFormatParts, datePartType, inputValue);\n        newValue = parseInt(datePartValue, 10);\n\n        let maxValue, minValue;\n        const minMax = DatePickerUtil.getMinMaxValue(dateFormatParts, datePart, inputValue);\n        minValue = minMax.min;\n        maxValue = minMax.max;\n\n        if (isNaN(newValue)) {\n            if (minValue === 'infinite') {\n                newValue = 2000;\n            } else {\n                newValue = minValue;\n            }\n        }\n        let tempValue = newValue;\n        tempValue += delta;\n\n        // Infinite loop for full years\n        if (maxValue === 'infinite' && minValue === 'infinite') {\n            newValue = tempValue;\n        }\n\n        if (isSpinLoop) {\n            if (tempValue > maxValue) {\n                tempValue = minValue;\n            }\n            if (tempValue < minValue) {\n                tempValue = maxValue;\n            }\n            newValue = tempValue;\n        } else {\n            if (tempValue <= maxValue && tempValue >= minValue) {\n                newValue = tempValue;\n            }\n        }\n\n        const startIdx = datePart.position[0];\n        const endIdx = datePart.position[1];\n        const start = inputValue.slice(0, startIdx);\n        const end = inputValue.slice(endIdx, inputValue.length);\n        let changedPart: string;\n\n        const prefix = DatePickerUtil.getNumericFormatPrefix(datePartFormatType);\n        changedPart = (newValue < 10) ? `${prefix}${newValue}` : `${newValue}`;\n\n        return `${start}${changedPart}${end}`;\n    }\n\n    /**\n     * This method returns date input with prompt chars.\n     * @param dateFormatParts\n     * @param date\n     * @param inputValue\n     * @returns date input including prompt chars\n     */\n    public static addPromptCharsEditMode(dateFormatParts: any[], date: Date, inputValue: string): string {\n        const dateArray = Array.from(inputValue);\n        for (let i = 0; i < dateFormatParts.length; i++) {\n            if (dateFormatParts[i].formatType === FormatDesc.Numeric) {\n                if ((dateFormatParts[i].type === DateParts.Day && date.getDate() < 10)\n                    || (dateFormatParts[i].type === DateParts.Month && date.getMonth() + 1 < 10)) {\n                    dateArray.splice(dateFormatParts[i].position[0], 0, DatePickerUtil.PROMPT_CHAR);\n                    dateArray.join('');\n                }\n            }\n        }\n        return dateArray.join('');\n    }\n\n    /**\n     * This method checks if date input is done.\n     * @param dateFormatParts\n     * @param input\n     * @returns input completeness\n     */\n    public static checkForCompleteDateInput(dateFormatParts: any[], input: string): string {\n        const dayValue = DatePickerUtil.getDayValueFromInput(dateFormatParts, input);\n        const monthValue = DatePickerUtil.getMonthValueFromInput(dateFormatParts, input);\n        const yearValue = DatePickerUtil.getYearValueFromInput(dateFormatParts, input);\n        const dayStr = DatePickerUtil.getDayValueFromInput(dateFormatParts, input, false);\n        const monthStr = DatePickerUtil.getMonthValueFromInput(dateFormatParts, input, false);\n\n        if (DatePickerUtil.isFullInput(dayValue, dayStr)\n            && DatePickerUtil.isFullInput(monthValue, monthStr)\n            && DatePickerUtil.isFullYearInput(dateFormatParts, yearValue)) {\n            return 'complete';\n        } else if (dayValue === '' && monthValue === '' && yearValue === '') {\n            return 'empty';\n        } else if (dayValue === '' || monthValue === '' || yearValue === '') {\n            return 'partial';\n        }\n        return '';\n    }\n\n    public static daysInMonth(fullYear: number, month: number): number {\n        return new Date(fullYear, month + 1, 0).getDate();\n    }\n\n    /**\n     * Parse provided input to Date.\n     * @param value input to parse\n     * @returns Date if parse succeed or null\n     */\n    public static parseDate(value: any): Date | null {\n        if (typeof value === 'number') {\n            return new Date(value);\n        }\n\n        // if value is Invalid Date we should return null\n        if (this.isDate(value)) {\n            return this.isValidDate(value) ? value : null;\n        }\n\n        return value ? new Date(Date.parse(value)) : null;\n    }\n\n    /**\n     * Returns whether provided input is date\n     * @param value input to check\n     * @returns true if provided input is date\n     */\n    public static isDate(value: any): boolean {\n        return Object.prototype.toString.call(value) === '[object Date]';\n    }\n\n    /**\n     * Returns whether the input is valid date\n     * @param value input to check\n     * @returns true if provided input is a valid date\n     */\n    public static isValidDate(value: any): boolean {\n        if (this.isDate(value)) {\n            return !isNaN(value.getTime());\n        }\n\n        return false;\n    }\n\n    private static getYearFormatType(format: string): string {\n        switch (format.match(new RegExp(DateChars.YearChar, 'g')).length) {\n            case 1: {\n                // y (2020)\n                return FormatDesc.Numeric;\n            }\n            case 4: {\n                // yyyy (2020)\n                return FormatDesc.Numeric;\n            }\n            case 2: {\n                // yy (20)\n                return FormatDesc.TwoDigits;\n            }\n        }\n    }\n\n    private static getMonthFormatType(format: string): string {\n        switch (format.match(new RegExp(DateChars.MonthChar, 'g')).length) {\n            case 1: {\n                // M (8)\n                return FormatDesc.Numeric;\n            }\n            case 2: {\n                // MM (08)\n                return FormatDesc.TwoDigits;\n            }\n        }\n    }\n\n    private static getDayFormatType(format: string): string {\n        switch (format.match(new RegExp(DateChars.DayChar, 'g')).length) {\n            case 1: {\n                // d (6)\n                return FormatDesc.Numeric;\n            }\n            case 2: {\n                // dd (06)\n                return FormatDesc.TwoDigits;\n            }\n        }\n    }\n\n    private static getDefaultLocaleMask(locale: string) {\n        const dateStruct = [];\n        const formatter = new Intl.DateTimeFormat(locale);\n        const formatToParts = formatter.formatToParts(new Date());\n        for (let i = 0; i < formatToParts.length; i++) {\n            if (formatToParts[i].type === DatePickerUtil.SEPARATOR) {\n                dateStruct.push({\n                    type: DatePickerUtil.SEPARATOR,\n                    value: formatToParts[i].value\n                });\n            } else {\n                dateStruct.push({\n                    type: formatToParts[i].type\n                });\n            }\n        }\n        const formatterOptions = formatter.resolvedOptions();\n        for (let i = 0; i < dateStruct.length; i++) {\n            switch (dateStruct[i].type) {\n                case DateParts.Day: {\n                    dateStruct[i].formatType = formatterOptions.day;\n                    break;\n                }\n                case DateParts.Month: {\n                    dateStruct[i].formatType = formatterOptions.month;\n                    break;\n                }\n                case DateParts.Year: {\n                    dateStruct[i].formatType = formatterOptions.year;\n                    break;\n                }\n            }\n        }\n        DatePickerUtil.fillDatePartsPositions(dateStruct);\n        return dateStruct;\n    }\n\n    private static isDateChar(char: string): boolean {\n        return (char === DateChars.YearChar || char === DateChars.MonthChar || char === DateChars.DayChar);\n    }\n\n    private static getNumericFormatPrefix(formatType: string): string {\n        switch (formatType) {\n            case FormatDesc.TwoDigits: {\n                return '0';\n            }\n            case FormatDesc.Numeric: {\n                return DatePickerUtil.PROMPT_CHAR;\n            }\n        }\n    }\n\n    private static getMinMaxValue(dateFormatParts: any[], datePart, inputValue: string): any {\n        let maxValue, minValue;\n        switch (datePart.type) {\n            case DateParts.Month: {\n                minValue = 1;\n                maxValue = DatePickerUtil.NUMBER_OF_MONTHS;\n                break;\n            }\n            case DateParts.Day: {\n                minValue = 1;\n                maxValue = DatePickerUtil.daysInMonth(\n                    DatePickerUtil.getFullYearFromString(DatePickerUtil.getDateFormatPart(dateFormatParts, DateParts.Year), inputValue),\n                    parseInt(DatePickerUtil.getMonthValueFromInput(dateFormatParts, inputValue), 10));\n                break;\n            }\n            case DateParts.Year: {\n                if (datePart.formatType === FormatDesc.TwoDigits) {\n                    minValue = 0;\n                    maxValue = 99;\n                } else {\n                    // Infinite loop\n                    minValue = 'infinite';\n                    maxValue = 'infinite';\n                }\n                break;\n            }\n        }\n        return { min: minValue, max: maxValue };\n    }\n\n    private static getDateValueFromInput(dateFormatParts: any[], type: DateParts, inputValue: string, trim: boolean = true): string {\n        const partPosition = DatePickerUtil.getDateFormatPart(dateFormatParts, type).position;\n        const result = inputValue.substring(partPosition[0], partPosition[1]);\n        return (trim) ? DatePickerUtil.trimEmptyPlaceholders(result) : result;\n    }\n\n    private static getDayValueFromInput(dateFormatParts: any[], inputValue: string, trim: boolean = true): string {\n        return DatePickerUtil.getDateValueFromInput(dateFormatParts, DateParts.Day, inputValue, trim);\n    }\n\n    private static getMonthValueFromInput(dateFormatParts: any[], inputValue: string, trim: boolean = true): string {\n        return DatePickerUtil.getDateValueFromInput(dateFormatParts, DateParts.Month, inputValue, trim);\n    }\n\n    private static getYearValueFromInput(dateFormatParts: any[], inputValue: string, trim: boolean = true): string {\n        return DatePickerUtil.getDateValueFromInput(dateFormatParts, DateParts.Year, inputValue, trim);\n    }\n\n    private static getDateFormatPart(dateFormatParts: any[], type: DateParts): any {\n        const result = dateFormatParts.filter((datePart) => (datePart.type === type))[0];\n        return result;\n    }\n\n    private static isFullInput(value: any, input: string): boolean {\n        return (value !== '' && input.length === 2 && input.charAt(1) !== DatePickerUtil.PROMPT_CHAR);\n    }\n\n    private static isFullYearInput(dateFormatParts: any[], value: any): boolean {\n        switch (DatePickerUtil.getDateFormatPart(dateFormatParts, DateParts.Year).formatType) {\n            case FormatDesc.Numeric: {\n                return (value !== '' && value.length === 4);\n            }\n            case FormatDesc.TwoDigits: {\n                return (value !== '' && value.length === 2);\n            }\n            default: {\n                return false;\n            }\n        }\n    }\n\n    private static getDatePartOnPosition(dateFormatParts: any[], position: number) {\n        const result = dateFormatParts.filter((element) =>\n            element.position[0] <= position && position <= element.position[1] && element.type !== DatePickerUtil.SEPARATOR)[0];\n        return result;\n    }\n\n    private static getFullYearFromString(yearPart, inputValue): number {\n        return parseInt(inputValue.substring(yearPart.position[0], yearPart.position[1]), 10);\n    }\n\n    private static fillDatePartsPositions(dateArray: any[]): void {\n        let currentPos = 0;\n\n        for (let i = 0; i < dateArray.length; i++) {\n            // Day|Month part positions\n            if (dateArray[i].type === DateParts.Day || dateArray[i].type === DateParts.Month) {\n                // Offset 2 positions for number\n                dateArray[i].position = [currentPos, currentPos + 2];\n                currentPos += 2;\n            } else if (dateArray[i].type === DateParts.Year) {\n                // Year part positions\n                switch (dateArray[i].formatType) {\n                    case FormatDesc.Numeric: {\n                        // Offset 4 positions for full year\n                        dateArray[i].position = [currentPos, currentPos + 4];\n                        currentPos += 4;\n                        break;\n                    }\n                    case FormatDesc.TwoDigits: {\n                        // Offset 2 positions for short year\n                        dateArray[i].position = [currentPos, currentPos + 2];\n                        currentPos += 2;\n                        break;\n                    }\n                }\n            } else if (dateArray[i].type === DatePickerUtil.SEPARATOR) {\n                // Separator positions\n                dateArray[i].position = [currentPos, currentPos + 1];\n                currentPos++;\n            }\n        }\n    }\n}\n\n","import {\n  Directive, Input, ElementRef,\n  Renderer2, NgModule, Output, EventEmitter, Inject, LOCALE_ID, OnChanges, SimpleChanges, DoCheck\n} from '@angular/core';\nimport {\n  ControlValueAccessor,\n  Validator, AbstractControl, ValidationErrors, NG_VALIDATORS, NG_VALUE_ACCESSOR,\n} from '@angular/forms';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxMaskDirective } from '../mask/mask.directive';\nimport { MaskParsingService } from '../mask/mask-parsing.service';\nimport { KEYS } from '../../core/utils';\nimport {\n  DatePickerUtil\n} from '../../date-picker/date-picker.utils';\nimport { IgxDateTimeEditorEventArgs, DatePartInfo, DatePart } from './date-time-editor.common';\n\n/**\n * Date Time Editor provides a functionality to input, edit and format date and time.\n *\n * @igxModule IgxDateTimeEditorModule\n *\n * @igxParent IgxInputGroup\n *\n * @igxTheme igx-input-theme\n *\n * @igxKeywords date, time, editor\n *\n * @igxGroup Scheduling\n *\n * @remarks\n *\n * The Ignite UI Date Time Editor Directive makes it easy for developers to manipulate date/time user input.\n * It requires input in a specified or default input format which is visible in the input element as a placeholder.\n * It allows the input of only date (ex: 'dd/MM/yyyy'), only time (ex:'HH:mm tt') or both at once, if needed.\n * Supports display format that may differ from the input format.\n * Provides methods to increment and decrement any specific/targeted `DatePart`.\n *\n * @example\n * ```html\n * <igx-input-group>\n *   <input type=\"text\" igxInput [igxDateTimeEditor]=\"'dd/MM/yyyy'\" [displayFormat]=\"'shortDate'\" [(ngModel)]=\"date\"/>\n * </igx-input-group>\n * ```\n */\n@Directive({\n  selector: '[igxDateTimeEditor]',\n  exportAs: 'igxDateTimeEditor',\n  providers: [\n    { provide: NG_VALUE_ACCESSOR, useExisting: IgxDateTimeEditorDirective, multi: true },\n    { provide: NG_VALIDATORS, useExisting: IgxDateTimeEditorDirective, multi: true }\n  ]\n})\nexport class IgxDateTimeEditorDirective extends IgxMaskDirective implements OnChanges, DoCheck, Validator, ControlValueAccessor {\n  /**\n   * Locale settings used for value formatting.\n   *\n   * @remarks\n   * Uses Angular's `LOCALE_ID` by default. Affects both input mask and display format if those are not set.\n   * If a `locale` is set, it must be registered via `registerLocaleData`.\n   * Please refer to https://angular.io/guide/i18n#i18n-pipes.\n   * If it is not registered, `Intl` will be used for formatting.\n   *\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [locale]=\"'en'\">\n   * ```\n   */\n  @Input()\n  public locale: string;\n\n  /**\n   * Minimum value required for the editor to remain valid.\n   *\n   * @remarks\n   * If a `string` value is passed, it must be in the defined input format.\n   *\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [minValue]=\"minDate\">\n   * ```\n   */\n  public get minValue(): string | Date {\n    return this._minValue;\n  }\n\n  @Input()\n  public set minValue(value: string | Date) {\n    this._minValue = value;\n    this.onValidatorChange();\n  }\n\n  /**\n   * Maximum value required for the editor to remain valid.\n   *\n   * @remarks\n   * If a `string` value is passed in, it must be in the defined input format.\n   *\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [maxValue]=\"maxDate\">\n   * ```\n   */\n  public get maxValue(): string | Date {\n    return this._maxValue;\n  }\n\n  @Input()\n  public set maxValue(value: string | Date) {\n    this._maxValue = value;\n    this.onValidatorChange();\n  }\n\n  /**\n   * Specify if the currently spun date segment should loop over.\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [isSpinLoop]=\"false\">\n   * ```\n   */\n  @Input()\n  public isSpinLoop = true;\n\n  /**\n   * Set both pre-defined format options such as `shortDate` and `longDate`,\n   * as well as constructed format string using characters supported by `DatePipe`, e.g. `EE/MM/yyyy`.\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [displayFormat]=\"'shortDate'\">\n   * ```\n   */\n  @Input()\n  public displayFormat: string;\n\n  /**\n   * Expected user input format (and placeholder).\n   * @example\n   * ```html\n   * <input [igxDateTimeEditor]=\"'dd/MM/yyyy'\">\n   * ```\n   */\n  @Input(`igxDateTimeEditor`)\n  public set inputFormat(value: string) {\n    if (value) {\n      this._format = value;\n    }\n    const mask = (this.inputFormat || DatePickerUtil.DEFAULT_INPUT_FORMAT)\n      .replace(new RegExp(/(?=[^t])[\\w]/, 'g'), '0');\n    this.mask = mask.indexOf('tt') !== -1 ? mask.replace(new RegExp('tt', 'g'), 'LL') : mask;\n  }\n\n  public get inputFormat(): string {\n    return this._format;\n  }\n\n  /**\n   * Editor value.\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [value]=\"date\">\n   * ```\n   */\n  @Input()\n  public set value(value: Date) {\n    this._value = value;\n    this.onChangeCallback(value);\n    this.updateMask();\n  }\n\n  public get value(): Date {\n    return this._value;\n  }\n\n  /**\n   * Emitted when the editor's value has changed.\n   * @example\n   * ```html\n   * <input igxDateTimeEditor (valueChange)=\"onValueChanged($event)\"/>\n   * ```\n   */\n  @Output()\n  public valueChange = new EventEmitter<Date>();\n\n  /**\n   * Emitted when the editor is not within a specified range or when the editor's value is in an invalid state.\n   * @example\n   * ```html\n   * <input igxDateTimeEditor [minValue]=\"minDate\" [maxValue]=\"maxDate\" (validationFailed)=\"onValidationFailed($event)\"/>\n   * ```\n   */\n  @Output()\n  public validationFailed = new EventEmitter<IgxDateTimeEditorEventArgs>();\n\n  private _value: Date;\n  private _format: string;\n  private document: Document;\n  private _isFocused: boolean;\n  private _inputFormat: string;\n  private _minValue: string | Date;\n  private _maxValue: string | Date;\n  private _oldValue: Date | string;\n  private _inputDateParts: DatePartInfo[];\n  private onTouchCallback = (...args: any[]) => { };\n  private onChangeCallback = (...args: any[]) => { };\n  private onValidatorChange = (...args: any[]) => { };\n\n  private get emptyMask(): string {\n    return this.maskParser.applyMask(null, this.maskOptions);\n  }\n\n  private get targetDatePart(): DatePart {\n    if (this.document.activeElement === this.nativeElement) {\n      return this._inputDateParts\n        .find(p => p.start <= this.selectionStart && this.selectionStart <= p.end && p.type !== DatePart.Literal)?.type;\n    } else {\n      if (this._inputDateParts.some(p => p.type === DatePart.Date)) {\n        return DatePart.Date;\n      } else if (this._inputDateParts.some(p => p.type === DatePart.Hours)) {\n        return DatePart.Hours;\n      }\n    }\n  }\n\n  private get hasDateParts() {\n    return this._inputDateParts.some(\n      p => p.type === DatePart.Date\n        || p.type === DatePart.Month\n        || p.type === DatePart.Year);\n  }\n\n  private get hasTimeParts() {\n    return this._inputDateParts.some(\n      p => p.type === DatePart.Hours\n        || p.type === DatePart.Minutes\n        || p.type === DatePart.Seconds);\n  }\n\n  constructor(\n    protected renderer: Renderer2,\n    protected elementRef: ElementRef,\n    protected maskParser: MaskParsingService,\n    @Inject(DOCUMENT) private _document: any,\n    @Inject(LOCALE_ID) private _locale: any) {\n    super(elementRef, maskParser, renderer);\n    this.document = this._document as Document;\n    this.locale = this.locale || this._locale;\n  }\n\n  /** @hidden @internal */\n  public ngOnChanges(changes: SimpleChanges) {\n    if (changes['inputFormat'] || changes['locale']) {\n      this.updateInputFormat();\n    }\n  }\n\n  /** @hidden @internal */\n  public ngDoCheck(): void {\n    if (this._inputFormat !== this.inputFormat) {\n      this.updateInputFormat();\n    }\n  }\n\n  /** Clear the input element value. */\n  public clear(): void {\n    this.updateValue(null);\n  }\n\n  /**\n   * Increment specified DatePart.\n   * @param datePart The optional DatePart to increment. Defaults to Date or Hours(when Date is absent from the inputFormat - ex:'HH:mm').\n   */\n  public increment(datePart?: DatePart): void {\n    const targetDatePart = this.targetDatePart;\n    if (!targetDatePart) { return; }\n    const newValue = datePart\n      ? this.spinValue(datePart, 1)\n      : this.spinValue(targetDatePart, 1);\n    this.updateValue(newValue ? newValue : new Date());\n  }\n\n  /**\n   * Decrement specified DatePart.\n   *\n   * @param datePart The optional DatePart to decrement. Defaults to Date or Hours(when Date is absent from the inputFormat - ex:'HH:mm').\n   */\n  public decrement(datePart?: DatePart): void {\n    const targetDatePart = this.targetDatePart;\n    if (!targetDatePart) { return; }\n    const newValue = datePart\n      ? this.spinValue(datePart, -1)\n      : this.spinValue(targetDatePart, -1);\n    this.updateValue(newValue ? newValue : new Date());\n  }\n\n  /** @hidden @internal */\n  public writeValue(value: any): void {\n    this._value = value;\n    this.updateMask();\n  }\n\n  /** @hidden @internal */\n  public validate(control: AbstractControl): ValidationErrors | null {\n    if (!this.inputIsComplete() || !control.value) {\n      return { 'value': true };\n    }\n\n    const maxValueAsDate = this.isDate(this.maxValue) ? this.maxValue : this.parseDate(this.maxValue);\n    const minValueAsDate = this.isDate(this.minValue) ? this.minValue : this.parseDate(this.minValue);\n    if (minValueAsDate\n      && DatePickerUtil.lessThanMinValue(\n        control.value, minValueAsDate, this.hasTimeParts, this.hasDateParts)) {\n      return { 'minValue': true };\n    }\n    if (maxValueAsDate\n      && DatePickerUtil.greaterThanMaxValue(\n        control.value, maxValueAsDate, this.hasTimeParts, this.hasDateParts)) {\n      return { 'maxValue': true };\n    }\n\n    return null;\n  }\n\n  /** @hidden @internal */\n  public registerOnValidatorChange?(fn: () => void): void { this.onValidatorChange = fn; }\n\n  /** @hidden @internal */\n  public registerOnChange(fn: any): void { this.onChangeCallback = fn; }\n\n  /** @hidden @internal */\n  public registerOnTouched(fn: any): void { this.onTouchCallback = fn; }\n\n  /** @hidden @internal */\n  public setDisabledState?(isDisabled: boolean): void { }\n\n  /** @hidden @internal */\n  public onInputChanged() {\n    super.onInputChanged();\n    if (this.inputIsComplete()) {\n      const parsedDate = this.parseDate(this.inputValue);\n      if (this.isValidDate(parsedDate)) {\n        this.updateValue(parsedDate);\n      } else {\n        const oldValue = this.value && new Date(this.value.getTime());\n        const args = { oldValue: oldValue, newValue: parsedDate, userInput: this.inputValue };\n        this.validationFailed.emit(args);\n        if (args.newValue?.getTime && args.newValue.getTime() !== oldValue.getTime()) {\n          this.updateValue(args.newValue);\n        } else {\n          this.updateValue(null);\n        }\n      }\n    } else {\n      this.updateValue(null);\n    }\n  }\n\n  /** @hidden @internal */\n  public onKeyDown(event: KeyboardEvent): void {\n    super.onKeyDown(event);\n    if (event.altKey) { return; }\n    if (event.key === KEYS.UP_ARROW || event.key === KEYS.UP_ARROW_IE ||\n      event.key === KEYS.DOWN_ARROW || event.key === KEYS.DOWN_ARROW_IE) {\n      this.spin(event);\n      return;\n    }\n\n    if (event.ctrlKey && event.key === KEYS.SEMICOLON) {\n      this.updateValue(new Date());\n    }\n\n    this.moveCursor(event);\n  }\n\n  /** @hidden @internal */\n  public onFocus(): void {\n    this._isFocused = true;\n    this.onTouchCallback();\n    this.updateMask();\n    super.onFocus();\n  }\n\n  /** @hidden @internal */\n  public onBlur(value: string): void {\n    this._isFocused = false;\n    if (!this.inputIsComplete() && this.inputValue !== this.emptyMask) {\n      this.updateValue(this.parseDate(this.inputValue));\n    } else {\n      this.updateMask();\n    }\n\n    super.onBlur(value);\n  }\n\n  /** @hidden @internal */\n  public updateMask(): void {\n    if (this._isFocused) {\n      if (!this.value) { return; }\n      // store the cursor position as it will be moved during masking\n      const cursor = this.selectionEnd;\n      this.inputValue = this.getMaskedValue();\n      this.setSelectionRange(cursor);\n    } else {\n      if (!this.value || !this.isValidDate(this.value)) {\n        this.inputValue = '';\n        return;\n      }\n      const format = this.displayFormat || this.inputFormat;\n      if (format) {\n        this.inputValue = DatePickerUtil.formatDate(this.value, format.replace('tt', 'aa'), this.locale);\n      } else {\n        // TODO: formatter function?\n        this.inputValue = this.value.toLocaleString();\n      }\n    }\n  }\n\n  private getMaskedValue(): string {\n    let mask = this.emptyMask;\n    for (const part of this._inputDateParts) {\n      if (part.type === DatePart.Literal) { continue; }\n      const targetValue = this.getPartValue(part, part.format.length);\n      mask = this.maskParser.replaceInMask(mask, targetValue, this.maskOptions, part.start, part.end).value;\n    }\n\n    return mask;\n  }\n\n  private updateInputFormat(): void {\n    const defPlaceholder = this.inputFormat || DatePickerUtil.getDefaultInputFormat(this.locale);\n    this._inputDateParts = DatePickerUtil.parseDateTimeFormat(this.inputFormat);\n    this.inputFormat = this._inputDateParts.map(p => p.format).join('');\n    if (!this.nativeElement.placeholder || this._inputFormat !== this.inputFormat) {\n      this.renderer.setAttribute(this.nativeElement, 'placeholder', defPlaceholder);\n    }\n    // TODO: fill in partial dates?\n    this.updateMask();\n    this._inputFormat = this.inputFormat;\n  }\n\n  // TODO: move isDate to utils\n  private isDate(value: any): value is Date {\n    return value instanceof Date && typeof value === 'object';\n  }\n\n  private valueInRange(value: Date): boolean {\n    if (!value) { return false; }\n    const maxValueAsDate = this.isDate(this.maxValue) ? this.maxValue : this.parseDate(this.maxValue);\n    const minValueAsDate = this.isDate(this.minValue) ? this.minValue : this.parseDate(this.minValue);\n    if (minValueAsDate\n      && DatePickerUtil.lessThanMinValue(\n        value, minValueAsDate, this.hasTimeParts, this.hasDateParts)) {\n      return false;\n    }\n    if (maxValueAsDate\n      && DatePickerUtil.greaterThanMaxValue(\n        value, maxValueAsDate, this.hasTimeParts, this.hasDateParts)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  private spinValue(datePart: DatePart, delta: number): Date {\n    if (!this.value || !this.isValidDate(this.value)) { return null; }\n    const newDate = new Date(this.value.getTime());\n    switch (datePart) {\n      case DatePart.Date:\n        DatePickerUtil.spinDate(delta, newDate, this.isSpinLoop);\n        break;\n      case DatePart.Month:\n        DatePickerUtil.spinMonth(delta, newDate, this.isSpinLoop);\n        break;\n      case DatePart.Year:\n        DatePickerUtil.spinYear(delta, newDate);\n        break;\n      case DatePart.Hours:\n        DatePickerUtil.spinHours(delta, newDate, this.isSpinLoop);\n        break;\n      case DatePart.Minutes:\n        DatePickerUtil.spinMinutes(delta, newDate, this.isSpinLoop);\n        break;\n      case DatePart.Seconds:\n        DatePickerUtil.spinSeconds(delta, newDate, this.isSpinLoop);\n        break;\n      case DatePart.AmPm:\n        const formatPart = this._inputDateParts.find(dp => dp.type === DatePart.AmPm);\n        const amPmFromMask = this.inputValue.substring(formatPart.start, formatPart.end);\n        return DatePickerUtil.spinAmPm(newDate, this.value, amPmFromMask);\n    }\n\n    return newDate;\n  }\n\n  private updateValue(newDate: Date): void {\n    this._oldValue = this.value;\n    this.value = newDate;\n\n    if (this.value && !this.valueInRange(this.value)) {\n      this.validationFailed.emit({ oldValue: this._oldValue, newValue: this.value, userInput: this.inputValue });\n    }\n    if (this.inputIsComplete() || this.inputValue === this.emptyMask) {\n      this.valueChange.emit(this.value);\n    }\n  }\n\n  private toTwelveHourFormat(value: string): number {\n    let hour = parseInt(value.replace(new RegExp(this.promptChar, 'g'), '0'), 10);\n    if (hour > 12) {\n      hour -= 12;\n    } else if (hour === 0) {\n      hour = 12;\n    }\n\n    return hour;\n  }\n\n  private getPartValue(datePartInfo: DatePartInfo, partLength: number): string {\n    let maskedValue;\n    const datePart = datePartInfo.type;\n    switch (datePart) {\n      case DatePart.Date:\n        maskedValue = this.value.getDate();\n        break;\n      case DatePart.Month:\n        // months are zero based\n        maskedValue = this.value.getMonth() + 1;\n        break;\n      case DatePart.Year:\n        if (partLength === 2) {\n          maskedValue = this.prependValue(\n            parseInt(this.value.getFullYear().toString().slice(-2), 10), partLength, '0');\n        } else {\n          maskedValue = this.value.getFullYear();\n        }\n        break;\n      case DatePart.Hours:\n        if (datePartInfo.format.indexOf('h') !== -1) {\n          maskedValue = this.prependValue(\n            this.toTwelveHourFormat(this.value.getHours().toString()), partLength, '0');\n        } else {\n          maskedValue = this.value.getHours();\n        }\n        break;\n      case DatePart.Minutes:\n        maskedValue = this.value.getMinutes();\n        break;\n      case DatePart.Seconds:\n        maskedValue = this.value.getSeconds();\n        break;\n      case DatePart.AmPm:\n        maskedValue = this.value.getHours() >= 12 ? 'PM' : 'AM';\n        break;\n    }\n\n    if (datePartInfo.type !== DatePart.AmPm) {\n      return this.prependValue(maskedValue, partLength, '0');\n    }\n\n    return maskedValue;\n  }\n\n  private prependValue(value: number, partLength: number, prependChar: string): string {\n    return (prependChar + value.toString()).slice(-partLength);\n  }\n\n  private spin(event: KeyboardEvent): void {\n    event.preventDefault();\n    switch (event.key) {\n      case KEYS.UP_ARROW:\n      case KEYS.UP_ARROW_IE:\n        this.increment();\n        break;\n      case KEYS.DOWN_ARROW:\n      case KEYS.DOWN_ARROW_IE:\n        this.decrement();\n        break;\n    }\n  }\n\n  private inputIsComplete(): boolean {\n    return this.inputValue.indexOf(this.promptChar) === -1;\n  }\n\n  private isValidDate(date: Date): boolean {\n    return date && date.getTime && !isNaN(date.getTime());\n  }\n\n  // TODO: move parseDate to utils\n  public parseDate(val: string): Date | null {\n    if (!val) { return null; }\n    return DatePickerUtil.parseValueFromMask(val, this._inputDateParts, this.promptChar);\n  }\n\n  private moveCursor(event: KeyboardEvent): void {\n    const value = (event.target as HTMLInputElement).value;\n    switch (event.key) {\n      case KEYS.LEFT_ARROW:\n      case KEYS.LEFT_ARROW_IE:\n        if (event.ctrlKey) {\n          event.preventDefault();\n          this.setSelectionRange(this.getNewPosition(value));\n        }\n        break;\n      case KEYS.RIGHT_ARROW:\n      case KEYS.RIGHT_ARROW_IE:\n        if (event.ctrlKey) {\n          event.preventDefault();\n          this.setSelectionRange(this.getNewPosition(value, 1));\n        }\n        break;\n    }\n  }\n\n  /**\n   * Move the cursor in a specific direction until it reaches a date/time separator.\n   * Then return its index.\n   *\n   * @param value The string it operates on.\n   * @param direction 0 is left, 1 is right. Default is 0.\n   */\n  private getNewPosition(value: string, direction = 0): number {\n    const literals = this._inputDateParts.filter(p => p.type === DatePart.Literal);\n    let cursorPos = this.selectionStart;\n    if (!direction) {\n      do {\n        cursorPos = cursorPos > 0 ? --cursorPos : cursorPos;\n      } while (!literals.some(l => l.end === cursorPos) && cursorPos > 0);\n      return cursorPos;\n    } else {\n      do {\n        cursorPos++;\n      } while (!literals.some(l => l.start === cursorPos) && cursorPos < value.length);\n      return cursorPos;\n    }\n  }\n}\n\n@NgModule({\n  declarations: [IgxDateTimeEditorDirective],\n  exports: [IgxDateTimeEditorDirective]\n})\nexport class IgxDateTimeEditorModule { }\n","/**\n * Provides base filtering operations\n * Implementations should be Singleton\n *\n * @export\n */\nexport class IgxFilteringOperand {\n    protected static _instance: IgxFilteringOperand = null;\n    public operations: IFilteringOperation[];\n\n    public constructor() {\n        this.operations = [{\n            name: 'null',\n            isUnary: true,\n            iconName: 'is-null',\n            logic: (target: any) => {\n                return target === null;\n            }\n        }, {\n            name: 'notNull',\n            isUnary: true,\n            iconName: 'is-not-null',\n            logic: (target: any) => {\n                return target !== null;\n            }\n        }, {\n            name: 'in',\n            isUnary: false,\n            iconName: 'is-in',\n            hidden: true,\n            logic: (target: any, searchVal: Set<any>) => {\n                return this.findValueInSet(target, searchVal);\n            }\n        }];\n    }\n\n    public static instance(): IgxFilteringOperand {\n        return this._instance || (this._instance = new this());\n    }\n\n    /**\n     * @hidden\n     */\n    protected findValueInSet(target: any, searchVal: Set<any>) {\n        return searchVal.has(target);\n    }\n\n    /**\n     * Returns an array of names of the conditions which are visible in the UI\n     */\n    public conditionList(): string[] {\n        return this.operations.filter(f => !f.hidden).map((element) => element.name);\n    }\n\n    /**\n     * Returns an instance of the condition with the specified name.\n     * @param name The name of the condition.\n     */\n    public condition(name: string): IFilteringOperation {\n        return this.operations.find((element) => element.name === name);\n    }\n\n    /**\n     * Adds a new condition to the filtering operations.\n     * @param operation The filtering operation.\n     */\n    public append(operation: IFilteringOperation) {\n        this.operations.push(operation);\n    }\n}\n\n/**\n * Provides filtering operations for booleans\n *\n * @export\n */\nexport class IgxBooleanFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'all',\n            isUnary: true,\n            iconName: 'select-all',\n            logic: (target: boolean) => {\n                return true;\n            }\n        }, {\n            name: 'true',\n            isUnary: true,\n            iconName: 'is-true',\n            logic: (target: boolean) => {\n                return !!(target && target !== null && target !== undefined);\n            }\n        }, {\n            name: 'false',\n            isUnary: true,\n            iconName: 'is-false',\n            logic: (target: boolean) => {\n                return !target && target !== null && target !== undefined;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'is-empty',\n            logic: (target: boolean) => {\n                return target === null || target === undefined;\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not-empty',\n            logic: (target: boolean) => {\n                return target !== null && target !== undefined;\n            }\n        }].concat(this.operations);\n    }\n}\n\n/**\n * Provides filtering operations for Dates\n *\n * @export\n */\nexport class IgxDateFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'equals',\n            isUnary: false,\n            iconName: 'equals',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const targetp = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const searchp = IgxDateFilteringOperand.getDateParts(searchVal, 'yMd');\n                return targetp.year === searchp.year &&\n                    targetp.month === searchp.month &&\n                    targetp.day === searchp.day;\n            }\n        }, {\n            name: 'doesNotEqual',\n            isUnary: false,\n            iconName: 'not-equal',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return true;\n                }\n\n                this.validateInputData(target);\n\n                const targetp = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const searchp = IgxDateFilteringOperand.getDateParts(searchVal, 'yMd');\n                return targetp.year !== searchp.year ||\n                    targetp.month !== searchp.month ||\n                    targetp.day !== searchp.day;\n            }\n        }, {\n            name: 'before',\n            isUnary: false,\n            iconName: 'is-before',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                return target < searchVal;\n            }\n        }, {\n            name: 'after',\n            isUnary: false,\n            iconName: 'is-after',\n            logic: (target: Date, searchVal: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                return target > searchVal;\n            }\n        }, {\n            name: 'today',\n            isUnary: true,\n            iconName: 'today',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yMd');\n                return d.year === now.year &&\n                    d.month === now.month &&\n                    d.day === now.day;\n            }\n        }, {\n            name: 'yesterday',\n            isUnary: true,\n            iconName: 'yesterday',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const td = IgxDateFilteringOperand.getDateParts(target, 'yMd');\n                const y = ((d) => new Date(d.setDate(d.getDate() - 1)))(new Date());\n                const yesterday = IgxDateFilteringOperand.getDateParts(y, 'yMd');\n                return td.year === yesterday.year &&\n                    td.month === yesterday.month &&\n                    td.day === yesterday.day;\n            }\n        }, {\n            name: 'thisMonth',\n            isUnary: true,\n            iconName: 'this-month',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yM');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yM');\n                return d.year === now.year &&\n                    d.month === now.month;\n            }\n        }, {\n            name: 'lastMonth',\n            isUnary: true,\n            iconName: 'last-month',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yM');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yM');\n                if (!now.month) {\n                    now.month = 11;\n                    now.year -= 1;\n                } else {\n                    now.month--;\n                }\n                return d.year === now.year &&\n                    d.month === now.month;\n            }\n        }, {\n            name: 'nextMonth',\n            isUnary: true,\n            iconName: 'next-month',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'yM');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'yM');\n                if (now.month === 11) {\n                    now.month = 0;\n                    now.year += 1;\n                } else {\n                    now.month++;\n                }\n                return d.year === now.year &&\n                    d.month === now.month;\n            }\n        }, {\n            name: 'thisYear',\n            isUnary: true,\n            iconName: 'this-year',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'y');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'y');\n                return d.year === now.year;\n            }\n        }, {\n            name: 'lastYear',\n            isUnary: true,\n            iconName: 'last-year',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'y');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'y');\n                return d.year === now.year - 1;\n            }\n        }, {\n            name: 'nextYear',\n            isUnary: true,\n            iconName: 'next-year',\n            logic: (target: Date) => {\n                if (!target) {\n                    return false;\n                }\n\n                this.validateInputData(target);\n\n                const d = IgxDateFilteringOperand.getDateParts(target, 'y');\n                const now = IgxDateFilteringOperand.getDateParts(new Date(), 'y');\n                return d.year === now.year + 1;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'is-empty',\n            logic: (target: Date) => {\n                return target === null || target === undefined;\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not-empty',\n            logic: (target: Date) => {\n                return target !== null && target !== undefined;\n            }\n        }].concat(this.operations);\n    }\n\n    /**\n     * Splits a Date object into parts\n     *\n     * @memberof IgxDateFilteringOperand\n     */\n    public static getDateParts(date: Date, dateFormat?: string): IDateParts {\n        const res = {\n            day: null,\n            hours: null,\n            milliseconds: null,\n            minutes: null,\n            month: null,\n            seconds: null,\n            year: null\n        };\n        if (!date || !dateFormat) {\n            return res;\n        }\n        if (dateFormat.indexOf('y') >= 0) {\n            res.year = date.getFullYear();\n        }\n        if (dateFormat.indexOf('M') >= 0) {\n            res.month = date.getMonth();\n        }\n        if (dateFormat.indexOf('d') >= 0) {\n            res.day = date.getDate();\n        }\n        if (dateFormat.indexOf('h') >= 0) {\n            res.hours = date.getHours();\n        }\n        if (dateFormat.indexOf('m') >= 0) {\n            res.minutes = date.getMinutes();\n        }\n        if (dateFormat.indexOf('s') >= 0) {\n            res.seconds = date.getSeconds();\n        }\n        if (dateFormat.indexOf('f') >= 0) {\n            res.milliseconds = date.getMilliseconds();\n        }\n        return res;\n    }\n\n    private validateInputData(target: Date) {\n        if (!(target instanceof Date)) {\n            throw new Error('Could not perform filtering on \\'date\\' column because the datasource object type is not \\'Date\\'.');\n        }\n    }\n\n    protected findValueInSet(target: any, searchVal: Set<any>) {\n        if (!target) { return false; }\n        return searchVal.has(target.toISOString());\n    }\n}\n\n/**\n * Provides filtering operations for numbers\n *\n * @export\n */\nexport class IgxNumberFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'equals',\n            isUnary: false,\n            iconName: 'equals',\n            logic: (target: number, searchVal: number) => {\n                return target === searchVal;\n            }\n        }, {\n            name: 'doesNotEqual',\n            isUnary: false,\n            iconName: 'not-equal',\n            logic: (target: number, searchVal: number) => {\n                return target !== searchVal;\n            }\n        }, {\n            name: 'greaterThan',\n            isUnary: false,\n            iconName: 'greater-than',\n            logic: (target: number, searchVal: number) => {\n                return target > searchVal;\n            }\n        }, {\n            name: 'lessThan',\n            isUnary: false,\n            iconName: 'less-than',\n            logic: (target: number, searchVal: number) => {\n                return target < searchVal;\n            }\n        }, {\n            name: 'greaterThanOrEqualTo',\n            isUnary: false,\n            iconName: 'greater-than-or-equal',\n            logic: (target: number, searchVal: number) => {\n                return target >= searchVal;\n            }\n        }, {\n            name: 'lessThanOrEqualTo',\n            isUnary: false,\n            iconName: 'less-than-or-equal',\n            logic: (target: number, searchVal: number) => {\n                return target <= searchVal;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'is-empty',\n            logic: (target: number) => {\n                return target === null || target === undefined || isNaN(target);\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not-empty',\n            logic: (target: number) => {\n                return target !== null && target !== undefined && !isNaN(target);\n            }\n        }].concat(this.operations);\n    }\n}\n\n/**\n * Provides filtering operations for strings\n *\n * @export\n */\nexport class IgxStringFilteringOperand extends IgxFilteringOperand {\n    protected constructor() {\n        super();\n        this.operations = [{\n            name: 'contains',\n            isUnary: false,\n            iconName: 'contains',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.indexOf(search) !== -1;\n            }\n        }, {\n            name: 'doesNotContain',\n            isUnary: false,\n            iconName: 'does-not-contain',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.indexOf(search) === -1;\n            }\n        }, {\n            name: 'startsWith',\n            isUnary: false,\n            iconName: 'starts-with',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.startsWith(search);\n            }\n        }, {\n            name: 'endsWith',\n            isUnary: false,\n            iconName: 'ends-with',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target.endsWith(search);\n            }\n        }, {\n            name: 'equals',\n            isUnary: false,\n            iconName: 'equals',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target === search;\n            }\n        }, {\n            name: 'doesNotEqual',\n            isUnary: false,\n            iconName: 'not-equal',\n            logic: (target: string, searchVal: string, ignoreCase?: boolean) => {\n                const search = IgxStringFilteringOperand.applyIgnoreCase(searchVal, ignoreCase);\n                target = IgxStringFilteringOperand.applyIgnoreCase(target, ignoreCase);\n                return target !== search;\n            }\n        }, {\n            name: 'empty',\n            isUnary: true,\n            iconName: 'is-empty',\n            logic: (target: string) => {\n                return target === null || target === undefined || target.length === 0;\n            }\n        }, {\n            name: 'notEmpty',\n            isUnary: true,\n            iconName: 'not-empty',\n            logic: (target: string) => {\n                return target !== null && target !== undefined && target.length > 0;\n            }\n        }].concat(this.operations);\n    }\n\n    /**\n     * Applies case sensitivity on strings if provided\n     *\n     * @memberof IgxStringFilteringOperand\n     */\n    public static applyIgnoreCase(a: string, ignoreCase: boolean): string {\n        a = a || '';\n        // bulletproof\n        return ignoreCase ? ('' + a).toLowerCase() : a;\n    }\n}\n\n/**\n * Interface describing filtering operations\n *\n * @export\n */\nexport interface IFilteringOperation {\n    name: string;\n    isUnary: boolean;\n    iconName: string;\n    hidden?: boolean;\n    logic: (value: any, searchVal?: any, ignoreCase?: boolean) => boolean;\n}\n\n/**\n * Interface describing Date object in parts\n *\n * @export\n */\nexport interface IDateParts {\n    year: number;\n    month: number;\n    day: number;\n    hours: number;\n    minutes: number;\n    seconds: number;\n    milliseconds: number;\n}\n","import { IFilteringExpressionsTree } from './filtering-expressions-tree';\nimport { FilteringStrategy, IFilteringStrategy } from './filtering-strategy';\n\nexport const filteringStateDefaults = {\n    strategy: new FilteringStrategy()\n};\n\nexport declare interface IFilteringState {\n    expressionsTree: IFilteringExpressionsTree;\n    advancedExpressionsTree?: IFilteringExpressionsTree;\n    strategy?: IFilteringStrategy;\n}\n","import { ISortingExpression } from './sorting-expression.interface';\nimport { IgxColumnComponent } from '../grids/columns/column.component';\n\n/**\n * @hidden\n */\nexport class GroupedRecords extends Array<any> {}\n\nexport interface IGroupByRecord {\n    expression: ISortingExpression;\n    level: number;\n    records: GroupedRecords;\n    value: any;\n    groupParent: IGroupByRecord;\n    groups?: IGroupByRecord[];\n    height: number;\n    column?: IgxColumnComponent;\n }\n","import { Component, Input, TemplateRef, ViewChild, Output, EventEmitter, ElementRef } from '@angular/core';\n@Component({\n    selector: 'igx-grid-action-button',\n    templateUrl: 'grid-action-button.component.html'\n})\n\nexport class IgxGridActionButtonComponent {\n\n    @ViewChild('container')\n    public container: ElementRef;\n\n    /**\n     * Event emitted when action button is clicked.\n     * @example\n     * ```html\n     *  <igx-grid-action-button (onActionClick)=\"startEdit($event)\"></igx-grid-action-button>\n     * ```\n     */\n    @Output()\n    onActionClick = new EventEmitter<Event>();\n\n    /**\n     * Reference to the current template.\n     * @hidden\n     * @internal\n     */\n    @ViewChild(TemplateRef)\n    public templateRef: TemplateRef<any>;\n\n    /**\n     * Whether button action is rendered in menu and should container text label.\n     */\n    @Input()\n    public asMenuItem = false;\n\n    /**\n     * Name of the icon to display in the button.\n     */\n    @Input()\n    public iconName: string;\n\n    /**\n     * Additional Menu item container element classes.\n     */\n    @Input()\n    public classNames: string;\n\n    /** @hidden @internal */\n    get containerClass(): string {\n        return 'igx-action-strip__menu-button ' + (this.classNames || '');\n    }\n\n    /**\n     * The name of the icon set. Used in case the icon is from a different icon set.\n     */\n    @Input()\n    public iconSet: string;\n\n    /**\n     * The text of the label.\n     */\n    @Input()\n    public labelText: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public handleClick(event) {\n       this.onActionClick.emit(event);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public preventEvent(event) {\n        if (event) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }\n}\n","import {\n    Component,\n    Directive,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Provider,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { CheckboxRequiredValidator, ControlValueAccessor, NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { isIE, IBaseEventArgs, mkenum } from '../core/utils';\nimport { EditorProvider } from '../core/edit-provider';\n\nexport const LabelPosition = mkenum({\n    BEFORE: 'before',\n    AFTER: 'after'\n});\nexport type LabelPosition = (typeof LabelPosition)[keyof typeof LabelPosition];\n\nexport interface IChangeCheckboxEventArgs extends IBaseEventArgs {\n    checked: boolean;\n    checkbox: IgxCheckboxComponent;\n}\n\nconst noop = () => { };\nlet nextId = 0;\n/**\n * Allows users to make a binary choice for a certain condition.\n *\n * @igxModule IgxCheckboxModule\n *\n * @igxTheme igx-checkbox-theme\n *\n * @igxKeywords checkbox, label\n *\n * @igxGroup Data entry and display\n *\n * @remarks\n * The Ignite UI Checkbox is a selection control that allows users to make a binary choice for a certain condition.It behaves similarly\n * to the native browser checkbox.\n *\n * @example\n * ```html\n * <igx-checkbox checked=\"true\">\n *   simple checkbox\n * </igx-checkbox>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxCheckboxComponent, multi: true }],\n    selector: 'igx-checkbox',\n    preserveWhitespaces: false,\n    templateUrl: 'checkbox.component.html'\n})\nexport class IgxCheckboxComponent implements ControlValueAccessor, EditorProvider {\n    /**\n     * @hidden\n     */\n    protected _value: any;\n    /**\n     * Returns reference to the native checkbox element.\n     *\n     * @example\n     * ```typescript\n     * let checkboxElement =  this.checkbox.checkboxElement;\n     * ```\n     */\n    @ViewChild('checkbox', { static: true }) public nativeCheckbox: ElementRef;\n    /**\n     * Returns reference to the native label element.\n     * ```typescript\n     *\n     * @example\n     * let labelElement =  this.checkbox.nativeLabel;\n     * ```\n     */\n    @ViewChild('label', { static: true }) public nativeLabel;\n    /**\n     * Returns reference to the label placeholder element.\n     * ```typescript\n     *\n     * @example\n     * let labelPlaceholder =  this.checkbox.placeholderLabel;\n     * ```\n     */\n    @ViewChild('placeholderLabel', { static: true }) public placeholderLabel;\n    /**\n     * Sets/gets the `id` of the checkbox component.\n     * If not set, the `id` of the first checkbox component will be `\"igx-checkbox-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox id=\"my-first-checkbox\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let checkboxId =  this.checkbox.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-checkbox-${nextId++}`;\n    /**\n     * Sets/gets the id of the `label` element.\n     * If not set, the id of the `label` in the first checkbox component will be `\"igx-checkbox-0-label\"`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox labelId = \"Label1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let labelId =  this.checkbox.labelId;\n     * ```\n     */\n    @Input() public labelId = `${this.id}-label`;\n    /**\n     * Sets/gets the `value` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [value] = \"'CheckboxValue'\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let value =  this.checkbox.value;\n     * ```\n     */\n    @Input() public value: any;\n    /**\n     * Sets/gets the `name` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox name = \"Checkbox1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let name =  this.checkbox.name;\n     * ```\n     */\n    @Input() public name: string;\n    /**\n     * Sets/gets the value of the `tabindex` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [tabindex] = \"1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let tabIndex =  this.checkbox.tabindex;\n     * ```\n     */\n    @Input() public tabindex: number = null;\n    /**\n     *  Sets/gets the position of the `label`.\n     *  If not set, the `labelPosition` will have value `\"after\"`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox labelPosition = \"before\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let labelPosition =  this.checkbox.labelPosition;\n     * ```\n     */\n    @Input() public labelPosition: LabelPosition | string = LabelPosition.AFTER;\n    /**\n     * Enables/Disables the ripple effect.\n     * If not set, `disableRipple` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [disableRipple] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isRippleDisabled = this.checkbox.desableRipple;\n     * ```\n     */\n    @Input() public disableRipple = false;\n    /**\n     * Sets/gets whether the checkbox is required.\n     * If not set, `required` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [required] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isRequired =  this.checkbox.required;\n     * ```\n     */\n    @Input() public required = false;\n    /**\n     * Sets/gets the `aria-labelledby` attribute.\n     * If not set, the `aria-labelledby` will be equal to the value of `labelId` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox aria-labelledby = \"Checkbox1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let ariaLabelledBy =  this.checkbox.ariaLabelledBy;\n     * ```\n     */\n    @Input('aria-labelledby')\n    public ariaLabelledBy = this.labelId;\n    /**\n     * Sets/gets the value of the `aria-label` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox aria-label = \"Checkbox1\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let ariaLabel = this.checkbox.ariaLabel;\n     * ```\n     */\n    @Input('aria-label')\n    public ariaLabel: string | null = null;\n    /**\n     * An event that is emitted after the checkbox state is changed.\n     * Provides references to the `IgxCheckboxComponent` and the `checked` property as event arguments.\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeCheckboxEventArgs> = new EventEmitter<IChangeCheckboxEventArgs>();\n    /**\n     * Returns the class of the checkbox component.\n     *\n     * @example\n     * ```typescript\n     * let class =  this.checkbox.cssClass;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox')\n    public cssClass = 'igx-checkbox';\n    /**\n     * Sets/gets whether the checkbox component is on focus.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.checkbox.focused =  true;\n     * ```\n     * ```typescript\n     * let isFocused =  this.checkbox.focused;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--focused')\n    public focused = false;\n    /**\n     * Sets/gets the checkbox indeterminate visual state.\n     * Default value is `false`;\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [indeterminate] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isIndeterminate = this.checkbox.indeterminate;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--indeterminate')\n    @Input() public indeterminate = false;\n    /**\n     * Sets/gets whether the checkbox is checked.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [checked] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isChecked =  this.checkbox.checked;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--checked')\n    @Input() public checked = false;\n    /**\n     * Sets/gets whether the checkbox is disabled.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [disabled] = \"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let isDisabled = this.checkbox.disabled;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--disabled')\n    @Input() public disabled = false;\n    /**\n     * Sets/gets whether the checkbox is readonly.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [readonly]=\"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let readonly = this.checkbox.readonly;\n     * ```\n     */\n    @Input() public readonly = false;\n    /**\n     * Sets/gets whether the checkbox should disable all css transitions.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-checkbox [disableTransitions]=\"true\"></igx-checkbox>\n     * ```\n     * ```typescript\n     * let disableTransitions = this.checkbox.disableTransitions;\n     * ```\n     */\n    @HostBinding('class.igx-checkbox--plain')\n    @Input() public disableTransitions = false;\n    /** @hidden @internal */\n    public inputId = `${this.id}-input`;\n    /**\n     * @hidden\n     */\n    private _onTouchedCallback: () => void = noop;\n    /**\n     * @hidden\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * If `disabled` is `false`, switches the `checked` state.\n     *\n     * @example\n     * ```typescript\n     * this.checkbox.toggle();\n     * ```\n     */\n    public toggle() {\n        if (this.disabled || this.readonly) {\n            return;\n        }\n\n        this.indeterminate = false;\n        this.focused = false;\n        this.checked = !this.checked;\n\n        this.change.emit({ checked: this.checked, checkbox: this });\n        this._onChangeCallback(this.checked);\n    }\n    /** @hidden @internal */\n    public _onCheckboxChange(event) {\n        // We have to stop the original checkbox change event\n        // from bubbling up since we emit our own change event\n        event.stopPropagation();\n    }\n    /** @hidden @internal */\n    public _onCheckboxClick(event) {\n        // Since the original checkbox is hidden and the label\n        // is used for styling and to change the checked state of the checkbox,\n        // we need to prevent the checkbox click event from bubbling up\n        // as it gets triggered on label click\n        event.stopPropagation();\n\n        if (this.readonly) {\n            // readonly prevents the component from changing state (see toggle() method).\n            // However, the native checkbox can still be activated through user interaction (focus + space, label click)\n            // Prevent the native change so the input remains in sync\n            event.preventDefault();\n        }\n\n        if (isIE()) {\n            this.nativeCheckbox.nativeElement.blur();\n        }\n\n        this.toggle();\n    }\n    /** @hidden @internal */\n    public _onLabelClick(event) {\n        // We use a span element as a placeholder label\n        // in place of the native label, we need to emit\n        // the change event separately here alongside\n        // the click event emitted on click\n        this.toggle();\n    }\n    /** @hidden @internal */\n    public onFocus(event) {\n        this.focused = true;\n    }\n    /** @hidden @internal */\n    public onBlur(event) {\n        this.focused = false;\n        this._onTouchedCallback();\n    }\n    /** @hidden @internal */\n    public writeValue(value) {\n        this._value = value;\n        this.checked = !!this._value;\n    }\n    /** @hidden @internal */\n    public get labelClass(): string {\n        switch (this.labelPosition) {\n            case LabelPosition.BEFORE:\n                return `${this.cssClass}__label--before`;\n            case LabelPosition.AFTER:\n            default:\n                return `${this.cssClass}__label`;\n        }\n    }\n    /** @hidden @internal */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n    /** @hidden @internal */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n\n    /** @hidden @internal */\n    public getEditElement() {\n        return this.nativeCheckbox.nativeElement;\n    }\n}\n\nexport const IGX_CHECKBOX_REQUIRED_VALIDATOR: Provider = {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => IgxCheckboxRequiredDirective),\n    multi: true\n};\n\n/* tslint:disable directive-selector */\n@Directive({\n    selector: `igx-checkbox[required][formControlName],\n    igx-checkbox[required][formControl],\n    igx-checkbox[required][ngModel]`,\n    providers: [IGX_CHECKBOX_REQUIRED_VALIDATOR]\n})\nexport class IgxCheckboxRequiredDirective extends CheckboxRequiredValidator { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxCheckboxComponent, IgxCheckboxRequiredDirective],\n    exports: [IgxCheckboxComponent, IgxCheckboxRequiredDirective],\n    imports: [IgxRippleModule]\n})\nexport class IgxCheckboxModule { }\n","import { EventEmitter, Injectable, NgZone } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { IGridEditEventArgs, IGridEditDoneEventArgs } from '../common/events';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridBaseDirective } from '../grid/public_api';\n\nexport interface GridSelectionRange {\n    rowStart: number;\n    rowEnd: number;\n    columnStart: string | number;\n    columnEnd: string | number;\n}\n\nexport interface ISelectionNode {\n    row: number;\n    column: number;\n    layout?: IMultiRowLayoutNode;\n    isSummaryRow?: boolean;\n}\n\nexport interface IMultiRowLayoutNode {\n    rowStart: number;\n    colStart: number;\n    rowEnd: number;\n    colEnd: number;\n    columnVisibleIndex: number;\n}\n\ninterface ISelectionKeyboardState {\n    node: null | ISelectionNode;\n    shift: boolean;\n    range: GridSelectionRange;\n    active: boolean;\n}\n\ninterface ISelectionPointerState extends ISelectionKeyboardState {\n    ctrl: boolean;\n    primaryButton: boolean;\n}\n\ninterface IColumnSelectionState {\n    field: null | string;\n    range: string[];\n}\n\ntype SelectionState = ISelectionKeyboardState | ISelectionPointerState;\n\n\n// TODO: Refactor - export in a separate file\n\nexport class IgxRow {\n    transactionState: any;\n    state: any;\n    newData: any;\n    isAddRow: boolean;\n\n    constructor(public id: any, public index: number, public data: any, public grid: IgxGridBaseDirective & GridType) { }\n\n    createEditEventArgs(includeNewValue = true): IGridEditEventArgs {\n        const args: IGridEditEventArgs = {\n            rowID: this.id,\n            rowData: this.data,\n            oldValue: this.data,\n            cancel: false,\n            owner: this.grid,\n            isAddRow: this.isAddRow || false\n        };\n        if (includeNewValue) {\n            args.newValue = this.newData;\n        }\n        return args;\n    }\n\n    createDoneEditEventArgs(cachedRowData: any): IGridEditDoneEventArgs {\n        const updatedData = this.grid.transactions.enabled ?\n        this.grid.transactions.getAggregatedValue(this.id, true) : this.grid.gridAPI.getRowData(this.id);\n        const rowData = updatedData === null ? this.grid.gridAPI.getRowData(this.id) : updatedData;\n        const args: IGridEditDoneEventArgs = {\n            rowID: this.id,\n            rowData: rowData,\n            oldValue: cachedRowData,\n            newValue: updatedData,\n            owner: this.grid,\n            isAddRow: this.isAddRow || false\n        };\n\n        return args;\n    }\n}\n\nexport class IgxCell {\n    primaryKey: any;\n    state: any;\n\n    constructor(\n        public id,\n        public rowIndex: number,\n        public column,\n        public value: any,\n        public editValue: any,\n        public rowData: any,\n        public grid: IgxGridBaseDirective & GridType) { }\n\n    castToNumber(value: any): any {\n        if (this.column.dataType === 'number' && !this.column.inlineEditorTemplate) {\n            const v = parseFloat(value);\n            return !isNaN(v) && isFinite(v) ? v : 0;\n        }\n        return value;\n    }\n\n    createEditEventArgs(includeNewValue = true): IGridEditEventArgs {\n        const args: IGridEditEventArgs = {\n            rowID: this.id.rowID,\n            cellID: this.id,\n            rowData: this.rowData,\n            oldValue: this.value,\n            cancel: false,\n            column: this.column,\n            owner: this.grid\n        };\n        if (includeNewValue) {\n            args.newValue = this.castToNumber(this.editValue);\n        }\n        return args;\n    }\n\n    createDoneEditEventArgs(value: any): IGridEditDoneEventArgs {\n        const updatedData = this.grid.transactions.enabled ?\n        this.grid.transactions.getAggregatedValue(this.id.rowID, true) : this.rowData;\n        const rowData = updatedData === null ? this.grid.gridAPI.getRowData(this.id.rowID) : updatedData;\n        const args: IGridEditDoneEventArgs = {\n            rowID: this.id.rowID,\n            cellID: this.id,\n            // rowData - should be the updated/committed rowData - this effectively should be the newValue\n            // the only case we use this.rowData directly, is when there is no rowEditing or transactions enabled\n            rowData: rowData,\n            oldValue: this.value,\n            newValue: value,\n            column: this.column,\n            owner: this.grid,\n        };\n        return args;\n    }\n}\n\n@Injectable()\nexport class IgxGridCRUDService {\n\n    public grid: IgxGridBaseDirective & GridType;\n    public cell: IgxCell | null = null;\n    public row: IgxRow | null = null;\n    public isInCompositionMode = false;\n\n    private _cellEditingBlocked = false;\n    private _rowEditingBlocked = false;\n\n    createCell(cell): IgxCell {\n        return new IgxCell(cell.cellID, cell.rowIndex, cell.column, cell.value, cell.value, cell.row.rowData, cell.grid);\n    }\n\n    createRow(cell: IgxCell): IgxRow {\n        return new IgxRow(cell.id.rowID, cell.rowIndex, cell.rowData, cell.grid);\n    }\n\n    sameRow(rowID): boolean {\n        return this.row && this.row.id === rowID;\n    }\n\n    sameCell(cell: IgxCell): boolean {\n        return (this.cell.id.rowID === cell.id.rowID &&\n            this.cell.id.columnID === cell.id.columnID);\n    }\n\n    get cellInEditMode(): boolean {\n        return !!this.cell;\n    }\n\n    get rowInEditMode(): boolean {\n        return !!this.row;\n    }\n\n    get rowEditing(): boolean {\n        return this.grid.rowEditable;\n    }\n\n    get primaryKey(): any {\n        return this.grid.primaryKey;\n    }\n\n    get cellEditingBlocked() {\n        return this._cellEditingBlocked;\n    }\n\n    set cellEditingBlocked(val: boolean) {\n        this._cellEditingBlocked = val;\n    }\n\n    get rowEditingBlocked() {\n        return this._rowEditingBlocked;\n    }\n\n    set rowEditingBlocked(val: boolean) {\n        this._rowEditingBlocked = val;\n    }\n\n    public enterEditMode(cell) {\n        if (this.isInCompositionMode) {\n            return;\n        }\n\n        if (this.cellInEditMode) {\n            // TODO: case solely for f2/enter nav that uses enterEditMode as toggle. Refactor.\n            const canceled = this.grid.endEdit(true);\n\n            if (!canceled || !this.cell) {\n                this.grid.tbody.nativeElement.focus();\n            }\n        } else {\n\n            if (cell?.row.addRow) {\n                this.beginAddRow(cell);\n                return;\n            }\n            /** Changing the reference with the new editable cell */\n            const newCell = this.createCell(cell);\n            if (this.rowEditing)  {\n                const canceled = this.beginRowEdit(newCell);\n                if (!canceled) {\n                    this.beginCellEdit(newCell);\n                }\n\n            } else {\n                this.beginCellEdit(newCell);\n            }\n        }\n    }\n\n    /** Enters row edit mode */\n    public beginRowEdit(newCell) {\n        if (this.row && !this.sameRow(newCell.id.rowID)) {\n            this._rowEditingBlocked = this.grid.endEdit(true);\n            if (this.rowEditingBlocked) {\n                return true;\n            }\n\n            this.cell = newCell;\n            this._rowEditingBlocked = false;\n            this.endRowEdit();\n        }\n\n        if (this.grid.rowEditable && (this.grid.primaryKey === undefined || this.grid.primaryKey === null)) {\n            console.warn('The grid must have a `primaryKey` specified when using `rowEditable`!');\n        }\n\n        if (!this.row) {\n            this.cell = newCell;\n            this.row = this.createRow(this.cell);\n            const rowArgs = this.row.createEditEventArgs(false);\n\n            this.grid.rowEditEnter.emit(rowArgs);\n            if (rowArgs.cancel) {\n                this.endEditMode();\n                return true;\n            }\n\n            this.row.transactionState = this.grid.transactions.getAggregatedValue(this.row.id, true);\n            this.grid.transactions.startPending();\n            this.grid.openRowOverlay(this.row.id);\n        }\n    }\n\n    /** Exit row edit mode */\n    public exitRowEdit(commit: boolean) {\n        if (!this.grid.rowEditable ||\n            this.grid.rowEditingOverlay &&\n            this.grid.rowEditingOverlay.collapsed || !this.row) {\n            return false;\n        }\n\n        if (this.rowEditingBlocked && this.cellEditingBlocked) {\n            return true;\n        }\n\n        const canceled = this.grid.endRowTransaction(commit, this.row);\n        if (canceled) {\n            return true;\n        }\n    }\n\n    /** Enters cell edit mode */\n    beginAddRow(cell) {\n        const newCell = this.createCell(cell);\n        newCell.primaryKey = this.primaryKey;\n        cell.enterAddMode = true;\n        this.cell = newCell;\n        if (!this.sameRow(newCell.id.rowID)) {\n            this.row = this.createRow(this.cell);\n            this.row.isAddRow = true;\n            const rowArgs = this.row.createEditEventArgs(false);\n            this.grid.rowEditEnter.emit(rowArgs);\n            if (rowArgs.cancel) {\n                this.endEditMode();\n                this.grid.endAddRow();\n                return;\n            }\n            this.grid.openRowOverlay(this.row.id);\n        }\n        const args = newCell.createEditEventArgs(false);\n        this.grid.cellEditEnter.emit(args);\n        if (args.cancel) {\n            this.endCellEdit();\n            return;\n        }\n    }\n\n    public beginCellEdit(newCell) {\n        const args = newCell.createEditEventArgs(false);\n        this.grid.cellEditEnter.emit(args);\n\n        this._cellEditingBlocked = args.cancel;\n        if (args.cancel) {\n            this.endCellEdit();\n        } else {\n            this.cell = newCell;\n        }\n\n    }\n\n    /** Exit cell edit mode */\n    public exitCellEdit(): boolean {\n        if (!this.cell) {\n            return false;\n        }\n\n        const newValue = this.cell.castToNumber(this.cell.editValue);\n        const args = this.cell?.createDoneEditEventArgs(newValue);\n        this.cell.value = newValue;\n\n        this.grid.cellEditExit.emit(args);\n        this.endCellEdit();\n        return false;\n    }\n\n    /** Clears cell editing state */\n    public endCellEdit() {\n        this.cell = null;\n        this.cellEditingBlocked = false;\n    }\n\n    /** Clears row editing state */\n    public endRowEdit() {\n        this.row = null;\n        this.rowEditingBlocked = false;\n    }\n\n\n    /** Clears cell and row editing state and closes row editing template if it is open */\n    public endEditMode() {\n        this.endCellEdit();\n        if (this.grid.rowEditable) {\n            this.endRowEdit();\n            this.grid.closeRowEditingOverlay();\n        }\n    }\n\n    /** Returns whether the targeted cell is in edit mode */\n    public targetInEdit(rowIndex: number, columnIndex: number): boolean {\n        if (!this.cell) {\n            return false;\n        }\n        const res = this.cell.column.index === columnIndex && this.cell.rowIndex === rowIndex;\n        return res;\n    }\n}\n\n\n@Injectable()\nexport class IgxGridSelectionService {\n    grid;\n    dragMode = false;\n    activeElement: ISelectionNode | null;\n    keyboardState = {} as ISelectionKeyboardState;\n    pointerState = {} as ISelectionPointerState;\n    columnsState = {} as IColumnSelectionState;\n\n    selection = new Map<number, Set<number>>();\n    temp = new Map<number, Set<number>>();\n    _ranges: Set<string> = new Set<string>();\n    _selectionRange: Range;\n    rowSelection: Set<any> = new Set<any>();\n    columnSelection: Set<string> = new Set<string>();\n    private allRowsSelected: boolean;\n    /**\n     * @hidden @internal\n     */\n    public selectedRowsChange = new Subject();\n\n\n    /**\n     * Returns the current selected ranges in the grid from both\n     * keyboard and pointer interactions\n     */\n    get ranges(): GridSelectionRange[] {\n\n        // The last action was keyboard + shift selection -> add it\n        this.addKeyboardRange();\n\n        const ranges = Array.from(this._ranges).map(range => JSON.parse(range));\n\n        // No ranges but we have a focused cell -> add it\n        if (!ranges.length && this.activeElement && this.grid.isCellSelectable) {\n            ranges.push(this.generateRange(this.activeElement));\n        }\n\n        return ranges;\n    }\n\n    get primaryButton(): boolean {\n        return this.pointerState.primaryButton;\n    }\n\n    set primaryButton(value: boolean) {\n        this.pointerState.primaryButton = value;\n    }\n\n    constructor(private zone: NgZone) {\n        this.initPointerState();\n        this.initKeyboardState();\n        this.initColumnsState();\n    }\n\n    /**\n     * Resets the keyboard state\n     */\n    initKeyboardState(): void {\n        this.keyboardState.node = null;\n        this.keyboardState.shift = false;\n        this.keyboardState.range = null;\n        this.keyboardState.active = false;\n    }\n\n    /**\n     * Resets the pointer state\n     */\n    initPointerState(): void {\n        this.pointerState.node = null;\n        this.pointerState.ctrl = false;\n        this.pointerState.shift = false;\n        this.pointerState.range = null;\n        this.pointerState.primaryButton = true;\n    }\n\n    /**\n     * Resets the columns state\n     */\n    initColumnsState(): void {\n        this.columnsState.field = null;\n        this.columnsState.range = [];\n    }\n\n    /**\n     * Adds a single node.\n     * Single clicks | Ctrl + single clicks on cells is the usual case.\n     */\n    add(node: ISelectionNode, addToRange = true): void {\n        this.selection.has(node.row) ? this.selection.get(node.row).add(node.column) :\n            this.selection.set(node.row, new Set<number>()).get(node.row).add(node.column);\n\n        if (addToRange) { this._ranges.add(JSON.stringify(this.generateRange(node))); }\n    }\n\n    /**\n     * Adds the active keyboard range selection (if any) to the `ranges` meta.\n     */\n    addKeyboardRange(): void {\n        if (this.keyboardState.range) {\n            this._ranges.add(JSON.stringify(this.keyboardState.range));\n        }\n    }\n\n    remove(node: ISelectionNode): void {\n        if (this.selection.has(node.row)) {\n            this.selection.get(node.row).delete(node.column);\n        }\n        if (this.isActiveNode(node)) {\n            this.activeElement = null;\n        }\n        this._ranges.delete(JSON.stringify(this.generateRange(node)));\n    }\n\n    isInMap(node: ISelectionNode): boolean {\n        return (this.selection.has(node.row) && this.selection.get(node.row).has(node.column)) ||\n            (this.temp.has(node.row) && this.temp.get(node.row).has(node.column));\n    }\n\n    selected(node: ISelectionNode): boolean {\n        return (this.isActiveNode(node) && this.grid.isCellSelectable) || this.isInMap(node);\n    }\n\n    isActiveNode(node: ISelectionNode): boolean {\n        if (this.activeElement) {\n            const isActive = this.activeElement.column === node.column && this.activeElement.row === node.row;\n            if (this.grid.hasColumnLayouts) {\n                const layout = this.activeElement.layout;\n                return isActive && this.isActiveLayout(layout, node.layout);\n            }\n            return isActive;\n        }\n        return false;\n    }\n\n    isActiveLayout(current: IMultiRowLayoutNode, target: IMultiRowLayoutNode): boolean {\n        return current.columnVisibleIndex === target.columnVisibleIndex;\n    }\n\n    addRangeMeta(node: ISelectionNode, state?: SelectionState): void {\n        this._ranges.add(JSON.stringify(this.generateRange(node, state)));\n    }\n\n    removeRangeMeta(node: ISelectionNode, state?: SelectionState): void {\n        this._ranges.delete(JSON.stringify(this.generateRange(node, state)));\n    }\n\n    /**\n     * Generates a new selection range from the given `node`.\n     * If `state` is passed instead it will generate the range based on the passed `node`\n     * and the start node of the `state`.\n     */\n    generateRange(node: ISelectionNode, state?: SelectionState): GridSelectionRange {\n        if (!state) {\n            return {\n                rowStart: node.row,\n                rowEnd: node.row,\n                columnStart: node.column,\n                columnEnd: node.column\n            };\n        }\n\n        const { row, column } = state.node;\n        const rowStart = Math.min(node.row, row);\n        const rowEnd = Math.max(node.row, row);\n        const columnStart = Math.min(node.column, column);\n        const columnEnd = Math.max(node.column, column);\n\n        return { rowStart, rowEnd, columnStart, columnEnd };\n    }\n\n    /**\n     *\n     */\n    keyboardStateOnKeydown(node: ISelectionNode, shift: boolean, shiftTab: boolean): void {\n        this.keyboardState.active = true;\n        this.initPointerState();\n        this.keyboardState.shift = shift && !shiftTab;\n        if (!this.grid.navigation.isDataRow(node.row)) { return; }\n        // Kb navigation with shift and no previous node.\n        // Clear the current selection init the start node.\n        if (this.keyboardState.shift && !this.keyboardState.node) {\n            this.clear();\n            this.keyboardState.node = Object.assign({}, node);\n        }\n    }\n\n    keyboardStateOnFocus(node: ISelectionNode, emitter: EventEmitter<GridSelectionRange>, dom): void {\n        const kbState = this.keyboardState;\n\n        // Focus triggered by keyboard navigation\n        if (kbState.active) {\n            if (isChromium()) {\n                this._moveSelectionChrome(dom);\n            }\n            // Start generating a range if shift is hold\n            if (kbState.shift) {\n                this.dragSelect(node, kbState);\n                kbState.range = this.generateRange(node, kbState);\n                emitter.emit(this.generateRange(node, kbState));\n                return;\n            }\n\n            this.initKeyboardState();\n            this.clear();\n            this.add(node);\n        }\n    }\n\n    pointerDown(node: ISelectionNode, shift: boolean, ctrl: boolean): void {\n        this.addKeyboardRange();\n        this.initKeyboardState();\n        this.pointerState.ctrl = ctrl;\n        this.pointerState.shift = shift;\n\n        // No ctrl key pressed - no multiple selection\n        if (!ctrl) {\n            this.clear();\n        }\n\n        if (shift) {\n            // No previously 'clicked' node. Use the last active node.\n            if (!this.pointerState.node) {\n                this.pointerState.node = this.activeElement || node;\n            }\n            this.pointerDownShiftKey(node);\n            this.clearTextSelection();\n            return;\n        }\n\n        this.removeRangeMeta(node);\n        this.pointerState.node = node;\n    }\n\n    pointerDownShiftKey(node: ISelectionNode): void {\n        this.clear();\n        this.selectRange(node, this.pointerState);\n    }\n\n    mergeMap(target: Map<number, Set<number>>, source: Map<number, Set<number>>): void {\n        const iterator = source.entries();\n        let pair = iterator.next();\n        let key: number;\n        let value: Set<number>;\n\n        while (!pair.done) {\n            [key, value] = pair.value;\n            if (target.has(key)) {\n                const newValue = target.get(key);\n                value.forEach(record => newValue.add(record));\n                target.set(key, newValue);\n            } else {\n                target.set(key, value);\n            }\n            pair = iterator.next();\n        }\n    }\n\n    pointerEnter(node: ISelectionNode, event: PointerEvent): boolean {\n        // https://www.w3.org/TR/pointerevents/#the-button-property\n        this.dragMode = event.buttons === 1 && (event.button === -1 || event.button === 0);\n        if (!this.dragMode) {\n            return false;\n        }\n        this.clearTextSelection();\n\n        // If the users triggers a drag-like event by first clicking outside the grid cells\n        // and then enters in the grid body we may not have a initial pointer starting node.\n        // Assume the first pointerenter node is where we start.\n        if (!this.pointerState.node) {\n            this.pointerState.node = node;\n        }\n\n        this.pointerState.ctrl ? this.selectRange(node, this.pointerState, this.temp) :\n            this.dragSelect(node, this.pointerState);\n        return true;\n    }\n\n    pointerUp(node: ISelectionNode, emitter: EventEmitter<GridSelectionRange>): boolean {\n        if (this.dragMode) {\n            this.restoreTextSelection();\n            this.addRangeMeta(node, this.pointerState);\n            this.mergeMap(this.selection, this.temp);\n            this.zone.runTask(() => emitter.emit(this.generateRange(node, this.pointerState)));\n            this.temp.clear();\n            this.dragMode = false;\n            return true;\n        }\n\n        if (this.pointerState.shift) {\n            this.clearTextSelection();\n            this.restoreTextSelection();\n            this.addRangeMeta(node, this.pointerState);\n            emitter.emit(this.generateRange(node, this.pointerState));\n            return true;\n        }\n\n        this.add(node);\n        return false;\n    }\n\n    selectRange(node: ISelectionNode, state: SelectionState, collection: Map<number, Set<number>> = this.selection): void {\n        if (collection === this.temp) {\n            collection.clear();\n        }\n        const { rowStart, rowEnd, columnStart, columnEnd } = this.generateRange(node, state);\n        for (let i = rowStart; i <= rowEnd; i++) {\n            for (let j = columnStart as number; j <= columnEnd; j++) {\n                collection.has(i) ? collection.get(i).add(j) :\n                    collection.set(i, new Set<number>()).get(i).add(j);\n            }\n        }\n    }\n\n    dragSelect(node: ISelectionNode, state: SelectionState): void {\n        if (!this.pointerState.ctrl) {\n            this.selection.clear();\n        }\n        this.selectRange(node, state);\n    }\n\n    clear(clearAcriveEl = false): void {\n        if (clearAcriveEl) { this.activeElement = null; }\n        this.selection.clear();\n        this.temp.clear();\n        this._ranges.clear();\n    }\n\n    clearTextSelection(): void {\n        const selection = window.getSelection();\n        if (selection.rangeCount) {\n            this._selectionRange = selection.getRangeAt(0);\n            this._selectionRange.collapse(true);\n            selection.removeAllRanges();\n        }\n    }\n\n    restoreTextSelection(): void {\n        const selection = window.getSelection();\n        if (!selection.rangeCount) {\n            selection.addRange(this._selectionRange || document.createRange());\n        }\n    }\n\n    /**\n     * ( \n     * Chrome and Chromium don't care about the active\n     * range after keyboard navigation, thus this.\n     */\n    _moveSelectionChrome(node: Node) {\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        const range = new Range();\n        range.selectNode(node);\n        range.collapse(true);\n        selection.addRange(range);\n    }\n\n    /** Returns array of the selected row id's. */\n    getSelectedRows(): Array<any> {\n        return this.rowSelection.size ? Array.from(this.rowSelection.keys()) : [];\n    }\n\n    /** Clears row selection, if filtering is applied clears only selected rows from filtered data. */\n    clearRowSelection(event?): void {\n        const removedRec = this.isFilteringApplied() ?\n            this.getRowIDs(this.allData).filter(rID => this.isRowSelected(rID)) : this.getSelectedRows();\n        const newSelection = this.isFilteringApplied() ? this.getSelectedRows().filter(x => !removedRec.includes(x)) : [];\n\n        this.emitRowSelectionEvent(newSelection, [], removedRec, event);\n    }\n\n    /** Select all rows, if filtering is applied select only from filtered data. */\n    selectAllRows(event?) {\n        const allRowIDs = this.getRowIDs(this.allData);\n        const addedRows = allRowIDs.filter((rID) => !this.isRowSelected(rID));\n        const newSelection = this.rowSelection.size ? this.getSelectedRows().concat(addedRows) : addedRows;\n        this.selectedRowsChange.next();\n        this.emitRowSelectionEvent(newSelection, addedRows, [], event);\n    }\n\n    /** Select the specified row and emit event. */\n    selectRowById(rowID, clearPrevSelection?, event?): void {\n        if (!this.grid.isRowSelectable || this.isRowDeleted(rowID)) { return; }\n        clearPrevSelection = !this.grid.isMultiRowSelectionEnabled || clearPrevSelection;\n\n        const newSelection = clearPrevSelection ? [rowID] : this.getSelectedRows().indexOf(rowID) !== -1 ?\n            this.getSelectedRows() : [...this.getSelectedRows(), rowID];\n        const removed = clearPrevSelection ? this.getSelectedRows() : [];\n        this.selectedRowsChange.next();\n        this.emitRowSelectionEvent(newSelection, [rowID], removed, event);\n    }\n\n    /** Deselect the specified row and emit event. */\n    deselectRow(rowID, event?): void {\n        if (!this.isRowSelected(rowID)) { return; }\n        const newSelection = this.getSelectedRows().filter(r => r !== rowID);\n        if (this.rowSelection.size && this.rowSelection.has(rowID)) {\n            this.selectedRowsChange.next();\n            this.emitRowSelectionEvent(newSelection, [], [rowID], event);\n        }\n    }\n\n    /** Select specified rows. No event is emitted. */\n    selectRowsWithNoEvent(rowIDs: any[], clearPrevSelection?): void {\n        if (clearPrevSelection) { this.rowSelection.clear(); }\n        rowIDs.forEach(rowID => this.rowSelection.add(rowID));\n        this.allRowsSelected = undefined;\n        this.selectedRowsChange.next();\n    }\n\n    /** Deselect specified rows. No event is emitted. */\n    deselectRowsWithNoEvent(rowIDs: any[]): void {\n        rowIDs.forEach(rowID => this.rowSelection.delete(rowID));\n        this.allRowsSelected = undefined;\n        this.selectedRowsChange.next();\n    }\n\n    isRowSelected(rowID): boolean {\n        return this.rowSelection.size > 0 && this.rowSelection.has(rowID);\n    }\n\n    /** Select range from last selected row to the current specified row. */\n    selectMultipleRows(rowID, rowData, event?): void {\n        this.allRowsSelected = undefined;\n        if (!this.rowSelection.size || this.isRowDeleted(rowID)) {\n            this.selectRowById(rowID);\n            return;\n        }\n        const gridData = this.allData;\n        const lastRowID = this.getSelectedRows()[this.rowSelection.size - 1];\n        const currIndex = gridData.indexOf(this.getRowDataById(lastRowID));\n        const newIndex = gridData.indexOf(rowData);\n        const rows = gridData.slice(Math.min(currIndex, newIndex), Math.max(currIndex, newIndex) + 1);\n\n        const added = this.getRowIDs(rows).filter(rID => !this.isRowSelected(rID));\n        const newSelection = this.getSelectedRows().concat(added);\n        this.selectedRowsChange.next();\n        this.emitRowSelectionEvent(newSelection, added, [], event);\n    }\n\n    areAllRowSelected(): boolean {\n        if (!this.grid.data) { return false; }\n        if (this.allRowsSelected !== undefined) { return this.allRowsSelected; }\n\n        const dataItemsID = this.getRowIDs(this.allData);\n        return this.allRowsSelected = Math.min(this.rowSelection.size, dataItemsID.length) > 0 &&\n            new Set(Array.from(this.rowSelection.values()).concat(dataItemsID)).size === this.rowSelection.size;\n    }\n\n    hasSomeRowSelected(): boolean {\n        const filteredData = this.isFilteringApplied() ?\n            this.getRowIDs(this.grid.filteredData).some(rID => this.isRowSelected(rID)) : true;\n        return this.rowSelection.size > 0 && filteredData && !this.areAllRowSelected();\n    }\n\n    public get filteredSelectedRowIds(): any[] {\n        return this.isFilteringApplied() ?\n            this.getRowIDs(this.allData).filter(rowID => this.isRowSelected(rowID)) :\n            this.getSelectedRows().filter(rowID => !this.isRowDeleted(rowID));\n    }\n\n    public emitRowSelectionEvent(newSelection, added, removed, event?): boolean {\n        const currSelection = this.getSelectedRows();\n        if (this.areEqualCollections(currSelection, newSelection)) { return; }\n\n        const args = {\n            oldSelection: currSelection, newSelection: newSelection,\n            added: added, removed: removed, event: event, cancel: false\n        };\n        this.grid.onRowSelectionChange.emit(args);\n        if (args.cancel) { return; }\n        this.selectRowsWithNoEvent(args.newSelection, true);\n    }\n\n    public getRowDataById(rowID): Object {\n        if (!this.grid.primaryKey) { return rowID; }\n        const rowIndex = this.getRowIDs(this.grid.gridAPI.get_all_data(true)).indexOf(rowID);\n        return rowIndex < 0 ? {} : this.grid.gridAPI.get_all_data(true)[rowIndex];\n    }\n\n    public getRowIDs(data): Array<any> {\n        return this.grid.primaryKey && data.length ? data.map(rec => rec[this.grid.primaryKey]) : data;\n    }\n\n    public clearHeaderCBState(): void {\n        this.allRowsSelected = undefined;\n    }\n\n    /** Clear rowSelection and update checkbox state */\n    public clearAllSelectedRows(): void {\n        this.rowSelection.clear();\n        this.clearHeaderCBState();\n        this.selectedRowsChange.next();\n    }\n\n    /** Returns all data in the grid, with applied filtering and sorting and without deleted rows. */\n    public get allData(): Array<any> {\n        let allData;\n        if (this.isFilteringApplied() || this.grid.sortingExpressions.length) {\n            allData = this.grid.pinnedRecordsCount ? this.grid._filteredSortedUnpinnedData : this.grid.filteredSortedData;\n        } else {\n            allData = this.grid.gridAPI.get_all_data(true);\n        }\n        return allData.filter(rData => !this.isRowDeleted(this.grid.gridAPI.get_row_id(rData)));\n    }\n\n    private areEqualCollections(first, second): boolean {\n        return first.length === second.length && new Set(first.concat(second)).size === first.length;\n    }\n\n    private isFilteringApplied(): boolean {\n        const grid = this.grid as IgxGridBaseDirective;\n        return !FilteringExpressionsTree.empty(grid.filteringExpressionsTree) ||\n            !FilteringExpressionsTree.empty(grid.advancedFilteringExpressionsTree);\n    }\n\n    private isRowDeleted(rowID): boolean {\n        return this.grid.gridAPI.row_deleted_transaction(rowID);\n    }\n\n    /** Returns array of the selected columns fields. */\n    getSelectedColumns(): Array<any> {\n        return this.columnSelection.size ? Array.from(this.columnSelection.keys()) : [];\n    }\n\n    isColumnSelected(field: string): boolean {\n        return this.columnSelection.size > 0 && this.columnSelection.has(field);\n    }\n\n    /** Select the specified column and emit event. */\n    selectColumn(field: string, clearPrevSelection?, selectColumnsRange?, event?): void {\n        const stateColumn = this.columnsState.field ? this.grid.getColumnByName(this.columnsState.field) : null;\n        if (!event || !stateColumn || stateColumn.visibleIndex < 0 || !selectColumnsRange) {\n            this.columnsState.field = field;\n            this.columnsState.range = [];\n\n            const newSelection = clearPrevSelection ? [field] : this.getSelectedColumns().indexOf(field) !== -1 ?\n                this.getSelectedColumns() : [...this.getSelectedColumns(), field];\n            const removed = clearPrevSelection ? this.getSelectedColumns().filter(colField => colField !== field) : [];\n            const added = this.isColumnSelected(field) ? [] : [field];\n            this.emitColumnSelectionEvent(newSelection, added, removed, event);\n        } else if (selectColumnsRange) {\n            this.selectColumnsRange(field, event);\n        }\n    }\n\n    /** Select specified columns. And emit event. */\n    selectColumns(fields: string[], clearPrevSelection?, selectColumnsRange?, event?): void {\n        const columns = fields.map(f => this.grid.getColumnByName(f)).sort((a, b) => a.visibleIndex - b.visibleIndex);\n        const stateColumn = this.columnsState.field ? this.grid.getColumnByName(this.columnsState.field) : null;\n        if (!stateColumn || stateColumn.visibleIndex < 0 || !selectColumnsRange) {\n            this.columnsState.field = columns[0] ? columns[0].field : null;\n            this.columnsState.range = [];\n\n            const added = fields.filter(colField => !this.isColumnSelected(colField));\n            const removed = clearPrevSelection ? this.getSelectedColumns().filter(colField => fields.indexOf(colField) === -1) : [];\n            const newSelection = clearPrevSelection ? fields : this.getSelectedColumns().concat(added);\n\n            this.emitColumnSelectionEvent(newSelection, added, removed, event);\n        } else {\n            const filedStart = stateColumn.visibleIndex >\n                columns[columns.length - 1].visibleIndex ? columns[0].field : columns[columns.length - 1].field;\n            this.selectColumnsRange(filedStart, event);\n        }\n    }\n\n    /** Select range from last clicked column to the current specified column. */\n    selectColumnsRange(field: string, event): void {\n        const currIndex = this.grid.getColumnByName(this.columnsState.field).visibleIndex;\n        const newIndex = this.grid.columnToVisibleIndex(field);\n        const columnsFields = this.grid.visibleColumns\n            .filter(c => !c.columnGroup)\n            .sort((a, b) => a.visibleIndex - b.visibleIndex)\n            .slice(Math.min(currIndex, newIndex), Math.max(currIndex, newIndex) + 1)\n            .filter(col => col.selectable).map(col => col.field);\n        const removed = [];\n        const oldAdded = [];\n        const added = columnsFields.filter(colField => !this.isColumnSelected(colField));\n        this.columnsState.range.forEach(f => {\n            if (columnsFields.indexOf(f) === -1) {\n                removed.push(f);\n            } else {\n                oldAdded.push(f);\n            }\n        });\n        this.columnsState.range = columnsFields.filter(colField => !this.isColumnSelected(colField) || oldAdded.indexOf(colField) > -1);\n        const newSelection = this.getSelectedColumns().concat(added).filter(c => removed.indexOf(c) === -1);\n        this.emitColumnSelectionEvent(newSelection, added, removed, event);\n    }\n\n    /** Select specified columns. No event is emitted. */\n    selectColumnsWithNoEvent(fields: string[], clearPrevSelection?): void {\n        if (clearPrevSelection) { this.columnSelection.clear(); }\n        fields.forEach(field => { this.columnSelection.add(field); });\n    }\n\n    /** Deselect the specified column and emit event. */\n    deselectColumn(field: string, event?): void {\n        this.initColumnsState();\n        const newSelection = this.getSelectedColumns().filter(c => c !== field);\n        this.emitColumnSelectionEvent(newSelection, [], [field], event);\n    }\n\n    /** Deselect specified columns. No event is emitted. */\n    deselectColumnsWithNoEvent(fields: string[]): void {\n        fields.forEach(field => this.columnSelection.delete(field));\n    }\n\n    /** Deselect specified columns. And emit event. */\n    deselectColumns(fields: string[], event?): void {\n        const removed = this.getSelectedColumns().filter(colField => fields.indexOf(colField) > -1);\n        const newSelection = this.getSelectedColumns().filter(colField => fields.indexOf(colField) === -1);\n\n        this.emitColumnSelectionEvent(newSelection, [], removed, event);\n    }\n\n    public emitColumnSelectionEvent(newSelection, added, removed, event?): boolean {\n        const currSelection = this.getSelectedColumns();\n        if (this.areEqualCollections(currSelection, newSelection)) { return; }\n\n        const args = {\n            oldSelection: currSelection, newSelection: newSelection,\n            added: added, removed: removed, event: event, cancel: false\n        };\n        this.grid.onColumnSelectionChange.emit(args);\n        if (args.cancel) { return; }\n        this.selectColumnsWithNoEvent(args.newSelection, true);\n    }\n\n    /** Clear columnSelection */\n    public clearAllSelectedColumns(): void {\n        this.columnSelection.clear();\n    }\n}\n\nexport function isChromium(): boolean {\n    return (/Chrom|e?ium/g.test(navigator.userAgent) || /Google Inc/g.test(navigator.vendor)) && !/Edge/g.test(navigator.userAgent);\n}\n","import {\n    ChangeDetectorRef,\n    DoCheck,\n    ElementRef,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    QueryList,\n    ViewChild,\n    ViewChildren,\n    Directive,\n    Output,\n    EventEmitter,\n    AfterViewInit,\n    OnDestroy\n} from '@angular/core';\nimport { IgxCheckboxComponent } from '../checkbox/checkbox.component';\nimport { IgxGridForOfDirective } from '../directives/for-of/for_of.directive';\nimport { GridBaseAPIService } from './api.service';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { TransactionType } from '../services/public_api';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxGridSelectionService, IgxGridCRUDService, IgxRow } from './selection/selection.service';\nimport { GridType } from './common/grid.interface';\nimport mergeWith from 'lodash.mergewith';\nimport { cloneValue } from '../core/utils';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n@Directive({\n    selector: '[igxRowBaseComponent]'\n})\nexport class IgxRowDirective<T extends IgxGridBaseDirective & GridType> implements DoCheck, AfterViewInit, OnDestroy {\n\n    protected _rowData: any;\n    protected _addRow: boolean;\n    /**\n     * @hidden\n     */\n    public animateAdd = false;\n\n    /**\n     * @hidden\n     */\n    @Output()\n    onAnimationEnd = new EventEmitter<IgxRowDirective<T>>();\n\n    /**\n     *  The data passed to the row component.\n     *\n     * ```typescript\n     * // get the row data for the first selected row\n     * let selectedRowData = this.grid.selectedRows[0].rowData;\n     * ```\n     */\n    @Input()\n    public get rowData(): any {\n        if (this.inEditMode) {\n            return mergeWith(cloneValue(this._rowData), this.grid.transactions.getAggregatedValue(this.rowID, false),\n                (objValue, srcValue) => {\n                    if (Array.isArray(srcValue)) {\n                        return objValue = srcValue;\n                    }\n                });\n        }\n        return this._rowData;\n    }\n\n    public set rowData(v: any) {\n        this._rowData = v;\n    }\n    /**\n     * The index of the row.\n     *\n     * ```typescript\n     * // get the index of the second selected row\n     * let selectedRowIndex = this.grid.selectedRows[1].index;\n     * ```\n     */\n    @Input()\n    public index: number;\n\n    /**\n     * Sets whether this specific row has disabled functionality for editing and row selection.\n     * Default value is `false`.\n     * ```typescript\n     * this.grid.selectedRows[0].pinned = true;\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-disabled')\n    @HostBinding('class.igx-grid__tr--disabled')\n    public disabled = false;\n\n    /**\n     * Gets whether the row is pinned.\n     * ```typescript\n     * let isPinned = row.pinned;\n     * ```\n     */\n    public get pinned(): boolean {\n        return this.grid.isRecordPinned(this.rowData);\n    }\n\n    @Input()\n    public get addRow(): any {\n        return this._addRow;\n    }\n\n    public set addRow(v: any) {\n        this._addRow = v;\n    }\n\n    @HostBinding('style.min-height.px')\n    get rowHeight() {\n        let height = this.grid.rowHeight || 32;\n        if (this.grid.hasColumnLayouts) {\n            const maxRowSpan = this.grid.multiRowLayoutRowSize;\n            height = height * maxRowSpan;\n        }\n        return this.addRow ? height : null;\n    }\n\n    get cellHeight() {\n        return this.addRow && !this.inEditMode ? null : this.grid.rowHeight || 32;\n    }\n\n    /**\n     * Sets whether the row is pinned.\n     * Default value is `false`.\n     * ```typescript\n     * this.grid.selectedRows[0].pinned = true;\n     * ```\n     */\n    public set pinned(value: boolean) {\n        if (value) {\n            this.grid.pinRow(this.rowID);\n        } else {\n            this.grid.unpinRow(this.rowID);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public gridID: string;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren('igxDirRef', { read: IgxGridForOfDirective })\n    public _virtDirRow: QueryList<IgxGridForOfDirective<any>>;\n\n    public get virtDirRow(): IgxGridForOfDirective<any> {\n        return this._virtDirRow ? this._virtDirRow.first : null;\n    }\n\n    /**\n     * @hidden\n     */\n    @ViewChild(forwardRef(() => IgxCheckboxComponent), { read: IgxCheckboxComponent })\n    public checkboxElement: IgxCheckboxComponent;\n\n    @ViewChildren('cell')\n    protected _cells: QueryList<any>;\n\n    /**\n     * Gets the rendered cells in the row component.\n     *\n     * ```typescript\n     * // get the cells of the third selected row\n     * let selectedRowCells = this.grid.selectedRows[2].cells;\n     * ```\n     */\n    public get cells() {\n        const res = new QueryList<any>();\n        if (!this._cells) {\n            return res;\n        }\n        const cList = this._cells.filter((item) => item.nativeElement.parentElement !== null)\n            .sort((item1, item2) => item1.column.visibleIndex - item2.column.visibleIndex);\n        res.reset(cList);\n        return res;\n    }\n\n    public set cells(cells) {\n\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.role')\n    public role = 'row';\n\n    @HostBinding('attr.data-rowIndex')\n    get dataRowIndex() {\n        return this.index;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class')\n    get styleClasses(): string {\n        return this.resolveClasses();\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    @HostBinding('attr.aria-selected')\n    get selected(): boolean {\n        return this.selectionService.isRowSelected(this.rowID);\n    }\n\n    set selected(value: boolean) {\n        value ? this.selectionService.selectRowsWithNoEvent([this.rowID]) :\n            this.selectionService.deselectRowsWithNoEvent([this.rowID]);\n        this.grid.cdr.markForCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    get columns(): IgxColumnComponent[] {\n        return this.grid.visibleColumns;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get viewIndex(): number {\n        if ((this.grid as any).groupingExpressions.length) {\n            return this.grid.filteredSortedData.indexOf(this.rowData);\n        }\n        return this.index + this.grid.page * this.grid.perPage;\n    }\n\n    /**\n     * @hidden\n     */\n    get pinnedColumns(): IgxColumnComponent[] {\n        return this.grid.pinnedColumns;\n    }\n\n    /**\n     * @hidden\n     */\n    public get isRoot(): boolean {\n        return true;\n    }\n\n    /**\n     * @hidden\n     */\n    public get hasChildren(): boolean {\n        return false;\n    }\n\n    /**\n     * @hidden\n     */\n    get unpinnedColumns(): IgxColumnComponent[] {\n        return this.grid.unpinnedColumns;\n    }\n\n    /**\n     * @hidden\n     */\n    public get showRowSelectors(): boolean {\n        return this.grid.showRowSelectors;\n    }\n\n    /** @hidden */\n    public get dirty(): boolean {\n        const row = this.grid.transactions.getState(this.rowID);\n        if (row) {\n            return row.type === TransactionType.ADD || row.type === TransactionType.UPDATE;\n        }\n\n        return false;\n    }\n\n    /**\n     * @hidden\n     */\n    public get rowDraggable(): boolean {\n        return this.grid.rowDraggable;\n    }\n\n    /** @hidden */\n    public get added(): boolean {\n        const row = this.grid.transactions.getState(this.rowID);\n        if (row) {\n            return row.type === TransactionType.ADD;\n        }\n\n        return false;\n    }\n\n    /** @hidden */\n    public get deleted(): boolean {\n        return this.gridAPI.row_deleted_transaction(this.rowID);\n    }\n\n    /**\n     * @hidden\n     */\n    public get dragging() {\n        return this.grid.dragRowID === this.rowID;\n    }\n\n    // TODO: Refactor\n    public get inEditMode(): boolean {\n        if (this.grid.rowEditable) {\n            const editRowState = this.crudService.row;\n            return (editRowState && editRowState.id === this.rowID) || false;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * Get a reference to the grid that contains the selected row.\n     *\n     * ```typescript\n     * handleRowSelection(event) {\n     *  // the grid on which the onRowSelectionChange event was triggered\n     *  const grid = event.row.grid;\n     * }\n     * ```\n     *\n     * ```html\n     *  <igx-grid\n     *    [data]=\"data\"\n     *    (onRowSelectionChange)=\"handleRowSelection($event)\">\n     *  </igx-grid>\n     * ```\n     */\n    get grid(): T {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Gets the ID of the row.\n     * A row in the grid is identified either by:\n     * - primaryKey data value,\n     * - the whole rowData, if the primaryKey is omitted.\n     *\n     * ```typescript\n     * let rowID = this.grid.selectedRows[2].rowID;\n     * ```\n     */\n    public get rowID() {\n        const primaryKey = this.grid.primaryKey;\n        return primaryKey ? this._rowData[primaryKey] : this._rowData;\n    }\n\n    /**\n     * The native DOM element representing the row. Could be null in certain environments.\n     *\n     * ```typescript\n     * // get the nativeElement of the second selected row\n     * let selectedRowNativeElement = this.grid.selectedRows[1].nativeElement;\n     * ```\n     */\n    get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    public focused = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public defaultCssClass = 'igx-grid__tr';\n\n    protected destroy$ = new Subject<any>();\n\n    constructor(\n        public gridAPI: GridBaseAPIService<T>,\n        public crudService: IgxGridCRUDService,\n        public selectionService: IgxGridSelectionService,\n        public element: ElementRef<HTMLElement>,\n        public cdr: ChangeDetectorRef) { }\n\n    public ngAfterViewInit() {\n        // If the template of the row changes, the forOf in it is recreated and is not detected by the grid and rows can't be scrolled.\n        this._virtDirRow.changes.pipe(takeUntil(this.destroy$)).subscribe(() => this.grid.resetHorizontalForOfs());\n    }\n\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event: MouseEvent) {\n        if (this.grid.rowSelection === 'none' || this.deleted) { return; }\n        if (event.shiftKey && this.grid.rowSelection === 'multiple') {\n            this.selectionService.selectMultipleRows(this.rowID, this.rowData, event);\n            return;\n        }\n        this.selectionService.selectRowById(this.rowID, !event.ctrlKey, event);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('mouseenter', ['$event'])\n    public showActionStrip(event: MouseEvent) {\n        if (this.grid.actionStrip) {\n            this.grid.actionStrip.show(this);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onRowSelectorClick(event) {\n        event.stopPropagation();\n        if (event.shiftKey && this.grid.rowSelection === 'multiple') {\n            this.selectionService.selectMultipleRows(this.rowID, this.rowData, event);\n            return;\n        }\n        this.selected ? this.selectionService.deselectRow(this.rowID, event) :\n            this.selectionService.selectRowById(this.rowID, false, event);\n    }\n\n    /**\n     * Updates the specified row object and the data source record with the passed value.\n     * This method emits `onEditDone` event.\n     *\n     * ```typescript\n     * // update the second selected row's value\n     * let newValue = \"Apple\";\n     * this.grid.selectedRows[1].update(newValue);\n     * ```\n     */\n    public update(value: any) {\n        const crudService = this.crudService;\n        if (crudService.cellInEditMode && crudService.cell.id.rowID === this.rowID) {\n            this.grid.endEdit(false);\n        }\n        const row = new IgxRow(this.rowID, this.index, this.rowData, this.grid);\n        this.gridAPI.update_row(row, value);\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Removes the specified row from the grid's data source.\n     * This method emits `onRowDeleted` event.\n     *\n     * ```typescript\n     * // delete the third selected row from the grid\n     * this.grid.selectedRows[2].delete();\n     * ```\n     */\n    public delete() {\n        this.grid.deleteRowById(this.rowID);\n    }\n\n    public isCellActive(visibleColumnIndex) {\n        const node = this.grid.navigation.activeNode;\n        return node ? node.row === this.index && node.column === visibleColumnIndex : false;\n    }\n\n    /**\n     * Pins the specified row.\n     * This method emits `onRowPinning` event.\n     *\n     * ```typescript\n     * // pin the selected row from the grid\n     * this.grid.selectedRows[0].pin();\n     * ```\n     */\n    public pin() {\n        return this.grid.pinRow(this.rowID);\n    }\n\n    /**\n     * Unpins the specified row.\n     * This method emits `onRowPinning` event.\n     *\n     * ```typescript\n     * // unpin the selected row from the grid\n     * this.grid.selectedRows[0].unpin();\n     * ```\n     */\n    public unpin() {\n        return this.grid.unpinRow(this.rowID);\n    }\n\n    /**\n     * @hidden\n     */\n    get rowCheckboxAriaLabel() {\n        return this.grid.primaryKey ?\n            this.selected ? 'Deselect row with key ' + this.rowID : 'Select row with key ' + this.rowID :\n            this.selected ? 'Deselect row' : 'Select row';\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck() {\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    public shouldDisplayPinnedChip(visibleColumnIndex: number): boolean {\n        return this.pinned && this.disabled && visibleColumnIndex === 0;\n    }\n\n    public animationEndHandler() {\n        this.onAnimationEnd.emit(this);\n    }\n\n    /**\n     * @hidden\n     */\n    protected resolveClasses(): string {\n        const indexClass = this.index % 2 ? this.grid.evenRowCSS : this.grid.oddRowCSS;\n        const selectedClass = this.selected ? 'igx-grid__tr--selected' : '';\n        const editClass = this.inEditMode ? 'igx-grid__tr--edit' : '';\n        const dirtyClass = this.dirty ? 'igx-grid__tr--edited' : '';\n        const deletedClass = this.deleted ? 'igx-grid__tr--deleted' : '';\n        const mrlClass = this.grid.hasColumnLayouts ? 'igx-grid__tr--mrl' : '';\n        const dragClass = this.dragging ? 'igx-grid__tr--drag' : '';\n        return `${this.defaultCssClass} ${indexClass} ${selectedClass} ${editClass} ${dirtyClass}\n         ${deletedClass} ${mrlClass} ${dragClass}`.trim();\n    }\n\n    /**\n     * @hidden\n     */\n    public get resolveDragIndicatorClasses(): string {\n        const defaultDragIndicatorCssClass = 'igx-grid__drag-indicator';\n        const dragIndicatorOff = this.grid.rowDragging && !this.dragging ? 'igx-grid__drag-indicator--off' : '';\n        return `${defaultDragIndicatorCssClass} ${dragIndicatorOff}`;\n    }\n\n    /**\n     * Spawns the add row UI for the specific row.\n     * @example\n     * ```typescript\n     * const row = this.grid1.getRowByIndex(1);\n     * row.beginAddRow();\n     * ```\n     */\n    public beginAddRow() {\n        this.grid.beginAddRowByIndex(this.rowID, this.index);\n    }\n}\n","import { Injectable, SecurityContext, Inject } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject } from 'rxjs';\n\n/**\n * Event emitted when a SVG icon is loaded through\n * a HTTP request.\n */\nexport interface IgxIconLoadedEvent {\n    /** Name of the icon */\n    name: string;\n    /** The actual SVG text */\n    value: string;\n    /** The fontSet for the icon. Defaults to material. */\n    fontSet: string;\n}\n\n/**\n * **Ignite UI for Angular Icon Service** -\n *\n * The Ignite UI Icon Service makes it easy for developers to include custom SVG images and use them with IgxIconComponent.\n * In addition it could be used to associate a custom class to be applied on IgxIconComponent according to given fontSet.\n *\n * Example:\n * ```typescript\n * this.iconService.registerFontSetAlias('material', 'material-icons');\n * this.iconService.addSvgIcon('aruba', '/assets/svg/country_flags/aruba.svg', 'svg-flags');\n * ```\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class IgxIconService {\n    private _fontSet = 'material-icons';\n    private _fontSetAliases = new Map<string, string>();\n    private _svgContainer: HTMLElement;\n    private _cachedSvgIcons: Set<string> = new Set<string>();\n    private _iconLoaded = new Subject<IgxIconLoadedEvent>();\n\n    /**\n     * Observable that emits when an icon is successfully loaded\n     * through a HTTP request.\n     * @example\n     * ```typescript\n     * this.service.iconLoaded.subscribe((ev: IgxIconLoadedEvent) => ...);\n     * ```\n     */\n    public iconLoaded = this._iconLoaded.asObservable();\n\n    constructor(private _sanitizer: DomSanitizer, @Inject(DOCUMENT) private _document: any) { }\n\n    /**\n     *  Returns the default font set.\n     * ```typescript\n     *   const defaultFontSet = this.iconService.defaultFontSet;\n     * ```\n     */\n    get defaultFontSet(): string {\n        return this._fontSet;\n    }\n\n    /**\n     *  Sets the default font set.\n     * ```typescript\n     *   this.iconService.defaultFontSet = 'svg-flags';\n     * ```\n     */\n    set defaultFontSet(className: string) {\n        this._fontSet = className;\n    }\n\n    /**\n     *  Registers a custom class to be applied to IgxIconComponent for a given fontSet.\n     * ```typescript\n     *   this.iconService.registerFontSetAlias('material', 'material-icons');\n     * ```\n     */\n    public registerFontSetAlias(alias: string, className: string = alias): this {\n        this._fontSetAliases.set(alias, className);\n        return this;\n    }\n\n    /**\n     *  Returns the custom class, if any, associated to a given fontSet.\n     * ```typescript\n     *   const fontSetClass = this.iconService.fontSetClassName('material');\n     * ```\n     */\n    public fontSetClassName(alias: string): string {\n        return this._fontSetAliases.get(alias) || alias;\n    }\n\n    /**\n     *  Adds an SVG image to the cache. SVG source is an url.\n     * ```typescript\n     *   this.iconService.addSvgIcon('aruba', '/assets/svg/country_flags/aruba.svg', 'svg-flags');\n     * ```\n     */\n    public addSvgIcon(iconName: string, url: string, fontSet: string = '') {\n        if (iconName && url) {\n            const safeUrl = this._sanitizer.bypassSecurityTrustResourceUrl(url);\n            if (!safeUrl) {\n                throw new Error(`The provided URL could not be processed as trusted resource URL by Angular's DomSanitizer: \"${url}\".`);\n            }\n\n            const sanitizedUrl = this._sanitizer.sanitize(SecurityContext.RESOURCE_URL, safeUrl);\n            if (!sanitizedUrl) {\n                throw new Error(`The URL provided was not trusted as a resource URL: \"${url}\".`);\n            }\n\n            this.fetchSvg(iconName, url, fontSet);\n        } else {\n            throw new Error('You should provide at least `iconName` and `url` to register an svg icon.');\n        }\n    }\n\n    /**\n     *  Adds an SVG image to the cache. SVG source is its text.\n     * ```typescript\n     *   this.iconService.addSvgIcon('simple', '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\">\n     *   <path d=\"M74 74h54v54H74\" /></svg>', 'svg-flags');\n     * ```\n     */\n    public addSvgIconFromText(iconName: string, iconText: string, fontSet: string = '') {\n        if (iconName && iconText) {\n            this.cacheSvgIcon(iconName, iconText, fontSet);\n        } else {\n            throw new Error('You should provide at least `iconName` and `iconText` to register an svg icon.');\n        }\n    }\n\n    /**\n     *  Returns whether a given SVG image is present in the cache.\n     * ```typescript\n     *   const isSvgCached = this.iconService.isSvgIconCached('aruba', 'svg-flags');\n     * ```\n     */\n    public isSvgIconCached(iconName: string, fontSet: string = ''): boolean {\n        const iconKey = this.getSvgIconKey(iconName, fontSet);\n        return this._cachedSvgIcons.has(iconKey);\n    }\n\n    /**\n     *  Returns the key of a cached SVG image.\n     * ```typescript\n     *   const svgIconKey = this.iconService.getSvgIconKey('aruba', 'svg-flags');\n     * ```\n     */\n    public getSvgIconKey(iconName: string, fontSet: string = '') {\n        return fontSet + '_' + iconName;\n    }\n\n    /**\n     * @hidden\n     */\n    private fetchSvg(iconName: string, url: string, fontSet: string = '') {\n        const instance = this;\n        const httpRequest = new XMLHttpRequest();\n        httpRequest.open('GET', url, true);\n        httpRequest.responseType = 'text';\n\n        // load  when the result is ready, that includes HTTP errors like 404.\n        httpRequest.onload = function (event: ProgressEvent) {\n            if (event) {\n                const request = event.target as XMLHttpRequest;\n                if (request.status === 200) {\n                    instance.cacheSvgIcon(iconName, request.responseText, fontSet);\n                    instance._iconLoaded.next({ name: iconName, value: request.responseText, fontSet });\n                } else {\n                    throw new Error(`Could not fetch SVG from url: ${url}; error: ${request.status} (${request.statusText})`);\n                }\n            } else {\n                throw new Error(`Could not fetch SVG from url: ${url};`);\n            }\n        };\n\n        // error  when the request couldnt be made, e.g.network down or invalid URL.\n        httpRequest.onerror = function (event: ProgressEvent) {\n            if (event) {\n                const request = event.target as XMLHttpRequest;\n                throw new Error(`Could not fetch SVG from url: ${url}; error status code: ${request.status} (${request.statusText})`);\n            }\n            throw new Error(`Could not fetch SVG from url: ${url};`);\n        };\n\n        httpRequest.send();\n    }\n\n    /**\n     * @hidden\n     */\n    private cacheSvgIcon(iconName: string, value: string, fontSet: string = '') {\n        if (iconName && value) {\n            this.ensureSvgContainerCreated();\n\n            const div = this._document.createElement('DIV');\n            div.innerHTML = value;\n            const svg = div.querySelector('svg') as SVGElement;\n\n            if (svg) {\n                const iconKey = this.getSvgIconKey(iconName, fontSet);\n\n                svg.setAttribute('id', iconKey);\n                svg.setAttribute('fit', '');\n                svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');\n                svg.setAttribute('focusable', 'false'); // Disable IE11 default behavior to make SVGs focusable.\n\n                if (this._cachedSvgIcons.has(iconKey)) {\n                    const oldChild = this._svgContainer.querySelector(`svg[id='${iconKey}']`);\n                    this._svgContainer.removeChild(oldChild);\n                }\n\n                this._svgContainer.appendChild(svg);\n                this._cachedSvgIcons.add(iconKey);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    private ensureSvgContainerCreated() {\n        if (!this._svgContainer) {\n            this._svgContainer = this._document.documentElement.querySelector('.igx-svg-container');\n            if (!this._svgContainer) {\n                this._svgContainer = this._document.createElement('DIV');\n                this._svgContainer.classList.add('igx-svg-container');\n                this._document.documentElement.appendChild(this._svgContainer);\n            }\n        }\n    }\n}\n","import { takeUntil } from 'rxjs/operators';\nimport { IgxGridActionButtonComponent } from './grid-action-button.component';\nimport { Directive, Inject, Input, AfterViewInit, QueryList, ViewChildren,\n     OnInit, IterableDiffers, IterableChangeRecord, OnDestroy } from '@angular/core';\nimport { IgxActionStripComponent } from '../action-strip.component';\nimport { IgxRowDirective } from '../../grids/row.directive';\nimport { IgxIconService } from '../../icon/icon.service';\nimport { Subject } from 'rxjs';\n\n@Directive({\n    selector: '[igxGridActionsBase]'\n})\nexport class IgxGridActionsBaseDirective implements AfterViewInit {\n    constructor(protected iconService: IgxIconService,\n        protected differs: IterableDiffers) { }\n\n    public strip: IgxActionStripComponent;\n\n    @ViewChildren(IgxGridActionButtonComponent)\n    public buttons: QueryList<IgxGridActionButtonComponent>;\n\n    /**\n     * Gets/Sets if the action buttons will be rendered as menu items. When in menu, items will be rendered with text label.\n     * @example\n     * ```html\n     *  <igx-grid-pinning-actions [asMenuItems]='true'></igx-grid-pinning-actions>\n     *  <igx-grid-editing-actions [asMenuItems]='true'></igx-grid-editing-actions>\n     * ```\n     */\n    @Input()\n    asMenuItems = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get grid() {\n        return this.strip.context.grid;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngAfterViewInit() {\n        if (this.asMenuItems) {\n                this.buttons.changes.subscribe((change: QueryList<IgxGridActionButtonComponent>) => {\n                        this.strip.cdr.detectChanges();\n                });\n        }\n    }\n\n    /**\n     * Getter to be used in template\n     * @hidden\n     * @internal\n     */\n    get isRowContext(): boolean {\n        return this.isRow(this.strip.context) && !this.strip.context.inEditMode;\n    }\n\n    /**\n     * Check if the param is a row from a grid\n     * @hidden\n     * @internal\n     * @param context\n     */\n    protected isRow(context): context is IgxRowDirective<any> {\n        return context && context instanceof IgxRowDirective;\n    }\n}\n","import { Component, HostBinding, Input } from '@angular/core';\nimport { IgxGridActionsBaseDirective } from './grid-actions-base.directive';\nimport { showMessage } from '../../core/deprecateDecorators';\nimport { addRow, addChild  } from '@igniteui/material-icons-extended';\n\n@Component({\n    selector: 'igx-grid-editing-actions',\n    templateUrl: 'grid-editing-actions.component.html',\n    providers: [{ provide: IgxGridActionsBaseDirective, useExisting: IgxGridEditingActionsComponent }]\n})\n\nexport class IgxGridEditingActionsComponent extends IgxGridActionsBaseDirective {\n\n    /**\n     * Host `class.igx-action-strip` binding.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-action-strip__editing-actions')\n    public cssClass = 'igx-action-strip__editing-actions';\n\n    private isMessageShown = false;\n    private _addRow = false;\n    private iconsRendered = false;\n\n    /**\n     * An input to enable/disable action strip row adding button\n     */\n    @Input()\n    public set addRow(value: boolean) {\n        this._addRow = value;\n    }\n    public get addRow(): boolean {\n        if (!this.iconsRendered) {\n            this.registerIcons();\n            this.iconsRendered = true;\n        }\n        return this._addRow;\n    }\n\n    /**\n     * An input to enable/disable action strip child row adding button\n     */\n    @Input()\n    public addChild = false;\n\n    /**\n     * Enter row or cell edit mode depending the grid rowEditable option\n     * @example\n     * ```typescript\n     * this.gridEditingActions.startEdit();\n     * ```\n     */\n    public startEdit(event?): void {\n        if (event) {\n            event.stopPropagation();\n        }\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const row = this.strip.context;\n        const firstEditable = row.cells.filter(cell => cell.editable)[0];\n        const grid = row.grid;\n        if (!grid.hasEditableColumns) {\n            this.isMessageShown = showMessage(\n                'The grid should be editable in order to use IgxGridEditingActionsComponent',\n                this.isMessageShown);\n                return;\n        }\n        // be sure row is in view\n        if (grid.rowList.filter(r => r === row).length !== 0) {\n            grid.crudService.enterEditMode(firstEditable);\n        }\n        this.strip.hide();\n    }\n\n    /**\n     * Delete a row according to the context\n     * @example\n     * ```typescript\n     * this.gridEditingActions.deleteRow();\n     * ```\n     */\n    public deleteRow(event?): void {\n        if (event) {\n            event.stopPropagation();\n        }\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const context = this.strip.context;\n        const grid = context.grid;\n        grid.deleteRow(context.rowID);\n        this.strip.hide();\n    }\n\n    public addRowHandler(event?, asChild?: boolean): void {\n        if (event) {\n            event.stopPropagation();\n        }\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const context = this.strip.context;\n        const grid = context.grid;\n        if (!grid.rowEditable) {\n            console.warn('The grid must use row edit mode to perform row adding! Please set rowEditable to true.');\n            return;\n        }\n        grid.beginAddRowByIndex(context.rowID, context.index, asChild);\n        this.strip.hide();\n    }\n\n    /**\n     * Getter if the row is disabled\n     * @hidden\n     * @internal\n     */\n    get disabled(): boolean {\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        return this.strip.context.disabled;\n    }\n\n    /**\n     * Getter if the row is root.\n     * @hidden\n     * @internal\n     */\n    public get isRootRow(): boolean {\n        if (!this.isRow(this.strip.context)) {\n            return false;\n        }\n        return this.strip.context.isRoot;\n    }\n\n    public get hasChildren(): boolean {\n        if (!this.isRow(this.strip.context)) {\n            return false;\n        }\n        return this.strip.context.hasChildren;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private registerIcons() {\n        this.iconService.addSvgIconFromText(addRow.name, addRow.value, 'imx-icons');\n        this.iconService.addSvgIconFromText(addChild.name, addChild.value, 'imx-icons');\n    }\n}\n","import { Component, HostBinding } from '@angular/core';\nimport { IgxGridActionsBaseDirective } from './grid-actions-base.directive';\nimport { pinLeft, unpinLeft, jumpDown, jumpUp } from '@igniteui/material-icons-extended';\n@Component({\n    selector: 'igx-grid-pinning-actions',\n    templateUrl: 'grid-pinning-actions.component.html',\n    providers: [{ provide: IgxGridActionsBaseDirective, useExisting: IgxGridPinningActionsComponent }]\n})\n\nexport class IgxGridPinningActionsComponent extends IgxGridActionsBaseDirective {\n    /**\n     * Host `class.igx-action-strip` binding.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-action-strip__pinning-actions')\n    public cssClass = 'igx-action-strip__pinning-actions';\n\n    private iconsRendered = false;\n\n    /**\n     * Getter to know if the row is pinned\n     * @hidden\n     * @internal\n     */\n    get pinned(): boolean {\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const context = this.strip.context;\n        if (context && !this.iconsRendered) {\n            this.registerSVGIcons();\n            this.iconsRendered = true;\n        }\n        return context && context.pinned;\n    }\n\n    /**\n     * Getter to know if the row is in pinned and ghost\n     * @hidden\n     * @internal\n     */\n    get inPinnedArea(): boolean {\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const context = this.strip.context;\n        return this.pinned && !context.disabled;\n    }\n\n    /**\n     * Getter to know if the row pinning is set to top or bottom\n     * @hidden\n     * @internal\n     */\n    get pinnedTop(): boolean {\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        return this.strip.context.grid.isRowPinningToTop;\n    }\n\n    /**\n     * Pin the row according to the context.\n     * @example\n     * ```typescript\n     * this.gridPinningActions.pin();\n     * ```\n     */\n    public pin(event?): void {\n        if (event) {\n            event.stopPropagation();\n        }\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const row = this.strip.context;\n        const grid = row.grid;\n        grid.pinRow(row.rowID);\n        this.strip.hide();\n    }\n\n    /**\n     * Unpin the row according to the context.\n     * @example\n     * ```typescript\n     * this.gridPinningActions.unpin();\n     * ```\n     */\n    public unpin(event?): void {\n        if (event) {\n            event.stopPropagation();\n        }\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const row = this.strip.context;\n        const grid = row.grid;\n        grid.unpinRow(row.rowID);\n        this.strip.hide();\n    }\n\n    public scrollToRow(event) {\n        if (event) {\n            event.stopPropagation();\n        }\n        const context = this.strip.context;\n        const grid = context.grid;\n        grid.scrollTo(context.rowData, 0);\n        this.strip.hide();\n    }\n\n    private registerSVGIcons(): void {\n        if (!this.isRow(this.strip.context)) {\n            return;\n        }\n        const context = this.strip.context;\n        const grid = context.grid;\n        if (grid) {\n            this.iconService.addSvgIconFromText(pinLeft.name, pinLeft.value, 'imx-icons');\n            this.iconService.addSvgIconFromText(unpinLeft.name, unpinLeft.value, 'imx-icons');\n            this.iconService.addSvgIconFromText(jumpDown.name, jumpDown.value, 'imx-icons');\n            this.iconService.addSvgIconFromText(jumpUp.name, jumpDown.value, 'imx-icons');\n        }\n    }\n}\n","import {\n    Component,\n    Directive,\n    HostBinding,\n    Input,\n    Renderer2,\n    ViewContainerRef,\n    Optional,\n    Inject,\n    ContentChildren,\n    QueryList,\n    ViewChild,\n    TemplateRef,\n    AfterContentInit,\n    IterableDiffers,\n    OnInit,\n    ChangeDetectorRef,\n    AfterViewInit\n} from '@angular/core';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { IgxDropDownComponent } from '../drop-down/public_api';\nimport { CloseScrollStrategy, OverlaySettings } from '../services/public_api';\nimport { IgxGridActionsBaseDirective } from './grid-actions/grid-actions-base.directive';\n\n@Directive({\n    selector: '[igxActionStripMenuItem]'\n})\nexport class IgxActionStripMenuItemDirective {\n    constructor(\n        public templateRef: TemplateRef<any>\n    ) { }\n}\n\n/**\n * Action Strip provides templatable area for one or more actions.\n *\n * @igxModule IgxActionStripModule\n *\n * @igxTheme igx-action-strip-theme\n *\n * @igxKeywords action, strip, actionStrip, pinning, editing\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n * The Ignite UI Action Strip is a container, overlaying its parent container,\n * and displaying action buttons with action applicable to the parent component the strip is instantiated or shown for.\n *\n * @example\n * ```html\n * <igx-action-strip #actionStrip>\n *     <igx-icon (click)=\"doSomeAction()\"></igx-icon>\n * </igx-action-strip>\n */\n@Component({\n    selector: 'igx-action-strip',\n    templateUrl: 'action-strip.component.html'\n})\n\nexport class IgxActionStripComponent extends DisplayDensityBase implements AfterContentInit, AfterViewInit {\n    constructor(\n        private _viewContainer: ViewContainerRef,\n        private renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        public cdr: ChangeDetectorRef) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Getter for the 'display' property of the current `IgxActionStrip`\n     * @hidden\n     * @internal\n     */\n    @HostBinding('style.display')\n    get display(): string {\n        return this._hidden ? 'none' : 'flex';\n    }\n\n    private _hidden = false;\n\n    /**\n     * An @Input property that set the visibility of the Action Strip.\n     * Could be used to set if the Action Strip will be initially hidden.\n     * @example\n     * ```html\n     *  <igx-action-strip [hidden]=\"false\">\n     * ```\n     */\n    @Input()\n    public set hidden(value) {\n        this._hidden = value;\n    }\n\n    public get hidden() {\n        return this._hidden;\n    }\n\n    /**\n     * Host `class.igx-action-strip` binding.\n     * @hidden\n     * @internal\n     */\n    @Input('class')\n    hostClass: string;\n\n    /**\n     * Host `attr.class` binding.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.class')\n    get hostClasses(): string {\n        const classes = [this.getComponentDensityClass('igx-action-strip')];\n        // The custom classes should be at the end.\n        if (!classes.includes('igx-action-strip')) {\n            classes.push('igx-action-strip');\n        }\n        classes.push(this.hostClass);\n        return classes.join(' ');\n    }\n\n    /**\n     * Sets the context of an action strip.\n     * The context should be an instance of a @Component, that has element property.\n     * This element will be the placeholder of the action strip.\n     * @example\n     * ```html\n     * <igx-action-strip [context]=\"cell\"></igx-action-strip>\n     * ```\n     */\n    @Input()\n    public context: any;\n    /**\n     * Menu Items ContentChildren inside the Action Strip\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxActionStripMenuItemDirective)\n    public _menuItems: QueryList<IgxActionStripMenuItemDirective>;\n\n\n    /**\n     * ActionButton as ContentChildren inside the Action Strip\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxGridActionsBaseDirective)\n    public actionButtons: QueryList<IgxGridActionsBaseDirective>;\n\n    /**\n     * Getter for menu overlay settings\n     * @hidden\n     * @internal\n     */\n    public menuOverlaySettings: OverlaySettings  = { scrollStrategy: new CloseScrollStrategy() };\n\n    /**\n     * Menu Items list.\n     * @hidden\n     * @internal\n     */\n    public get menuItems() {\n        const actions = [];\n        this.actionButtons.forEach(button => {\n            if (button.asMenuItems) {\n                const children = button.buttons;\n                if (children) {\n                    children.toArray().forEach(x => actions.push(x));\n                }\n            }\n        });\n        return [... this._menuItems.toArray(), ... actions];\n    }\n\n    /**\n     * Reference to the menu\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dropdown')\n    public menu: IgxDropDownComponent;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngAfterContentInit() {\n        this.actionButtons.forEach(button => {\n            button.strip = this;\n        });\n        this.actionButtons.changes.subscribe(change => {\n            this.actionButtons.forEach(button => {\n                button.strip = this;\n            });\n        });\n    }\n\n    ngAfterViewInit() {\n        this.menu.onSelection.subscribe(($event) => {\n            const newSelection = ($event.newSelection as any).elementRef.nativeElement;\n            let allButtons = [];\n            this.actionButtons.forEach( actionButtons => {\n                if (actionButtons.asMenuItems) {\n                    allButtons = [... allButtons, ... actionButtons.buttons.toArray()];\n                }\n            });\n            const button = allButtons.find(x => newSelection.contains(x.container.nativeElement));\n            if (button) {\n                 button.onActionClick.emit();\n            }\n         });\n    }\n\n    /**\n     * Showing the Action Strip and appending it the specified context element.\n     * @param context\n     * @example\n     * ```typescript\n     * this.actionStrip.show(row);\n     * ```\n     */\n    public show(context?: any): void {\n        this.hidden = false;\n        if (!context) {\n            return;\n        }\n        // when shown for different context make sure the menu won't stay opened\n        if (this.context !== context) {\n            this.closeMenu();\n        }\n        this.context = context;\n        if (this.context && this.context.element) {\n            this.renderer.appendChild(context.element.nativeElement, this._viewContainer.element.nativeElement);\n        }\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * Hiding the Action Strip and removing it from its current context element.\n     * @example\n     * ```typescript\n     * this.actionStrip.hide();\n     * ```\n     */\n    public hide(): void {\n        this.hidden = true;\n        this.closeMenu();\n        if (this.context && this.context.element) {\n            this.renderer.removeChild(this.context.element.nativeElement, this._viewContainer.element.nativeElement);\n        }\n    }\n\n    /**\n     * Close the menu if opened\n     * @hidden\n     * @internal\n     */\n    private closeMenu(): void {\n        if (this.menu && !this.menu.collapsed) {\n            this.menu.close();\n        }\n    }\n}\n\n","import { Component, ElementRef, HostBinding, Input, OnInit, TemplateRef, ViewChild, ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { IgxIconService } from './icon.service';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n/**\n * Icon provides a way to include material icons to markup\n *\n * @igxModule IgxIconModule\n *\n * @igxTheme igx-icon-theme\n *\n * @igxKeywords icon, picture\n *\n * @igxGroup Display\n *\n * @remarks\n *\n * The Ignite UI Icon makes it easy for developers to include material design icons directly in their markup. The icons\n * support custom colors and can be marked as active or disabled using the `isActive` property. This will change the appearance\n * of the icon.\n *\n * @example\n * ```html\n * <igx-icon color=\"#00ff00\" isActive=\"true\">home</igx-icon>\n * ```\n */\nlet NEXT_ID = 0;\n\n@Component({\n    selector: 'igx-icon',\n    templateUrl: 'icon.component.html'\n})\nexport class IgxIconComponent implements OnInit, OnDestroy {\n    @ViewChild('noLigature', { read: TemplateRef, static: true })\n    private noLigature: TemplateRef<HTMLElement>;\n\n    @ViewChild('explicitLigature', { read: TemplateRef, static: true })\n    private explicitLigature: TemplateRef<HTMLElement>;\n\n    @ViewChild('svgImage', { read: TemplateRef, static: true })\n    private svgImage: TemplateRef<HTMLElement>;\n\n    private destroy$ = new Subject<void>();\n\n    /**\n     *  This allows you to change the value of `class.igx-icon`. By default it's `igx-icon`.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-icon')\n    public cssClass = 'igx-icon';\n\n    /**\n     *  This allows you to disable the `aria-hidden` attribute. By default it's applied.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\") public icon: IgxIconComponent;\n     * constructor(private cdRef:ChangeDetectorRef) {}\n     * ngAfterViewInit() {\n     *     this.icon.ariaHidden = false;\n     *     this.cdRef.detectChanges();\n     * }\n     * ```\n     */\n    @HostBinding('attr.aria-hidden')\n    public ariaHidden = true;\n\n    /**\n     * An @Input property that sets the value of the `id` attribute.\n     * @example\n     * ```html\n     * <igx-icon id=\"igx-icon-1\" fontSet=\"material\">settings</igx-icon>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-icon-${NEXT_ID++}`;\n\n    /**\n     * An @Input property that sets the value of the `fontSet`. By default it's \"material\".\n     * @example\n     * ```html\n     * <igx-icon fontSet=\"material\">settings</igx-icon>\n     * ```\n     */\n    @Input('fontSet')\n    public font: string;\n\n    /**\n     * An @Input property that allows you to disable the `active` property. By default it's applied.\n     * @example\n     * ```html\n     * <igx-icon [isActive]=\"false\">settings</igx-icon>\n     * ```\n     */\n    @Input('isActive')\n    public active = true;\n\n    /**\n     * An @Input property that allows you to change the `iconColor` of the icon.\n     * @example\n     * ```html\n     * <igx-icon color=\"blue\">settings</igx-icon>\n     * ```\n     */\n    @Input('color')\n    public iconColor: string;\n\n    /**\n     *  An @Input property that allows you to set the `iconName` of the icon.\n     *  @example\n     * ```html\n     * <igx-icon name=\"contains\" fontSet=\"filter-icons\"></igx-icon>\n     * ```\n     */\n    @Input('name')\n    public iconName: string;\n\n    /**\n     * An ElementRef property of the `igx-icon` component.\n     */\n    public el: ElementRef;\n\n    constructor(\n            private _el: ElementRef,\n            private iconService: IgxIconService,\n            private ref: ChangeDetectorRef) {\n        this.el = _el;\n        this.font = this.iconService.defaultFontSet;\n        this.iconService.registerFontSetAlias('material', 'material-icons');\n        this.iconService.iconLoaded.pipe(\n            first(e => e.name === this.iconName && e.fontSet === this.font),\n            takeUntil(this.destroy$)\n        )\n        .subscribe(_ => this.ref.detectChanges());\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnInit() {\n        this.updateIconClass();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    /**\n     *  An accessor that returns the value of the font property.\n     * @example\n     * ```typescript\n     *  @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let iconFont = this.icon.getFontSet;\n     * }\n     * ```\n     */\n    get getFontSet(): string {\n        return this.font;\n    }\n\n    /**\n     *  An accessor that returns the value of the active property.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let iconActive = this.icon.getActive;\n     * }\n     * ```\n     */\n    get getActive(): boolean {\n        return this.active;\n    }\n\n    /**\n     *  An accessor that returns inactive property.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let iconActive = this.icon.getInactive;\n     * }\n     * ```\n     */\n    @HostBinding('class.igx-icon--inactive')\n    get getInactive(): boolean {\n        return !this.active;\n    }\n\n    /**\n     * An accessor that returns the opposite value of the `iconColor` property.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let iconColor = this.icon.getIconColor;\n     * }\n     * ```\n     */\n    @HostBinding('style.color')\n    get getIconColor(): string {\n        return this.iconColor;\n    }\n\n    /**\n     * An accessor that returns the value of the iconName property.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let iconName = this.icon.getIconName;\n     * }\n     * ```\n     */\n    get getIconName(): string {\n        return this.iconName;\n    }\n\n    /**\n     *  An accessor that returns the key of the SVG image.\n     *  The key consists of the fontSet and the iconName separated by underscore.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let svgKey = this.icon.getSvgKey;\n     * }\n     * ```\n     */\n    get getSvgKey(): string {\n        if (this.iconService.isSvgIconCached(this.iconName, this.font)) {\n            return '#' + this.iconService.getSvgIconKey(this.iconName, this.font);\n        }\n\n        return null;\n    }\n\n    /**\n     *   An accessor that returns a TemplateRef to explicit, svg or no ligature.\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyIcon\")\n     * public icon: IgxIconComponent;\n     * ngAfterViewInit() {\n     *    let iconTemplate = this.icon.template;\n     * }\n     * ```\n     */\n    get template(): TemplateRef<HTMLElement> {\n        if (this.iconName) {\n            if (this.iconService.isSvgIconCached(this.iconName, this.font)) {\n                return this.svgImage;\n            }\n\n            return this.noLigature;\n        }\n\n        return this.explicitLigature;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private updateIconClass() {\n        const className = this.iconService.fontSetClassName(this.font);\n        this.el.nativeElement.classList.add(className);\n\n        if (this.iconName && !this.iconService.isSvgIconCached(this.iconName, this.font)) {\n            this.el.nativeElement.classList.add(this.iconName);\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxIconComponent } from './icon.component';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxIconComponent],\n    exports: [IgxIconComponent],\n    imports: [CommonModule]\n})\nexport class IgxIconModule { }\n\nexport * from './icon.component';\nexport * from './icon.service';\n","import { NgModule } from '@angular/core';\nimport { IgxActionStripComponent, IgxActionStripMenuItemDirective } from './action-strip.component';\nimport { IgxGridPinningActionsComponent } from './grid-actions/grid-pinning-actions.component';\nimport { IgxGridEditingActionsComponent } from './grid-actions/grid-editing-actions.component';\nimport { IgxGridActionsBaseDirective } from './grid-actions/grid-actions-base.directive';\nimport { CommonModule } from '@angular/common';\nimport { IgxDropDownModule } from '../drop-down/public_api';\nimport { IgxToggleModule } from '../directives/toggle/toggle.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxGridActionButtonComponent } from './grid-actions/grid-action-button.component';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxActionStripComponent,\n        IgxActionStripMenuItemDirective,\n        IgxGridPinningActionsComponent,\n        IgxGridEditingActionsComponent,\n        IgxGridActionsBaseDirective,\n        IgxGridActionButtonComponent\n    ],\n    entryComponents: [\n    ],\n    exports: [\n        IgxActionStripComponent,\n        IgxActionStripMenuItemDirective,\n        IgxGridPinningActionsComponent,\n        IgxGridEditingActionsComponent,\n        IgxGridActionsBaseDirective,\n        IgxGridActionButtonComponent\n    ],\n    imports: [CommonModule, IgxDropDownModule, IgxToggleModule, IgxButtonModule, IgxIconModule, IgxRippleModule]\n})\nexport class IgxActionStripModule { }\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    HostBinding,\n    Input,\n    NgModule,\n    OnInit,\n    TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport { IgxIconModule } from '../icon/public_api';\nimport { mkenum } from '../core/utils';\n\nlet NEXT_ID = 0;\nexport const IgxAvatarSize = mkenum({\n    SMALL: 'small',\n    MEDIUM: 'medium',\n    LARGE: 'large'\n});\nexport type IgxAvatarSize = (typeof IgxAvatarSize)[keyof typeof IgxAvatarSize];\n\nexport const IgxAvatarType = mkenum({\n    INITIALS: 'initials',\n    IMAGE: 'image',\n    ICON: 'icon',\n    CUSTOM: 'custom'\n});\n\nexport type IgxAvatarType = (typeof IgxAvatarType)[keyof typeof IgxAvatarType];\n\n/**\n * Avatar provides a way to display an image, icon or initials to the user.\n *\n * @igxModule IgxAvatarModule\n *\n * @igxTheme igx-avatar-theme, igx-icon-theme\n *\n * @igxKeywords avatar, profile, picture, initials\n *\n * @igxGroup Layouts\n *\n * @remarks\n *\n * The Ignite UI Avatar provides an easy way to add an avatar icon to your application.  This icon can be an\n * image, someone's initials or a material icon from the Google Material icon set.\n *\n * @example\n * ```html\n * <igx-avatar initials=\"MS\" [roundShape]=\"true\" size=\"large\">\n * </igx-avatar>\n * ```\n */\n@Component({\n    selector: 'igx-avatar',\n    templateUrl: 'avatar.component.html'\n})\nexport class IgxAvatarComponent implements OnInit {\n\n    /**\n     * This is a reference to the avatar image element in the DOM.\n     *\n     * @example\n     * ```typescript\n     *  let image = this.avatar.image;\n     * ```\n     */\n    @ViewChild('image')\n    public image: ElementRef;\n\n    /** @hidden @internal */\n    @ViewChild('defaultTemplate', { read: TemplateRef, static: true })\n    protected defaultTemplate: TemplateRef<any>;\n\n    /** @hidden @internal */\n    @ViewChild('imageTemplate', { read: TemplateRef, static: true })\n    protected imageTemplate: TemplateRef<any>;\n\n    /** @hidden @internal */\n    @ViewChild('initialsTemplate', { read: TemplateRef, static: true })\n    protected initialsTemplate: TemplateRef<any>;\n\n    /** @hidden @internal */\n    @ViewChild('iconTemplate', { read: TemplateRef, static: true })\n    protected iconTemplate: TemplateRef<any>;\n\n    /**\n     * Returns the `aria-label` attribute of the avatar.\n     *\n     * @example\n     * ```typescript\n     * let ariaLabel = this.avatar.ariaLabel;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = 'avatar';\n\n    /**\n     * Returns the `role` attribute of the avatar.\n     *\n     * @example\n     * ```typescript\n     * let avatarRole = this.avatar.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'img';\n\n    /**\n     * Host `class.igx-avatar` binding.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-avatar')\n    public cssClass = 'igx-avatar';\n\n    /**\n     * Returns the type of the avatar.\n     * The avatar can be:\n     * - `\"initials type avatar\"`\n     * - `\"icon type avatar\"`\n     * - `\"image type avatar\"`.\n     * - `\"custom type avatar\"`.\n     *\n     * @example\n     * ```typescript\n     * let avatarDescription = this.avatar.roleDescription;\n     * ```\n     */\n    @HostBinding('attr.aria-roledescription')\n    public roleDescription: string;\n\n    /**\n     * Sets the `id` of the avatar. If not set, the first avatar component will have `id` = `\"igx-avatar-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-avatar id=\"my-first-avatar\"></igx-avatar>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-avatar-${NEXT_ID++}`;\n\n    /**\n     * Sets a round shape to the avatar, if `[roundShape]` is set to `true`.\n     * By default the shape of the avatar is a square.\n     *\n     * @example\n     * ```html\n     * <igx-avatar [roundShape]=\"true\" ></igx-avatar>\n     * ```\n     */\n\n    @HostBinding('class.igx-avatar--rounded')\n    @Input()\n    public roundShape = false;\n\n    /**\n     * Sets the color of the avatar's initials or icon.\n     *\n     * @example\n     * ```html\n     * <igx-avatar color=\"blue\"></igx-avatar>\n     * ```\n     */\n\n    @HostBinding('style.color')\n    @Input()\n    public color: string;\n\n    /**\n     * Sets the background color of the avatar.\n     *\n     * @example\n     * ```html\n     * <igx-avatar bgColor=\"yellow\"></igx-avatar>\n     * ```\n     * @igxFriendlyName Background color\n     */\n\n    @HostBinding('style.background')\n    @Input()\n    public bgColor: string;\n\n    /**\n     * Sets initials to the avatar.\n     *\n     * @example\n     * ```html\n     * <igx-avatar initials=\"MN\"></igx-avatar>\n     * ```\n     */\n    @Input()\n    public initials: string;\n\n    /**\n     * Sets an icon to the avatar. All icons from the material icon set are supported.\n     *\n     * @example\n     * ```html\n     * <igx-avatar icon=\"phone\"></igx-avatar>\n     * ```\n     */\n    @Input()\n    public icon: string;\n\n    /**\n     * Sets the image source of the avatar.\n     *\n     * @example\n     * ```html\n     * <igx-avatar src=\"images/picture.jpg\"></igx-avatar>\n     * ```\n     * @igxFriendlyName Image URL\n     */\n    @Input()\n    public src: string;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _size: string | IgxAvatarSize = IgxAvatarSize.SMALL;\n    /**\n     * Returns the size of the avatar.\n     *\n     * @example\n     * ```typescript\n     * let avatarSize = this.avatar.size;\n     * ```\n     */\n    @Input()\n    public get size(): string | IgxAvatarSize {\n        return this._size;\n    }\n\n    /**\n     * Sets the size  of the avatar.\n     * By default, the size is `\"small\"`. It can be set to `\"medium\"` or `\"large\"`.\n     *\n     * @example\n     * ```html\n     * <igx-avatar size=\"large\"></igx-avatar>\n     * ```\n     */\n    public set size(value: string | IgxAvatarSize) {\n        switch (value) {\n            case 'small':\n            case 'medium':\n            case 'large':\n                this._size = value;\n                break;\n            default:\n                this._size = 'small';\n        }\n    }\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-avatar--small')\n    get _isSmallSize(): boolean {\n        return this.size === 'small';\n    }\n    /** @hidden @internal */\n    @HostBinding('class.igx-avatar--medium')\n    get _isMediumSize(): boolean {\n        return this.size === 'medium';\n    }\n    /** @hidden @internal */\n    @HostBinding('class.igx-avatar--large')\n    get _isLargeSize(): boolean {\n        return this.size === 'large';\n    }\n\n    /**\n     * Returns the type of the avatar.\n     *\n     * @example\n     * ```typescript\n     * let avatarType = this.avatar.type;\n     * ```\n     */\n    get type(): IgxAvatarType {\n        if (this.src) {\n            return IgxAvatarType.IMAGE;\n        }\n\n        if (this.icon) {\n            return IgxAvatarType.ICON;\n        }\n\n        if (this.initials) {\n            return IgxAvatarType.INITIALS;\n        }\n\n        return IgxAvatarType.CUSTOM;\n    }\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-avatar--image')\n    get _isImageType(): boolean {\n        return this.type === IgxAvatarType.IMAGE;\n    }\n    /** @hidden @internal */\n    @HostBinding('class.igx-avatar--icon')\n    get _isIconType(): boolean {\n        return this.type === IgxAvatarType.ICON;\n    }\n    /** @hidden @internal */\n    @HostBinding('class.igx-avatar--initials')\n    get _isInitialsType(): boolean {\n        return this.type === IgxAvatarType.INITIALS;\n    }\n\n    /**\n     * Returns the template of the avatar.\n     *\n     * @hidden\n     * @internal\n     */\n    get template(): TemplateRef<any> {\n        switch (this.type) {\n            case IgxAvatarType.IMAGE:\n                return this.imageTemplate;\n            case IgxAvatarType.INITIALS:\n                return this.initialsTemplate;\n            case IgxAvatarType.ICON:\n                return this.iconTemplate;\n            default:\n                return this.defaultTemplate;\n        }\n    }\n\n    constructor(public elementRef: ElementRef) { }\n\n    /** @hidden @internal */\n    public ngOnInit() {\n        this.roleDescription = this.getRole();\n    }\n\n    /** @hidden @internal */\n    private getRole(): string {\n        switch (this.type) {\n            case IgxAvatarType.IMAGE:\n                return 'image avatar';\n            case IgxAvatarType.ICON:\n                return 'icon avatar';\n            case IgxAvatarType.INITIALS:\n                return 'initials avatar';\n            default:\n                return 'custom avatar';\n        }\n    }\n\n    /**\n     * Returns the css url of the image.\n     *\n     * @hidden\n     * @internal\n     */\n    public getSrcUrl() {\n        return `url(${this.src})`;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxAvatarComponent],\n    exports: [IgxAvatarComponent],\n    imports: [CommonModule, IgxIconModule]\n})\nexport class IgxAvatarModule { }\n","import { CommonModule } from '@angular/common';\nimport { Component, HostBinding, Input, NgModule } from '@angular/core';\nimport { IgxIconModule } from '../icon/public_api';\nimport { mkenum } from '../core/utils';\n\nlet NEXT_ID = 0;\n\n/**\n * Determines the igxBadge type\n */\nexport const IgxBadgeType = mkenum({\n    PRIMARY: 'primary',\n    INFO: 'info',\n    SUCCESS: 'success',\n    WARNING: 'warning',\n    ERROR: 'error'\n});\nexport type IgxBadgeType = (typeof IgxBadgeType)[keyof typeof IgxBadgeType];\n/**\n * Badge provides visual notifications used to decorate avatars, menus, etc.\n *\n * @igxModule IgxBadgeModule\n *\n * @igxTheme igx-badge-theme\n *\n * @igxKeywords badge, icon, notification\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n * The Ignite UI Badge is used to decorate avatars, navigation menus, or other components in the\n * application when visual notification is needed. They are usually designed as icons with a predefined\n * style to communicate information, success, warnings, or errors.\n *\n * @example\n * ```html\n * <igx-avatar>\n *   <igx-badge icon=\"check\" type=\"success\"></igx-badge>\n * </igx-avatar>\n */\n@Component({\n    selector: 'igx-badge',\n    templateUrl: 'badge.component.html'\n})\nexport class IgxBadgeComponent {\n\n   /**\n    * Sets/gets the `id` of the badge.\n    *\n    * @remarks\n    * If not set, the `id` will have value `\"igx-badge-0\"`.\n    *\n    * @example\n    * ```html\n    * <igx-badge id=\"igx-badge-2\"></igx-badge>\n    * ```\n    */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-badge-${NEXT_ID++}`;\n\n   /**\n    * Sets/gets the type of the badge.\n    *\n    * @remarks\n    * Allowed values are `primary`, `info`, `success`, `warning`, `error`.\n    * Providing an invalid value won't display a badge.\n    *\n    * @example\n    * ```html\n    * <igx-badge type=\"success\"></igx-badge>\n    * ```\n    */\n    @Input()\n    public type: string | IgxBadgeType = IgxBadgeType.PRIMARY;\n\n   /**\n    * Sets/gets the value to be displayed inside the badge.\n    *\n    * @remarks\n    * If an `icon` property is already set the `icon` will be displayed.\n    * If neither a `value` nor an `icon` is set the content of the badge will be empty.\n    *\n    * @example\n    * ```html\n    * <igx-badge value=\"11\"></igx-badge>\n    * ```\n    */\n    @Input()\n    public value: string | number = '';\n\n    /**\n     * Sets/gets an icon for the badge from the material icons set.\n     *\n     * @remarks\n     * Has priority over the `value` property.\n     * If neither a `value` nor an `icon` is set the content of the badge will be empty.\n     * Providing an invalid value won't display anything.\n     *\n     * @example\n     * ```html\n     * <igx-badge icon=\"check\"></igx-badge>\n     * ```\n     */\n    @Input()\n    public icon: string;\n\n    /**\n     * Sets/gets the role attribute value.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyBadge\", { read: IgxBadgeComponent })\n     * public badge: IgxBadgeComponent;\n     *\n     * badge.role = 'status';\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'status';\n\n    /**\n     * Sets/gets the the css class to use on the badge.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyBadge\", { read: IgxBadgeComponent })\n     * public badge: IgxBadgeComponent;\n     *\n     * badge.cssClass = 'my-badge-class';\n     * ```\n     */\n    @HostBinding('class.igx-badge')\n    public cssClass = 'igx-badge';\n\n    /**\n     * Sets/gets the aria-label attribute value.\n     *\n     * @example\n     * ```typescript\n     * @ViewChild(\"MyBadge\", { read: IgxBadgeComponent })\n     * public badge: IgxBadgeComponent;\n     *\n     * badge.label = 'badge';\n     * ```\n     */\n    @HostBinding('attr.aria-label')\n    public label = 'badge';\n\n    /**\n     * Defines a human-readable, accessor, author-localized description for\n     * the `type` and the `icon` or `value` of the element.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.aria-roledescription')\n    get roleDescription() {\n        // tslint:disable-next-line:prefer-conditional-expression\n        if (this.icon) {\n            return this.type + ' type badge with icon type ' + this.icon;\n        } else if (this.value || this.value === 0) {\n            return this.type + ' badge type with value ' + this.value;\n        }\n        return this.type + ' badge type without value';\n    }\n\n    @HostBinding('class.igx-badge--info')\n    public get infoClass() {\n        return this.type === IgxBadgeType.INFO;\n    }\n\n    @HostBinding('class.igx-badge--success')\n    public get successClass() {\n        return this.type === IgxBadgeType.SUCCESS;\n    }\n\n    @HostBinding('class.igx-badge--warning')\n    public get warningClass() {\n        return this.type === IgxBadgeType.WARNING;\n    }\n\n    @HostBinding('class.igx-badge--error')\n    public get errorClass() {\n        return this.type === IgxBadgeType.ERROR;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxBadgeComponent],\n    exports: [IgxBadgeComponent],\n    imports: [CommonModule, IgxIconModule]\n})\nexport class IgxBadgeModule { }\n","import { EventEmitter, InjectionToken } from '@angular/core';\nimport { AnimationReferenceMetadata } from '@angular/animations';\nimport { CancelableEventArgs, IBaseEventArgs } from '../core/utils';\n\nexport interface IgxExpansionPanelBase {\n    id: string;\n    cssClass: string;\n    /** @hidden @internal */\n    headerId: string;\n    collapsed: boolean;\n    animationSettings: { openAnimation: AnimationReferenceMetadata, closeAnimation: AnimationReferenceMetadata };\n    onCollapsed: EventEmitter<any>;\n    onExpanded: EventEmitter<any>;\n    collapse(evt?: Event);\n    expand(evt?: Event);\n    toggle(evt?: Event);\n}\n\n/** @hidden */\nexport const IGX_EXPANSION_PANEL_COMPONENT = new InjectionToken<IgxExpansionPanelBase>('IgxExpansionPanelToken');\n\nexport interface IExpansionPanelEventArgs extends IBaseEventArgs {\n    event: Event;\n    /**\n     * @deprecated\n     * To get a reference to the panel, use `owner` instead.\n     */\n    panel?: IgxExpansionPanelBase;\n}\n\nexport interface IExpansionPanelCancelableEventArgs  extends IExpansionPanelEventArgs, CancelableEventArgs {}\n","import { Component, HostBinding, ElementRef, Input, ChangeDetectorRef, Inject } from '@angular/core';\nimport { IgxExpansionPanelBase, IGX_EXPANSION_PANEL_COMPONENT } from './expansion-panel.common';\n\n@Component({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-body',\n    template: `<ng-content></ng-content>`\n})\nexport class IgxExpansionPanelBodyComponent {\n    private _labelledBy = '';\n    private _label = '';\n    constructor(\n        @Inject(IGX_EXPANSION_PANEL_COMPONENT) public panel: IgxExpansionPanelBase,\n        public element: ElementRef, public cdr: ChangeDetectorRef) {\n    }\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-expansion-panel__body')\n    public cssClass = `igx-expansion-panel__body`;\n\n    /**\n     * Gets the `aria-label` attribute of the panel body\n     * Defaults to the panel id with '-region' in the end;\n     * Get\n     * ```typescript\n     *  const currentLabel = this.panel.body.label;\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-label')\n    public get label(): string {\n        return this._label || this.panel.id + '-region';\n    }\n    /**\n     * Sets the `aria-label` attribute of the panel body\n     * ```typescript\n     *  this.panel.body.label = 'my-custom-label';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-body [label]=\"'my-custom-label'\"></igx-expansion-panel-body>\n     * ```\n     */\n    public set label(val: string) {\n        this._label = val;\n    }\n\n    /**\n     * Gets the `aria-labelledby` attribute of the panel body\n     * Defaults to the panel header id;\n     * Get\n     * ```typescript\n     *  const currentLabel = this.panel.body.labelledBy;\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-labelledby')\n    public get labelledBy(): string {\n        return this._labelledBy;\n    }\n    /**\n     * Sets the `aria-labelledby` attribute of the panel body\n     * ```typescript\n     *  this.panel.body.labelledBy = 'my-custom-id';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-body [labelledBy]=\"'my-custom-id'\"></igx-expansion-panel-body>\n     * ```\n     */\n    public set labelledBy(val: string) {\n        this._labelledBy = val;\n    }\n\n    /**\n     * Gets/sets the `role` attribute of the panel body\n     * Default is 'region';\n     * Get\n     * ```typescript\n     *  const currentRole = this.panel.body.role;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.body.role = 'content';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-body [role]=\"'custom'\"></igx-expansion-panel-body>\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.role')\n    public role = 'region';\n}\n","import { Directive, HostBinding } from '@angular/core';\n\n/**\n * @hidden @internal\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-title'\n})\nexport class IgxExpansionPanelTitleDirective {\n    @HostBinding('class.igx-expansion-panel__header-title')\n    public cssClass = `igx-expansion-panel__header-title`;\n}\n\n/**\n * @hidden @internal\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-description'\n})\nexport class IgxExpansionPanelDescriptionDirective {\n    @HostBinding('class.igx-expansion-panel__header-description')\n    public cssClass = `igx-expansion-panel__header-description`;\n}\n\n/**\n * @hidden @internal\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-expansion-panel-icon'\n})\nexport class IgxExpansionPanelIconDirective {\n}\n","import {\n    Component,\n    ChangeDetectorRef,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    Host,\n    EventEmitter,\n    Output,\n    ContentChild,\n    Inject,\n    ViewChild\n} from '@angular/core';\nimport { IgxExpansionPanelIconDirective } from './expansion-panel.directives';\nimport { IGX_EXPANSION_PANEL_COMPONENT, IgxExpansionPanelBase, IExpansionPanelCancelableEventArgs  } from './expansion-panel.common';\nimport { mkenum } from '../core/utils';\nimport { IgxIconComponent } from '../icon/public_api';\n\n/**\n * @hidden\n */\nexport const ICON_POSITION = mkenum({\n    LEFT: 'left',\n    NONE: 'none',\n    RIGHT: 'right'\n});\nexport type ICON_POSITION = (typeof ICON_POSITION)[keyof typeof ICON_POSITION];\n\n\n@Component({\n    selector: 'igx-expansion-panel-header',\n    templateUrl: 'expansion-panel-header.component.html'\n})\nexport class IgxExpansionPanelHeaderComponent {\n     // properties section\n    private _iconTemplate = false;\n    /**\n     * Sets/gets the `id` of the expansion panel header.\n     * ```typescript\n     * let panelHeaderId =  this.panel.header.id;\n     * ```\n     * @memberof IgxExpansionPanelComponent\n     */\n    public id = '';\n\n    /** @hidden @internal */\n    @ContentChild(IgxExpansionPanelIconDirective, { read: ElementRef })\n    private customIconRef: ElementRef;\n\n    /** @hidden @internal */\n    @ViewChild(IgxIconComponent, { read: ElementRef })\n    public defaultIconRef: ElementRef;\n\n    /**\n     * Returns a reference to the `igx-expansion-panel-icon` element;\n     * If `iconPosition` is `NONE` - return null;\n     */\n    public get iconRef(): ElementRef {\n        const renderedTemplate = this.customIconRef  ?? this.defaultIconRef;\n        return this.iconPosition !== ICON_POSITION.NONE ? renderedTemplate : null;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxExpansionPanelIconDirective)\n    public set iconTemplate(val: any) {\n        this._iconTemplate = <boolean>val;\n    }\n\n    /**\n     * @hidden\n     */\n    public get iconTemplate(): any {\n        return this._iconTemplate;\n    }\n\n    /**\n     * Gets/sets the `aria-level` attribute of the header\n     * Get\n     * ```typescript\n     *  const currentAriaLevel = this.panel.header.lv;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.lv = '5';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [lv]=\"myCustomLevel\"></igx-expansion-panel-header>\n     * ```\n     */\n    @HostBinding('attr.aria-level')\n    @Input()\n    public lv = '3';\n\n    /**\n     * Gets/sets the `role` attribute of the header\n     * Get\n     * ```typescript\n     *  const currentRole = this.panel.header.role;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.role = '5';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [role]=\"'custom'\"></igx-expansion-panel-header>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'heading';\n\n    /**\n     * @hidden\n     */\n    public get controls (): string {\n        return this.panel.id;\n    }\n\n    /**\n     * Gets/sets the position of the expansion-panel-header expand/collapse icon\n     * Accepts `left`, `right` or `none`\n     * ```typescript\n     *  const currentIconPosition = this.panel.header.iconPosition;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.iconPosition = 'left';\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [iconPosition]=\"'right'\"></igx-expansion-panel-header>\n     * ```\n     */\n    @Input()\n    public iconPosition: ICON_POSITION = ICON_POSITION.LEFT;\n\n    /**\n     * Emitted whenever a user interacts with the header host\n     * ```typescript\n     *  handleInteraction(event: IExpansionPanelCancelableEventArgs) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header (onInteraction)=\"handleInteraction($event)\">\n     *      ...\n     *  </igx-expansion-panel-header>\n     * ```\n     */\n    @Output()\n    public onInteraction = new EventEmitter<IExpansionPanelCancelableEventArgs >();\n\n    /**\n     * @hidden\n     */\n     @HostBinding('class.igx-expansion-panel__header')\n     public cssClass = 'igx-expansion-panel__header';\n\n     /**\n      * @hidden\n      */\n     @HostBinding('class.igx-expansion-panel__header--expanded')\n     public get isExpanded () {\n            return !this.panel.collapsed;\n         }\n\n    /**\n     * Gets/sets the whether the header is disabled\n     * When disabled, the header will not handle user events and will stop their propagation\n     *\n     * ```typescript\n     *  const isDisabled = this.panel.header.disabled;\n     * ```\n     * Set\n     * ```typescript\n     *  this.panel.header.disabled = true;\n     * ```\n     * ```html\n     *  <igx-expansion-panel-header [disabled]=\"true\">\n     *     ...\n     *  </igx-expansion-panel-header>\n     * ```\n     */\n    @Input()\n    @HostBinding('class.igx-expansion-panel--disabled')\n    public disabled = false;\n\n    constructor(@Host() @Inject(IGX_EXPANSION_PANEL_COMPONENT) public panel: IgxExpansionPanelBase, public cdr: ChangeDetectorRef,\n     public elementRef: ElementRef) {\n         this.id = `${this.panel.id}-header`;\n     }\n\n     /**\n      * @hidden\n      */\n     @HostListener('keydown.Enter', ['$event'])\n     @HostListener('keydown.Space', ['$event'])\n     @HostListener('keydown.Spacebar', ['$event'])\n     @HostListener('click', ['$event'])\n     public onAction(evt?: Event) {\n         if (this.disabled) {\n            evt.stopPropagation();\n            return;\n         }\n         const eventArgs: IExpansionPanelCancelableEventArgs  = { event: evt, panel: this.panel, owner: this.panel, cancel: false };\n         this.onInteraction.emit(eventArgs);\n         if (eventArgs.cancel === true) {\n             return;\n         }\n         this.panel.toggle(evt);\n         evt.preventDefault();\n     }\n\n    /** @hidden @internal */\n    @HostListener('keydown.Alt.ArrowDown', ['$event'])\n    public openPanel(event: KeyboardEvent) {\n        if (event.altKey) {\n            const eventArgs: IExpansionPanelCancelableEventArgs  = { event, panel: this.panel, owner: this.panel, cancel: false };\n            this.onInteraction.emit(eventArgs);\n            if (eventArgs.cancel === true) {\n                return;\n            }\n            this.panel.expand(event);\n        }\n     }\n\n     /** @hidden @internal */\n     @HostListener('keydown.Alt.ArrowUp', ['$event'])\n     public closePanel(event: KeyboardEvent) {\n        if (event.altKey) {\n            const eventArgs: IExpansionPanelCancelableEventArgs  = { event, panel: this.panel, owner: this.panel, cancel: false };\n            this.onInteraction.emit(eventArgs);\n            if (eventArgs.cancel === true) {\n                return;\n            }\n            this.panel.collapse(event);\n        }\n     }\n\n     /**\n      * @hidden\n      */\n     public get iconPositionClass(): string {\n        switch (this.iconPosition) {\n            case (ICON_POSITION.LEFT):\n                return `igx-expansion-panel__header-icon--start`;\n            case (ICON_POSITION.RIGHT):\n                return `igx-expansion-panel__header-icon--end`;\n            case (ICON_POSITION.NONE):\n                return `igx-expansion-panel__header-icon--none`;\n            default:\n                return '';\n        }\n     }\n}\n","import {\n    Component,\n    ChangeDetectorRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    Output,\n    ContentChild,\n    AfterContentInit\n} from '@angular/core';\nimport { AnimationBuilder, AnimationReferenceMetadata, useAnimation } from '@angular/animations';\nimport { growVerOut, growVerIn } from '../animations/main';\nimport { IgxExpansionPanelBodyComponent } from './expansion-panel-body.component';\nimport { IgxExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { IGX_EXPANSION_PANEL_COMPONENT, IgxExpansionPanelBase, IExpansionPanelEventArgs } from './expansion-panel.common';\n\nlet NEXT_ID = 0;\n\nexport interface AnimationSettings {\n    openAnimation: AnimationReferenceMetadata;\n    closeAnimation: AnimationReferenceMetadata;\n}\n@Component({\n    selector: 'igx-expansion-panel',\n    templateUrl: 'expansion-panel.component.html',\n    providers: [{ provide: IGX_EXPANSION_PANEL_COMPONENT, useExisting: IgxExpansionPanelComponent }]\n})\nexport class IgxExpansionPanelComponent implements IgxExpansionPanelBase, AfterContentInit {\n    private _collapsed = true;\n    /**\n     * Sets/gets the animation settings of the expansion panel component\n     * Open and Close animation should be passed\n     *\n     * Get\n     * ```typescript\n     *  const currentAnimations = this.panel.animationSettings;\n     * ```\n     * Set\n     * ```typescript\n     *  import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     *  ...\n     *  this.panel.animationsSettings = {\n     *      openAnimation: slideInLeft,\n     *      closeAnimation: slideOutRight\n     * };\n     * ```\n     * or via template\n     * ```typescript\n     *  import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     *  ...\n     *  myCustomAnimationObject = {\n     *      openAnimation: slideInLeft,\n     *      closeAnimation: slideOutRight\n     * };\n     * ```html\n     *  <igx-expansion-panel [animationSettings]='myCustomAnimationObject'>\n     *  ...\n     *  </igx-expansion-panel>\n     * ```\n     */\n    @Input()\n    public animationSettings: AnimationSettings = {\n        openAnimation: growVerIn,\n        closeAnimation: growVerOut\n    };\n\n    /**\n     * Sets/gets the `id` of the expansion panel component.\n     * If not set, `id` will have value `\"igx-expansion-panel-0\"`;\n     * ```html\n     * <igx-expansion-panel id = \"my-first-expansion-panel\"></igx-expansion-panel>\n     * ```\n     * ```typescript\n     * let panelId =  this.panel.id;\n     * ```\n     * @memberof IgxExpansionPanelComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-expansion-panel-${NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-expansion-panel')\n    public cssClass = 'igx-expansion-panel';\n\n    /**\n     * Gets/sets whether the component is collapsed (its content is hidden)\n     * Get\n     * ```typescript\n     *  const myPanelState: boolean = this.panel.collapsed;\n     * ```\n     * Set\n     * ```html\n     *  this.panel.collapsed = true;\n     * ```\n     *\n     * Two-way data binding:\n     * ```html\n     * <igx-expansion-panel [(collapsed)]=\"model.isCollapsed\"></igx-expansion-panel>\n     * ```\n     */\n    @Input()\n    public get collapsed(): boolean {\n        return this._collapsed;\n    }\n    public set collapsed(value) {\n        this._collapsed = value;\n        this.collapsedChange.emit(this._collapsed);\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public collapsedChange = new EventEmitter<boolean>();\n\n    /**\n     * Emitted when the expansion panel finishes collapsing\n     * ```typescript\n     *  handleCollapsed(event: IExpansionPanelEventArgs)\n     * ```\n     * ```html\n     *  <igx-expansion-panel (onCollapsed)=\"handleCollapsed($event)\">\n     *      ...\n     *  </igx-expansion-panel>\n     * ```\n     */\n    @Output()\n    public onCollapsed = new EventEmitter<IExpansionPanelEventArgs>();\n\n    /**\n     * Emitted when the expansion panel finishes expanding\n     * ```typescript\n     *  handleExpanded(event: IExpansionPanelEventArgs)\n     * ```\n     * ```html\n     *  <igx-expansion-panel (onExpanded)=\"handleExpanded($event)\">\n     *      ...\n     *  </igx-expansion-panel>\n     * ```\n     */\n    @Output()\n    public onExpanded = new EventEmitter<IExpansionPanelEventArgs>();\n\n    /**\n     * @hidden\n     */\n    public get headerId() {\n        return this.header ? `${this.id}-header` : '';\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxExpansionPanelBodyComponent, { read: IgxExpansionPanelBodyComponent })\n    public body: IgxExpansionPanelBodyComponent;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxExpansionPanelHeaderComponent, { read: IgxExpansionPanelHeaderComponent })\n    public header: IgxExpansionPanelHeaderComponent;\n\n    constructor(private cdr: ChangeDetectorRef, private builder: AnimationBuilder) { }\n\n    /** @hidden */\n    ngAfterContentInit(): void {\n        if (this.body && this.header) {\n            // schedule at end of turn:\n            Promise.resolve().then(() => {\n                this.body.labelledBy = this.body.labelledBy || this.headerId;\n                this.body.label = this.body.label || this.id + '-region';\n            });\n        }\n    }\n\n    private playOpenAnimation(cb: () => void) {\n        if (!this.body) { // if not body element is passed, there is nothing to animate\n            return;\n        }\n        const animation = useAnimation(this.animationSettings.openAnimation);\n        const animationBuilder = this.builder.build(animation);\n        const openAnimationPlayer = animationBuilder.create(this.body.element.nativeElement);\n\n        openAnimationPlayer.onDone(() => {\n            cb();\n            openAnimationPlayer.reset();\n        });\n\n        openAnimationPlayer.play();\n    }\n\n    private playCloseAnimation(cb: () => void) {\n        if (!this.body) { // if not body element is passed, there is nothing to animate\n            return;\n        }\n        const animation = useAnimation(this.animationSettings.closeAnimation);\n        const animationBuilder = this.builder.build(animation);\n        const closeAnimationPlayer = animationBuilder.create(this.body.element.nativeElement);\n        closeAnimationPlayer.onDone(() => {\n            cb();\n            closeAnimationPlayer.reset();\n        });\n\n        closeAnimationPlayer.play();\n    }\n\n    /**\n     * Collapses the panel\n     *\n     * ```html\n     *  <igx-expansion-panel #myPanel>\n     *      ...\n     *  </igx-expansion-panel>\n     *  <button (click)=\"myPanel.collapse($event)\">Collpase Panel</button>\n     * ```\n     */\n    collapse(evt?: Event) {\n        if (this.collapsed) { // If expansion panel is already collapsed, do nothing\n            return;\n        }\n        this.playCloseAnimation(\n            () => {\n                this.onCollapsed.emit({ event: evt, panel: this, owner: this });\n                this.collapsed = true;\n            }\n        );\n    }\n\n    /**\n     * Expands the panel\n     *\n     * ```html\n     *  <igx-expansion-panel #myPanel>\n     *      ...\n     *  </igx-expansion-panel>\n     *  <button (click)=\"myPanel.expand($event)\">Expand Panel</button>\n     * ```\n     */\n    expand(evt?: Event) {\n        if (!this.collapsed) { // If the panel is already opened, do nothing\n            return;\n        }\n        this.collapsed = false;\n        this.cdr.detectChanges();\n        this.playOpenAnimation(\n            () => {\n                this.onExpanded.emit({ event: evt, panel: this, owner: this });\n            }\n        );\n    }\n\n    /**\n     * Toggles the panel\n     *\n     * ```html\n     *  <igx-expansion-panel #myPanel>\n     *      ...\n     *  </igx-expansion-panel>\n     *  <button (click)=\"myPanel.toggle($event)\">Expand Panel</button>\n     * ```\n     */\n    toggle(evt?: Event) {\n        if (this.collapsed) {\n            this.open(evt);\n        } else {\n            this.close(evt);\n        }\n    }\n\n    open(evt?: Event) {\n        this.expand(evt);\n    }\n    close(evt?: Event) {\n        this.collapse(evt);\n    }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxAvatarModule } from '../avatar/avatar.component';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxExpansionPanelComponent } from './expansion-panel.component';\nimport { IgxExpansionPanelHeaderComponent } from './expansion-panel-header.component';\nimport { IgxExpansionPanelBodyComponent } from './expansion-panel-body.component';\nimport {\n    IgxExpansionPanelDescriptionDirective,\n    IgxExpansionPanelTitleDirective,\n    IgxExpansionPanelIconDirective\n} from './expansion-panel.directives';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxExpansionPanelComponent,\n    IgxExpansionPanelHeaderComponent,\n    IgxExpansionPanelBodyComponent,\n    IgxExpansionPanelDescriptionDirective,\n    IgxExpansionPanelTitleDirective,\n    IgxExpansionPanelIconDirective\n  ],\n  entryComponents: [\n  ],\n  exports: [\n    IgxExpansionPanelComponent,\n    IgxExpansionPanelHeaderComponent,\n    IgxExpansionPanelBodyComponent,\n    IgxExpansionPanelDescriptionDirective,\n    IgxExpansionPanelTitleDirective,\n      IgxExpansionPanelIconDirective\n  ],\n  imports: [\n    CommonModule,\n    IgxRippleModule,\n    IgxIconModule,\n    IgxButtonModule,\n    IgxAvatarModule\n  ]\n})\nexport class IgxExpansionPanelModule {\n}\n","import { Directive } from '@angular/core';\n\n// tslint:disable:directive-selector\n@Directive({\n    selector: 'igx-banner-actions'\n})\nexport class IgxBannerActionsDirective {\n}\n","import { Component, NgModule, EventEmitter, Output, Input, ViewChild, ElementRef,\n    ContentChild, HostBinding } from '@angular/core';\nimport { IgxExpansionPanelModule } from '../expansion-panel/expansion-panel.module';\nimport { AnimationSettings } from '../expansion-panel/expansion-panel.component';\nimport { IgxExpansionPanelComponent } from '../expansion-panel/public_api';\nimport { IgxIconModule, IgxIconComponent } from '../icon/public_api';\nimport { IToggleView } from '../core/navigation';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxBannerActionsDirective } from './banner.directives';\nimport { CommonModule } from '@angular/common';\nimport { CancelableEventArgs, IBaseEventArgs } from '../core/utils';\n\nexport interface BannerEventArgs extends IBaseEventArgs {\n    banner: IgxBannerComponent;\n    event?: Event;\n}\n\nexport interface BannerCancelEventArgs extends BannerEventArgs, CancelableEventArgs {\n}\n/**\n * **Ignite UI for Angular Banner** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/banner.html)\n *\n * The Ignite UI Banner provides a highly templateable and easy to use banner that can be shown in your application.\n *\n * Usage:\n *\n * ```html\n * <igx-banner #banner>\n *   Our privacy settings have changed.\n *  <igx-banner-actions>\n *      <button igxButton=\"raised\">Read More</button>\n *      <button igxButton=\"raised\">Accept and Continue</button>\n *  </igx-banner-actions>\n * </igx-banner>\n * ```\n */\n@Component({\n    selector: 'igx-banner',\n    templateUrl: 'banner.component.html'\n})\nexport class IgxBannerComponent implements IToggleView {\n    private _bannerEvent: BannerEventArgs;\n    private _animationSettings: AnimationSettings;\n\n    @ViewChild('expansionPanel', { static: true })\n    private _expansionPanel: IgxExpansionPanelComponent;\n\n    @ContentChild(IgxBannerActionsDirective)\n    private _bannerActionTemplate: IgxBannerActionsDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxIconComponent)\n    public bannerIcon: IgxIconComponent;\n\n    /**\n     * Fires after the banner shows up\n     * ```typescript\n     * public handleOpened(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onOpened)=\"handleOpened($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<BannerEventArgs>();\n\n    /**\n     * Fires before the banner shows up\n     * ```typescript\n     * public handleOpening(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onOpening)=\"handleOpening($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<BannerCancelEventArgs>();\n\n    /**\n     * Fires after the banner hides\n     * ```typescript\n     * public handleClosed(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onClosed)=\"handleClosed($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<BannerEventArgs>();\n\n    /**\n     * Fires before the banner hides\n     * ```typescript\n     * public handleClosing(event) {\n     *  ...\n     * }\n     * ```\n     * ```html\n     * <igx-banner (onClosing)=\"handleClosing($event)\"></igx-banner>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<BannerCancelEventArgs>();\n\n    /** @hidden */\n    public get useDefaultTemplate(): boolean {\n        return !this._bannerActionTemplate;\n    }\n\n    /**\n     * Get the animation settings used by the banner open/close methods\n     * ```typescript\n     * let currentAnimations: AnimationSettings = banner.animationSettings\n     * ```\n     */\n    @Input()\n    public get animationSettings(): AnimationSettings {\n        return this._animationSettings ? this._animationSettings : this._expansionPanel.animationSettings;\n    }\n\n    /**\n     * Set the animation settings used by the banner open/close methods\n     * ```typescript\n     * import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     * ...\n     * banner.animationSettings: AnimationSettings = { openAnimation: slideInLeft, closeAnimation: slideOutRight };\n     * ```\n     */\n    public set animationSettings(settings: AnimationSettings) {\n        this._animationSettings = settings;\n    }\n    /**\n     * Gets whether banner is collapsed\n     *\n     * ```typescript\n     * const isCollapsed: boolean = banner.collapsed;\n     * ```\n     */\n    public get collapsed() {\n        return this._expansionPanel.collapsed;\n    }\n\n    /**\n     * Returns the native element of the banner component\n     * ```typescript\n     *  const myBannerElement: HTMLElement = banner.element;\n     * ```\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.display')\n    public get displayStyle(): string {\n        return this.collapsed ? '' : 'block';\n    }\n\n    constructor(public elementRef: ElementRef) { }\n\n    /**\n     * Opens the banner\n     *\n     * ```typescript\n     *  myBanner.open();\n     * ```\n     *\n     * ```html\n     * <igx-banner #banner>\n     * ...\n     * </igx-banner>\n     * <button (click)=\"banner.open()\">Open Banner</button>\n     * ```\n     */\n    public open(event?: Event) {\n        this._bannerEvent = { banner: this, event};\n        const openingArgs = {\n            banner: this,\n            event,\n            cancel: false\n        };\n        this.onOpening.emit(openingArgs);\n        if (openingArgs.cancel) {\n            return;\n        }\n        this._expansionPanel.open(event);\n    }\n\n    /**\n     * Closes the banner\n     *\n     * ```typescript\n     *  myBanner.close();\n     * ```\n     *\n     * ```html\n     * <igx-banner #banner>\n     * ...\n     * </igx-banner>\n     * <button (click)=\"banner.close()\">Close Banner</button>\n     * ```\n     */\n    public close(event?: Event) {\n        this._bannerEvent = { banner: this, event};\n        const closingArgs = {\n            banner: this,\n            event,\n            cancel: false\n        };\n        this.onClosing.emit(closingArgs);\n        if (closingArgs.cancel) {\n            return;\n        }\n        this._expansionPanel.close(event);\n    }\n\n    /**\n     * Toggles the banner\n     *\n     * ```typescript\n     *  myBanner.toggle();\n     * ```\n     *\n     * ```html\n     * <igx-banner #banner>\n     * ...\n     * </igx-banner>\n     * <button (click)=\"banner.toggle()\">Toggle Banner</button>\n     * ```\n     */\n    toggle(event?: Event) {\n        if (this.collapsed) {\n            this.open(event);\n        } else {\n            this.close(event);\n        }\n    }\n\n    /** @hidden */\n    public onExpansionPanelOpen() {\n        this.onOpened.emit(this._bannerEvent);\n    }\n\n    /** @hidden */\n    public onExpansionPanelClose() {\n        this.onClosed.emit(this._bannerEvent);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxBannerComponent, IgxBannerActionsDirective],\n    exports: [IgxBannerComponent, IgxBannerActionsDirective],\n    imports: [CommonModule, IgxExpansionPanelModule, IgxIconModule, IgxButtonModule, IgxRippleModule]\n})\nexport class IgxBannerModule { }\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterContentInit,\n    AfterViewInit,\n    Component,\n    ContentChildren,\n    ChangeDetectorRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    NgModule,\n    Output,\n    Optional,\n    QueryList,\n    Renderer2,\n    ViewChildren,\n    OnDestroy\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { IgxButtonDirective, IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxIconModule } from '../icon/public_api';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { IBaseEventArgs } from '../core/utils';\n\nexport enum ButtonGroupAlignment { horizontal, vertical }\nlet NEXT_ID = 0;\n\n/**\n * **Ignite UI for Angular Button Group** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/buttongroup.html)\n *\n * The Ignite UI Button Group displays a group of buttons either vertically or horizontally.  The group supports\n * single, multiple and toggle selection.\n *\n * Example:\n * ```html\n * <igx-buttongroup multiSelection=\"true\" [values]=\"fontOptions\">\n * </igx-buttongroup>\n * ```\n * The `fontOptions` value shown above is defined as:\n * ```typescript\n * this.fontOptions = [\n *   { icon: 'format_bold', selected: false },\n *   { icon: 'format_italic', selected: false },\n *   { icon: 'format_underlined', selected: false }];\n * ```\n */\n@Component({\n    selector: 'igx-buttongroup',\n    templateUrl: 'buttongroup-content.component.html'\n})\n\nexport class IgxButtonGroupComponent extends DisplayDensityBase implements AfterContentInit, AfterViewInit, OnDestroy {\n\n    private _disabled = false;\n    protected buttonClickNotifier$ = new Subject<boolean>();\n    protected queryListNotifier$ = new Subject<boolean>();\n\n    @ViewChildren(IgxButtonDirective) private viewButtons: QueryList<IgxButtonDirective>;\n    @ContentChildren(IgxButtonDirective) private templateButtons: QueryList<IgxButtonDirective>;\n\n    /**\n     * A collection containing all buttons inside the button group.\n     */\n    public get buttons(): IgxButtonDirective[] {\n        return [...this.viewButtons.toArray(), ...this.templateButtons.toArray()];\n    }\n\n    /**\n     * An @Input property that sets the value of the `id` attribute. If not set it will be automatically generated.\n     * ```html\n     *  <igx-buttongroup [id]=\"'igx-dialog-56'\" [multiSelection]=\"!multi\" [values]=\"alignOptions\">\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-buttongroup-${NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.zIndex')\n    public zIndex = 0;\n\n    /**\n     * Allows you to set a style using the `itemContentCssClass` input.\n     * The value should be the CSS class name that will be applied to the button group.\n     * ```typescript\n     * public style1 = \"styleClass\";\n     *  //..\n     * ```\n     *  ```html\n     * <igx-buttongroup [itemContentCssClass]=\"style1\" [multiSelection]=\"!multi\" [values]=\"alignOptions\">\n     * ```\n     */\n    @Input() set itemContentCssClass(value: string) {\n        this._itemContentCssClass = value || this._itemContentCssClass;\n    }\n\n    /**\n     * Returns the CSS class of the item content of the `IgxButtonGroup`.\n     * ```typescript\n     *  @ViewChild(\"MyChild\")\n     * public buttonG: IgxButtonGroupComponent;\n     * ngAfterViewInit(){\n     *    let buttonSelect = this.buttonG.itemContentCssClass;\n     * }\n     * ```\n     */\n    get itemContentCssClass(): string {\n        return this._itemContentCssClass;\n    }\n\n    /**\n     * An @Input property that enables selecting multiple buttons. By default, multi-selection is false.\n     * ```html\n     * <igx-buttongroup [multiSelection]=\"false\" [alignment]=\"alignment\"></igx-buttongroup>\n     * ```\n     */\n    @Input() public multiSelection = false;\n    /**\n     * An @Input property that allows setting the buttons in the button group.\n     * ```typescript\n     *  public ngOnInit() {\n     *      this.cities = [\n     *        new Button({\n     *          label: \"Sofia\"\n     *      }),\n     *        new Button({\n     *          label: \"London\"\n     *      }),\n     *        new Button({\n     *          label: \"New York\",\n     *          selected: true\n     *      }),\n     *        new Button({\n     *          label: \"Tokyo\"\n     *      })\n     *  ];\n     *  }\n     *  //..\n     * ```\n     * ```html\n     *  <igx-buttongroup [multiSelection]=\"false\" [values]=\"cities\"></igx-buttongroup>\n     * ```\n     */\n    @Input() public values: any;\n    /**\n     * An @Input property that allows you to disable the `igx-buttongroup` component. By default it's false.\n     * ```html\n     * <igx-buttongroup [disabled]=\"true\" [multiSelection]=\"multi\" [values]=\"fontOptions\"></igx-buttongroup>\n     * ```\n     */\n    @Input()\n    public get disabled(): boolean {\n        return this._disabled;\n    }\n    public set disabled(value: boolean) {\n        if (this._disabled !== value) {\n            this._disabled = value;\n\n            if (this.viewButtons && this.templateButtons) {\n                this.buttons.forEach((b) => b.disabled = this._disabled);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectedIndexes: number[] = [];\n\n    /**\n     * Allows you to set the button group alignment.\n     * Available options are `ButtonGroupAlignment.horizontal` (default) and `ButtonGroupAlignment.vertical`.\n     * ```typescript\n     * public alignment = ButtonGroupAlignment.vertical;\n     * //..\n     * ```\n     * ```html\n     * <igx-buttongroup [multiSelection]=\"false\" [values]=\"cities\" [alignment]=\"alignment\"></igx-buttongroup>\n     * ```\n     */\n    @Input() set alignment(value: ButtonGroupAlignment) {\n        this._isVertical = value === ButtonGroupAlignment.vertical;\n    }\n    /**\n     * Returns the alignment of the `igx-buttongroup`.\n     * ```typescript\n     * @ViewChild(\"MyChild\")\n     * public buttonG: IgxButtonGroupComponent;\n     * ngAfterViewInit(){\n     *    let buttonAlignment = this.buttonG.alignment;\n     * }\n     * ```\n     */\n    get alignment(): ButtonGroupAlignment {\n        return this._isVertical ? ButtonGroupAlignment.vertical : ButtonGroupAlignment.horizontal;\n    }\n\n    /**\n     * An @Ouput property that emits an event when a button is selected.\n     * ```typescript\n     * @ViewChild(\"toast\")\n     * private toast: IgxToastComponent;\n     * public onSelect(buttongroup){\n     *     this.toast.show()\n     * }\n     *  //...\n     * ```\n     * ```html\n     * <igx-buttongroup #MyChild [multiSelection]=\"!multi\" (onSelect)=\"onSelect($event)\"></igx-buttongroup>\n     * <igx-toast #toast message=\"You have made a selection!\"></igx-toast>\n     * ```\n     */\n    @Output() public onSelect = new EventEmitter<IButtonGroupEventArgs>();\n\n    /**\n     * An @Ouput property that emits an event when a button is deselected.\n     * ```typescript\n     *  @ViewChild(\"toast\")\n     *  private toast: IgxToastComponent;\n     *  public onUnselect(buttongroup){\n     *     this.toast.show()\n     * }\n     *  //...\n     * ```\n     * ```html\n     * <igx-buttongroup> #MyChild [multiSelection]=\"multi\" (onUnselect)=\"onUnselect($event)\"></igx-buttongroup>\n     * <igx-toast #toast message=\"You have deselected a button!\"></igx-toast>\n     * ```\n     */\n    @Output() public onUnselect = new EventEmitter<IButtonGroupEventArgs>();\n\n    /**\n     * Returns true if the `igx-buttongroup` alignment is vertical.\n     * Note that in order for the accessor to work correctly the property should be set explicitly.\n     * ```html\n     * <igx-buttongroup #MyChild [alignment]=\"alignment\" [values]=\"alignOptions\">\n     * ```\n     * ```typescript\n     * //...\n     * @ViewChild(\"MyChild\")\n     * private buttonG: IgxButtonGroupComponent;\n     * ngAfterViewInit(){\n     *    let orientation = this.buttonG.isVertical;\n     * }\n     * ```\n     */\n    public get isVertical(): boolean {\n        return this._isVertical;\n    }\n    private _isVertical: boolean;\n    private _itemContentCssClass: string;\n\n    constructor(private _cdr: ChangeDetectorRef, private _renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Gets the selected button/buttons.\n     * ```typescript\n     * @ViewChild(\"MyChild\")\n     * private buttonG: IgxButtonGroupComponent;\n     * ngAfterViewInit(){\n     *    let selectedButton = this.buttonG.selectedButtons;\n     * }\n     * ```\n     */\n    get selectedButtons(): IgxButtonDirective[] {\n        return this.buttons.filter((b, i) => {\n            return this.selectedIndexes.indexOf(i) !== -1;\n        });\n\n    }\n\n    /**\n     * Selects a button by its index.\n     * ```typescript\n     * @ViewChild(\"MyChild\")\n     * private buttonG: IgxButtonGroupComponent;\n     * ngAfterViewInit(){\n     *    this.buttonG.selectButton(2);\n     *    this.cdr.detectChanges();\n     * }\n     * ```\n     * @memberOf {@link IgxButtonGroupComponent}\n     */\n    public selectButton(index: number) {\n        if (index >= this.buttons.length || index < 0) {\n            return;\n        }\n\n        const button = this.buttons[index];\n        const buttonElement = button.nativeElement;\n\n        this.selectedIndexes.push(index);\n        button.selected = true;\n\n        this._renderer.setAttribute(buttonElement, 'aria-pressed', 'true');\n        this._renderer.addClass(buttonElement, 'igx-button-group__item--selected');\n\n        this.onSelect.emit({ button: button, index: index });\n\n        const indexInViewButtons = this.viewButtons.toArray().indexOf(button);\n        if (indexInViewButtons !== -1) {\n            this.values[indexInViewButtons].selected = true;\n        }\n\n        // deselect other buttons if multiSelection is not enabled\n        if (!this.multiSelection && this.selectedIndexes.length > 1) {\n            this.buttons.forEach((b, i) => {\n                if (i !== index && this.selectedIndexes.indexOf(i) !== -1) {\n                    this.deselectButton(i);\n                }\n            });\n        }\n    }\n\n    /**\n     * Deselects a button by its index.\n     * ```typescript\n     * @ViewChild(\"MyChild\")\n     * private buttonG: IgxButtonGroupComponent;\n     * ngAfterViewInit(){\n     *    this.buttonG.deselectButton(2);\n     *    this.cdr.detectChanges();\n     * }\n     * ```\n     * @memberOf {@link IgxButtonGroupComponent}\n     */\n    public deselectButton(index: number) {\n        if (index >= this.buttons.length || index < 0) {\n            return;\n        }\n\n        const button = this.buttons[index];\n        const buttonElement = button.nativeElement;\n\n        this.selectedIndexes.splice(this.selectedIndexes.indexOf(index), 1);\n        button.selected = false;\n\n        this._renderer.setAttribute(buttonElement, 'aria-pressed', 'false');\n        this._renderer.removeClass(buttonElement, 'igx-button-group__item--selected');\n\n        this.onUnselect.emit({ button: button, index: index });\n\n        const indexInViewButtons = this.viewButtons.toArray().indexOf(button);\n        if (indexInViewButtons !== -1) {\n            this.values[indexInViewButtons].selected = false;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        this.templateButtons.forEach((button) => {\n            if (!button.initialDensity) {\n                button.displayDensity = this.displayDensity;\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        const initButtons = () => {\n            // Cancel any existing buttonClick subscriptions\n            this.buttonClickNotifier$.next();\n\n            this.selectedIndexes.splice(0, this.selectedIndexes.length);\n\n            // initial configuration\n            this.buttons.forEach((button, index) => {\n                const buttonElement = button.nativeElement;\n\n                if (this.disabled) {\n                    button.disabled = true;\n                }\n\n                if (button.selected) {\n                    this.selectButton(index);\n                }\n\n                button.buttonClick.pipe(takeUntil(this.buttonClickNotifier$)).subscribe((ev) => this._clickHandler(ev, index));\n                this._renderer.addClass(buttonElement, 'igx-button-group__item');\n            });\n        };\n\n        this.viewButtons.changes.pipe(takeUntil(this.queryListNotifier$)).subscribe(() => initButtons());\n        this.templateButtons.changes.pipe(takeUntil(this.queryListNotifier$)).subscribe(() => initButtons());\n        initButtons();\n\n        this._cdr.detectChanges();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.buttonClickNotifier$.next();\n        this.buttonClickNotifier$.complete();\n\n        this.queryListNotifier$.next();\n        this.queryListNotifier$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public _clickHandler(event, i) {\n        if (this.selectedIndexes.indexOf(i) !== -1) {\n            this.deselectButton(i);\n        } else {\n            this.selectButton(i);\n        }\n    }\n}\n\nexport interface IButtonGroupEventArgs extends IBaseEventArgs {\n    button: IgxButtonDirective;\n    index: number;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxButtonGroupComponent],\n    exports: [IgxButtonGroupComponent],\n    imports: [IgxButtonModule, CommonModule, IgxRippleModule, IgxIconModule]\n})\n\nexport class IgxButtonGroupModule {\n}\n","export interface DateRangeDescriptor {\n    type: DateRangeType;\n    dateRange?: Date[];\n}\n\nexport enum DateRangeType {\n    After,\n    Before,\n    Between,\n    Specific,\n    Weekdays,\n    Weekends\n}\n","import { DateRangeDescriptor, DateRangeType } from '../core/dates';\n\n/**\n * @hidden\n */\nenum TimeDeltaInterval {\n    Month = 'month',\n    Year = 'year'\n}\n\nconst MDAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst FEBRUARY = 1;\n\nexport function range(start = 0, stop, step = 1) {\n    const res = [];\n    const cur = (stop === undefined) ? 0 : start;\n    const max = (stop === undefined) ? start : stop;\n    for (let i = cur; step < 0 ? i > max : i < max; i += step) {\n        res.push(i);\n    }\n    return res;\n}\n\n/**\n * Returns true for leap years, false for non-leap years.\n *\n * @export\n * @param year\n * @returns\n */\nexport function isLeap(year: number): boolean {\n    return (year % 4 === 0) && ((year % 100 !== 0) || (year % 400 === 0));\n}\n\nexport function weekDay(year: number, month: number, day: number): number {\n    return new Date(year, month, day).getDay();\n}\n\n/**\n * Return weekday and number of days for year, month.\n *\n * @export\n * @param year\n * @param month\n * @returns\n */\nexport function monthRange(year: number, month: number): number[] {\n    if ((month < 0) || (month > 11)) {\n        throw new Error('Invalid month specified');\n    }\n    const day = weekDay(year, month, 1);\n    let nDays = MDAYS[month];\n    if ((month === FEBRUARY) && (isLeap(year))) {\n        nDays++;\n    }\n    return [day, nDays];\n}\n\nexport function isDateInRanges(date: Date, ranges: DateRangeDescriptor[]): boolean {\n    date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    const dateInMs = date.getTime();\n\n    if (!ranges) {\n        return false;\n    }\n\n    for (const descriptor of ranges) {\n        const dRanges = descriptor.dateRange ? descriptor.dateRange.map(\n            r => new Date(r.getFullYear(), r.getMonth(), r.getDate())) : undefined;\n        switch (descriptor.type) {\n            case (DateRangeType.After):\n                if (dateInMs > dRanges[0].getTime()) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Before):\n                if (dateInMs < dRanges[0].getTime()) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Between):\n                const dRange = dRanges.map(d => d.getTime());\n                const min = Math.min(dRange[0], dRange[1]);\n                const max = Math.max(dRange[0], dRange[1]);\n                if (dateInMs >= min && dateInMs <= max) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Specific):\n                const datesInMs = dRanges.map(d => d.getTime());\n                for (const specificDateInMs of datesInMs) {\n                    if (dateInMs === specificDateInMs) {\n                        return true;\n                    }\n                }\n\n                break;\n            case (DateRangeType.Weekdays):\n                const day = date.getDay();\n                if (day % 6 !== 0) {\n                    return true;\n                }\n\n                break;\n            case (DateRangeType.Weekends):\n                const weekday = date.getDay();\n                if (weekday % 6 === 0) {\n                    return true;\n                }\n\n                break;\n            default:\n                return false;\n        }\n    }\n\n    return false;\n}\n\nexport interface ICalendarDate {\n    date: Date;\n    isCurrentMonth: boolean;\n    isPrevMonth: boolean;\n    isNextMonth: boolean;\n}\n\nexport interface IFormattedParts {\n    value: string;\n    literal?: string;\n    combined: string;\n}\n\nexport interface IFormattingOptions {\n    day?: string;\n    month?: string;\n    weekday?: string;\n    year?: string;\n}\n\n\nexport interface IFormattingViews {\n    day?: boolean;\n    month?: boolean;\n    year?: boolean;\n}\n\nexport enum WEEKDAYS {\n    SUNDAY = 0,\n    MONDAY = 1,\n    TUESDAY = 2,\n    WEDNESDAY = 3,\n    THURSDAY = 4,\n    FRIDAY = 5,\n    SATURDAY = 6\n}\n\nexport class Calendar {\n\n    private _firstWeekDay: number | WEEKDAYS;\n\n    constructor(firstWeekDay: number | WEEKDAYS = WEEKDAYS.SUNDAY) {\n        this._firstWeekDay = firstWeekDay;\n    }\n\n    public get firstWeekDay(): number {\n        return this._firstWeekDay % 7;\n    }\n\n    public set firstWeekDay(value: number) {\n        this._firstWeekDay = value;\n    }\n\n    /**\n     * Returns an array of weekdays for one week starting\n     * with the currently set `firstWeekDay`\n     *\n     * this.firstWeekDay = 0 (Sunday) --> [0, 1, 2, 3, 4, 5, 6]\n     * this.firstWeekDay = 1 (Monday) --> [1, 2, 3, 4, 5, 6, 0]\n     *\n     * @returns\n     *\n     * @memberof Calendar\n     */\n    public weekdays(): number[] {\n        const res = [];\n        for (const i of range(this.firstWeekDay, this.firstWeekDay + 7)) {\n            res.push(i % 7);\n        }\n        return res;\n    }\n\n    /**\n     * Returns the date values for one month. It will always iterate throught\n     * complete weeks, so it will contain dates outside the specified month.\n     *\n     * @param year\n     * @param month\n     * @param boolean\n     * @returns\n     *\n     * @memberof Calendar\n     */\n    public monthdates(year: number, month: number, extraWeek: boolean = false): ICalendarDate[] {\n        let date = new Date(year, month, 1);\n        let days = (date.getDay() - this.firstWeekDay) % 7;\n        if (days < 0) {\n            days = 7 - Math.abs(days);\n        }\n        date = this.timedelta(date, 'day', -days);\n        const res = [];\n        let value: ICalendarDate;\n\n        while (true) {\n\n            value = this.generateICalendarDate(date, year, month);\n            res.push(value);\n\n            date = this.timedelta(date, 'day', 1);\n\n            if ((date.getMonth() !== month) && (date.getDay() === this.firstWeekDay)) {\n                if (extraWeek && res.length <= 35) {\n                    for (const _ of range(0, 7)) {\n                        value = this.generateICalendarDate(date, year, month);\n                        res.push(value);\n                        date = this.timedelta(date, 'day', 1);\n                    }\n                }\n                break;\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Returns a matrix (array of arrays) representing a month's calendar.\n     * Each row represents a full week; week entries are ICalendarDate objects.\n     *\n     * @param year\n     * @param month\n     * @returns\n     *\n     * @memberof Calendar\n     */\n    public monthdatescalendar(year: number, month: number, extraWeek: boolean = false): ICalendarDate[][] {\n        const dates = this.monthdates(year, month, extraWeek);\n        const res = [];\n        for (const i of range(0, dates.length, 7)) {\n            res.push(dates.slice(i, i + 7));\n        }\n        return res;\n    }\n\n    public timedelta(date: Date, interval: string, units: number): Date {\n        const ret = new Date(date);\n\n        const checkRollover = () => {\n            if (ret.getDate() !== date.getDate()) {\n                ret.setDate(0);\n            }\n        };\n\n        switch (interval.toLowerCase()) {\n            case 'year':\n                ret.setFullYear(ret.getFullYear() + units);\n                checkRollover();\n                break;\n            case 'quarter':\n                ret.setMonth(ret.getMonth() + 3 * units);\n                checkRollover();\n                break;\n            case 'month':\n                ret.setMonth(ret.getMonth() + units);\n                checkRollover();\n                break;\n            case 'week':\n                ret.setDate(ret.getDate() + 7 * units);\n                break;\n            case 'day':\n                ret.setDate(ret.getDate() + units);\n                break;\n            case 'hour':\n                ret.setTime(ret.getTime() + units * 3600000);\n                break;\n            case 'minute':\n                ret.setTime(ret.getTime() + units * 60000);\n                break;\n            case 'second':\n                ret.setTime(ret.getTime() + units * 1000);\n                break;\n            default:\n                throw new Error('Invalid interval specifier');\n        }\n        return ret;\n    }\n\n    public formatToParts(date: Date, locale: string, options: any, parts: string[]) {\n        const formatter = new Intl.DateTimeFormat(locale, options);\n        const result = {\n            date,\n            full: formatter.format(date)\n        };\n\n        if ((formatter as any).formatToParts) {\n            const formattedParts = (formatter as any).formatToParts(date);\n\n            const toType = (partType: string) => {\n                const index = formattedParts.findIndex(({ type }) => type === partType);\n                const o: IFormattedParts = { value: '', literal: '', combined: '' };\n\n                if (partType === 'era' && index > -1) {\n                    o.value = formattedParts[index].value;\n                    return o;\n                } else if (partType === 'era' && index === -1) {\n                    return o;\n                }\n\n                o.value = formattedParts[index].value;\n                o.literal = formattedParts[index + 1] ? formattedParts[index + 1].value : '';\n                o.combined = [o.value, o.literal].join('');\n                return o;\n            };\n\n            for (const each of parts) {\n                result[each] = toType(each);\n            }\n        } else {\n            for (const each of parts) {\n                result[each] = { value: '', literal: '', combined: '' };\n            }\n        }\n        return result;\n    }\n\n    public getFirstViewDate(date: Date, interval: string, activeViewIdx: number) {\n        return this.timedelta(date, interval, -activeViewIdx);\n    }\n\n    public getDateByView(date: Date, interval: string, activeViewIdx: number) {\n        return this.timedelta(date, interval, activeViewIdx);\n    }\n\n    public getNextMonth(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Month, 1);\n    }\n\n    public getPrevMonth(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Month, -1);\n    }\n\n    public getNextYear(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Year, 1);\n    }\n\n    public getPrevYear(date: Date) {\n        return this.timedelta(date, TimeDeltaInterval.Year, -1);\n    }\n\n    public getWeekNumber(date: Date) {\n        const firstJan = new Date(date.getFullYear(), 0, 1).getTime();\n        const today = new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\n        const dayInMilSeconds = 86400000;\n        const dayOfYear = ((today - firstJan + 1) / dayInMilSeconds);\n        return Math.ceil(dayOfYear / 7);\n    }\n\n    private generateICalendarDate(date: Date, year: number, month: number): ICalendarDate {\n        return {\n            date,\n            isCurrentMonth: date.getFullYear() === year && date.getMonth() === month,\n            isNextMonth: this.isNextMonth(date, year, month),\n            isPrevMonth: this.isPreviousMonth(date, year, month)\n        };\n    }\n\n    private isPreviousMonth(date: Date, year: number, month: number): boolean {\n        if (date.getFullYear() === year) {\n            return date.getMonth() < month;\n        }\n        return date.getFullYear() < year;\n    }\n\n    private isNextMonth(date: Date, year: number, month: number): boolean {\n        if (date.getFullYear() === year) {\n            return date.getMonth() > month;\n        }\n\n        return date.getFullYear() > year;\n    }\n}\n","import { DateRangePickerResourceStringsEN } from './date-range-picker-resources';\nimport { IGridResourceStrings, GridResourceStringsEN } from './grid-resources';\nimport { ITimePickerResourceStrings, TimePickerResourceStringsEN } from './time-picker-resources';\nimport { PaginatorResourceStringsEN } from './paginator-resources';\nimport { cloneValue } from '../utils';\nimport { ICarouselResourceStrings, CarouselResourceStringsEN } from './carousel-resources';\nimport { ListResourceStringsEN } from './list-resources';\nimport { CalendarResourceStringsEN } from './calendar-resources';\n\nexport interface IResourceStrings extends IGridResourceStrings, ITimePickerResourceStrings, ICarouselResourceStrings  {}\n\n/**\n * @hidden\n */\nexport const CurrentResourceStrings = {\n    GridResStrings: cloneValue(GridResourceStringsEN),\n    PaginatorResStrings: cloneValue(PaginatorResourceStringsEN),\n    TimePickerResStrings: cloneValue(TimePickerResourceStringsEN),\n    CalendarResStrings: cloneValue(CalendarResourceStringsEN),\n    DateRangePickerResStrings: cloneValue(DateRangePickerResourceStringsEN),\n    CarouselResStrings: cloneValue(CarouselResourceStringsEN),\n    ListResStrings: cloneValue(ListResourceStringsEN),\n};\n\nfunction updateResourceStrings(currentStrings: IResourceStrings, newStrings: IResourceStrings ) {\n    for (const key of Object.keys(newStrings)) {\n        if (key in currentStrings) {\n            currentStrings[key] = newStrings[key];\n        }\n    }\n}\n\n/**\n * Changes the resource strings for all components in the application\n * ```\n * @param resourceStrings to be applied\n */\nexport function changei18n(resourceStrings: IResourceStrings) {\n    for (const key of Object.keys(CurrentResourceStrings)) {\n        updateResourceStrings(CurrentResourceStrings[key], resourceStrings);\n    }\n}\n\n/**\n * Returns current resource strings for all components\n */\nexport function getCurrentResourceStrings(): IResourceStrings {\n    return {\n            ...CurrentResourceStrings.GridResStrings,\n            ...CurrentResourceStrings.TimePickerResStrings\n    };\n}\n","export interface IGridResourceStrings {\n    igx_grid_groupByArea_message?: string;\n    igx_grid_groupByArea_select_message?: string;\n    igx_grid_groupByArea_deselect_message?: string;\n    igx_grid_emptyFilteredGrid_message?: string;\n    igx_grid_emptyGrid_message?: string;\n    igx_grid_filter?: string;\n    igx_grid_filter_row_close?: string;\n    igx_grid_filter_row_reset?: string;\n    igx_grid_filter_row_placeholder?: string;\n    igx_grid_filter_row_boolean_placeholder?: string;\n    igx_grid_filter_row_date_placeholder?: string;\n    igx_grid_filter_operator_and?: string;\n    igx_grid_complex_filter?: string;\n    igx_grid_filter_operator_or?: string;\n    igx_grid_filter_contains?: string;\n    igx_grid_filter_doesNotContain?: string;\n    igx_grid_filter_startsWith?: string;\n    igx_grid_filter_endsWith?: string;\n    igx_grid_filter_equals?: string;\n    igx_grid_filter_doesNotEqual?: string;\n    igx_grid_filter_empty?: string;\n    igx_grid_filter_notEmpty?: string;\n    igx_grid_filter_null?: string;\n    igx_grid_filter_notNull?: string;\n    igx_grid_filter_before?: string;\n    igx_grid_filter_after?: string;\n    igx_grid_filter_today?: string;\n    igx_grid_filter_yesterday?: string;\n    igx_grid_filter_thisMonth?: string;\n    igx_grid_filter_lastMonth?: string;\n    igx_grid_filter_nextMonth?: string;\n    igx_grid_filter_thisYear?: string;\n    igx_grid_filter_lastYear?: string;\n    igx_grid_filter_nextYear?: string;\n    igx_grid_filter_greaterThan?: string;\n    igx_grid_filter_lessThan?: string;\n    igx_grid_filter_greaterThanOrEqualTo?: string;\n    igx_grid_filter_lessThanOrEqualTo?: string;\n    igx_grid_filter_true?: string;\n    igx_grid_filter_false?: string;\n    igx_grid_filter_all?: string;\n    igx_grid_filter_condition_placeholder?: string;\n    igx_grid_summary_count?: string;\n    igx_grid_summary_min?: string;\n    igx_grid_summary_max?: string;\n    igx_grid_summary_sum?: string;\n    igx_grid_summary_average?: string;\n    igx_grid_summary_earliest?: string;\n    igx_grid_summary_latest?: string;\n    igx_grid_excel_filter_moving_left?: string;\n    igx_grid_excel_filter_moving_left_short?: string;\n    igx_grid_excel_filter_moving_right?: string;\n    igx_grid_excel_filter_moving_right_short?: string;\n    igx_grid_excel_filter_moving_header?: string;\n    igx_grid_excel_filter_sorting_asc?: string;\n    igx_grid_excel_filter_sorting_asc_short?: string;\n    igx_grid_excel_filter_sorting_desc?: string;\n    igx_grid_excel_filter_sorting_desc_short?: string;\n    igx_grid_excel_filter_sorting_header?: string;\n    igx_grid_excel_filter_clear?: string;\n    igx_grid_excel_custom_dialog_add?: string;\n    igx_grid_excel_custom_dialog_clear?: string;\n    igx_grid_excel_custom_dialog_header?: string;\n    igx_grid_excel_cancel?: string;\n    igx_grid_excel_apply?: string;\n    igx_grid_excel_search_placeholder?: string;\n    igx_grid_excel_select_all?: string;\n    igx_grid_excel_select_all_search_results?: string;\n    igx_grid_excel_add_to_filter?: string;\n    igx_grid_excel_blanks?: string;\n    igx_grid_excel_hide?: string;\n    igx_grid_excel_show?: string;\n    igx_grid_excel_pin?: string;\n    igx_grid_excel_unpin?: string;\n    igx_grid_excel_select?: string;\n    igx_grid_excel_text_filter?: string;\n    igx_grid_excel_number_filter?: string;\n    igx_grid_excel_date_filter?: string;\n    igx_grid_excel_boolean_filter?: string;\n    igx_grid_excel_custom_filter?: string;\n    igx_grid_advanced_filter_title?: string;\n    igx_grid_advanced_filter_and_group?: string;\n    igx_grid_advanced_filter_or_group?: string;\n    igx_grid_advanced_filter_end_group?: string;\n    igx_grid_advanced_filter_create_and_group?: string;\n    igx_grid_advanced_filter_create_or_group?: string;\n    igx_grid_advanced_filter_and_label?: string;\n    igx_grid_advanced_filter_or_label?: string;\n    igx_grid_advanced_filter_add_condition?: string;\n    igx_grid_advanced_filter_ungroup?: string;\n    igx_grid_advanced_filter_delete?: string;\n    igx_grid_advanced_filter_delete_filters?: string;\n    igx_grid_advanced_filter_initial_text?: string;\n    igx_grid_advanced_filter_column_placeholder?: string;\n    igx_grid_advanced_filter_value_placeholder?: string;\n    igx_grid_pinned_row_indicator?: string;\n    igx_grid_hiding_check_all_label?: string;\n    igx_grid_hiding_uncheck_all_label?: string;\n    igx_grid_pinning_check_all_label?: string;\n    igx_grid_pinning_uncheck_all_label?: string;\n    igx_grid_toolbar_actions_filter_prompt?: string;\n    igx_grid_toolbar_pinning_button_tooltip?: string;\n    igx_grid_toolbar_hiding_button_tooltip?: string;\n    igx_grid_toolbar_pinning_title?: string;\n    igx_grid_toolbar_hiding_title?: string;\n    igx_grid_toolbar_advanced_filtering_button_tooltip?: string;\n    igx_grid_toolbar_advanced_filtering_button_label?: string;\n    igx_grid_toolbar_exporter_button_tooltip?: string;\n    igx_grid_toolbar_exporter_button_label?: string;\n    igx_grid_toolbar_exporter_excel_entry_text?: string;\n    igx_grid_toolbar_exporter_csv_entry_text?: string;\n    igx_grid_snackbar_addrow_label?: string;\n    igx_grid_snackbar_addrow_actiontext?: string;\n    igx_grid_actions_edit_label?: string;\n    igx_grid_actions_add_label?: string;\n    igx_grid_add_row_label?: string;\n    igx_grid_actions_add_child_label?: string;\n    igx_grid_actions_delete_label?: string;\n    igx_grid_actions_pin_label?: string;\n    igx_grid_actions_unpin_label?: string;\n    igx_grid_actions_jumpUp_label?: string;\n    igx_grid_actions_jumpDown_label?: string;\n}\n\nexport const GridResourceStringsEN: IGridResourceStrings = {\n    igx_grid_groupByArea_message: 'Drag a column header and drop it here to group by that column.',\n    igx_grid_groupByArea_select_message: 'Select all rows in the group with field name {0} and value {1}.',\n    igx_grid_groupByArea_deselect_message: 'Deselect all rows in the group with field name {0} and value {1}.',\n    igx_grid_emptyFilteredGrid_message: 'No records found.',\n    igx_grid_emptyGrid_message: 'Grid has no data.',\n    igx_grid_filter: 'Filter',\n    igx_grid_filter_row_close: 'Close',\n    igx_grid_filter_row_reset: 'Reset',\n    igx_grid_filter_row_placeholder: 'Add filter value',\n    igx_grid_filter_row_boolean_placeholder: 'All',\n    igx_grid_filter_row_date_placeholder: 'Pick up date',\n    igx_grid_filter_operator_and: 'And',\n    igx_grid_filter_operator_or: 'Or',\n    igx_grid_complex_filter: 'Complex Filter',\n    igx_grid_filter_contains: 'Contains',\n    igx_grid_filter_doesNotContain: 'Does Not Contain',\n    igx_grid_filter_startsWith: 'Starts With',\n    igx_grid_filter_endsWith: 'Ends With',\n    igx_grid_filter_equals: 'Equals',\n    igx_grid_filter_doesNotEqual: 'Does Not Equal',\n    igx_grid_filter_empty: 'Empty',\n    igx_grid_filter_notEmpty: 'Not Empty',\n    igx_grid_filter_null: 'Null',\n    igx_grid_filter_notNull: 'Not Null',\n    igx_grid_filter_before: 'Before',\n    igx_grid_filter_after: 'After',\n    igx_grid_filter_today: 'Today',\n    igx_grid_filter_yesterday: 'Yesterday',\n    igx_grid_filter_thisMonth: 'This Month',\n    igx_grid_filter_lastMonth: 'Last Month',\n    igx_grid_filter_nextMonth: 'Next Month',\n    igx_grid_filter_thisYear: 'This Year',\n    igx_grid_filter_lastYear: 'Last Year',\n    igx_grid_filter_nextYear: 'Next Year',\n    igx_grid_filter_greaterThan: 'Greater Than',\n    igx_grid_filter_lessThan: 'Less Than',\n    igx_grid_filter_greaterThanOrEqualTo: 'Greater Than Or Equal To',\n    igx_grid_filter_lessThanOrEqualTo: 'Less Than Or Equal To',\n    igx_grid_filter_true: 'True',\n    igx_grid_filter_false: 'False',\n    igx_grid_filter_all: 'All',\n    igx_grid_filter_condition_placeholder: 'Select filter',\n    igx_grid_summary_count: 'Count',\n    igx_grid_summary_min: 'Min',\n    igx_grid_summary_max: 'Max',\n    igx_grid_summary_sum: 'Sum',\n    igx_grid_summary_average: 'Avg',\n    igx_grid_summary_earliest: 'Earliest',\n    igx_grid_summary_latest: 'Latest',\n    igx_grid_excel_filter_moving_left: 'move left',\n    igx_grid_excel_filter_moving_left_short: 'left',\n    igx_grid_excel_filter_moving_right: 'move right',\n    igx_grid_excel_filter_moving_right_short: 'right',\n    igx_grid_excel_filter_moving_header: 'move',\n    igx_grid_excel_filter_sorting_asc: 'ascending',\n    igx_grid_excel_filter_sorting_asc_short: 'asc',\n    igx_grid_excel_filter_sorting_desc: 'descending',\n    igx_grid_excel_filter_sorting_desc_short: 'desc',\n    igx_grid_excel_filter_sorting_header: 'sort',\n    igx_grid_excel_filter_clear: 'Clear column filters',\n    igx_grid_excel_custom_dialog_add: 'add filter',\n    igx_grid_excel_custom_dialog_clear: 'Clear filter',\n    igx_grid_excel_custom_dialog_header: 'Custom auto-filter on column: ',\n    igx_grid_excel_cancel: 'cancel',\n    igx_grid_excel_apply: 'apply',\n    igx_grid_excel_search_placeholder: 'Search',\n    igx_grid_excel_select_all: 'Select All',\n    igx_grid_excel_select_all_search_results: 'Select all search results',\n    igx_grid_excel_add_to_filter: 'Add current selection to filter',\n    igx_grid_excel_blanks: '(Blanks)',\n    igx_grid_excel_hide: 'Hide column',\n    igx_grid_excel_show: 'Show column',\n    igx_grid_excel_pin: 'Pin column',\n    igx_grid_excel_unpin: 'Unpin column',\n    igx_grid_excel_select: 'Select column',\n    igx_grid_excel_text_filter: 'Text filter',\n    igx_grid_excel_number_filter: 'Number filter',\n    igx_grid_excel_date_filter: 'Date filter',\n    igx_grid_excel_boolean_filter: 'Boolean filter',\n    igx_grid_excel_custom_filter: 'Custom filter...',\n    igx_grid_advanced_filter_title: 'Advanced Filtering',\n    igx_grid_advanced_filter_and_group: '\"And\" Group',\n    igx_grid_advanced_filter_or_group: '\"Or\" Group',\n    igx_grid_advanced_filter_end_group: 'End Group',\n    igx_grid_advanced_filter_create_and_group: 'Create \"And\" Group',\n    igx_grid_advanced_filter_create_or_group: 'Create \"Or\" Group',\n    igx_grid_advanced_filter_and_label: 'and',\n    igx_grid_advanced_filter_or_label: 'or',\n    igx_grid_advanced_filter_add_condition: 'Condition',\n    igx_grid_advanced_filter_ungroup: 'Ungroup',\n    igx_grid_advanced_filter_delete: 'Delete',\n    igx_grid_advanced_filter_delete_filters: 'Delete filters',\n    igx_grid_advanced_filter_initial_text: 'Start with creating a group of conditions linked with \"And\" or \"Or\"',\n    igx_grid_advanced_filter_column_placeholder: 'Select column',\n    igx_grid_advanced_filter_value_placeholder: 'Value',\n    igx_grid_pinned_row_indicator: 'Pinned',\n    igx_grid_hiding_check_all_label: 'Hide All',\n    igx_grid_hiding_uncheck_all_label: 'Show All',\n    igx_grid_pinning_check_all_label: 'Pin All',\n    igx_grid_pinning_uncheck_all_label: 'Unpin All',\n    igx_grid_toolbar_actions_filter_prompt: 'Filter columns list ...',\n    igx_grid_toolbar_pinning_button_tooltip: 'Open column pinning dropdown',\n    igx_grid_toolbar_hiding_button_tooltip: 'Open column hiding dropdown',\n    igx_grid_toolbar_pinning_title: 'Pinned columns',\n    igx_grid_toolbar_hiding_title: 'Visible columns',\n    igx_grid_toolbar_advanced_filtering_button_tooltip: 'Open advanced filtering dialog',\n    igx_grid_toolbar_advanced_filtering_button_label: 'Advanced filtering',\n    igx_grid_toolbar_exporter_button_tooltip: 'Open exporter dropdown',\n    igx_grid_toolbar_exporter_button_label: 'Export',\n    igx_grid_toolbar_exporter_excel_entry_text: 'Export to Excel',\n    igx_grid_toolbar_exporter_csv_entry_text: 'Export to CSV',\n    igx_grid_snackbar_addrow_label: 'Row added',\n    igx_grid_snackbar_addrow_actiontext: 'SHOW',\n    igx_grid_actions_edit_label: 'Edit',\n    igx_grid_actions_add_label: 'Add',\n    igx_grid_add_row_label: 'ADD ROW',\n    igx_grid_actions_add_child_label: 'Add Child',\n    igx_grid_actions_delete_label: 'Delete',\n    igx_grid_actions_pin_label: 'Pin',\n    igx_grid_actions_unpin_label: 'Unpin',\n    igx_grid_actions_jumpUp_label: 'Jump up',\n    igx_grid_actions_jumpDown_label: 'Jump down'\n};\n","export interface IPaginatorResourceStrings {\n    igx_paginator_label?: string;\n    igx_paginator_pager_text?: string;\n    igx_paginator_first_page_button_text?: string;\n    igx_paginator_previous_page_button_text?: string;\n    igx_paginator_last_page_button_text?: string;\n    igx_paginator_next_page_button_text?: string;\n}\n\nexport const PaginatorResourceStringsEN: IPaginatorResourceStrings = {\n    igx_paginator_label: 'Items per page',\n    igx_paginator_pager_text: 'of',\n    igx_paginator_first_page_button_text: 'Go to first page',\n    igx_paginator_previous_page_button_text: 'Previous page',\n    igx_paginator_last_page_button_text: 'Go to last page',\n    igx_paginator_next_page_button_text: 'Next page',\n};\n","export interface ITimePickerResourceStrings {\n    igx_time_picker_ok?: string;\n    igx_time_picker_cancel?: string;\n}\n\nexport const TimePickerResourceStringsEN: ITimePickerResourceStrings = {\n    igx_time_picker_ok: 'OK',\n    igx_time_picker_cancel: 'Cancel'\n};\n","export interface ICalendarResourceStrings {\n igx_calendar_previous_month: string;\n igx_calendar_next_month: string;\n igx_calendar_select_month: string;\n igx_calendar_select_year: string;\n igx_calendar_range_start: string;\n igx_calendar_range_end: string;\n igx_calendar_selected_month_is: string;\n igx_calendar_first_picker_of: string;\n igx_calendar_multi_selection: string;\n igx_calendar_range_selection: string;\n igx_calendar_single_selection: string;\n igx_calendar_singular_multi_selection: string;\n igx_calendar_singular_range_selection: string;\n igx_calendar_singular_single_selection: string;\n}\n\nexport const CalendarResourceStringsEN: ICalendarResourceStrings = {\n igx_calendar_previous_month: 'Previous Month',\n igx_calendar_next_month: 'Next Month',\n igx_calendar_select_month: 'Select Month',\n igx_calendar_select_year: 'Select Year',\n igx_calendar_range_start: 'Range start',\n igx_calendar_range_end: 'Range end',\n igx_calendar_selected_month_is: 'Selected month is ',\n igx_calendar_first_picker_of: 'First picker of {0} starts from',\n igx_calendar_multi_selection: 'Multi selection calendar with {0} date pickers',\n igx_calendar_range_selection: 'Range selection calendar with {0} date pickers',\n igx_calendar_single_selection: 'Calendar with {0} date pickers',\n igx_calendar_singular_multi_selection: 'Multi selection calendar',\n igx_calendar_singular_range_selection: 'Range selection calendar',\n igx_calendar_singular_single_selection: 'Calendar',\n};\n","export interface IDateRangePickerResourceStrings {\n    igx_date_range_picker_date_separator?: string;\n}\n\nexport const DateRangePickerResourceStringsEN: IDateRangePickerResourceStrings = {\n    igx_date_range_picker_date_separator: 'to'\n};\n","export interface ICarouselResourceStrings {\n    igx_carousel_of?: string;\n}\n\nexport const CarouselResourceStringsEN: ICarouselResourceStrings = {\n    igx_carousel_of: 'of'\n};\n","export interface IListResourceStrings {\n    igx_list_no_items?: string;\n    igx_list_loading?: string;\n}\n\nexport const ListResourceStringsEN: IListResourceStrings = {\n    igx_list_no_items: 'There are no items in the list.',\n    igx_list_loading: 'Loading data from the server...'\n};\n","import { Input, Output, EventEmitter, Directive } from '@angular/core';\nimport { WEEKDAYS, Calendar, isDateInRanges, IFormattingOptions, IFormattingViews } from './calendar';\nimport { ControlValueAccessor } from '@angular/forms';\nimport { DateRangeDescriptor } from '../core/dates';\nimport { Subject } from 'rxjs';\nimport { isDate, mkenum } from '../core/utils';\nimport { CalendarView } from './month-picker-base';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { ICalendarResourceStrings } from '../core/i18n/calendar-resources';\n\n\n/**\n * Sets the selection type - single, multi or range.\n */\nexport const CalendarSelection = mkenum({\n    SINGLE: 'single',\n    MULTI: 'multi',\n    RANGE: 'range'\n});\nexport type CalendarSelection = (typeof CalendarSelection)[keyof typeof CalendarSelection];\n\nexport enum ScrollMonth {\n    PREV = 'prev',\n    NEXT = 'next',\n    NONE = 'none'\n}\n\nexport interface IViewDateChangeEventArgs {\n    previousValue: Date;\n    currentValue: Date;\n}\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxCalendarBase]',\n})\nexport class IgxCalendarBaseDirective implements ControlValueAccessor {\n    /** @hidden @internal */\n    private _resourceStrings = CurrentResourceStrings.CalendarResStrings;\n\n    /**\n     * An accessor that sets the resource strings.\n     * By default it uses EN resources.\n     */\n    @Input()\n    set resourceStrings(value: ICalendarResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    /**\n     * An accessor that returns the resource strings.\n     */\n    get resourceStrings(): ICalendarResourceStrings {\n        return this._resourceStrings;\n    }\n\n    /**\n     * Gets the start day of the week.\n     * Can return a numeric or an enum representation of the week day.\n     * Defaults to `Sunday` / `0`.\n     */\n    @Input()\n    public get weekStart(): WEEKDAYS | number {\n        return this.calendarModel.firstWeekDay;\n    }\n\n    /**\n     * Sets the start day of the week.\n     * Can be assigned to a numeric value or to `WEEKDAYS` enum value.\n     */\n    public set weekStart(value: WEEKDAYS | number) {\n        this.calendarModel.firstWeekDay = value;\n    }\n\n    /**\n     * Gets the `locale` of the calendar.\n     * Default value is `\"en\"`.\n     */\n    @Input()\n    public get locale(): string {\n        return this._locale;\n    }\n\n    /**\n     * Sets the `locale` of the calendar.\n     * Expects a valid BCP 47 language tag.\n     * Default value is `\"en\"`.\n     */\n    public set locale(value: string) {\n        this._locale = value;\n        this.initFormatters();\n    }\n\n    /**\n     * Gets the date format options of the days view.\n     */\n    @Input()\n    public get formatOptions(): IFormattingOptions {\n        return this._formatOptions;\n    }\n\n    /**\n     * Sets the date format options of the days view.\n     * Default is { day: 'numeric', month: 'short', weekday: 'short', year: 'numeric' }\n     */\n    public set formatOptions(formatOptions: IFormattingOptions) {\n        this._formatOptions = Object.assign(this._formatOptions, formatOptions);\n        this.initFormatters();\n    }\n\n    /**\n     * Gets whether the `day`, `month` and `year` should be rendered\n     * according to the locale and formatOptions, if any.\n     */\n    @Input()\n    public get formatViews(): IFormattingViews {\n        return this._formatViews;\n    }\n\n    /**\n     * Gets whether the `day`, `month` and `year` should be rendered\n     * according to the locale and formatOptions, if any.\n     */\n    public set formatViews(formatViews: IFormattingViews) {\n        this._formatViews = Object.assign(this._formatViews, formatViews);\n    }\n\n    /**\n     *\n     * Gets the selection type.\n     * Default value is `\"single\"`.\n     * Changing the type of selection resets the currently\n     * selected values if any.\n     */\n    @Input()\n    public get selection(): string {\n        return this._selection;\n    }\n\n    /**\n     * Sets the selection.\n     */\n    public set selection(value: string) {\n        switch (value) {\n            case CalendarSelection.SINGLE:\n                this.selectedDates = null;\n                break;\n            case CalendarSelection.MULTI:\n            case CalendarSelection.RANGE:\n                this.selectedDates = [];\n                break;\n            default:\n                throw new Error('Invalid selection value');\n        }\n        this._onChangeCallback(this.selectedDates);\n        this.rangeStarted = false;\n        this._selection = value;\n    }\n\n    /**\n     * Gets the selected date(s).\n     *\n     * When selection is set to `single`, it returns\n     * a single `Date` object.\n     * Otherwise it is an array of `Date` objects.\n     */\n    @Input()\n    public get value(): Date | Date[] {\n        return this.selectedDates;\n    }\n\n    /**\n     * Sets the selected date(s).\n     *\n     * When selection is set to `single`, it accepts\n     * a single `Date` object.\n     * Otherwise it is an array of `Date` objects.\n     */\n    public set value(value: Date | Date[]) {\n        if (!value || !!value && (value as Date[]).length === 0) {\n            this.selectedDatesWithoutFocus = new Date();\n            return;\n        }\n        if (!this.selectedDatesWithoutFocus) {\n            const valueDate = value[0] ? Math.min.apply(null, value) : value;\n            const date = this.getDateOnly(new Date(valueDate)).setDate(1);\n            this.viewDate = new Date(date);\n        }\n        this.selectDate(value);\n        this.selectedDatesWithoutFocus = value;\n    }\n\n    /**\n     * Gets the date that is presented.\n     * By default it is the current date.\n     */\n    @Input()\n    public get viewDate(): Date {\n        return this._viewDate;\n    }\n\n    /**\n     * Sets the date that will be presented in the default view when the component renders.\n     */\n    public set viewDate(value: Date) {\n        if (this._viewDate) {\n            this.selectedDatesWithoutFocus = value;\n        }\n        const date = this.getDateOnly(value).setDate(1);\n        this._viewDate = new Date(date);\n    }\n\n    /**\n     * Gets the disabled dates descriptors.\n     */\n    @Input()\n    public get disabledDates(): DateRangeDescriptor[] {\n        return this._disabledDates;\n    }\n\n    /**\n     * Sets the disabled dates' descriptors.\n     * ```typescript\n     * @ViewChild(\"MyCalendar\")\n     * public calendar: IgxCalendarComponent;\n     * ngOnInit(){\n     *    this.calendar.disabledDates = [\n     *     {type: DateRangeType.Between, dateRange: [new Date(\"2020-1-1\"), new Date(\"2020-1-15\")]},\n     *     {type: DateRangeType.Weekends}];\n     * }\n     * ```\n     */\n    public set disabledDates(value: DateRangeDescriptor[]) {\n        this._disabledDates = value;\n    }\n\n    /**\n     * Gets the special dates descriptors.\n     */\n    @Input()\n    public get specialDates(): DateRangeDescriptor[] {\n        return this._specialDates;\n    }\n\n    /**\n     * Sets the special dates' descriptors.\n     * ```typescript\n     * @ViewChild(\"MyCalendar\")\n     * public calendar: IgxCalendarComponent;\n     * ngOnInit(){\n     *    this.calendar.specialDates = [\n     *     {type: DateRangeType.Between, dateRange: [new Date(\"2020-1-1\"), new Date(\"2020-1-15\")]},\n     *     {type: DateRangeType.Weekends}];\n     * }\n     * ```\n     */\n    public set specialDates(value: DateRangeDescriptor[]) {\n        this._specialDates = value;\n    }\n\n    /**\n     * Sets/gets whether the outside dates (dates that are out of the current month) will be hidden.\n     * Default value is `false`.\n     * ```html\n     * <igx-calendar [hideOutsideDays] = \"true\"></igx-calendar>\n     * ```\n     * ```typescript\n     * let hideOutsideDays = this.calendar.hideOutsideDays;\n     * ```\n     */\n\n    @Input()\n    public hideOutsideDays = false;\n\n    /**\n     * Emits an event when a date is selected.\n     * Provides reference the `selectedDates` property.\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date | Date[]>();\n\n    /**\n     * Emits an event when the month in view is changed.\n     * ```html\n     * <igx-calendar (viewDateChanged)=\"viewDateChanged($event)\"></igx-calendar>\n     * ```\n     * ```typescript\n     * public viewDateChanged(event: IViewDateChangeEventArgs) {\n     *  let viewDate = event.currentValue;\n     * }\n     * ```\n     */\n    @Output()\n    public viewDateChanged = new EventEmitter<IViewDateChangeEventArgs>();\n\n    /**\n     * Emits an event when the active view is changed.\n     * ```html\n     * <igx-calendar (activeViewChanged)=\"activeViewChanged($event)\"></igx-calendar>\n     * ```\n     * ```typescript\n     * public activeViewChanged(event: CalendarView) {\n     *  let activeView = event;\n     * }\n     * ```\n     */\n    @Output()\n    public activeViewChanged  = new EventEmitter<CalendarView>();\n\n    /**\n     * @hidden\n     */\n    private _selection: CalendarSelection | string = CalendarSelection.SINGLE;\n\n    /**\n     * @hidden\n     */\n    public rangeStarted = false;\n\n    /**\n     * @hidden\n     */\n    private _locale = 'en';\n\n    /**\n     * @hidden\n     */\n    private _viewDate: Date;\n\n    /**\n     * @hidden\n     */\n    private _disabledDates: DateRangeDescriptor[] = null;\n\n    /**\n     * @hidden\n     */\n    private _specialDates: DateRangeDescriptor[] = null;\n\n    /**\n     * @hidden\n     */\n    private _formatOptions: IFormattingOptions = {\n        day: 'numeric',\n        month: 'short',\n        weekday: 'short',\n        year: 'numeric'\n    };\n\n    /**\n     * @hidden\n     */\n    private _formatViews: IFormattingViews = {\n        day: false,\n        month: true,\n        year: false\n    };\n\n    /**\n     * @hidden\n     */\n    protected formatterWeekday;\n\n    /**\n     * @hidden\n     */\n    protected formatterDay;\n\n    /**\n     * @hidden\n     */\n    protected formatterMonth;\n\n    /**\n     * @hidden\n     */\n    protected formatterYear;\n\n    /**\n     * @hidden\n     */\n    protected formatterMonthday;\n\n    /**\n     * @hidden\n     */\n    protected calendarModel: Calendar;\n\n    /**\n     * @hidden\n     */\n    public monthScrollDirection = ScrollMonth.NONE;\n\n    /**\n     * @hidden\n     */\n    public scrollMonth$ = new Subject();\n\n    /**\n     * @hidden\n     */\n    public stopMonthScroll$ = new Subject<boolean>();\n\n    /**\n     * @hidden\n     */\n    public startMonthScroll$ = new Subject();\n\n    /**\n     * @hidden\n     */\n    public selectedDates;\n\n    /**\n     * @hidden\n     */\n    private selectedDatesWithoutFocus;\n\n    /**\n     * @hidden\n     */\n    protected _onTouchedCallback: () => void = () => { };\n    /**\n     * @hidden\n     */\n    protected _onChangeCallback: (_: Date) => void = () => { };\n\n    /**\n     * @hidden\n     */\n    constructor() {\n        this.calendarModel = new Calendar();\n\n        this.viewDate = this.viewDate ? this.viewDate : new Date();\n\n        this.calendarModel.firstWeekDay = this.weekStart;\n        this.initFormatters();\n    }\n\n    /**\n     * @hidden\n     */\n    private getDateOnlyInMs(date: Date) {\n        return this.getDateOnly(date).getTime();\n    }\n\n    /**\n     * @hidden\n     */\n    private generateDateRange(start: Date, end: Date): Date[] {\n        const result = [];\n        start = this.getDateOnly(start);\n        end = this.getDateOnly(end);\n        while (start.getTime() < end.getTime()) {\n            start = this.calendarModel.timedelta(start, 'day', 1);\n            result.push(start);\n        }\n\n        return result;\n    }\n\n    /**\n     * Performs a single selection.\n     * @hidden\n     */\n    private selectSingle(value: Date) {\n        this.selectedDates = this.getDateOnly(value);\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * Performs a multiple selection\n     * @hidden\n     */\n    private selectMultiple(value: Date | Date[]) {\n        if (Array.isArray(value)) {\n            const newDates = value.map(v => this.getDateOnly(v).getTime());\n            const selDates = this.selectedDates.map(v => this.getDateOnly(v).getTime());\n\n            if (JSON.stringify(newDates) === JSON.stringify(selDates)) {\n                return;\n            }\n\n            this.selectedDates = Array.from(new Set([...newDates, ...selDates])).map(v => new Date(v));\n        } else {\n            const valueDateOnly = this.getDateOnly(value);\n            const newSelection = [];\n            if (this.selectedDates.every((date: Date) => date.getTime() !== valueDateOnly.getTime())) {\n                newSelection.push(valueDateOnly);\n            } else {\n                this.selectedDates = this.selectedDates.filter(\n                    (date: Date) => date.getTime() !== valueDateOnly.getTime()\n                );\n            }\n\n            if (newSelection.length > 0) {\n                this.selectedDates = this.selectedDates.concat(newSelection);\n            }\n        }\n        this.selectedDates = this.selectedDates.filter(d => !this.isDateDisabled(d));\n        this.selectedDates.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     */\n    private selectRange(value: Date | Date[], excludeDisabledDates: boolean = false) {\n        let start: Date;\n        let end: Date;\n\n        if (Array.isArray(value)) {\n            // this.rangeStarted = false;\n            value.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n            start = this.getDateOnly(value[0]);\n            end = this.getDateOnly(value[value.length - 1]);\n            this.selectedDates = [start, ...this.generateDateRange(start, end)];\n        } else {\n            if (!this.rangeStarted) {\n                this.rangeStarted = true;\n                this.selectedDates = [value];\n            } else {\n                this.rangeStarted = false;\n\n                if (this.selectedDates[0].getTime() === value.getTime()) {\n                    this.selectedDates = [];\n                    this._onChangeCallback(this.selectedDates);\n                    return;\n                }\n\n                this.selectedDates.push(value);\n                this.selectedDates.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n\n                start = this.selectedDates.shift();\n                end = this.selectedDates.pop();\n                this.selectedDates = [start, ...this.generateDateRange(start, end)];\n            }\n        }\n\n        if (excludeDisabledDates) {\n            this.selectedDates = this.selectedDates.filter(d => !this.isDateDisabled(d));\n        }\n\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * Performs a single deselection.\n     * @hidden\n     */\n    private deselectSingle(value: Date) {\n        if (this.selectedDates !== null &&\n            this.getDateOnlyInMs(value as Date) === this.getDateOnlyInMs(this.selectedDates)) {\n            this.selectedDates = null;\n            this._onChangeCallback(this.selectedDates);\n        }\n    }\n\n    /**\n     * Performs a multiple deselection.\n     * @hidden\n     */\n    private deselectMultiple(value: Date[]) {\n        value = value.filter(v => v !== null);\n        const selectedDatesCount = this.selectedDates.length;\n        const datesInMsToDeselect: Set<number> = new Set<number>(\n            value.map(v => this.getDateOnlyInMs(v)));\n\n        for (let i = this.selectedDates.length - 1; i >= 0; i--) {\n            if (datesInMsToDeselect.has(this.getDateOnlyInMs(this.selectedDates[i]))) {\n                this.selectedDates.splice(i, 1);\n            }\n        }\n\n        if (this.selectedDates.length !== selectedDatesCount) {\n            this._onChangeCallback(this.selectedDates);\n        }\n    }\n\n    /**\n     * Performs deselection of a single value, when selection is multi\n     * Usually performed by the selectMultiple method, but leads to bug when multiple months are in view\n     * @hidden\n     */\n    public deselectMultipleInMonth(value: Date) {\n        const valueDateOnly = this.getDateOnly(value);\n        this.selectedDates = this.selectedDates.filter(\n            (date: Date) => date.getTime() !== valueDateOnly.getTime()\n        );\n    }\n\n    /**\n     * Performs a range deselection.\n     * @hidden\n     */\n    private deselectRange(value: Date[]) {\n        value = value.filter(v => v !== null);\n        if (value.length < 1) {\n            return;\n        }\n\n        value.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n        const valueStart = this.getDateOnlyInMs(value[0]);\n        const valueEnd = this.getDateOnlyInMs(value[value.length - 1]);\n\n        this.selectedDates.sort((a: Date, b: Date) => a.valueOf() - b.valueOf());\n        const selectedDatesStart = this.getDateOnlyInMs(this.selectedDates[0]);\n        const selectedDatesEnd = this.getDateOnlyInMs(this.selectedDates[this.selectedDates.length - 1]);\n\n        if (!(valueEnd < selectedDatesStart) && !(valueStart > selectedDatesEnd)) {\n            this.selectedDates = [];\n            this.rangeStarted = false;\n            this._onChangeCallback(this.selectedDates);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected initFormatters() {\n        this.formatterDay = new Intl.DateTimeFormat(this._locale, { day: this._formatOptions.day });\n        this.formatterWeekday = new Intl.DateTimeFormat(this._locale, { weekday: this._formatOptions.weekday });\n        this.formatterMonth = new Intl.DateTimeFormat(this._locale, { month: this._formatOptions.month });\n        this.formatterYear = new Intl.DateTimeFormat(this._locale, { year: this._formatOptions.year });\n        this.formatterMonthday = new Intl.DateTimeFormat(this._locale, { month: this._formatOptions.month, day: this._formatOptions.day });\n    }\n\n    /**\n     * @hidden\n     */\n    protected getDateOnly(date: Date) {\n        return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (v: Date) => void) {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date | Date[]) {\n        this.selectDate(value as Date);\n    }\n\n    /**\n     * Checks whether a date is disabled.\n     * @hidden\n     */\n    public isDateDisabled(date: Date) {\n        if (this.disabledDates === null) {\n            return false;\n        }\n\n        return isDateInRanges(date, this.disabledDates);\n    }\n\n    /**\n     * Selects date(s) (based on the selection type).\n     */\n    public selectDate(value: Date | Date[]) {\n        if (value === null || value === undefined || (Array.isArray(value) && value.length === 0)) {\n            return;\n        }\n\n        switch (this.selection) {\n            case CalendarSelection.SINGLE:\n                if (isDate(value) && !this.isDateDisabled(value as Date)) {\n                    this.selectSingle(value as Date);\n                }\n                break;\n            case CalendarSelection.MULTI:\n                this.selectMultiple(value);\n                break;\n            case CalendarSelection.RANGE:\n                this.selectRange(value, true);\n                break;\n        }\n    }\n\n    /**\n     * Deselects date(s) (based on the selection type).\n     */\n    public deselectDate(value?: Date | Date[]) {\n        if (!this.selectedDates || this.selectedDates.length === 0) {\n            return;\n        }\n\n        if (value === null || value === undefined) {\n            this.selectedDates = this.selection === CalendarSelection.SINGLE ? null : [];\n            this.rangeStarted = false;\n            this._onChangeCallback(this.selectedDates);\n            return;\n        }\n\n        switch (this.selection) {\n            case CalendarSelection.SINGLE:\n                this.deselectSingle(value as Date);\n                break;\n            case CalendarSelection.MULTI:\n                this.deselectMultiple(value as Date[]);\n                break;\n            case CalendarSelection.RANGE:\n                this.deselectRange(value as Date[]);\n                break;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectDateFromClient(value: Date) {\n        switch (this.selection) {\n            case CalendarSelection.SINGLE:\n            case CalendarSelection.MULTI:\n                this.selectDate(value);\n                break;\n            case CalendarSelection.RANGE:\n                this.selectRange(value, true);\n                break;\n        }\n    }\n}\n","/**\n * This file contains all the directives used by the @link IgxCalendarComponent.\n * Except for the directives which are used for templating the calendar itself\n * you should generally not use them directly.\n * @preferred\n */\nimport {\n    Directive,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    Output,\n    TemplateRef,\n    ElementRef,\n    AfterViewInit,\n    OnDestroy,\n    NgZone\n} from '@angular/core';\nimport { fromEvent, Subject, interval } from 'rxjs';\nimport { takeUntil, debounce, tap } from 'rxjs/operators';\nimport { KEYS } from '../core/utils';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarYear]'\n})\nexport class IgxCalendarYearDirective {\n\n    @Input('igxCalendarYear')\n    public value: Date;\n\n    @Input()\n    public date: Date;\n\n    @Output()\n    public onYearSelection = new EventEmitter<Date>();\n\n    @HostBinding('class.igx-calendar__year')\n    public get defaultCSS(): boolean {\n        return !this.isCurrentYear;\n    }\n\n    @HostBinding('class.igx-calendar__year--current')\n    public get currentCSS(): boolean {\n        return this.isCurrentYear;\n    }\n\n    @HostBinding('attr.role')\n    public get role(): string {\n        return this.isCurrentYear ? 'spinbutton' : null;\n    }\n\n    @HostBinding('attr.aria-valuenow')\n    public get valuenow(): number {\n        return this.isCurrentYear ? this.date.getFullYear() : null;\n    }\n\n    @HostBinding('attr.tabindex')\n    public get tabIndex(): number {\n        return this.isCurrentYear ? 0 : -1;\n    }\n\n\n    public get isCurrentYear(): boolean {\n        return this.date.getFullYear() === this.value.getFullYear();\n    }\n\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    constructor(public elementRef: ElementRef) {}\n\n    @HostListener('click')\n    public onClick() {\n        this.onYearSelection.emit(this.value);\n    }\n}\n\n@Directive({\n    selector: '[igxCalendarMonth]'\n})\nexport class IgxCalendarMonthDirective {\n\n    @Input('igxCalendarMonth')\n    public value: Date;\n\n    @Input()\n    public date: Date;\n\n    @Input()\n    public index;\n\n    @Output()\n    public onMonthSelection = new EventEmitter<Date>();\n\n    @HostBinding('class.igx-calendar__month')\n    public get defaultCSS(): boolean {\n        return !this.isCurrentMonth;\n    }\n\n    @HostBinding('class.igx-calendar__month--current')\n    public get currentCSS(): boolean {\n        return this.isCurrentMonth;\n    }\n\n    public get isCurrentMonth(): boolean {\n        return this.date.getMonth() === this.value.getMonth();\n    }\n\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    constructor(public elementRef: ElementRef) {}\n\n    @HostListener('click')\n    public onClick() {\n        const date = new Date(this.value.getFullYear(), this.value.getMonth(), this.date.getDate());\n        this.onMonthSelection.emit(date);\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarHeader]'\n})\nexport class IgxCalendarHeaderTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarSubheader]'\n})\nexport class IgxCalendarSubheaderTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxCalendarScrollMonth]'\n})\nexport class IgxCalendarScrollMonthDirective implements AfterViewInit, OnDestroy {\n\n    /**\n     * A callback function to be invoked when month increment/decrement starts.\n     * @hidden\n     */\n    @Input()\n    public startScroll: (keydown?: boolean) => {};\n\n    /**\n     * A callback function to be invoked when month increment/decrement stops.\n     * @hidden\n     */\n    @Input()\n    public stopScroll: (event: any) => {};\n\n    /**\n     * @hidden\n     */\n    private destroy$ = new Subject<boolean>();\n\n    constructor(private element: ElementRef, private zone: NgZone) { }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n\n        fromEvent(this.element.nativeElement, 'keyup').pipe(\n            debounce(() => interval(100)),\n            takeUntil(this.destroy$)\n        ).subscribe((event: KeyboardEvent) => {\n            this.stopScroll(event);\n        });\n\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.element.nativeElement, 'keydown').pipe(\n                tap((event: KeyboardEvent) => {\n                    if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                    }\n                }),\n                debounce(() => interval(100)),\n                takeUntil(this.destroy$)\n            ).subscribe((event: KeyboardEvent) => {\n                if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n                    this.zone.run(() => this.startScroll(true));\n                }\n            });\n        });\n\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mousedown')\n    public onMouseDown() {\n        this.startScroll();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseup', ['$event'])\n    public onMouseUp(event: MouseEvent) {\n        this.stopScroll(event);\n    }\n}\n","import { IgxCalendarBaseDirective } from './calendar-base';\nimport { HostBinding, Directive, ViewChildren, ElementRef, QueryList, Input } from '@angular/core';\nimport { KEYS } from '../core/utils';\n\n/**\n * Sets the calender view - days, months or years.\n */\nexport enum CalendarView {\n    DEFAULT,\n    YEAR,\n    DECADE\n}\n\n@Directive({\n    selector: '[igxMonthPickerBase]'\n})\nexport class IgxMonthPickerBaseDirective extends IgxCalendarBaseDirective {\n\n    /**\n     * Holds month view index we are operating on.\n     */\n    protected activeViewIdx = 0;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren('yearsBtn')\n    public yearsBtns: QueryList<ElementRef>;\n\n    /**\n     * @hidden @internal\n     */\n    public previousViewDate: Date;\n\n\n    @Input()\n    /**\n     * Gets the current active view.\n     * ```typescript\n     * this.activeView = calendar.activeView;\n     * ```\n     */\n    public get activeView(): CalendarView {\n        return this._activeView;\n    }\n\n    /**\n     * Sets the current active view.\n     * ```html\n     * <igx-calendar [activeView]=\"1\" #calendar></igx-calendar>\n     * ```\n     * ```typescript\n     * calendar.activeView = CalendarView.YEAR;\n     * ```\n     */\n    public set activeView(val: CalendarView) {\n        this._activeView = val;\n    }\n\n    /**\n     * @hidden\n     */\n    public get isDefaultView(): boolean {\n        return this._activeView === CalendarView.DEFAULT;\n    }\n\n    /**\n     * @hidden\n     */\n    public get isDecadeView(): boolean {\n        return this._activeView === CalendarView.DECADE;\n    }\n\n    /**\n     * @hidden\n     */\n    private _activeView = CalendarView.DEFAULT;\n\n    /**\n     * @hidden\n     */\n    public changeYear(event: Date) {\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.getFirstViewDate(event, 'month', this.activeViewIdx);\n        this.activeView = CalendarView.DEFAULT;\n\n        requestAnimationFrame(() => {\n            if (this.yearsBtns && this.yearsBtns.length) {\n                this.yearsBtns.find((e: ElementRef, idx: number) => idx === this.activeViewIdx).nativeElement.focus();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecade(activeViewIdx = 0): void {\n        this.activeView = CalendarView.DECADE;\n        this.activeViewIdx = activeViewIdx;\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecadeKB(event, activeViewIdx = 0) {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.preventDefault();\n            this.activeViewDecade(activeViewIdx);\n        }\n    }\n\n    /**\n     * Returns the locale representation of the year in the year view if enabled,\n     * otherwise returns the default `Date.getFullYear()` value.\n     *\n     * @hidden\n     */\n    public formattedYear(value: Date): string {\n        if (this.formatViews.year) {\n            return this.formatterYear.format(value);\n        }\n        return `${value.getFullYear()}`;\n    }\n}\n","import {\n    Component,\n    Output,\n    EventEmitter,\n    Input,\n    HostBinding,\n    HostListener,\n    ViewChildren,\n    QueryList,\n    ElementRef\n} from '@angular/core';\nimport { Calendar } from '../calendar';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxCalendarMonthDirective } from '../calendar.directives';\n\nlet NEXT_ID = 0;\n\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxMonthsViewComponent, multi: true }],\n    selector: 'igx-months-view',\n    templateUrl: 'months-view.component.html'\n})\nexport class IgxMonthsViewComponent implements ControlValueAccessor {\n    /**\n     * Sets/gets the `id` of the months view.\n     * If not set, the `id` will have value `\"igx-months-view-0\"`.\n     * ```html\n     * <igx-months-view id=\"my-months-view\"></igx-months-view>\n     * ```\n     * ```typescript\n     * let monthsViewId =  this.monthsView.id;\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-months-view-${NEXT_ID++}`;\n\n    /**\n     * Gets/sets the selected date of the months view.\n     * By default it is the current date.\n     * ```html\n     * <igx-months-view [date]=\"myDate\"></igx-months-view>\n     * ```\n     * ```typescript\n     * let date =  this.monthsView.date;\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @Input()\n    public set date(value) {\n        this._date = value;\n        this.activeMonth = this.date.getMonth();\n    }\n\n    public get date() {\n        return this._date;\n    }\n\n    /**\n     * Gets the month format option of the months view.\n     * ```typescript\n     * let monthFormat = this.monthsView.monthFormat.\n     * ```\n     */\n    @Input()\n    public get monthFormat(): string {\n        return this._monthFormat;\n    }\n\n    /**\n     * Sets the month format option of the months view.\n     * ```html\n     * <igx-months-view> [monthFormat] = \"short'\"</igx-months-view>\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    public set monthFormat(value: string) {\n        this._monthFormat = value;\n        this.initMonthFormatter();\n    }\n\n    /**\n     * Gets the `locale` of the months view.\n     * Default value is `\"en\"`.\n     * ```typescript\n     * let locale =  this.monthsView.locale;\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @Input()\n    public get locale(): string {\n        return this._locale;\n    }\n\n    /**\n     * Sets the `locale` of the months view.\n     * Expects a valid BCP 47 language tag.\n     * Default value is `\"en\"`.\n     * ```html\n     * <igx-months-view [locale]=\"de\"></igx-months-view>\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    public set locale(value: string) {\n        this._locale = value;\n        this.initMonthFormatter();\n    }\n\n    /**\n     * Gets/sets whether the view should be rendered\n     * according to the locale and monthFormat, if any.\n     */\n    @Input()\n    public formatView = true;\n\n    /**\n     * Emits an event when a selection is made in the months view.\n     * Provides reference the `date` property in the `IgxMonthsViewComponent`.\n     * ```html\n     * <igx-months-view (onSelection)=\"onSelection($event)\"></igx-months-view>\n     * ```\n     * @memberof IgxMonthsViewComponent\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date>();\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxCalendarMonthDirective, { read: IgxCalendarMonthDirective })\n    public monthsRef: QueryList<IgxCalendarMonthDirective>;\n\n    /**\n     * Returns an array of date objects which are then used to\n     * properly render the month names.\n     *\n     * Used in the template of the component\n     *\n     * @hidden\n     */\n    get months(): Date[] {\n        let start = new Date(this.date.getFullYear(), 0, 1);\n        const result = [];\n\n        for (let i = 0; i < 12; i++) {\n            result.push(start);\n            start = this._calendarModel.timedelta(start, 'month', 1);\n        }\n\n        return result;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public activeMonth;\n\n    private _date = new Date();\n    /**\n     * @hidden\n     */\n    private _formatterMonth: any;\n\n    /**\n     * @hidden\n     */\n    private _locale = 'en';\n\n    /**\n     * @hidden\n     */\n    private _monthFormat = 'short';\n\n    /**\n     * @hidden\n     */\n    private _calendarModel: Calendar;\n\n    /**\n     * @hidden\n     */\n    private _onTouchedCallback: () => void = () => { };\n    /**\n     * @hidden\n     */\n    private _onChangeCallback: (_: Date) => void = () => { };\n\n    constructor(public el: ElementRef) {\n        this.initMonthFormatter();\n        this._calendarModel = new Calendar();\n    }\n\n    /**\n     * Returns the locale representation of the month in the months view.\n     *\n     * @hidden\n     */\n    public formattedMonth(value: Date): string {\n        if (this.formatView) {\n            return this._formatterMonth.format(value);\n        }\n        return `${value.getMonth()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public selectMonth(event) {\n        this.onSelection.emit(event);\n\n        this.date = event;\n        this.activeMonth = this.date.getMonth();\n        this._onChangeCallback(this.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (v: Date) => void) {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date) {\n        if (value) {\n            this.date = value;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public monthTracker(index, item): string {\n        return `${item.getMonth()}}`;\n    }\n\n    /**\n     * @hidden\n     */\n    private initMonthFormatter() {\n        this._formatterMonth = new Intl.DateTimeFormat(this._locale, { month: this.monthFormat });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowup', ['$event'])\n    public onKeydownArrowUp(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) {\n            return;\n        }\n\n        const months = this.monthsRef.toArray();\n        const nodeRect = node.nativeElement.getBoundingClientRect();\n\n        for (let index = months.indexOf(node) - 1; index >= 0; index--) {\n            const nextNodeRect = months[index].nativeElement.getBoundingClientRect();\n            const tolerance = 6;\n            if (nodeRect.top !== nextNodeRect.top && (nextNodeRect.left - nodeRect.left) < tolerance) {\n                const month = months[index];\n                month.nativeElement.focus();\n                this.activeMonth = month.value.getMonth();\n                break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrowDown(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) {\n            return;\n        }\n\n        const months = this.monthsRef.toArray();\n        const nodeRect = node.nativeElement.getBoundingClientRect();\n\n        for (let index = months.indexOf(node) + 1; index < months.length; index++) {\n            const nextNodeRect = months[index].nativeElement.getBoundingClientRect();\n            const tolerance = 6;\n            if (nextNodeRect.top !== nodeRect.top && (nodeRect.left - nextNodeRect.left) < tolerance ) {\n                const month = months[index];\n                month.nativeElement.focus();\n                this.activeMonth = month.value.getMonth();\n                break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowright', ['$event'])\n    public onKeydownArrowRight(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) { return; }\n\n        const months = this.monthsRef.toArray();\n        if (months.indexOf(node) + 1 < months.length) {\n            const month = months[months.indexOf(node) + 1];\n            this.activeMonth = month.value.getMonth();\n            month.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowleft', ['$event'])\n    public onKeydownArrowLeft(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const node = this.monthsRef.find((date) => date.nativeElement === event.target);\n        if (!node) { return; }\n\n        const months = this.monthsRef.toArray();\n        if (months.indexOf(node) - 1 >= 0) {\n            const month = months[months.indexOf(node) - 1];\n            this.activeMonth = month.value.getMonth();\n            month.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const month = this.monthsRef.toArray()[0];\n        this.activeMonth = month.value.getMonth();\n        month.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const months = this.monthsRef.toArray();\n        const month = months[months.length - 1];\n        this.activeMonth = month.value.getMonth();\n        month.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.enter', ['$event'])\n    public onKeydownEnter(event) {\n        const value = this.monthsRef.find((date) => date.nativeElement === event.target).value;\n        this.date = new Date(value.getFullYear(), value.getMonth(), this.date.getDate());\n        this.activeMonth = this.date.getMonth();\n        this.onSelection.emit(this.date);\n        this._onChangeCallback(this.date);\n    }\n\n    @HostListener('focusout', ['$event'])\n    public resetActiveMonth(event) {\n        this.activeMonth = this.date.getMonth();\n    }\n}\n","import { Component, Output, EventEmitter, Input, HostBinding, HostListener, ElementRef, Injectable, ViewChildren, QueryList} from '@angular/core';\nimport { range, Calendar } from '../calendar';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\nimport { IgxCalendarYearDirective } from '../calendar.directives';\n\nlet NEXT_ID = 0;\n\n@Injectable()\nexport class CalendarHammerConfig extends HammerGestureConfig {\n    public overrides = {\n        pan: { direction: Hammer.DIRECTION_VERTICAL, threshold: 1 }\n    };\n}\n\n@Component({\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxYearsViewComponent,\n            multi: true\n        },\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: CalendarHammerConfig\n        }\n    ],\n    selector: 'igx-years-view',\n    templateUrl: 'years-view.component.html'\n})\nexport class IgxYearsViewComponent implements ControlValueAccessor {\n\n    /**\n     * Sets/gets the `id` of the years view.\n     * If not set, the `id` will have value `\"igx-years-view-0\"`.\n     * ```html\n     * <igx-years-view id = \"my-years-view\"></igx-years-view>\n     * ```\n     * ```typescript\n     * let yearsViewId =  this.yearsView.id;\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-years-view-${NEXT_ID++}`;\n\n    /**\n     * Gets/sets the selected date of the years view.\n     * By default it is the current date.\n     * ```html\n     * <igx-years-view [date]=\"myDate\"></igx-years-view>\n     * ```\n     * ```typescript\n     * let date =  this.yearsView.date;\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    @Input()\n    public date = new Date();\n\n    /**\n     * Gets the year format option of the years view.\n     * ```typescript\n     * let yearFormat = this.yearsView.yearFormat.\n     * ```\n     */\n    @Input()\n    public get yearFormat(): string {\n        return this._yearFormat;\n    }\n\n    /**\n     * Sets the year format option of the years view.\n     * ```html\n     * <igx-years-view [yearFormat]=\"numeric\"></igx-years-view>\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    public set yearFormat(value: string) {\n        this._yearFormat = value;\n        this.initYearFormatter();\n    }\n\n    /**\n     * Gets the `locale` of the years view.\n     * Default value is `\"en\"`.\n     * ```typescript\n     * let locale =  this.yearsView.locale;\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    @Input()\n    public get locale(): string {\n        return this._locale;\n    }\n\n    /**\n     * Sets the `locale` of the years view.\n     * Expects a valid BCP 47 language tag.\n     * Default value is `\"en\"`.\n     * ```html\n     * <igx-years-view [locale]=\"de\"></igx-years-view>\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    public set locale(value: string) {\n        this._locale = value;\n        this.initYearFormatter();\n    }\n\n    /**\n     * Gets/sets whether the view should be rendered\n     * according to the locale and yearFormat, if any.\n     */\n    @Input()\n    public formatView: boolean;\n\n    /**\n     * Emits an event when a selection is made in the years view.\n     * Provides reference the `date` property in the `IgxYearsViewComponent`.\n     * ```html\n     * <igx-years-view (onSelection)=\"onSelection($event)\"></igx-years-view>\n     * ```\n     * @memberof IgxYearsViewComponent\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date>();\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChildren(IgxCalendarYearDirective, { read: IgxCalendarYearDirective })\n    public calendarDir: QueryList<IgxCalendarYearDirective>;\n\n    /**\n     * Returns an array of date objects which are then used to properly\n     * render the years.\n     *\n     * Used in the template of the component.\n     *\n     * @hidden\n     */\n    get decade(): number[] {\n        const result = [];\n        const start = this.date.getFullYear() - 3;\n        const end = this.date.getFullYear() + 4;\n\n        for (const year of range(start, end)) {\n            result.push(new Date(year, this.date.getMonth(), this.date.getDate()));\n        }\n\n        return result;\n    }\n\n    /**\n     * @hidden\n     */\n    private _formatterYear: any;\n\n    /**\n     * @hidden\n     */\n    private _locale = 'en';\n\n    /**\n     * @hidden\n     */\n    private _yearFormat = 'numeric';\n\n    /**\n     * @hidden\n     */\n    private _calendarModel: Calendar;\n\n    /**\n     * @hidden\n     */\n    private _onTouchedCallback: () => void = () => { };\n    /**\n     * @hidden\n     */\n    private _onChangeCallback: (_: Date) => void = () => { };\n\n    constructor(public el: ElementRef) {\n        this.initYearFormatter();\n        this._calendarModel = new Calendar();\n    }\n\n    /**\n     * Returns the locale representation of the year in the years view.\n     *\n     * @hidden\n     */\n    public formattedYear(value: Date): string {\n        if (this.formatView) {\n            return this._formatterYear.format(value);\n        }\n        return `${value.getFullYear()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public selectYear(event) {\n        this.date = event;\n\n        this.onSelection.emit(this.date);\n        this._onChangeCallback(this.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public scroll(event) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const delta = event.deltaY < 0 ? -1 : 1;\n        this.generateYearRange(delta);\n    }\n\n    /**\n     * @hidden\n     */\n    public pan(event) {\n        const delta = event.deltaY < 0 ? 1 : -1;\n        this.generateYearRange(delta);\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: (v: Date) => void) {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: () => void) {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public yearTracker(index, item): string {\n        return `${item.getFullYear()}}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date) {\n        if (value) {\n            this.date = value;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrowDown(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.generateYearRange(1);\n        this.calendarDir.find(date => date.isCurrentYear).nativeElement.nextElementSibling.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowup', ['$event'])\n    public onKeydownArrowUp(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.generateYearRange(-1);\n        this.calendarDir.find(date => date.isCurrentYear).nativeElement.previousElementSibling.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.enter')\n    public onKeydownEnter() {\n        this.onSelection.emit(this.date);\n        this._onChangeCallback(this.date);\n    }\n\n    /**\n     * @hidden\n     */\n    private initYearFormatter() {\n        this._formatterYear = new Intl.DateTimeFormat(this._locale, { year: this.yearFormat });\n    }\n\n    /**\n     * @hidden\n     */\n    private generateYearRange(delta: number) {\n        const currentYear = new Date().getFullYear();\n\n        if ((delta > 0 && this.date.getFullYear() - currentYear >= 95) ||\n            (delta < 0 && currentYear - this.date.getFullYear() >= 95)) {\n            return;\n        }\n        this.date = this._calendarModel.timedelta(this.date, 'year', delta);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { IgxDayItemComponent } from './day-item.component';\nimport { IgxDaysViewComponent } from './days-view.component';\nimport { ScrollMonth } from '../calendar-base';\n\nenum Direction {\n    Up = 'ArrowUp',\n    Down = 'ArrowDown',\n    Left = 'ArrowLeft',\n    Right = 'ArrowRight',\n}\n\nconst ARROW = 'Arrow';\n\n/** @hidden */\n@Injectable()\nexport class IgxDaysViewNavigationService {\n    public monthView: IgxDaysViewComponent;\n    /**\n     * Implements kb navigation in all MoveDirections. nextDate and nextMonthView naming convention is used for both previous/next\n     * @hidden\n     */\n    public focusNextDate(target: HTMLElement, key: string, nextView = false) {\n        if (target.childElementCount === 0) { target = target.parentElement; }\n        if (key.indexOf('Arrow') === -1) { key = ARROW.concat(key); }\n        const monthView = this.monthView;\n        const node = monthView.dates.find((date) => date.nativeElement === target);\n        let dates = monthView.dates.toArray(),\n            day: IgxDayItemComponent, step, i, nextDate: Date;\n        const index = dates.indexOf(node);\n\n        if (!node) { return; }\n\n        // focus item in current month\n        switch (key) {\n            case Direction.Left: {\n                step = -1;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i > 0; i--) {\n                    day = nextView ? dates[i] : dates[i - 1];\n                    nextDate = day.date.date;\n                    if (day.date.isPrevMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n            case Direction.Right: {\n                step = 1;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i < dates.length - 1; i++) {\n                    day = nextView ? dates[i] : dates[i + 1];\n                    nextDate = day.date.date;\n                    if (day.date.isNextMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n            case Direction.Up: {\n                step = -7;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i - 7 > -1; i -= 7) {\n                    day = nextView ? dates[i] : dates[i - 7];\n                    nextDate = day.date.date;\n                    if (day.date.isPrevMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n            case Direction.Down: {\n                step = 7;\n                nextDate = this.timedelta(node.date.date, step);\n                for (i = index; i + 7 < 42; i += 7) {\n                    day = nextView ? dates[i] : dates[i + 7];\n                    nextDate = day.date.date;\n                    if (day.date.isNextMonth) {\n                        break;\n                    }\n                    if (day && day.isFocusable) {\n                        day.nativeElement.focus();\n                        return;\n                    }\n                }\n                break;\n            }\n        }\n\n        // focus item in prev/next visible month\n        const nextMonthView = step > 0 ? monthView.nextMonthView : monthView.prevMonthView;\n        if (nextMonthView) {\n            dates = nextMonthView.dates.toArray();\n            day = dates.find((item) => item.date.date.getTime() === nextDate.getTime());\n\n            if (day && day.isFocusable) {\n                day.nativeElement.focus();\n                return;\n            }\n            nextMonthView.daysNavService.focusNextDate(day.nativeElement, key);\n        }\n\n        // if iterating in the visible prev/next moths above found a day that is not focusable, ie is disabled, hidden, etc\n        // then it is needed to recalculate the next day, which is going to be part of the prev/next months\n        if (day && !day.isFocusable) {\n            day = dates[i + step];\n            if (!day) {\n                nextDate = this.timedelta(node.date.date, step + i - index);\n            }\n        }\n\n        // focus item in prev/next month, which is currently out of view\n        let dayIsNextMonth: boolean; // determine what we need to check for next date - if it belongs to prev or next month\n        if (day) { dayIsNextMonth = step > 0 ? day.date.isNextMonth : day.date.isPrevMonth; }\n        if (monthView.changeDaysView && !nextMonthView && ((day && dayIsNextMonth) || !day)) {\n            const monthAction = step > 0 ? ScrollMonth.NEXT : ScrollMonth.PREV;\n            monthView.onViewChanging.emit({monthAction: monthAction, key: key, nextDate: nextDate});\n        }\n    }\n\n    /**\n     * Focuses first focusable day in the month. Will go to next visible month, if no day in the first month is focusable\n     * @hidden\n     */\n    public focusHomeDate() {\n        let monthView = this.monthView;\n        while (!this.focusFirstDay(monthView) && monthView.nextMonthView) {\n            monthView = monthView.nextMonthView;\n        }\n    }\n\n    /**\n     * Focuses last focusable day in the month. Will go to previous visible month, if no day in the first month is focusable\n     * @hidden\n     */\n    public focusEndDate() {\n        let monthView = this.monthView;\n        while (!this.focusLastDay(monthView) && monthView.prevMonthView) {\n            monthView = monthView.prevMonthView;\n        }\n    }\n\n    private timedelta(date: Date, units: number): Date {\n        const ret = new Date(date);\n        ret.setDate(ret.getDate() + units);\n        return ret;\n    }\n\n    private focusFirstDay(monthView: IgxDaysViewComponent): boolean {\n        const dates = monthView.dates.filter(d => d.isCurrentMonth);\n        for (let i = 0; i < dates.length; i++) {\n            if (dates[i].isFocusable) {\n                dates[i].nativeElement.focus();\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private focusLastDay(monthView: IgxDaysViewComponent): boolean {\n        const dates = monthView.dates.filter(d => d.isCurrentMonth);\n        for (let i = dates.length - 1; i >= 0; i--) {\n            if (dates[i].isFocusable) {\n                dates[i].nativeElement.focus();\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","import { Component, Input, Output, EventEmitter, HostBinding, ElementRef, HostListener } from '@angular/core';\nimport { ICalendarDate, isDateInRanges } from '../calendar';\nimport { DateRangeDescriptor } from '../../core/dates';\nimport { CalendarSelection } from '../calendar-base';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-day-item',\n    templateUrl: 'day-item.component.html'\n})\nexport class IgxDayItemComponent {\n    @Input()\n    public date: ICalendarDate;\n\n    @Input()\n    public selection: string;\n\n    /**\n     * Returns boolean indicating if the day is selected\n     *\n     */\n    @Input()\n    public get selected(): any {\n        return this._selected;\n    }\n\n    /**\n     * Selects the day\n     */\n    public set selected(value: any) {\n        this._selected = value;\n    }\n\n    @Input()\n    public disabledDates: DateRangeDescriptor[];\n\n    @Input()\n    public outOfRangeDates: DateRangeDescriptor[];\n\n    @Input()\n    public specialDates: DateRangeDescriptor[];\n\n    @Input()\n    public hideOutsideDays = false;\n\n    @Input()\n    @HostBinding('class.igx-calendar__date--last')\n    public isLastInRange = false;\n\n    @Input()\n    @HostBinding('class.igx-calendar__date--first')\n    public isFirstInRange = false;\n\n    @Input()\n    public isWithinRange = false;\n\n    @Output()\n    public onDateSelection = new EventEmitter<ICalendarDate>();\n\n    public get isCurrentMonth(): boolean {\n        return this.date.isCurrentMonth;\n    }\n\n    public get isPreviousMonth(): boolean {\n        return this.date.isPrevMonth;\n    }\n\n    public get isNextMonth(): boolean {\n        return this.date.isNextMonth;\n    }\n\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    @HostBinding('class.igx-calendar__date--selected')\n    public get isSelectedCSS(): boolean {\n        return (!this.isDisabled && this.selected);\n    }\n\n    @HostBinding('class.igx-calendar__date--inactive')\n    public get isInactive(): boolean {\n        return this.date.isNextMonth || this.date.isPrevMonth;\n    }\n\n    @HostBinding('class.igx-calendar__date--hidden')\n    public get isHidden(): boolean {\n        return this.hideOutsideDays && this.isInactive;\n    }\n\n    @HostBinding('class.igx-calendar__date--current')\n    public get isToday(): boolean {\n        const today = new Date(Date.now());\n        const date = this.date.date;\n\n        if (date.getDate() === today.getDate()) {\n            this.nativeElement.setAttribute('aria-current', 'date');\n        }\n\n        return (date.getFullYear() === today.getFullYear() &&\n            date.getMonth() === today.getMonth() &&\n            date.getDate() === today.getDate()\n        );\n    }\n\n    @HostBinding('class.igx-calendar__date--weekend')\n    public get isWeekend(): boolean {\n        const day = this.date.date.getDay();\n        return day === 0 || day === 6;\n    }\n\n    public get isDisabled(): boolean {\n        if (this.disabledDates === null) {\n            return false;\n        }\n\n        return isDateInRanges(this.date.date, this.disabledDates);\n    }\n\n    public get isOutOfRange(): boolean {\n        if (!this.outOfRangeDates) {\n            return false;\n        }\n\n        return isDateInRanges(this.date.date, this.outOfRangeDates);\n    }\n\n    public get isFocusable(): boolean {\n        return this.isCurrentMonth && !this.isHidden && !this.isDisabled && !this.isOutOfRange;\n    }\n\n    @HostBinding('class.igx-calendar__date--range')\n    public get isWithinRangeCSS(): boolean {\n        return !this.isSingleSelection && this.isWithinRange;\n    }\n\n    @HostBinding('class.igx-calendar__date--special')\n    public get isSpecial(): boolean {\n        if (this.specialDates === null) {\n            return false;\n        }\n\n        return isDateInRanges(this.date.date, this.specialDates);\n    }\n\n    @HostBinding('class.igx-calendar__date')\n    public get defaultCSS(): boolean {\n        return this.date.isCurrentMonth && !(this.isWeekend && this.selected);\n    }\n\n    @HostBinding('class.igx-calendar__date--disabled')\n    public get isDisabledCSS(): boolean {\n        return this.isHidden || this.isDisabled || this.isOutOfRange;\n    }\n\n    @HostBinding('class.igx-calendar__date--single')\n    public get isSingleSelection(): boolean {\n        return this.selection !== CalendarSelection.RANGE;\n    }\n\n    private _selected = false;\n\n    constructor(private elementRef: ElementRef) { }\n\n    @HostListener('click', ['$event'])\n    @HostListener('keydown.enter', ['$event'])\n    public onSelect(event) {\n        event.stopPropagation();\n        this.onDateSelection.emit(this.date);\n    }\n}\n","import {\n    Component,\n    Output,\n    EventEmitter,\n    Input,\n    HostListener,\n    ViewChildren,\n    QueryList,\n    HostBinding,\n    DoCheck,\n    OnInit\n} from '@angular/core';\nimport { ICalendarDate, isDateInRanges } from '../../calendar/calendar';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxDayItemComponent } from './day-item.component';\nimport { DateRangeDescriptor, DateRangeType } from '../../core/dates';\nimport { IgxCalendarBaseDirective, CalendarSelection } from '../calendar-base';\nimport { isEqual } from '../../core/utils';\nimport { IViewChangingEventArgs } from './days-view.interface';\nimport { IgxDaysViewNavigationService } from '../days-view/daysview-navigation.service';\n\nlet NEXT_ID = 0;\n\n@Component({\n    providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxDaysViewComponent\n        },\n        { provide: IgxDaysViewNavigationService, useClass: IgxDaysViewNavigationService }\n    ],\n    selector: 'igx-days-view',\n    templateUrl: 'days-view.component.html'\n})\nexport class IgxDaysViewComponent extends IgxCalendarBaseDirective implements DoCheck, OnInit {\n    /**\n     * Sets/gets the `id` of the days view.\n     * If not set, the `id` will have value `\"igx-days-view-0\"`.\n     * ```html\n     * <igx-days-view id=\"my-days-view\"></igx-days-view>\n     * ```\n     * ```typescript\n     * let daysViewId =  this.daysView.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-days-view-${NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public changeDaysView = false;\n\n    /**\n     * Show/hide week numbers\n     *\n     * @example\n     * ```html\n     * <igx-days-view [showWeekNumbers]=\"true\"></igx-days-view>\n     * ``\n     */\n    @Input()\n    public showWeekNumbers: boolean;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public set activeDate(value: string) {\n        this._activeDate = value;\n        this.activeDateChange.emit(this._activeDate);\n    }\n\n    public get activeDate() {\n        return this._activeDate ? this._activeDate : this.viewDate.toLocaleDateString();\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public onDateSelection = new EventEmitter<ICalendarDate>();\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public onViewChanging = new EventEmitter<IViewChangingEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public activeDateChange = new EventEmitter<string>();\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public monthsViewBlur = new EventEmitter<any>();\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxDayItemComponent, { read: IgxDayItemComponent })\n    public dates: QueryList<IgxDayItemComponent>;\n\n    /**\n     * @hidden\n     */\n    public outOfRangeDates: DateRangeDescriptor[];\n\n    /**\n     * @hidden\n     */\n    public nextMonthView: IgxDaysViewComponent;\n\n    /** @hidden */\n    public prevMonthView: IgxDaysViewComponent;\n    /** @hidden */\n    public shouldResetDate = true;\n    private _activeDate;\n\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('focusout')\n    public resetActiveMonth() {\n        if (this.shouldResetDate) {\n            const date = this.dates.find(day => day.selected && day.isCurrentMonth)\n            || this.dates.find(day => day.isToday && day.isCurrentMonth) || this.dates.find(d => d.isFocusable);\n            if (date) { this.activeDate = date.date.date.toLocaleDateString(); }\n            this.monthsViewBlur.emit();\n        }\n        this.shouldResetDate = true;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.pagedown')\n    @HostListener('keydown.pageup')\n    @HostListener('keydown.shift.pagedown')\n    @HostListener('keydown.shift.pageup')\n    @HostListener('pointerdown')\n    public pointerDown() {\n        this.shouldResetDate = false;\n    }\n\n    /**\n     * @hidden\n     */\n    constructor(public daysNavService: IgxDaysViewNavigationService) {\n        super();\n    }\n\n    /**\n     * @hidden\n     */\n    public get getCalendarMonth(): ICalendarDate[][] {\n        return this.calendarModel.monthdatescalendar(this.viewDate.getFullYear(), this.viewDate.getMonth(), true);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.daysNavService.monthView = this;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck() {\n        if (!this.changeDaysView && this.dates) {\n            this.disableOutOfRangeDates();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public tabIndex(day: ICalendarDate): number {\n        return this.activeDate && this.activeDate === day.date.toLocaleDateString() && day.isCurrentMonth ? 0 : -1;\n    }\n\n    /**\n     * Returns the week number by date\n     *\n     * @hidden\n     */\n    public getWeekNumber(date): number {\n        return this.calendarModel.getWeekNumber(date);\n    }\n\n    /**\n     * Returns the locale representation of the date in the days view.\n     *\n     * @hidden\n     */\n    public formattedDate(value: Date): string {\n        if (this.formatViews.day) {\n            return this.formatterDay.format(value);\n        }\n        return `${value.getDate()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public generateWeekHeader(): string[] {\n        const dayNames = [];\n        const rv = this.calendarModel.monthdatescalendar(this.viewDate.getFullYear(), this.viewDate.getMonth())[0];\n        for (const day of rv) {\n            dayNames.push(this.formatterWeekday.format(day.date));\n        }\n\n        return dayNames;\n    }\n\n    /**\n     * @hidden\n     */\n    public rowTracker(index, item): string {\n        return `${item[index].date.getMonth()}${item[index].date.getDate()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public dateTracker(index, item): string {\n        return `${item.date.getMonth()}--${item.date.getDate()}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public isCurrentMonth(value: Date): boolean {\n        return this.viewDate.getMonth() === value.getMonth();\n    }\n\n    /**\n     * @hidden\n     */\n    public isCurrentYear(value: Date): boolean {\n        return this.viewDate.getFullYear() === value.getFullYear();\n    }\n\n    /**\n     * @hidden\n     */\n    public isSelected(date: ICalendarDate): boolean {\n        let selectedDates: Date | Date[];\n        if (this.isDateDisabled(date.date) || !this.value ||\n            (Array.isArray(this.value) && this.value.length === 0)\n            )  {\n            return false;\n        }\n\n        if (this.selection === CalendarSelection.SINGLE) {\n            selectedDates = (this.value as Date);\n            return this.getDateOnly(selectedDates).getTime() === date.date.getTime();\n        }\n\n        selectedDates = (this.value as Date[]);\n        if (this.selection === CalendarSelection.RANGE && selectedDates.length === 1) {\n            return this.getDateOnly(selectedDates[0]).getTime() === date.date.getTime();\n        }\n\n        if (this.selection === CalendarSelection.MULTI) {\n            const start = this.getDateOnly(selectedDates[0]);\n            const end = this.getDateOnly(selectedDates[selectedDates.length - 1]);\n\n            if (this.isWithinRange(date.date, false, start, end)) {\n                const currentDate = selectedDates.find(element => element.getTime() === date.date.getTime());\n                return !!currentDate;\n            } else {\n                return false;\n            }\n\n        } else {\n            return this.isWithinRange(date.date, true);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public isLastInRange(date: ICalendarDate): boolean {\n        if (this.isSingleSelection || !this.value) {\n            return false;\n        }\n\n        const dates = this.value as Date[];\n        const lastDate = dates[dates.length - 1];\n        return isEqual(lastDate, date.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public isFirstInRange(date: ICalendarDate): boolean {\n        if (this.isSingleSelection || !this.value) {\n            return false;\n        }\n\n        return isEqual((this.value as Date[])[0], date.date);\n    }\n\n    /**\n     * @hidden\n     */\n    public isWithinRange(date: Date, checkForRange: boolean, min?: Date, max?: Date): boolean {\n        if (checkForRange && !(Array.isArray(this.value) && this.value.length > 1)) {\n            return false;\n        }\n\n        min = min ? min : this.value[0];\n        max = max ? max : this.value[(this.value as Date[]).length - 1];\n\n        return isDateInRanges(date,\n            [\n                {\n                    type: DateRangeType.Between,\n                    dateRange: [min, max]\n                }\n            ]\n        );\n    }\n\n    /**\n     * @hidden\n     */\n    public focusActiveDate() {\n        let date = this.dates.find((d) => d.selected);\n\n        if (!date) {\n            date = this.dates.find((d) => d.isToday);\n        }\n\n        if (date.isFocusable) {\n            date.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectDay(event) {\n        this.selectDateFromClient(event.date);\n        this.onDateSelection.emit(event);\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     */\n    private disableOutOfRangeDates() {\n        const dateRange = [];\n        this.dates.toArray().forEach((date) => {\n            if (!date.isCurrentMonth) {\n                dateRange.push(date.date.date);\n            }\n        });\n\n        this.outOfRangeDates = [{\n            type: DateRangeType.Specific,\n            dateRange: dateRange\n        }];\n    }\n\n    /**\n     * @hidden\n     */\n    public getFirstMonthView(): IgxDaysViewComponent {\n        let monthView = this as IgxDaysViewComponent;\n        while (monthView.prevMonthView) {\n            monthView = monthView.prevMonthView;\n        }\n        return monthView;\n    }\n\n    /**\n     * @hidden\n     */\n    private getLastMonthView(): IgxDaysViewComponent {\n        let monthView = this as IgxDaysViewComponent;\n        while (monthView.nextMonthView) {\n            monthView = monthView.nextMonthView;\n        }\n        return monthView;\n    }\n\n    /**\n     * @hidden\n     */\n    private get isSingleSelection(): boolean {\n        return this.selection !== CalendarSelection.RANGE;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowleft', ['$event'])\n    @HostListener('keydown.arrowright', ['$event'])\n    @HostListener('keydown.arrowup', ['$event'])\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrow(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.shouldResetDate = false;\n        this.daysNavService.focusNextDate(event.target as HTMLElement, event.key);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.shouldResetDate = false;\n        this.getFirstMonthView().daysNavService.focusHomeDate();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.shouldResetDate = false;\n        this.getLastMonthView().daysNavService.focusEndDate();\n    }\n}\n","import { transition, trigger, useAnimation } from '@angular/animations';\nimport {\n    Component,\n    ContentChild,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    ViewChild,\n    ElementRef,\n    AfterViewInit,\n    ViewChildren,\n    QueryList,\n    OnDestroy\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { fadeIn, scaleInCenter, slideInLeft, slideInRight } from '../animations/main';\nimport {\n    IgxCalendarHeaderTemplateDirective,\n    IgxCalendarSubheaderTemplateDirective\n} from './calendar.directives';\nimport { KEYS } from '../core/utils';\nimport { ICalendarDate, monthRange } from './calendar';\nimport { CalendarView, IgxMonthPickerBaseDirective } from './month-picker-base';\nimport { IgxMonthsViewComponent } from './months-view/months-view.component';\nimport { IgxYearsViewComponent } from './years-view/years-view.component';\nimport { IgxDaysViewComponent } from './days-view/days-view.component';\nimport { interval, Subscription } from 'rxjs';\nimport { takeUntil, debounce, skipLast, switchMap } from 'rxjs/operators';\nimport { ScrollMonth } from './calendar-base';\nimport { IViewChangingEventArgs } from './days-view/days-view.interface';\n\nlet NEXT_ID = 0;\n\n/**\n * Calendar provides a way to display date information.\n *\n * @igxModule IgxCalendarModule\n *\n * @igxTheme igx-calendar-theme, igx-icon-theme\n *\n * @igxKeywords calendar, datepicker, schedule, date\n *\n * @igxGroup Scheduling\n *\n * @remarks\n * The Ignite UI Calendar provides an easy way to display a calendar and allow users to select dates using single, multiple\n * or range selection.\n *\n * @example:\n * ```html\n * <igx-calendar selection=\"range\"></igx-calendar>\n * ```\n */\n@Component({\n    providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxCalendarComponent\n        }\n    ],\n    animations: [\n        trigger('animateView', [\n            transition('void => 0', useAnimation(fadeIn)),\n            transition('void => *', useAnimation(scaleInCenter, {\n                params: {\n                    duration: '.2s',\n                    fromScale: .9\n                }\n            }))\n        ]),\n        trigger('animateChange', [\n            transition('* => prev', useAnimation(slideInLeft, {\n                params: {\n                    fromPosition: 'translateX(-30%)'\n                }\n            })),\n            transition('* => next', useAnimation(slideInRight, {\n                params: {\n                    fromPosition: 'translateX(30%)'\n                }\n            }))\n        ])\n    ],\n    selector: 'igx-calendar',\n    templateUrl: 'calendar.component.html'\n})\nexport class IgxCalendarComponent extends IgxMonthPickerBaseDirective implements AfterViewInit, OnDestroy {\n    /**\n     * Sets/gets the `id` of the calendar.\n     *\n     * @remarks\n     * If not set, the `id` will have value `\"igx-calendar-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar id=\"my-first-calendar\"></igx-calendar>\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-calendar-${NEXT_ID++}`;\n\n    /**\n     * Sets/gets whether the calendar has header.\n     * Default value is `true`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar [hasHeader]=\"false\"></igx-calendar>\n     * ```\n     */\n    @Input()\n    public hasHeader = true;\n\n    /**\n     * Sets/gets whether the calendar header will be in vertical position.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar [vertical] = \"true\"></igx-calendar>\n     * ```\n     */\n    @Input()\n    public vertical = false;\n\n    /**\n     * Sets/gets the number of month views displayed.\n     * Default value is `1`.\n     *\n     * @example\n     * ```html\n     * <igx-calendar [monthsViewNumber]=\"2\"></igx-calendar>\n     * ```\n     */\n    @Input()\n    get monthsViewNumber() {\n        return this._monthsViewNumber;\n    }\n\n    set monthsViewNumber(val: number) {\n        if (val < 1 ) {\n            return;\n        }\n\n        this._monthsViewNumber = val;\n    }\n\n    /**\n     * Show/hide week numbers\n     *\n     * @example\n     * ```html\n     * <igx-calendar [showWeekNumbers]=\"true\"></igx-calendar>\n     * ``\n     */\n    @Input()\n    public showWeekNumbers = false;\n\n    /**\n     * Apply the different states for the transitions of animateChange\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public animationAction: any = '';\n\n    /**\n     * Used to apply the active date when the calendar view is changed\n     *\n     * @hidden\n     * @internal\n     */\n    public nextDate: Date;\n\n    /**\n     * Denote if the calendar view was changed with the keyboard\n     *\n     * @hidden\n     * @internal\n     */\n    public isKeydownTrigger = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public callback: (next) => void;\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-calendar--vertical')\n    get styleVerticalClass(): boolean {\n        return this.vertical;\n    }\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * ViewChild that represents the months view.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('months', { read: IgxMonthsViewComponent })\n    public monthsView: IgxMonthsViewComponent;\n\n    /**\n     * Month button, that displays the months view.\n     * @hidden\n     * @internal\n     */\n    @ViewChildren('monthsBtn')\n    public monthsBtns: QueryList<ElementRef>;\n\n    /**\n     * ViewChild that represents the decade view.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('decade', { read: IgxYearsViewComponent })\n    public dacadeView: IgxYearsViewComponent;\n\n    /**\n     * ViewChild that represents the days view.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('days', { read: IgxDaysViewComponent })\n    public daysView: IgxDaysViewComponent;\n\n    /**\n     * ViewChildrenden representing all of the rendered days views.\n     * @hidden\n     * @internal\n     */\n    @ViewChildren('days', { read: IgxDaysViewComponent })\n    public monthViews: QueryList<IgxDaysViewComponent>;\n\n    /**\n     * Button for previous month.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('prevMonthBtn')\n    public prevMonthBtn: ElementRef;\n\n    /**\n     * Button for next month.\n     *\n     * @hidden\n     * @internal\n     */\n    @ViewChild('nextMonthBtn')\n    public nextMonthBtn: ElementRef;\n\n    /**\n     * Denote if the year view is active.\n     * @hidden\n     * @internal\n     */\n    get isYearView(): boolean {\n        return this.activeView === CalendarView.YEAR;\n    }\n\n    /**\n     * Gets the header template.\n     *\n     * @example\n     * ```typescript\n     * let headerTemplate =  this.calendar.headerTeamplate;\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    get headerTemplate(): any {\n        if (this.headerTemplateDirective) {\n            return this.headerTemplateDirective.template;\n        }\n        return null;\n    }\n\n    /**\n     * Sets the header template.\n     *\n     * @example\n     * ```html\n     * <igx-calendar headerTemplateDirective = \"igxCalendarHeader\"></igx-calendar>\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    set headerTemplate(directive: any) {\n        this.headerTemplateDirective = directive;\n    }\n\n    /**\n     * Gets the subheader template.\n     *\n     * @example\n     * ```typescript\n     * let subheaderTemplate = this.calendar.subheaderTemplate;\n     * ```\n     */\n    get subheaderTemplate(): any {\n        if (this.subheaderTemplateDirective) {\n            return this.subheaderTemplateDirective.template;\n        }\n        return null;\n    }\n\n    /**\n     * Sets the subheader template.\n     *\n     * @example\n     * ```html\n     * <igx-calendar subheaderTemplate = \"igxCalendarSubheader\"></igx-calendar>\n     * ```\n     * @memberof IgxCalendarComponent\n     */\n    set subheaderTemplate(directive: any) {\n        this.subheaderTemplateDirective = directive;\n    }\n\n    /**\n     * Gets the context for the template marked with the `igxCalendarHeader` directive.\n     *\n     * @example\n     * ```typescript\n     * let headerContext =  this.calendar.headerContext;\n     * ```\n     */\n    get headerContext() {\n        const date: Date = this.headerDate;\n        return this.generateContext(date);\n    }\n\n    /**\n     * Gets the context for the template marked with either `igxCalendarSubHeaderMonth`\n     * or `igxCalendarSubHeaderYear` directive.\n     *\n     * @example\n     * ```typescript\n     * let context =  this.calendar.context;\n     * ```\n     */\n    get context() {\n        const date: Date = this.viewDate;\n        return this.generateContext(date);\n    }\n\n    /**\n     * Date displayed in header\n     *\n     * @hidden\n     * @internal\n     */\n    get headerDate(): Date {\n        return this.selectedDates ? this.selectedDates : new Date();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public activeDate = new Date().toLocaleDateString();\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChild(forwardRef(() => IgxCalendarHeaderTemplateDirective), { read: IgxCalendarHeaderTemplateDirective, static: true  })\n    private headerTemplateDirective: IgxCalendarHeaderTemplateDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    // tslint:disable-next-line:max-line-length\n    @ContentChild(forwardRef(() => IgxCalendarSubheaderTemplateDirective), { read: IgxCalendarSubheaderTemplateDirective, static: true  })\n    private subheaderTemplateDirective: IgxCalendarSubheaderTemplateDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    private _monthsViewNumber = 1;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _monthViewsChanges$: Subscription;\n\n    public ngAfterViewInit() {\n        this.setSiblingMonths(this.monthViews);\n        this._monthViewsChanges$ = this.monthViews.changes.subscribe(c => {\n            this.setSiblingMonths(c);\n        });\n\n        this.startMonthScroll$.pipe(\n            takeUntil(this.stopMonthScroll$),\n            switchMap(() => this.scrollMonth$.pipe(\n                skipLast(1),\n                debounce(() => interval(300)),\n                takeUntil(this.stopMonthScroll$)\n            ))).subscribe(() => {\n                switch (this.monthScrollDirection) {\n                    case ScrollMonth.PREV:\n                        this.previousMonth();\n                        break;\n                    case ScrollMonth.NEXT:\n                        this.nextMonth();\n                        break;\n                    case ScrollMonth.NONE:\n                    default:\n                        break;\n                }\n        });\n    }\n\n    /**\n     * Returns the locale representation of the month in the month view if enabled,\n     * otherwise returns the default `Date.getMonth()` value.\n     *\n     * @hidden\n     * @internal\n     */\n    public formattedMonth(value: Date): string {\n        if (this.formatViews.month) {\n            return this.formatterMonth.format(value);\n        }\n        return `${value.getMonth()}`;\n    }\n\n    /**\n     * Change to previous month\n     *\n     * @hidden\n     * @internal\n     */\n    public previousMonth(isKeydownTrigger = false) {\n        if (isKeydownTrigger && this.animationAction === ScrollMonth.NEXT) { return; }\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.getPrevMonth(this.viewDate);\n        this.animationAction = ScrollMonth.PREV;\n        this.isKeydownTrigger = isKeydownTrigger;\n    }\n\n    public suppressBlur() {\n        this.monthViews?.forEach(d => d.shouldResetDate = false);\n        if (this.daysView) { this.daysView.shouldResetDate = false; }\n    }\n\n    /**\n     * Change to next month\n     *\n     * @hidden\n     * @internal\n     */\n    public nextMonth(isKeydownTrigger = false) {\n        if (isKeydownTrigger && this.animationAction === 'prev') { return; }\n        this.isKeydownTrigger = isKeydownTrigger;\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.getNextMonth(this.viewDate);\n        this.animationAction = ScrollMonth.NEXT;\n    }\n\n    /**\n     * Continious navigation through the previous months\n     * @hidden\n     * @internal\n     */\n    public startPrevMonthScroll = (isKeydownTrigger = false) => {\n        this.startMonthScroll$.next();\n        this.monthScrollDirection = ScrollMonth.PREV;\n        this.animationAction = ScrollMonth.PREV;\n        this.previousMonth(isKeydownTrigger);\n    }\n\n    /**\n     * Continious navigation through the next months\n     * @hidden\n     * @internal\n     */\n    public startNextMonthScroll = (isKeydownTrigger = false) => {\n        this.startMonthScroll$.next();\n        this.monthScrollDirection = ScrollMonth.NEXT;\n        this.animationAction = ScrollMonth.NEXT;\n        this.nextMonth(isKeydownTrigger);\n    }\n\n    /**\n     * Stop continuous navigation\n     * @hidden\n     * @internal\n     */\n    public stopMonthScroll = (event) => {\n        event.stopPropagation();\n\n        // generally the scrolling is built on the calendar component\n        // and all start/stop scrolling methods are called on the calendar\n        // if we change below lines to call stopMonthScroll$ on the calendar instead of on the views,\n        // strange bug is introduced --> after changing number of months, continuous scrolling on mouse click does not happen\n        this.daysView.stopMonthScroll$.next(true);\n        this.daysView.stopMonthScroll$.complete();\n\n\n        if (this.monthScrollDirection === ScrollMonth.PREV) {\n            this.prevMonthBtn.nativeElement.focus();\n        } else if (this.monthScrollDirection === ScrollMonth.NEXT) {\n            this.nextMonthBtn.nativeElement.focus();\n        }\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            this.resetActiveDate();\n        }\n\n        this.monthScrollDirection = ScrollMonth.NONE;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewDecade(args: Date, activeViewIdx: number) {\n        super.activeViewDecade(activeViewIdx);\n        requestAnimationFrame(() => {\n            if (this.dacadeView) {\n                this.dacadeView.date = args;\n                this.dacadeView.calendarDir.find(date => date.isCurrentYear).nativeElement.focus();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewDecadeKB(event, args: Date, activeViewIdx: number) {\n        super.activeViewDecadeKB(event, activeViewIdx);\n\n        requestAnimationFrame(() => {\n            if (this.dacadeView) {\n                this.dacadeView.date = args;\n                this.dacadeView.calendarDir.find(date => date.isCurrentYear).nativeElement.focus();\n            }\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getFormattedDate(): { weekday: string, monthday: string } {\n\n        const date = this.headerDate;\n\n        return {\n            monthday: this.formatterMonthday.format(date),\n            weekday: this.formatterWeekday.format(date),\n        };\n    }\n\n    /**\n     * Handles invoked on date selection\n     * @hidden\n     * @internal\n     */\n    public childClicked(instance: ICalendarDate) {\n        if (instance.isPrevMonth) {\n            this.previousMonth();\n        }\n\n        if (instance.isNextMonth) {\n            this.nextMonth();\n        }\n\n        this.selectDateFromClient(instance.date);\n        if (this.selection === 'multi') {\n            this.deselectDateInMonthViews(instance.date);\n        }\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public viewChanging(args: IViewChangingEventArgs) {\n        this.animationAction = args.monthAction;\n        this.isKeydownTrigger = true;\n        this.nextDate = args.nextDate;\n        this.callback = (next) => {\n            const day = this.daysView.dates.find((item) => item.date.date.getTime() === next.getTime());\n            if (day) {\n                this.daysView.daysNavService.focusNextDate(day.nativeElement, args.key, true);\n            }\n        };\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.nextDate;\n    }\n\n    /**\n     * @hidden\n     * @intenal\n     */\n    public changeMonth(event: Date) {\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.getFirstViewDate(event, 'month', this.activeViewIdx);\n        this.activeView = CalendarView.DEFAULT;\n\n        requestAnimationFrame(() => {\n            const elem = this.monthsBtns.find((e: ElementRef, idx: number) => idx === this.activeViewIdx);\n            if (elem) { elem.nativeElement.focus(); }\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewYear(args: Date, activeViewIdx: number, event?): void {\n        this.activeView = CalendarView.YEAR;\n        this.activeViewIdx = activeViewIdx;\n        requestAnimationFrame(() => {\n            this.monthsView.date = args;\n            this.focusMonth();\n        });\n    }\n\n    private focusMonth() {\n        const month = this.monthsView.monthsRef.find((e) =>\n            e.index === this.monthsView.date.getMonth());\n        if (month) { month.nativeElement.focus(); }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onActiveViewYearKB(args: Date, event, activeViewIdx: number): void {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.preventDefault();\n            this.onActiveViewYear(args, activeViewIdx, event);\n        }\n    }\n\n    /**\n     * Deselects date(s) (based on the selection type).\n     *\n     * @example\n     * ```typescript\n     *  this.calendar.deselectDate(new Date(`2018-06-12`));\n     * ````\n     */\n    public deselectDate(value?: Date | Date[]) {\n        super.deselectDate(value);\n\n        this.monthViews.forEach((view) => {\n            view.selectedDates = this.selectedDates;\n            view.rangeStarted = false;\n        });\n        this._onChangeCallback(this.selectedDates);\n    }\n\n    /**\n     * Helper method that does deselection for all month views when selection is \"multi\"\n     * If not called, selection in other month views stays\n     * @hidden\n     * @internal\n     */\n    private deselectDateInMonthViews(value: Date) {\n        this.monthViews.forEach(m => {\n            m.deselectMultipleInMonth(value);\n         });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getViewDate(i: number): Date {\n        const date = this.calendarModel.timedelta(this.viewDate, 'month', i);\n        return date;\n    }\n\n    /**\n     * Getter for the context object inside the calendar templates.\n     * @hidden\n     * @internal\n     */\n    public getContext(i: number) {\n        const date = this.getViewDate(i);\n        return this.generateContext(date, i);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public animationDone(event) {\n        if ((event.fromState === ScrollMonth.NONE && (event.toState === ScrollMonth.PREV || event.toState === ScrollMonth.NEXT)) ||\n             (event.fromState === 'void' && event.toState === ScrollMonth.NONE)) {\n            this.viewDateChanged.emit({ previousValue: this.previousViewDate, currentValue: this.viewDate });\n        }\n        if (!this.isKeydownTrigger) {\n            this.resetActiveDate();\n        }\n\n        if (this.monthScrollDirection !== ScrollMonth.NONE) {\n            this.scrollMonth$.next();\n        }\n\n        if (this.activeView !== CalendarView.DEFAULT) {\n            return;\n        }\n\n        let monthView = this.daysView as IgxDaysViewComponent;\n        let date = monthView.dates.find((d) => d.selected);\n\n        while (!date && monthView.nextMonthView) {\n            monthView = monthView.nextMonthView;\n            date = monthView.dates.find((d) => d.selected);\n        }\n        if (date && date.isFocusable && !this.isKeydownTrigger) {\n            setTimeout(() => {\n                date.nativeElement.focus();\n            }, parseInt(slideInRight.options.params.duration, 10));\n        } else if (this.callback && (event.toState === ScrollMonth.NEXT || event.toState === ScrollMonth.PREV)) {\n            this.callback(this.nextDate);\n        }\n        this.animationAction = ScrollMonth.NONE;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public viewRendered(event) {\n        if (event.fromState !== 'void') {\n            this.activeViewChanged.emit(this.activeView);\n            if (this.activeView === 0) { this.resetActiveDate(); }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetActiveDate() {\n        if (!this.monthViews) { return; }\n        let dates = [];\n        this.monthViews.map(mv => mv.dates).forEach(days => { dates = dates.concat(days.toArray()); });\n        const date = dates.find(day => day.selected && day.isCurrentMonth) || dates.find(day => day.isToday && day.isCurrentMonth)\n            || dates.find(d => d.isFocusable);\n        if (date) {\n            this.activeDate = date.date.date.toLocaleDateString();\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.pagedown', ['$event'])\n    @HostListener('keydown.pageup', ['$event'])\n    public onKeydownPageDown(event: KeyboardEvent) {\n        event.preventDefault();\n        if (this.activeView !== CalendarView.DEFAULT) {\n            return;\n        }\n\n        const isPageDown = event.key === 'PageDown';\n        const step = isPageDown ? 1 : -1;\n        let monthView = this.daysView as IgxDaysViewComponent;\n        let activeDate;\n\n        while (!activeDate && monthView) {\n            activeDate = monthView.dates.find((date) => date.nativeElement === document.activeElement);\n            monthView = monthView.nextMonthView;\n        }\n\n        if (activeDate) {\n            this.nextDate = new Date(activeDate.date.date);\n\n            let year = this.nextDate.getFullYear();\n\n            let month = this.nextDate.getMonth() + step;\n            if (isPageDown) {\n                if (month > 11) { month = 0; year += step; }\n            } else {\n                if (month < 0) { month = 11; year += step; }\n            }\n\n            const range = monthRange(this.nextDate.getFullYear(), month);\n\n            let day = this.nextDate.getDate();\n            if (day > range[1]) { day = range[1]; }\n\n            this.nextDate.setDate(day);\n            this.nextDate.setMonth(month);\n            this.nextDate.setFullYear(year);\n\n            this.callback = (next) => {\n                monthView = this.daysView as IgxDaysViewComponent;\n                let dayItem;\n                while ((!dayItem && monthView) || (dayItem && !dayItem.isCurrentMonth)) {\n                    dayItem = monthView.dates.find((d) => d.date.date.getTime() === next.getTime());\n                    monthView = monthView.nextMonthView;\n                }\n                if (dayItem && dayItem.isFocusable) { dayItem.nativeElement.focus(); }\n            };\n        }\n\n        if (isPageDown) {\n            event.repeat ? requestAnimationFrame(() => this.nextMonth(true)) : this.nextMonth(true);\n        } else {\n            event.repeat ? requestAnimationFrame(() => this.previousMonth(true)) : this.previousMonth(true);\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.shift.pageup', ['$event'])\n    @HostListener('keydown.shift.pagedown', ['$event'])\n    public onKeydownShiftPageUp(event: KeyboardEvent) {\n        event.preventDefault();\n\n        if (this.activeView !== CalendarView.DEFAULT) {\n            return;\n        }\n\n        const isPageDown = event.key === 'PageDown';\n        const step = isPageDown ? 1 : -1;\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.timedelta(this.viewDate, 'year', step);\n\n        this.animationAction = isPageDown ? ScrollMonth.NEXT : ScrollMonth.PREV;\n        this.isKeydownTrigger = true;\n\n        let monthView = this.daysView as IgxDaysViewComponent;\n        let activeDate;\n\n        while (!activeDate && monthView) {\n            activeDate = monthView.dates.find((date) => date.nativeElement === document.activeElement);\n            monthView = monthView.nextMonthView;\n        }\n\n        if (activeDate) {\n            this.nextDate = new Date(activeDate.date.date);\n\n            const year = this.nextDate.getFullYear() + step;\n\n            const range = monthRange(year, this.nextDate.getMonth());\n\n            let day = this.nextDate.getDate();\n            if (day > range[1]) { day = range[1]; }\n\n            this.nextDate.setDate(day);\n            this.nextDate.setFullYear(year);\n\n            this.callback = (next) => {\n                monthView = this.daysView as IgxDaysViewComponent;\n                let dayItem;\n                while ((!dayItem && monthView) || (dayItem && !dayItem.isCurrentMonth)) {\n                    dayItem = monthView.dates.find((d) => d.date.date.getTime() === next.getTime());\n                    monthView = monthView.nextMonthView;\n                }\n                if (dayItem && dayItem.isFocusable) { dayItem.nativeElement.focus(); }\n            };\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        if (this.daysView) {\n            this.daysView.onKeydownHome(event);\n        }\n    }\n\n    /**\n     * Keyboard navigation of the calendar\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        if (this.daysView) {\n            this.daysView.onKeydownEnd(event);\n        }\n    }\n\n    /**\n     * Stop continuous navigation on mouseup event\n     * @hidden\n     * @internal\n     */\n    @HostListener('document:mouseup', ['$event'])\n    public onMouseUp(event: KeyboardEvent) {\n        if (this.monthScrollDirection !== ScrollMonth.NONE) {\n            this.stopMonthScroll(event);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        if (this._monthViewsChanges$) {\n            this._monthViewsChanges$.unsubscribe();\n        }\n    }\n\n    /**\n     * Helper method building and returning the context object inside\n     * the calendar templates.\n     * @hidden\n     * @internal\n     */\n    private generateContext(value: Date, i?: number) {\n        const formatObject = {\n            index: i,\n            monthView: () => this.onActiveViewYear(value, i),\n            yearView: () => this.onActiveViewDecade(value, i),\n            ...this.calendarModel.formatToParts(value, this.locale, this.formatOptions,\n                ['era', 'year', 'month', 'day', 'weekday'])\n        };\n        return { $implicit: formatObject };\n    }\n\n    /**\n     * Helper method that sets references for prev/next months for each month in the view\n     * @hidden\n     * @internal\n     */\n    private setSiblingMonths(monthViews: QueryList<IgxDaysViewComponent>) {\n        monthViews.forEach((item, index) => {\n            const prevMonthView = this.getMonthView(index - 1);\n            const nextMonthView = this.getMonthView(index + 1);\n            item.nextMonthView = nextMonthView;\n            item.prevMonthView = prevMonthView;\n        });\n    }\n\n    /**\n     * Helper method returning previous/next day views\n     * @hidden\n     * @internal\n     */\n    private getMonthView(index: number): IgxDaysViewComponent {\n        if (index === -1 || index === this.monthViews.length ) {\n            return null;\n        } else {\n            return this.monthViews.toArray()[index];\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getPrevMonth(date): Date {\n        return this.calendarModel.getPrevMonth(date);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getNextMonth(date, viewIndex): Date {\n        return this.calendarModel.getDateByView(date, 'Month', viewIndex);\n    }\n}\n","import {\n    Component,\n    HostListener,\n    ViewChild,\n    HostBinding,\n    Input,\n    ElementRef\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { trigger, transition, useAnimation } from '@angular/animations';\nimport { fadeIn, scaleInCenter, slideInLeft, slideInRight } from '../../animations/main';\nimport { KEYS } from '../../core/utils';\nimport { IgxMonthsViewComponent } from '../months-view/months-view.component';\nimport { IgxMonthPickerBaseDirective, CalendarView } from '../month-picker-base';\nimport { IgxYearsViewComponent } from '../years-view/years-view.component';\nimport { IgxDaysViewComponent } from '../days-view/days-view.component';\nimport { ScrollMonth } from '../calendar-base';\n\nlet NEXT_ID = 0;\n@Component({\n    providers: [\n        {\n            multi: true,\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxMonthPickerComponent\n        }\n    ],\n    animations: [\n        trigger('animateView', [\n            transition('void => 0', useAnimation(fadeIn)),\n            transition('void => *', useAnimation(scaleInCenter, {\n                params: {\n                    duration: '.2s',\n                    fromScale: .9\n                }\n            }))\n        ]),\n        trigger('animateChange', [\n            transition('* => prev', useAnimation(slideInLeft, {\n                params: {\n                    fromPosition: 'translateX(-30%)'\n                }\n            })),\n            transition('* => next', useAnimation(slideInRight, {\n                params: {\n                    fromPosition: 'translateX(30%)'\n                }\n            }))\n        ])\n    ],\n    selector: 'igx-month-picker',\n    templateUrl: 'month-picker.component.html'\n})\nexport class IgxMonthPickerComponent extends IgxMonthPickerBaseDirective {\n    /**\n     * Sets/gets the `id` of the month picker.\n     * If not set, the `id` will have value `\"igx-month-picker-0\"`.\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-month-picker-${NEXT_ID++}`;\n\n    /**\n     * The default css class applied to the component.\n     *\n     * @hidden\n     */\n    @HostBinding('class.igx-calendar')\n    public styleClass = true;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('months', { read: IgxMonthsViewComponent })\n    public monthsView: IgxMonthsViewComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('decade', { read: IgxYearsViewComponent })\n    public dacadeView: IgxYearsViewComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('days', { read: IgxDaysViewComponent })\n    public daysView: IgxDaysViewComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('yearsBtn')\n    public yearsBtn: ElementRef;\n\n    /**\n     * @hidden\n     */\n    public yearAction = '';\n\n    /**\n     * @hidden\n     */\n    public animationDone(event) {\n        if ((event.fromState === 'void' && event.toState === '') ||\n        (event.fromState === '' && (event.toState === ScrollMonth.PREV || event.toState === ScrollMonth.NEXT))) {\n            this.viewDateChanged.emit({ previousValue: this.previousViewDate, currentValue: this.viewDate });\n        }\n        this.yearAction = '';\n    }\n\n    /**\n     * @hidden\n     */\n    public viewRendered(event) {\n        if (event.fromState !== 'void') {\n            this.activeViewChanged.emit(this.activeView);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecadeKB(event) {\n        super.activeViewDecadeKB(event);\n\n        if (event.key === KEYS.RIGHT_ARROW || event.key === KEYS.RIGHT_ARROW_IE) {\n            this.nextYear(event);\n        }\n\n        if (event.key === KEYS.LEFT_ARROW || event.key === KEYS.LEFT_ARROW_IE) {\n            this.previousYear(event);\n        }\n\n        requestAnimationFrame(() => {\n            if (this.dacadeView) { this.dacadeView.el.nativeElement.focus(); }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public activeViewDecade() {\n        super.activeViewDecade();\n\n        requestAnimationFrame(() => {\n            this.dacadeView.el.nativeElement.focus();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public changeYearKB(event, next = true) {\n        if (event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE || event.key === KEYS.ENTER) {\n            event.stopPropagation();\n            next ? this.nextYear() :  this.previousYear();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public selectYear(event: Date) {\n        this.previousViewDate = this.viewDate;\n        this.viewDate = new Date(event.getFullYear(), event.getMonth(), event.getDate());\n        this.activeView = CalendarView.DEFAULT;\n\n        requestAnimationFrame(() => {\n            if (this.yearsBtn) { this.yearsBtn.nativeElement.focus(); }\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public selectMonth(event: Date) {\n        this.selectDate(event);\n        this.onSelection.emit(this.selectedDates);\n    }\n\n    /**\n     * Selects a date.\n     * ```typescript\n     *  this.monthPicker.selectDate(new Date(`2018-06-12`));\n     * ```\n     */\n    public selectDate(value: Date) {\n        if (!value) {\n            return new Date();\n        }\n        super.selectDate(value);\n        this.viewDate = value;\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: Date) {\n        if (value) {\n            this.viewDate = this.selectedDates = value;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.pageup', ['$event'])\n    public previousYear(event?: KeyboardEvent) {\n        event?.preventDefault();\n        if (event && this.yearAction === 'next') { return; }\n        this.yearAction = 'prev';\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.getPrevYear(this.viewDate);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.pagedown', ['$event'])\n    public nextYear(event?: KeyboardEvent) {\n        event?.preventDefault();\n        if (event && this.yearAction === 'prev') { return; }\n        this.yearAction = 'next';\n        this.previousViewDate = this.viewDate;\n        this.viewDate = this.calendarModel.getNextYear(this.viewDate);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event: KeyboardEvent) {\n        if (this.monthsView) {\n            this.monthsView.el.nativeElement.focus();\n            this.monthsView.onKeydownHome(event);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event: KeyboardEvent) {\n        if (this.monthsView) {\n            this.monthsView.el.nativeElement.focus();\n            this.monthsView.onKeydownEnd(event);\n        }\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Calendar } from './calendar';\n\n@Pipe({\n    name: 'IgxMonthViewSlots'\n})\nexport class IgxMonthViewSlotsCalendar implements PipeTransform {\n    public transform(monthViews: number) {\n        return new Array(monthViews);\n    }\n}\n\n@Pipe({\n    name: 'IgxGetViewDate'\n})\nexport class IgxGetViewDateCalendar implements PipeTransform {\n    private calendar: Calendar;\n    constructor() {\n        this.calendar = new Calendar();\n    }\n    public transform(index: number, viewDate: Date, wholeDate = true) {\n        const date = this.calendar.timedelta(viewDate, 'month', index);\n        return wholeDate ? date : date.getMonth();\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxCalendarComponent } from './calendar.component';\nimport {\n    IgxCalendarHeaderTemplateDirective,\n    IgxCalendarMonthDirective,\n    IgxCalendarSubheaderTemplateDirective,\n    IgxCalendarYearDirective,\n    IgxCalendarScrollMonthDirective\n} from './calendar.directives';\nimport { IgxMonthsViewComponent } from './months-view/months-view.component';\nimport { IgxYearsViewComponent } from './years-view/years-view.component';\nimport { IgxDaysViewComponent } from './days-view/days-view.component';\nimport { IgxDayItemComponent } from './days-view/day-item.component';\nimport { IgxMonthPickerComponent } from './month-picker/month-picker.component';\nimport { IgxCalendarBaseDirective } from './calendar-base';\nimport { IgxMonthPickerBaseDirective } from './month-picker-base';\nimport { IgxMonthViewSlotsCalendar, IgxGetViewDateCalendar } from './months-view.pipe';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxCalendarBaseDirective,\n        IgxMonthPickerBaseDirective,\n        IgxDayItemComponent,\n        IgxDaysViewComponent,\n        IgxCalendarComponent,\n        IgxCalendarHeaderTemplateDirective,\n        IgxCalendarMonthDirective,\n        IgxCalendarYearDirective,\n        IgxCalendarSubheaderTemplateDirective,\n        IgxCalendarScrollMonthDirective,\n        IgxMonthsViewComponent,\n        IgxYearsViewComponent,\n        IgxMonthPickerComponent,\n        IgxMonthViewSlotsCalendar,\n        IgxGetViewDateCalendar\n    ],\n    exports: [\n        IgxCalendarComponent,\n        IgxDaysViewComponent,\n        IgxMonthsViewComponent,\n        IgxYearsViewComponent,\n        IgxMonthPickerComponent,\n        IgxCalendarHeaderTemplateDirective,\n        IgxCalendarMonthDirective,\n        IgxCalendarYearDirective,\n        IgxCalendarSubheaderTemplateDirective\n    ],\n    imports: [CommonModule, FormsModule, IgxIconModule]\n})\nexport class IgxCalendarModule { }\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    Directive,\n    HostBinding,\n    Optional,\n    Inject,\n    Input,\n    NgModule,\n    OnInit,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { mkenum } from '../core/utils';\n\nlet NEXT_ID = 0;\n\n/**\n * IgxCardMedia is container for the card media section.\n * Use it to wrap images and videos.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-media'\n})\nexport class IgxCardMediaDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card__media')\n    public cssClass = 'igx-card__media';\n\n    /**\n     * An @Input property that sets the `width` and `min-width` style property\n     * of the media container. If not provided it will be set to `auto`.\n     *\n     * @example\n     * ```html\n     * <igx-card-media width=\"300px\"></igx-card-media>\n     * ```\n     */\n    @HostBinding('style.width')\n    @HostBinding('style.min-width')\n    @Input()\n    public width = 'auto';\n\n    /**\n     * An @Input property that sets the `height` style property of the media container.\n     * If not provided it will be set to `auto`.\n     *\n     * @example\n     * ```html\n     * <igx-card-media height=\"50%\"></igx-card-media>\n     * ```\n     */\n    @HostBinding('style.height')\n    @Input()\n    public height = 'auto';\n\n    /**\n     * An @Input property that sets the `role` attribute of the media container.\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'img';\n}\n\n/**\n * IgxCardHeader is container for the card header\n */\n@Component({\n    selector: 'igx-card-header',\n    templateUrl: 'card-header.component.html'\n})\nexport class IgxCardHeaderComponent {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-header')\n    public cssClass = 'igx-card-header';\n\n    /**\n     * An @Input property that sets the layout style of the header.\n     * By default the header elements(thumbnail and title/subtitle) are aligned horizontally.\n     *\n     * @example\n     * ```html\n     * <igx-card-header [vertical]=\"true\"></igx-card-header>\n     * ```\n     */\n    @HostBinding('class.igx-card-header--vertical')\n    @Input()\n    public vertical = false;\n\n    /**\n     * An @Input property that sets the value of the `role` attribute of the card header.\n     * By default the value is set to `header`.\n     *\n     * @example\n     * ```html\n     * <igx-card-header role=\"header\"></igx-card-header>\n     * ```\n     */\n    @HostBinding('attr.role')\n    public role = 'header';\n}\n\n/**\n * IgxCardThumbnail is container for the card thumbnail section.\n * Use it to wrap anything you want to be used as a thumbnail.\n */\n@Directive({\n    selector: '[igxCardThumbnail]'\n})\nexport class IgxCardThumbnailDirective { }\n\n/**\n * igxCardHeaderTitle is used to denote the header title in a card.\n * Use it to tag text nodes.\n */\n@Directive({\n    selector: '[igxCardHeaderTitle]'\n})\nexport class IgxCardHeaderTitleDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-header__title')\n    public cssClass = 'igx-card__header__title';\n}\n\n/**\n * igxCardHeaderSubtitle is used to denote the header subtitle in a card.\n * Use it to tag text nodes.\n */\n@Directive({\n    selector: '[igxCardHeaderSubtitle]'\n})\nexport class IgxCardHeaderSubtitleDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-header__subtitle')\n    public cssClass = 'igx-card-header__subtitle';\n}\n/**\n * IgxCardContent is container for the card content.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-content'\n})\nexport class IgxCardContentDirective {\n    /** @hidden @internal */\n    @HostBinding('class.igx-card-content')\n    public cssClass = 'igx-card-content';\n}\n\n/**\n * IgxCardFooter is container for the card footer\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-footer'\n})\nexport class IgxCardFooterDirective {\n    /**\n     * An @Input property that sets the value of the `role` attribute of the card footer.\n     * By default the value is set to `footer`.\n     *\n     * @example\n     * ```html\n     * <igx-card-footer role=\"footer\"></igx-card-footer>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'footer';\n}\n\n/**\n * Card provides a way to display organized content in appealing way.\n *\n * @igxModule IgxCardModule\n *\n * @igxTheme igx-card-theme, igx-icon-theme, igx-button-theme\n *\n * @igxKeywords card, button, avatar, icon\n *\n * @igxGroup Layouts\n *\n * @remarks\n * The Ignite UI Card serves as a container that allows custom content to be organized in an appealing way. There are\n * five sections in a card that you can use to organize your content. These are header, media, content, actions, and footer.\n *\n * @example\n * ```html\n * <igx-card>\n *   <igx-card-header>\n *     <h3 igxCardHeaderTitle>{{title}}</h3>\n *     <h5 igxCardHeaderSubtitle>{{subtitle}}</h5>\n *   </igx-card-header>\n *   <igx-card-actions>\n *       <button igxButton igxRipple>Share</button>\n *       <button igxButton igxRipple>Play Album</button>\n *   </igx-card-actions>\n * </igx-card>\n * ```\n */\n\nexport const IgxCardType = mkenum({\n    ELEVATED: 'elevated',\n    OUTLINED: 'outlined'\n});\nexport type IgxCardType = (typeof IgxCardType)[keyof typeof IgxCardType];\n\n@Component({\n    selector: 'igx-card',\n    templateUrl: 'card.component.html'\n})\nexport class IgxCardComponent {\n    /**\n     * Sets/gets the `id` of the card.\n     * If not set, `id` will have value `\"igx-card-0\"`;\n     *\n     * @example\n     * ```html\n     * <igx-card id = \"my-first-card\"></igx-card>\n     * ```\n     * ```typescript\n     * let cardId =  this.card.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-card-${NEXT_ID++}`;\n\n    /**\n     * An @Input property that sets the value of the `role` attribute of the card.\n     * By default the value is set to `group`.\n     *\n     * @example\n     * ```html\n     * <igx-card role=\"group\"></igx-card>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'group';\n\n    /**\n     * An @Input property that sets the value of the `type` attribute of the card.\n     * By default the value is set to `default`. You can make the card use the\n     * outlined style by setting the value to `outlined`.\n     *\n     * @example\n     * ```html\n     * <igx-card type=\"outlined\"></igx-card>\n     * ```\n     */\n    @HostBinding('class.igx-card')\n    @Input()\n    public type: IgxCardType | string = IgxCardType.ELEVATED;\n\n    /**\n     * A getter which will return true if the card type is `outlined`.\n     */\n    @HostBinding('class.igx-card--outlined')\n    get isOutlinedCard() {\n        return this.type === IgxCardType.OUTLINED;\n    }\n\n    /**\n     * An @Input property that sets the value of the `horizontal` attribute of the card.\n     * Setting this to `true` will make the different card sections align horizontally,\n     * essentially flipping the card to the side.\n     *\n     * @example\n     * ```html\n     * <igx-card [horizontal]=\"true\"></igx-card>\n     * ```\n     */\n    @HostBinding('class.igx-card--horizontal')\n    @Input()\n    public horizontal = false;\n}\n\nexport const IgxCardActionsLayout = mkenum({\n    START: 'start',\n    JUSTIFY: 'justify'\n});\nexport type IgxCardActionsLayout = (typeof IgxCardActionsLayout)[keyof typeof IgxCardActionsLayout];\n\n/**\n * IgxCardActions is container for the card actions.\n */\n@Component({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-card-actions',\n    templateUrl: 'card-actions.component.html'\n})\nexport class IgxCardActionsComponent implements OnInit, OnChanges {\n    private isVerticalSet = false;\n\n    constructor(@Optional() @Inject(IgxCardComponent) public card: IgxCardComponent) { }\n\n    /**\n     * An @Input property that sets the layout style of the actions.\n     * By default icons and icon buttons, as well as regular buttons\n     * are split into two containers, which are then positioned on both ends\n     * of the card-actions area.\n     * You can justify the elements in those groups so they are positioned equally\n     * from one another taking up all the space available along the card actions axis.\n     *\n     * @example\n     * ```html\n     * <igx-card-actions layout=\"justify\"></igx-card-actions>\n     * ```\n     */\n    @HostBinding('class.igx-card-actions')\n    @Input()\n    public layout: IgxCardActionsLayout | string = IgxCardActionsLayout.START;\n\n    /**\n     * An @Input property that sets the vertical attribute of the actions.\n     * When set to `true` the actions will be layed out vertically.\n     */\n    @HostBinding('class.igx-card-actions--vertical')\n    @Input()\n    public vertical: boolean;\n\n    /**\n     * A getter that returns `true` when the layout has been\n     * set to `justify`.\n     */\n    @HostBinding('class.igx-card-actions--justify')\n    get isJustifyLayout() {\n        return this.layout === IgxCardActionsLayout.JUSTIFY;\n    }\n\n    /**\n     * An @Input property that sets order of the buttons the actions area.\n     * By default all icons/icon buttons are placed at the end of the action\n     * area. Any regular buttons(flat, raised) will appear before the icons/icon buttons\n     * placed in the actions area.\n     * If you want to reverse their positions so that icons appear first, use the `reverse`\n     * attribute.\n     *\n     * @example\n     * ```html\n     * <igx-card-actions [reverse]=\"true\"></igx-card-actions>\n     * ```\n     */\n    @HostBinding('class.igx-card-actions--reverse')\n    @Input()\n    public reverse = false;\n\n    ngOnChanges(changes: SimpleChanges) {\n        for (const prop in changes) {\n            if (prop === 'vertical') {\n                this.isVerticalSet = true;\n            }\n        }\n    }\n\n    ngOnInit() {\n        this.vertical = !this.isVerticalSet && this.card.horizontal;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxCardComponent,\n        IgxCardHeaderComponent,\n        IgxCardMediaDirective,\n        IgxCardContentDirective,\n        IgxCardActionsComponent,\n        IgxCardFooterDirective,\n        IgxCardHeaderTitleDirective,\n        IgxCardHeaderSubtitleDirective,\n        IgxCardThumbnailDirective,\n    ],\n    exports: [\n        IgxCardComponent,\n        IgxCardHeaderComponent,\n        IgxCardMediaDirective,\n        IgxCardContentDirective,\n        IgxCardActionsComponent,\n        IgxCardFooterDirective,\n        IgxCardHeaderTitleDirective,\n        IgxCardHeaderSubtitleDirective,\n        IgxCardThumbnailDirective,\n    ],\n    imports: [CommonModule, IgxButtonModule]\n})\nexport class IgxCardModule { }\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxCarouselIndicator]'\n})\nexport class IgxCarouselIndicatorDirective {\n}\n\n@Directive({\n    selector: '[igxCarouselNextButton]'\n})\nexport class IgxCarouselNextButtonDirective {\n}\n\n@Directive({\n    selector: '[igxCarouselPrevButton]'\n})\nexport class IgxCarouselPrevButtonDirective {\n}\n","import { Component, OnDestroy, Input, HostBinding, Output, EventEmitter, ElementRef, ChangeDetectorRef } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport enum Direction { NONE, NEXT, PREV }\n\n/**\n * A slide component that usually holds an image and/or a caption text.\n * IgxSlideComponent is usually a child component of an IgxCarouselComponent.\n *\n * ```\n * <igx-slide [input bindings] >\n *    <ng-content></ng-content>\n * </igx-slide>\n * ```\n *\n * @export\n */\n@Component({\n    selector: 'igx-slide',\n    templateUrl: 'slide.component.html'\n})\n\nexport class IgxSlideComponent implements OnDestroy {\n    private _active = false;\n    private _destroy$ = new Subject<boolean>();\n    /**\n     * Gets/sets the `index` of the slide inside the carousel.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide index = \"1\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     * @memberOf IgxSlideComponent\n     */\n    @Input() public index: number;\n\n    /**\n     * Gets/sets the target `direction` for the slide.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide direction=\"NEXT\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     * @memberOf IgxSlideComponent\n     */\n    @Input() public direction: Direction;\n\n    /**\n     * Returns the `tabIndex` of the slide component.\n     * ```typescript\n     * let tabIndex =  this.carousel.tabIndex;\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    @HostBinding('attr.tabindex')\n    get tabIndex() {\n        return this.active ? 0 : null;\n    }\n\n    /**\n     * Returns the `aria-selected` of the slide.\n     *\n     * ```typescript\n     * let slide = this.slide.ariaSelected;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-selected')\n    public get ariaSelected(): boolean {\n        return this.active;\n    }\n\n    /**\n     * Returns the `aria-live` of the slide.\n     *\n     * ```typescript\n     * let slide = this.slide.ariaLive;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-selected')\n    public get ariaLive() {\n        return this.active ? 'polite' : null;\n    }\n\n    /**\n     * Returns the class of the slide component.\n     * ```typescript\n     * let class =  this.slide.cssClass;\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    @HostBinding('class.igx-slide')\n    public cssClass = 'igx-slide';\n\n    /**\n     * Gets/sets the `active` state of the slide.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide [active] =\"false\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-carousel>\n     *  <igx-slide [(active)] =\"model.isActive\"></igx-slide>\n     * <igx-carousel>\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    @HostBinding('class.igx-slide--current')\n    @Input()\n    public get active(): boolean {\n        return this._active;\n    }\n\n    public set active(value) {\n        this._active = !!value;\n        this.activeChange.emit(this._active);\n    }\n\n    @HostBinding('class.igx-slide--previous')\n    @Input() public previous = false;\n\n    /**\n     * @hidden\n     */\n    @Output() public activeChange = new EventEmitter<boolean>();\n\n    constructor(private elementRef: ElementRef) { }\n\n    /**\n     * Returns a reference to the carousel element in the DOM.\n     * ```typescript\n     * let nativeElement =  this.slide.nativeElement;\n     * ```\n     * @memberof IgxSlideComponent\n     */\n    public get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    public get isDestroyed(): Subject<boolean> {\n    return this._destroy$;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    OnDestroy,\n    Output,\n    ContentChildren,\n    QueryList,\n    IterableDiffer,\n    IterableDiffers,\n    AfterContentInit,\n    IterableChangeRecord,\n    TemplateRef,\n    ViewChild,\n    ContentChild,\n    Injectable\n} from '@angular/core';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IBaseEventArgs, mkenum, PlatformUtil } from '../core/utils';\nimport { Subject, merge } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxCarouselIndicatorDirective, IgxCarouselNextButtonDirective, IgxCarouselPrevButtonDirective } from './carousel.directives';\nimport { useAnimation, AnimationBuilder, AnimationPlayer, AnimationReferenceMetadata } from '@angular/animations';\nimport { slideInLeft, fadeIn } from '../animations/main';\nimport { IgxSlideComponent, Direction } from './slide.component';\nimport { ICarouselResourceStrings } from '../core/i18n/carousel-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { HammerGestureConfig, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\n\nlet NEXT_ID = 0;\n\nexport const CarouselIndicatorsOrientation = mkenum({\n    bottom: 'bottom',\n    top: 'top'\n});\nexport type CarouselIndicatorsOrientation = (typeof CarouselIndicatorsOrientation)[keyof typeof CarouselIndicatorsOrientation];\n\nexport const CarouselAnimationType = mkenum({\n    none: 'none',\n    slide: 'slide',\n    fade: 'fade'\n});\nexport type CarouselAnimationType = (typeof CarouselAnimationType)[keyof typeof CarouselAnimationType];\n\nexport interface CarouselAnimationSettings {\n    enterAnimation: AnimationReferenceMetadata;\n    leaveAnimation: AnimationReferenceMetadata;\n}\n\n@Injectable()\nexport class CarouselHammerConfig extends HammerGestureConfig {\n    public overrides = {\n        pan: { direction: Hammer.DIRECTION_HORIZONTAL }\n    };\n}\n/**\n * **Ignite UI for Angular Carousel** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/carousel.html)\n *\n * The Ignite UI Carousel is used to browse or navigate through a collection of slides. Slides can contain custom\n * content such as images or cards and be used for things such as on-boarding tutorials or page-based interfaces.\n * It can be used as a separate fullscreen element or inside another component.\n *\n * Example:\n * ```html\n * <igx-carousel>\n *   <igx-slide>\n *     <h3>First Slide Header</h3>\n *     <p>First slide Content</p>\n *   <igx-slide>\n *   <igx-slide>\n *     <h3>Second Slide Header</h3>\n *     <p>Second Slide Content</p>\n * </igx-carousel>\n * ```\n */\n@Component({\n    providers: [\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: CarouselHammerConfig\n        }\n    ],\n    selector: 'igx-carousel',\n    templateUrl: 'carousel.component.html',\n    styles: [`\n    :host {\n        display: block;\n        outline-style: none;\n    }`]\n})\n\nexport class IgxCarouselComponent implements OnDestroy, AfterContentInit {\n    /**\n     * Returns the `role` attribute of the carousel.\n     * ```typescript\n     * let carouselRole =  this.carousel.role;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('attr.role') public role = 'region';\n\n    /**\n     * Sets the `id` of the carousel.\n     * If not set, the `id` of the first carousel component will be `\"igx-carousel-0\"`.\n     * ```html\n     * <igx-carousel id=\"my-first-carousel\"></igx-carousel>\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-carousel-${NEXT_ID++}`;\n\n    /**\n     * Returns the `aria-label` of the carousel.\n     *\n     * ```typescript\n     * let carousel = this.carousel.ariaLabel;\n     * ```\n     *\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = 'carousel';\n\n    /**\n     * Returns the `tabIndex` of the carousel component.\n     * ```typescript\n     * let tabIndex =  this.carousel.tabIndex;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('attr.tabindex')\n    get tabIndex() {\n        return 0;\n    }\n\n    /**\n     * Returns the class of the carousel component.\n     * ```typescript\n     * let class =  this.carousel.cssClass;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @HostBinding('class.igx-carousel')\n    public cssClass = 'igx-carousel';\n\n    /**\n     * Gets the `touch-action` style of the `list item`.\n     * ```typescript\n     * let touchAction = this.listItem.touchAction;\n     * ```\n     */\n    @HostBinding('style.touch-action')\n    get touchAction() {\n        return this.gesturesSupport ? 'pan-y' : 'auto';\n    }\n\n    /**\n     * Sets whether the carousel should `loop` back to the first slide after reaching the last slide.\n     * Default value is `true`.\n     * ```html\n     * <igx-carousel [loop]=\"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public loop = true;\n\n    /**\n     * Sets whether the carousel will `pause` the slide transitions on user interactions.\n     * Default value is `true`.\n     * ```html\n     *  <igx-carousel [pause]=\"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public pause = true;\n\n    /**\n     * Returns the time `interval` in milliseconds before the slide changes.\n     * ```typescript\n     * let timeInterval = this.carousel.interval;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    @Input()\n    get interval(): number {\n        return this._interval;\n    }\n\n    /**\n     * Sets the time `interval` in milliseconds before the slide changes.\n     * If not set, the carousel will not change `slides` automatically.\n     * ```html\n     * <igx-carousel [interval] = \"1000\"></igx-carousel>\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    set interval(value: number) {\n        this._interval = +value;\n        this.restartInterval();\n    }\n\n    /**\n     * Controls whether the carousel should render the left/right `navigation` buttons.\n     * Default value is `true`.\n     * ```html\n     * <igx-carousel [navigation] = \"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public navigation = true;\n\n    /**\n     * Controls whether the carousel should support keyboard navigation.\n     * Default value is `true`.\n     * ```html\n     * <igx-carousel [keyboardSupport] = \"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public keyboardSupport = true;\n\n    /**\n     * Controls whether the carousel should support gestures.\n     * Default value is `true`.\n     * ```html\n     * <igx-carousel [gesturesSupport] = \"false\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public gesturesSupport = true;\n\n    /**\n     * Controls the maximum indexes that can be shown.\n     * Default value is `5`.\n     * ```html\n     * <igx-carousel [maximumIndicatorsCount] = \"10\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Input() public maximumIndicatorsCount = 5;\n\n    /**\n     * Gets/sets the display mode of carousel indicators. It can be top or bottom.\n     * Default value is `bottom`.\n     * ```html\n     * <igx-carousel indicatorsOrientation='top'>\n     * <igx-carousel>\n     * ```\n     * @memberOf IgxSlideComponent\n     */\n    @Input() public indicatorsOrientation: CarouselIndicatorsOrientation = CarouselIndicatorsOrientation.bottom;\n\n    /**\n     * Gets/sets the animation type of carousel.\n     * Default value is `slide`.\n     * ```html\n     * <igx-carousel animationType='none'>\n     * <igx-carousel>\n     * ```\n     * @memberOf IgxSlideComponent\n     */\n    @Input() public animationType = CarouselAnimationType.slide;\n\n    /**\n     * An accessor that sets the resource strings.\n     * By default it uses EN resources.\n     */\n    @Input()\n    set resourceStrings(value: ICarouselResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    /**\n     * An accessor that returns the resource strings.\n     */\n    get resourceStrings(): ICarouselResourceStrings {\n        return this._resourceStrings;\n    }\n\n    @ViewChild('defaultIndicator', { read: TemplateRef, static: true })\n    private defaultIndicator: TemplateRef<any>;\n\n    @ViewChild('defaultNextButton', { read: TemplateRef, static: true })\n    private defaultNextButton: TemplateRef<any>;\n\n    @ViewChild('defaultPrevButton', { read: TemplateRef, static: true })\n    private defaultPrevButton: TemplateRef<any>;\n\n    /**\n     * The custom template, if any, that should be used when rendering carousel indicators\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.carousel.indicatorTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-carousel #carousel>\n     *      ...\n     *      <ng-template igxCarouselIndicator let-slide>\n     *         <igx-icon *ngIf=\"slide.active\"  fontSet=\"material\">brightness_7</igx-icon>\n     *         <igx-icon *ngIf=\"!slide.active\"  fontSet=\"material\">brightness_5</igx-icon>\n     *      </ng-template>\n     *  </igx-carousel>\n     * ```\n     */\n    @ContentChild(IgxCarouselIndicatorDirective, { read: TemplateRef, static: false })\n    public indicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering carousel next button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.carousel.nextButtonTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-carousel #carousel>\n     *      ...\n     *      <ng-template igxCarouselNextButton let-disabled>\n     *            <button igxButton=\"fab\" igxRipple=\"white\" [disabled]=\"disabled\">\n     *                <igx-icon fontSet=\"material\">add</igx-icon>\n     *           </button>\n     *      </ng-template>\n     *  </igx-carousel>\n     * ```\n     */\n    @ContentChild(IgxCarouselNextButtonDirective, { read: TemplateRef, static: false })\n    public nextButtonTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering carousel previous button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.carousel.nextButtonTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-carousel #carousel>\n     *      ...\n     *      <ng-template igxCarouselPrevButton let-disabled>\n     *            <button igxButton=\"fab\" igxRipple=\"white\" [disabled]=\"disabled\">\n     *                <igx-icon fontSet=\"material\">remove</igx-icon>\n     *           </button>\n     *      </ng-template>\n     *  </igx-carousel>\n     * ```\n     */\n    @ContentChild(IgxCarouselPrevButtonDirective, { read: TemplateRef, static: false })\n    public prevButtonTemplate: TemplateRef<any> = null;\n\n    /**\n     * The collection of `slides` currently in the carousel.\n     * ```typescript\n     * let slides: QueryList<IgxSlideComponent> = this.carousel.slides;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @ContentChildren(IgxSlideComponent)\n    public slides: QueryList<IgxSlideComponent>;\n\n    /**\n     * An event that is emitted after a slide transition has happened.\n     * Provides references to the `IgxCarouselComponent` and `IgxSlideComponent` as event arguments.\n     * ```html\n     * <igx-carousel (onSlideChanged)=\"onSlideChanged($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onSlideChanged = new EventEmitter<ISlideEventArgs>();\n\n    /**\n     * An event that is emitted after a slide has been added to the carousel.\n     * Provides references to the `IgxCarouselComponent` and `IgxSlideComponent` as event arguments.\n     * ```html\n     * <igx-carousel (onSlideAdded)=\"onSlideAdded($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onSlideAdded = new EventEmitter<ISlideEventArgs>();\n\n    /**\n     * An event that is emitted after a slide has been removed from the carousel.\n     * Provides references to the `IgxCarouselComponent` and `IgxSlideComponent` as event arguments.\n     * ```html\n     * <igx-carousel (onSlideRemoved)=\"onSlideRemoved($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onSlideRemoved = new EventEmitter<ISlideEventArgs>();\n\n    /**\n     * An event that is emitted after the carousel has been paused.\n     * Provides a reference to the `IgxCarouselComponent` as an event argument.\n     * ```html\n     * <igx-carousel (onCarouselPaused)=\"onCarouselPaused($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onCarouselPaused = new EventEmitter<IgxCarouselComponent>();\n\n    /**\n     * An event that is emitted after the carousel has resumed transitioning between `slides`.\n     * Provides a reference to the `IgxCarouselComponent` as an event argument.\n     * ```html\n     * <igx-carousel (onCarouselPlaying)=\"onCarouselPlaying($event)\"></igx-carousel>\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    @Output() public onCarouselPlaying = new EventEmitter<IgxCarouselComponent>();\n\n    private _interval: number;\n    private _resourceStrings = CurrentResourceStrings.CarouselResStrings;\n    private lastInterval: any;\n    private playing: boolean;\n    private stoppedByInteraction: boolean;\n    private destroyed: boolean;\n    private destroy$ = new Subject<any>();\n    private differ: IterableDiffer<IgxSlideComponent> | null = null;\n    private enterAnimationPlayer?: AnimationPlayer;\n    private leaveAnimationPlayer?: AnimationPlayer;\n    private currentSlide: IgxSlideComponent;\n    private previousSlide: IgxSlideComponent;\n    private animationDuration = 320;\n    private incomingSlide: IgxSlideComponent;\n    private animationPosition = 0;\n    private newDuration = 0;\n\n    constructor(private element: ElementRef, private iterableDiffers: IterableDiffers,\n        private builder: AnimationBuilder, private platformUtil: PlatformUtil) {\n        this.differ = this.iterableDiffers.find([]).create(null);\n    }\n\n    /** @hidden */\n    public ngAfterContentInit() {\n        this.slides.changes\n            .pipe(takeUntil(this.destroy$))\n            .subscribe((change: QueryList<IgxSlideComponent>) => { this.initSlides(change); });\n\n        this.initSlides(this.slides);\n    }\n\n    /** @hidden */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this.destroyed = true;\n        if (this.lastInterval) {\n            clearInterval(this.lastInterval);\n        }\n    }\n\n    private unsubscriber(slide: IgxSlideComponent) {\n        return merge(this.destroy$, slide.isDestroyed);\n    }\n\n    private onSlideActivated(slide: IgxSlideComponent) {\n        if (slide.active && slide !== this.currentSlide) {\n            if (slide.direction === Direction.NONE) {\n                const newIndex = slide.index;\n                slide.direction = newIndex > this.current ? Direction.NEXT : Direction.PREV;\n            }\n\n            if (this.currentSlide) {\n                if (this.previousSlide && this.previousSlide.previous) {\n                    this.previousSlide.previous = false;\n                }\n                this.currentSlide.direction = slide.direction;\n                this.currentSlide.active = false;\n\n                this.previousSlide = this.currentSlide;\n                this.currentSlide = slide;\n                if (this.animationType !== CarouselAnimationType.none) {\n                    if (this.animationStarted(this.leaveAnimationPlayer) || this.animationStarted(this.enterAnimationPlayer)) {\n                        requestAnimationFrame(() => {\n                            this.resetAnimations();\n                            this.playAnimations();\n                        });\n                    } else {\n                        this.playAnimations();\n                    }\n                }\n            } else {\n                this.currentSlide = slide;\n            }\n            this.onSlideChanged.emit({ carousel: this, slide });\n            this.restartInterval();\n        }\n    }\n\n    private playAnimations() {\n        this.playLeaveAnimation();\n        this.playEnterAnimation();\n    }\n\n    private finishAnimations() {\n        if (this.animationStarted(this.leaveAnimationPlayer)) {\n            this.leaveAnimationPlayer.finish();\n        }\n\n        if (this.animationStarted(this.enterAnimationPlayer)) {\n            this.enterAnimationPlayer.finish();\n        }\n    }\n\n    private resetAnimations() {\n        if (this.animationStarted(this.leaveAnimationPlayer)) {\n            this.leaveAnimationPlayer.reset();\n        }\n\n        if (this.animationStarted(this.enterAnimationPlayer)) {\n            this.enterAnimationPlayer.reset();\n        }\n    }\n\n    private animationStarted(animation: AnimationPlayer): boolean {\n        return animation && animation.hasStarted();\n    }\n\n    private getAnimation(): CarouselAnimationSettings {\n        let duration;\n        if (this.newDuration) {\n            duration = this.animationPosition ? this.animationPosition * this.newDuration : this.newDuration;\n        } else {\n            duration = this.animationPosition ? this.animationPosition * this.animationDuration : this.animationDuration;\n        }\n\n        switch (this.animationType) {\n            case CarouselAnimationType.slide:\n                const trans = this.animationPosition ? this.animationPosition * 100 : 100;\n                return {\n                    enterAnimation: useAnimation(slideInLeft,\n                        {\n                            params: {\n                                delay: '0s',\n                                duration: `${duration}ms`,\n                                endOpacity: 1,\n                                startOpacity: 1,\n                                fromPosition: `translateX(${this.currentSlide.direction === 1 ? trans : -trans}%)`,\n                                toPosition: 'translateX(0%)'\n                            }\n                        }),\n                    leaveAnimation: useAnimation(slideInLeft,\n                        {\n                            params: {\n                                delay: '0s',\n                                duration: `${duration}ms`,\n                                endOpacity: 1,\n                                startOpacity: 1,\n                                fromPosition: `translateX(0%)`,\n                                toPosition: `translateX(${this.currentSlide.direction === 1 ? -trans : trans}%)`,\n                            }\n                        })\n                };\n            case CarouselAnimationType.fade:\n                return {\n                    enterAnimation: useAnimation(fadeIn,\n                        { params: { duration: `${duration}ms`, startOpacity: `${this.animationPosition}` } }),\n                    leaveAnimation: null\n                };\n        }\n        return {\n            enterAnimation: null,\n            leaveAnimation: null\n        };\n    }\n\n    private playEnterAnimation() {\n        const animation = this.getAnimation().enterAnimation;\n        if (!animation) {\n            return;\n        }\n        const animationBuilder = this.builder.build(animation);\n\n        this.enterAnimationPlayer = animationBuilder.create(this.currentSlide.nativeElement);\n\n        this.enterAnimationPlayer.onDone(() => {\n            if (this.enterAnimationPlayer) {\n                this.enterAnimationPlayer.reset();\n                this.enterAnimationPlayer = null;\n            }\n            this.animationPosition = 0;\n            this.newDuration = 0;\n            this.previousSlide.previous = false;\n        });\n        this.previousSlide.previous = true;\n        this.enterAnimationPlayer.play();\n    }\n\n    private playLeaveAnimation() {\n        const animation = this.getAnimation().leaveAnimation;\n        if (!animation) {\n            return;\n        }\n\n        const animationBuilder = this.builder.build(animation);\n        this.leaveAnimationPlayer = animationBuilder.create(this.previousSlide.nativeElement);\n\n        this.leaveAnimationPlayer.onDone(() => {\n            if (this.leaveAnimationPlayer) {\n                this.leaveAnimationPlayer.reset();\n                this.leaveAnimationPlayer = null;\n            }\n            this.animationPosition = 0;\n            this.newDuration = 0;\n        });\n        this.leaveAnimationPlayer.play();\n    }\n\n    private initSlides(change: QueryList<IgxSlideComponent>) {\n        const diff = this.differ.diff(change.toArray());\n        if (diff) {\n            this.slides.reduce((any, c, ind) => c.index = ind, 0); // reset slides indexes\n            diff.forEachAddedItem((record: IterableChangeRecord<IgxSlideComponent>) => {\n                const slide = record.item;\n                this.onSlideAdded.emit({ carousel: this, slide });\n                if (slide.active) {\n                    this.currentSlide = slide;\n                }\n                slide.activeChange.pipe(takeUntil(this.unsubscriber(slide))).subscribe(() => this.onSlideActivated(slide));\n            });\n\n            diff.forEachRemovedItem((record: IterableChangeRecord<IgxSlideComponent>) => {\n                const slide = record.item;\n                this.onSlideRemoved.emit({ carousel: this, slide });\n                if (slide.active) {\n                    slide.active = false;\n                    this.currentSlide = this.get(slide.index < this.total ? slide.index : this.total - 1);\n                }\n            });\n\n            this.updateSlidesSelection();\n        }\n    }\n\n    private updateSlidesSelection() {\n        requestAnimationFrame(() => {\n            if (this.currentSlide) {\n                this.currentSlide.active = true;\n                const activeSlides = this.slides.filter(slide => slide.active && slide.index !== this.currentSlide.index);\n                activeSlides.forEach(slide => { slide.active = false; });\n            } else if (this.total) {\n                this.slides.first.active = true;\n            }\n            this.play();\n        });\n    }\n\n    /** @hidden */\n    public get getIndicatorTemplate(): TemplateRef<any> {\n        if (this.indicatorTemplate) {\n            return this.indicatorTemplate;\n        }\n        return this.defaultIndicator;\n    }\n\n    /** @hidden */\n    public get getNextButtonTemplate(): TemplateRef<any> {\n        if (this.nextButtonTemplate) {\n            return this.nextButtonTemplate;\n        }\n        return this.defaultNextButton;\n    }\n\n    /** @hidden */\n    public get getPrevButtonTemplate(): TemplateRef<any> {\n        if (this.prevButtonTemplate) {\n            return this.prevButtonTemplate;\n        }\n        return this.defaultPrevButton;\n    }\n\n    /** @hidden */\n    public setAriaLabel(slide) {\n        return `Item ${slide.index + 1} of ${this.total}`;\n    }\n\n    /** @hidden */\n    public get indicatorsOrientationClass() {\n        return `igx-carousel-indicators--${this.indicatorsOrientation}`;\n    }\n\n    /** @hidden */\n    public get showIndicators(): boolean {\n        return this.total <= this.maximumIndicatorsCount && this.total > 0;\n    }\n\n    /** @hidden */\n    public get showIndicatorsLabel(): boolean {\n        return this.total > this.maximumIndicatorsCount;\n    }\n\n    /** @hidden */\n    public get getCarouselLabel() {\n        return `${this.current + 1} ${this.resourceStrings.igx_carousel_of} ${this.total}`;\n    }\n\n    /**\n     * Returns the total number of `slides` in the carousel.\n     * ```typescript\n     * let slideCount =  this.carousel.total;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get total(): number {\n        return this.slides.length;\n    }\n\n    /**\n     * The index of the slide being currently shown.\n     * ```typescript\n     * let currentSlideNumber =  this.carousel.current;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get current(): number {\n        return !this.currentSlide ? 0 : this.currentSlide.index;\n    }\n\n    private getNextIndex(): number {\n        return (this.current + 1) % this.total;\n    }\n\n    private getPrevIndex(): number {\n        return this.current - 1 < 0 ? this.total - 1 : this.current - 1;\n    }\n\n    /**\n     * Returns a boolean indicating if the carousel is playing.\n     * ```typescript\n     * let isPlaying =  this.carousel.isPlaying;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get isPlaying(): boolean {\n        return this.playing;\n    }\n\n    /**\n     * Returns  boolean indicating if the carousel is destroyed.\n     * ```typescript\n     * let isDestroyed =  this.carousel.isDestroyed;\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get isDestroyed(): boolean {\n        return this.destroyed;\n    }\n    /**\n     * Returns a reference to the carousel element in the DOM.\n     * ```typescript\n     * let nativeElement =  this.carousel.nativeElement;\n     * ```\n     * @memberof IgxCarouselComponent\n     */\n    get nativeElement(): any {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * Returns the slide corresponding to the provided `index` or null.\n     * ```typescript\n     * let slide1 =  this.carousel.get(1);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public get(index: number): IgxSlideComponent {\n        return this.slides.find((slide) => slide.index === index);\n    }\n\n    /**\n     * Adds a new slide to the carousel.\n     * ```typescript\n     * this.carousel.add(newSlide);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public add(slide: IgxSlideComponent) {\n        const newSlides = this.slides.toArray();\n        newSlides.push(slide);\n        this.slides.reset(newSlides);\n        this.slides.notifyOnChanges();\n    }\n\n    /**\n     * Removes a slide from the carousel.\n     * ```typescript\n     * this.carousel.remove(slide);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public remove(slide: IgxSlideComponent) {\n        if (slide && slide === this.get(slide.index)) { // check if the requested slide for delete is present in the carousel\n            const newSlides = this.slides.toArray();\n            newSlides.splice(slide.index, 1);\n            this.slides.reset(newSlides);\n            this.slides.notifyOnChanges();\n        }\n    }\n\n    /**\n     * Kicks in a transition for a given slide with a given `direction`.\n     * ```typescript\n     * this.carousel.select(this.carousel.get(2), Direction.NEXT);\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public select(slide: IgxSlideComponent, direction: Direction = Direction.NONE) {\n        if (slide && slide !== this.currentSlide) {\n            slide.direction = direction;\n            slide.active = true;\n        }\n    }\n\n    /**\n     * Transitions to the next slide in the carousel.\n     * ```typescript\n     * this.carousel.next();\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public next() {\n        const index = this.getNextIndex();\n\n        if (index === 0 && !this.loop) {\n            this.stop();\n            return;\n        }\n        return this.select(this.get(index), Direction.NEXT);\n    }\n\n    /**\n     * Transitions to the previous slide in the carousel.\n     * ```typescript\n     * this.carousel.prev();\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public prev() {\n        const index = this.getPrevIndex();\n\n        if (!this.loop && index === this.total - 1) {\n            this.stop();\n            return;\n        }\n        return this.select(this.get(index), Direction.PREV);\n    }\n\n    /**\n     * Resumes playing of the carousel if in paused state.\n     * No operation otherwise.\n     * ```typescript\n     * this.carousel.play();\n     * }\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public play() {\n        if (!this.playing) {\n            this.playing = true;\n            this.onCarouselPlaying.emit(this);\n            this.restartInterval();\n            this.stoppedByInteraction = false;\n        }\n    }\n\n    /**\n     * Stops slide transitions if the `pause` option is set to `true`.\n     * No operation otherwise.\n     * ```typescript\n     *  this.carousel.stop();\n     * }\n     * ```\n     * @memberOf IgxCarouselComponent\n     */\n    public stop() {\n        if (this.pause) {\n            this.playing = false;\n            this.onCarouselPaused.emit(this);\n            this.resetInterval();\n        }\n    }\n\n    private resetInterval() {\n        if (this.lastInterval) {\n            clearInterval(this.lastInterval);\n            this.lastInterval = null;\n        }\n    }\n\n    private restartInterval() {\n        this.resetInterval();\n\n        if (!isNaN(this.interval) && this.interval > 0 && this.platformUtil.isBrowser) {\n            this.lastInterval = setInterval(() => {\n                const tick = +this.interval;\n                if (this.playing && this.total && !isNaN(tick) && tick > 0) {\n                    this.next();\n                } else {\n                    this.stop();\n                }\n            }, this.interval);\n        }\n    }\n\n    /** @hidden */\n    public get nextButtonDisabled() {\n        return !this.loop && this.current === (this.total - 1);\n    }\n\n    /** @hidden */\n    public get prevButtonDisabled() {\n        return !this.loop && this.current === 0;\n    }\n\n    /** @hidden */\n    @HostListener('keydown.arrowright', ['$event'])\n    public onKeydownArrowRight(event) {\n        if (this.keyboardSupport) {\n            event.preventDefault();\n            this.next();\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('keydown.arrowleft', ['$event'])\n    public onKeydownArrowLeft(event) {\n        if (this.keyboardSupport) {\n            event.preventDefault();\n            this.prev();\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('tap', ['$event'])\n    public onTap(event) {\n        // play pause only when tap on slide\n        if (event.target && event.target.classList.contains('igx-slide')) {\n            if (this.isPlaying) {\n                if (this.pause) {\n                    this.stoppedByInteraction = true;\n                }\n                this.stop();\n            } else if (this.stoppedByInteraction) {\n                this.play();\n            }\n        }\n    }\n\n    /** @hidden */\n    @HostListener('keydown.home', ['$event'])\n    public onKeydownHome(event) {\n        if (this.keyboardSupport && this.slides.length > 0) {\n            event.preventDefault();\n            this.slides.first.active = true;\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('keydown.end', ['$event'])\n    public onKeydownEnd(event) {\n        if (this.keyboardSupport && this.slides.length > 0) {\n            event.preventDefault();\n            this.slides.last.active = true;\n            requestAnimationFrame(() => this.nativeElement.focus());\n        }\n    }\n\n    /** @hidden */\n    @HostListener('mouseenter')\n    public onMouseEnter() {\n        if (this.pause && this.isPlaying) {\n            this.stoppedByInteraction = true;\n        }\n        this.stop();\n    }\n\n    /** @hidden */\n    @HostListener('mouseleave')\n    public onMouseLeave() {\n        if (this.stoppedByInteraction) {\n            this.play();\n        }\n    }\n\n    /** @hidden */\n    @HostListener('panleft', ['$event'])\n    public onPanLeft(event) {\n        this.pan(event);\n    }\n\n    /** @hidden */\n    @HostListener('panright', ['$event'])\n    public onPanRight(event) {\n        this.pan(event);\n    }\n\n    private resetSlideStyles(slide: IgxSlideComponent) {\n        slide.nativeElement.style.transform = '';\n        slide.nativeElement.style.opacity = '';\n    }\n\n    private pan(event) {\n        const slideWidth = this.currentSlide.nativeElement.offsetWidth;\n        const panOffset = (slideWidth / 1000);\n        const deltaX = event.deltaX;\n        const index = deltaX < 0 ? this.getNextIndex() : this.getPrevIndex();\n        const offset = deltaX < 0 ? slideWidth + deltaX : -slideWidth + deltaX;\n\n        if (!this.gesturesSupport || event.isFinal || Math.abs(deltaX) + panOffset >= slideWidth) {\n            return;\n        }\n\n        if (!this.loop && ((this.current === 0 && deltaX > 0) || (this.current === this.total - 1 && deltaX < 0))) {\n            this.incomingSlide = null;\n            return;\n        }\n\n        event.preventDefault();\n        if (this.isPlaying) {\n            this.stoppedByInteraction = true;\n            this.stop();\n        }\n\n        if (this.previousSlide && this.previousSlide.previous) {\n            this.previousSlide.previous = false;\n        }\n        this.finishAnimations();\n\n        if (this.incomingSlide) {\n            if (index !== this.incomingSlide.index) {\n                this.resetSlideStyles(this.incomingSlide);\n                this.incomingSlide.previous = false;\n                this.incomingSlide = this.get(index);\n            }\n        } else {\n            this.incomingSlide = this.get(index);\n        }\n        this.incomingSlide.previous = true;\n\n        if (this.animationType === CarouselAnimationType.fade) {\n            this.currentSlide.nativeElement.style.opacity = `${Math.abs(offset) / slideWidth}`;\n        } else {\n            this.currentSlide.nativeElement.style.transform = `translateX(${deltaX}px)`;\n            this.incomingSlide.nativeElement.style.transform = `translateX(${offset}px)`;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('panend', ['$event'])\n    public onPanEnd(event) {\n        if (!this.gesturesSupport) {\n            return;\n        }\n        event.preventDefault();\n\n        const slideWidth = this.currentSlide.nativeElement.offsetWidth;\n        const panOffset = (slideWidth / 1000);\n        const deltaX = Math.abs(event.deltaX) + panOffset < slideWidth ? Math.abs(event.deltaX) : slideWidth - panOffset;\n        const velocity = Math.abs(event.velocity);\n        this.resetSlideStyles(this.currentSlide);\n        if (this.incomingSlide) {\n            this.resetSlideStyles(this.incomingSlide);\n            if (slideWidth / 2 < deltaX || velocity > 1) {\n                this.incomingSlide.direction = event.deltaX < 0 ? Direction.NEXT : Direction.PREV;\n                this.incomingSlide.previous = false;\n\n                this.animationPosition = this.animationType === CarouselAnimationType.fade ?\n                    deltaX / slideWidth : (slideWidth - deltaX) / slideWidth;\n\n                if (velocity > 1) {\n                    this.newDuration = this.animationDuration / velocity;\n                }\n                this.incomingSlide.active = true;\n            } else {\n                this.currentSlide.direction = event.deltaX > 0 ? Direction.NEXT : Direction.PREV;\n                this.previousSlide = this.incomingSlide;\n                this.previousSlide.previous = true;\n                this.animationPosition = this.animationType === CarouselAnimationType.fade ?\n                    Math.abs((slideWidth - deltaX) / slideWidth) : deltaX / slideWidth;\n                this.playAnimations();\n            }\n        }\n\n        if (this.stoppedByInteraction) {\n            this.play();\n        }\n    }\n}\n\nexport interface ISlideEventArgs extends IBaseEventArgs {\n    carousel: IgxCarouselComponent;\n    slide: IgxSlideComponent;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxCarouselComponent,\n        IgxSlideComponent,\n        IgxCarouselIndicatorDirective,\n        IgxCarouselNextButtonDirective,\n        IgxCarouselPrevButtonDirective\n    ],\n    exports: [\n        IgxCarouselComponent,\n        IgxSlideComponent,\n        IgxCarouselIndicatorDirective,\n        IgxCarouselNextButtonDirective,\n        IgxCarouselPrevButtonDirective\n    ],\n    imports: [CommonModule, IgxIconModule]\n})\nexport class IgxCarouselModule {\n}\n","import {\n    Component,\n    ChangeDetectorRef,\n    EventEmitter,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    Output,\n    ViewChild,\n    Renderer2,\n    TemplateRef,\n    Inject,\n    Optional\n} from '@angular/core';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase } from '../core/displayDensity';\nimport {\n    IgxDragDirective,\n    IDragBaseEventArgs,\n    IDragStartEventArgs,\n    IDropBaseEventArgs,\n    IDropDroppedEventArgs\n} from '../directives/drag-drop/drag-drop.directive';\nimport { IBaseEventArgs } from '../core/utils';\nimport { fromEvent } from 'rxjs';\nimport { take, filter } from 'rxjs/operators';\n\n\nexport interface IBaseChipEventArgs extends IBaseEventArgs {\n    originalEvent: IDragBaseEventArgs | IDropBaseEventArgs | KeyboardEvent | MouseEvent | TouchEvent;\n    owner: IgxChipComponent;\n}\n\nexport interface IChipClickEventArgs extends IBaseChipEventArgs {\n    cancel: boolean;\n}\n\nexport interface IChipKeyDownEventArgs extends IBaseChipEventArgs {\n    originalEvent: KeyboardEvent;\n    cancel: boolean;\n}\n\nexport interface IChipEnterDragAreaEventArgs extends IBaseChipEventArgs {\n    dragChip: IgxChipComponent;\n}\n\nexport interface IChipSelectEventArgs extends IBaseChipEventArgs {\n    cancel: boolean;\n    selected: boolean;\n}\n\nlet CHIP_ID = 0;\n\n/**\n * Chip is compact visual component that displays information in an obround.\n *\n * @igxModule IgxChipsModule\n *\n * @igxTheme igx-chip-theme\n *\n * @igxKeywords chip\n *\n * @igxGroup display\n *\n * @remarks\n * The Ignite UI Chip can be templated, deleted, and selected.\n * Multiple chips can be reordered and visually connected to each other.\n * Chips reside in a container called chips area which is responsible for managing the interactions between the chips.\n *\n * @example\n * ```html\n * <igx-chip class=\"chipStyle\" [id]=\"901\" [draggable]=\"true\" [removable]=\"true\" (onRemove)=\"chipRemoved($event)\">\n *    <igx-avatar class=\"chip-avatar-resized\" igxPrefix fontSet=\"material\" roundShape=\"true\"></igx-avatar>\n * </igx-chip>\n * ```\n */\n@Component({\n    selector: 'igx-chip',\n    templateUrl: 'chip.component.html'\n})\nexport class IgxChipComponent extends DisplayDensityBase {\n\n    /**\n     * An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\"></igx-chip>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-chip-${CHIP_ID++}`;\n\n    /**\n     * An @Input property that sets the value of `tabindex` attribute. If not provided it will use the element's tabindex if set.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [tabIndex]=\"1\"></igx-chip>\n     * ```\n     */\n    @HostBinding('attr.tabIndex')\n    @Input()\n    public set tabIndex(value: number) {\n        this._tabIndex = value;\n    }\n\n    public get tabIndex() {\n        if (this._tabIndex !== null) {\n            return this._tabIndex;\n        }\n        return !this.disabled ? 0 : null;\n    }\n\n    /**\n     * An @Input property that stores data related to the chip.\n     * @example\n     * ```html\n     * <igx-chip [data]=\"{ value: 'Country' }\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public data: any;\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` can be dragged in order to change it's position.\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public draggable = false;\n\n    /**\n     * An @Input property that enables/disables the draggable element animation when the element is released.\n     * By default it's set to true.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\" [animateOnRelease]=\"false\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public animateOnRelease = true;\n\n    /**\n     * An @Input property that enables/disables the hiding of the base element that has been dragged.\n     * By default it's set to true.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\" [hideBaseOnDrag]=\"false\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public hideBaseOnDrag = true;\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` should render remove button and throw remove events.\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"'igx-chip-1'\" [draggable]=\"true\" [removable]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public removable = false;\n\n    /**\n     * An @Input property that overrides the default icon that the chip applies to the remove button.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [removable]=\"true\" [removeIcon]=\"iconTemplate\"></igx-chip>\n     * <ng-template #iconTemplate><igx-icon>delete</igx-icon></ng-template>\n     * ```\n     */\n    @Input()\n    public removeIcon: TemplateRef<any>;\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` can be selected on click or through navigation,\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [draggable]=\"true\" [removable]=\"true\" [selectable]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public selectable = false;\n\n    /**\n     * An @Input property that overrides the default icon that the chip applies when it is selected.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [selectable]=\"true\" [selectIcon]=\"iconTemplate\"></igx-chip>\n     * <ng-template #iconTemplate><igx-icon>done_outline</igx-icon></ng-template>\n     * ```\n     */\n    @Input()\n    public selectIcon: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * An @Input property that defines if the `IgxChipComponent` is disabled. When disabled it restricts user interactions\n     * like focusing on click or tab, selection on click or Space, dragging.\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [disabled]=\"true\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * Sets the `IgxChipComponent` selected state.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" [selected]=\"true\">\n     * ```\n     *\n     * Two-way data binding:\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" [(selected)]=\"model.isSelected\">\n     * ```\n     */\n    @Input()\n    public set selected(newValue: boolean) {\n        this.changeSelection(newValue);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Output()\n    public selectedChange = new EventEmitter<boolean>();\n\n    /**\n     * Returns if the `IgxChipComponent` is selected.\n     * @example\n     * ```typescript\n     * @ViewChild('myChip')\n     * public chip: IgxChipComponent;\n     * selectedChip(){\n     *     let selectedChip = this.chip.selected;\n     * }\n     * ```\n     */\n    public get selected() {\n        return this._selected;\n    }\n\n    /**\n     * An @Input property that sets the `IgxChipComponent` background color.\n     * The `color` property supports string, rgb, hex.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [color]=\"'#ff0000'\"></igx-chip>\n     * ```\n     */\n    @Input()\n    public set color(newColor) {\n        this.chipArea.nativeElement.style.backgroundColor = newColor;\n    }\n\n    /**\n     * Returns the background color of the `IgxChipComponent`.\n     * @example\n     * ```typescript\n     * @ViewChild('myChip')\n     * public chip: IgxChipComponent;\n     * ngAfterViewInit(){\n     *     let chipColor = this.chip.color;\n     * }\n     * ```\n     */\n    public get color() {\n        return this.chipArea.nativeElement.style.backgroundColor;\n    }\n\n    /**\n     * Emits an event when the `IgxChipComponent` moving starts.\n     * Returns the moving `IgxChipComponent`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onMoveStart)=\"moveStarted($event)\">\n     * ```\n     */\n    @Output()\n    public onMoveStart = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` moving ends.\n     * Returns the moved `IgxChipComponent`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onMoveEnd)=\"moveEnded($event)\">\n     * ```\n     */\n    @Output()\n    public onMoveEnd = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` is removed.\n     * Returns the removed `IgxChipComponent`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onRemove)=\"remove($event)\">\n     * ```\n     */\n    @Output()\n    public onRemove = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` is clicked.\n     * Returns the clicked `IgxChipComponent`, whether the event should be canceled.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onClick)=\"chipClick($event)\">\n     * ```\n     */\n    @Output()\n    public onClick = new EventEmitter<IChipClickEventArgs>();\n\n    /**\n     * Emits event when the `IgxChipComponent` is selected/deselected.\n     * Returns the selected chip reference, whether the event should be canceled, what is the next selection state and\n     * when the event is triggered by interaction `originalEvent` is provided, otherwise `originalEvent` is `null`.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" (onSelection)=\"chipSelect($event)\">\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<IChipSelectEventArgs>();\n\n    /**\n     * Emits event when the `IgxChipComponent` is selected/deselected and any related animations and transitions also end.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [selectable]=\"true\" (onSelectionDone)=\"chipSelectEnd($event)\">\n     * ```\n     */\n    @Output()\n    public onSelectionDone = new EventEmitter<IBaseChipEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` keyboard navigation is being used.\n     * Returns the focused/selected `IgxChipComponent`, whether the event should be canceled,\n     * if the `alt`, `shift` or `control` key is pressed and the pressed key name.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onKeyDown)=\"chipKeyDown($event)\">\n     * ```\n     */\n    @Output()\n    public onKeyDown = new EventEmitter<IChipKeyDownEventArgs>();\n\n    /**\n     * Emits an event when the `IgxChipComponent` has entered the `IgxChipsAreaComponent`.\n     * Returns the target `IgxChipComponent`, the drag `IgxChipComponent`, as  well as\n     * the original drop event arguments.\n     * @example\n     * ```html\n     * <igx-chip #myChip [id]=\"'igx-chip-1'\" [draggable]=\"true\" (onDragEnter)=\"chipEnter($event)\">\n     * ```\n     */\n    @Output()\n    public onDragEnter = new EventEmitter<IChipEnterDragAreaEventArgs>();\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.class')\n    get hostClass(): string {\n        const classes = [this.getComponentDensityClass('igx-chip')];\n        classes.push(this.disabled ? 'igx-chip--disabled' : '');\n        // The custom classes should be at the end.\n        classes.push(this.class);\n        return classes.join(' ');\n    }\n\n    /**\n     * Property that contains a reference to the `IgxDragDirective` the `IgxChipComponent` uses for dragging behavior.\n     * @example\n     * ```html\n     * <igx-chip [id]=\"chip.id\" [draggable]=\"true\"></igx-chip>\n     * ```\n     * ```typescript\n     * onMoveStart(event: IBaseChipEventArgs){\n     *     let dragDirective = event.owner.dragDirective;\n     * }\n     * ```\n     */\n    @ViewChild('chipArea', { read: IgxDragDirective, static: true })\n    public dragDirective: IgxDragDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('chipArea', { read: ElementRef, static: true })\n    public chipArea: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('selectContainer', { read: ElementRef, static: true })\n    public selectContainer: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultRemoveIcon', { read: TemplateRef, static: true })\n    public defaultRemoveIcon: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultSelectIcon', { read: TemplateRef, static: true })\n    public defaultSelectIcon: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get removeButtonTemplate() {\n        return this.removeIcon || this.defaultRemoveIcon;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get selectIconTemplate() {\n        return this.selectIcon || this.defaultSelectIcon;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get ghostClass(): string {\n        return this.getComponentDensityClass('igx-chip__ghost');\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public hideBaseElement = false;\n\n    protected _tabIndex = null;\n    protected _selected = false;\n    protected _selectedItemClass = 'igx-chip__item--selected';\n    protected _movedWhileRemoving = false;\n\n    constructor(public cdr: ChangeDetectorRef, public elementRef: ElementRef, private renderer: Renderer2,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n            super(_displayDensityOptions);\n        }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public selectClass(condition: boolean): object {\n        const SELECT_CLASS = 'igx-chip__select';\n\n        return {\n            [SELECT_CLASS]: condition,\n            [`${SELECT_CLASS}--hidden`]: !condition\n        };\n    }\n\n    protected changeSelection(newValue: boolean, srcEvent = null) {\n        const onSelectArgs: IChipSelectEventArgs = {\n            originalEvent: srcEvent,\n            owner: this,\n            selected: false,\n            cancel: false\n        };\n\n        fromEvent(this.selectContainer.nativeElement, 'transitionend')\n            .pipe(filter<TransitionEvent>(event => event.propertyName === 'width'), take(1))\n            .subscribe(event => this.onSelectTransitionDone(event));\n\n        if (newValue && !this._selected) {\n            onSelectArgs.selected = true;\n            this.onSelection.emit(onSelectArgs);\n\n            if (!onSelectArgs.cancel) {\n                this.renderer.addClass(this.chipArea.nativeElement, this._selectedItemClass);\n                this._selected = newValue;\n                this.selectedChange.emit(this._selected);\n            }\n        } else if (!newValue && this._selected) {\n            this.onSelection.emit(onSelectArgs);\n\n            if (!onSelectArgs.cancel) {\n                this.renderer.removeClass(this.chipArea.nativeElement, this._selectedItemClass);\n                this._selected = newValue;\n                this.selectedChange.emit(this._selected);\n            }\n        }\n    }\n\n    public onSelectTransitionDone(event) {\n        if (!!event.target.tagName) {\n            // Trigger onSelectionDone on when `width` property is changed and the target is valid element(not comment).\n            this.onSelectionDone.emit({\n                owner: this,\n                originalEvent: event\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipKeyDown(event: KeyboardEvent) {\n        const keyDownArgs: IChipKeyDownEventArgs = {\n            originalEvent: event,\n            owner: this,\n            cancel: false\n        };\n\n        this.onKeyDown.emit(keyDownArgs);\n        if (keyDownArgs.cancel) {\n            return;\n        }\n\n        if ((event.key === 'Delete' || event.key === 'Del') && this.removable) {\n            this.onRemove.emit({\n                originalEvent: event,\n                owner: this\n            });\n        }\n\n        if ((event.key === ' ' || event.key === 'Spacebar') && this.selectable && !this.disabled) {\n            this.changeSelection(!this.selected, event);\n        }\n\n        if (event.key !== 'Tab') {\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('keydown', ['$event'])\n    public keyEvent(event: KeyboardEvent) {\n        this.onChipKeyDown(event);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveBtnKeyDown(event: KeyboardEvent) {\n        if (event.key === ' ' || event.key === 'Spacebar' || event.key === 'Enter') {\n            this.onRemove.emit({\n                originalEvent: event,\n                owner: this\n            });\n\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    }\n\n    public onRemoveMouseDown(event: PointerEvent | MouseEvent) {\n        event.stopPropagation();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveClick(event: MouseEvent | TouchEvent) {\n        this.onRemove.emit({\n            originalEvent: event,\n            owner: this\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveTouchMove() {\n        // We don't remove chip if user starting touch interacting on the remove button moves the chip\n        this._movedWhileRemoving = true;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onRemoveTouchEnd(event: TouchEvent) {\n        if (!this._movedWhileRemoving) {\n            this.onRemoveClick(event);\n        }\n        this._movedWhileRemoving = false;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    // -----------------------------\n    // Start chip igxDrag behavior\n    public onChipDragStart(event: IDragStartEventArgs) {\n        this.onMoveStart.emit({\n            originalEvent: event,\n            owner: this\n        });\n        event.cancel = !this.draggable || this.disabled;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipDragEnd() {\n        if (this.animateOnRelease) {\n            this.dragDirective.transitionToOrigin();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipMoveEnd(event: IDragBaseEventArgs) {\n        // moveEnd is triggered after return animation has finished. This happen when we drag and release the chip.\n        this.onMoveEnd.emit({\n            originalEvent: event,\n            owner: this\n        });\n\n        if (this.selected) {\n            this.chipArea.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipGhostCreate() {\n        this.hideBaseElement = this.hideBaseOnDrag;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipGhostDestroy() {\n        this.hideBaseElement = false;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipDragClicked(event: IDragBaseEventArgs) {\n        const clickEventArgs: IChipClickEventArgs = {\n            originalEvent: event,\n            owner: this,\n            cancel: false\n        };\n        this.onClick.emit(clickEventArgs);\n\n        if (!clickEventArgs.cancel && this.selectable && !this.disabled) {\n            this.changeSelection(!this.selected, event);\n        }\n    }\n    // End chip igxDrag behavior\n\n    /**\n     * @hidden\n     * @internal\n     */\n    // -----------------------------\n    // Start chip igxDrop behavior\n    public onChipDragEnterHandler(event: IDropBaseEventArgs) {\n        if (this.dragDirective === event.drag || !event.drag.data || !event.drag.data.chip) {\n            return;\n        }\n\n        const eventArgs: IChipEnterDragAreaEventArgs = {\n            owner: this,\n            dragChip: event.drag.data.chip,\n            originalEvent: event\n        };\n        this.onDragEnter.emit(eventArgs);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public onChipDrop(event: IDropDroppedEventArgs) {\n        // Cancel the default drop logic\n        event.cancel = true;\n    }\n    // End chip igxDrop behavior\n}\n","import {\n    Component,\n    ContentChildren,\n    ChangeDetectorRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    IterableDiffer,\n    IterableDiffers,\n    Output,\n    QueryList,\n    DoCheck,\n    AfterViewInit,\n    OnDestroy,\n    ElementRef\n} from '@angular/core';\nimport {\n    IgxChipComponent,\n    IChipSelectEventArgs,\n    IChipKeyDownEventArgs,\n    IChipEnterDragAreaEventArgs,\n    IBaseChipEventArgs\n} from './chip.component';\nimport { IDropBaseEventArgs, IDragBaseEventArgs } from '../directives/drag-drop/drag-drop.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\nexport interface IBaseChipsAreaEventArgs {\n    originalEvent: IDragBaseEventArgs | IDropBaseEventArgs | KeyboardEvent | MouseEvent | TouchEvent;\n    owner: IgxChipsAreaComponent;\n}\n\nexport interface IChipsAreaReorderEventArgs extends IBaseChipsAreaEventArgs {\n    chipsArray: IgxChipComponent[];\n}\n\nexport interface IChipsAreaSelectEventArgs extends IBaseChipsAreaEventArgs {\n    newSelection: IgxChipComponent[];\n}\n\n/**\n * The chip area allows you to perform more complex scenarios with chips that require interaction,\n * like dragging, selection, navigation, etc.\n *\n * @igxModule IgxChipsModule\n *\n * @igxTheme igx-chip-theme\n *\n * @igxKeywords chip area, chip\n *\n * @igxGroup display\n *\n * @example\n * ```html\n * <igx-chips-area>\n *    <igx-chip *ngFor=\"let chip of chipList\" [id]=\"chip.id\">\n *        <span>{{chip.text}}</span>\n *    </igx-chip>\n * </igx-chips-area>\n * ```\n */\n@Component({\n    selector: 'igx-chips-area',\n    templateUrl: 'chips-area.component.html',\n})\nexport class IgxChipsAreaComponent implements DoCheck, AfterViewInit, OnDestroy {\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.class')\n    get hostClass() {\n        const classes = ['igx-chip-area'];\n        classes.push(this.class);\n\n        return classes.join(' ');\n    }\n\n    /**\n     * An @Input property that sets the width of the `IgxChipsAreaComponent`.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onReorder)=\"chipsOrderChanged($event)\"></igx-chips-area>\n     * ```\n     */\n    @HostBinding('style.width.px')\n    @Input()\n    public width: number;\n\n    /**\n     * An @Input property that sets the height of the `IgxChipsAreaComponent`.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onReorder)=\"chipsOrderChanged($event)\"></igx-chips-area>\n     * ```\n     */\n    @HostBinding('style.height.px')\n    @Input()\n    public height: number;\n\n    /**\n     * Emits an event when `IgxChipComponent`s in the `IgxChipsAreaComponent` should be reordered.\n     * Returns an array of `IgxChipComponent`s.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onReorder)=\"changedOrder($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onReorder = new EventEmitter<IChipsAreaReorderEventArgs>();\n\n    /**\n     * Emits an event when an `IgxChipComponent` in the `IgxChipsAreaComponent` is selected/deselected.\n     * Fired after the chips area is initialized if there are initially selected chips as well.\n     * Returns an array of selected `IgxChipComponent`s and the `IgxChipAreaComponent`.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onSelection)=\"selection($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<IChipsAreaSelectEventArgs>();\n\n    /**\n     * Emits an event when an `IgxChipComponent` in the `IgxChipsAreaComponent` is moved.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onMoveStart)=\"moveStart($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onMoveStart = new EventEmitter<IBaseChipsAreaEventArgs>();\n\n    /**\n     * Emits an event after an `IgxChipComponent` in the `IgxChipsAreaComponent` is moved.\n     * @example\n     * ```html\n     * <igx-chips-area #chipsArea [width]=\"'300'\" [height]=\"'10'\" (onMoveEnd)=\"moveEnd($event)\"></igx-chips-area>\n     * ```\n     */\n    @Output()\n    public onMoveEnd = new EventEmitter<IBaseChipsAreaEventArgs>();\n\n    /**\n     * Holds the `IgxChipComponent` in the `IgxChipsAreaComponent`.\n     * @example\n     * ```typescript\n     * ngAfterViewInit(){\n     *    let chips = this.chipsArea.chipsList;\n     * }\n     * ```\n     */\n    @ContentChildren(IgxChipComponent, { descendants: true })\n    public chipsList: QueryList<IgxChipComponent>;\n\n    private modifiedChipsArray: IgxChipComponent[];\n    private _differ: IterableDiffer<IgxChipComponent> | null = null;\n    protected destroy$ = new Subject<boolean>();\n\n    constructor(public cdr: ChangeDetectorRef, public element: ElementRef,\n        private _iterableDiffers: IterableDiffers) {\n        this._differ = this._iterableDiffers.find([]).create(null);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngAfterViewInit() {\n        // If we have initially selected chips through their inputs, we need to get them, because we cannot listen to their events yet.\n        if (this.chipsList.length) {\n            const selectedChips = this.chipsList.filter((item: IgxChipComponent) => item.selected);\n            if (selectedChips.length) {\n                this.onSelection.emit({\n                    originalEvent: null,\n                    newSelection: selectedChips,\n                    owner: this\n                });\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngDoCheck(): void {\n        if (this.chipsList) {\n            const changes = this._differ.diff(this.chipsList.toArray());\n            if (changes) {\n                changes.forEachAddedItem((addedChip) => {\n                    addedChip.item.onMoveStart.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipMoveStart(args);\n                    });\n                    addedChip.item.onMoveEnd.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipMoveEnd(args);\n                    });\n                    addedChip.item.onDragEnter.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipDragEnter(args);\n                    });\n                    addedChip.item.onKeyDown.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                        this.onChipKeyDown(args);\n                    });\n                    if (addedChip.item.selectable) {\n                        addedChip.item.onSelection.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n                            this.onChipSelectionChange(args);\n                        });\n                    }\n                });\n                this.modifiedChipsArray = this.chipsList.toArray();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipKeyDown(event: IChipKeyDownEventArgs) {\n        let orderChanged = false;\n        const chipsArray = this.chipsList.toArray();\n        const dragChipIndex = chipsArray.findIndex((el) => el === event.owner);\n        if (event.originalEvent.shiftKey === true) {\n            if (event.originalEvent.key === 'ArrowLeft' || event.originalEvent.key === 'Left') {\n                orderChanged = this.positionChipAtIndex(dragChipIndex, dragChipIndex - 1, false, event.originalEvent);\n                if (orderChanged) {\n                    setTimeout(() => {\n                        this.chipsList.toArray()[dragChipIndex - 1].elementRef.nativeElement.focus();\n                    });\n                }\n            } else if (event.originalEvent.key === 'ArrowRight' || event.originalEvent.key === 'Right') {\n                orderChanged = this.positionChipAtIndex(dragChipIndex, dragChipIndex + 1, true, event.originalEvent);\n            }\n        } else {\n            if ((event.originalEvent.key === 'ArrowLeft' || event.originalEvent.key === 'Left') && dragChipIndex > 0) {\n                chipsArray[dragChipIndex - 1].elementRef.nativeElement.focus();\n            } else if ((event.originalEvent.key === 'ArrowRight' || event.originalEvent.key === 'Right') &&\n                dragChipIndex < chipsArray.length - 1) {\n                chipsArray[dragChipIndex + 1].elementRef.nativeElement.focus();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipMoveStart(event: IBaseChipEventArgs) {\n        this.onMoveStart.emit({\n            originalEvent: event.originalEvent,\n            owner: this\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipMoveEnd(event: IBaseChipEventArgs) {\n        this.onMoveEnd.emit({\n            originalEvent: event.originalEvent,\n            owner: this\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipDragEnter(event: IChipEnterDragAreaEventArgs) {\n        const dropChipIndex = this.chipsList.toArray().findIndex((el) => el === event.owner);\n        const dragChipIndex = this.chipsList.toArray().findIndex((el) => el === event.dragChip);\n        if (dragChipIndex < dropChipIndex) {\n            // from the left to right\n            this.positionChipAtIndex(dragChipIndex, dropChipIndex, true, event.originalEvent);\n        } else {\n            // from the right to left\n            this.positionChipAtIndex(dragChipIndex, dropChipIndex, false, event.originalEvent);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected positionChipAtIndex(chipIndex, targetIndex, shiftRestLeft, originalEvent) {\n        if (chipIndex < 0 || this.chipsList.length <= chipIndex ||\n            targetIndex < 0 || this.chipsList.length <= targetIndex) {\n            return false;\n        }\n\n        const chipsArray = this.chipsList.toArray();\n        const result: IgxChipComponent[] = [];\n        for (let i = 0; i < chipsArray.length; i++) {\n            if (shiftRestLeft) {\n                if (chipIndex <= i && i < targetIndex) {\n                    result.push(chipsArray[i + 1]);\n                } else if (i === targetIndex) {\n                    result.push(chipsArray[chipIndex]);\n                } else {\n                    result.push(chipsArray[i]);\n                }\n            } else {\n                if (targetIndex < i && i <= chipIndex) {\n                    result.push(chipsArray[i - 1]);\n                } else if (i === targetIndex) {\n                    result.push(chipsArray[chipIndex]);\n                } else {\n                    result.push(chipsArray[i]);\n                }\n            }\n        }\n        this.modifiedChipsArray = result;\n\n        const eventData: IChipsAreaReorderEventArgs = {\n            chipsArray: this.modifiedChipsArray,\n            originalEvent: originalEvent,\n            owner: this\n        };\n        this.onReorder.emit(eventData);\n        return true;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected onChipSelectionChange(event: IChipSelectEventArgs) {\n        let selectedChips = this.chipsList.filter((chip) => chip.selected);\n        if (event.selected && !selectedChips.includes(event.owner)) {\n            selectedChips.push(event.owner);\n        } else if (!event.selected && selectedChips.includes(event.owner)) {\n            selectedChips = selectedChips.filter((chip) => {\n                return chip.id !== event.owner.id;\n            });\n        }\n        this.onSelection.emit({\n            originalEvent: event.originalEvent,\n            newSelection: selectedChips,\n            owner: this\n        });\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxAvatarModule } from '../avatar/avatar.component';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxChipComponent } from './chip.component';\nimport { IgxChipsAreaComponent } from './chips-area.component';\nimport { IgxDragDropModule } from '../directives/drag-drop/drag-drop.directive';\nimport { IgxPrefixModule, IgxPrefixDirective} from '../directives/prefix/prefix.directive';\nimport { IgxSuffixModule, IgxSuffixDirective } from '../directives/suffix/suffix.directive';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxChipsAreaComponent,\n    IgxChipComponent\n  ],\n  exports: [\n    IgxChipsAreaComponent,\n    IgxChipComponent,\n    IgxPrefixDirective,\n    IgxSuffixDirective\n  ],\n  imports: [\n    CommonModule,\n    IgxRippleModule,\n    IgxIconModule,\n    IgxButtonModule,\n    IgxAvatarModule,\n    IgxDragDropModule,\n    IgxPrefixModule,\n    IgxSuffixModule\n  ]\n})\nexport class IgxChipsModule { }\n","import { Directive } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboHeader]'\n})\nexport class IgxComboHeaderDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboFooter]'\n})\nexport class IgxComboFooterDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboItem]'\n})\nexport class IgxComboItemDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboEmpty]'\n})\nexport class IgxComboEmptyDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboHeaderItem]'\n})\n\nexport class IgxComboHeaderItemDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboAddItem]'\n})\nexport class IgxComboAddItemDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboToggleIcon]'\n})\nexport class IgxComboToggleIconDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxComboClearIcon]'\n})\nexport class IgxComboClearIconDirective {\n}\n\n","import { IgxComboBase } from './combo.common';\nimport { Injectable } from '@angular/core';\n\n/**\n * @hidden\n */\n@Injectable()\nexport class IgxComboAPIService {\n    protected combo: IgxComboBase;\n\n    public disableTransitions = false;\n\n    public register(combo: IgxComboBase) {\n        this.combo = combo;\n    }\n\n\n    public clear(): void {\n        this.combo = null;\n    }\n\n    public get valueKey() {\n        return this.combo.valueKey !== null && this.combo.valueKey !== undefined ? this.combo.valueKey : null;\n    }\n\n    public get item_focusable(): boolean {\n        return false;\n    }\n    public get isRemote(): boolean {\n        return this.combo.isRemote;\n    }\n\n    public add_custom_item(): void {\n        if (!this.combo) {\n            return;\n        }\n        this.combo.addItemToCollection();\n    }\n\n    public get comboID(): string {\n        return this.combo.id;\n    }\n\n    public set_selected_item(itemID: any, event?: Event): void {\n        const selected = this.combo.isItemSelected(itemID);\n        if (itemID === null || itemID === undefined) {\n            return;\n        }\n        if (!selected) {\n            this.combo.selectItems([itemID], false, event);\n        } else {\n            this.combo.deselectItems([itemID], event);\n        }\n    }\n\n    public is_item_selected(itemID: any): boolean {\n        return this.combo.isItemSelected(itemID);\n    }\n}\n","import {\n    Component,\n    ElementRef,\n    HostBinding,\n    Inject,\n    Input,\n    DoCheck\n} from '@angular/core';\nimport { IgxDropDownItemComponent } from '../drop-down/drop-down-item.component';\nimport { IGX_DROPDOWN_BASE, IDropDownBase, Navigate } from '../drop-down/drop-down.common';\nimport { IgxComboAPIService } from './combo.api';\nimport { IgxSelectionAPIService } from '../core/selection';\n\n/** @hidden */\n@Component({\n    selector: 'igx-combo-item',\n    templateUrl: 'combo-item.component.html'\n})\nexport class IgxComboItemComponent extends IgxDropDownItemComponent implements DoCheck {\n\n    /**\n     * Gets the height of a list item\n     * @hidden\n     */\n    @Input()\n    @HostBinding('style.height.px')\n    public itemHeight = '';\n\n    /**\n     * @hidden\n     */\n    public get itemID() {\n        const valueKey = this.comboAPI.valueKey;\n        return valueKey !== null ? this.value[valueKey] : this.value;\n    }\n\n    /**\n     * @hidden\n     */\n    public get comboID() {\n        return this.comboAPI.comboID;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get disableTransitions() {\n        return this.comboAPI.disableTransitions;\n    }\n\n    constructor(\n        protected comboAPI: IgxComboAPIService,\n        @Inject(IGX_DROPDOWN_BASE) protected dropDown: IDropDownBase,\n        protected elementRef: ElementRef,\n        @Inject(IgxSelectionAPIService) protected selection: IgxSelectionAPIService\n    ) {\n        super(dropDown, elementRef, null, selection);\n    }\n\n    /**\n     * @hidden\n     */\n    get selected(): boolean {\n        return this.comboAPI.is_item_selected(this.itemID);\n    }\n\n    set selected(value: boolean) {\n        if (this.isHeader) {\n            return;\n        }\n        this._selected = value;\n    }\n\n    /**\n     * @hidden\n     */\n    isVisible(direction: Navigate): boolean {\n        const rect = this.element.nativeElement.getBoundingClientRect();\n        const parentDiv = this.element.nativeElement.parentElement.parentElement.getBoundingClientRect();\n        if (direction === Navigate.Down) {\n            return rect.y + rect.height <= parentDiv.y + parentDiv.height;\n        }\n        return rect.y >= parentDiv.y;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    clicked(event): void {\n        this.comboAPI.disableTransitions = false;\n        if (!this.isSelectable) { return; }\n        this.dropDown.navigateItem(this.index);\n        this.comboAPI.set_selected_item(this.itemID, event);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     * The event that is prevented is the click on the checkbox label element.\n     * That is the only visible element that a user can interact with.\n     * The click propagates to the host and the preventDefault is to stop it from\n     * switching focus to the input it's base on.\n     * The toggle happens in an internal handler in the drop-down on the next task queue cycle.\n     */\n    disableCheck(event: MouseEvent) {\n        event.preventDefault();\n    }\n\n    ngDoCheck() {\n    }\n}\n","import { ElementRef, EventEmitter, InjectionToken } from '@angular/core';\nimport { CancelableEventArgs, CancelableBrowserEventArgs } from '../core/utils';\n\nexport const IGX_COMBO_COMPONENT = new InjectionToken<IgxComboBase>('IgxComboComponentToken');\n\n/** @hidden @internal TODO: Evaluate */\nexport interface IgxComboBase {\n    id: string;\n    data: any[];\n    valueKey: string;\n    groupKey: string;\n    isRemote: boolean;\n    filteredData: any[];\n    totalItemCount: number;\n    itemsMaxHeight: number;\n    itemHeight: number;\n    searchValue: string;\n    searchInput: ElementRef<HTMLInputElement>;\n    comboInput: ElementRef<HTMLInputElement>;\n    onOpened: EventEmitter<void>;\n    onOpening: EventEmitter<CancelableEventArgs>;\n    onClosing: EventEmitter<CancelableBrowserEventArgs>;\n    onClosed: EventEmitter<void>;\n    focusSearchInput(opening?: boolean): void;\n    triggerCheck(): void;\n    addItemToCollection(): void;\n    isAddButtonVisible(): boolean;\n    handleInputChange(event?: string): void;\n    isItemSelected(itemID: any): boolean;\n    selectItems(itemIDs: any[], clearSelection?: boolean, event?: Event): void;\n    deselectItems(itemIDs: any[], event?: Event): void;\n}\n","import { IgxComboItemComponent } from './combo-item.component';\nimport { Component } from '@angular/core';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-combo-add-item',\n    template: '<ng-content></ng-content>',\n    providers: [{ provide: IgxComboItemComponent, useExisting: IgxComboAddItemComponent}]\n})\nexport class IgxComboAddItemComponent extends IgxComboItemComponent {\n    get selected(): boolean {\n        return false;\n    }\n    set selected(value: boolean) {\n    }\n\n    /**\n     * @inheritdoc\n     */\n    clicked(event?) {\n        this.comboAPI.disableTransitions = false;\n        this.comboAPI.add_custom_item();\n    }\n}\n","import {\n    ChangeDetectorRef, Component, ElementRef, Inject, QueryList, OnDestroy, AfterViewInit, ContentChildren, Optional\n} from '@angular/core';\nimport { IgxComboBase, IGX_COMBO_COMPONENT } from './combo.common';\nimport { IDropDownBase, IGX_DROPDOWN_BASE } from '../drop-down/drop-down.common';\nimport { IgxDropDownComponent } from '../drop-down/drop-down.component';\nimport { DropDownActionKey } from '../drop-down/drop-down.common';\nimport { IgxComboAddItemComponent } from './combo-add-item.component';\nimport { IgxComboAPIService } from './combo.api';\nimport { IgxDropDownItemBaseDirective } from '../drop-down/drop-down-item.base';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { IgxComboItemComponent } from './combo-item.component';\nimport { DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\n\n/** @hidden */\n@Component({\n    selector: 'igx-combo-drop-down',\n    templateUrl: '../drop-down/drop-down.component.html',\n    providers: [{ provide: IGX_DROPDOWN_BASE, useExisting: IgxComboDropDownComponent }]\n})\nexport class IgxComboDropDownComponent extends IgxDropDownComponent implements IDropDownBase, OnDestroy, AfterViewInit {\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        @Inject(IGX_COMBO_COMPONENT) public combo: IgxComboBase,\n        protected comboAPI: IgxComboAPIService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(elementRef, cdr, selection, _displayDensityOptions);\n    }\n\n    /** @hidden @internal */\n   public get scrollContainer(): HTMLElement {\n        return this.virtDir.dc.location.nativeElement;\n    }\n\n    protected get isScrolledToLast(): boolean {\n        const scrollTop = this.virtDir.scrollPosition;\n        const scrollHeight = this.virtDir.getScroll().scrollHeight;\n        return Math.floor(scrollTop + this.virtDir.igxForContainerSize) === scrollHeight;\n    }\n\n    protected get lastVisibleIndex(): number {\n        return this.combo.totalItemCount ?\n            Math.floor(this.combo.itemsMaxHeight / this.combo.itemHeight) :\n            this.items.length - 1;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxComboItemComponent, { descendants: true })\n    public children: QueryList<IgxDropDownItemBaseDirective> = null;\n\n    /**\n     * @hidden @internal\n     */\n    public onFocus() {\n        this.focusedItem = this._focusedItem || this.items[0];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onBlur(evt?) {\n        this.focusedItem = null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onToggleOpened() {\n        this.onOpened.emit();\n    }\n\n    /**\n     * @hidden\n     */\n    public navigateFirst() {\n        this.navigateItem(this.virtDir.igxForOf.findIndex(e => !e.isHeader));\n    }\n\n    /**\n     * @hidden\n     */\n    public navigatePrev() {\n        if (this._focusedItem && this._focusedItem.index === 0 && this.virtDir.state.startIndex === 0) {\n            this.combo.focusSearchInput(false);\n        } else {\n            super.navigatePrev();\n        }\n    }\n\n\n    /**\n     * @hidden\n     */\n    public navigateNext() {\n        const lastIndex = this.combo.totalItemCount ? this.combo.totalItemCount - 1 : this.virtDir.igxForOf.length - 1;\n        if (this._focusedItem && this._focusedItem.index === lastIndex) {\n            this.focusAddItemButton();\n        } else {\n            super.navigateNext();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectItem(item: IgxDropDownItemBaseDirective) {\n        if (item === null || item === undefined) {\n            return;\n        }\n        this.comboAPI.set_selected_item(item.itemID);\n        this._focusedItem = item;\n    }\n\n    private focusAddItemButton() {\n        if (this.combo.isAddButtonVisible()) {\n            this.focusedItem = this.items[this.items.length - 1];\n        }\n    }\n\n    protected scrollToHiddenItem(newItem: any): void { }\n\n    protected scrollHandler = () => {\n        this.comboAPI.disableTransitions = true;\n    }\n\n    protected get sortedChildren(): IgxDropDownItemBaseDirective[] {\n        if (this.children !== undefined) {\n            return this.children.toArray()\n                .sort((a: IgxDropDownItemBaseDirective, b: IgxDropDownItemBaseDirective) => {\n                    return a.index - b.index;\n                });\n        }\n        return null;\n    }\n\n    /**\n     * Get all non-header items\n     *\n     * ```typescript\n     * let myDropDownItems = this.dropdown.items;\n     * ```\n     */\n    public get items(): IgxComboItemComponent[] {\n        const items: IgxComboItemComponent[] = [];\n        if (this.children !== undefined) {\n            const sortedChildren = this.sortedChildren as IgxComboItemComponent[];\n            for (const child of sortedChildren) {\n                if (!child.isHeader) {\n                    items.push(child);\n                }\n            }\n        }\n\n        return items;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public updateScrollPosition() {\n        this.virtDir.getScroll().scrollTop = this._scrollPosition;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onItemActionKey(key: DropDownActionKey) {\n        switch (key) {\n            case DropDownActionKey.ENTER:\n                this.handleEnter();\n                break;\n            case DropDownActionKey.SPACE:\n                this.handleSpace();\n                break;\n            case DropDownActionKey.ESCAPE:\n                this.close();\n        }\n    }\n\n    private handleEnter() {\n        if (this.isAddItemFocused()) {\n            this.combo.addItemToCollection();\n        } else {\n            this.close();\n        }\n    }\n\n    private handleSpace() {\n        if (this.isAddItemFocused()) {\n            return;\n        } else {\n            this.selectItem(this.focusedItem);\n        }\n    }\n\n    private isAddItemFocused(): boolean {\n        return this.focusedItem instanceof IgxComboAddItemComponent;\n    }\n\n    public ngAfterViewInit() {\n        this.virtDir.getScroll().addEventListener('scroll', this.scrollHandler);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy(): void {\n        this.virtDir.getScroll().removeEventListener('scroll', this.scrollHandler);\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n}\n","import { Inject, Pipe, PipeTransform} from '@angular/core';\nimport { cloneArray } from '../core/utils';\nimport { DataUtil } from '../data-operations/data-util';\nimport { SortingDirection } from '../data-operations/sorting-expression.interface';\nimport { IGX_COMBO_COMPONENT, IgxComboBase } from './combo.common';\nimport { DefaultSortingStrategy } from '../data-operations/sorting-strategy';\nimport { IComboFilteringOptions } from './combo.component';\n\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'comboFiltering'\n})\nexport class IgxComboFilteringPipe implements PipeTransform {\n    public transform(collection: any[], searchValue: any, displayKey: any,\n                    shouldFilter: boolean, filteringOptions: IComboFilteringOptions) {\n        if (!collection) {\n            return [];\n        }\n        if (!searchValue || !shouldFilter) {\n            return collection;\n        } else {\n            const searchTerm = filteringOptions.caseSensitive ? searchValue.trim() : searchValue.toLowerCase().trim();\n            if (displayKey != null) {\n                return collection.filter(e => filteringOptions.caseSensitive ? e[displayKey].includes(searchTerm) :\n                                         e[displayKey].toLowerCase().includes(searchTerm));\n            } else {\n                return collection.filter(e => filteringOptions.caseSensitive ? e.includes(searchTerm) :\n                                         e.toLowerCase().includes(searchTerm));\n            }\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'comboGrouping'\n})\nexport class IgxComboGroupingPipe implements PipeTransform {\n\n    constructor(@Inject(IGX_COMBO_COMPONENT) public combo: IgxComboBase) { }\n\n    public transform(collection: any[], groupKey: any, valueKey: any) {\n        this.combo.filteredData = collection;\n        if ((!groupKey && groupKey !== 0) || !collection.length) {\n            return collection;\n        }\n        const sorted = DataUtil.sort(cloneArray(collection), [{\n            fieldName: groupKey,\n            dir: SortingDirection.Asc,\n            ignoreCase: true,\n            strategy: DefaultSortingStrategy.instance()\n        }]);\n        const data = cloneArray(sorted);\n        let inserts = 0;\n        let currentHeader = null;\n        for (let i = 0; i < sorted.length; i++) {\n            let insertFlag = 0;\n            if (currentHeader !== sorted[i][groupKey]) {\n                currentHeader = sorted[i][groupKey];\n                insertFlag = 1;\n            }\n            if (insertFlag) {\n                data.splice(i + inserts, 0, {\n                    [valueKey]: currentHeader,\n                    [groupKey]: currentHeader,\n                    isHeader: true\n                });\n                inserts++;\n            }\n        }\n        return data;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit, ChangeDetectorRef, Component, ContentChild, ElementRef, EventEmitter, HostBinding, HostListener,\n    Input, NgModule, OnInit, OnDestroy, Output, TemplateRef, ViewChild, Optional, Inject, Injector, Type\n} from '@angular/core';\nimport {\n    IgxComboItemDirective,\n    IgxComboEmptyDirective,\n    IgxComboHeaderItemDirective,\n    IgxComboHeaderDirective,\n    IgxComboFooterDirective,\n    IgxComboAddItemDirective,\n    IgxComboToggleIconDirective,\n    IgxComboClearIconDirective\n} from './combo.directives';\nimport { FormsModule, ReactiveFormsModule, ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl } from '@angular/forms';\nimport { IgxCheckboxModule } from '../checkbox/checkbox.component';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { cloneArray, IBaseEventArgs, IBaseCancelableBrowserEventArgs, IBaseCancelableEventArgs } from '../core/utils';\nimport { IgxStringFilteringOperand, IgxBooleanFilteringOperand } from '../data-operations/filtering-condition';\nimport { FilteringLogic } from '../data-operations/filtering-expression.interface';\nimport { IgxForOfModule, IForOfState, IgxForOfDirective } from '../directives/for-of/for_of.directive';\nimport { IgxIconModule, IgxIconService } from '../icon/public_api';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxToggleModule } from '../directives/toggle/toggle.directive';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxDropDownModule } from '../drop-down/public_api';\nimport { IgxInputGroupModule, IgxInputGroupComponent } from '../input-group/input-group.component';\nimport { IgxComboItemComponent } from './combo-item.component';\nimport { IgxComboDropDownComponent } from './combo-dropdown.component';\nimport { IgxComboFilteringPipe, IgxComboGroupingPipe } from './combo.pipes';\nimport { OverlaySettings, AbsoluteScrollStrategy, AutoPositionStrategy } from '../services/public_api';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { IGX_COMBO_COMPONENT, IgxComboBase } from './combo.common';\nimport { IgxComboAddItemComponent } from './combo-add-item.component';\nimport { IgxComboAPIService } from './combo.api';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxInputState, IgxInputDirective } from '../directives/input/input.directive';\nimport { IgxInputGroupType, IGX_INPUT_GROUP_TYPE } from '../input-group/public_api';\nimport { caseSensitive } from '@igniteui/material-icons-extended';\n\n/**\n * @hidden\n */\nenum DataTypes {\n    EMPTY = 'empty',\n    PRIMITIVE = 'primitive',\n    COMPLEX = 'complex',\n    PRIMARYKEY = 'valueKey'\n}\n\n/**\n * @hidden\n */\nconst ItemHeights = {\n    'comfortable': 40,\n    'cosy': 32,\n    'compact': 28,\n};\n\n/**\n * @hidden\n * The default number of items that should be in the combo's\n * drop-down list if no `[itemsMaxHeight]` is specified\n */\nconst itemsInContainer = 10;\n\nexport enum IgxComboState {\n    /**\n     * Combo with initial state.\n     */\n    INITIAL = IgxInputState.INITIAL,\n    /**\n     * Combo with valid state.\n     */\n    VALID = IgxInputState.VALID,\n    /**\n     * Combo with invalid state.\n     */\n    INVALID = IgxInputState.INVALID\n}\n\n/** The filtering criteria to be applied on data search */\nexport interface IComboFilteringOptions {\n    /** Defines filtering case-sensitivity */\n    caseSensitive: boolean;\n}\n\n/** Event emitted when an igx-combo's selection is changing */\nexport interface IComboSelectionChangeEventArgs extends IBaseCancelableEventArgs {\n    /** An array containing the values that are currently selected */\n    oldSelection: any[];\n    /** An array containing the values that will be selected after this event */\n    newSelection: any[];\n    /** An array containing the values that will be added to the selection (if any) */\n    added: any[];\n    /** An array containing the values that will be removed from the selection (if any) */\n    removed: any[];\n    /** The text that will be displayed in the combo text box */\n    displayText: string;\n    /** The user interaction that triggered the selection change */\n    event?: Event;\n}\n\n/** Event emitted when the igx-combo's search input changes */\nexport interface IComboSearchInputEventArgs extends IBaseCancelableEventArgs {\n    /** The text that has been typed into the search input */\n    searchText: string;\n}\n\nexport interface IComboItemAdditionEvent extends IBaseEventArgs {\n    oldCollection: any[];\n    addedItem: any;\n    newCollection: any[];\n}\n\n/**\n * When called with sets A & B, returns A - B (as array);\n * @hidden\n */\nfunction diffInSets(set1: Set<any>, set2: Set<any>): any[] {\n    const results = [];\n    set1.forEach(entry => {\n        if (!set2.has(entry)) {\n            results.push(entry);\n        }\n    });\n    return results;\n}\n\nlet NEXT_ID = 0;\nconst noop = () => { };\n\n@Component({\n    selector: 'igx-combo',\n    templateUrl: 'combo.component.html',\n    providers: [\n        IgxComboAPIService,\n        { provide: IGX_COMBO_COMPONENT, useExisting: IgxComboComponent },\n        { provide: NG_VALUE_ACCESSOR, useExisting: IgxComboComponent, multi: true }\n    ]\n})\nexport class IgxComboComponent extends DisplayDensityBase implements IgxComboBase, AfterViewInit, ControlValueAccessor, OnInit,\n    OnDestroy, EditorProvider {\n    /**\n     * @hidden @internal\n     */\n    public customValueFlag = true;\n    /**\n     * @hidden @internal\n     */\n    public defaultFallbackGroup = 'Other';\n    /**\n     * @hidden @internal\n     */\n    public filteringOptions: IComboFilteringOptions = {\n        caseSensitive: false\n    };\n    /** @hidden @internal */\n    public filterValue = '';\n    protected stringFilters = IgxStringFilteringOperand;\n    protected booleanFilters = IgxBooleanFilteringOperand;\n    protected _groupKey = '';\n    protected _displayKey: string;\n    protected _prevInputValue = '';\n    private _dataType = '';\n    private _searchValue = '';\n    private _type = null;\n    private ngControl: NgControl = null;\n    private destroy$ = new Subject<any>();\n    private _data = [];\n    private _filteredData = [];\n    private _itemHeight = null;\n    private _itemsMaxHeight = null;\n    private _remoteSelection = {};\n    private _onChangeCallback: (_: any) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n    private _overlaySettings: OverlaySettings;\n    private _value = '';\n    private _valid = IgxComboState.INITIAL;\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        protected comboAPI: IgxComboAPIService,\n        private _iconService: IgxIconService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        @Optional() @Inject(IGX_INPUT_GROUP_TYPE) private _inputGroupType: IgxInputGroupType,\n        @Optional() private _injector: Injector) {\n        super(_displayDensityOptions);\n        this.comboAPI.register(this);\n    }\n\n    @ViewChild(IgxForOfDirective, { read: IgxForOfDirective, static: true })\n    protected virtDir: IgxForOfDirective<any>;\n\n    /**\n     * Set custom overlay settings that control how the combo's list of items is displayed.\n     * Set:\n     * ```html\n     * <igx-combo [overlaySettings] = \"customOverlaySettings\"></igx-combo>\n     * ```\n     *\n     * ```typescript\n     *  const customSettings = { positionStrategy: { settings: { target: myTarget } } };\n     *  combo.overlaySettings = customSettings;\n     * ```\n     * Get any custom overlay settings used by the combo:\n     * ```typescript\n     *  const comboOverlaySettings: OverlaySettings = myCombo.overlaySettings;\n     * ```\n     */\n\n    @Input()\n    public overlaySettings: OverlaySettings = null;\n\n    /** @hidden @internal */\n    @ViewChild('inputGroup', { read: IgxInputGroupComponent, static: true }) public inputGroup: IgxInputGroupComponent;\n\n    /** @hidden @internal */\n    @ViewChild('comboInput', { read: IgxInputDirective, static: true }) public comboInput: IgxInputDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxComboDropDownComponent, { read: IgxComboDropDownComponent, static: true })\n    public dropdown: IgxComboDropDownComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('searchInput')\n    public searchInput: ElementRef<HTMLInputElement> = null;\n\n    /**\n     * @hidden @internal\n     */\n    get displaySearchInput(): boolean {\n        return this.filterable || this.allowCustomValues;\n    }\n\n    /**\n     * The custom template, if any, that should be used when rendering ITEMS in the combo list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.itemTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboItem>\n     *          <div class=\"custom-item\" let-item let-key=\"valueKey\">\n     *              <div class=\"custom-item__name\">{{ item[key] }}</div>\n     *              <div class=\"custom-item__cost\">{{ item.cost }}</div>\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboItemDirective, { read: TemplateRef })\n    public itemTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the HEADER for the combo items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.headerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboHeader>\n     *          <div class=\"combo__header\">\n     *              This is a custom header\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboHeaderDirective, { read: TemplateRef })\n    public headerTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the FOOTER for the combo items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.footerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboFooter>\n     *          <div class=\"combo__footer\">\n     *              This is a custom footer\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboFooterDirective, { read: TemplateRef })\n    public footerTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering HEADER ITEMS for groups in the combo list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.headerItemTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboHeaderItem let-item let-key=\"groupKey\">\n     *          <div class=\"custom-item--group\">Group header for {{ item[key] }}</div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboHeaderItemDirective, { read: TemplateRef })\n    public headerItemTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the ADD BUTTON in the combo drop down\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.addItemTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboAddItem>\n     *          <button class=\"combo__add-button\">\n     *              Click to add item\n     *          </button>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboAddItemDirective, { read: TemplateRef })\n    public addItemTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the ADD BUTTON in the combo drop down\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.emptyTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboEmpty>\n     *          <div class=\"combo--empty\">\n     *              There are no items to display\n     *          </div>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboEmptyDirective, { read: TemplateRef })\n    public emptyTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the combo TOGGLE(open/close) button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.toggleIconTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboToggleIcon let-collapsed>\n     *          <igx-icon>{{ collapsed ? 'remove_circle' : 'remove_circle_outline'}}</igx-icon>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboToggleIconDirective, { read: TemplateRef })\n    public toggleIconTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the combo CLEAR button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.combo.clearIconTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-combo #combo>\n     *      ...\n     *      <ng-template igxComboClearIcon>\n     *          <igx-icon>clear</igx-icon>\n     *      </ng-template>\n     *  </igx-combo>\n     * ```\n     */\n    @ContentChild(IgxComboClearIconDirective, { read: TemplateRef })\n    public clearIconTemplate: TemplateRef<any> = null;\n\n    @ViewChild('primitive', { read: TemplateRef, static: true })\n    protected primitiveTemplate: TemplateRef<any>;\n\n    @ViewChild('complex', { read: TemplateRef, static: true })\n    protected complexTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxForOfDirective, { static: true })\n    public virtualScrollContainer: IgxForOfDirective<any>;\n\n    @ViewChild('dropdownItemContainer', { static: true })\n    protected dropdownContainer: ElementRef = null;\n\n    /**\n     * Emitted when item selection is changing, before the selection completes\n     *\n     * ```html\n     * <igx-combo (onSelectionChange)='handleSelection()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onSelectionChange = new EventEmitter<IComboSelectionChangeEventArgs>();\n\n    /**\n     * Emitted before the dropdown is opened\n     *\n     * ```html\n     * <igx-combo onOpening='handleOpening($event)'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted after the dropdown is opened\n     *\n     * ```html\n     * <igx-combo (onOpened)='handleOpened()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<void>();\n\n    /**\n     * Emitted before the dropdown is closed\n     *\n     * ```html\n     * <igx-combo (onClosing)='handleClosing($event)'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted after the dropdown is closed\n     *\n     * ```html\n     * <igx-combo (onClosed)='handleClosed()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<void>();\n\n    /**\n     * Emitted when an item is being added to the data collection\n     *\n     * ```html\n     * <igx-combo (onAddition)='handleAdditionEvent()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onAddition = new EventEmitter<IComboItemAdditionEvent>();\n\n    /**\n     * Emitted when the value of the search input changes (e.g. typing, pasting, clear, etc.)\n     *\n     * ```html\n     * <igx-combo (onSearchInput)='handleSearchInputEvent()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onSearchInput = new EventEmitter<IComboSearchInputEventArgs>();\n\n    /**\n     * Emitted when new chunk of data is loaded from the virtualization\n     *\n     * ```html\n     * <igx-combo (onDataPreLoad)='handleDataPreloadEvent()'></igx-combo>\n     * ```\n     */\n    @Output()\n    public onDataPreLoad = new EventEmitter<IForOfState>();\n\n    /**\n     * Gets/gets combo id.\n     *\n     * ```typescript\n     * // get\n     * let id = this.combo.id;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [id]='combo1'></igx-combo>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-combo-${NEXT_ID++}`;\n\n    /**\n     * Sets the style width of the element\n     *\n     * ```typescript\n     * // get\n     * let myComboWidth = this.combo.width;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [width]='250px'></igx-combo>\n     * ```\n     */\n    @HostBinding('style.width')\n    @Input()\n    public width: string;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-combo')\n    public cssClass = 'igx-combo'; // Independent of display density, at the time being\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding(`attr.role`)\n    public role = 'combobox';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-expanded')\n    public get ariaExpanded(): boolean {\n        return !this.dropdown.collapsed;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-haspopup')\n    public get hasPopUp() {\n        return 'listbox';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-owns')\n    public get ariaOwns() {\n        return this.dropdown.id;\n    }\n\n    /**\n     * Controls whether custom values can be added to the collection\n     *\n     * ```typescript\n     * // get\n     * let comboAllowsCustomValues = this.combo.allowCustomValues;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [allowCustomValues]='true'></igx-combo>\n     * ```\n     */\n    @Input()\n    public allowCustomValues = false;\n\n    /**\n     * Configures the drop down list height\n     *\n     * ```typescript\n     * // get\n     * let myComboItemsMaxHeight = this.combo.itemsMaxHeight;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [itemsMaxHeight]='320'></igx-combo>\n     * ```\n     */\n    @Input()\n    public get itemsMaxHeight(): number {\n        if (this._itemsMaxHeight === null || this._itemsMaxHeight === undefined) {\n            return this.itemHeight * itemsInContainer;\n        }\n        return this._itemsMaxHeight;\n    }\n\n    public set itemsMaxHeight(val: number) {\n        this._itemsMaxHeight = val;\n    }\n\n    /**\n     * Configures the drop down list width\n     *\n     * ```typescript\n     * // get\n     * let myComboItemsWidth = this.combo.itemsWidth;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [itemsWidth] = '\"180px\"'></igx-combo>\n     * ```\n     */\n    @Input()\n    public itemsWidth: string;\n\n    /**\n     * Configures the drop down list item height\n     *\n     * ```typescript\n     * // get\n     * let myComboItemHeight = this.combo.itemHeight;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [itemHeight]='32'></igx-combo>\n     * ```\n     */\n    @Input()\n    public get itemHeight(): number {\n        if (this._itemHeight === null || this._itemHeight === undefined) {\n            return ItemHeights[this.displayDensity];\n        }\n        return this._itemHeight;\n    }\n\n    public set itemHeight(val: number) {\n        this._itemHeight = val;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public filteringLogic = FilteringLogic.Or;\n\n    /**\n     * Defines the placeholder value for the combo value field\n     *\n     * ```typescript\n     * // get\n     * let myComboPlaceholder = this.combo.placeholder;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [placeholder]='newPlaceHolder'></igx-combo>\n     * ```\n     */\n    @Input()\n    public placeholder;\n\n    /**\n     * @hidden @internal\n     */\n    public get inputEmpty(): boolean {\n        return !this.value && !this.placeholder;\n    }\n\n    /**\n     * Defines the placeholder value for the combo dropdown search field\n     *\n     * ```typescript\n     * // get\n     * let myComboSearchPlaceholder = this.combo.searchPlaceholder;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [searchPlaceholder]='newPlaceHolder'></igx-combo>\n     * ```\n     */\n    @Input()\n    public searchPlaceholder = 'Enter a Search Term';\n\n    /**\n     * Defines whether the caseSensitive icon should be shown in the search input\n     *\n     * ```typescript\n     * // get\n     * let myComboShowSearchCaseIcon = this.combo.showSearchCaseIcon;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [showSearchCaseIcon]='true'></igx-combo>\n     * ```\n     */\n\n    @Input()\n    public showSearchCaseIcon = false;\n\n\n    /**\n     * Combo data source.\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [data]='items'></igx-combo>\n     * ```\n     */\n    @Input()\n    get data(): any[] {\n        return this._data;\n    }\n    set data(val: any[]) {\n        this._data = (val) ? val : [];\n    }\n\n    /**\n     * Combo value data source property.\n     *\n     * ```typescript\n     * // get\n     * let myComboValueKey = this.combo.valueKey;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [valueKey]='myKey'></igx-combo>\n     * ```\n     */\n    @Input()\n    public valueKey: string = null;\n\n    @Input()\n    set displayKey(val: string) {\n        this._displayKey = val;\n    }\n\n    /**\n     * Combo text data source property.\n     *\n     * ```typescript\n     * // get\n     * let myComboDisplayKey = this.combo.displayKey;\n     *\n     * // set\n     * this.combo.displayKey = 'val';\n     *\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [displayKey]='myDisplayKey'></igx-combo>\n     * ```\n     */\n    get displayKey() {\n        return this._displayKey ? this._displayKey : this.valueKey;\n    }\n\n    /**\n     * The item property by which items should be grouped inside the items list. Not usable if data is not of type Object[].\n     *\n     * ```html\n     * <!--set-->\n     * <igx-combo [groupKey]='newGroupKey'></igx-combo>\n     * ```\n     */\n    @Input()\n    public set groupKey(val: string) {\n        this._groupKey = val;\n    }\n\n    /**\n     * The item property by which items should be grouped inside the items list. Not usable if data is not of type Object[].\n     *\n     * ```typescript\n     * // get\n     * let currentGroupKey = this.combo.groupKey;\n     * ```\n     */\n    public get groupKey(): string {\n        return this._groupKey;\n    }\n\n    /**\n     * An @Input property that enabled/disables filtering in the list. The default is `true`.\n     * ```html\n     * <igx-combo [filterable]=\"false\">\n     * ```\n     */\n    @Input()\n    public filterable = true;\n\n    /**\n     * An @Input property that set aria-labelledby attribute\n     * ```html\n     * <igx-combo [ariaLabelledBy]=\"'label1'\">\n     * ```\n     */\n    @Input()\n    @HostBinding('attr.aria-labelledby')\n    public ariaLabelledBy: string;\n\n    /**\n     * An @Input property that enabled/disables combo. The default is `false`.\n     * ```html\n     * <igx-combo [disabled]=\"'true'\">\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * An @Input property that sets how the combo will be styled.\n     * The allowed values are `line`, `box`, `border` and `search`. The default is `box`.\n     * ```html\n     * <igx-combo [type]=\"'line'\">\n     * ```\n     */\n    @Input()\n    public get type(): IgxInputGroupType {\n            return this._type || this._inputGroupType || 'box';\n        }\n\n    public set type(val: IgxInputGroupType) {\n        this._type = val;\n    }\n    /**\n     * An @Input property that controls whether the combo's search box\n     * should be focused after the `onOpened` event is called\n     * When `false`, the combo's list item container will be focused instead\n     */\n    @Input()\n    public autoFocusSearch = true;\n\n    /**\n     * Gets if control is valid, when used in a form\n     *\n     * ```typescript\n     * // get\n     * let valid = this.combo.valid;\n     * ```\n     */\n    public get valid(): IgxComboState {\n        return this._valid;\n    }\n\n    /**\n     * Sets if control is valid, when used in a form\n     *\n     * ```typescript\n     * // set\n     * this.combo.valid = IgxComboState.INVALID;\n     * ```\n     */\n    public set valid(valid: IgxComboState) {\n        this._valid = valid;\n        this.comboInput.valid = IgxInputState[IgxComboState[valid]];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get searchValue(): string {\n        return this._searchValue;\n    }\n\n    public set searchValue(val: string) {\n        this.filterValue = val;\n        this._searchValue = val;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostListener('keydown.ArrowDown', ['$event'])\n    @HostListener('keydown.Alt.ArrowDown', ['$event'])\n    onArrowDown(event: Event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.open();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    onInputClick(event: Event) {\n        event.stopPropagation();\n        event.preventDefault();\n        if (!this.disabled) {\n            this.toggle();\n        }\n    }\n\n    /**\n     * Defines the current state of the virtualized data. It contains `startIndex` and `chunkSize`\n     *\n     * ```typescript\n     * // get\n     * let state = this.combo.virtualizationState;\n     * ```\n     */\n    get virtualizationState(): IForOfState {\n        return this.virtDir.state;\n    }\n    /**\n     * Sets the current state of the virtualized data.\n     *\n     * ```typescript\n     * // set\n     * this.combo.virtualizationState(state);\n     * ```\n     */\n    set virtualizationState(state: IForOfState) {\n        this.virtDir.state = state;\n    }\n\n    /**\n     * Gets total count of the virtual data items, when using remote service.\n     *\n     * ```typescript\n     * // get\n     * let count = this.combo.totalItemCount;\n     * ```\n     */\n    get totalItemCount(): number {\n        return this.virtDir.totalItemCount;\n    }\n    /**\n     * Sets total count of the virtual data items, when using remote service.\n     *\n     * ```typescript\n     * // set\n     * this.combo.totalItemCount(remoteService.count);\n     * ```\n     */\n    set totalItemCount(count: number) {\n        this.virtDir.totalItemCount = count;\n    }\n\n    /**\n     * The text displayed in the combo input\n     *\n     * ```typescript\n     * // get\n     * let comboValue = this.combo.value;\n     * ```\n     */\n    get value(): string {\n        return this._value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get filteredData(): any[] {\n        return this.filterable ? this._filteredData : this.data;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set filteredData(val: any[]) {\n        this._filteredData = this.groupKey ? (val || []).filter((e) => e.isHeader !== true) : val;\n        this.checkMatch();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleKeyUp(event: KeyboardEvent): void {\n        if (event.key === 'ArrowDown' || event.key === 'Down') {\n            this.dropdown.focusedItem = this.dropdown.items[0];\n            this.dropdownContainer.nativeElement.focus();\n        } else if (event.key === 'Escape' || event.key === 'Esc') {\n            this.toggle();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleKeyDown(event: KeyboardEvent) {\n        if (event.key === 'ArrowUp' || event.key === 'Up') {\n            event.preventDefault();\n            event.stopPropagation();\n            this.close();\n        }\n    }\n\n    private checkMatch(): void {\n        const displayKey = this.displayKey;\n        const matchFn = (e) => {\n            const value = displayKey ? e[displayKey] : e;\n            return value.toString().toLowerCase() === this.searchValue.trim().toLowerCase();\n        };\n        const itemMatch = this.filteredData.some(matchFn);\n        this.customValueFlag = this.allowCustomValues && !itemMatch;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleInputChange(event?: string) {\n        if (event !== undefined) {\n            const args: IComboSearchInputEventArgs = {\n                searchText: event,\n                owner: this,\n                cancel: false\n            };\n            this.onSearchInput.emit(args);\n            if (args.cancel) {\n                this.filterValue = null;\n            }\n        }\n        this.checkMatch();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dataType(): string {\n        if (this.displayKey) {\n            return DataTypes.COMPLEX;\n        }\n        return DataTypes.PRIMITIVE;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isRemote() {\n        return this.totalItemCount > 0 &&\n            this.valueKey &&\n            this.dataType === DataTypes.COMPLEX;\n    }\n\n    /** Contains key-value pairs of the selected valueKeys and their resp. displayKeys */\n    private registerRemoteEntries(ids: any[], add = true) {\n        if (add) {\n            const selection = this.getValueDisplayPairs(ids);\n            for (const entry of selection) {\n                this._remoteSelection[entry[this.valueKey]] = entry[this.displayKey];\n            }\n        } else {\n            for (const entry of ids) {\n                delete this._remoteSelection[entry];\n            }\n        }\n    }\n\n    /**\n     * For `id: any[]` returns a mapped `{ [combo.valueKey]: any, [combo.displayKey]: any }[]`\n     */\n    private getValueDisplayPairs(ids: any[]) {\n        return this.data.filter(entry => ids.indexOf(entry[this.valueKey]) > -1).map(e => {\n            return {\n                [this.valueKey]: e[this.valueKey],\n                [this.displayKey]: e[this.displayKey]\n            };\n        });\n    }\n\n    /**\n     * Returns if the specified itemID is selected\n     * @hidden\n     * @internal\n     */\n    public isItemSelected(item: any): boolean {\n        return this.selection.is_item_selected(this.id, item);\n    }\n\n    /**\n     * Triggers change detection on the combo view\n     */\n    public triggerCheck() {\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isAddButtonVisible(): boolean {\n        // This should always return a boolean value. If this.searchValue was '', it returns '' instead of false;\n        return this.searchValue !== '' && this.customValueFlag;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleSelectAll(evt) {\n        if (evt.checked) {\n            this.selectAllItems();\n        } else {\n            this.deselectAllItems();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addItemToCollection() {\n        if (!this.searchValue) {\n            return;\n        }\n        const newValue = this.searchValue.trim();\n        const addedItem = this.displayKey ? {\n            [this.valueKey]: newValue,\n            [this.displayKey]: newValue\n        } : newValue;\n        if (this.groupKey) {\n            Object.assign(addedItem, { [this.groupKey]: this.defaultFallbackGroup });\n        }\n        const oldCollection = this.data;\n        const newCollection = [...this.data];\n        newCollection.push(addedItem);\n        const args: IComboItemAdditionEvent = {\n            oldCollection, addedItem, newCollection, owner: this\n        };\n        this.onAddition.emit(args);\n        this.data.push(addedItem);\n        // If you mutate the array, no pipe is invoked and the display isn't updated;\n        // if you replace the array, the pipe executes and the display is updated.\n        this.data = cloneArray(this.data);\n        this.selectItems(this.comboAPI.valueKey !== null ? [addedItem[this.valueKey]] : [addedItem], false);\n        this.customValueFlag = false;\n        this.searchInput.nativeElement.focus();\n        this.dropdown.focusedItem = null;\n        this.virtDir.scrollTo(0);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public focusSearchInput(opening?: boolean): void {\n        if (this.displaySearchInput && this.searchInput) {\n            this.searchInput.nativeElement.focus();\n        } else {\n            if (opening) {\n                this.dropdownContainer.nativeElement.focus();\n            } else {\n                this.comboInput.nativeElement.focus();\n                this.toggle();\n            }\n        }\n    }\n\n    protected onStatusChanged = () => {\n        if ((this.ngControl.control.touched || this.ngControl.control.dirty) &&\n            (this.ngControl.control.validator || this.ngControl.control.asyncValidator)) {\n            if (!this.collapsed || this.inputGroup.isFocused) {\n                this.valid = this.ngControl.valid ? IgxComboState.VALID : IgxComboState.INVALID;\n            } else {\n                this.valid = this.ngControl.valid ? IgxComboState.INITIAL : IgxComboState.INVALID;\n            }\n        }\n        this.manageRequiredAsterisk();\n    }\n\n    protected manageRequiredAsterisk(): void {\n        if (this.ngControl && this.ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this.ngControl.control.validator({} as AbstractControl);\n            this.inputGroup.isRequired = error && error.required;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onBlur() {\n        if (this.collapsed) {\n            this._onTouchedCallback();\n            if (this.ngControl && !this.ngControl.valid) {\n                this.valid = IgxComboState.INVALID;\n            } else {\n                this.valid = IgxComboState.INITIAL;\n            }\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnInit() {\n        this.ngControl = this._injector.get<NgControl>(NgControl, null);\n        const targetElement = this.elementRef.nativeElement;\n        this._overlaySettings = {\n            target: targetElement,\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            positionStrategy: new AutoPositionStrategy(),\n            modal: false,\n            closeOnOutsideClick: true,\n            excludeFromOutsideClick: [targetElement as HTMLElement]\n        };\n        this.selection.set(this.id, new Set());\n        this._iconService.addSvgIconFromText(caseSensitive.name, caseSensitive.value, 'imx-icons');\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit() {\n        this.filteredData = [...this.data];\n\n        if (this.ngControl) {\n            this.ngControl.statusChanges.pipe(takeUntil(this.destroy$)).subscribe(this.onStatusChanged);\n            this.manageRequiredAsterisk();\n            this.cdr.detectChanges();\n        }\n        this.virtDir.onChunkPreload.pipe(takeUntil(this.destroy$)).subscribe((e: IForOfState) => {\n            const eventArgs: IForOfState = Object.assign({}, e, { owner: this });\n            this.onDataPreLoad.emit(eventArgs);\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.destroy$.next();\n        this.destroy$.complete();\n        this.comboAPI.clear();\n        this.selection.clear(this.id);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public writeValue(value: any[]): void {\n        const selection = Array.isArray(value) ? value : [];\n        const oldSelection = this.selectedItems();\n        this.selection.select_items(this.id, selection, true);\n        this._value = this.createDisplayText(this.selectedItems(), oldSelection);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public registerOnChange(fn: any): void {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public registerOnTouched(fn: any): void {\n        this._onTouchedCallback = fn;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public setDisabledState(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n\n    /**\n     * @hidden\n     */\n    public getEditElement(): HTMLElement {\n        return this.comboInput.nativeElement;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get template(): TemplateRef<any> {\n        this._dataType = this.dataType;\n        if (this.itemTemplate) {\n            return this.itemTemplate;\n        }\n        if (this._dataType === DataTypes.COMPLEX) {\n            return this.complexTemplate;\n        }\n        return this.primitiveTemplate;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get context(): any {\n        return {\n            $implicit: this\n        };\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleClearItems(event: Event): void {\n        if (this.disabled) {\n            return;\n        }\n        this.deselectAllItems(true, event);\n        if (this.collapsed) {\n            this.getEditElement().focus();\n        } else {\n            this.focusSearchInput(true);\n        }\n        event.stopPropagation();\n    }\n\n    /**\n     * A method that opens/closes the combo.\n     *\n     * ```html\n     * <button (click)=\"combo.toggle()\">Toggle Combo</button>\n     * <igx-combo #combo></igx-combo>\n     * ```\n     */\n    public toggle(): void {\n        const overlaySettings = Object.assign({}, this._overlaySettings, this.overlaySettings);\n        this.dropdown.toggle(overlaySettings);\n    }\n\n    /**\n     * A method that opens the combo.\n     *\n     * ```html\n     * <button (click)=\"combo.open()\">Open Combo</button>\n     * <igx-combo #combo></igx-combo>\n     * ```\n     */\n    public open(): void {\n        const overlaySettings = Object.assign({}, this._overlaySettings, this.overlaySettings);\n        this.dropdown.open(overlaySettings);\n    }\n\n    /**\n     * A method that closes the combo.\n     *\n     * ```html\n     * <button (click)=\"combo.close()\">Close Combo</button>\n     * <igx-combo #combo></igx-combo>\n     * ```\n     */\n    public close(): void {\n        this.dropdown.close();\n    }\n\n    /**\n     * Gets drop down state.\n     *\n     * ```typescript\n     * let state = this.combo.collapsed;\n     * ```\n     */\n    public get collapsed(): boolean {\n        return this.dropdown.collapsed;\n    }\n\n    /**\n     * Get current selection state\n     * @returns Array of selected items\n     * ```typescript\n     * let selectedItems = this.combo.selectedItems();\n     * ```\n     */\n    public selectedItems() {\n        const items = Array.from(this.selection.get(this.id));\n        return items;\n    }\n\n    /**\n     * Select defined items\n     * @param newItems new items to be selected\n     * @param clearCurrentSelection if true clear previous selected items\n     * ```typescript\n     * this.combo.selectItems([\"New York\", \"New Jersey\"]);\n     * ```\n     */\n    public selectItems(newItems: Array<any>, clearCurrentSelection?: boolean, event?: Event) {\n        if (newItems) {\n            const newSelection = this.selection.add_items(this.id, newItems, clearCurrentSelection);\n            this.setSelection(newSelection, event);\n        }\n    }\n\n    /**\n     * Deselect defined items\n     * @param items items to deselected\n     * ```typescript\n     * this.combo.deselectItems([\"New York\", \"New Jersey\"]);\n     * ```\n     */\n    public deselectItems(items: Array<any>, event?: Event) {\n        if (items) {\n            const newSelection = this.selection.delete_items(this.id, items);\n            this.setSelection(newSelection, event);\n        }\n    }\n\n    /**\n     * Select all (filtered) items\n     * @param ignoreFilter if set to true, selects all items, otherwise selects only the filtered ones.\n     * ```typescript\n     * this.combo.selectAllItems();\n     * ```\n     */\n    public selectAllItems(ignoreFilter?: boolean, event?: Event) {\n        const allVisible = this.selection.get_all_ids(ignoreFilter ? this.data : this.filteredData, this.valueKey);\n        const newSelection = this.selection.add_items(this.id, allVisible);\n        this.setSelection(newSelection, event);\n    }\n\n    /**\n     * Deselect all (filtered) items\n     * @param ignoreFilter if set to true, deselects all items, otherwise deselects only the filtered ones.\n     * ```typescript\n     * this.combo.deselectAllItems();\n     * ```\n     */\n    public deselectAllItems(ignoreFilter?: boolean, event?: Event): void {\n        let newSelection = this.selection.get_empty();\n        if (this.filteredData.length !== this.data.length && !ignoreFilter) {\n            newSelection = this.selection.delete_items(this.id, this.selection.get_all_ids(this.filteredData, this.valueKey));\n        }\n        this.setSelection(newSelection, event);\n    }\n\n    /**\n     * Selects/Deselects a single item\n     * @param itemID the itemID of the specific item\n     * @param select If the item should be selected (true) or deselected (false)\n     *\n     * Without specified valueKey;\n     * ```typescript\n     * this.combo.valueKey = null;\n     * const items: { field: string, region: string}[] = data;\n     * this.combo.setSelectedItem(items[0], true);\n     * ```\n     * With specified valueKey;\n     * ```typescript\n     * this.combo.valueKey = 'field';\n     * const items: { field: string, region: string}[] = data;\n     * this.combo.setSelectedItem('Connecticut', true);\n     * ```\n     */\n    public setSelectedItem(itemID: any, select = true, event?: Event): void {\n        if (itemID === null || itemID === undefined) {\n            return;\n        }\n        if (select) {\n            this.selectItems([itemID], false, event);\n        } else {\n            this.deselectItems([itemID], event);\n        }\n    }\n\n    protected setSelection(newSelection: Set<any>, event?: Event): void {\n        const removed = diffInSets(this.selection.get(this.id), newSelection);\n        const added = diffInSets(newSelection, this.selection.get(this.id));\n        const newSelectionAsArray = Array.from(newSelection);\n        const oldSelectionAsArray = Array.from(this.selection.get(this.id) || []);\n        const displayText = this.createDisplayText(newSelectionAsArray, oldSelectionAsArray);\n        const args: IComboSelectionChangeEventArgs = {\n            newSelection: newSelectionAsArray,\n            oldSelection: oldSelectionAsArray,\n            added,\n            removed,\n            event,\n            owner: this,\n            displayText,\n            cancel: false\n        };\n        this.onSelectionChange.emit(args);\n        if (!args.cancel) {\n            this.selection.select_items(this.id, args.newSelection, true);\n            if (displayText !== args.displayText) {\n                this._value = args.displayText;\n            } else {\n                this._value = this.createDisplayText(args.newSelection, args.oldSelection);\n            }\n            this._onChangeCallback(args.newSelection);\n        }\n    }\n\n    /** Returns a string that should be populated in the combo's text box */\n    private concatDisplayText(selection: any[]): string {\n        const value = this.displayKey !== null && this.displayKey !== undefined ?\n            this.convertKeysToItems(selection).map(entry => entry[this.displayKey]).join(', ') :\n            selection.join(', ');\n        return value;\n    }\n\n    /**\n     * Constructs the combo display value\n     * If remote, caches the key displayText\n     * If not, just combine the object.displayKeys\n     */\n    private createDisplayText(newSelection: any[], oldSelection: any[]) {\n        let value = '';\n        if (this.isRemote) {\n            if (newSelection.length) {\n                const removedItems = oldSelection.filter(e => newSelection.indexOf(e) < 0);\n                const addedItems = newSelection.filter(e => oldSelection.indexOf(e) < 0);\n                this.registerRemoteEntries(addedItems);\n                this.registerRemoteEntries(removedItems, false);\n                value = Object.keys(this._remoteSelection).map(e => this._remoteSelection[e]).join(', ');\n            } else {\n                // If new selection is empty, clear all items\n                this.registerRemoteEntries(oldSelection, false);\n            }\n        } else {\n            value = this.concatDisplayText(newSelection);\n        }\n        return value;\n    }\n\n    /** if there is a valueKey - map the keys to data items, else - just return the keys */\n    private convertKeysToItems(keys: any[]) {\n        if (this.comboAPI.valueKey === null) {\n            return keys;\n        }\n        // map keys vs. filter data to retain the order of the selected items\n        return keys.map(key => this.data.find(entry => entry[this.valueKey] === key)).filter(e => e !== undefined);\n    }\n    /**\n     * Event handlers\n     * @hidden\n     * @internal\n     */\n    public handleOpening(event: IBaseCancelableBrowserEventArgs) {\n        const eventArgs: IBaseCancelableBrowserEventArgs = Object.assign({}, event, { owner: this });\n        this.onOpening.emit(eventArgs);\n        event.cancel = eventArgs.cancel;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleOpened() {\n        this.triggerCheck();\n\n        // Disabling focus of the search input should happen only when drop down opens.\n        // During keyboard navigation input should receive focus, even the autoFocusSearch is disabled.\n        // That is why in such cases focusing of the dropdownContainer happens outside focusSearchInput method.\n        if (this.autoFocusSearch) {\n            this.focusSearchInput(true);\n        } else {\n            this.dropdownContainer.nativeElement.focus();\n        }\n        this.onOpened.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleClosing(event: IBaseCancelableBrowserEventArgs) {\n        const eventArgs: IBaseCancelableBrowserEventArgs = Object.assign({}, event, { owner: this });\n        this.onClosing.emit(eventArgs);\n        event.cancel = eventArgs.cancel;\n        if (event.cancel) {\n            return;\n        }\n        this.searchValue = '';\n        this.comboInput.nativeElement.focus();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public handleClosed() {\n        this.onClosed.emit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public toggleCaseSensitive() {\n        this.filteringOptions = { caseSensitive: !this.filteringOptions.caseSensitive };\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxComboComponent, IgxComboItemComponent, IgxComboGroupingPipe,\n        IgxComboFilteringPipe, IgxComboDropDownComponent, IgxComboAddItemComponent,\n        IgxComboItemDirective,\n        IgxComboEmptyDirective,\n        IgxComboHeaderItemDirective,\n        IgxComboHeaderDirective,\n        IgxComboFooterDirective,\n        IgxComboAddItemDirective,\n        IgxComboToggleIconDirective,\n        IgxComboClearIconDirective],\n    exports: [IgxComboComponent, IgxComboItemComponent, IgxComboDropDownComponent, IgxComboAddItemComponent,\n        IgxComboItemDirective,\n        IgxComboEmptyDirective,\n        IgxComboHeaderItemDirective,\n        IgxComboHeaderDirective,\n        IgxComboFooterDirective,\n        IgxComboAddItemDirective,\n        IgxComboToggleIconDirective,\n        IgxComboClearIconDirective,\n        IgxInputGroupModule],\n    imports: [IgxRippleModule, CommonModule, IgxInputGroupModule, FormsModule, ReactiveFormsModule,\n        IgxForOfModule, IgxToggleModule, IgxCheckboxModule, IgxDropDownModule, IgxButtonModule, IgxIconModule]\n})\nexport class IgxComboModule { }\n","/** @hidden */\nexport const IGX_DATE_PICKER_COMPONENT = 'IgxDatePickerComponentToken';\n\n/** @hidden */\nexport interface IDatePicker {\n    value: Date;\n    mask: string;\n    inputMask: string;\n    rawDateString: string;\n    dateFormatParts: any[];\n    invalidDate: string;\n}\n","import { PipeTransform, Pipe, Inject } from '@angular/core';\nimport { IGX_DATE_PICKER_COMPONENT, IDatePicker } from './date-picker.common';\nimport { DatePickerUtil } from './date-picker.utils';\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'displayValue'\n})\nexport class DatePickerDisplayValuePipe implements PipeTransform {\n    constructor(@Inject(IGX_DATE_PICKER_COMPONENT) private _datePicker: IDatePicker) { }\n    transform(value: any, args?: any): any {\n        if (value !== '') {\n            if (value === DatePickerUtil.maskToPromptChars(this._datePicker.inputMask)) {\n                return '';\n            }\n            this._datePicker.rawDateString = value;\n            return DatePickerUtil.trimEmptyPlaceholders(value);\n        }\n        return '';\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'inputValue'\n})\nexport class DatePickerInputValuePipe implements PipeTransform {\n    constructor(@Inject(IGX_DATE_PICKER_COMPONENT) private _datePicker: IDatePicker) { }\n    transform(value: any, args?: any): any {\n        /**\n         * TODO(D.P.): This plugs into the mask, but constantly received display strings it can't handle at all\n         * Those are almost immediately overridden by the pickers onFocus handling anyway; Refactor ASAP\n         */\n        if (this._datePicker.invalidDate !== '') {\n            return this._datePicker.invalidDate;\n        } else {\n            if (this._datePicker.value === null || this._datePicker.value === undefined) {\n                return DatePickerUtil.maskToPromptChars(this._datePicker.inputMask);\n            } else {\n                return (this._datePicker as any)._getEditorDate(this._datePicker.value);\n                // return DatePickerUtil.addPromptCharsEditMode(this._datePicker.dateFormatParts, this._datePicker.value, value);\n            }\n        }\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxDatePickerTemplate]'\n})\n\n/**\n * IgxDatePickerTemplateDirective can be used to re-template the date-picker input-group.\n *\n * @hidden\n */\nexport class IgxDatePickerTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n/**\n * IgxDatePickerActionsDirective can be used to re-template the dropdown/dialog action buttons.\n */\n@Directive({\n    selector: '[igxDatePickerActions]'\n})\nexport class IgxDatePickerActionsDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","/**\n * This enumeration is used to configure whether the date/time picker has an editable input with drop down\n * or is readonly - the date/time is selected only through a dialog.\n */\nexport enum InteractionMode {\n    DropDown = 'dropdown',\n    Dialog = 'dialog'\n}\n","import { Component, ViewChild, Input, Output, EventEmitter, HostListener, HostBinding } from '@angular/core';\nimport { IgxCalendarComponent } from '../calendar/public_api';\nimport { InteractionMode } from '../core/enums';\nimport { IgxDatePickerActionsDirective } from './date-picker.directives';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-calendar-container',\n    styles: [':host {display: block;}'],\n    templateUrl: 'calendar-container.component.html'\n})\nexport class IgxCalendarContainerComponent {\n    @ViewChild('calendar', { static: true })\n    public calendar: IgxCalendarComponent;\n\n    @Input()\n    public mode: InteractionMode = InteractionMode.Dialog;\n\n    @Input()\n    public vertical = false;\n\n    @Input()\n    public cancelButtonLabel: string;\n\n    @Input()\n    public todayButtonLabel: string;\n\n    @Input()\n    public datePickerActions: IgxDatePickerActionsDirective;\n\n    @Output()\n    public onClose = new EventEmitter();\n\n    @Output()\n    public onTodaySelection = new EventEmitter();\n\n    @HostBinding('class.igx-date-picker')\n    public styleClass = 'igx-date-picker';\n\n    @HostBinding('class.igx-date-picker--dropdown')\n    get dropdownCSS(): boolean {\n        return this.mode === InteractionMode.DropDown;\n    }\n\n    @HostBinding('class.igx-date-picker--vertical')\n    get verticalCSS(): boolean {\n        return this.vertical && this.mode === InteractionMode.Dialog;\n    }\n\n    @HostListener('keydown.esc', ['$event'])\n    @HostListener('keydown.alt.arrowup', ['$event'])\n    public onEscape(event) {\n        event.preventDefault();\n        this.onClose.emit();\n    }\n\n    /**\n     * Returns whether the date-picker is in readonly dialog mode.\n     *\n     * @hidden\n     */\n    public get isReadonly() {\n        return this.mode === InteractionMode.Dialog;\n    }\n\n    /**\n     * Emits close event for the calendar.\n     */\n    public closeCalendar() {\n        this.onClose.emit();\n    }\n\n    /**\n     * Emits today selection event for the calendar.\n     */\n    public triggerTodaySelection() {\n        this.onTodaySelection.emit();\n    }\n}\n","import { CommonModule, formatDate } from '@angular/common';\nimport {\n    Component,\n    ContentChild,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    OnDestroy,\n    Output,\n    ViewChild,\n    ElementRef,\n    TemplateRef,\n    Inject,\n    ChangeDetectorRef,\n    HostListener,\n    NgModuleRef,\n    OnInit,\n    AfterViewInit,\n    Injector,\n    AfterViewChecked,\n    ContentChildren,\n    QueryList,\n    Renderer2\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl, NG_VALIDATORS, ValidationErrors } from '@angular/forms';\nimport {\n    IgxCalendarComponent,\n    IgxCalendarHeaderTemplateDirective,\n    IgxCalendarModule,\n    IgxCalendarSubheaderTemplateDirective,\n    WEEKDAYS,\n    isDateInRanges\n} from '../calendar/public_api';\nimport { IgxIconModule } from '../icon/public_api';\nimport {\n    IgxInputGroupModule,\n    IgxInputDirective,\n    IgxInputGroupComponent,\n    IgxInputState,\n    IgxLabelDirective\n} from '../input-group/public_api';\nimport { Subject, fromEvent, animationFrameScheduler, interval, Subscription } from 'rxjs';\nimport { filter, takeUntil, throttle } from 'rxjs/operators';\nimport { IgxOverlayOutletDirective } from '../directives/toggle/toggle.directive';\nimport { IgxTextSelectionModule } from '../directives/text-selection/text-selection.directive';\nimport {\n    OverlaySettings,\n    IgxOverlayService,\n    PositionSettings,\n    AbsoluteScrollStrategy,\n    AutoPositionStrategy,\n    OverlayCancelableEventArgs\n} from '../services/public_api';\nimport { DateRangeDescriptor } from '../core/dates/dateRange';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxMaskModule } from '../directives/mask/mask.directive';\nimport {\n    DatePickerUtil,\n    DateState\n} from './date-picker.utils';\nimport { DatePickerDisplayValuePipe, DatePickerInputValuePipe } from './date-picker.pipes';\nimport { IDatePicker } from './date-picker.common';\nimport { KEYS, isIE, isEqual, IBaseEventArgs, mkenum, IBaseCancelableBrowserEventArgs } from '../core/utils';\nimport { IgxDatePickerTemplateDirective, IgxDatePickerActionsDirective } from './date-picker.directives';\nimport { IgxCalendarContainerComponent } from './calendar-container.component';\nimport { InteractionMode } from '../core/enums';\nimport { fadeIn, fadeOut } from '../animations/fade';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\n\n/**\n * This interface is used to provide information about date picker reference and its current value\n * when onDisabledDate event is fired.\n */\nexport interface IDatePickerDisabledDateEventArgs extends IBaseEventArgs {\n    datePicker: IgxDatePickerComponent;\n    currentValue: Date;\n}\n\n/**\n * This interface is used to provide information about date picker reference and its previously valid value\n * when onValidationFailed event is fired.\n */\nexport interface IDatePickerValidationFailedEventArgs extends IBaseEventArgs {\n    datePicker: IgxDatePickerComponent;\n    prevValue: Date;\n}\n\n/**\n * This interface is used to configure calendar format view options.\n */\nexport interface IFormatViews {\n    day?: boolean;\n    month?: boolean;\n    year?: boolean;\n}\n\n/**\n * This interface is used to configure calendar format options.\n */\nexport interface IFormatOptions {\n    day?: string;\n    month?: string;\n    weekday?: string;\n    year?: string;\n}\n\n/**\n * This enumeration is used to configure the date picker to operate with pre-defined format option used in Angular DatePipe.\n * 'https://angular.io/api/common/DatePipe'\n * 'shortDate': equivalent to 'M/d/yy' (6/15/15).\n * 'mediumDate': equivalent to 'MMM d, y' (Jun 15, 2015).\n * 'longDate': equivalent to 'MMMM d, y' (June 15, 2015).\n * 'fullDate': equivalent to 'EEEE, MMMM d, y' (Monday, June 15, 2015).\n */\nexport const PredefinedFormatOptions = mkenum({\n    ShortDate: 'shortDate',\n    MediumDate: 'mediumDate',\n    LongDate: 'longDate',\n    FullDate: 'fullDate'\n});\nexport type PredefinedFormatOptions = (typeof PredefinedFormatOptions)[keyof typeof PredefinedFormatOptions];\n\nconst noop = () => { };\n\n/**\n * Date Picker displays a popup calendar that lets users select a single date.\n * @igxModule IgxDatePickerModule\n * @igxTheme igx-calendar-theme, igx-icon-theme\n * @igxGroup Scheduling\n * @igxKeywords  datepicker, calendar, schedule, date\n * @example\n * ```html\n * <igx-date-picker [(ngModel)]=\"selectedDate\"></igx-date-picker>\n * ```\n */\n@Component({\n    providers:\n        [{\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxDatePickerComponent,\n            multi: true\n        },\n        {\n            provide: NG_VALIDATORS,\n            useExisting: IgxDatePickerComponent,\n            multi: true\n        }],\n    // tslint:disable-next-line:component-selector\n    selector: 'igx-date-picker',\n    templateUrl: 'date-picker.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxDatePickerComponent implements IDatePicker, ControlValueAccessor,\n    EditorProvider, OnInit, AfterViewInit, OnDestroy, AfterViewChecked {\n    /**\n     * Gets/Sets the `IgxDatePickerComponent` label.\n     * @remarks\n     * The default label is 'Date'.\n     * @example\n     * ```html\n     * <igx-date-picker [label]=\"Calendar\"></igx-date-picker>\n     * ```\n     * @deprecated Use igxLabel inside the date picker to change the label:\n     * ````html\n     * <igx-date-picker>\n     *      <label igxLabel>Custom label</label>\n     * </igx-date-picker>\n     * ````\n     * to set a custom label.\n     */\n    @DeprecateProperty(`Use igxLabel inside the date picker to change the label:\n    <igx-date-picker>\n        <label igxLabel>Custom label</label>\n    </igx-date-picker> `)\n    @Input()\n    public label = 'Date';\n\n    /**\n     * Gets/Sets the `IgxDatePickerComponent` label visibility.\n     * @remarks\n     * By default the visibility is set to true.\n     * @example\n     * <igx-date-picker [labelVisibility]=\"false\"></igx-date-picker>\n     */\n    @Input()\n    public labelVisibility = true;\n\n    /**\n     * Gets/Sets the locales.\n     * @remarks Default locale is en.\n     * @example\n     * ```html\n     * <igx-date-picker locale=\"ja-JP\" [value]=\"date\"></igx-date-picker>\n     * ```\n     */\n    @Input() public locale: 'en';\n\n    /**\n     * Gets/Sets the default template editor's tabindex.\n     * @example\n     * ```html\n     * <igx-date-picker editorTabIndex=\"1\"></igx-date-picker>\n     * ```\n     */\n    @Input() public editorTabIndex: number;\n\n    /**\n     * Gets/Sets on which day the week starts.\n     * @example\n     * ```html\n     * <igx-date-picker [weekStart]=\"WEEKDAYS.FRIDAY\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     * ```\n     */\n    @Input() public weekStart: WEEKDAYS | number = WEEKDAYS.SUNDAY;\n\n    /**\n     * Gets the format options of the `IgxDatePickerComponent`.\n     * @example\n     * ```typescript\n     * let formatOptions = this.datePicker.formatOptions;\n     * ```\n     */\n    @Input()\n    public get formatOptions(): IFormatOptions {\n        return this._formatOptions;\n    }\n\n    /**\n     * Gets/Sets whether the inactive dates will be hidden.\n     * @remarks\n     * Apllies to dates that are out of the current month.\n     * Default value is `false`.\n     * @example\n     * ```html\n     * <igx-date-picker [hideOutsideDays]=\"true\"></igx-date-picker>\n     * ```\n     * @example\n     * ```typescript\n     * let hideOutsideDays = this.datePicker.hideOutsideDays;\n     * ```\n     */\n    @Input()\n    public hideOutsideDays: boolean;\n\n    /**\n     * Gets/Sets the number of month views displayed.\n     * @remarks\n     * Default value is `1`.\n     * @example\n     * ```html\n     * <igx-date-picker [monthsViewNumber]=\"2\"></igx-date-picker>\n     * ```\n     * @example\n     * ```typescript\n     * let monthViewsDisplayed = this.datePicker.monthsViewNumber;\n     * ```\n     */\n    @Input()\n    public monthsViewNumber = 1;\n\n    /**\n     * Show/hide week numbers\n     *\n     * @exmpale\n     * ```html\n     * <igx-date-picker [showWeekNumbers]=\"true\"></igx-date-picker>\n     * ``\n     */\n    @Input()\n    public showWeekNumbers: boolean;\n\n    /**\n     * Sets the format options of the `IgxDatePickerComponent`.\n     * @example\n     * ```typescript\n     * this.datePicker.formatOptions = {  day: \"numeric\",  month: \"long\", weekday: \"long\", year: \"numeric\"};\n     * ```\n     */\n    public set formatOptions(formatOptions: IFormatOptions) {\n        this._formatOptions = Object.assign(this._formatOptions, formatOptions);\n    }\n\n    /**\n     * Gets/Sets the date display format of the `IgxDatePickerComponent` in dropdown mode.\n     * @example\n     * ```typescript\n     * let format = this.datePicker.format;\n     * this.datePicker.format = 'yyyy-M-d';\n     * ```\n     */\n    @Input()\n    public get format(): string {\n        return (this._format === undefined) ? PredefinedFormatOptions.ShortDate : this._format;\n    }\n    public set format(format: string) {\n        this._format = format;\n    }\n\n    /**\n     * Gets/Sets the date mask of the `IgxDatePickerComponent` when in editable dropdown mode.\n     *  @example\n     * ```typescript\n     * let mask = this.datePicker.mask;\n     * ```\n     */\n    @Input()\n    public mask: string;\n\n    /**\n     * Gets/Sets the format views of the `IgxDatePickerComponent`.\n     * @example\n     * ```typescript\n     * let formatViews = this.datePicker.formatViews;\n     *  this.datePicker.formatViews = {day:false, month: false, year:false};\n     * ```\n     */\n    @Input()\n    public get formatViews(): IFormatViews {\n        return this._formatViews;\n    }\n\n    public set formatViews(formatViews: IFormatViews) {\n        this._formatViews = Object.assign(this._formatViews, formatViews);\n    }\n\n    /**\n     * Gets/Sets the disabled dates descriptors.\n     * @example\n     * ```typescript\n     * let disabledDates = this.datepicker.disabledDates;\n     * this.datePicker.disabledDates = [ {type: DateRangeType.Weekends}, ...];\n     * ```\n     */\n    @Input()\n    public get disabledDates(): DateRangeDescriptor[] {\n        return this._disabledDates;\n    }\n    public set disabledDates(value: DateRangeDescriptor[]) {\n        this._disabledDates = value;\n        this._onValidatorChange();\n    }\n\n    /**\n     * Gets/Sets the special dates descriptors.\n     * @example\n     * ```typescript\n     * let specialDates = this.datepicker.specialDates;\n     * this.datePicker.specialDates = [ {type: DateRangeType.Weekends}, ... ];\n     * ```\n     */\n    @Input()\n    public get specialDates(): DateRangeDescriptor[] {\n        return this._specialDates;\n    }\n    public set specialDates(value: DateRangeDescriptor[]) {\n        this._specialDates = value;\n    }\n\n    /**\n     * Gets/Sets the modal overlay settings.\n     */\n    @Input()\n    public get modalOverlaySettings(): OverlaySettings {\n        return this._modalOverlay;\n    }\n\n    public set modalOverlaySettings(value: OverlaySettings) {\n        this._modalOverlay = value;\n    }\n\n    /**\n     * Gets/Sets the drop-down overlay settings.\n     */\n    @Input()\n    public get dropDownOverlaySettings(): OverlaySettings {\n        return this._dropDownOverlaySettings || this._defaultDropDownOverlaySettings;\n    }\n\n    public set dropDownOverlaySettings(value: OverlaySettings) {\n        this._dropDownOverlaySettings = value;\n    }\n\n    /**\n     * Gets the formatted date when `IgxDatePickerComponent` is in dialog mode.\n     *  @example\n     * ```typescript\n     * let selectedDate = this.datePicker.displayData;\n     * ```\n     */\n    public get displayData(): string {\n        if (this.value) {\n            return this._customFormatChecker(this.formatter, this.value);\n        }\n        return '';\n    }\n\n    /** @hidden @internal */\n    public get transformedDate(): string {\n        if (this._value) {\n            this._transformedDate = (this._isInEditMode) ? this._getEditorDate(this._value) : this._getDisplayDate(this._value);\n            this.isEmpty = false;\n        } else {\n            this._transformedDate = (this._isInEditMode) ? DatePickerUtil.maskToPromptChars(this.inputMask) : '';\n        }\n        return this._transformedDate;\n    }\n\n    /** @hidden @internal */\n    public set transformedDate(value) {\n        this._transformedDate = value;\n    }\n\n    constructor(@Inject(\n        IgxOverlayService) private _overlayService: IgxOverlayService,\n        public element: ElementRef,\n        private _cdr: ChangeDetectorRef,\n        private _moduleRef: NgModuleRef<any>,\n        private _injector: Injector,\n        private _renderer: Renderer2) {\n    }\n\n\n    /**\n     * Gets the input group template.\n     * @example\n     * ```typescript\n     * let template = this.template();\n     * ```\n     */\n    get template(): TemplateRef<any> {\n        if (this.datePickerTemplateDirective) {\n            return this.datePickerTemplateDirective.template;\n        }\n        return (this.mode === InteractionMode.Dialog) ? this.readOnlyDatePickerTemplate : this.editableDatePickerTemplate;\n    }\n\n    /**\n     * Gets the context passed to the input group template.\n     */\n    get context() {\n        return {\n            disabled: this.disabled,\n            disabledDates: this.disabledDates,\n            displayData: this.displayData,\n            format: this.format,\n            isSpinLoop: this.isSpinLoop,\n            label: this.label,\n            labelVisibility: this.labelVisibility,\n            locale: this.locale,\n            mask: this.mask,\n            mode: this.mode,\n            specialDates: this.specialDates,\n            value: this.value,\n            openDialog: () => this.openDialog()\n        };\n    }\n\n    private get required(): boolean {\n        if (this._ngControl && this._ngControl.control && this._ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this._ngControl.control.validator({} as AbstractControl);\n            return error && error.required;\n        }\n\n        return false;\n    }\n\n\n    /**\n     * Gets/Sets the selected date.\n     *  @example\n     * ```html\n     * <igx-date-picker [value]=\"date\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public get value(): Date {\n        return this._value;\n    }\n\n    public set value(date: Date) {\n        this._value = date;\n        this._onChangeCallback(date);\n    }\n\n    /**\n     * Gets/Sets the value of `id` attribute.\n     * @remarks If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-date-picker [id]=\"'igx-date-picker-3'\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-date-picker-${NEXT_ID++}`;\n\n    /**\n     * Gets/Sets a custom formatter function on the selected or passed date.\n     * @example\n     * ```html\n     * <igx-date-picker [value]=\"date\" [formatter]=\"formatter\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public formatter: (val: Date) => string;\n\n    /**\n     * Enables/Disables the `IgxDatePickerComponent`.\n     *  @example\n     * ```html\n     * <igx-date-picker [disabled]=\"'true'\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public disabled: boolean;\n\n    /**\n     * Gets/Sets the orientation of the `IgxDatePickerComponent` header.\n     *  @example\n     * ```html\n     * <igx-date-picker [vertical]=\"'true'\" cancelButtonLabel=\"cancel\" todayButtonLabel=\"today\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public vertical = false;\n\n    /**\n     * Gets/Sets the today button's label.\n     *  @example\n     * ```html\n     * <igx-date-picker cancelButtonLabel=\"cancel\" todayButtonLabel=\"Tomorrow\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public todayButtonLabel: string;\n\n    /**\n     * *Gets/Sets the cancel button's label.\n     * @example\n     * ```html\n     * <igx-date-picker cancelButtonLabel=\"Close\" todayButtonLabel=\"Today\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public cancelButtonLabel: string;\n\n    /**\n     * Gets/Sets the interaction mode - dialog or drop down.\n     *  @example\n     * ```html\n     * <igx-date-picker mode=\"dropdown\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public mode = InteractionMode.Dialog;\n\n    /**\n     * Gets/Sets whether date should spin continuously or stop when min/max is reached.\n     *  @example\n     * ```html\n     * <igx-date-picker [isSpinLoop]=\"false\"></igx-date-picker>\n     * ```\n     */\n    @Input()\n    public isSpinLoop = true;\n\n    /**\n     * Gets/Sets the container used for the popup element.\n     * @remarks\n     *  `outlet` is an instance of `IgxOverlayOutletDirective` or an `ElementRef`.\n     * @example\n     * ```html\n     * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n     * //..\n     * <igx-date-picker [outlet]=\"outlet\"></igx-date-picker>\n     * //..\n     * ```\n     */\n    @Input()\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n     * Emitted when the `IgxDatePickerComponent` calendar is opened.\n     */\n    @Output()\n    public onOpened = new EventEmitter<IgxDatePickerComponent>();\n\n    /**\n     * Emitted after the `IgxDatePickerComponent` is closed.\n     */\n    @Output()\n    public onClosed = new EventEmitter<IgxDatePickerComponent>();\n\n    /**\n     * Emitted when the `IgxDatePickerComponent` is being closed.\n     */\n    @Output()\n    public onClosing = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted when selection is made in the calendar.\n     *  @example\n     * ```html\n     * <igx-date-picker (onSelection)=\"selection($event)\"></igx-date-picker>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<Date>();\n\n    /**\n     * Emitted when date picker value is changed.\n     * @example\n     * ```html\n     * <igx-date-picker (valueChange)=\"valueChanged($event)\" mode=\"dropdown\"></igx-date-picker>\n     * ```\n     */\n    @Output()\n    public valueChange = new EventEmitter<Date>();\n\n    /**\n     * Emitted when the user types/spins to a disabled date in the date-picker editor.\n     *  @example\n     * ```html\n     * <igx-date-picker (onDisabledDate)=\"onDisabledDate($event)\"></igx-date-picker>\n     * ```\n     */\n    @Output()\n    public onDisabledDate = new EventEmitter<IDatePickerDisabledDateEventArgs>();\n\n    /**\n     * Emitted when the user types/spins invalid date in the date-picker editor.\n     *  @example\n     * ```html\n     * <igx-date-picker (onValidationFailed)=\"onValidationFailed($event)\"></igx-date-picker>\n     * ```\n     */\n    @Output()\n    public onValidationFailed = new EventEmitter<IDatePickerValidationFailedEventArgs>();\n\n    /*\n     * @hidden\n     */\n    @ViewChild('readOnlyDatePickerTemplate', { read: TemplateRef, static: true })\n    protected readOnlyDatePickerTemplate: TemplateRef<any>;\n\n    /*\n     * @hidden\n     */\n    @ViewChild('editableDatePickerTemplate', { read: TemplateRef, static: true })\n    protected editableDatePickerTemplate: TemplateRef<any>;\n\n    /*\n     * @hidden @internal\n     */\n    @ViewChild(IgxInputGroupComponent)\n    protected _inputGroup: IgxInputGroupComponent;\n\n    @ContentChild(IgxInputGroupComponent)\n    protected _inputGroupUserTemplate: IgxInputGroupComponent;\n\n    @ViewChild(IgxInputDirective, { read: ElementRef })\n    private _inputElementRef: ElementRef;\n\n    @ContentChild(IgxInputDirective, { read: ElementRef })\n    protected _inputUserTemplateElementRef: ElementRef;\n\n    @ViewChild(IgxInputDirective)\n    private _inputDirective: IgxInputDirective;\n\n    @ContentChildren(IgxInputDirective, { descendants: true })\n    private _inputDirectiveUserTemplates: QueryList<IgxInputDirective>;\n\n    @ViewChild(IgxLabelDirective)\n    protected _labelDirective: IgxLabelDirective;\n\n    /** @hidden @internal */\n    @ContentChild(IgxLabelDirective)\n    public _labelDirectiveUserTemplate: IgxLabelDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxDatePickerTemplateDirective, { read: IgxDatePickerTemplateDirective })\n    protected datePickerTemplateDirective: IgxDatePickerTemplateDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxCalendarHeaderTemplateDirective, { read: IgxCalendarHeaderTemplateDirective })\n    public headerTemplate: IgxCalendarHeaderTemplateDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxCalendarSubheaderTemplateDirective, { read: IgxCalendarSubheaderTemplateDirective })\n    public subheaderTemplate: IgxCalendarSubheaderTemplateDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxDatePickerActionsDirective, { read: IgxDatePickerActionsDirective })\n    public datePickerActionsDirective: IgxDatePickerActionsDirective;\n\n    /** @hidden @internal */\n    public calendar: IgxCalendarComponent;\n    /** @hidden @internal */\n    public hasHeader = true;\n    /** @hidden @internal */\n    public collapsed = true;\n    /** @hidden @internal */\n    public displayValuePipe = new DatePickerDisplayValuePipe(this);\n    /** @hidden @internal */\n    public inputValuePipe = new DatePickerInputValuePipe(this);\n    /** @hidden @internal */\n    public dateFormatParts = [];\n    /** @hidden @internal */\n    public rawDateString: string;\n    /** @hidden @internal */\n    public inputMask: string;\n    /** @hidden @internal */\n    public isEmpty = true;\n    /** @hidden @internal */\n    public invalidDate = '';\n\n    private readonly spinDelta = 1;\n    private readonly defaultLocale = 'en';\n\n    private _formatOptions = {\n        day: 'numeric',\n        month: 'short',\n        weekday: 'short',\n        year: 'numeric'\n    };\n    private _formatViews = {\n        day: false,\n        month: true,\n        year: false\n    };\n    private _destroy$ = new Subject<boolean>();\n    private _statusChanges$: Subscription;\n    private _templateInputBlur$: Subscription;\n    private _componentID: string;\n    private _format: string;\n    private _value: Date;\n    private _isInEditMode: boolean;\n    private _disabledDates: DateRangeDescriptor[] = null;\n    private _specialDates: DateRangeDescriptor[] = null;\n    private _modalOverlay: OverlaySettings;\n    private _dropDownOverlaySettings: OverlaySettings;\n    private _positionSettings: PositionSettings;\n    private _defaultDropDownOverlaySettings: OverlaySettings;\n    private _modalOverlaySettings: OverlaySettings;\n    private _transformedDate;\n    private _onOpen = new EventEmitter<IgxDatePickerComponent>();\n    private _onClose = new EventEmitter<IgxDatePickerComponent>();\n    private _ngControl: NgControl = null;\n\n    //#region ControlValueAccessor\n\n    private _onChangeCallback: (_: Date) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n    private _onValidatorChange = () => { };\n\n    /** @hidden @internal */\n    public writeValue(value: Date) {\n        this._value = value;\n        // TODO: do we need next call\n        this._cdr.markForCheck();\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: (_: Date) => void) { this._onChangeCallback = fn; }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n\n    /** @hidden @internal */\n    public setDisabledState(isDisabled: boolean): void { this.disabled = isDisabled; }\n\n    /** @hidden @internal */\n    public registerOnValidatorChange(fn: any) {\n        this._onValidatorChange = fn;\n    }\n\n    /** @hidden @internal */\n    public validate(): ValidationErrors | null {\n        if (!!this.value && this.disabledDates && isDateInRanges(this.value, this.disabledDates)) {\n            return { dateIsDisabled: true };\n        }\n        return null;\n    }\n    //#endregion\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.spacebar', ['$event'])\n    @HostListener('keydown.space', ['$event'])\n    public onSpaceClick(event: KeyboardEvent) {\n        this.openDialog();\n        event.preventDefault();\n    }\n\n    /** @hidden */\n    public getEditElement() {\n        const inputDirectiveElementRef = this._inputElementRef || this._inputUserTemplateElementRef;\n        return (inputDirectiveElementRef) ? inputDirectiveElementRef.nativeElement : null;\n    }\n\n    /** @hidden @internal */\n    public get inputGroupElement(): HTMLElement {\n        return this.inputGroup?.element.nativeElement;\n    }\n\n    /** @hidden @internal */\n    public get inputGroup(): IgxInputGroupComponent {\n        return this._inputGroup || this._inputGroupUserTemplate || null;\n    }\n\n    /** @hidden @internal */\n    public get inputDirective(): IgxInputDirective {\n        return this._inputDirective || this._inputDirectiveUserTemplates.first || null;\n    }\n\n    /** @hidden @internal */\n    public get labelDirective(): IgxLabelDirective {\n        return this._labelDirective || this._labelDirectiveUserTemplate || null;\n    }\n\n    /** @hidden @internal */\n    public ngOnInit(): void {\n        this._positionSettings = {\n            openAnimation: fadeIn,\n            closeAnimation: fadeOut\n        };\n\n        this._defaultDropDownOverlaySettings = {\n            target: this.inputGroupElement,\n            closeOnOutsideClick: true,\n            modal: false,\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            positionStrategy: new AutoPositionStrategy(this._positionSettings),\n            outlet: this.outlet\n        };\n\n        this._modalOverlaySettings = {\n            closeOnOutsideClick: true,\n            modal: true,\n            closeOnEscape: true,\n            outlet: this.outlet\n        };\n\n        this._overlayService.onOpening.pipe(\n            filter((overlay) => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe((eventArgs) => {\n                this._onOpening(eventArgs);\n            });\n\n        this._overlayService.onOpened.pipe(\n            filter((overlay) => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe(() => {\n                this._onOpened();\n            });\n\n        this._overlayService.onClosed.pipe(\n            filter(overlay => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe(() => {\n                this._onClosed();\n            });\n\n        this._overlayService.onClosing.pipe(\n            filter(overlay => overlay.id === this._componentID),\n            takeUntil(this._destroy$)).subscribe((event) => {\n                this.onClosing.emit(event);\n                // If canceled in a user onClosing handler\n                if (event.cancel) {\n                    return;\n                }\n                // Do not focus the input if clicking outside in dropdown mode\n                const input = this.getEditElement();\n                if (input && !(event.event && this.mode === InteractionMode.DropDown)) {\n                    input.focus();\n                } else {\n                    // outside click\n                    this._updateValidityOnBlur();\n                }\n            });\n\n        if (this.mode === InteractionMode.DropDown) {\n            this.dateFormatParts = DatePickerUtil.parseDateFormat(this.mask, this.locale);\n            if (this.mask === undefined) {\n                this.mask = DatePickerUtil.getMask(this.dateFormatParts);\n            }\n            this.inputMask = DatePickerUtil.getInputMask(this.dateFormatParts);\n        }\n\n        this._ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /** @hidden @internal */\n    public ngAfterViewInit() {\n        if (this.mode === InteractionMode.DropDown && this._inputElementRef) {\n            fromEvent(this._inputElementRef.nativeElement, 'keydown').pipe(\n                throttle(() => interval(0, animationFrameScheduler)),\n                takeUntil(this._destroy$)\n            ).subscribe((res) => this.onKeyDown(res));\n        }\n\n        if (this._ngControl) {\n            this._statusChanges$ = this._ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n        }\n\n        this._inputDirectiveUserTemplates.changes.subscribe(() => {\n            this.attachTemplateBlur();\n        });\n        this.attachTemplateBlur();\n    }\n\n    private attachTemplateBlur() {\n        if (this._templateInputBlur$) {\n            this._templateInputBlur$.unsubscribe();\n        }\n\n        if (this._inputDirectiveUserTemplates.first) {\n            const directive = this._inputDirectiveUserTemplates.first;\n            this._templateInputBlur$ = fromEvent(directive.nativeElement, 'blur').pipe(\n                takeUntil(this._destroy$)).subscribe((res) => {\n                    this.rawDateString = (res.target as HTMLInputElement).value;\n                    this.onBlur(res, false);\n                });\n            // TODO: Refactor custom template handling.\n            // Revise blur handling when custom template is passed\n        }\n    }\n\n    public ngAfterViewChecked() {\n        // If one sets mode at run time this forces initialization of new igxInputGroup\n        // As a result a new igxInputDirective is initialized too. In ngAfterViewInit of\n        // the new directive isRequired of the igxInputGroup is set again. However\n        // ngAfterViewInit of date picker is not called again and we may finish with wrong\n        // isRequired in igxInputGroup. This is why we should set it her, only when needed\n        if (this.inputGroup && this.inputGroup.isRequired !== this.required) {\n            this.inputGroup.isRequired = this.required;\n            this._cdr.detectChanges();\n        }\n        // TODO: persist validation state when dynamically changing 'dropdown' to 'dialog' ot vice versa.\n        // For reference -> it is currently persisted if a user template is passed (as template is not recreated)\n\n        if (this.labelDirective) {\n            this._renderer.setAttribute(this.inputDirective.nativeElement, 'aria-labelledby', this.labelDirective.id);\n        }\n    }\n\n    protected onStatusChanged() {\n        if ((this._ngControl.control.touched || this._ngControl.control.dirty) &&\n            (this.inputDirective && this._ngControl.control.validator || this._ngControl.control.asyncValidator)) {\n            if (this.inputGroup.isFocused) {\n                this.inputDirective.valid = this._ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n            } else {\n                this.inputDirective.valid = this._ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n            }\n        }\n\n        if (this.inputGroup && this.inputGroup.isRequired !== this.required) {\n            this.inputGroup.isRequired = this.required;\n        }\n    }\n\n    /** @hidden @internal */\n    public ngOnDestroy(): void {\n        if (this._componentID) {\n            this._overlayService.hide(this._componentID);\n        }\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n\n    /**\n     * Selects today's date from calendar.\n     *  @remarks\n     * Changes the input field value, @calendar.viewDate and @calendar.value.\n     *  @example\n     * ```typescript\n     * this.datePicker.triggerTodaySelection();\n     * ```\n     */\n    public triggerTodaySelection(): void {\n        const today = new Date(Date.now());\n        this.handleSelection(today);\n    }\n\n    /**\n     * Change the calendar selection.\n     * @remarks\n     * Calling this method will emit the @calendar.onSelection event,\n     * which will fire @handleSelection method.\n     * @example\n     * ```typescript\n     * this.datePicker.selectDate(this.date);\n     * ```\n     * @param date passed date that has to be set to the calendar.\n     */\n    public selectDate(date: Date): void {\n        const oldValue = this.value;\n        this.value = date;\n\n        this.emitValueChangeEvent(oldValue, this.value);\n        this.onSelection.emit(date);\n    }\n\n    /**\n     * Deselects the calendar date.\n     * @example\n     * ```typescript\n     * this.datePicker.deselectDate();\n     * ```\n     */\n    public deselectDate(): void {\n        const oldValue = this.value;\n        this.value = null;\n        this.emitValueChangeEvent(oldValue, this.value);\n        if (this.calendar) {\n            this.calendar.deselectDate();\n        }\n    }\n\n    /**\n     * Opens the date picker drop down or dialog.\n     * @param target HTMLElement - the target element to use for positioning the drop down container according to\n     * @example\n     * ```typescript\n     * this.datePicker.openDialog(target);\n     * ```\n     */\n    public openDialog(): void {\n        if (!this.collapsed || this.disabled) {\n            return;\n        }\n\n        switch (this.mode) {\n            case InteractionMode.Dialog: {\n                this.hasHeader = true;\n                const modalOverlay = (this.modalOverlaySettings !== undefined) ? this._modalOverlay : this._modalOverlaySettings;\n                this._componentID = this._overlayService.attach(IgxCalendarContainerComponent, modalOverlay, this._moduleRef);\n                this._overlayService.show(this._componentID);\n                break;\n            }\n            case InteractionMode.DropDown: {\n                this.hasHeader = false;\n                const target = this.inputGroupElement;\n                if (target) {\n                    this.dropDownOverlaySettings.target = target;\n                }\n                this._componentID = this._overlayService.attach(IgxCalendarContainerComponent,\n                    this.dropDownOverlaySettings, this._moduleRef);\n                this._overlayService.show(this._componentID);\n                break;\n            }\n        }\n    }\n\n    /**\n     * Close the calendar.\n     *\n     * @hidden @internal\n     */\n    public closeCalendar(): void {\n        this._overlayService.hide(this._componentID);\n    }\n\n    /**\n     * Clear the input field, date picker value and calendar selection.\n     *\n     * @hidden @internal\n     */\n    public clear(): void {\n        if (!this.disabled) {\n            this.isEmpty = true;\n            this.invalidDate = '';\n            this.deselectDate();\n            this._setCursorPosition(0);\n        }\n    }\n\n    /**\n     * Evaluates when @calendar.onSelection event was fired\n     * and update the input value.\n     *\n     * @param event selected value from calendar.\n     *\n     * @hidden @internal\n     */\n    public handleSelection(date: Date): void {\n        if (this.value) {\n            date.setHours(this.value.getHours());\n            date.setMinutes(this.value.getMinutes());\n            date.setSeconds(this.value.getSeconds());\n            date.setMilliseconds(this.value.getMilliseconds());\n        }\n        const oldValue = this.value;\n        this.value = date;\n\n        this.emitValueChangeEvent(oldValue, this.value);\n        this.calendar.viewDate = date;\n        this.closeCalendar();\n        this.onSelection.emit(date);\n    }\n\n    /** @hidden @internal */\n    public onOpenClick(event: MouseEvent) {\n        event.stopPropagation();\n        this.openDialog();\n    }\n\n    /** @hidden @internal */\n    public onBlur(event, calcDate = true): void {\n        this._isInEditMode = false;\n        if (this.mode === InteractionMode.DropDown && calcDate) {\n            this.calculateDate(event.target.value, event.type);\n        }\n\n        if (this.collapsed) {\n            this._updateValidityOnBlur();\n        }\n    }\n\n    /** @hidden @internal */\n    public onFocus(): void {\n        this._isInEditMode = true;\n        if (this.value && this.invalidDate === '') {\n            this._transformedDate = this._getEditorDate(this.value);\n        }\n    }\n\n    /** @hidden @internal */\n    public onKeyDown(event) {\n        switch (event.key) {\n            case KEYS.UP_ARROW:\n            case KEYS.UP_ARROW_IE:\n                event.preventDefault();\n                event.stopPropagation();\n                this.spinValue(event.target.value, 1, event.type);\n                break;\n            case KEYS.DOWN_ARROW:\n            case KEYS.DOWN_ARROW_IE:\n                if (event.altKey) {\n                    this.openDialog();\n                } else {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.spinValue(event.target.value, -1, event.type);\n                }\n                break;\n            default:\n                break;\n        }\n    }\n\n    /** @hidden @internal */\n    public onWheel(event) {\n        if (this._isInEditMode) {\n            event.preventDefault();\n            event.stopPropagation();\n            const sign = (event.deltaY > 0) ? -1 : 1;\n            this.spinValue(event.target.value, sign, event.type);\n        }\n    }\n\n    /** @hidden @internal */\n    public onInput(event) {\n        /**\n         * Fix for #8165 until refactoring (#6483).\n         * The IgxDateTimeEditor will be used to handle all inputs, i.e. this handler will be removed.\n         * It extends the IgxMaskDirective which contains logic that handles this issue.\n         */\n        if (isIE() && !this._isInEditMode && !this.inputGroup.isFocused) { return; }\n        const targetValue = event.target.value;\n        const cursorPosition = this._getCursorPosition();\n        const checkInput = DatePickerUtil.checkForCompleteDateInput(this.dateFormatParts, targetValue);\n        this._isInEditMode = true;\n\n        if (targetValue !== DatePickerUtil.maskToPromptChars(this.inputMask)) {\n            this.isEmpty = false;\n        }\n\n        // If all date parts are completed, change the date-picker value, stay in edit mode\n        if (checkInput === 'complete' && event.inputType !== 'deleteContentBackward') {\n            this._transformedDate = targetValue;\n            this.calculateDate(targetValue, event.type);\n            this._setCursorPosition(cursorPosition);\n        } else if (checkInput === 'partial') {\n            // While editing, if one date part is deleted, date-picker value is set to null, the remaining input stays intact.\n            this.deselectDate();\n            requestAnimationFrame(() => {\n                this.getEditElement().value = targetValue;\n                this._setCursorPosition(cursorPosition);\n            });\n        } else if (checkInput === 'empty') {\n            // Total clean-up as input is deleted.\n            this.isEmpty = true;\n            this.deselectDate();\n        }\n    }\n\n    private emitValueChangeEvent(oldValue: Date, newValue: Date) {\n        if (!isEqual(oldValue, newValue)) {\n            this.valueChange.emit(newValue);\n        }\n    }\n\n    private calculateDate(dateString: string, invokedByEvent: string): void {\n        if (dateString !== '') {\n            const prevDateValue = this.value;\n            const inputValue = (invokedByEvent === 'blur') ? this.rawDateString : dateString;\n            const newDateArray = DatePickerUtil.parseDateArray(this.dateFormatParts, prevDateValue, inputValue);\n\n            if (newDateArray.state === DateState.Valid) {\n                const newValue = newDateArray.date;\n                // Restore the time part if any\n                if (prevDateValue) {\n                    newValue.setHours(prevDateValue.getHours());\n                    newValue.setMinutes(prevDateValue.getMinutes());\n                    newValue.setSeconds(prevDateValue.getSeconds());\n                    newValue.setMilliseconds(prevDateValue.getMilliseconds());\n                }\n\n                if (this.disabledDates === null\n                    || (this.disabledDates !== null && !isDateInRanges(newValue, this.disabledDates))) {\n                    const oldValue = this.value;\n                    this.value = newValue;\n\n                    this.emitValueChangeEvent(oldValue, this.value);\n                    this.invalidDate = '';\n                } else {\n                    const args: IDatePickerDisabledDateEventArgs = {\n                        datePicker: this,\n                        currentValue: newValue,\n                    };\n                    this.onDisabledDate.emit(args);\n                }\n            } else {\n                const args: IDatePickerValidationFailedEventArgs = {\n                    datePicker: this,\n                    prevValue: prevDateValue\n                };\n                this.invalidDate = dateString;\n                this.onValidationFailed.emit(args);\n            }\n        }\n    }\n\n    private spinValue(inputValue: string, sign: number, eventType: string): void {\n        this._isInEditMode = true;\n        this.isEmpty = false;\n        const cursorPosition = this._getCursorPosition();\n\n        const modifiedInputValue =\n            DatePickerUtil.getModifiedDateInput(this.dateFormatParts, inputValue, cursorPosition, this.spinDelta * sign, this.isSpinLoop);\n\n        this.getEditElement().value = modifiedInputValue;\n        this._setCursorPosition(cursorPosition);\n\n        const checkInput = DatePickerUtil.checkForCompleteDateInput(this.dateFormatParts, modifiedInputValue);\n        if (checkInput === 'complete') {\n            this._isInEditMode = true;\n            this.calculateDate(modifiedInputValue, eventType);\n            this._setCursorPosition(cursorPosition);\n        }\n    }\n\n    private _onOpening(event: OverlayCancelableEventArgs) {\n        this._initializeCalendarContainer(event.componentRef.instance as IgxCalendarContainerComponent);\n        this.collapsed = false;\n    }\n\n    private _onOpened(): void {\n        this.onOpened.emit(this);\n\n        if (this.calendar) {\n            this._focusCalendarDate();\n        }\n    }\n\n    private _onClosed(): void {\n        this.collapsed = true;\n        this._componentID = null;\n        this.onClosed.emit(this);\n    }\n\n    private _initializeCalendarContainer(componentInstance: IgxCalendarContainerComponent) {\n        this.calendar = componentInstance.calendar;\n        const isVertical = (this.vertical && this.mode === InteractionMode.Dialog);\n        this.calendar.hasHeader = this.hasHeader;\n        this.calendar.formatOptions = this.formatOptions;\n        this.calendar.formatViews = this.formatViews;\n        this.calendar.locale = this.locale;\n        this.calendar.vertical = isVertical;\n        this.calendar.weekStart = this.weekStart;\n        this.calendar.specialDates = this.specialDates;\n        this.calendar.disabledDates = this.disabledDates;\n        this.calendar.headerTemplate = this.headerTemplate;\n        this.calendar.subheaderTemplate = this.subheaderTemplate;\n        this.calendar.hideOutsideDays = this.hideOutsideDays;\n        this.calendar.monthsViewNumber = this.monthsViewNumber;\n        this.calendar.showWeekNumbers = this.showWeekNumbers;\n        this.calendar.onSelection.pipe(takeUntil(this._destroy$)).subscribe((ev: Date) => this.handleSelection(ev));\n\n        if (this.value) {\n            this.calendar.value = this.value;\n            this.calendar.viewDate = this.value;\n        }\n\n        componentInstance.mode = this.mode;\n        componentInstance.vertical = isVertical;\n        componentInstance.cancelButtonLabel = this.cancelButtonLabel;\n        componentInstance.todayButtonLabel = this.todayButtonLabel;\n        componentInstance.datePickerActions = this.datePickerActionsDirective;\n\n        componentInstance.onClose.pipe(takeUntil(this._destroy$)).subscribe(() => this.closeCalendar());\n        componentInstance.onTodaySelection.pipe(takeUntil(this._destroy$)).subscribe(() => this.triggerTodaySelection());\n    }\n\n    // Focus a date, after the calendar appearance into DOM.\n    private _focusCalendarDate(): void {\n        requestAnimationFrame(() => {\n            this.calendar.daysView.focusActiveDate();\n        });\n    }\n\n    private _setLocaleToDate(value: Date): string {\n        if (isIE()) {\n            // this is a workaround fixing the following IE11 issue:\n            // IE11 has added character code 8206 (mark for RTL) to the output of toLocaleDateString() that\n            // precedes each portion that comprises the total date... For more information read this article:\n            // tslint:disable-next-line: max-line-length\n            // https://www.csgpro.com/blog/2016/08/a-bad-date-with-internet-explorer-11-trouble-with-new-unicode-characters-in-javascript-date-strings/\n            const localeDateStrIE = new Date(value.getFullYear(), value.getMonth(), value.getDate(),\n                value.getHours(), value.getMinutes(), value.getSeconds(), value.getMilliseconds());\n            return localeDateStrIE.toLocaleDateString(this.locale);\n        }\n\n        return value.toLocaleDateString(this.locale);\n    }\n\n    private _getCursorPosition(): number {\n        return this.getEditElement().selectionStart;\n    }\n\n    private _setCursorPosition(start: number, end: number = start): void {\n        requestAnimationFrame(() => {\n            this.getEditElement().setSelectionRange(start, end);\n        });\n    }\n\n    /**\n     * Apply custom user formatter upon date.\n     * @param formatter custom formatter function.\n     * @param date passed date\n     */\n    private _customFormatChecker(formatter: (_: Date) => string, date: Date) {\n        return this.formatter ? this.formatter(date) : this._setLocaleToDate(date);\n    }\n\n    /*\n    * Transforms the date according to the specified format when `IgxDatePickerComponent` is in edit mode\n    * using @angular/common formatDate method: https://angular.io/api/common/formatDate\n    * @param  value: string | number | Date\n    * @returns formatted string\n    */\n    private _getDisplayDate(value: any): string {\n        if (this.format && !this.formatter) {\n            const locale = this.locale || this.defaultLocale;\n            return formatDate(value, this.format, locale);\n        } else {\n            return this._customFormatChecker(this.formatter, value);\n        }\n    }\n\n    private _getEditorDate(value: any) {\n        const locale = this.locale || this.defaultLocale;\n        const changedValue = (value) ? formatDate(value, this.mask, locale) : '';\n        return DatePickerUtil.addPromptCharsEditMode(this.dateFormatParts, this.value, changedValue);\n    }\n\n    public _updateValidityOnBlur() {\n        this._onTouchedCallback();\n        const input = this.inputDirective;\n        if (input && this._ngControl && !this._ngControl.valid) {\n            input.valid = IgxInputState.INVALID;\n        } else {\n            input.valid = IgxInputState.INITIAL;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxDatePickerComponent,\n        IgxCalendarContainerComponent,\n        IgxDatePickerActionsDirective,\n        IgxDatePickerTemplateDirective,\n        DatePickerDisplayValuePipe,\n        DatePickerInputValuePipe\n    ],\n    entryComponents: [\n        IgxCalendarContainerComponent\n    ],\n    exports: [\n        IgxDatePickerComponent,\n        IgxDatePickerTemplateDirective,\n        IgxDatePickerActionsDirective,\n        DatePickerDisplayValuePipe,\n        DatePickerInputValuePipe,\n        IgxInputGroupModule\n    ],\n    imports: [\n        CommonModule,\n        IgxIconModule,\n        IgxInputGroupModule,\n        IgxCalendarModule,\n        IgxButtonModule,\n        IgxRippleModule,\n        IgxMaskModule,\n        IgxTextSelectionModule\n    ]\n})\nexport class IgxDatePickerModule { }\n","import { DOCUMENT } from '@angular/common';\nimport { Directive, HostBinding } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-dialog-title,[igxDialogTitle]'\n})\nexport class IgxDialogTitleDirective {\n\n    @HostBinding('class.igx-dialog__window-title')\n    public defaultStyle = true;\n }\n\n/**\n * @hidden\n */\n@Directive({\n    selector: 'igx-dialog-actions,[igxDialogActions]'\n})\nexport class IgxDialogActionsDirective {\n\n    @HostBinding('class.igx-dialog__window-actions')\n    public defaultClass = true;\n }\n","import { useAnimation } from '@angular/animations';\nimport { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    ViewChild,\n    AfterContentInit\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxNavigationService, IToggleView } from '../core/navigation';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxDialogActionsDirective, IgxDialogTitleDirective } from './dialog.directives';\nimport { IgxToggleModule, IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { OverlaySettings, GlobalPositionStrategy, NoOpScrollStrategy, PositionSettings } from '../services/public_api';\nimport { slideInBottom, slideOutTop } from '../animations/slide/index';\nimport { IgxFocusModule } from '../directives/focus/focus.directive';\nimport { IBaseEventArgs } from '../core/utils';\n\nlet DIALOG_ID = 0;\n/**\n * **Ignite UI for Angular Dialog Window** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/dialog.html)\n *\n * The Ignite UI Dialog Window presents a dialog window to the user which can simply display messages or display\n * more complicated visuals such as a user sign-in form.  It also provides a right and left button\n * which can be used for custom actions.\n *\n * Example:\n * ```html\n * <button (click)=\"form.open()\">Show Dialog</button>\n * <igx-dialog #form title=\"Sign In\" rightButtonLabel=\"OK\">\n *   <div>\n *     <input type=\"text\" igxInput/>\n *     <label igxLabel>Username</label>\n *   </div>\n *   <div>\n *     <input type=\"password\" igxInput/>\n *     <label igxLabel>Password</label>\n *   </div>\n * </igx-dialog>\n * ```\n */\n@Component({\n    selector: 'igx-dialog',\n    templateUrl: 'dialog-content.component.html'\n})\nexport class IgxDialogComponent implements IToggleView, OnInit, OnDestroy, AfterContentInit {\n    private static NEXT_ID = 1;\n    private static readonly DIALOG_CLASS = 'igx-dialog';\n\n\n\n    @ViewChild(IgxToggleDirective, { static: true })\n    public toggleRef: IgxToggleDirective;\n\n    /**\n     * An @Input property that sets the value of the `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-dialog [id]=\"'igx-dialog-56'\" #alert title=\"Notification\"\n     *  leftButtonLabel=\"OK\" (onLeftButtonSelect)=\"alert.close()\">\n     * </igx-dialog>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-dialog-${DIALOG_ID++}`;\n\n    /**\n     * Controls whether the dialog should be shown as modal. Defaults to `true`\n     * ```html\n     * <igx-dialog [isModal]=\"false\" ></igx-dialog>\n     * ```\n     */\n    @Input()\n    public get isModal() {\n        return this._isModal;\n    }\n\n    public set isModal(val: boolean) {\n        this._overlayDefaultSettings.modal = val;\n        this._isModal = val;\n    }\n\n    /**\n     * Controls whether the dialog should close when `Esc` key is pressed. Defaults to `true`\n     * ```html\n     * <igx-dialog [closeOnEscape]=\"false\" ></igx-dialog>\n     * ```\n     */\n    @Input()\n    public get closeOnEscape() {\n        return this._closeOnEscape;\n    }\n\n    public set closeOnEscape(val: boolean) {\n        this._overlayDefaultSettings.closeOnEscape = val;\n        this._closeOnEscape = val;\n    }\n\n    /**\n     * An @Input property controlling the `title` of the dialog.\n     * ```html\n     * <igx-dialog title=\"Notification\" #alert leftButtonLabel=\"OK\" (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public title = '';\n\n    /**\n     *  An @Input property controlling the `message` of the dialog.\n     * ```html\n     * <igx-dialog message=\"Your email was sent!\" #alert leftButtonLabel=\"OK\" (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public message = '';\n\n    /**\n     * An @Input property to set the `label` of the left button of the dialog.\n     * ```html\n     * <igx-dialog leftButtonLabel=\"OKAY\" #alert title=\"Notification\"  (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public leftButtonLabel = '';\n\n    /**\n     * An @Input property to set the left button `type`. The types are `flat`, `raised` and `fab`.\n     * The `flat` type button is a rectangle and doesn't have a shadow. <br>\n     * The `raised` type button is also a rectangle but has a shadow. <br>\n     * The `fab` type button is a circle with a shadow. <br>\n     * The default value is `flat`.\n     * ```html\n     * <igx-dialog leftButtonType=\"raised\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public leftButtonType = 'flat';\n    /**\n     * An @Input property to set the left button color. The property accepts all valid CSS color property values.\n     * ```html\n     * <igx-dialog leftButtonColor=\"yellow\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public leftButtonColor = '';\n\n    /**\n     * An @Input property to set the left button `background-color`. The property accepts all valid CSS color property values.\n     * ```html\n     * <igx-dialog leftButtonBackgroundColor=\"black\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public leftButtonBackgroundColor = '';\n\n    /**\n     * An @Input property to set the left button `ripple`. The `ripple` animates a click/tap to a component as a series of fading waves.\n     * The property accepts all valid CSS color property values.\n     * ```html\n     * <igx-dialog leftButtonRipple=\"green\" leftButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public leftButtonRipple = '';\n\n    /**\n     * An @Input property to set the `label` of the right button of the dialog.\n     * ```html\n     * <igx-dialog rightButtonLabel=\"OKAY\" #alert title=\"Notification\"  (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public rightButtonLabel = '';\n\n    /**\n     * An @Input property to set the right button `type`. The types are `flat`, `raised` and `fab`.\n     * The `flat` type button is a rectangle and doesn't have a shadow. <br>\n     * The `raised` type button is also a rectangle but has a shadow. <br>\n     * The `fab` type button is a circle with a shadow. <br>\n     * The default value is `flat`.\n     * ```html\n     * <igx-dialog rightButtonType=\"fab\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public rightButtonType = 'flat';\n\n    /**\n     * An @Input property to set the right button `color`. The property accepts all valid CSS color property values.\n     * ```html\n     * <igx-dialog rightButtonColor=\"yellow\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public rightButtonColor = '';\n\n    /**\n     * An @Input property to set the right button `background-color`. The property accepts all valid CSS color property values.\n     * ```html\n     * <igx-dialog rightButtonBackgroundColor=\"black\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public rightButtonBackgroundColor = '';\n\n    /**\n     * An @Input property to set the right button `ripple`.\n     * ```html\n     * <igx-dialog rightButtonRipple=\"green\" rightButtonLabel=\"OKAY\" #alert (onLeftButtonSelect)=\"alert.close()\"></igx-dialog>\n     * ```\n     */\n    @Input()\n    public rightButtonRipple = '';\n\n    /**\n     * An @Input property that allows you to enable the \"close on click outside the dialog\". By default it's disabled.\n     * ```html\n     * <igx-dialog closeOnOutsideSelect=\"true\" leftButtonLabel=\"Cancel\" (onLeftButtonSelect)=\"dialog.close()\"\n     * rightButtonLabel=\"OK\" rightButtonRipple=\"#4CAF50\" (onRightButtonSelect)=\"onDialogOKSelected($event)\">\n     * </igx-dialog>\n     * ```\n     */\n    @Input()\n    get closeOnOutsideSelect() {\n        return this._closeOnOutsideSelect;\n    }\n\n    set closeOnOutsideSelect(val: boolean) {\n        this._overlayDefaultSettings.closeOnOutsideClick = val;\n        this._closeOnOutsideSelect = val;\n    }\n\n    /**\n     * Get the position and animation settings used by the dialog.\n     * ```typescript\n     * @ViewChild('alert', { static: true }) public alert: IgxDialogComponent;\n     * let currentPosition: PositionSettings = this.alert.positionSettings\n     * ```\n     */\n    @Input()\n    public get positionSettings(): PositionSettings {\n        return this._positionSettings;\n    }\n\n    /**\n     * Set the position and animation settings used by the dialog.\n     * ```typescript\n     * import { slideInLeft, slideOutRight } from 'igniteui-angular';\n     * ...\n     * @ViewChild('alert', { static: true }) public alert: IgxDialogComponent;\n     *  public newPositionSettings: PositionSettings = {\n     *      openAnimation: useAnimation(slideInTop, { params: { duration: '2000ms' } }),\n     *      closeAnimation: useAnimation(slideOutBottom, { params: { duration: '2000ms'} }),\n     *      horizontalDirection: HorizontalAlignment.Left,\n     *      verticalDirection: VerticalAlignment.Middle,\n     *      horizontalStartPoint: HorizontalAlignment.Left,\n     *      verticalStartPoint: VerticalAlignment.Middle,\n     *      minSize: { height: 100, width: 100 }\n     *  };\n     * this.alert.positionSettings = this.newPositionSettings;\n     * ```\n     */\n    public set positionSettings(settings: PositionSettings) {\n        this._positionSettings = settings;\n        this._overlayDefaultSettings.positionStrategy = new GlobalPositionStrategy(this._positionSettings);\n    }\n\n    /**\n     * An event that is emitted when the dialog is opened.\n     * ```html\n     * <igx-dialog (onOpen)=\"onDialogOpenHandler($event)\" (onLeftButtonSelect)=\"dialog.close()\" rightButtonLabel=\"OK\">\n     * </igx-dialog>\n     * ```\n     */\n    @Output()\n    public onOpen = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * An event that is emitted when the dialog is closed.\n     * ```html\n     * <igx-dialog (onClose)=\"onDialogCloseHandler($event)\" title=\"Confirmation\" leftButtonLabel=\"Cancel\" rightButtonLabel=\"OK\">\n     * </igx-dialog>\n     * ```\n     */\n    @Output()\n    public onClose = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * An event that is emitted when the left button is clicked.\n     * ```html\n     * <igx-dialog (onLeftButtonSelect)=\"onDialogOKSelected($event)\" #dialog leftButtonLabel=\"OK\" rightButtonLabel=\"Cancel\">\n     * </igx-dialog>\n     * ```\n     */\n    @Output()\n    public onLeftButtonSelect = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * An event that is emitted when the right button is clicked.\n     * ```html\n     * <igx-dialog (onRightButtonSelect)=\"onDialogOKSelected($event)\"\n     * #dialog title=\"Confirmation\" (onLeftButtonSelect)=\"dialog.close()\" rightButtonLabel=\"OK\"\n     * rightButtonRipple=\"#4CAF50\" closeOnOutsideSelect=\"true\">\n     * </igx-dialog>\n     * ```\n     */\n    @Output()\n    public onRightButtonSelect = new EventEmitter<IDialogEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @Output() public isOpenChange = new EventEmitter<boolean>();\n\n    private _positionSettings: PositionSettings = {\n        openAnimation: useAnimation(slideInBottom, { params: { fromPosition: 'translateY(100%)' } }),\n        closeAnimation: useAnimation(slideOutTop, { params: { toPosition: 'translateY(-100%)' } })\n    };\n\n    private _overlayDefaultSettings: OverlaySettings;\n    private _closeOnOutsideSelect = false;\n    private _closeOnEscape = true;\n    private _isModal = true;\n    protected destroy$ = new Subject<boolean>();\n\n    /**\n     * @hidden\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * The default `tabindex` attribute for the component\n     *\n     * @hidden\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = -1;\n\n    private _titleId: string;\n\n    /**\n     * Returns the value of state. Possible state values are \"open\" or \"close\".\n     * ```typescript\n     * @ViewChild(\"MyDialog\")\n     * public dialog: IgxDialogComponent;\n     * ngAfterViewInit() {\n     *     let dialogState = this.dialog.state;\n     * }\n     * ```\n     */\n    get state(): string {\n        return this.isOpen ? 'open' : 'close';\n    }\n\n    /**\n     * State of the dialog.\n     *\n     * ```typescript\n     * // get\n     * let dialogIsOpen = this.dialog.isOpen;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-dialog [isOpen]='false'></igx-dialog>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <!--set-->\n     * <igx-dialog [(isOpen)]='model.isOpen'></igx-dialog>\n     * ```\n     */\n    @Input()\n    public get isOpen() {\n        return !this.toggleRef.collapsed;\n    }\n    public set isOpen(value: boolean) {\n\n        this.isOpenChange.emit(value);\n        if (value) {\n            this.open();\n        } else {\n            this.close();\n        }\n    }\n\n    @HostBinding('class.igx-dialog--hidden')\n    get isCollapsed() {\n        return this.toggleRef.collapsed;\n    }\n\n    /**\n     * Returns the value of the role of the dialog. The valid values are `dialog`, `alertdialog`, `alert`.\n     * ```typescript\n     * @ViewChild(\"MyDialog\")\n     * public dialog: IgxDialogComponent;\n     * ngAfterViewInit() {\n     *     let dialogRole = this.dialog.role;\n     * }\n     *  ```\n     */\n    @Input()\n    get role() {\n        if (this.leftButtonLabel !== '' && this.rightButtonLabel !== '') {\n            return 'dialog';\n        } else if (\n            this.leftButtonLabel !== '' ||\n            this.rightButtonLabel !== ''\n        ) {\n            return 'alertdialog';\n        } else {\n            return 'alert';\n        }\n    }\n\n    /**\n     * Returns the value of the title id.\n     * ```typescript\n     *  @ViewChild(\"MyDialog\")\n     * public dialog: IgxDialogComponent;\n     * ngAfterViewInit() {\n     *     let dialogTitle = this.dialog.titleId;\n     * }\n     * ```\n     */\n    @Input()\n    get titleId() {\n        return this._titleId;\n    }\n\n    constructor(\n        private elementRef: ElementRef,\n        @Optional() private navService: IgxNavigationService\n    ) {\n        this._titleId = IgxDialogComponent.NEXT_ID++ + '_title';\n\n        this._overlayDefaultSettings = {\n            positionStrategy: new GlobalPositionStrategy(this._positionSettings),\n            scrollStrategy: new NoOpScrollStrategy(),\n            modal: this.isModal,\n            closeOnEscape: this._closeOnEscape,\n            closeOnOutsideClick: this.closeOnOutsideSelect\n        };\n    }\n\n    ngAfterContentInit() {\n        this.toggleRef.onClosing.pipe(takeUntil(this.destroy$)).subscribe(() => this.emitCloseFromDialog());\n    }\n\n    private emitCloseFromDialog() {\n        this.onClose.emit({ dialog: this, event: null });\n    }\n\n    /**\n     * A method that opens the dialog.\n     * @memberOf {@link IgxDialogComponent}\n     * ```html\n     * <button (click)=\"dialog.open() igxButton=\"raised\" igxButtonColor=\"white\" igxRipple=\"white\">Trigger Dialog</button>\n     * <igx-dialog #dialog></igx-dialog>\n     * ```\n     */\n    public open(overlaySettings: OverlaySettings = this._overlayDefaultSettings) {\n        this.toggleRef.open(overlaySettings);\n        this.onOpen.emit({ dialog: this, event: null });\n        if (!this.leftButtonLabel && !this.rightButtonLabel) {\n            this.toggleRef.element.focus();\n        }\n    }\n\n    /**\n     * A method that that closes the dialog.\n     *  @memberOf {@link IgxDialogComponent}\n     * ```html\n     * <button (click)=\"dialog.close() igxButton=\"raised\" igxButtonColor=\"white\" igxRipple=\"white\">Trigger Dialog</button>\n     * <igx-dialog #dialog></igx-dialog>\n     * ```\n     */\n    public close() {\n        // `onClose` will emit from `toggleRef.onClosing` subscription\n        this.toggleRef.close();\n    }\n\n\n    /**\n     * A method that opens/closes the dialog.\n     * @memberOf {@link IgxDialogComponent}\n     * ```html\n     * <button (click)=\"dialog.toggle() igxButton=\"raised\" igxButtonColor=\"white\" igxRipple=\"white\">Trigger Dialog</button>\n     * <igx-dialog #dialog></igx-dialog>\n     * ```\n     */\n    public toggle() {\n        this.isOpen ? this.close() : this.open();\n    }\n\n    /**\n     * @hidden\n     */\n    public onDialogSelected(event) {\n        event.stopPropagation();\n        if (\n            this.isOpen &&\n            this.closeOnOutsideSelect &&\n            event.target.classList.contains(IgxDialogComponent.DIALOG_CLASS)\n        ) {\n            this.close();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onInternalLeftButtonSelect(event) {\n        this.onLeftButtonSelect.emit({ dialog: this, event });\n    }\n\n    /**\n     * @hidden\n     */\n    public onInternalRightButtonSelect(event) {\n        this.onRightButtonSelect.emit({ dialog: this, event });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        if (this.navService && this.id) {\n            this.navService.add(this.id, this);\n        }\n    }\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        if (this.navService && this.id) {\n            this.navService.remove(this.id);\n        }\n\n    }\n}\n\nexport interface IDialogEventArgs extends IBaseEventArgs {\n    dialog: IgxDialogComponent;\n    event: Event;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxDialogComponent, IgxDialogTitleDirective, IgxDialogActionsDirective],\n    exports: [IgxDialogComponent, IgxDialogTitleDirective, IgxDialogActionsDirective],\n    imports: [CommonModule, IgxToggleModule, IgxButtonModule, IgxRippleModule, IgxFocusModule]\n})\nexport class IgxDialogModule { }\n","\nimport { mkenum } from '../../core/utils';\nexport const FilterMode = mkenum({\n    quickFilter: 'quickFilter',\n    excelStyleFilter: 'excelStyleFilter'\n});\nexport type FilterMode = (typeof FilterMode)[keyof typeof FilterMode];\n\nexport const GridSummaryPosition = mkenum({\n    top: 'top',\n    bottom: 'bottom'\n});\nexport type GridSummaryPosition = (typeof GridSummaryPosition)[keyof typeof GridSummaryPosition];\n\nexport const GridSummaryCalculationMode = mkenum({\n    rootLevelOnly: 'rootLevelOnly',\n    childLevelsOnly: 'childLevelsOnly',\n    rootAndChildLevels: 'rootAndChildLevels'\n});\nexport type GridSummaryCalculationMode = (typeof GridSummaryCalculationMode)[keyof typeof GridSummaryCalculationMode];\n\nexport type GridKeydownTargetType =\n    'dataCell' |\n    'summaryCell' |\n    'groupRow' |\n    'hierarchicalRow' |\n    'headerCell' |\n    'masterDetailRow';\n\nexport const GridSelectionMode = mkenum({\n    none: 'none',\n    single: 'single',\n    multiple: 'multiple'\n});\nexport type GridSelectionMode = (typeof GridSelectionMode)[keyof typeof GridSelectionMode];\n\nexport const ColumnDisplayOrder = mkenum({\n    Alphabetical: 'Alphabetical',\n    DisplayOrder: 'DisplayOrder'\n});\nexport type ColumnDisplayOrder = (typeof ColumnDisplayOrder)[keyof typeof ColumnDisplayOrder];\n\nexport enum ColumnPinningPosition {\n    Start,\n    End\n}\n\nexport enum RowPinningPosition {\n    Top,\n    Bottom\n}\n\nexport enum GridPagingMode {\n    local,\n    remote\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    ViewChild,\n    HostBinding,\n    ChangeDetectionStrategy,\n    TemplateRef,\n    Directive,\n    OnDestroy,\n    ElementRef,\n    Input,\n    ViewRef,\n    ContentChild,\n    Output,\n    EventEmitter,\n    Optional,\n    Host,\n} from '@angular/core';\nimport { IgxOverlayService } from '../../../services/public_api';\nimport { IgxFilteringService, ExpressionUI } from '../grid-filtering.service';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../../../data-operations/filtering-expressions-tree';\nimport { cloneArray, KEYS, resolveNestedPath, parseDate, uniqueDates } from '../../../core/utils';\nimport { DataType, DataUtil } from '../../../data-operations/data-util';\nimport { Subscription, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxGridBaseDirective } from '../../grid-base.directive';\nimport { DisplayDensity } from '../../../core/density';\nimport { GridSelectionMode } from '../../common/enums';\nimport { GridBaseAPIService } from '../../api.service';\n\n/**\n * @hidden\n */\nexport class FilterListItem {\n    public value: any;\n    public label: any;\n    public isSelected: boolean;\n    public indeterminate: boolean;\n    public isFiltered: boolean;\n    public isSpecial = false;\n    public isBlanks = false;\n}\n\n@Directive({\n    selector: 'igx-excel-style-column-operations,[igxExcelStyleColumnOperations]'\n})\nexport class IgxExcelStyleColumnOperationsTemplateDirective {\n    constructor() {}\n}\n\n@Directive({\n    selector: 'igx-excel-style-filter-operations,[igxExcelStyleFilterOperations]'\n})\nexport class IgxExcelStyleFilterOperationsTemplateDirective {\n    constructor() {}\n}\n\n/**\n * A component used for presenting Excel style filtering UI for a specific column.\n * It is used internally in the Grid, but could also be hosted in a container outside of it.\n *\n * Example:\n * ```html\n * <igx-grid-excel-style-filtering\n *     [column]=\"grid1.columns[0]\">\n * </igx-grid-excel-style-filtering>\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-excel-style-filtering',\n    templateUrl: './grid.excel-style-filtering.component.html'\n})\nexport class IgxGridExcelStyleFilteringComponent implements OnDestroy {\n    private destroy$ = new Subject<boolean>();\n    private containsNullOrEmpty = false;\n    private selectAllSelected = true;\n    private selectAllIndeterminate = false;\n    private filterValues = new Set<any>();\n    private _column: IgxColumnComponent;\n    private _columnPinning: Subscription;\n    private _columnVisibilityChanged: Subscription;\n    private _sortingChanged: Subscription;\n    private _filteringChanged: Subscription;\n    private _densityChanged: Subscription;\n    private _columnMoved: Subscription;\n    private _originalDisplay: string;\n\n    /**\n     * An @Input property that sets the column.\n     */\n    @Input()\n    public set column(value: IgxColumnComponent) {\n        this._column = value;\n        this.listData = new Array<FilterListItem>();\n        this.columnChange.emit(this._column);\n\n        if (this._columnPinning) {\n            this._columnPinning.unsubscribe();\n        }\n\n        if (this._columnVisibilityChanged) {\n            this._columnVisibilityChanged.unsubscribe();\n        }\n\n        if (this._sortingChanged) {\n            this._sortingChanged.unsubscribe();\n        }\n\n        if (this._filteringChanged) {\n            this._filteringChanged.unsubscribe();\n        }\n\n        if (this._densityChanged) {\n            this._densityChanged.unsubscribe();\n        }\n\n        if (this._columnMoved) {\n            this._columnMoved.unsubscribe();\n        }\n\n        if (this._column) {\n            this._column.grid.filteringService.registerSVGIcons();\n            this.init();\n            this.sortingChanged.emit();\n\n            this._columnPinning = this.grid.onColumnPinning.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                requestAnimationFrame(() => {\n                    if (!(this.cdr as ViewRef).destroyed) {\n                        this.cdr.detectChanges();\n                    }\n                });\n            });\n            this._columnVisibilityChanged = this.grid.onColumnVisibilityChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.cdr.detectChanges();\n            });\n            this._sortingChanged =  this.grid.sortingExpressionsChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.sortingChanged.emit();\n            });\n            this._filteringChanged = this.grid.filteringExpressionsTreeChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.init();\n            });\n            this._densityChanged = this.grid.onDensityChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.cdr.detectChanges();\n            });\n            this._columnMoved = this.grid.onColumnMovingEnd.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.cdr.detectChanges();\n            });\n        }\n    }\n\n    /**\n     * Returns the current column.\n     */\n    public get column(): IgxColumnComponent {\n        return this._column;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get filteringService(): IgxFilteringService {\n        return this.grid.filteringService;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public expressionsList = new Array<ExpressionUI>();\n    /**\n     * @hidden @internal\n     */\n    public listData = new Array<FilterListItem>();\n    /**\n     * @hidden @internal\n     */\n    public uniqueValues = [];\n    /**\n     * @hidden @internal\n     */\n    public overlayService: IgxOverlayService;\n    /**\n     * @hidden @internal\n     */\n    public overlayComponentId: string;\n\n    private _minHeight;\n\n    /**\n     * Gets the minimum height.\n     */\n    @Input()\n    get minHeight(): string {\n        if (this._minHeight || this._minHeight === 0) {\n            return this._minHeight;\n        }\n\n        if (!this.inline) {\n            let minHeight = 645;\n            switch (this.displayDensity) {\n                case DisplayDensity.cosy: minHeight = 465; break;\n                case DisplayDensity.compact: minHeight = 330; break;\n                default: break;\n            }\n            return `${minHeight}px`;\n        }\n    }\n\n    /**\n     * Sets the minimum height.\n     */\n    set minHeight(value: string) {\n        this._minHeight = value;\n    }\n\n\n    private _maxHeight;\n\n    /**\n     * Gets the maximum height.\n     */\n    @Input()\n    @HostBinding('style.max-height')\n    get maxHeight(): string {\n        if (this._maxHeight) {\n            return this._maxHeight;\n        }\n\n        if (!this.inline) {\n            let maxHeight = 775;\n            switch (this.displayDensity) {\n                case DisplayDensity.cosy: maxHeight = 565; break;\n                case DisplayDensity.compact: maxHeight = 405; break;\n                default: break;\n            }\n            return `${maxHeight}px`;\n        }\n    }\n\n    /**\n     * Sets the maximum height.\n     */\n    set maxHeight(value: string) {\n        this._maxHeight = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-excel-filter')\n    className = 'igx-excel-filter';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class.igx-excel-filter--inline')\n    public inline = true;\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public loadingStart = new EventEmitter();\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public loadingEnd = new EventEmitter();\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public initialized = new EventEmitter();\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public sortingChanged = new EventEmitter();\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public columnChange = new EventEmitter<IgxColumnComponent>();\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public listDataLoaded = new EventEmitter();\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelColumnOperations', { read: TemplateRef, static: true })\n    protected defaultExcelColumnOperations: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelFilterOperations', { read: TemplateRef, static: true })\n    protected defaultExcelFilterOperations: TemplateRef<any>;\n\n    @ViewChild('mainDropdown', { read: ElementRef })\n    public mainDropdown: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxExcelStyleColumnOperationsTemplateDirective, { read: IgxExcelStyleColumnOperationsTemplateDirective })\n    public excelColumnOperationsDirective: IgxExcelStyleColumnOperationsTemplateDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxExcelStyleFilterOperationsTemplateDirective, { read: IgxExcelStyleFilterOperationsTemplateDirective })\n    public excelFilterOperationsDirective: IgxExcelStyleFilterOperationsTemplateDirective;\n\n    /**\n     * @hidden @internal\n     */\n    get grid(): IgxGridBaseDirective {\n        return this.gridAPI?.grid ?? this.column?.grid;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get displayDensity() {\n        return this.grid?.displayDensity;\n    }\n\n    constructor(\n        private cdr: ChangeDetectorRef,\n        public element: ElementRef,\n        @Host() @Optional() private gridAPI?: GridBaseAPIService<IgxGridBaseDirective>) {}\n\n    /**\n     * @hidden @internal\n     */\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    private init() {\n        this.expressionsList = new Array<ExpressionUI>();\n        this.filteringService.generateExpressionsList(this.column.filteringExpressionsTree, this.grid.filteringLogic, this.expressionsList);\n        this.populateColumnData();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectedClass() {\n        return this.column.selected ? 'igx-excel-filter__actions-selected' : 'igx-excel-filter__actions-select';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public initialize(column: IgxColumnComponent, overlayService: IgxOverlayService,\n        overlayComponentId: string) {\n        this.inline = false;\n        this.column = column;\n        this.overlayService = overlayService;\n        this.overlayComponentId = overlayComponentId;\n        if (this._originalDisplay) {\n            this.element.nativeElement.style.display = this._originalDisplay;\n        }\n\n        this.initialized.emit();\n        this.grid.onColumnMoving.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.closeDropdown();\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onPin() {\n        this.column.pinned = !this.column.pinned;\n        this.closeDropdown();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onSelect() {\n        if (!this.column.selected) {\n            this.grid.selectionService.selectColumn(this.column.field, this.grid.columnSelection === GridSelectionMode.single);\n        } else {\n            this.grid.selectionService.deselectColumn(this.column.field);\n        }\n        this.grid.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public columnSelectable() {\n        return this.grid?.columnSelection !== GridSelectionMode.none && this.column?.selectable;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onHideToggle() {\n        this.column.hidden = !this.column.hidden;\n        this.grid.onColumnVisibilityChanged.emit({ column: this.column, newValue: this.column.hidden });\n        this.closeDropdown();\n    }\n\n    private areExpressionsSelectable () {\n        if (this.expressionsList.length === 1 &&\n            (this.expressionsList[0].expression.condition.name === 'equals' ||\n                this.expressionsList[0].expression.condition.name === 'true' ||\n                this.expressionsList[0].expression.condition.name === 'false' ||\n                this.expressionsList[0].expression.condition.name === 'empty' ||\n                this.expressionsList[0].expression.condition.name === 'in')) {\n            return true;\n        }\n\n        const selectableExpressionsCount = this.expressionsList.filter(exp =>\n            (exp.beforeOperator === 1 || exp.afterOperator === 1) &&\n            (exp.expression.condition.name === 'equals' ||\n                exp.expression.condition.name === 'true' ||\n                exp.expression.condition.name === 'false' ||\n                exp.expression.condition.name === 'empty' ||\n                exp.expression.condition.name === 'in')).length;\n\n        return selectableExpressionsCount === this.expressionsList.length;\n    }\n\n    private areExpressionsValuesInTheList() {\n        if (this.column.dataType === DataType.Boolean) {\n            return true;\n        }\n\n        if (this.filterValues.size === 1) {\n            const firstValue = this.filterValues.values().next().value;\n\n            if (!firstValue && firstValue !== 0) {\n                return true;\n            }\n        }\n\n        for (let index = 0; index < this.uniqueValues.length; index++) {\n            const value = this.getExpressionValue(this.uniqueValues[index]);\n            if (this.filterValues.has(value)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    private populateColumnData() {\n        if (this.grid.uniqueColumnValuesStrategy) {\n            this.cdr.detectChanges();\n            this.renderColumnValuesRemotely();\n        } else {\n            this.renderColumnValuesFromData();\n        }\n    }\n\n    private renderColumnValuesRemotely() {\n        this.loadingStart.emit();\n        const expressionsTree: FilteringExpressionsTree = this.getColumnFilterExpressionsTree();\n\n        const prevColumn = this.column;\n        this.grid.uniqueColumnValuesStrategy(this.column, expressionsTree, (colVals: any[]) => {\n            if (!this.column || this.column !== prevColumn) {\n                return;\n            }\n\n            const columnValues = (this.column.dataType === DataType.Date) ?\n                colVals.map(value => {\n                    const label = this.getFilterItemLabel(value);\n                    return { label, value };\n                }) : colVals;\n\n            this.renderValues(columnValues);\n            this.loadingEnd.emit();\n        });\n    }\n\n    private renderColumnValuesFromData() {\n        let data = this.column.gridAPI.get_all_data((this.grid as any).id);\n        const expressionsTree = this.getColumnFilterExpressionsTree();\n\n        if (expressionsTree.filteringOperands.length) {\n            const state = { expressionsTree: expressionsTree };\n            data = DataUtil.filter(cloneArray(data), state, this.grid);\n        }\n\n        const columnField = this.column.field;\n        const columnValues = (this.column.dataType === DataType.Date) ?\n            data.map(record => {\n                const value = (resolveNestedPath(record, columnField));\n                const label = this.getFilterItemLabel(value);\n                return { label, value };\n            }) : data.map(record => resolveNestedPath(record, columnField));\n\n        this.renderValues(columnValues);\n    }\n\n    private renderValues(columnValues: any[]) {\n        this.generateUniqueValues(columnValues);\n        this.generateFilterValues(this.column.dataType === DataType.Date);\n        this.generateListData();\n    }\n\n    private generateUniqueValues(columnValues: any[]) {\n        if (this.column.dataType === DataType.String && this.column.filteringIgnoreCase) {\n            const filteredUniqueValues = columnValues.map(s => s?.toString().toLowerCase())\n                .reduce((map, val, i) => map.get(val) ? map : map.set(val, columnValues[i]),\n                    new Map);\n            this.uniqueValues = Array.from(filteredUniqueValues.values());\n        } else {\n            this.uniqueValues = this.column.dataType === DataType.Date ? uniqueDates(columnValues) : Array.from(new Set(columnValues));\n        }\n    }\n\n    private generateFilterValues(isDateColumn: boolean = false) {\n        if (isDateColumn) {\n            this.filterValues = new Set<any>(this.expressionsList.reduce((arr, e) => {\n                if (e.expression.condition.name === 'in') {\n                    return [ ...arr, ...Array.from((e.expression.searchVal as Set<any>).values()).map(v =>\n                        new Date(v).toISOString()) ];\n                }\n                return [ ...arr, ...[e.expression.searchVal ? e.expression.searchVal.toISOString() : e.expression.searchVal] ];\n            }, []));\n        } else {\n            this.filterValues = new Set<any>(this.expressionsList.reduce((arr, e) => {\n                if (e.expression.condition.name === 'in') {\n                    return [ ...arr, ...Array.from((e.expression.searchVal as Set<any>).values()) ];\n                }\n                return [ ...arr, ...[e.expression.searchVal] ];\n            }, []));\n        }\n    }\n\n    private generateListData() {\n        this.listData = new Array<FilterListItem>();\n\n        const shouldUpdateSelection = this.areExpressionsSelectable() && this.areExpressionsValuesInTheList();\n\n        if (this.column.dataType === DataType.Boolean) {\n            this.addBooleanItems();\n        } else {\n            this.addItems(shouldUpdateSelection);\n        }\n\n        this.listData.sort((a, b) => this.sortData(a, b));\n\n        if (this.containsNullOrEmpty) {\n            this.addBlanksItem(shouldUpdateSelection);\n        }\n\n        if (this.listData.length > 0) {\n            this.addSelectAllItem();\n        }\n\n        if (!(this.cdr as any).destroyed) {\n            this.cdr.detectChanges();\n        }\n\n        this.listDataLoaded.emit();\n    }\n\n    private getColumnFilterExpressionsTree() {\n        const gridExpressionsTree: IFilteringExpressionsTree = this.grid.filteringExpressionsTree;\n        const expressionsTree = new FilteringExpressionsTree(gridExpressionsTree.operator, gridExpressionsTree.fieldName);\n\n        for (const operand of gridExpressionsTree.filteringOperands) {\n            if (operand instanceof FilteringExpressionsTree) {\n                const columnExprTree = operand as FilteringExpressionsTree;\n                if (columnExprTree.fieldName === this.column.field) {\n                    break;\n                }\n            }\n            expressionsTree.filteringOperands.push(operand);\n        }\n\n        return expressionsTree;\n    }\n\n    private addBooleanItems() {\n        this.selectAllSelected = true;\n        this.selectAllIndeterminate = false;\n        this.uniqueValues.forEach(element => {\n            const filterListItem = new FilterListItem();\n            if (element !== undefined && element !== null && element !== '') {\n                if (this.column.filteringExpressionsTree) {\n                    if (element === true && this.expressionsList.find(exp => exp.expression.condition.name === 'true' )) {\n                        filterListItem.isSelected = true;\n                        filterListItem.isFiltered = true;\n                        this.selectAllIndeterminate = true;\n                    } else if (element === false && this.expressionsList.find(exp => exp.expression.condition.name === 'false' )) {\n                        filterListItem.isSelected = true;\n                        filterListItem.isFiltered = true;\n                        this.selectAllIndeterminate = true;\n                    } else {\n                        filterListItem.isSelected = false;\n                        filterListItem.isFiltered = false;\n                    }\n                } else {\n                    filterListItem.isSelected = true;\n                    filterListItem.isFiltered = true;\n                }\n                filterListItem.value = element;\n                filterListItem.label = element;\n                filterListItem.indeterminate = false;\n                this.listData.push(filterListItem);\n            } else {\n                this.containsNullOrEmpty = true;\n            }\n        });\n    }\n\n    private addItems(shouldUpdateSelection: boolean) {\n        this.selectAllSelected = true;\n        this.containsNullOrEmpty = false;\n        this.selectAllIndeterminate = false;\n\n        this.uniqueValues.forEach(element => {\n            const hasValue = (element !== undefined && element !== null && element !== '' && this.column.dataType !== DataType.Date)\n                || !!(element && element.label);\n\n            if (hasValue) {\n                const filterListItem = new FilterListItem();\n                filterListItem.isSelected = true;\n                filterListItem.isFiltered = true;\n\n                if (this.column.filteringExpressionsTree) {\n                    filterListItem.isSelected = false;\n                    filterListItem.isFiltered = false;\n\n                    if (shouldUpdateSelection) {\n                        const value = this.getExpressionValue(element);\n                        if (this.filterValues.has(value)) {\n                            filterListItem.isSelected = true;\n                            filterListItem.isFiltered = true;\n                        }\n                        this.selectAllIndeterminate = true;\n                    } else {\n                        this.selectAllSelected = false;\n                    }\n                }\n\n                filterListItem.value = this.getFilterItemValue(element);\n                filterListItem.label = this.getFilterItemLabel(element);\n                filterListItem.indeterminate = false;\n                this.listData.push(filterListItem);\n            }\n        });\n        this.containsNullOrEmpty = this.uniqueValues.length > this.listData.length;\n    }\n\n    private addSelectAllItem() {\n        const selectAll =  new FilterListItem();\n        selectAll.isSelected = this.selectAllSelected;\n        selectAll.value = this.grid.resourceStrings.igx_grid_excel_select_all;\n        selectAll.label = this.grid.resourceStrings.igx_grid_excel_select_all;\n        selectAll.indeterminate = this.selectAllIndeterminate;\n        selectAll.isSpecial = true;\n        selectAll.isFiltered = this.selectAllSelected;\n        this.listData.unshift(selectAll);\n    }\n\n    private addBlanksItem(shouldUpdateSelection) {\n        const blanks =  new FilterListItem();\n        if (this.column.filteringExpressionsTree) {\n            if (shouldUpdateSelection) {\n                if (this.filterValues.has(null)) {\n                    blanks.isSelected = true;\n                    blanks.isFiltered = true;\n                } else {\n                    blanks.isSelected = false;\n                    blanks.isFiltered = false;\n                }\n            }\n        } else {\n            blanks.isSelected = true;\n            blanks.isFiltered = true;\n        }\n        blanks.value = null;\n        blanks.label = this.grid.resourceStrings.igx_grid_excel_blanks;\n        blanks.indeterminate = false;\n        blanks.isSpecial = true;\n        blanks.isBlanks = true;\n        this.listData.unshift(blanks);\n    }\n\n    private sortData(a: FilterListItem, b: FilterListItem) {\n        let valueA = a.value;\n        let valueB = b.value;\n        if (typeof(a) === DataType.String) {\n            valueA = a.value.toUpperCase();\n            valueB = b.value.toUpperCase();\n        }\n        if (valueA < valueB) {\n            return -1;\n        } else if (valueA > valueB) {\n            return 1;\n        } else {\n            return 0;\n        }\n    }\n\n    private getFilterItemLabel(element: any) {\n        if (this.column.dataType === DataType.Date) {\n            return element && element.label ? element.label : this.column.formatter ?\n                this.column.formatter(element) :\n                this.grid.datePipe.transform(element, this.column.pipeArgs.format, this.column.pipeArgs.timezone,\n                    this.grid.locale);\n        }\n        if (this.column.dataType === DataType.Number) {\n            return this.column.formatter ?\n                this.column.formatter(element) :\n                this.grid.decimalPipe.transform(element, this.column.pipeArgs.digitsInfo, this.grid.locale);\n        }\n        return this.column.formatter ?\n            this.column.formatter(element) :\n            element;\n    }\n\n    private getFilterItemValue(element: any) {\n        if (this.column.dataType === DataType.Date) {\n            element = parseDate(element.value);\n        }\n        return element;\n    }\n\n    private getExpressionValue(element: any): string {\n        let value;\n        if (this.column.dataType === DataType.Date) {\n            value = element && element.value ? new Date(element.value).toISOString() : element.value;\n        } else {\n            value = element;\n        }\n        return value;\n    }\n\n    // TODO: sort members by access modifier\n\n    /**\n     * @hidden @internal\n     */\n    public cancel() {\n        if (!this.overlayComponentId) {\n            this.init();\n        }\n        this.closeDropdown();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public closeDropdown() {\n        if (this.overlayComponentId) {\n            this.overlayService.hide(this.overlayComponentId);\n            this.overlayComponentId = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.ESCAPE || eventArgs.key === KEYS.ESCAPE_IE ||\n            eventArgs.ctrlKey && eventArgs.shiftKey && eventArgs.key.toLowerCase() === 'l') {\n            this.closeDropdown();\n        }\n        eventArgs.stopPropagation();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public hide() {\n        this._originalDisplay = document.defaultView.getComputedStyle(this.element.nativeElement).display;\n        this.element.nativeElement.style.display = 'none';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public detectChanges() {\n        this.cdr.detectChanges();\n    }\n}\n","import { Component } from '@angular/core';\nimport { KEYS } from '../../../core/utils';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\n\n/**\n * A component used for presenting Excel style clear filters UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-clear-filters',\n    templateUrl: './excel-style-clear-filters.component.html'\n})\nexport class IgxExcelStyleClearFiltersComponent {\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) { }\n\n    /**\n     * @hidden @internal\n     */\n    public clearFilterClass() {\n        if (this.esf.column.filteringExpressionsTree) {\n            return 'igx-excel-filter__actions-clear';\n        }\n\n        return 'igx-excel-filter__actions-clear--disabled';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearFilter() {\n        this.esf.grid.filteringService.clearFilter(this.esf.column.field);\n        this.selectAllFilterItems();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onClearFilterKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.ENTER) {\n            this.clearFilter();\n        }\n    }\n\n    private selectAllFilterItems() {\n        this.esf.listData.forEach(filterListItem => {\n            filterListItem.isSelected = true;\n            filterListItem.indeterminate = false;\n        });\n        this.esf.detectChanges();\n    }\n}\n","import { AutoPositionStrategy } from '../../../services/overlay/position/auto-position-strategy';\nimport { ConnectedFit } from '../../../services/overlay/utilities';\n\n/** @hidden */\nexport class ExcelStylePositionStrategy extends AutoPositionStrategy {\n    protected shouldFitInViewPort(connectedFit: ConnectedFit) {\n        return true;\n    }\n\n    protected fitInViewport(element: HTMLElement, connectedFit: ConnectedFit) {\n        const heightOverflow = connectedFit.contentElementRect.height - connectedFit.viewPortRect.height;\n        if (heightOverflow > 0) {\n            element.style.width = 'auto';\n            element.style.height = `${connectedFit.viewPortRect.height}px`;\n        } else {\n            element.style.height = `${Math.max(\n                connectedFit.viewPortRect.height - connectedFit.targetRect.bottom - 1,\n                connectedFit.contentElementRect.height)}px`;\n        }\n\n        super.fitInViewport(element, connectedFit);\n    }\n}\n","import { Injectable, OnDestroy, NgModuleRef } from '@angular/core';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IFilteringExpression, FilteringLogic } from '../../data-operations/filtering-expression.interface';\nimport { Subject } from 'rxjs';\nimport { takeUntil, first } from 'rxjs/operators';\nimport { IForOfState } from '../../directives/for-of/for_of.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IFilteringOperation } from '../../data-operations/filtering-condition';\nimport { GridBaseAPIService } from '../api.service';\nimport { IColumnResizeEventArgs } from '../common/events';\nimport { GridType } from '../common/grid.interface';\nimport { OverlaySettings, PositionSettings, VerticalAlignment } from '../../services/overlay/utilities';\nimport { IgxOverlayService } from '../../services/overlay/overlay';\nimport { useAnimation } from '@angular/animations';\nimport { fadeIn, fadeOut } from '../../animations/main';\nimport { ExcelStylePositionStrategy } from './excel-style/excel-style-position-strategy';\nimport { AbsoluteScrollStrategy } from '../../services/overlay/scroll/absolute-scroll-strategy';\nimport { IgxGridExcelStyleFilteringComponent } from './excel-style/grid.excel-style-filtering.component';\nimport { IgxIconService } from '../../icon/icon.service';\nimport { editor, pinLeft, unpinLeft } from '@igniteui/material-icons-extended';\n\n/**\n * @hidden\n */\nexport class ExpressionUI {\n    public expression: IFilteringExpression;\n    public beforeOperator: FilteringLogic;\n    public afterOperator: FilteringLogic;\n    public isSelected = false;\n    public isVisible = true;\n}\n\n/**\n * @hidden\n */\n@Injectable()\nexport class IgxFilteringService implements OnDestroy {\n\n    private columnsWithComplexFilter = new Set<string>();\n    private areEventsSubscribed = false;\n    private destroy$ = new Subject<boolean>();\n    private isFiltering = false;\n    private columnToExpressionsMap = new Map<string, ExpressionUI[]>();\n    private columnStartIndex = -1;\n    private _componentOverlayId: string;\n    private _filterMenuPositionSettings: PositionSettings;\n    private _filterMenuOverlaySettings: OverlaySettings;\n    private column;\n    private lastActiveNode;\n\n    public isFilterRowVisible = false;\n    public filteredColumn: IgxColumnComponent = null;\n    public selectedExpression: IFilteringExpression = null;\n    public columnToMoreIconHidden = new Map<string, boolean>();\n    public activeFilterCell = 0;\n    grid: IgxGridBaseDirective;\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>, private _moduleRef: NgModuleRef<any>,\n        private iconService: IgxIconService,  private _overlayService: IgxOverlayService) {}\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    public toggleFilterDropdown(element, column, classRef) {\n        if (!this._componentOverlayId || (this.column && this.column.field !== column.field)) {\n            this.initFilteringSettings();\n            this.column = column;\n            const filterIcon = this.column.filteringExpressionsTree ? 'igx-excel-filter__icon--filtered' : 'igx-excel-filter__icon';\n            const filterIconTarget = element.querySelector('.' + filterIcon);\n\n            this._filterMenuOverlaySettings.target = filterIconTarget;\n            this._filterMenuOverlaySettings.outlet = (this.grid as any).outlet;\n\n            if (this.grid.excelStyleFilteringComponent) {\n                this._componentOverlayId =\n                    this._overlayService.attach(this.grid.excelStyleFilteringComponent.element, this._filterMenuOverlaySettings);\n            } else {\n                this._componentOverlayId =\n                    this._overlayService.attach(classRef, this._filterMenuOverlaySettings, this._moduleRef);\n            }\n\n            this._overlayService.show(this._componentOverlayId, this._filterMenuOverlaySettings);\n        }\n    }\n\n    public initFilteringSettings() {\n        this._filterMenuPositionSettings = {\n            verticalStartPoint: VerticalAlignment.Bottom,\n            openAnimation: useAnimation(fadeIn, { params: { duration: '250ms' }}),\n            closeAnimation: null\n        };\n        this._filterMenuOverlaySettings = {\n            closeOnOutsideClick: true,\n            modal: false,\n            positionStrategy: new ExcelStylePositionStrategy(this._filterMenuPositionSettings),\n            scrollStrategy: new AbsoluteScrollStrategy()\n        };\n\n        this._overlayService.onOpening.pipe(\n            first((overlay) => overlay.id === this._componentOverlayId),\n            takeUntil(this.destroy$)).subscribe((eventArgs) => {\n                const instance = this.grid.excelStyleFilteringComponent ?\n                    this.grid.excelStyleFilteringComponent :\n                    eventArgs.componentRef.instance as IgxGridExcelStyleFilteringComponent;\n\n                if (instance) {\n                    this.lastActiveNode = this.grid.navigation.activeNode;\n                    instance.initialize(this.column, this._overlayService, eventArgs.id);\n                }\n            });\n\n        this._overlayService.onClosed.pipe(\n            first((overlay) => overlay.id === this._componentOverlayId),\n            takeUntil(this.destroy$)).subscribe((eventArgs) => {\n                const instance = this.grid.excelStyleFilteringComponent ?\n                    this.grid.excelStyleFilteringComponent :\n                    eventArgs.componentRef.instance as IgxGridExcelStyleFilteringComponent;\n\n                if (instance) {\n                    instance.column = null;\n                }\n                this._componentOverlayId = null;\n                this.grid.navigation.activeNode = this.lastActiveNode;\n                this.grid.theadRow.nativeElement.focus();\n            });\n    }\n\n    public hideExcelFiltering() {\n        if (this._componentOverlayId) {\n            this._overlayService.hide(this._componentOverlayId);\n        }\n    }\n\n    /**\n     * Subscribe to grid's events.\n     */\n    public subscribeToEvents() {\n        if (!this.areEventsSubscribed) {\n            this.areEventsSubscribed = true;\n\n            this.grid.onColumnResized.pipe(takeUntil(this.destroy$)).subscribe((eventArgs: IColumnResizeEventArgs) => {\n                this.updateFilteringCell(eventArgs.column);\n            });\n\n            this.grid.parentVirtDir.onChunkLoad.pipe(takeUntil(this.destroy$)).subscribe((eventArgs: IForOfState) => {\n                if (eventArgs.startIndex !== this.columnStartIndex) {\n                    this.columnStartIndex = eventArgs.startIndex;\n                    this.grid.filterCellList.forEach((filterCell) => {\n                        filterCell.updateFilterCellArea();\n                    });\n                }\n            });\n\n            this.grid.onColumnMovingEnd.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.grid.filterCellList.forEach((filterCell) => {\n                    filterCell.updateFilterCellArea();\n                });\n            });\n        }\n    }\n\n    /**\n     * Close filtering row if a column is hidden.\n     */\n    public hideFilteringRowOnColumnVisibilityChange(col: IgxColumnComponent) {\n        const filteringRow = this.grid.filteringRow;\n\n        if (filteringRow && filteringRow.column && filteringRow.column === col) {\n            filteringRow.close();\n        }\n    }\n\n    /**\n     * Internal method to create expressionsTree and filter grid used in both filter modes.\n     */\n    public filterInternal(field: string, expressions: FilteringExpressionsTree | Array<ExpressionUI> = null): void {\n        this.isFiltering = true;\n\n        let expressionsTree;\n        if (expressions instanceof FilteringExpressionsTree) {\n            expressionsTree = expressions;\n        } else {\n            expressionsTree = this.createSimpleFilteringTree(field, expressions);\n        }\n\n        if (expressionsTree.filteringOperands.length === 0) {\n            this.clearFilter(field);\n        } else {\n            this.filter(field, null, expressionsTree);\n        }\n\n        this.isFiltering = false;\n    }\n\n    /**\n     * Execute filtering on the grid.\n     */\n    public filter(field: string, value: any, conditionOrExpressionTree?: IFilteringOperation | IFilteringExpressionsTree,\n        ignoreCase?: boolean) {\n        const col = this.gridAPI.get_column_by_name(field);\n        const filteringIgnoreCase = ignoreCase || (col ? col.filteringIgnoreCase : false);\n\n        if (conditionOrExpressionTree) {\n            this.gridAPI.filter(field, value, conditionOrExpressionTree, filteringIgnoreCase);\n        } else {\n            const expressionsTreeForColumn = this.grid.filteringExpressionsTree.find(field);\n            if (!expressionsTreeForColumn) {\n                throw new Error('Invalid condition or Expression Tree!');\n            } else if (expressionsTreeForColumn instanceof FilteringExpressionsTree) {\n                this.gridAPI.filter(field, value, expressionsTreeForColumn, filteringIgnoreCase);\n            } else {\n                const expressionForColumn = expressionsTreeForColumn as IFilteringExpression;\n                this.gridAPI.filter(field, value, expressionForColumn.condition, filteringIgnoreCase);\n            }\n        }\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.grid.onFilteringDone.emit(col.filteringExpressionsTree));\n    }\n\n    /**\n     * Clears the filter of a given column if name is provided. Otherwise clears the filters of all columns.\n     */\n    public clearFilter(field: string): void {\n        if (field) {\n            const column = this.gridAPI.get_column_by_name(field);\n            if (!column) {\n                return;\n            }\n        }\n\n        this.isFiltering = true;\n\n        this.gridAPI.clear_filter(field);\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.grid.onFilteringDone.emit(null));\n\n        if (field) {\n            const expressions = this.getExpressions(field);\n            expressions.length = 0;\n        } else {\n            this.grid.columns.forEach(c => {\n                const expressions = this.getExpressions(c.field);\n                expressions.length = 0;\n            });\n        }\n\n        this.isFiltering = false;\n    }\n\n    /**\n     * Filters all the `IgxColumnComponent` in the `IgxGridComponent` with the same condition.\n     */\n    public filterGlobal(value: any, condition, ignoreCase?) {\n        this.gridAPI.filter_global(value, condition, ignoreCase);\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.grid.onFilteringDone.emit(this.grid.filteringExpressionsTree));\n    }\n\n    /**\n     * Register filtering SVG icons in the icon service.\n     */\n    public registerSVGIcons(): void {\n        const editorIcons = editor as any[];\n        editorIcons.forEach(icon => this.iconService.addSvgIconFromText(icon.name, icon.value, 'imx-icons'));\n        this.iconService.addSvgIconFromText(pinLeft.name, pinLeft.value, 'imx-icons');\n        this.iconService.addSvgIconFromText(unpinLeft.name, unpinLeft.value, 'imx-icons');\n    }\n\n    /**\n     * Returns the ExpressionUI array for a given column.\n     */\n    public getExpressions(columnId: string): ExpressionUI[] {\n        if (!this.columnToExpressionsMap.has(columnId)) {\n            const column = this.grid.columns.find((col) => col.field === columnId);\n            const expressionUIs = new Array<ExpressionUI>();\n            if (column) {\n                this.generateExpressionsList(column.filteringExpressionsTree, this.grid.filteringExpressionsTree.operator, expressionUIs);\n                this.columnToExpressionsMap.set(columnId, expressionUIs);\n            }\n            return expressionUIs;\n        }\n\n        return this.columnToExpressionsMap.get(columnId);\n    }\n\n    /**\n     * Recreates all ExpressionUIs for all columns. Executed after filtering to refresh the cache.\n     */\n    public refreshExpressions() {\n        if (!this.isFiltering) {\n            this.columnsWithComplexFilter.clear();\n\n            this.columnToExpressionsMap.forEach((value: ExpressionUI[], key: string) => {\n                const column = this.grid.columns.find((col) => col.field === key);\n                if (column) {\n                    value.length = 0;\n\n                    this.generateExpressionsList(column.filteringExpressionsTree, this.grid.filteringExpressionsTree.operator, value);\n\n                    const isComplex = this.isFilteringTreeComplex(column.filteringExpressionsTree);\n                    if (isComplex) {\n                        this.columnsWithComplexFilter.add(key);\n                    }\n\n                    this.updateFilteringCell(column);\n                } else {\n                    this.columnToExpressionsMap.delete(key);\n                }\n            });\n        }\n    }\n\n    /**\n     * Remove an ExpressionUI for a given column.\n     */\n    public removeExpression(columnId: string, indexToRemove: number) {\n        const expressionsList = this.getExpressions(columnId);\n\n        if (indexToRemove === 0 && expressionsList.length > 1) {\n            expressionsList[1].beforeOperator = null;\n        } else if (indexToRemove === expressionsList.length - 1) {\n            expressionsList[indexToRemove - 1].afterOperator = null;\n        } else {\n            expressionsList[indexToRemove - 1].afterOperator = expressionsList[indexToRemove + 1].beforeOperator;\n            expressionsList[0].beforeOperator = null;\n            expressionsList[expressionsList.length - 1].afterOperator = null;\n        }\n\n        expressionsList.splice(indexToRemove, 1);\n    }\n\n    /**\n     * Generate filtering tree for a given column from existing ExpressionUIs.\n     */\n    public createSimpleFilteringTree(columnId: string, expressionUIList = null): FilteringExpressionsTree {\n        const expressionsList = expressionUIList ? expressionUIList : this.getExpressions(columnId);\n        const expressionsTree = new FilteringExpressionsTree(FilteringLogic.Or, columnId);\n        let currAndBranch: FilteringExpressionsTree;\n        let currExpressionUI: ExpressionUI;\n\n        for (let i = 0; i < expressionsList.length; i++) {\n            currExpressionUI = expressionsList[i];\n\n            if (!currExpressionUI.expression.condition.isUnary && currExpressionUI.expression.searchVal === null) {\n                if (currExpressionUI.afterOperator === FilteringLogic.And && !currAndBranch) {\n                    currAndBranch = new FilteringExpressionsTree(FilteringLogic.And, columnId);\n                    expressionsTree.filteringOperands.push(currAndBranch);\n                }\n                continue;\n            }\n\n            if ((currExpressionUI.beforeOperator === undefined || currExpressionUI.beforeOperator === null ||\n                currExpressionUI.beforeOperator === FilteringLogic.Or) &&\n                currExpressionUI.afterOperator === FilteringLogic.And) {\n\n                currAndBranch = new FilteringExpressionsTree(FilteringLogic.And, columnId);\n                expressionsTree.filteringOperands.push(currAndBranch);\n                currAndBranch.filteringOperands.push(currExpressionUI.expression);\n\n            } else if (currExpressionUI.beforeOperator === FilteringLogic.And) {\n                currAndBranch.filteringOperands.push(currExpressionUI.expression);\n            } else {\n                expressionsTree.filteringOperands.push(currExpressionUI.expression);\n                currAndBranch = null;\n            }\n        }\n\n        return expressionsTree;\n    }\n\n    /**\n     * Returns whether a complex filter is applied to a given column.\n     */\n    public isFilterComplex(columnId: string) {\n        if (this.columnsWithComplexFilter.has(columnId)) {\n            return true;\n        }\n\n        const column = this.grid.columns.find((col) => col.field === columnId);\n        const isComplex = column && this.isFilteringTreeComplex(column.filteringExpressionsTree);\n        if (isComplex) {\n            this.columnsWithComplexFilter.add(columnId);\n        }\n\n        return isComplex;\n    }\n\n    /**\n     * Returns the string representation of the FilteringLogic operator.\n     */\n    public getOperatorAsString(operator: FilteringLogic): any {\n        if (operator === 0) {\n            return this.grid.resourceStrings.igx_grid_filter_operator_and;\n        } else {\n            return this.grid.resourceStrings.igx_grid_filter_operator_or;\n        }\n    }\n\n    /**\n     * Generate the label of a chip from a given filtering expression.\n     */\n    public getChipLabel(expression: IFilteringExpression): any {\n        if (expression.condition.isUnary) {\n            return this.grid.resourceStrings[`igx_grid_filter_${expression.condition.name}`] || expression.condition.name;\n        } else if (expression.searchVal instanceof Date) {\n            const pipeArgs = this.grid.getColumnByName(expression.fieldName).pipeArgs;\n            return this.grid.datePipe.transform(expression.searchVal, pipeArgs.format, undefined, this.grid.locale);\n        } else {\n            return expression.searchVal;\n        }\n    }\n\n    /**\n     * Updates the content of a filterCell.\n     */\n    public updateFilteringCell(column: IgxColumnComponent) {\n        const filterCell = column.filterCell;\n        if (filterCell) {\n            filterCell.updateFilterCellArea();\n        }\n    }\n\n    public get filteredData() {\n        return this.grid.filteredData;\n    }\n\n    private isFilteringTreeComplex(expressions: IFilteringExpressionsTree | IFilteringExpression): boolean {\n        if (!expressions) {\n            return false;\n        }\n\n        if (expressions instanceof FilteringExpressionsTree) {\n            const expressionsTree = expressions as FilteringExpressionsTree;\n            if (expressionsTree.operator === FilteringLogic.Or) {\n                const andOperatorsCount = this.getChildAndOperatorsCount(expressionsTree);\n\n                // having more that 'And' and operator in the sub-tree means that the filter could not be represented without parentheses.\n                return andOperatorsCount > 1;\n            }\n\n            let isComplex = false;\n            for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n                isComplex = isComplex || this.isFilteringTreeComplex(expressionsTree.filteringOperands[i]);\n            }\n\n            return isComplex;\n        }\n\n        return false;\n    }\n\n    private getChildAndOperatorsCount(expressions: IFilteringExpressionsTree): number {\n        let count = 0;\n        let operand;\n        for (let i = 0; i < expressions.filteringOperands.length; i++) {\n            operand = expressions[i];\n            if (operand instanceof FilteringExpressionsTree) {\n                if (operand.operator === FilteringLogic.And) {\n                    count++;\n                }\n\n                count = count + this.getChildAndOperatorsCount(operand);\n            }\n        }\n\n        return count;\n    }\n\n    public generateExpressionsList(expressions: IFilteringExpressionsTree | IFilteringExpression,\n        operator: FilteringLogic,\n        expressionsUIs: ExpressionUI[]): void {\n        this.generateExpressionsListRecursive(expressions, operator, expressionsUIs);\n\n        // The beforeOperator of the first expression and the afterOperator of the last expression should be null\n        if (expressionsUIs.length) {\n            expressionsUIs[expressionsUIs.length - 1].afterOperator = null;\n        }\n    }\n\n    private generateExpressionsListRecursive(expressions: IFilteringExpressionsTree | IFilteringExpression,\n        operator: FilteringLogic,\n        expressionsUIs: ExpressionUI[]): void {\n        if (!expressions) {\n            return;\n        }\n\n        if (expressions instanceof FilteringExpressionsTree) {\n            const expressionsTree = expressions as FilteringExpressionsTree;\n            for (let i = 0; i < expressionsTree.filteringOperands.length; i++) {\n                this.generateExpressionsListRecursive(expressionsTree.filteringOperands[i], expressionsTree.operator, expressionsUIs);\n            }\n            if (expressionsUIs.length) {\n                expressionsUIs[expressionsUIs.length - 1].afterOperator = operator;\n            }\n        } else {\n            const exprUI = new ExpressionUI();\n            exprUI.expression = expressions as IFilteringExpression;\n            exprUI.afterOperator = operator;\n\n            const prevExprUI = expressionsUIs[expressionsUIs.length - 1];\n            if (prevExprUI) {\n                exprUI.beforeOperator = prevExprUI.afterOperator;\n            }\n\n            expressionsUIs.push(exprUI);\n        }\n    }\n\n    public isFilteringExpressionsTreeEmpty(expressionTree: IFilteringExpressionsTree): boolean {\n        if (FilteringExpressionsTree.empty(expressionTree)) {\n            return true;\n        }\n\n        let expr: any;\n\n        for (let i = 0; i < expressionTree.filteringOperands.length; i++) {\n            expr = expressionTree.filteringOperands[i];\n\n            if ((expr instanceof FilteringExpressionsTree)) {\n                const exprTree = expr as FilteringExpressionsTree;\n                if (exprTree.filteringOperands && exprTree.filteringOperands.length) {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n","import { IgxDropDownItemComponent } from './../drop-down/drop-down-item.component';\nimport { Component, DoCheck, Input } from '@angular/core';\n\n@Component({\n    selector: 'igx-select-item',\n    template: '<span class=\"igx-drop-down__inner\"><ng-content></ng-content></span>'\n})\nexport class IgxSelectItemComponent extends IgxDropDownItemComponent implements DoCheck {\n\n    private _text: any;\n\n    /**\n     * An @Input property that gets/sets the item's text to be displayed in the select component's input when the item is selected.\n     *\n     * ```typescript\n     *  //get\n     *  let mySelectedItem = this.dropDown.selectedItem;\n     *  let selectedItemText = mySelectedItem.text;\n     * ```\n     *\n     * ```html\n     * // set\n     * <igx-select-item [text]=\"'London'\"></igx-select-item>\n     * ```\n     */\n    @Input()\n    public get text(): string {\n        return this._text;\n    }\n\n    public set text(text: string) {\n        this._text = text;\n    }\n\n    /** @hidden @internal */\n    public get itemText() {\n        if (this._text !== undefined) {\n            return this._text;\n        }\n        // If text @Input is undefined, try extract a meaningful item text out of the item template\n        return this.elementRef.nativeElement.textContent.trim();\n    }\n\n    /**\n     * Sets/Gets if the item is the currently selected one in the select\n     *\n     * ```typescript\n     *  let mySelectedItem = this.select.selectedItem;\n     *  let isMyItemSelected = mySelectedItem.selected; // true\n     * ```\n     */\n    public get selected() {\n        return !this.isHeader && !this.disabled && this.selection.is_item_selected(this.dropDown.id, this);\n    }\n\n    public set selected(value: any) {\n        if (value && !this.isHeader && !this.disabled) {\n            this.dropDown.selectItem(this);\n        }\n    }\n\n    /** @hidden @internal */\n    public isHeader: boolean;\n\n    ngDoCheck(): void {\n    }\n}\n","import { VerticalAlignment, HorizontalAlignment, PositionSettings, Size, Util, ConnectedFit, Point  } from '../services/overlay/utilities';\nimport { IPositionStrategy } from '../services/overlay/position';\nimport { fadeOut, fadeIn } from '../animations/main';\nimport { IgxSelectBase } from './select.common';\nimport { isIE } from '../core/utils';\nimport { BaseFitPositionStrategy } from '../services/overlay/position/base-fit-position-strategy';\n\n/** @hidden @internal */\nexport class SelectPositioningStrategy extends BaseFitPositionStrategy implements IPositionStrategy {\n\n    private _selectDefaultSettings = {\n        horizontalDirection: HorizontalAlignment.Right,\n        verticalDirection: VerticalAlignment.Bottom,\n        horizontalStartPoint: HorizontalAlignment.Left,\n        verticalStartPoint: VerticalAlignment.Top,\n        openAnimation: fadeIn,\n        closeAnimation: fadeOut\n    };\n\n    /** @inheritdoc */\n    public settings: PositionSettings;\n\n    constructor(public select: IgxSelectBase, settings?: PositionSettings) {\n        super();\n        this.settings = Object.assign({}, this._selectDefaultSettings, settings);\n    }\n\n    // Global variables required for cases of !initialCall (page scroll/overlay repositionAll)\n    private global_yOffset = 0;\n    private global_xOffset = 0;\n    private global_styles: SelectStyles = {};\n\n    /** @inheritdoc */\n    position(contentElement: HTMLElement, size: Size, document?: Document, initialCall?: boolean, target?: Point | HTMLElement): void {\n        this.select.scrollContainer.scrollTop = 0;\n        const targetElement = target || this.settings.target;\n        const rects = super.calculateElementRectangles(contentElement, targetElement);\n        // selectFit obj, to be used for both cases of initialCall and !initialCall(page scroll/overlay repositionAll)\n        const selectFit: SelectFit = {\n            verticalOffset: this.global_yOffset,\n            horizontalOffset: this.global_xOffset,\n            targetRect: rects.targetRect,\n            contentElementRect: rects.elementRect,\n            styles: this.global_styles,\n            scrollContainer: this.select.scrollContainer,\n            scrollContainerRect: this.select.scrollContainer.getBoundingClientRect()\n        };\n\n        if (initialCall) {\n            // Fill in the required selectFit object properties.\n            selectFit.viewPortRect = Util.getViewportRect(document);\n            selectFit.itemElement = this.getInteractionItemElement();\n            selectFit.itemRect = selectFit.itemElement.getBoundingClientRect();\n\n            // Calculate input and selected item elements style related variables\n            selectFit.styles = this.calculateStyles(selectFit, targetElement);\n\n            selectFit.scrollAmount = this.calculateScrollAmount(selectFit);\n            // Calculate how much to offset the overlay container.\n            this.calculateYoffset(selectFit);\n            this.calculateXoffset(selectFit);\n\n            super.updateViewPortFit(selectFit);\n            // container does not fit in viewPort and is out on Top or Bottom\n            if (selectFit.fitVertical.back < 0 || selectFit.fitVertical.forward < 0 ) {\n                this.fitInViewport(contentElement, selectFit);\n            }\n            this.select.scrollContainer.scrollTop = selectFit.scrollAmount;\n        }\n        this.setStyles(contentElement, selectFit);\n    }\n\n    /**\n     * Calculate selected item scroll position.\n     */\n    private calculateScrollAmount(selectFit: SelectFit): number {\n        const itemElementRect = selectFit.itemRect;\n        const scrollContainer = selectFit.scrollContainer;\n        const scrollContainerRect = selectFit.scrollContainerRect;\n        const scrollDelta = scrollContainerRect.top - itemElementRect.top;\n        let scrollPosition = scrollContainer.scrollTop - scrollDelta;\n\n        const dropDownHeight = scrollContainer.clientHeight;\n        scrollPosition -= dropDownHeight / 2;\n        scrollPosition += itemElementRect.height / 2;\n\n        return Math.round(Math.min(Math.max(0, scrollPosition), scrollContainer.scrollHeight - scrollContainerRect.height));\n    }\n\n    /**\n     * Position the items outer container so selected item text is positioned over input text and if header\n     * And/OR footer - both header/footer are visible\n     * @param selectFit selectFit to use for computation.\n     */\n    protected fitInViewport(contentElement: HTMLElement, selectFit: SelectFit) {\n        const footer = selectFit.scrollContainerRect.bottom - selectFit.contentElementRect.bottom;\n        const header = selectFit.scrollContainerRect.top - selectFit.contentElementRect.top;\n        const lastItemFitSize = selectFit.targetRect.bottom + selectFit.styles.itemTextToInputTextDiff - footer;\n        const firstItemFitSize = selectFit.targetRect.top - selectFit.styles.itemTextToInputTextDiff - header;\n        // out of viewPort on Top\n        if (selectFit.fitVertical.back < 0) {\n            const possibleScrollAmount = selectFit.scrollContainer.scrollHeight -\n                selectFit.scrollContainerRect.height - selectFit.scrollAmount;\n            if (possibleScrollAmount + selectFit.fitVertical.back > 0 && firstItemFitSize > selectFit.viewPortRect.top) {\n                selectFit.scrollAmount -= selectFit.fitVertical.back;\n                selectFit.verticalOffset -= selectFit.fitVertical.back;\n                this.global_yOffset = selectFit.verticalOffset;\n            } else {\n                selectFit.verticalOffset = 0 ;\n                this.global_yOffset = 0;\n            }\n        // out of viewPort on Bottom\n        } else if (selectFit.fitVertical.forward < 0) {\n            if (selectFit.scrollAmount + selectFit.fitVertical.forward > 0 && lastItemFitSize < selectFit.viewPortRect.bottom) {\n                selectFit.scrollAmount += selectFit.fitVertical.forward;\n                selectFit.verticalOffset += selectFit.fitVertical.forward;\n                this.global_yOffset = selectFit.verticalOffset;\n            } else {\n                selectFit.verticalOffset = -selectFit.contentElementRect.height + selectFit.targetRect.height;\n                this.global_yOffset = selectFit.verticalOffset;\n            }\n        }\n    }\n\n    /**\n     * Sets element's style which effectively positions the provided element\n     * @param element Element to position\n     * @param selectFit selectFit to use for computation.\n     * @param initialCall should be true if this is the initial call to the position method calling setStyles\n     */\n    protected setStyles(contentElement: HTMLElement, selectFit: SelectFit) {\n        super.setStyle(contentElement, selectFit.targetRect, selectFit.contentElementRect, selectFit);\n        contentElement.style.width = `${selectFit.styles.contentElementNewWidth}px`; // manage container based on paddings?\n        this.global_styles.contentElementNewWidth = selectFit.styles.contentElementNewWidth;\n    }\n\n    /**\n     * Calculate the necessary input and selected item styles to be used for positioning item text over input text.\n     * Calculate & Set default items container width.\n     * @param selectFit selectFit to use for computation.\n     */\n    private calculateStyles(selectFit: SelectFit, target: Point | HTMLElement): SelectStyles  {\n        const styles: SelectStyles = {};\n        const inputElementStyles = window.getComputedStyle(target as Element);\n        const itemElementStyles = window.getComputedStyle(selectFit.itemElement);\n        const numericInputFontSize = parseFloat(inputElementStyles.fontSize);\n        const numericItemFontSize = parseFloat(itemElementStyles.fontSize);\n        const inputTextToInputTop = (selectFit.targetRect.bottom - selectFit.targetRect.top - numericInputFontSize) / 2;\n        const itemTextToItemTop = (selectFit.itemRect.height - numericItemFontSize) / 2;\n         // Adjust for input top padding\n        const negateInputPaddings = (\n                parseFloat(inputElementStyles.paddingTop) -\n                parseFloat(inputElementStyles.paddingBottom)\n            ) / 2;\n        styles.itemTextToInputTextDiff = Math.round(itemTextToItemTop - inputTextToInputTop + negateInputPaddings);\n\n        const numericLeftPadding = parseFloat(itemElementStyles.paddingLeft);\n        const numericTextIndent = parseFloat(itemElementStyles.textIndent);\n\n        styles.itemTextPadding = numericLeftPadding;\n        styles.itemTextIndent = numericTextIndent;\n        // 24 is the input's toggle ddl icon width\n        styles.contentElementNewWidth = selectFit.targetRect.width + 24 + numericLeftPadding * 2;\n\n        return styles;\n    }\n\n    /**\n     * Obtain the selected item if there is such one or otherwise use the first one\n     */\n    public getInteractionItemElement(): HTMLElement {\n        let itemElement;\n        if (this.select.selectedItem) {\n            itemElement = this.select.selectedItem.element.nativeElement;\n            // D.P. Feb 22 2019, #3921 Force item scroll before measuring in IE11, due to base scrollToItem delay\n            if (isIE()) {\n                this.select.scrollContainer.scrollTop = this.select.calculateScrollPosition(this.select.selectedItem);\n            }\n        } else {\n            itemElement = this.select.getFirstItemElement();\n        }\n        return itemElement;\n    }\n\n    /**\n     * Calculate how much to offset the overlay container for Y-axis.\n     */\n    private calculateYoffset(selectFit: SelectFit) {\n        selectFit.verticalOffset = -(selectFit.itemRect.top - selectFit.contentElementRect.top +\n            selectFit.styles.itemTextToInputTextDiff - selectFit.scrollAmount);\n        this.global_yOffset = selectFit.verticalOffset;\n    }\n\n    /**\n     * Calculate how much to offset the overlay container for X-axis.\n     */\n    private calculateXoffset(selectFit: SelectFit) {\n        selectFit.horizontalOffset = selectFit.styles.itemTextIndent - selectFit.styles.itemTextPadding;\n        this.global_xOffset = selectFit.horizontalOffset;\n    }\n}\n\n/** @hidden */\nexport interface SelectFit extends ConnectedFit {\n    itemElement?: HTMLElement;\n    scrollContainer: HTMLElement;\n    scrollContainerRect: ClientRect;\n    itemRect?: ClientRect;\n    styles?: SelectStyles;\n    scrollAmount?: number;\n}\n\n/** @hidden */\nexport interface SelectStyles {\n    itemTextPadding?: number;\n    itemTextIndent?: number;\n    itemTextToInputTextDiff?: number;\n    contentElementNewWidth?: number;\n    numericLeftPadding?: number;\n}\n","import {\n    AfterContentInit,\n    AfterViewInit,\n    ChangeDetectorRef,\n    Component,\n    ContentChild,\n    ContentChildren,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Inject,\n    Injector,\n    Input,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport { AbstractControl, ControlValueAccessor, NgControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxSelectionAPIService } from '../core/selection';\nimport { CancelableEventArgs, IBaseCancelableBrowserEventArgs, IBaseCancelableEventArgs } from '../core/utils';\nimport { IgxLabelDirective } from '../directives/label/label.directive';\nimport { IgxDropDownItemBaseDirective } from '../drop-down/drop-down-item.base';\nimport { IGX_DROPDOWN_BASE, ISelectionEventArgs, Navigate } from '../drop-down/drop-down.common';\nimport { IgxInputGroupComponent } from '../input-group/input-group.component';\nimport { AbsoluteScrollStrategy } from '../services/overlay/scroll/absolute-scroll-strategy';\nimport { OverlaySettings } from '../services/overlay/utilities';\nimport { IgxInputDirective, IgxInputState } from './../directives/input/input.directive';\nimport { IgxDropDownComponent } from './../drop-down/drop-down.component';\nimport { IgxSelectItemComponent } from './select-item.component';\nimport { SelectPositioningStrategy } from './select-positioning-strategy';\nimport { IgxSelectBase } from './select.common';\nimport { IgxHintDirective, IgxInputGroupType, IGX_INPUT_GROUP_TYPE } from '../input-group/public_api';\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectToggleIcon]'\n})\nexport class IgxSelectToggleIconDirective {\n}\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectHeader]'\n})\nexport class IgxSelectHeaderDirective {\n}\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectFooter]'\n})\nexport class IgxSelectFooterDirective {\n}\n\nconst noop = () => { };\n\n/**\n * **Ignite UI for Angular Select** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/select)\n *\n * The `igxSelect` provides an input with dropdown list allowing selection of a single item.\n *\n * Example:\n * ```html\n * <igx-select #select1 [placeholder]=\"'Pick One'\">\n *   <label igxLabel>Select Label</label>\n *   <igx-select-item *ngFor=\"let item of items\" [value]=\"item.field\">\n *     {{ item.field }}\n *   </igx-select-item>\n * </igx-select>\n * ```\n */\n@Component({\n    selector: 'igx-select',\n    templateUrl: './select.component.html',\n    providers: [\n        { provide: NG_VALUE_ACCESSOR, useExisting: IgxSelectComponent, multi: true },\n        { provide: IGX_DROPDOWN_BASE, useExisting: IgxSelectComponent }],\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxSelectComponent extends IgxDropDownComponent implements IgxSelectBase, ControlValueAccessor,\n    AfterContentInit, OnInit, AfterViewInit, OnDestroy, EditorProvider {\n\n    private ngControl: NgControl = null;\n    private _overlayDefaults: OverlaySettings;\n    private _value: any;\n    private _type = null;\n    protected destroy$ = new Subject<boolean>();\n\n    /** @hidden @internal do not use the drop-down container class */\n    public cssClass = false;\n\n    /** @hidden @internal */\n    @ViewChild('inputGroup', { read: IgxInputGroupComponent, static: true }) public inputGroup: IgxInputGroupComponent;\n\n    /** @hidden @internal */\n    @ViewChild('input', { read: IgxInputDirective, static: true }) public input: IgxInputDirective;\n\n    @ContentChild(IgxHintDirective, { read: ElementRef }) private hintElement: ElementRef;\n\n    /** @hidden @internal */\n    @ContentChildren(forwardRef(() => IgxSelectItemComponent), { descendants: true })\n    public children: QueryList<IgxSelectItemComponent>;\n\n    /** @hidden @internal */\n    @ContentChild(forwardRef(() => IgxLabelDirective), { static: true }) public label: IgxLabelDirective;\n\n    /** @hidden @internal */\n    public allowItemsFocus = false;\n\n    /** @hidden @internal */\n    public height: string;\n\n    /**\n     * An @Input property that gets/sets the component value.\n     *\n     * ```typescript\n     * // get\n     * let selectValue = this.select.value;\n     * ```\n     *\n     * ```typescript\n     * // set\n     * this.select.value = 'London';\n     * ```\n     * ```html\n     * <igx-select [value]=\"value\"></igx-select>\n     * ```\n     */\n    @Input()\n    public get value(): any {\n        return this._value;\n    }\n    public set value(v: any) {\n        if (this._value === v) {\n            return;\n        }\n        this._value = v;\n        this.setSelection(this.items.find(x => x.value === this.value));\n    }\n    /**\n     * An @Input property that sets input placeholder.\n     *\n     */\n    @Input() public placeholder;\n\n\n    /**\n     * An @Input property that disables the `IgxSelectComponent`.\n     * ```html\n     * <igx-select [disabled]=\"'true'\"></igx-select>\n     * ```\n     */\n    @Input() public disabled = false;\n\n    /**\n     * An @Input property that sets custom OverlaySettings `IgxSelectComponent`.\n     * ```html\n     * <igx-select [overlaySettings] = \"customOverlaySettings\"></igx-select>\n     * ```\n     */\n    @Input()\n    overlaySettings: OverlaySettings;\n\n    /** @hidden @internal */\n    @HostBinding('style.maxHeight')\n    public maxHeight = '256px';\n\n    /** @hidden @internal */\n    public width: string;\n\n    /**\n     * An @Input property that sets how the select will be styled.\n     * The allowed values are `line`, `box` and `border`. The input-group default is `line`.\n     * ```html\n     * <igx-select [type]=\"'box'\"></igx-select>\n     * ```\n     */\n    @Input()\n    public get type(): IgxInputGroupType {\n            return this._type || this._inputGroupType || 'line';\n        }\n\n    public set type(val: IgxInputGroupType) {\n        this._type = val;\n    }\n\n    /**\n     * Emitted before the dropdown is opened\n     *\n     * ```html\n     * <igx-select onOpening='handleOpening($event)'></igx-select>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<IBaseCancelableEventArgs>();\n\n    /**\n     * Emitted after the dropdown is opened\n     *\n     * ```html\n     * <igx-select (onOpened)='handleOpened()'></igx-select>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<void>();\n\n    /**\n     * Emitted before the dropdown is closed\n     *\n     * ```html\n     * <igx-select (onClosing)='handleClosing($event)'></igx-select>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted after the dropdown is closed\n     *\n     * ```html\n     * <igx-select (onClosed)='handleClosed()'></igx-select>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<void>();\n\n    /**\n     * The custom template, if any, that should be used when rendering the select TOGGLE(open/close) button\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.select.toggleIconTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-select #select>\n     *      ...\n     *      <ng-template igxSelectToggleIcon let-collapsed>\n     *          <igx-icon>{{ collapsed ? 'remove_circle' : 'remove_circle_outline'}}</igx-icon>\n     *      </ng-template>\n     *  </igx-select>\n     * ```\n     */\n    @ContentChild(IgxSelectToggleIconDirective, { read: TemplateRef })\n    public toggleIconTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the HEADER for the select items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.select.headerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-select #select>\n     *      ...\n     *      <ng-template igxSelectHeader>\n     *          <div class=\"select__header\">\n     *              This is a custom header\n     *          </div>\n     *      </ng-template>\n     *  </igx-select>\n     * ```\n     */\n    @ContentChild(IgxSelectHeaderDirective, { read: TemplateRef, static: false })\n    public headerTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering the FOOTER for the select items list\n     *\n     * ```typescript\n     * // Set in typescript\n     * const myCustomTemplate: TemplateRef<any> = myComponent.customTemplate;\n     * myComponent.select.footerTemplate = myCustomTemplate;\n     * ```\n     * ```html\n     * <!-- Set in markup -->\n     *  <igx-select #select>\n     *      ...\n     *      <ng-template igxSelectFooter>\n     *          <div class=\"select__footer\">\n     *              This is a custom footer\n     *          </div>\n     *      </ng-template>\n     *  </igx-select>\n     * ```\n     */\n    @ContentChild(IgxSelectFooterDirective, { read: TemplateRef, static: false })\n    public footerTemplate: TemplateRef<any> = null;\n\n    /** @hidden @internal */\n    public get selectionValue() {\n        const selectedItem = this.selectedItem;\n        return selectedItem ? selectedItem.itemText : '';\n    }\n\n    /** @hidden @internal */\n    public get selectedItem(): IgxSelectItemComponent {\n        return this.selection.first_item(this.id);\n    }\n\n    constructor(\n        protected elementRef: ElementRef,\n        protected cdr: ChangeDetectorRef,\n        protected selection: IgxSelectionAPIService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        @Optional() @Inject(IGX_INPUT_GROUP_TYPE) private _inputGroupType: IgxInputGroupType,\n        private _injector: Injector) {\n        super(elementRef, cdr, selection, _displayDensityOptions);\n    }\n\n    //#region ControlValueAccessor\n\n    private _onChangeCallback: (_: any) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n\n    /** @hidden @internal */\n    public writeValue = (value: any) => {\n        this.value = value;\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: any): void {\n        this._onChangeCallback = fn;\n    }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: any): void {\n        this._onTouchedCallback = fn;\n    }\n\n    /** @hidden @internal */\n    public setDisabledState(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n    //#endregion\n\n    /** @hidden @internal */\n    public getEditElement(): HTMLInputElement {\n        return this.input.nativeElement;\n    }\n\n    /** @hidden @internal */\n    public selectItem(newSelection: IgxDropDownItemBaseDirective, event?) {\n        const oldSelection = this.selectedItem;\n\n        if (event) {\n            this.toggleDirective.close();\n        }\n        if (newSelection === null || newSelection === oldSelection || newSelection.disabled || newSelection.isHeader) {\n            return;\n        }\n\n        const args: ISelectionEventArgs = { oldSelection, newSelection, cancel: false };\n        this.onSelection.emit(args);\n\n        if (args.cancel) {\n            return;\n        }\n\n        this.setSelection(newSelection);\n        this._value = newSelection.value;\n        this.cdr.detectChanges();\n        this._onChangeCallback(this.value);\n    }\n\n    /** @hidden @internal */\n    public getFirstItemElement(): HTMLElement {\n        return this.children.first.element.nativeElement;\n    }\n\n    /**\n     * Opens the select\n     *\n     * ```typescript\n     * this.select.open();\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings) {\n        if (this.disabled || this.items.length === 0) {\n            return;\n        }\n        if (!this.selectedItem) {\n            this.navigateFirst();\n        }\n\n        super.open(Object.assign({}, this._overlayDefaults, this.overlaySettings, overlaySettings));\n    }\n\n    public inputGroupClick(event: MouseEvent, overlaySettings?: OverlaySettings) {\n        const targetElement = event.target as HTMLElement;\n\n        if (this.hintElement && targetElement.contains(this.hintElement.nativeElement)) {\n            return;\n        }\n        this.toggle(Object.assign({}, this._overlayDefaults, this.overlaySettings, overlaySettings));\n}\n\n    /** @hidden @internal */\n    ngAfterContentInit() {\n        this._overlayDefaults = {\n            target: this.getEditElement(),\n            modal: false,\n            positionStrategy: new SelectPositioningStrategy(this),\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            excludeFromOutsideClick: [this.inputGroup.element.nativeElement as HTMLElement]\n        };\n        const changes$ = this.children.changes.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.setSelection(this.items.find(x => x.value === this.value));\n            this.cdr.detectChanges();\n        });\n        Promise.resolve().then(() => {\n            if (!changes$.closed) {\n                this.children.notifyOnChanges();\n            }\n        });\n    }\n\n\n    protected navigate(direction: Navigate, currentIndex?: number) {\n        if (this.collapsed && this.selectedItem) {\n            this.navigateItem(this.selectedItem.itemIndex);\n        }\n        super.navigate(direction, currentIndex);\n    }\n\n    protected manageRequiredAsterisk(): void {\n        const hasRequiredHTMLAttribute = this.elementRef.nativeElement.hasAttribute('required');\n        if (this.ngControl && this.ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this.ngControl.control.validator({} as AbstractControl);\n            this.inputGroup.isRequired = error && error.required;\n            this.cdr.markForCheck();\n\n        // If validator is dynamically cleared and no required HTML attribute is set,\n        // reset label's required class(asterisk) and IgxInputState #6896\n        } else if (this.inputGroup.isRequired && this.ngControl && !this.ngControl.control.validator && !hasRequiredHTMLAttribute) {\n            this.input.valid = IgxInputState.INITIAL;\n            this.inputGroup.isRequired = false;\n            this.cdr.markForCheck();\n        }\n    }\n    private setSelection(item: IgxDropDownItemBaseDirective) {\n        if (item && item.value !== undefined && item.value !== null) {\n            this.selection.set(this.id, new Set([item]));\n        } else {\n            this.selection.clear(this.id);\n        }\n    }\n\n    /**\n     * Event handlers\n     * @hidden @internal\n     */\n    public handleOpening(event: CancelableEventArgs) {\n        const args: CancelableEventArgs = { cancel: event.cancel };\n        this.onOpening.emit(args);\n\n        event.cancel = args.cancel;\n        if (args.cancel) {\n            return;\n        }\n        this.scrollToItem(this.selectedItem);\n    }\n\n    /** @hidden @internal */\n    public handleOpened() {\n        this.updateItemFocus();\n        this.onOpened.emit();\n    }\n\n    /** @hidden @internal */\n    public handleClosing(event) {\n        const args: CancelableEventArgs = { cancel: event.cancel };\n        this.onClosing.emit(args);\n        event.cancel = args.cancel;\n    }\n\n    /** @hidden @internal */\n    public handleClosed() {\n        this.focusItem(false);\n        this.onClosed.emit();\n    }\n\n    /** @hidden @internal */\n    public onBlur(): void {\n        this._onTouchedCallback();\n        if (this.ngControl && !this.ngControl.valid) {\n            this.input.valid = IgxInputState.INVALID;\n        } else {\n            this.input.valid = IgxInputState.INITIAL;\n        }\n    }\n\n    /** @hidden @internal */\n    public onFocus(): void {\n        this._onTouchedCallback();\n    }\n\n    protected onStatusChanged() {\n        if ((this.ngControl.control.touched || this.ngControl.control.dirty) &&\n            (this.ngControl.control.validator || this.ngControl.control.asyncValidator)) {\n            if (this.inputGroup.isFocused) {\n                this.input.valid = this.ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n            } else {\n                this.input.valid = this.ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n            }\n        }\n        this.manageRequiredAsterisk();\n    }\n    /**\n     * @hidden @internal\n     */\n    public ngOnInit() {\n        this.ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit() {\n        if (this.ngControl) {\n            this.ngControl.statusChanges.pipe(takeUntil(this.destroy$)).subscribe(this.onStatusChanged.bind(this));\n            this.manageRequiredAsterisk();\n        }\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this.selection.clear(this.id);\n    }\n\n    /**\n     * @hidden @internal\n     * Prevent input blur - closing the items container on Header/Footer Template click.\n     */\n    public mousedownHandler(event) {\n        event.preventDefault();\n    }\n}\n\n","import {\n    Component,\n    AfterViewInit,\n    Input,\n    Output,\n    EventEmitter,\n    ChangeDetectorRef,\n    ViewChild\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { ExpressionUI } from '../grid-filtering.service';\nimport { IgxButtonGroupComponent } from '../../../buttonGroup/buttonGroup.component';\nimport { DataType, DataUtil } from '../../../data-operations/data-util';\nimport { IFilteringOperation } from '../../../data-operations/filtering-condition';\nimport { OverlaySettings, ConnectedPositioningStrategy, AbsoluteScrollStrategy  } from '../../../services/public_api';\nimport { KEYS, IBaseEventArgs } from '../../../core/utils';\nimport { FilteringLogic } from '../../../data-operations/filtering-expression.interface';\nimport { DisplayDensity } from '../../../core/density';\nimport { IgxSelectComponent } from '../../../select/select.component';\nimport { IgxOverlayOutletDirective } from '../../../directives/toggle/toggle.directive';\nimport { IgxInputDirective } from '../../../input-group/public_api';\nimport { Subject } from 'rxjs';\n\n/**\n * @hidden\n */\nexport interface ILogicOperatorChangedArgs extends IBaseEventArgs {\n    target: ExpressionUI;\n    newValue: FilteringLogic;\n}\n\n/**\n * @hidden\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-default-expression',\n    templateUrl: './excel-style-default-expression.component.html'\n})\nexport class IgxExcelStyleDefaultExpressionComponent implements AfterViewInit {\n    private destroy$ = new Subject<boolean>();\n\n    public dropDownOverlaySettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: true\n    };\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public expressionUI: ExpressionUI;\n\n    @Input()\n    public expressionsList: Array<ExpressionUI>;\n\n    @Input()\n    public grid: any;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @Output()\n    public onExpressionRemoved = new EventEmitter<ExpressionUI>();\n\n    @Output()\n    public onLogicOperatorChanged = new EventEmitter<ILogicOperatorChangedArgs>();\n\n    @ViewChild('overlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public overlayOutlet: IgxOverlayOutletDirective;\n\n    @ViewChild('dropdownConditions', { read: IgxSelectComponent, static: true })\n    protected dropdownConditions: IgxSelectComponent;\n\n    @ViewChild('logicOperatorButtonGroup', { read: IgxButtonGroupComponent })\n    protected logicOperatorButtonGroup: IgxButtonGroupComponent;\n\n    @ViewChild('inputValues', { read: IgxInputDirective, static: true })\n    protected inputValuesDirective: IgxInputDirective;\n\n    get isLast(): boolean {\n        return this.expressionsList[this.expressionsList.length - 1] === this.expressionUI;\n    }\n\n    get isSingle(): boolean {\n        return this.expressionsList.length === 1;\n    }\n\n    get conditionsPlaceholder(): string {\n        return this.grid.resourceStrings['igx_grid_filter_condition_placeholder'];\n    }\n\n    get inputValuePlaceholder(): string {\n        return this.grid.resourceStrings['igx_grid_filter_row_placeholder'];\n    }\n\n    get type() {\n        switch (this.column.dataType) {\n            case DataType.Number:\n                return 'number';\n            default:\n                return 'text';\n        }\n    }\n\n    constructor(public cdr: ChangeDetectorRef) {}\n\n    get conditions() {\n        return this.column.filters.conditionList();\n    }\n\n    protected get inputValuesElement() {\n        return this.inputValuesDirective;\n    }\n\n    ngAfterViewInit(): void {\n        this.dropDownOverlaySettings.outlet = this.overlayOutlet;\n        this.dropDownOverlaySettings.target = this.dropdownConditions.inputGroup.element.nativeElement;\n        this.dropDownOverlaySettings.excludeFromOutsideClick = [this.dropdownConditions.inputGroup.element.nativeElement as HTMLElement];\n        this.dropDownOverlaySettings.positionStrategy = new ConnectedPositioningStrategy();\n    }\n\n    public focus() {\n        // use requestAnimationFrame to focus the values input because when initializing the component\n        // datepicker's input group is not yet fully initialized\n        requestAnimationFrame(() => this.inputValuesElement.focus());\n    }\n\n    public translateCondition(value: string): string {\n        return this.grid.resourceStrings[`igx_grid_filter_${this.getCondition(value).name}`] || value;\n    }\n\n    public getIconName(): string {\n        if (this.column.dataType === DataType.Boolean && this.expressionUI.expression.condition === null) {\n            return this.getCondition(this.conditions[0]).iconName;\n        } else if (!this.expressionUI.expression.condition) {\n            return 'filter_list';\n        } else {\n            return this.expressionUI.expression.condition.iconName;\n        }\n    }\n\n    public isConditionSelected(conditionName: string): boolean {\n        return this.expressionUI.expression.condition && this.expressionUI.expression.condition.name === conditionName;\n    }\n\n    public onConditionsChanged(eventArgs: any) {\n        const value = (eventArgs.newSelection as IgxSelectComponent).value;\n        this.expressionUI.expression.condition = this.getCondition(value);\n\n        this.focus();\n    }\n\n    public getCondition(value: string): IFilteringOperation {\n        return this.column.filters.condition(value);\n    }\n\n    public onValuesInput(eventArgs) {\n        this.expressionUI.expression.searchVal = DataUtil.parseValue(this.column.dataType, eventArgs.target.value);\n    }\n\n    public onLogicOperatorButtonClicked(eventArgs, buttonIndex: number) {\n        if (this.logicOperatorButtonGroup.selectedButtons.length === 0) {\n            eventArgs.stopPropagation();\n            this.logicOperatorButtonGroup.selectButton(buttonIndex);\n        } else {\n            this.onLogicOperatorChanged.emit({\n                target: this.expressionUI,\n                newValue: buttonIndex as FilteringLogic\n            });\n        }\n    }\n\n    public onLogicOperatorKeyDown(eventArgs, buttonIndex: number) {\n        if (eventArgs.key === KEYS.ENTER) {\n            this.logicOperatorButtonGroup.selectButton(buttonIndex);\n            this.onLogicOperatorChanged.emit({\n                target: this.expressionUI,\n                newValue: buttonIndex as FilteringLogic\n            });\n        }\n    }\n\n    public onRemoveButtonClick() {\n        this.onExpressionRemoved.emit(this.expressionUI);\n    }\n\n    public onOutletPointerDown(event) {\n        event.preventDefault();\n    }\n}\n","import {\n    Component,\n    ViewChild,\n    Input\n} from '@angular/core';\nimport { IgxExcelStyleDefaultExpressionComponent } from './excel-style-default-expression.component';\nimport { IgxDatePickerComponent } from '../../../date-picker/date-picker.component';\nimport { DisplayDensity } from '../../../core/density';\n\n/**\n * @hidden\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-date-expression',\n    templateUrl: './excel-style-date-expression.component.html'\n})\nexport class IgxExcelStyleDateExpressionComponent extends IgxExcelStyleDefaultExpressionComponent {\n\n    @ViewChild('datePicker', { read: IgxDatePickerComponent, static: true })\n    private datePicker: IgxDatePickerComponent;\n\n    protected get inputValuesElement() {\n        return this.datePicker.getEditElement();\n    }\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    get inputDatePlaceholder(): string {\n        return this.grid.resourceStrings['igx_grid_filter_row_date_placeholder'];\n    }\n}\n","import {\n    Component,\n    Input,\n    ChangeDetectorRef,\n    ViewChild,\n    AfterViewInit,\n    TemplateRef,\n    ViewChildren,\n    QueryList,\n    ElementRef\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxFilteringService, ExpressionUI } from '../grid-filtering.service';\nimport { FilteringLogic } from '../../../data-operations/filtering-expression.interface';\nimport { DataType } from '../../../data-operations/data-util';\nimport {\n    IgxStringFilteringOperand,\n    IgxBooleanFilteringOperand,\n    IgxNumberFilteringOperand,\n    IgxDateFilteringOperand\n} from '../../../data-operations/filtering-condition';\nimport { IgxToggleDirective } from '../../../directives/toggle/toggle.directive';\nimport {\n    AutoPositionStrategy,\n    OverlaySettings,\n    VerticalAlignment,\n    PositionSettings,\n    HorizontalAlignment,\n    IgxOverlayService,\n    AbsoluteScrollStrategy\n} from '../../../services/public_api';\nimport { ILogicOperatorChangedArgs, IgxExcelStyleDefaultExpressionComponent } from './excel-style-default-expression.component';\nimport { KEYS } from '../../../core/utils';\nimport { IgxExcelStyleDateExpressionComponent } from './excel-style-date-expression.component';\nimport { DisplayDensity } from '../../../core/density';\nimport { Subject } from 'rxjs';\n\n/**\n * @hidden\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-custom-dialog',\n    templateUrl: './excel-style-custom-dialog.component.html'\n})\nexport class IgxExcelStyleCustomDialogComponent implements AfterViewInit {\n    private destroy$ = new Subject<boolean>();\n\n    @Input()\n    public expressionsList = new Array<ExpressionUI>();\n\n    private _customDialogPositionSettings: PositionSettings = {\n        verticalDirection: VerticalAlignment.Middle,\n        horizontalDirection: HorizontalAlignment.Center,\n        horizontalStartPoint: HorizontalAlignment.Center,\n        verticalStartPoint: VerticalAlignment.Middle\n    };\n\n    private _customDialogOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        positionStrategy: new AutoPositionStrategy(this._customDialogPositionSettings),\n        scrollStrategy: new AbsoluteScrollStrategy()\n    };\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public selectedOperator: string;\n\n    @Input()\n    public filteringService: IgxFilteringService;\n\n    @Input()\n    public overlayComponentId: string;\n\n    @Input()\n    public overlayService: IgxOverlayService;\n\n    @Input()\n    public displayDensity: DisplayDensity;\n\n    @ViewChildren(IgxExcelStyleDefaultExpressionComponent)\n    private expressionComponents: QueryList<IgxExcelStyleDefaultExpressionComponent>;\n\n    @ViewChildren(IgxExcelStyleDateExpressionComponent)\n    private expressionDateComponents: QueryList<IgxExcelStyleDateExpressionComponent>;\n\n    @ViewChild('toggle', { read: IgxToggleDirective, static: true })\n    public toggle: IgxToggleDirective;\n\n    @ViewChild('defaultExpressionTemplate', { read: TemplateRef })\n    protected defaultExpressionTemplate: TemplateRef<any>;\n\n    @ViewChild('dateExpressionTemplate', { read: TemplateRef })\n    protected dateExpressionTemplate: TemplateRef<any>;\n\n    @ViewChild('expressionsContainer', { static: true })\n    protected expressionsContainer: ElementRef;\n\n    constructor(private cdr: ChangeDetectorRef) {}\n\n    ngAfterViewInit(): void {\n        this._customDialogOverlaySettings.outlet = this.grid.outlet;\n    }\n\n    get template(): TemplateRef<any> {\n        if (this.column.dataType === DataType.Date) {\n            return this.dateExpressionTemplate;\n        }\n\n        return this.defaultExpressionTemplate;\n    }\n\n    get grid(): any {\n        return this.filteringService.grid;\n    }\n\n    public onCustomDialogOpening() {\n        if (this.selectedOperator) {\n            this.createInitialExpressionUIElement();\n        }\n    }\n\n    public onCustomDialogOpened() {\n        if (this.expressionComponents.first) {\n            this.expressionComponents.first.focus();\n        }\n    }\n\n    public open(esf) {\n        this._customDialogOverlaySettings.target =\n            this.overlayComponentId ?\n                this.grid.rootGrid ? this.grid.rootGrid.nativeElement : this.grid.nativeElement :\n                esf;\n        this.toggle.open(this._customDialogOverlaySettings);\n    }\n\n    public onClearButtonClick() {\n        this.filteringService.clearFilter(this.column.field);\n        this.createInitialExpressionUIElement();\n        this.cdr.detectChanges();\n    }\n\n    public closeDialog() {\n        if (this.overlayComponentId) {\n            this.overlayService.hide(this.overlayComponentId);\n        } else {\n            this.toggle.close();\n        }\n    }\n\n    public onApplyButtonClick() {\n        this.expressionsList = this.expressionsList.filter(\n            element => element.expression.condition &&\n            (element.expression.searchVal || element.expression.searchVal === 0 || element.expression.condition.isUnary));\n\n        if (this.expressionsList.length > 0) {\n            this.expressionsList[0].beforeOperator = null;\n            this.expressionsList[this.expressionsList.length - 1].afterOperator = null;\n        }\n\n        this.filteringService.filterInternal(this.column.field, this.expressionsList);\n        this.closeDialog();\n    }\n\n    public onAddButtonClick() {\n        const exprUI = new ExpressionUI();\n        exprUI.expression = {\n            condition: null,\n            fieldName: this.column.field,\n            ignoreCase: this.column.filteringIgnoreCase,\n            searchVal: null\n        };\n\n        this.expressionsList[this.expressionsList.length - 1].afterOperator = FilteringLogic.And;\n        exprUI.beforeOperator = this.expressionsList[this.expressionsList.length - 1].afterOperator;\n\n        this.expressionsList.push(exprUI);\n\n        this.markChildrenForCheck();\n        this.scrollToBottom();\n    }\n\n    public onExpressionRemoved(event: ExpressionUI) {\n        const indexToRemove = this.expressionsList.indexOf(event);\n\n        if (indexToRemove === 0 && this.expressionsList.length > 1) {\n            this.expressionsList[1].beforeOperator = null;\n        } else if (indexToRemove === this.expressionsList.length - 1) {\n            this.expressionsList[indexToRemove - 1].afterOperator = null;\n        } else {\n            this.expressionsList[indexToRemove - 1].afterOperator = this.expressionsList[indexToRemove + 1].beforeOperator;\n            this.expressionsList[0].beforeOperator = null;\n            this.expressionsList[this.expressionsList.length - 1].afterOperator = null;\n        }\n\n        this.expressionsList.splice(indexToRemove, 1);\n\n        this.cdr.detectChanges();\n\n        this.markChildrenForCheck();\n    }\n\n    public onLogicOperatorChanged(event: ILogicOperatorChangedArgs) {\n        const index = this.expressionsList.indexOf(event.target);\n        event.target.afterOperator = event.newValue;\n        if (index + 1 < this.expressionsList.length) {\n            this.expressionsList[index + 1].beforeOperator = event.newValue;\n        }\n    }\n\n    public onKeyDown(eventArgs) {\n        eventArgs.stopPropagation();\n    }\n\n    public onApplyButtonKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.TAB && !eventArgs.shiftKey) {\n            eventArgs.stopPropagation();\n            eventArgs.preventDefault();\n        }\n    }\n\n    private createCondition(conditionName: string) {\n        switch (this.column.dataType) {\n            case DataType.Boolean:\n                return IgxBooleanFilteringOperand.instance().condition(conditionName);\n            case DataType.Number:\n                return IgxNumberFilteringOperand.instance().condition(conditionName);\n            case DataType.Date:\n                return IgxDateFilteringOperand.instance().condition(conditionName);\n            default:\n                return IgxStringFilteringOperand.instance().condition(conditionName);\n        }\n    }\n\n    private markChildrenForCheck() {\n        this.expressionComponents.forEach(x => x.cdr.markForCheck());\n        this.expressionDateComponents.forEach(x => x.cdr.markForCheck());\n    }\n\n    private createInitialExpressionUIElement() {\n        this.expressionsList = [];\n        const firstExprUI = new ExpressionUI();\n\n        firstExprUI.expression = {\n            condition: this.createCondition(this.selectedOperator),\n            fieldName: this.column.field,\n            ignoreCase: this.column.filteringIgnoreCase,\n            searchVal: null\n        };\n        firstExprUI.afterOperator = FilteringLogic.And;\n\n        this.expressionsList.push(firstExprUI);\n\n        const secondExprUI = new ExpressionUI();\n        secondExprUI.expression = {\n            condition: null,\n            fieldName: this.column.field,\n            ignoreCase: this.column.filteringIgnoreCase,\n            searchVal: null\n        };\n\n        secondExprUI.beforeOperator = FilteringLogic.And;\n\n        this.expressionsList.push(secondExprUI);\n    }\n\n    private scrollToBottom() {\n        requestAnimationFrame(() => {\n            this.expressionsContainer.nativeElement.scrollTop = this.expressionsContainer.nativeElement.scrollHeight;\n        });\n    }\n}\n","import {\n    Component,\n    OnDestroy,\n    ViewChild\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { KEYS } from '../../../core/utils';\nimport { DataType } from '../../../data-operations/data-util';\nimport { IFilteringOperation } from '../../../data-operations/filtering-condition';\nimport { IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { ISelectionEventArgs, IgxDropDownComponent } from '../../../drop-down/public_api';\nimport { IgxExcelStyleCustomDialogComponent } from './excel-style-custom-dialog.component';\nimport {\n    HorizontalAlignment,\n    VerticalAlignment,\n    OverlaySettings,\n    AutoPositionStrategy,\n    AbsoluteScrollStrategy\n} from '../../../services/public_api';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\nimport { takeUntil } from 'rxjs/operators';\n\n\n/**\n * A component used for presenting Excel style conditional filter UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-conditional-filter',\n    templateUrl: './excel-style-conditional-filter.component.html'\n})\nexport class IgxExcelStyleConditionalFilterComponent implements OnDestroy {\n    private shouldOpenSubMenu = true;\n    private destroy$ = new Subject<boolean>();\n\n    private _subMenuPositionSettings = {\n        verticalStartPoint: VerticalAlignment.Top\n    };\n\n    private _subMenuOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        positionStrategy: new AutoPositionStrategy(this._subMenuPositionSettings),\n        scrollStrategy: new AbsoluteScrollStrategy()\n    };\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('customDialog', { read: IgxExcelStyleCustomDialogComponent })\n    public customDialog: IgxExcelStyleCustomDialogComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('subMenu', { read: IgxDropDownComponent })\n    public subMenu: IgxDropDownComponent;\n\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) {\n        this.esf.columnChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            if (this.esf.grid) {\n                this.shouldOpenSubMenu = true;\n                this._subMenuOverlaySettings.outlet = this.esf.grid.outlet;\n            }\n        });\n\n        if (this.esf.grid) {\n            this._subMenuOverlaySettings.outlet = this.esf.grid.outlet;\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onTextFilterKeyDown(eventArgs) {\n        if (eventArgs.key === KEYS.ENTER) {\n            this.onTextFilterClick(eventArgs);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onTextFilterClick(eventArgs) {\n        if (this.shouldOpenSubMenu) {\n            this._subMenuOverlaySettings.target = eventArgs.currentTarget;\n\n            const gridRect = this.esf.grid.nativeElement.getBoundingClientRect();\n            const dropdownRect = this.esf.mainDropdown.nativeElement.getBoundingClientRect();\n\n            let x = dropdownRect.left + dropdownRect.width;\n            let x1 = gridRect.left + gridRect.width;\n            x += window.pageXOffset;\n            x1 += window.pageXOffset;\n            if (Math.abs(x - x1) < 200) {\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalDirection = HorizontalAlignment.Left;\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalStartPoint = HorizontalAlignment.Left;\n            } else {\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalDirection = HorizontalAlignment.Right;\n                this._subMenuOverlaySettings.positionStrategy.settings.horizontalStartPoint = HorizontalAlignment.Right;\n            }\n\n            this.subMenu.open(this._subMenuOverlaySettings);\n            this.shouldOpenSubMenu = false;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getCondition(value: string): IFilteringOperation {\n        return this.esf.column.filters.condition(value);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public translateCondition(value: string): string {\n        return this.esf.grid.resourceStrings[`igx_grid_filter_${this.getCondition(value).name}`] || value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onSubMenuSelection(eventArgs: ISelectionEventArgs) {\n        if (this.esf.expressionsList && this.esf.expressionsList.length &&\n            this.esf.expressionsList[0].expression.condition.name !== 'in') {\n            this.customDialog.expressionsList = this.esf.expressionsList;\n        }\n\n        this.customDialog.selectedOperator = eventArgs.newSelection.value;\n        eventArgs.cancel = true;\n        if (this.esf.overlayComponentId) {\n            this.esf.hide();\n        }\n        this.subMenu.close();\n        this.customDialog.open(this.esf.mainDropdown.nativeElement);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onSubMenuClosed() {\n        requestAnimationFrame(() => {\n            this.shouldOpenSubMenu = true;\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public showCustomFilterItem(): boolean {\n        const exprTree = this.esf.column.filteringExpressionsTree;\n        return exprTree && exprTree.filteringOperands && exprTree.filteringOperands.length &&\n            !((exprTree.filteringOperands[0] as IFilteringExpression).condition &&\n                (exprTree.filteringOperands[0] as IFilteringExpression).condition.name === 'in');\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get subMenuText() {\n        switch (this.esf.column.dataType) {\n            case DataType.Boolean:\n                return this.esf.grid.resourceStrings.igx_grid_excel_boolean_filter;\n            case DataType.Number:\n                return this.esf.grid.resourceStrings.igx_grid_excel_number_filter;\n            case DataType.Date:\n                return this.esf.grid.resourceStrings.igx_grid_excel_date_filter;\n            default:\n                return this.esf.grid.resourceStrings.igx_grid_excel_text_filter;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get conditions() {\n        return this.esf.column.filters.conditionList();\n    }\n}\n","import { Component, Input } from '@angular/core';\r\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\r\n\r\n/**\r\n * A component used for presenting Excel style header UI.\r\n */\r\n@Component({\r\n    preserveWhitespaces: false,\r\n    selector: 'igx-excel-style-header',\r\n    templateUrl: './excel-style-header.component.html'\r\n})\r\nexport class IgxExcelStyleHeaderComponent {\r\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) { }\r\n\r\n    /**\r\n     * Sets whether the column pinning icon should be shown in the header.\r\n     * Default value is `false`.\r\n     *\r\n     * @example\r\n     * ```html\r\n     * <igx-excel-style-header [showPinning]=\"true\"></igx-excel-style-header>\r\n     * ```\r\n     */\r\n    @Input()\r\n    showPinning: boolean;\r\n\r\n    /**\r\n     * Sets whether the column selecting icon should be shown in the header.\r\n     * Default value is `false`.\r\n     *\r\n     * @example\r\n     * ```html\r\n     * <igx-excel-style-header [showSelecting]=\"true\"></igx-excel-style-header>\r\n     * ```\r\n     */\r\n    @Input()\r\n    showSelecting: boolean;\r\n\r\n    /**\r\n     * Sets whether the column hiding icon should be shown in the header.\r\n     * Default value is `false`.\r\n     *\r\n     * @example\r\n     * ```html\r\n     * <igx-excel-style-header [showHiding]=\"true\"></igx-excel-style-header>\r\n     * ```\r\n     */\r\n    @Input()\r\n    showHiding: boolean;\r\n}\r\n","import {\n    Component\n} from '@angular/core';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\n\n/**\n * A component used for presenting Excel style column hiding UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-hiding',\n    templateUrl: './excel-style-hiding.component.html'\n})\nexport class IgxExcelStyleHidingComponent {\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) { }\n}\n","import { SimpleChanges, SimpleChange } from '@angular/core';\n\n/**\n * @hidden\n */\nexport function WatchChanges(): PropertyDecorator {\n    return (target: any, key: string, propDesc?: PropertyDescriptor) => {\n        const privateKey = '_' + key.toString();\n        propDesc = propDesc || {\n            configurable: true,\n            enumerable: true,\n        };\n        propDesc.get = propDesc.get || (function (this: any) { return this[privateKey]; });\n        const originalSetter = propDesc.set || (function (this: any, val: any) { this[privateKey] = val; });\n\n        propDesc.set = function (this: any, val: any) {\n            const init = this._init;\n            const oldValue = this[key];\n            if (val !== oldValue || (typeof val === 'object' && val === oldValue)) {\n                originalSetter.call(this, val);\n                if (this.ngOnChanges && !init) {\n                    // in case wacthed prop changes trigger ngOnChanges manually\n                    const changes: SimpleChanges = {\n                        [key]: new SimpleChange(oldValue, val, false)\n                    };\n                    this.ngOnChanges(changes);\n               }\n            }\n        };\n        return propDesc;\n    };\n}\n\nexport function WatchColumnChanges(): PropertyDecorator {\n    return (target: any, key: string, propDesc?: PropertyDescriptor) => {\n        const privateKey = '_' + key.toString();\n        propDesc = propDesc || {\n            configurable: true,\n            enumerable: true,\n        };\n        propDesc.get = propDesc.get || (function (this: any) { return this[privateKey]; });\n        const originalSetter = propDesc.set || (function (this: any, val: any) { this[privateKey] = val; });\n\n        propDesc.set = function (this: any, val: any) {\n            const oldValue = this[key];\n            originalSetter.call(this, val);\n            if (val !== oldValue || (typeof val === 'object' && val === oldValue)) {\n                if (this.onColumnChange) {\n                    this.onColumnChange.emit();\n                }\n            }\n        };\n        return propDesc;\n    };\n}\n\nexport function notifyChanges(repaint = false) {\n    return (_: any, key: string, propDesc?: PropertyDescriptor) => {\n\n        const privateKey = `__${key}`;\n\n        propDesc = propDesc || {\n            enumerable: true,\n            configurable: true\n        };\n\n\n        const originalSetter = propDesc ? propDesc.set : null;\n\n        propDesc.get = propDesc.get || (function(this) { return this[privateKey]; });\n\n        propDesc.set = function(this, newValue) {\n            if (originalSetter) {\n                originalSetter.call(this, newValue);\n                if (this.grid) {\n                    this.grid.notifyChanges(repaint);\n                }\n            } else {\n                if (newValue === this[key]) { return; }\n                this[privateKey] = newValue;\n                if (this.grid) {\n                    this.grid.notifyChanges(repaint);\n                }\n            }\n        };\n        return propDesc as any;\n    };\n}\n","import { DecimalPipe, DatePipe } from '@angular/common';\nimport { IColumnPipeArgs } from '../columns/interfaces';\n\nexport interface ISummaryExpression {\n    fieldName: string;\n    customSummary?: any;\n}\nexport interface IgxSummaryResult {\n    key: string;\n    label: string;\n    summaryResult: any;\n}\n\nexport interface ISummaryRecord {\n    summaries: Map<string, IgxSummaryResult[]>;\n    max?: number;\n    cellIndentation?: number;\n}\n\nconst clear = (el) => el === 0 || Boolean(el);\nconst first = (arr) => arr[0];\nconst last = (arr) => arr[arr.length - 1];\n\nexport class IgxSummaryOperand {\n    /**\n     * Counts all the records in the data source.\n     * If filtering is applied, counts only the filtered records.\n     * ```typescript\n     * IgxSummaryOperand.count(dataSource);\n     * ```\n     * @memberof IgxSummaryOperand\n     */\n    public static count(data: any[]): number {\n        return data.length;\n    }\n    /**\n     * Executes the static `count` method and returns `IgxSummaryResult[]`.\n     * ```typescript\n     * interface IgxSummaryResult {\n     *   key: string;\n     *   label: string;\n     *   summaryResult: any;\n     * }\n     * ```\n     * Can be overridden in the inherited classes to provide customization for the `summary`.\n     * ```typescript\n     * class CustomSummary extends IgxSummaryOperand {\n     *   constructor() {\n     *     super();\n     *   }\n     *   public operate(data: any[], allData: any[], fieldName: string): IgxSummaryResult[] {\n     *     const result = [];\n     *     result.push({\n     *       key: \"test\",\n     *       label: \"Test\",\n     *       summaryResult: IgxSummaryOperand.count(data)\n     *     });\n     *     return result;\n     *   }\n     * }\n     * this.grid.getColumnByName('ColumnName').summaries = CustomSummary;\n     * ```\n     * @memberof IgxSummaryOperand\n     */\n    public operate(data: any[] = [], allData: any[] = [], fieldName?: string, locale: string = 'en-US'): IgxSummaryResult[] {\n        const pipe = new DecimalPipe(locale);\n        return [{\n            key: 'count',\n            label: 'Count',\n            summaryResult: pipe.transform(IgxSummaryOperand.count(data))\n        }];\n    }\n}\n\n// @dynamic\nexport class IgxNumberSummaryOperand extends IgxSummaryOperand {\n    /**\n     * Returns the minimum numeric value in the provided data records.\n     * If filtering is applied, returns the minimum value in the filtered data records.\n     * ```typescript\n     * IgxNumberSummaryOperand.min(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static min(data: any[]): number {\n        return data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => Math.min(a, b)) : 0;\n    }\n    /**\n     * Returns the maximum numeric value in the provided data records.\n     * If filtering is applied, returns the maximum value in the filtered data records.\n     * ```typescript\n     * IgxNumberSummaryOperand.max(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static max(data: any[]): number {\n        return data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => Math.max(a, b)) : 0;\n    }\n    /**\n     * Returns the sum of the numeric values in the provided data records.\n     * If filtering is applied, returns the sum of the numeric values in the data records.\n     * ```typescript\n     * IgxNumberSummaryOperand.sum(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static sum(data: any[]): number {\n        return data.length && data.filter(clear).length ? data.filter(clear).reduce((a, b) => +a + +b) : 0;\n    }\n    /**\n     * Returns the average numeric value in the data provided data records.\n     * If filtering is applied, returns the average numeric value in the filtered data records.\n     * ```typescript\n     * IgxSummaryOperand.average(data);\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public static average(data: any[]): number {\n        return data.length && data.filter(clear).length ? this.sum(data) / this.count(data) : 0;\n    }\n    /**\n     * Executes the static methods and returns `IgxSummaryResult[]`.\n     * ```typescript\n     * interface IgxSummaryResult {\n     *   key: string;\n     *   label: string;\n     *   summaryResult: any;\n     * }\n     * ```\n     * Can be overridden in the inherited classes to provide customization for the `summary`.\n     * ```typescript\n     * class CustomNumberSummary extends IgxNumberSummaryOperand {\n     *   constructor() {\n     *     super();\n     *   }\n     *   public operate(data: any[], allData: any[], fieldName: string, locale: string, pipeArgs: IColumnPipeArgs): IgxSummaryResult[] {\n     *     pipeArgs.digitsInfo = '1.1-2';\n     *     const result = super.operate(data, allData, fieldName, locale, pipeArgs);\n     *     result.push({\n     *       key: \"avg\",\n     *       label: \"Avg\",\n     *       summaryResult: IgxNumberSummaryOperand.average(data)\n     *     });\n     *     result.push({\n     *       key: 'mdn',\n     *       label: 'Median',\n     *       summaryResult: this.findMedian(data)\n     *     });\n     *     return result;\n     *   }\n     * }\n     * this.grid.getColumnByName('ColumnName').summaries = CustomNumberSummary;\n     * ```\n     * @memberof IgxNumberSummaryOperand\n     */\n    public operate(data: any[] = [], allData: any[] = [], fieldName?: string, locale: string = 'en-US',\n        pipeArgs: IColumnPipeArgs = {}):\n    IgxSummaryResult[] {\n        const result = super.operate(data, allData, fieldName, locale);\n        const pipe = new DecimalPipe(locale);\n        result.push({\n            key: 'min',\n            label: 'Min',\n            summaryResult: pipe.transform(IgxNumberSummaryOperand.min(data), pipeArgs.digitsInfo)\n        });\n        result.push({\n            key: 'max',\n            label: 'Max',\n            summaryResult: pipe.transform(IgxNumberSummaryOperand.max(data), pipeArgs.digitsInfo)\n        });\n        result.push({\n            key: 'sum',\n            label: 'Sum',\n            summaryResult: pipe.transform(IgxNumberSummaryOperand.sum(data), pipeArgs.digitsInfo)\n        });\n        result.push({\n            key: 'average',\n            label: 'Avg',\n            summaryResult: pipe.transform(IgxNumberSummaryOperand.average(data), pipeArgs.digitsInfo)\n        });\n        return result;\n    }\n}\n\n// @dynamic\nexport class IgxDateSummaryOperand extends IgxSummaryOperand {\n    /**\n     * Returns the latest date value in the data records.\n     * If filtering is applied, returns the latest date value in the filtered data records.\n     * ```typescript\n     * IgxDateSummaryOperand.latest(data);\n     * ```\n     * @memberof IgxDateSummaryOperand\n     */\n    public static latest(data: any[]) {\n        return data.length && data.filter(clear).length ?\n            first(data.filter(clear).sort((a, b) => new Date(b).valueOf() - new Date(a).valueOf())) : undefined;\n    }\n    /**\n     * Returns the earliest date value in the data records.\n     * If filtering is applied, returns the latest date value in the filtered data records.\n     * ```typescript\n     * IgxDateSummaryOperand.earliest(data);\n     * ```\n     * @memberof IgxDateSummaryOperand\n     */\n    public static earliest(data: any[]) {\n        return data.length && data.filter(clear).length ?\n            last(data.filter(clear).sort((a, b) => new Date(b).valueOf() - new Date(a).valueOf())) : undefined;\n    }\n    /**\n     * Executes the static methods and returns `IgxSummaryResult[]`.\n     * ```typescript\n     * interface IgxSummaryResult {\n     *   key: string;\n     *   label: string;\n     *   summaryResult: any;\n     * }\n     * ```\n     * Can be overridden in the inherited classes to provide customization for the `summary`.\n     * ```typescript\n     * class CustomDateSummary extends IgxDateSummaryOperand {\n     *   constructor() {\n     *     super();\n     *   }\n     *   public operate(data: any[], allData: any[], fieldName: string, locale: string, pipeArgs: IColumnPipeArgs): IgxSummaryResult[] {\n     *     pipeArgs = {\n     *        format: 'longDate',\n     *        timezone: 'UTC'\n     *     };\n     *     const result = super.operate(data, allData, fieldName, locale, pipeArgs);\n     *     result.push({\n     *       key: \"deadline\",\n     *       label: \"Deadline Date\",\n     *       summaryResult: this.calculateDeadline(data);\n     *     });\n     *     return result;\n     *   }\n     * }\n     * this.grid.getColumnByName('ColumnName').summaries = CustomDateSummary;\n     * ```\n     * @memberof IgxDateSummaryOperand\n     */\n    public operate(data: any[] = [], allData: any[] = [],  fieldName?: string, locale: string = 'en-US',\n        pipeArgs: IColumnPipeArgs = {}): IgxSummaryResult[] {\n        const result = super.operate(data, allData, fieldName, locale);\n        const pipe = new DatePipe(locale);\n        result.push({\n            key: 'earliest',\n            label: 'Earliest',\n            summaryResult: pipe.transform(IgxDateSummaryOperand.earliest(data), pipeArgs.format, pipeArgs.timezone)\n        });\n        result.push({\n            key: 'latest',\n            label: 'Latest',\n            summaryResult: pipe.transform(IgxDateSummaryOperand.latest(data), pipeArgs.format, pipeArgs.timezone)\n        });\n        return result;\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n\n@Directive({\n    selector: '[igxFilterCellTemplate]'\n})\nexport class IgxFilterCellTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n@Directive({\n    selector: '[igxCell]'\n})\nexport class IgxCellTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxHeader]'\n})\nexport class IgxCellHeaderTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n\n}\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxFooter]'\n})\nexport class IgxCellFooterTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxCellEditor]'\n})\nexport class IgxCellEditorTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxCollapsibleIndicator]'\n})\nexport class IgxCollapsibleIndicatorTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n","import { Injectable } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\n\n/**\n * This enumeration is used to configure whether the drop position is set before or after\n * the target.\n */\nexport enum DropPosition {\n    BeforeDropTarget,\n    AfterDropTarget\n}\n\n\n/**\n * @hidden\n * @internal\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class IgxColumnMovingService {\n    private _icon: any;\n    private _column: IgxColumnComponent;\n\n    public cancelDrop: boolean;\n    public isColumnMoving: boolean;\n\n    get column(): IgxColumnComponent {\n        return this._column;\n    }\n    set column(val: IgxColumnComponent) {\n        if (val) {\n            this._column = val;\n        }\n    }\n\n    get icon(): any {\n        return this._icon;\n    }\n    set icon(val: any) {\n        if (val) {\n            this._icon = val;\n        }\n    }\n}\n","import { Subject } from 'rxjs';\nimport {\n    AfterContentInit,\n    ChangeDetectorRef,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    ContentChildren,\n    Input,\n    QueryList,\n    TemplateRef,\n    Output,\n    EventEmitter,\n    OnDestroy,\n} from '@angular/core';\nimport { notifyChanges } from '../watch-changes';\nimport { WatchColumnChanges } from '../watch-changes';\nimport { DataType } from '../../data-operations/data-util';\nimport {\n    IgxFilteringOperand,\n    IgxBooleanFilteringOperand,\n    IgxNumberFilteringOperand,\n    IgxDateFilteringOperand,\n    IgxStringFilteringOperand\n} from '../../data-operations/filtering-condition';\nimport { ISortingStrategy, DefaultSortingStrategy } from '../../data-operations/sorting-strategy';\nimport { DisplayDensity } from '../../core/displayDensity';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { GridBaseAPIService } from '../api.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridHeaderComponent } from '../headers/grid-header.component';\nimport { IgxGridFilteringCellComponent } from '../filtering/base/grid-filtering-cell.component';\nimport { IgxGridHeaderGroupComponent } from '../headers/grid-header-group.component';\nimport { getNodeSizeViaRange } from '../../core/utils';\nimport { IgxSummaryOperand, IgxNumberSummaryOperand, IgxDateSummaryOperand } from '../summaries/grid-summary';\nimport {\n    IgxCellTemplateDirective,\n    IgxCellHeaderTemplateDirective,\n    IgxCellEditorTemplateDirective,\n    IgxCollapsibleIndicatorTemplateDirective,\n    IgxFilterCellTemplateDirective\n} from './templates.directive';\nimport { MRLResizeColumnInfo, MRLColumnSizeInfo, IColumnPipeArgs } from './interfaces';\nimport { DropPosition } from '../moving/moving.service';\nimport { IgxColumnGroupComponent } from './column-group.component';\n\nconst DEFAULT_DATE_FORMAT = 'mediumDate';\nconst DEFAULT_DIGITS_INFO = '1.0-3';\n\n/**\n * **Ignite UI for Angular Column** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/grid/grid#columns-configuration)\n *\n * The Ignite UI Column is used within an `igx-grid` element to define what data the column will show. Features such as sorting,\n * filtering & editing are enabled at the column level.  You can also provide a template containing custom content inside\n * the column using `ng-template` which will be used for all cells within the column.\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-column',\n    template: ``\n})\nexport class IgxColumnComponent implements AfterContentInit, OnDestroy {\n    /**\n     * Sets/gets the `field` value.\n     * ```typescript\n     * let columnField = this.column.field;\n     * ```\n     * ```html\n     * <igx-column [field] = \"'ID'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public field: string;\n    /**\n     * Sets/gets the `header` value.\n     * ```typescript\n     * let columnHeader = this.column.header;\n     * ```\n     * ```html\n     * <igx-column [header] = \"'ID'\"></igx-column>\n     * ```\n     *\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public header = '';\n    /**\n     * Sets/gets the `title` value.\n     * ```typescript\n     * let title = this.column.title;\n     * ```\n     * ```html\n     * <igx-column [title] = \"'Some column tooltip'\"></igx-column>\n     * ```\n     *\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public title = '';\n    /**\n     * Sets/gets whether the column is sortable.\n     * Default value is `false`.\n     * ```typescript\n     * let isSortable = this.column.sortable;\n     * ```\n     * ```html\n     * <igx-column [sortable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public sortable = false;\n    /**\n     * Returns if the column is selectable.\n     * ```typescript\n     * let columnSelectable = this.column.selectable;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    get selectable(): boolean  {\n        return this._selectable;\n    }\n\n    /**\n     * Sets if the column is selectable.\n     * Default value is `true`.\n     * ```html\n     * <igx-column [selectable] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set selectable(value: boolean) {\n        this._selectable = value;\n    }\n\n    /**\n     * Sets/gets whether the column is groupable.\n     * Default value is `false`.\n     * ```typescript\n     * let isGroupable = this.column.groupable;\n     * ```\n     * ```html\n     * <igx-column [groupable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    groupable = false;\n    /**\n     * Gets whether the column is editable.\n     * Default value is `false`.\n     * ```typescript\n     * let isEditable = this.column.editable;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    get editable(): boolean {\n        // Updating the primary key when grid has transactions (incl. row edit)\n        // should not be allowed, as that can corrupt transaction state.\n        const rowEditable = this.grid && this.grid.rowEditable;\n        const hasTransactions = this.grid && this.grid.transactions.enabled;\n\n        if (this.isPrimaryColumn && (rowEditable || hasTransactions)) {\n            return false;\n        }\n\n        if (this._editable !== undefined) {\n            return this._editable;\n        } else {\n            return rowEditable;\n        }\n    }\n    /**\n     * Sets whether the column is editable.\n     * ```typescript\n     * this.column.editable = true;\n     * ```\n     * ```html\n     * <igx-column [editable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set editable(editable: boolean) {\n        this._editable = editable;\n    }\n    /**\n     * Sets/gets whether the column is filterable.\n     * Default value is `true`.\n     * ```typescript\n     * let isFilterable = this.column.filterable;\n     * ```\n     * ```html\n     * <igx-column [filterable] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public filterable = true;\n    /**\n     * Sets/gets whether the column is resizable.\n     * Default value is `false`.\n     * ```typescript\n     * let isResizable = this.column.resizable;\n     * ```\n     * ```html\n     * <igx-column [resizable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public resizable = false;\n    /**\n     * Gets a value indicating whether the summary for the column is enabled.\n     * ```typescript\n     * let hasSummary = this.column.hasSummary;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    get hasSummary() {\n        return this._hasSummary;\n    }\n    /**\n     * Sets a value indicating whether the summary for the column is enabled.\n     * Default value is `false`.\n     * ```html\n     * <igx-column [hasSummary] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set hasSummary(value) {\n        this._hasSummary = value;\n\n        if (this.grid) {\n            this.grid.summaryService.resetSummaryHeight();\n        }\n    }\n    /**\n     * Gets whether the column is hidden.\n     * ```typescript\n     * let isHidden = this.column.hidden;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    get hidden(): boolean {\n        return this._hidden;\n    }\n    /**\n     * Sets the column hidden property.\n     * Default value is `false`.\n     * ```html\n     * <igx-column [hidden] = \"true\"></igx-column>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-column [(hidden)] = \"model.isHidden\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set hidden(value: boolean) {\n        if (this._hidden !== value) {\n            this._hidden = value;\n            this.hiddenChange.emit(this._hidden);\n            if (this.columnLayoutChild && this.parent.hidden !== value) {\n                this.parent.hidden = value;\n                return;\n            }\n            if (this.grid) {\n                this.grid.endEdit(false);\n                this.grid.summaryService.resetSummaryHeight();\n                this.grid.filteringService.refreshExpressions();\n                this.grid.filteringService.hideFilteringRowOnColumnVisibilityChange(this);\n                this.grid.notifyChanges();\n            }\n        }\n    }\n\n    /**\n     * Returns if the column is selected.\n     * ```typescript\n     * let isSelected = this.column.selected;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get selected(): boolean {\n        return this.grid.selectionService.isColumnSelected(this.field);\n    }\n\n    /**\n     * Select/deselect a column.\n     * Default value is `false`.\n     * ```typescript\n     * this.column.selected = true;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set selected(value: boolean) {\n        if (this.selectable && value !== this.selected) {\n            value ? this.grid.selectionService.selectColumnsWithNoEvent([this.field]) :\n            this.grid.selectionService.deselectColumnsWithNoEvent([this.field]);\n            this.grid.notifyChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public hiddenChange = new EventEmitter<boolean>();\n\n    /** @hidden */\n    @Output()\n    public expandedChange = new EventEmitter<boolean>();\n\n    /** @hidden */\n    @Output()\n    public collapsibleChange = new EventEmitter<boolean>();\n    /** @hidden */\n    @Output()\n    public visibleWhenCollapsedChange = new EventEmitter<boolean>();\n\n    /** @hidden */\n    @Output()\n    public onColumnChange = new EventEmitter<void>();\n\n    /**\n     * Gets whether the hiding is disabled.\n     * ```typescript\n     * let isHidingDisabled =  this.column.disableHiding;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    disableHiding = false;\n    /**\n     * Gets whether the pinning is disabled.\n     * ```typescript\n     * let isPinningDisabled =  this.column.disablePinning;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    disablePinning = false;\n    /**\n     * Sets/gets whether the column is movable.\n     * Default value is `false`.\n     * ```typescript\n     * let isMovable = this.column.movable;\n     * ```\n     * ```html\n     * <igx-column [movable] = \"true\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @notifyChanges()\n    @Input()\n    public movable = false;\n    /**\n     * Gets the `width` of the column.\n     * ```typescript\n     * let columnWidth = this.column.width;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    public get width(): string {\n        return this.widthSetByUser ? this._width : this.defaultWidth;\n    }\n    /**\n     * Sets the `width` of the column.\n     * ```html\n     * <igx-column [width] = \"'25%'\"></igx-column>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-column [(width)]=\"model.columns[0].width\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set width(value: string) {\n        if (value) {\n            this._calcWidth = null;\n            this.calcPixelWidth = NaN;\n            this.widthSetByUser = true;\n            // width could be passed as number from the template\n            // host bindings are not px affixed so we need to ensure we affix simple number strings\n            if (typeof(value) === 'number' || value.match(/^[0-9]*$/)) {\n                value = value + 'px';\n            }\n            this._width = value;\n            if (this.grid) {\n                this.cacheCalcWidth();\n            }\n            this.widthChange.emit(this._width);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public widthChange = new EventEmitter<string>();\n\n    /**\n     * @hidden\n     */\n    public get calcWidth(): any {\n        return this.getCalcWidth();\n    }\n\n    private _calcWidth = null;\n    public calcPixelWidth: number;\n    /**\n     * @hidden\n     */\n    protected _applySelectableClass = false;\n\n    /**\n     * Sets/gets the maximum `width` of the column.\n     * ```typescript\n     * let columnMaxWidth = this.column.width;\n     * ```\n     * ```html\n     * <igx-column [maxWidth] = \"'150px'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public maxWidth: string;\n\n    /**\n     * @hidden\n     */\n    get maxWidthPx() {\n        const gridAvailableSize = this.grid.calcWidth;\n        const isPercentageWidth = this.maxWidth && typeof this.maxWidth === 'string' && this.maxWidth.indexOf('%') !== -1;\n        return isPercentageWidth ?  parseFloat(this.maxWidth) / 100 * gridAvailableSize : parseFloat(this.maxWidth);\n    }\n\n    /**\n     * @hidden\n     */\n    get maxWidthPercent() {\n        const gridAvailableSize = this.grid.calcWidth;\n        const isPercentageWidth = this.maxWidth && typeof this.maxWidth === 'string' && this.maxWidth.indexOf('%') !== -1;\n        return isPercentageWidth ?  parseFloat(this.maxWidth) : parseFloat(this.maxWidth) / gridAvailableSize * 100;\n    }\n\n    /**\n     * @hidden\n     */\n    get minWidthPx() {\n        const gridAvailableSize = this.grid.calcWidth;\n        const isPercentageWidth = this.minWidth && typeof this.minWidth === 'string' && this.minWidth.indexOf('%') !== -1;\n        return isPercentageWidth ?  parseFloat(this.minWidth) / 100 * gridAvailableSize : parseFloat(this.minWidth);\n    }\n\n    /**\n     * @hidden\n     */\n    get minWidthPercent() {\n        const gridAvailableSize = this.grid.calcWidth;\n        const isPercentageWidth = this.minWidth && typeof this.minWidth === 'string' && this.minWidth.indexOf('%') !== -1;\n        return isPercentageWidth ?  parseFloat(this.minWidth) : parseFloat(this.minWidth) / gridAvailableSize * 100;\n    }\n\n\n    /**\n     * Sets/gets the minimum `width` of the column.\n     * Default value is `88`;\n     * ```typescript\n     * let columnMinWidth = this.column.minWidth;\n     * ```\n     * ```html\n     * <igx-column [minWidth] = \"'100px'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public set minWidth(value: string) {\n        const minVal = parseFloat(value);\n        if (Number.isNaN(minVal)) { return; }\n        this._defaultMinWidth = value;\n\n    }\n    public get minWidth(): string {\n        return !this._defaultMinWidth ? this.defaultMinWidth : this._defaultMinWidth;\n    }\n    /**\n     * Sets/gets the class selector of the column header.\n     * ```typescript\n     * let columnHeaderClass = this.column.headerClasses;\n     * ```\n     * ```html\n     * <igx-column [headerClasses] = \"'column-header'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public headerClasses = '';\n\n    /**\n     * Sets/gets the class selector of the column group header.\n     * ```typescript\n     * let columnHeaderClass = this.column.headerGroupClasses;\n     * ```\n     * ```html\n     * <igx-column [headerGroupClasses] = \"'column-group-header'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public headerGroupClasses = '';\n    /**\n     * Sets a conditional class selector of the column cells.\n     * Accepts an object literal, containing key-value pairs,\n     * where the key is the name of the CSS class, while the\n     * value is either a callback function that returns a boolean,\n     * or boolean, like so:\n     * ```typescript\n     * callback = (rowData, columnKey, cellValue, rowIndex) => { return rowData[columnKey] > 6; }\n     * cellClasses = { 'className' : this.callback };\n     * ```\n     * ```html\n     * <igx-column [cellClasses] = \"cellClasses\"></igx-column>\n     * <igx-column [cellClasses] = \"{'class1' : true }\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public cellClasses: any;\n\n    /**\n     * Sets conditional style properties on the column cells.\n     * Similar to `ngStyle` it accepts an object literal where the keys are\n     * the style properties and the value is the expression to be evaluated.\n     * As with `cellClasses` it accepts a callback function.\n     * ```typescript\n     * styles = {\n     *  background: 'royalblue',\n     *  color: (rowData, columnKey, cellValue, rowIndex) => value.startsWith('Important') : 'red': 'inherit'\n     * }\n     * ```\n     * ```html\n     * <igx-column [cellStyles]=\"styles\"></igx-column>\n     * ```\n     *\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    cellStyles = null;\n    /**\n     * Gets the column index.\n     * ```typescript\n     * let columnIndex = this.column.index;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get index(): number {\n        return this.grid.columns.indexOf(this);\n    }\n    /**\n     * When autogenerating columns, the formatter is used to format the display of the column data\n     * without modifying the underlying bound values.\n     *\n     * In this example, we check to see if the column name is Salary, and then provide a method as the column formatter\n     * to format the value into a currency string.\n     *\n     * ```typescript\n     * onColumnInit(column: IgxColumnComponent) {\n     *   if (column.field == \"Salary\") {\n     *     column.formatter = (salary => this.format(salary));\n     *   }\n     * }\n     *\n     * format(value: number) : string {\n     *   return formatCurrency(value, \"en-us\", \"$\");\n     * }\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    formatter: (value: any) => any;\n    /**\n     * Sets/gets whether the column filtering should be case sensitive.\n     * Default value is `true`.\n     * ```typescript\n     * let filteringIgnoreCase = this.column.filteringIgnoreCase;\n     * ```\n     * ```html\n     * <igx-column [filteringIgnoreCase] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public filteringIgnoreCase = true;\n    /**\n     * Sets/gets whether the column sorting should be case sensitive.\n     * Default value is `true`.\n     * ```typescript\n     * let sortingIgnoreCase = this.column.sortingIgnoreCase;\n     * ```\n     * ```html\n     * <igx-column [sortingIgnoreCase] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public sortingIgnoreCase = true;\n    /**\n     * Sets/gets the data type of the column values.\n     * Default value is `string`.\n     * ```typescript\n     * let columnDataType = this.column.dataType;\n     * ```\n     * ```html\n     * <igx-column [dataType] = \"'number'\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public dataType: DataType = DataType.String;\n    /**\n     * Gets whether the column is `pinned`.\n     * ```typescript\n     * let isPinned = this.column.pinned;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @WatchColumnChanges()\n    @Input()\n    public get pinned(): boolean {\n        return this._pinned;\n    }\n    /**\n     * Sets whether the column is pinned.\n     * Default value is `false`.\n     * ```html\n     * <igx-column [pinned] = \"true\"></igx-column>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-column [(pinned)] = \"model.columns[0].isPinned\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set pinned(value: boolean) {\n        if (this._pinned !== value) {\n            if (this.grid && this.width && !isNaN(parseInt(this.width, 10))) {\n                value ? this.pin() : this.unpin();\n                return;\n            }\n            /* No grid/width available at initialization. `initPinning` in the grid\n               will re-init the group (if present)\n            */\n            this._unpinnedIndex = this.grid ? this.grid.columns.filter(x => !x.pinned).indexOf(this) : 0;\n            this._pinned = value;\n            this.pinnedChange.emit(this._pinned);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public pinnedChange = new EventEmitter<boolean>();\n\n    /**\n     * Gets the column `summaries`.\n     * ```typescript\n     * let columnSummaries = this.column.summaries;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @WatchColumnChanges()\n    @Input()\n    public get summaries(): any {\n        return this._summaries;\n    }\n    /**\n     * Sets the column `summaries`.\n     * ```typescript\n     * this.column.summaries = IgxNumberSummaryOperand;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set summaries(classRef: any) {\n        this._summaries = new classRef();\n\n        if (this.grid) {\n            this.grid.summaryService.removeSummariesCachePerColumn(this.field);\n            (this.grid as any)._summaryPipeTrigger++;\n            this.grid.summaryService.resetSummaryHeight();\n        }\n    }\n    /**\n     * Sets/gets whether the column is `searchable`.\n     * Default value is `true`.\n     * ```typescript\n     * let isSearchable =  this.column.searchable';\n     * ```\n     * ```html\n     *  <igx-column [searchable] = \"false\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    public searchable = true;\n    /**\n     * Gets the column `filters`.\n     * ```typescript\n     * let columnFilters = this.column.filters'\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public get filters(): IgxFilteringOperand {\n        return this._filters;\n    }\n    /**\n     * Sets the column `filters`.\n     * ```typescript\n     * this.column.filters = IgxBooleanFilteringOperand.instance().\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set filters(instance: IgxFilteringOperand) {\n        this._filters = instance;\n    }\n    /**\n     * Gets the column `sortStrategy`.\n     * ```typescript\n     * let sortStrategy = this.column.sortStrategy\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public get sortStrategy(): ISortingStrategy {\n        return this._sortStrategy;\n    }\n    /**\n     * Sets the column `sortStrategy`.\n     * ```typescript\n     * this.column.sortStrategy = new CustomSortingStrategy().\n     * class CustomSortingStrategy extends SortingStrategy {...}\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set sortStrategy(classRef: ISortingStrategy) {\n        this._sortStrategy = classRef;\n    }\n    /**\n     * Gets the function that compares values for grouping.\n     * ```typescript\n     * let groupingComparer = this.column.groupingComparer'\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public get groupingComparer(): (a: any, b: any) => number {\n        return this._groupingComparer;\n    }\n    /**\n     * Sets a custom function to compare values for grouping.\n     * Subsequent values in the sorted data that the function returns 0 for are grouped.\n     * ```typescript\n     * this.column.groupingComparer = (a: any, b: any) => { return a === b ? 0 : -1; }\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public set groupingComparer(funcRef: (a: any, b: any) => number) {\n        this._groupingComparer = funcRef;\n    }\n    /**\n     * Gets the default minimum `width` of the column.\n     * ```typescript\n     * let defaultMinWidth =  this.column.defaultMinWidth;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get defaultMinWidth(): string {\n        if (!this.grid) { return '80'; }\n        switch (this.grid.displayDensity) {\n            case DisplayDensity.cosy:\n                return '64';\n            case DisplayDensity.compact:\n                return '56';\n            default:\n                return '80';\n        }\n    }\n    /**\n     * The reference to the `igx-grid` owner.\n     * ```typescript\n     * let gridComponent = this.column.grid;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public get grid(): IgxGridBaseDirective {\n        return this.gridAPI.grid;\n    }\n    /**\n     * Returns a reference to the `bodyTemplate`.\n     * ```typescript\n     * let bodyTemplate = this.column.bodyTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input('cellTemplate')\n    get bodyTemplate(): TemplateRef<any> {\n        return this._bodyTemplate;\n    }\n    /**\n     * Sets the body template.\n     * ```html\n     * <ng-template #bodyTemplate igxCell let-val>\n     *    <div style = \"background-color: yellowgreen\" (click) = \"changeColor(val)\">\n     *       <span> {{val}} </span>\n     *    </div>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'bodyTemplate'\", {read: TemplateRef })\n     * public bodyTemplate: TemplateRef<any>;\n     * this.column.bodyTemplate = this.bodyTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set bodyTemplate(template: TemplateRef<any>) {\n        this._bodyTemplate = template;\n    }\n    /**\n     * Returns a reference to the header template.\n     * ```typescript\n     * let headerTemplate = this.column.headerTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input()\n    get headerTemplate(): TemplateRef<any> {\n        return this._headerTemplate;\n    }\n    /**\n     * Sets the header template.\n     * Note that the column header height is fixed and any content bigger than it will be cut off.\n     * ```html\n     * <ng-template #headerTemplate>\n     *   <div style = \"background-color:black\" (click) = \"changeColor(val)\">\n     *       <span style=\"color:red\" >{{column.field}}</span>\n     *   </div>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'headerTemplate'\", {read: TemplateRef })\n     * public headerTemplate: TemplateRef<any>;\n     * this.column.headerTemplate = this.headerTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set headerTemplate(template: TemplateRef<any>) {\n        this._headerTemplate = template;\n    }\n    /**\n     * Returns a reference to the inline editor template.\n     * ```typescript\n     * let inlineEditorTemplate = this.column.inlineEditorTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input('cellEditorTemplate')\n    get inlineEditorTemplate(): TemplateRef<any> {\n        return this._inlineEditorTemplate;\n    }\n    /**\n     * Sets the inline editor template.\n     * ```html\n     * <ng-template #inlineEditorTemplate igxCellEditor let-cell=\"cell\">\n     *     <input type=\"string\" [(ngModel)]=\"cell.value\"/>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'inlineEditorTemplate'\", {read: TemplateRef })\n     * public inlineEditorTemplate: TemplateRef<any>;\n     * this.column.inlineEditorTemplate = this.inlineEditorTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set inlineEditorTemplate(template: TemplateRef<any>) {\n        this._inlineEditorTemplate = template;\n    }\n    /**\n     * Returns a reference to the `filterCellTemplate`.\n     * ```typescript\n     * let filterCellTemplate = this.column.filterCellTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges()\n    @WatchColumnChanges()\n    @Input('filterCellTemplate')\n    get filterCellTemplate(): TemplateRef<any> {\n        return this._filterCellTemplate;\n    }\n    /**\n     * Sets the quick filter template.\n     * ```html\n     * <ng-template #filterCellTemplate IgxFilterCellTemplate let-column=\"column\">\n     *    <input (input)=\"onInput()\">\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild(\"'filterCellTemplate'\", {read: TemplateRef })\n     * public filterCellTemplate: TemplateRef<any>;\n     * this.column.filterCellTemplate = this.filterCellTemplate;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    set filterCellTemplate(template: TemplateRef<any>) {\n        this._filterCellTemplate = template;\n    }\n\n    /** @hidden */\n    @Input()\n    public collapsibleIndicatorTemplate: TemplateRef<any>;\n    /**\n     * Gets the cells of the column.\n     * ```typescript\n     * let columnCells =  this.column.cells;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get cells(): IgxGridCellComponent[] {\n        return this.grid.rowList.filter((row) => row instanceof IgxRowDirective)\n            .map((row) => {\n                if (row.cells) {\n                    return row.cells.filter((cell) => cell.columnIndex === this.index);\n                }\n            }).reduce((a, b) => a.concat(b), []);\n    }\n    /**\n     * Gets the column visible index.\n     * If the column is not visible, returns `-1`.\n     * ```typescript\n     * let visibleColumnIndex =  this.column.visibleIndex;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get visibleIndex(): number {\n        if (!isNaN(this._vIndex)) {\n            return this._vIndex;\n        }\n        const unpinnedColumns = this.grid.unpinnedColumns.filter(c => !c.columnGroup);\n        const pinnedColumns = this.grid.pinnedColumns.filter(c => !c.columnGroup);\n        let col = this;\n        let vIndex = -1;\n\n        if (this.columnGroup) {\n            col = this.allChildren.filter(c => !c.columnGroup && !c.hidden)[0] as any;\n        }\n        if (this.columnLayoutChild) {\n            return this.parent.childrenVisibleIndexes.find(x => x.column === this).index;\n        }\n\n        if (!this.pinned) {\n            const indexInCollection = unpinnedColumns.indexOf(col);\n            vIndex = indexInCollection === -1 ?\n                -1 :\n                (this.grid.isPinningToStart ?\n                    pinnedColumns.length + indexInCollection :\n                    indexInCollection);\n        } else {\n            const indexInCollection = pinnedColumns.indexOf(col);\n            vIndex = this.grid.isPinningToStart ?\n                indexInCollection :\n                unpinnedColumns.length + indexInCollection;\n        }\n        this._vIndex = vIndex;\n        return vIndex;\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnGroup`.\n     * ```typescript\n     * let columnGroup =  this.column.columnGroup;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnGroup() {\n        return false;\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnLayout` for multi-row layout.\n     * ```typescript\n     * let columnGroup =  this.column.columnGroup;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnLayout() {\n        return false;\n    }\n\n    /**\n     * Returns a boolean indicating if the column is a child of a `ColumnLayout` for multi-row layout.\n     * ```typescript\n     * let columnLayoutChild =  this.column.columnLayoutChild;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnLayoutChild() {\n        return this.parent && this.parent.columnLayout;\n    }\n\n    /**\n     * Returns the children columns collection.\n     * Returns an empty array if the column does not contain children columns.\n     * ```typescript\n     * let childrenColumns =  this.column.allChildren;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get allChildren(): IgxColumnComponent[] {\n        return [];\n    }\n    /**\n     * Returns the level of the column in a column group.\n     * Returns `0` if the column doesn't have a `parent`.\n     * ```typescript\n     * let columnLevel =  this.column.level;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get level() {\n        let ptr = this.parent;\n        let lvl = 0;\n\n        while (ptr) {\n            lvl++;\n            ptr = ptr.parent;\n        }\n        return lvl;\n    }\n\n    get isLastPinned(): boolean {\n        return this.grid.isPinningToStart &&\n            this.grid.pinnedColumns[this.grid.pinnedColumns.length - 1] === this;\n    }\n\n    get isFirstPinned(): boolean {\n        const pinnedCols = this.grid.pinnedColumns.filter(x => !x.columnGroup);\n        return !this.grid.isPinningToStart && pinnedCols[0] === this;\n    }\n\n    get rightPinnedOffset(): string {\n        return this.pinned && !this.grid.isPinningToStart ?\n            - this.grid.pinnedWidth - this.grid.headerFeaturesWidth + 'px' :\n            null;\n    }\n\n    get gridRowSpan(): number {\n        return this.rowEnd && this.rowStart ? this.rowEnd - this.rowStart : 1;\n    }\n    get gridColumnSpan(): number {\n        return this.colEnd && this.colStart ? this.colEnd - this.colStart : 1;\n    }\n\n    /**\n     * Row index where the current field should end.\n     * The amount of rows between rowStart and rowEnd will determine the amount of spanning rows to that field\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [rowEnd]=\"2\" [rowStart]=\"1\" [colStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public rowEnd: number;\n\n    /**\n     * Column index where the current field should end.\n     * The amount of columns between colStart and colEnd will determine the amount of spanning columns to that field\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [colEnd]=\"3\" [rowStart]=\"1\" [colStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    public colEnd: number;\n\n    /**\n     * Row index from which the field is starting.\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [rowStart]=\"1\" [colStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input() rowStart: number;\n\n    /**\n     * Column index from which the field is starting.\n     * ```html\n     * <igx-column-layout>\n     *   <igx-column [colStart]=\"1\" [rowStart]=\"1\"></igx-column>\n     * </igx-column-layout>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input() colStart: number;\n\n    /**\n     * Indicates whether the column will be visible when its parent is collapsed.\n     * ```html\n     * <igx-column-group>\n     *   <igx-column [visibleWhenCollapsed]=\"true\"></igx-column>\n     * </igx-column-group>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @notifyChanges(true)\n    @Input()\n    set visibleWhenCollapsed(value: boolean) {\n        this._visibleWhenCollapsed = value;\n        this.visibleWhenCollapsedChange.emit(this._visibleWhenCollapsed);\n        if (this.parent) { this.parent.setExpandCollapseState(); }\n    }\n\n    get visibleWhenCollapsed(): boolean {\n        return this._visibleWhenCollapsed;\n    }\n\n    private _columnPipeArgs: IColumnPipeArgs = { format: DEFAULT_DATE_FORMAT, digitsInfo: DEFAULT_DIGITS_INFO };\n    /**\n     * @remarks\n     * Pass optional parameters for DatePipe and/or DecimalPipe to format the display value for date and numeric columns.\n     * Accepts an `IColumnPipeArgs` object with any of the `format`, `timezone` and `digitsInfo` properties.\n     * For more details see https://angular.io/api/common/DatePipe and https://angular.io/api/common/DecimalPipe\n     * @example\n     * ```typescript\n     * const pipeArgs: IColumnPipeArgs = {\n     *      format: 'longDate',\n     *      timezone: 'UTC',\n     *      digitsInfo: '1.1-2'\n     * }\n     * ```\n     * ```html\n     * <igx-column dataType=\"date\" [pipeArgs]=\"pipeArgs\"></igx-column>\n     * <igx-column dataType=\"number\" [pipeArgs]=\"pipeArgs\"></igx-column>\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    @Input()\n    set pipeArgs(value: IColumnPipeArgs) {\n        this._columnPipeArgs = Object.assign(this._columnPipeArgs, value);\n        this.grid.summaryService.clearSummaryCache();\n        (this.grid as any)._pipeTrigger++;\n        this.grid.notifyChanges();\n    }\n    get pipeArgs(): IColumnPipeArgs {\n        return this._columnPipeArgs;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get collapsible() { return false; }\n    public set collapsible(_value: boolean) {}\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get expanded() { return true; }\n    public set expanded(_value: boolean) {}\n\n    /**\n     * hidden\n     */\n    public defaultWidth: string;\n\n    /**\n     * hidden\n     */\n    public widthSetByUser: boolean;\n\n    /**\n     * Returns the filteringExpressionsTree of the column.\n     * ```typescript\n     * let tree =  this.column.filteringExpressionsTree;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get filteringExpressionsTree(): FilteringExpressionsTree {\n        return this.grid.filteringExpressionsTree.find(this.field) as FilteringExpressionsTree;\n    }\n    /**\n     * Sets/gets the parent column.\n     * ```typescript\n     * let parentColumn = this.column.parent;\n     * ```\n     * ```typescript\n     * this.column.parent = higherLevelColumn;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    parent = null;\n    /**\n     * Sets/gets the children columns.\n     * ```typescript\n     * let columnChildren = this.column.children;\n     * ```\n     * ```typescript\n     * this.column.children = childrenColumns;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    children: QueryList<IgxColumnComponent>;\n\n\n    /**\n     * @hidden\n     */\n    public destroy$ = new Subject<any>();\n    /**\n     * @hidden\n     */\n    protected _unpinnedIndex;\n    /**\n     * @hidden\n     */\n    protected _pinned = false;\n    /**\n     * @hidden\n     */\n    protected _bodyTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected _headerTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected _inlineEditorTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected _filterCellTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected _summaries = null;\n    /**\n     * @hidden\n     */\n    protected _filters = null;\n    /**\n     * @hidden\n     */\n    protected _sortStrategy: ISortingStrategy = DefaultSortingStrategy.instance();\n    /**\n     * @hidden\n     */\n    protected _groupingComparer: (a: any, b: any) => number;\n    /**\n     * @hidden\n     */\n    protected _hidden = false;\n    /**\n     * @hidden\n     */\n    protected _index: number;\n    /**\n     * @hidden\n     */\n    protected _disablePinning = false;\n    /**\n     * @hidden\n     */\n    protected _width: string;\n    /**\n     * @hidden\n     */\n    protected _defaultMinWidth = '';\n    /**\n     * @hidden\n     */\n    protected _hasSummary = false;\n    /**\n     * @hidden\n     */\n    protected _editable: boolean;\n    /**\n     *  @hidden\n     */\n    protected _visibleWhenCollapsed;\n    /**\n     * @hidden\n     */\n    protected _collapsible = false;\n    /**\n     * @hidden\n     */\n    protected _expanded = true;\n    /**\n     * @hidden\n     */\n    protected _selectable = true;\n    /**\n     * @hidden\n     */\n    protected get isPrimaryColumn(): boolean {\n        return this.field !== undefined && this.grid !== undefined && this.field === this.grid.primaryKey;\n    }\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxCellTemplateDirective, { read: IgxCellTemplateDirective })\n    protected cellTemplate: IgxCellTemplateDirective;\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxCellHeaderTemplateDirective, { read: IgxCellHeaderTemplateDirective, descendants: false })\n    protected headTemplate: QueryList<IgxCellHeaderTemplateDirective>;\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxCellEditorTemplateDirective, { read: IgxCellEditorTemplateDirective })\n    protected editorTemplate: IgxCellEditorTemplateDirective;\n\n    protected _vIndex = NaN;\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxFilterCellTemplateDirective, { read: IgxFilterCellTemplateDirective })\n    public filterCellTemplateDirective: IgxFilterCellTemplateDirective;\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxCollapsibleIndicatorTemplateDirective, { read: IgxCollapsibleIndicatorTemplateDirective, static: false })\n    protected collapseIndicatorTemplate:  IgxCollapsibleIndicatorTemplateDirective;\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>, public cdr: ChangeDetectorRef) { }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetCaches() {\n        this._vIndex = NaN;\n        if (this.grid) {\n            this.cacheCalcWidth();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit(): void {\n        if (this.cellTemplate) {\n            this._bodyTemplate = this.cellTemplate.template;\n        }\n        if (this.headTemplate && this.headTemplate.length) {\n            this._headerTemplate = this.headTemplate.toArray()[0].template;\n        }\n        if (this.editorTemplate) {\n            this._inlineEditorTemplate = this.editorTemplate.template;\n        }\n        if (this.filterCellTemplateDirective) {\n            this._filterCellTemplate = this.filterCellTemplateDirective.template;\n        }\n        if (!this.summaries) {\n            switch (this.dataType) {\n                case DataType.String:\n                case DataType.Boolean:\n                    this.summaries = IgxSummaryOperand;\n                    break;\n                case DataType.Number:\n                    this.summaries = IgxNumberSummaryOperand;\n                    break;\n                case DataType.Date:\n                    this.summaries = IgxDateSummaryOperand;\n                    break;\n                default:\n                    this.summaries = IgxSummaryOperand;\n                    break;\n            }\n        }\n        if (!this.filters) {\n            switch (this.dataType) {\n                case DataType.Boolean:\n                    this.filters = IgxBooleanFilteringOperand.instance();\n                    break;\n                case DataType.Number:\n                    this.filters = IgxNumberFilteringOperand.instance();\n                    break;\n                case DataType.Date:\n                    this.filters = IgxDateFilteringOperand.instance();\n                    break;\n                case DataType.String:\n                default:\n                    this.filters = IgxStringFilteringOperand.instance();\n                    break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    getGridTemplate(isRow: boolean, isIE: boolean): string {\n        if (isRow) {\n            const rowsCount = this.grid.multiRowLayoutRowSize;\n            return isIE ?\n                `(1fr)[${rowsCount}]` :\n                `repeat(${rowsCount},1fr)`;\n        } else {\n            return this.getColumnSizesString(this.children);\n        }\n    }\n\n    public getInitialChildColumnSizes(children: QueryList<IgxColumnComponent>): Array<MRLColumnSizeInfo> {\n        const columnSizes: MRLColumnSizeInfo[] = [];\n        // find the smallest col spans\n        children.forEach(col => {\n            if (!col.colStart) {\n                return;\n            }\n            const newWidthSet = col.widthSetByUser && columnSizes[col.colStart - 1] && !columnSizes[col.colStart - 1].widthSetByUser;\n            const newSpanSmaller = columnSizes[col.colStart - 1] && columnSizes[col.colStart - 1].colSpan > col.gridColumnSpan;\n            const bothWidthsSet = col.widthSetByUser && columnSizes[col.colStart - 1] && columnSizes[col.colStart - 1].widthSetByUser;\n            const bothWidthsNotSet = !col.widthSetByUser && columnSizes[col.colStart - 1] && !columnSizes[col.colStart - 1].widthSetByUser;\n\n            if (columnSizes[col.colStart - 1] === undefined) {\n                // If nothing is defined yet take any column at first\n                // We use colEnd to know where the column actually ends, because not always it starts where we have it set in columnSizes.\n                columnSizes[col.colStart - 1] = {\n                    ref: col,\n                    width: col.widthSetByUser || this.grid.columnWidthSetByUser ? parseInt(col.calcWidth, 10) : null,\n                    colSpan: col.gridColumnSpan,\n                    colEnd: col.colStart + col.gridColumnSpan,\n                    widthSetByUser: col.widthSetByUser\n                };\n            } else if (newWidthSet || (newSpanSmaller && ((bothWidthsSet) || (bothWidthsNotSet)))) {\n                // If a column is set already it should either not have width defined or have width with bigger span than the new one.\n\n                /**\n                 *  If replaced column has bigger span, we want to fill the remaining columns\n                 *  that the replacing column does not fill with the old one.\n                 */\n                if (bothWidthsSet && newSpanSmaller) {\n                    // Start from where the new column set would end and apply the old column to the rest depending on how much it spans.\n                    // We have not yet replaced it so we can use it directly from the columnSizes collection.\n                    // This is where colEnd is used because the colStart of the old column is not actually i + 1.\n                    for (let i = col.colStart - 1 + col.gridColumnSpan; i < columnSizes[col.colStart - 1].colEnd - 1; i++) {\n                        if (!columnSizes[i] || !columnSizes[i].widthSetByUser) {\n                            columnSizes[i] = columnSizes[col.colStart - 1];\n                        } else {\n                            break;\n                        }\n                    }\n                }\n\n                // Replace the old column with the new one.\n                columnSizes[col.colStart - 1] = {\n                    ref: col,\n                    width: col.widthSetByUser || this.grid.columnWidthSetByUser ? parseInt(col.calcWidth, 10) : null,\n                    colSpan: col.gridColumnSpan,\n                    colEnd: col.colStart + col.gridColumnSpan,\n                    widthSetByUser: col.widthSetByUser\n                };\n            } else if (bothWidthsSet && columnSizes[col.colStart - 1].colSpan < col.gridColumnSpan) {\n                // If the column already in the columnSizes has smaller span, we still need to fill any empty places with the current col.\n                // Start from where the smaller column set would end and apply the bigger column to the rest depending on how much it spans.\n                // Since here we do not have it in columnSizes we set it as a new column keeping the same colSpan.\n                for (let i = col.colStart - 1 + columnSizes[col.colStart - 1].colSpan; i < col.colStart - 1 + col.gridColumnSpan; i++) {\n                    if (!columnSizes[i] || !columnSizes[i].widthSetByUser) {\n                        columnSizes[i] = {\n                            ref: col,\n                            width: col.widthSetByUser || this.grid.columnWidthSetByUser ? parseInt(col.calcWidth, 10) : null,\n                            colSpan: col.gridColumnSpan,\n                            colEnd: col.colStart + col.gridColumnSpan,\n                            widthSetByUser: col.widthSetByUser\n                        };\n                    } else {\n                        break;\n                    }\n                }\n            }\n        });\n\n        // Flatten columnSizes so there are not columns with colSpan > 1\n        for (let i = 0; i < columnSizes.length; i++) {\n            if (columnSizes[i] && columnSizes[i].colSpan > 1) {\n                let j = 1;\n\n                // Replace all empty places depending on how much the current column spans starting from next col.\n                for (; j < columnSizes[i].colSpan && i + j + 1 < columnSizes[i].colEnd; j++) {\n                    if (columnSizes[i + j] &&\n                        ((!columnSizes[i].width && columnSizes[i + j].width) ||\n                            (!columnSizes[i].width && !columnSizes[i + j].width && columnSizes[i + j].colSpan <= columnSizes[i].colSpan) ||\n                            (!!columnSizes[i + j].width && columnSizes[i + j].colSpan <= columnSizes[i].colSpan))) {\n                        // If we reach an already defined column that has width and the current doesn't have or\n                        // if the reached column has bigger colSpan we stop.\n                        break;\n                    } else {\n                        const width = columnSizes[i].widthSetByUser ?\n                            columnSizes[i].width / columnSizes[i].colSpan :\n                            columnSizes[i].width;\n                        columnSizes[i + j] = {\n                            ref: columnSizes[i].ref,\n                            width: width,\n                            colSpan: 1,\n                            colEnd: columnSizes[i].colEnd,\n                            widthSetByUser: columnSizes[i].widthSetByUser\n                        };\n                    }\n                }\n\n                // Update the current column width so it is divided between all columns it spans and set it to 1.\n                columnSizes[i].width = columnSizes[i].widthSetByUser ?\n                    columnSizes[i].width / columnSizes[i].colSpan :\n                    columnSizes[i].width;\n                columnSizes[i].colSpan = 1;\n\n                // Update the index based on how much we have replaced. Subtract 1 because we started from 1.\n                i += j - 1;\n            }\n        }\n\n        return columnSizes;\n    }\n\n    public getFilledChildColumnSizes(children: QueryList<IgxColumnComponent>): Array<string> {\n        const columnSizes = this.getInitialChildColumnSizes(children);\n\n        // fill the gaps if there are any\n        const result: string[] = [];\n        for (let i = 0; i < columnSizes.length; i++) {\n            if (columnSizes[i] && !!columnSizes[i].width) {\n                result.push(columnSizes[i].width + 'px');\n            } else {\n                result.push(parseInt(this.grid.getPossibleColumnWidth(), 10) + 'px');\n            }\n        }\n        return result;\n    }\n\n    protected getColumnSizesString(children: QueryList<IgxColumnComponent>): string {\n        const res = this.getFilledChildColumnSizes(children);\n        return res.join(' ');\n    }\n\n    public getResizableColUnderEnd(): MRLResizeColumnInfo[] {\n        if (this.columnLayout || !this.columnLayoutChild || this.columnGroup) {\n            return [{ target: this, spanUsed: 1 }];\n        }\n\n        const columnSized = this.getInitialChildColumnSizes(this.parent.children);\n        const targets: MRLResizeColumnInfo[] = [];\n        const colEnd = this.colEnd ? this.colEnd : this.colStart + 1;\n\n        for (let i = 0; i < columnSized.length; i++) {\n            if (this.colStart <= i + 1 && i + 1 < colEnd) {\n                targets.push({ target: columnSized[i].ref, spanUsed: 1 });\n            }\n        }\n\n        const targetsSquashed: MRLResizeColumnInfo[] = [];\n        for (let j = 0; j < targets.length; j++) {\n            if (targetsSquashed.length && targetsSquashed[targetsSquashed.length - 1].target.field === targets[j].target.field) {\n                targetsSquashed[targetsSquashed.length - 1].spanUsed++;\n            } else {\n                targetsSquashed.push(targets[j]);\n            }\n        }\n\n        return targetsSquashed;\n    }\n\n    /**\n     * Pins the column at the provided index in the pinned area. Defaults to index `0` if not provided.\n     * Returns `true` if the column is successfully pinned. Returns `false` if the column cannot be pinned.\n     * Column cannot be pinned if:\n     * - Is already pinned\n     * - index argument is out of range\n     * - The pinned area exceeds 80% of the grid width\n     * ```typescript\n     * let success = this.column.pin();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public pin(index?: number): boolean {\n        // TODO: Probably should the return type of the old functions\n        // should be moved as a event parameter.\n        if (this.grid) {\n            this.grid.endEdit(true);\n        }\n        if (this._pinned) {\n            return false;\n        }\n\n        if (this.parent && !this.parent.pinned) {\n            return this.topLevelParent.pin(index);\n        }\n\n        const grid = (this.grid as any);\n        const hasIndex = index !== undefined;\n        if (hasIndex && (index < 0 || index >= grid.pinnedColumns.length)) {\n            return false;\n        }\n\n        if (!this.parent && !this.pinnable) {\n            return false;\n        }\n\n        this._pinned = true;\n        this.pinnedChange.emit(this._pinned);\n        this._unpinnedIndex = grid._unpinnedColumns.indexOf(this);\n        const rootPinnedCols = grid._pinnedColumns.filter((c) => c.level === 0);\n        index = index !== undefined ? index : rootPinnedCols.length;\n        const targetColumn = grid._pinnedColumns[index];\n        const args = { column: this, insertAtIndex: index, isPinned: true };\n        grid.onColumnPinning.emit(args);\n\n        if (grid._pinnedColumns.indexOf(this) === -1) {\n            if (!grid.hasColumnGroups) {\n                grid._pinnedColumns.splice(args.insertAtIndex, 0, this);\n            } else {\n                // insert based only on root collection\n                rootPinnedCols.splice(args.insertAtIndex, 0, this);\n                let allPinned = [];\n                // re-create hierarchy\n                rootPinnedCols.forEach(group => {\n                    allPinned.push(group);\n                    allPinned = allPinned.concat(group.allChildren);\n                });\n                grid._pinnedColumns = allPinned;\n            }\n\n            if (grid._unpinnedColumns.indexOf(this) !== -1) {\n                const childrenCount = this.allChildren.length;\n                grid._unpinnedColumns.splice(grid._unpinnedColumns.indexOf(this), 1 + childrenCount);\n            }\n        }\n\n        if (hasIndex) {\n            grid._moveColumns(this, targetColumn);\n        }\n\n        if (this.columnGroup) {\n            this.allChildren.forEach(child => child.pin());\n            grid.reinitPinStates();\n        }\n\n        grid.resetCaches();\n        grid.notifyChanges();\n        if (this.columnLayoutChild) {\n            this.grid.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n        this.grid.filteringService.refreshExpressions();\n        return true;\n    }\n    /**\n     * Unpins the column and place it at the provided index in the unpinned area. Defaults to index `0` if not provided.\n     * Returns `true` if the column is successfully unpinned. Returns `false` if the column cannot be unpinned.\n     * Column cannot be unpinned if:\n     * - Is already unpinned\n     * - index argument is out of range\n     * ```typescript\n     * let success = this.column.unpin();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public unpin(index?: number): boolean {\n        if (this.grid) {\n            this.grid.endEdit(true);\n        }\n        if (!this._pinned) {\n            return false;\n        }\n\n        if (this.parent && this.parent.pinned) {\n            return this.topLevelParent.unpin(index);\n        }\n\n        const grid = (this.grid as any);\n        const hasIndex = index !== undefined;\n        if (hasIndex && (index < 0 || index >= grid._unpinnedColumns.length)) {\n            return false;\n        }\n\n        index = (index !== undefined ? index :\n            this._unpinnedIndex !== undefined ? this._unpinnedIndex : this.index);\n        this._pinned = false;\n        this.pinnedChange.emit(this._pinned);\n\n        const targetColumn = grid._unpinnedColumns[index];\n\n        if (!hasIndex) {\n            grid._unpinnedColumns.splice(index, 0, this);\n            if (grid._pinnedColumns.indexOf(this) !== -1) {\n                grid._pinnedColumns.splice(grid._pinnedColumns.indexOf(this), 1);\n            }\n        }\n\n\n        if (hasIndex) {\n            grid.moveColumn(this, targetColumn);\n        }\n\n        if (this.columnGroup) {\n            this.allChildren.forEach(child => child.unpin());\n        }\n\n        grid.reinitPinStates();\n        grid.resetCaches();\n\n        const insertAtIndex = grid._unpinnedColumns.indexOf(this);\n        const args = { column: this, insertAtIndex, isPinned: false };\n        grid.onColumnPinning.emit(args);\n\n        grid.notifyChanges();\n        if (this.columnLayoutChild) {\n            this.grid.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n        this.grid.filteringService.refreshExpressions();\n\n        return true;\n    }\n\n    /**\n     * Moves a column to the specified visible index.\n     * If passed index is invalid, or if column would receive a different visible index after moving, moving is not performed.\n     * If passed index would move the column to a different column group. moving is not performed.\n     * @example\n     * ```typescript\n     * column.move(index);\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public move(index: number) {\n        let target;\n        const grid = (this.grid as IgxGridBaseDirective);\n        let columns: Array<IgxColumnComponent | IgxColumnGroupComponent> = grid.columnList.filter(c => c.visibleIndex > -1);\n        // grid last visible index\n        const li = columns.map(c => c.visibleIndex).reduce(function(a, b) {\n            return Math.max(a, b);\n        });\n        const parent = this.parent;\n        const isPreceding = this.visibleIndex < index;\n\n        if (index === this.visibleIndex || index < 0 || index > li) {\n            return;\n        }\n\n        if (parent) {\n            columns = columns.filter(c => c.level >= this.level && c !== this && c.parent !== this &&\n                c.topLevelParent === this.topLevelParent);\n        }\n        // tslint:disable:max-line-length\n        // If isPreceding, find a target such that when the current column is placed after it, current colummn will receive a visibleIndex === index. This takes into account visible children of the columns.\n        // If !isPreceding, finds a column of the same level and visible index that equals the passed index agument (c.visibleIndex === index). No need to consider the children here.\n        // tslint:enable:max-line-length\n        if (isPreceding) {\n            columns = columns.filter(c => c.visibleIndex > this.visibleIndex);\n            target = columns.find(c => c.level === this.level && c.visibleIndex + c.calcChildren() - this.calcChildren() === index);\n        } else {\n            columns = columns.filter(c => c.visibleIndex < this.visibleIndex);\n            target = columns.find(c => c.level === this.level && c.visibleIndex === index);\n        }\n\n        if (!target || (target.pinned && this.disablePinning)) {\n            return;\n        }\n\n        const pos = isPreceding ? DropPosition.AfterDropTarget : DropPosition.BeforeDropTarget;\n        grid.moveColumn(this, target as IgxColumnComponent, pos);\n    }\n\n    /**\n     * No children for the column, so will returns 1 or 0, if the column is hidden.\n     * @hidden\n     */\n    public calcChildren(): number {\n        const children = this.hidden ? 0 : 1;\n        return children;\n    }\n\n    /**\n     * Returns a reference to the top level parent column.\n     * ```typescript\n     * let topLevelParent =  this.column.topLevelParent;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get topLevelParent() {\n        let parent = this.parent;\n        while (parent && parent.parent) {\n            parent = parent.parent;\n        }\n        return parent;\n    }\n\n    /**\n     * Returns a reference to the header of the column.\n     * ```typescript\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * let headerCell = column.headerCell;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get headerCell(): IgxGridHeaderComponent {\n        return this.grid.headerCellList.find((header) => header.column === this);\n    }\n\n    /**\n     * Returns a reference to the filter cell of the column.\n     * ```typescript\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * let filterell = column.filterell;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get filterCell(): IgxGridFilteringCellComponent {\n        return this.grid.filterCellList.find((filterCell) => filterCell.column === this);\n    }\n\n    /**\n     * Returns a reference to the header group of the column.\n     * @memberof IgxColumnComponent\n     */\n    get headerGroup(): IgxGridHeaderGroupComponent {\n        return this.grid.headerGroupsList.find((headerGroup) => headerGroup.column === this);\n    }\n\n    /**\n     * Autosize the column to the longest currently visible cell value, including the header cell.\n     * ```typescript\n     * @ViewChild('grid') grid: IgxGridComponent;\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * column.autosize();\n     * ```\n     * @memberof IgxColumnComponent\n     * @param byHeader Set if column should be autized based only on the header content\n     */\n    public autosize(byHeader = false) {\n        if (!this.columnGroup) {\n            const size = this.getAutoSize(byHeader);\n            this.width = size;\n            this.grid.reflow();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getAutoSize(byHeader = false) {\n        const size = !byHeader ? this.getLargestCellWidth() :\n            (Object.values(this.getHeaderCellWidths()).reduce((a, b) => a + b) + 'px');\n        const gridAvailableSize = this.grid.calcWidth;\n        let newWidth;\n        const isPercentageWidth = this.width && typeof this.width === 'string' && this.width.indexOf('%') !== -1;\n        if (isPercentageWidth) {\n            const percentageSize =  parseFloat(size) / gridAvailableSize * 100;\n            newWidth = percentageSize + '%';\n        } else {\n            newWidth = size;\n        }\n        return newWidth;\n    }\n\n    /**\n     * @hidden\n     */\n    public getCalcWidth(): any {\n        if (this._calcWidth && !isNaN(this.calcPixelWidth)) {\n            return this._calcWidth;\n        }\n        this.cacheCalcWidth();\n        return this._calcWidth;\n    }\n\n\n    /**\n     * @hidden\n     * Returns the width and padding of a header cell.\n     */\n    public getHeaderCellWidths() {\n        const range = this.grid.document.createRange();\n        let headerWidth;\n        if (this.headerTemplate && this.headerCell.elementRef.nativeElement.children[0].children.length > 0) {\n            headerWidth = Math.max(...Array.from(this.headerCell.elementRef.nativeElement.children[0].children)\n                .map((child) => getNodeSizeViaRange(range, child)));\n        } else {\n            headerWidth = getNodeSizeViaRange(range, this.headerCell.elementRef.nativeElement.children[0]);\n        }\n\n        if (this.sortable || this.filterable) {\n            headerWidth += this.headerCell.elementRef.nativeElement.children[1].getBoundingClientRect().width;\n        }\n\n        const headerStyle = this.grid.document.defaultView.getComputedStyle(this.headerCell.elementRef.nativeElement);\n        const headerPadding = parseFloat(headerStyle.paddingLeft) + parseFloat(headerStyle.paddingRight) +\n            parseFloat(headerStyle.borderRightWidth);\n\n        // Take into consideration the header group element, since column pinning applies borders to it if its not a columnGroup.\n        const headerGroupStyle = this.grid.document.defaultView.getComputedStyle(this.headerGroup.element.nativeElement);\n        const borderSize = !this.parent ? parseFloat(headerGroupStyle.borderRightWidth) + parseFloat(headerGroupStyle.borderLeftWidth) : 0;\n\n        return { width: Math.ceil(headerWidth), padding: Math.ceil(headerPadding + borderSize)};\n    }\n\n    /**\n     * @hidden\n     * Returns the size (in pixels) of the longest currently visible cell, including the header cell.\n     * ```typescript\n     * @ViewChild('grid') grid: IgxGridComponent;\n     *\n     * let column = this.grid.columnList.filter(c => c.field === 'ID')[0];\n     * let size = column.getLargestCellWidth();\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    public getLargestCellWidth(): string {\n        const range = this.grid.document.createRange();\n        const largest = new Map<number, number>();\n\n        if (this.cells.length > 0) {\n            let cellsContentWidths = [];\n            if (this.cells[0].nativeElement.children.length > 0) {\n                this.cells.forEach((cell) => cellsContentWidths.push(cell.calculateSizeToFit(range)));\n            } else {\n                cellsContentWidths = this.cells.map((cell) => getNodeSizeViaRange(range, cell.nativeElement));\n            }\n\n            const index = cellsContentWidths.indexOf(Math.max(...cellsContentWidths));\n            const cellStyle = this.grid.document.defaultView.getComputedStyle(this.cells[index].nativeElement);\n            const cellPadding = parseFloat(cellStyle.paddingLeft) + parseFloat(cellStyle.paddingRight) +\n                parseFloat(cellStyle.borderLeftWidth) + parseFloat(cellStyle.borderRightWidth);\n\n            largest.set(Math.max(...cellsContentWidths), cellPadding);\n        }\n\n        if (this.headerCell) {\n            const headerCellWidths = this.getHeaderCellWidths();\n            largest.set(headerCellWidths.width, headerCellWidths.padding);\n        }\n\n        const largestCell = Math.max(...Array.from(largest.keys()));\n        const width = Math.ceil(largestCell + largest.get(largestCell));\n\n        if (Number.isNaN(width)) {\n            return this.width;\n        } else {\n            return width + 'px';\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getCellWidth() {\n        const colWidth = this.width;\n        const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n\n        if (this.columnLayoutChild) {\n            return '';\n        }\n\n        if (colWidth && !isPercentageWidth) {\n\n            let cellWidth = colWidth;\n            if (typeof cellWidth !== 'string' || cellWidth.endsWith('px') === false) {\n                cellWidth += 'px';\n            }\n\n            return cellWidth;\n        } else {\n            return colWidth;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected cacheCalcWidth(): any {\n        const grid = this.gridAPI.grid;\n        const colWidth = this.width;\n        const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n        if (isPercentageWidth) {\n            this._calcWidth = parseFloat(colWidth) / 100 * grid.calcWidth;\n        } else if (!colWidth) {\n            // no width\n            this._calcWidth = this.defaultWidth || grid.getPossibleColumnWidth();\n        } else {\n            this._calcWidth = this.width;\n        }\n        this.calcPixelWidth = parseFloat(this._calcWidth);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected setExpandCollapseState() {\n        this.children.filter(col => (col.visibleWhenCollapsed !== undefined)).forEach(c =>  {\n            if (!this.collapsible) { c.hidden = this.hidden; return; }\n            c.hidden = this._expanded ? c.visibleWhenCollapsed : !c.visibleWhenCollapsed;\n        });\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    protected checkCollapsibleState() {\n        if (!this.children) { return false; }\n        const cols = this.children.map(child => child.visibleWhenCollapsed);\n        return (cols.some(c => c === true) && cols.some(c => c === false));\n    }\n\n\n    /**\n     * @hidden\n     */\n    public get pinnable() {\n        return (this.grid as any)._init || !this.pinned;\n    }\n\n    /**\n     * @hidden\n     */\n    public populateVisibleIndexes() { }\n\n    /**\n     * @hidden\n     */\n    public get applySelectableClass(): boolean {\n        return this._applySelectableClass;\n    }\n\n    /**\n     * @hidden\n     */\n    public set applySelectableClass(value: boolean) {\n        if (this.selectable) {\n            this._applySelectableClass = value;\n        }\n    }\n}\n","import {\n    AfterContentInit,\n    Component,\n    ContentChildren,\n    ChangeDetectionStrategy,\n    Input,\n    forwardRef,\n    QueryList,\n    TemplateRef,\n    Output,\n    EventEmitter\n} from '@angular/core';\n\nimport { IgxColumnComponent } from './column.component';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { flatten } from '../../core/utils';\n\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [{ provide: IgxColumnComponent, useExisting: forwardRef(() => IgxColumnGroupComponent) }],\n    selector: 'igx-column-group',\n    template: ``\n})\nexport class IgxColumnGroupComponent extends IgxColumnComponent implements AfterContentInit {\n\n    @ContentChildren(IgxColumnComponent, { read: IgxColumnComponent })\n    children = new QueryList<IgxColumnComponent>();\n\n    /**\n     * Set if the column group is collapsible.\n     * Default value is `false`\n     * ```html\n     *  <igx-column-group [collapsible] = \"true\"></igx-column-group>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public set collapsible(value: boolean) {\n        this._collapsible = value;\n        this.collapsibleChange.emit(this._collapsible);\n        if (this.children && !this.hidden) {\n            if (this._collapsible) {\n                this.setExpandCollapseState();\n            } else {\n                this.children.forEach(child => child.hidden = false);\n            }\n        }\n    }\n    public get collapsible() {\n        return this._collapsible && this.checkCollapsibleState();\n    }\n\n    /**\n     * Set whether the group is expanded or collapsed initially.\n     * Applied only if the collapsible property is set to `true`\n     * Default value is `true`\n     * ```html\n     *  const state = false\n     *  <igx-column-group [(expand)] = \"state\"></igx-column-group>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public set expanded(value: boolean) {\n        this._expanded = value;\n        this.expandedChange.emit(this._expanded);\n        if (!this.collapsible) { return; }\n        if (!this.hidden && this.children) {\n            this.setExpandCollapseState();\n        }\n    }\n    public get expanded() {\n        return this._expanded;\n    }\n\n    /**\n     * Gets the column group `summaries`.\n     * ```typescript\n     * let columnGroupSummaries = this.columnGroup.summaries;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public get summaries(): any {\n        return this._summaries;\n    }\n    /**\n     * Sets the column group `summaries`.\n     * ```typescript\n     * this.columnGroup.summaries = IgxNumberSummaryOperand;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    public set summaries(classRef: any) { }\n    /**\n     * Sets/gets whether the column group is `searchable`.\n     * Default value is `true`.\n     * ```typescript\n     * let isSearchable =  this.columnGroup.searchable;\n     * ```\n     * ```html\n     *  <igx-column-group [searchable] = \"false\"></igx-column-group>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public searchable = true;\n    /**\n     * Gets the column group `filters`.\n     * ```typescript\n     * let columnGroupFilters = this.columnGroup.filters;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public get filters(): any {\n        return this._filters;\n    }\n    /**\n     * Sets the column group `filters`.\n     * ```typescript\n     * this.columnGroup.filters = IgxStringFilteringOperand;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    public set filters(classRef: any) { }\n\n    /**\n     * Returns if the column group is selectable\n     * ```typescript\n     * let columnGroupSelectable = this.columnGroup.selectable;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    public get selectable(): boolean {\n        return this.children && this.children.some(child => child.selectable);\n    }\n\n    public set selectable(value: boolean) {}\n\n    /**\n     * Returns a reference to the body template.\n     * ```typescript\n     * let bodyTemplate = this.columnGroup.bodyTemplate;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get bodyTemplate(): TemplateRef<any> {\n        return this._bodyTemplate;\n    }\n    /**\n     * @hidden\n     */\n    set bodyTemplate(template: TemplateRef<any>) { }\n\n    /**\n     * Allows you to define a custom template for expand/collapse indicator\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    public collapsibleIndicatorTemplate: TemplateRef<any>;\n\n    /**\n     * Returns a reference to the inline editor template.\n     * ```typescript\n     * let inlineEditorTemplate = this.columnGroup.inlineEditorTemplate;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get inlineEditorTemplate(): TemplateRef<any> {\n        return this._inlineEditorTemplate;\n    }\n    /**\n     * @hidden\n     */\n    set inlineEditorTemplate(template: TemplateRef<any>) { }\n    /**\n     * Gets the column group cells.\n     * ```typescript\n     * let columnCells = this.columnGroup.cells;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get cells(): IgxGridCellComponent[] {\n        return [];\n    }\n    /**\n     * Gets whether the column group is hidden.\n     * ```typescript\n     * let isHidden = this.columnGroup.hidden;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    get hidden() {\n        return this.allChildren.every(c => c.hidden);\n    }\n    /**\n     * Sets the column group hidden property.\n     * ```html\n     * <igx-column [hidden] = \"true\"></igx-column>\n     * ```\n     *\n     * Two-way data binding\n     * ```html\n     * <igx-column [(hidden)] = \"model.columns[0].isHidden\"></igx-column>\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    set hidden(value: boolean) {\n        this._hidden = value;\n        this.hiddenChange.emit(this._hidden);\n        if (this._hidden || !this.collapsible) {\n            this.children.forEach(child => child.hidden = this._hidden);\n        } else {\n            this.children.forEach(c => {\n                if (c.visibleWhenCollapsed === undefined) { c.hidden = false; return; }\n                c.hidden = this.expanded ? c.visibleWhenCollapsed : !c.visibleWhenCollapsed;\n            });\n        }\n    }\n\n    /**\n     * Returns if the column group is selected.\n     * ```typescript\n     * let isSelected = this.columnGroup.selected;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get selected(): boolean {\n        const selectableChildren = this.allChildren.filter(c => !c.columnGroup && c.selectable && !c.hidden);\n        return selectableChildren.length > 0 && selectableChildren.every(c => c.selected);\n    }\n\n    /**\n     * Select/deselect the column group.\n     * ```typescript\n     * this.columnGroup.selected = true;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    set selected(value: boolean) {\n        if (this.selectable) {\n            this.children.forEach(c => {\n                c.selected = value;\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public hiddenChange = new EventEmitter<boolean>();\n\n    /**\n     * @hidden\n     */\n    ngAfterContentInit() {\n        /*\n            @ContentChildren with descendants still returns the `parent`\n            component in the query list.\n        */\n        if (this.headTemplate && this.headTemplate.length) {\n            this._headerTemplate = this.headTemplate.toArray()[0].template;\n        }\n        if (this.collapseIndicatorTemplate) {\n            this.collapsibleIndicatorTemplate = this.collapseIndicatorTemplate.template;\n        }\n        // currently only ivy fixes the issue, we have to slice only if the first child is group\n        if (this.children.first === this) {\n            this.children.reset(this.children.toArray().slice(1));\n        }\n        this.children.forEach(child => {\n            child.parent = this;\n        });\n        if (this.collapsible) {\n            this.setExpandCollapseState();\n        }\n    }\n\n    /**\n     * Returns the children columns collection.\n     * ```typescript\n     * let columns =  this.columnGroup.allChildren;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get allChildren(): IgxColumnComponent[] {\n        return flatten(this.children.toArray());\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnGroup`.\n     * ```typescript\n     * let isColumnGroup =  this.columnGroup.columnGroup\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get columnGroup() {\n        return true;\n    }\n    /**\n     * Returns a boolean indicating if the column is a `ColumnLayout` for multi-row layout.\n     * ```typescript\n     * let columnGroup =  this.column.columnGroup;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get columnLayout() {\n        return false;\n    }\n    /**\n     * Gets the width of the column group.\n     * ```typescript\n     * let columnGroupWidth = this.columnGroup.width;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get width() {\n        let width;\n        width = `${this.children.reduce((acc, val) => {\n            if (val.hidden) {\n                return acc;\n            }\n            return acc + parseInt(val.calcWidth, 10);\n        }, 0)}`;\n        return width + 'px';\n    }\n\n    set width(val) { }\n\n    /**\n     * @hidden\n     */\n    public get applySelectableClass(): boolean {\n        return this._applySelectableClass;\n    }\n\n    /**\n     * @hidden\n     */\n    public set applySelectableClass(value: boolean) {\n        if (this.selectable) {\n            this._applySelectableClass = value;\n            this.children.forEach(c => {\n                c.applySelectableClass = value;\n            });\n        }\n    }\n    // constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & IGridDataBindable>, public cdr: ChangeDetectorRef) {\n    //     // D.P. constructor duplication due to es6 compilation, might be obsolete in the future\n    //     super(gridAPI, cdr);\n    // }\n\n    /**\n     * @hidden\n     * Calculates the number of visible columns, based on indexes of first and last visible columns.\n     */\n    public calcChildren(): number {\n        const visibleChildren = this.allChildren.filter(c => c.visibleIndex > -1);\n        const fi = visibleChildren[0].visibleIndex;\n        const li = visibleChildren[visibleChildren.length - 1].visibleIndex;\n        return li - fi + 1;\n    }\n}\n","import { Component, HostBinding } from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxColumnGroupComponent } from '../../columns/column-group.component';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\n\n/**\n * A component used for presenting Excel style column moving UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-moving',\n    templateUrl: './excel-style-moving.component.html'\n})\nexport class IgxExcelStyleMovingComponent {\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class') class = 'igx-excel-filter__move';\n\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) { }\n\n    private get visibleColumns() {\n        return this.esf.grid.visibleColumns.filter(col => !(col instanceof IgxColumnGroupComponent));\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get canNotMoveLeft() {\n        return this.esf.column.visibleIndex === 0 ||\n            (this.esf.grid.unpinnedColumns.indexOf(this.esf.column) === 0 && this.esf.column.disablePinning) ||\n            (this.esf.column.level !== 0 && !this.findColumn(0, this.visibleColumns));\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get canNotMoveRight() {\n        return this.esf.column.visibleIndex === this.visibleColumns.length - 1 ||\n            (this.esf.column.level !== 0 && !this.findColumn(1, this.visibleColumns));\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onMoveButtonClicked(moveDirection) {\n        let targetColumn;\n        if (this.esf.column.pinned) {\n            if (this.esf.column.isLastPinned && moveDirection === 1 && this.esf.grid.isPinningToStart) {\n                targetColumn = this.esf.grid.unpinnedColumns[0];\n                moveDirection = 0;\n            } else if (this.esf.column.isFirstPinned && moveDirection === 0 && !this.esf.grid.isPinningToStart) {\n                targetColumn = this.esf.grid.unpinnedColumns[this.esf.grid.unpinnedColumns.length - 1];\n                moveDirection = 1;\n            } else {\n                targetColumn = this.findColumn(moveDirection, this.esf.grid.pinnedColumns);\n            }\n        } else if (this.esf.grid.unpinnedColumns.indexOf(this.esf.column) === 0 && moveDirection === 0 &&\n                    this.esf.grid.isPinningToStart) {\n            targetColumn = this.esf.grid.pinnedColumns[this.esf.grid.pinnedColumns.length - 1];\n            if (targetColumn.parent) {\n                targetColumn = targetColumn.topLevelParent;\n            }\n            moveDirection = 1;\n        } else if (this.esf.grid.unpinnedColumns.indexOf(this.esf.column) === this.esf.grid.unpinnedColumns.length - 1 &&\n            moveDirection === 1 && !this.esf.grid.isPinningToStart) {\n            targetColumn = this.esf.grid.pinnedColumns[0];\n            moveDirection = 0;\n        } else {\n            targetColumn = this.findColumn(moveDirection, this.esf.grid.unpinnedColumns);\n        }\n        this.esf.grid.moveColumn(this.esf.column, targetColumn, moveDirection);\n    }\n\n    private findColumn(moveDirection: number, columns: IgxColumnComponent[]) {\n        let index = columns.indexOf(this.esf.column);\n        if (moveDirection === 0) {\n            while (index > 0) {\n                index--;\n                if (columns[index].level === this.esf.column.level && columns[index].parent === this.esf.column.parent) {\n                    return columns[index];\n                }\n            }\n        } else {\n            while (index < columns.length - 1) {\n                index++;\n                if (columns[index].level === this.esf.column.level && columns[index].parent === this.esf.column.parent) {\n                    return columns[index];\n                }\n            }\n        }\n    }\n}\n","import { Component } from '@angular/core';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\n\n/**\n * A component used for presenting Excel style column pinning UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-pinning',\n    templateUrl: './excel-style-pinning.component.html'\n})\nexport class IgxExcelStylePinningComponent {\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) { }\n}\n","import { Directive, TemplateRef, EventEmitter, QueryList, Optional, Inject } from '@angular/core';\nimport { DisplayDensityBase, IDisplayDensityOptions, DisplayDensityToken } from '../core/density';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { IListResourceStrings } from '../core/i18n/list-resources';\n\nexport interface IListChild {\n    index: number;\n}\n\n/** @hidden */\n@Directive({\n    selector: '[igxListBase]'\n})\nexport class IgxListBaseDirective extends DisplayDensityBase {\n    onItemClicked: EventEmitter<any>;\n    allowLeftPanning: boolean;\n    allowRightPanning: boolean;\n    panEndTriggeringThreshold: number;\n    onLeftPan: EventEmitter<any>;\n    onRightPan: EventEmitter<any>;\n    onPanStateChange: EventEmitter<any>;\n    children: QueryList<any>;\n    listItemLeftPanningTemplate: IgxListItemLeftPanningTemplateDirective;\n    listItemRightPanningTemplate: IgxListItemRightPanningTemplateDirective;\n\n    constructor(@Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n}\n\nexport enum IgxListPanState { NONE, LEFT, RIGHT }\n\n@Directive({\n    selector: '[igxEmptyList]'\n})\nexport class IgxEmptyListTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxDataLoading]'\n})\nexport class IgxDataLoadingTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxListItemLeftPanning]'\n})\nexport class IgxListItemLeftPanningTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxListItemRightPanning]'\n})\nexport class IgxListItemRightPanningTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","import { Inject, Injectable, NgZone } from '@angular/core';\nimport { getDOM as getDOM } from '@angular/platform-browser';\nimport { DOCUMENT } from '@angular/common';\nimport { PlatformUtil } from './utils';\n\nconst EVENT_SUFFIX = 'precise';\n\n/**\n * Touch gestures manager based on Hammer.js\n * Use with caution, this will track references for single manager per element. Very TBD. Much TODO.\n * @hidden\n */\n@Injectable()\nexport class HammerGesturesManager {\n    private platformBrowser: boolean;\n    /**\n     * Event option defaults for each recognizer, see http://hammerjs.github.io/api/ for API listing.\n     */\n    protected hammerOptions: HammerOptions = {};\n\n    private _hammerManagers: Array<{ element: EventTarget, manager: HammerManager; }> = [];\n\n    constructor(private _zone: NgZone, @Inject(DOCUMENT) private doc: any, private platformUtil: PlatformUtil) {\n        this.platformBrowser = this.platformUtil.isBrowser;\n        if (this.platformBrowser) {\n            this.hammerOptions = {\n                // D.P. #447 Force TouchInput due to PointerEventInput bug (https://github.com/hammerjs/hammer.js/issues/1065)\n                // see https://github.com/IgniteUI/igniteui-angular/issues/447#issuecomment-324601803\n                inputClass: Hammer.TouchInput,\n                recognizers: [\n                    [Hammer.Pan, { threshold: 0 }],\n                    [Hammer.Swipe, {\n                        direction: Hammer.DIRECTION_HORIZONTAL\n                    }],\n                    [Hammer.Tap],\n                    [Hammer.Tap, { event: 'doubletap', taps: 2 }, ['tap']]\n                ]\n            };\n        }\n    }\n\n    public supports(eventName: string): boolean {\n        return eventName.toLowerCase().endsWith('.' + EVENT_SUFFIX);\n    }\n\n    /**\n     * Add listener extended with options for Hammer.js. Will use defaults if none are provided.\n     * Modeling after other event plugins for easy future modifications.\n     */\n    public addEventListener(\n        element: HTMLElement,\n        eventName: string,\n        eventHandler: (eventObj) => void,\n        options: HammerOptions = null): () => void {\n        if (!this.platformBrowser) {\n            return;\n        }\n\n        // Creating the manager bind events, must be done outside of angular\n        return this._zone.runOutsideAngular(() => {\n            let mc: HammerManager = this.getManagerForElement(element);\n            if (mc === null) {\n                // new Hammer is a shortcut for Manager with defaults\n                mc = new Hammer(element, Object.assign(this.hammerOptions, options));\n                this.addManagerForElement(element, mc);\n            }\n            const handler = (eventObj) => { this._zone.run(() => { eventHandler(eventObj); }); };\n            mc.on(eventName, handler);\n            return () => { mc.off(eventName, handler); };\n        });\n    }\n\n    /**\n     * Add listener extended with options for Hammer.js. Will use defaults if none are provided.\n     * Modeling after other event plugins for easy future modifications.\n     *\n     * @param target Can be one of either window, body or document(fallback default).\n     */\n    public addGlobalEventListener(target: string, eventName: string, eventHandler: (eventObj) => void): () => void {\n        if (!this.platformBrowser) {\n            return;\n        }\n\n        const element = this.getGlobalEventTarget(target);\n\n        // Creating the manager bind events, must be done outside of angular\n        return this.addEventListener(element as HTMLElement, eventName, eventHandler);\n    }\n\n    /**\n     * Exposes [Dom]Adapter.getGlobalEventTarget to get global event targets.\n     * Supported: window, document, body. Defaults to document for invalid args.\n     * @param target Target name\n     */\n    public getGlobalEventTarget(target: string): EventTarget {\n        return getDOM().getGlobalEventTarget(this.doc, target);\n    }\n\n    /**\n     * Set HammerManager options.\n     *\n     * @param element The DOM element used to create the manager on.\n     *\n     * ### Example\n     *\n     * ```ts\n     * manager.setManagerOption(myElem, \"pan\", { pointers: 1 });\n     * ```\n     */\n    public setManagerOption(element: EventTarget, event: string, options: any) {\n        const manager = this.getManagerForElement(element);\n        manager.get(event).set(options);\n    }\n\n    /**\n     * Add an element and manager map to the internal collection.\n     *\n     * @param element The DOM element used to create the manager on.\n     */\n    public addManagerForElement(element: EventTarget, manager: HammerManager) {\n        this._hammerManagers.push({element, manager});\n    }\n\n    /**\n     * Get HammerManager for the element or null\n     *\n     * @param element The DOM element used to create the manager on.\n     */\n    public getManagerForElement(element: EventTarget): HammerManager {\n        const result =  this._hammerManagers.filter((value, index, array) => {\n            return value.element === element;\n        });\n        return result.length ? result[0].manager : null;\n    }\n\n    /**\n     * Destroys the HammerManager for the element, removing event listeners in the process.\n     *\n     * @param element The DOM element used to create the manager on.\n     */\n    public removeManagerForElement(element: HTMLElement) {\n        let index: number = null;\n        for (let i = 0; i < this._hammerManagers.length; i++) {\n            if (element === this._hammerManagers[i].element) {\n                index = i;\n                break;\n            }\n        }\n        if (index !== null) {\n            const item = this._hammerManagers.splice(index, 1)[0];\n            // destroy also\n            item.manager.destroy();\n        }\n    }\n\n    /** Destroys all internally tracked HammerManagers, removing event listeners in the process. */\n    public destroy() {\n        for (const item of this._hammerManagers) {\n            item.manager.destroy();\n        }\n        this._hammerManagers = [];\n    }\n}\n","\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    Renderer2,\n    ViewChild\n} from '@angular/core';\n\nimport {\n    IgxListPanState,\n    IListChild,\n    IgxListBaseDirective\n} from './list.common';\n\nimport { HammerGesturesManager } from '../core/touch';\n\n/**\n * The Ignite UI List Item component is a container intended for row items in the Ignite UI for Angular List component.\n *\n * Example:\n * ```html\n * <igx-list>\n *   <igx-list-item isHeader=\"true\">Contacts</igx-list-item>\n *   <igx-list-item *ngFor=\"let contact of contacts\">\n *     <span class=\"name\">{{ contact.name }}</span>\n *     <span class=\"phone\">{{ contact.phone }}</span>\n *   </igx-list-item>\n * </igx-list>\n * ```\n */\n@Component({\n    providers: [HammerGesturesManager],\n    selector: 'igx-list-item',\n    templateUrl: 'list-item.component.html',\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class IgxListItemComponent implements IListChild {\n\n    /**\n     * @hidden\n     */\n    private _panState: IgxListPanState = IgxListPanState.NONE;\n\n    /**\n     * @hidden\n     */\n    private panOffset = 0;\n\n    /**\n     * @hidden\n     */\n    private _index: number = null;\n\n    /**\n     * @hidden\n     */\n    private lastPanDir = IgxListPanState.NONE;\n\n    /**\n     * Provides a reference to the template's base element shown when left panning a list item.\n     * ```typescript\n     * const leftPanTmpl = this.listItem.leftPanningTemplateElement;\n     * ```\n     */\n    @ViewChild('leftPanningTmpl')\n    public leftPanningTemplateElement;\n\n    /**\n     * Provides a reference to the template's base element shown when right panning a list item.\n     * ```typescript\n     * const rightPanTmpl = this.listItem.rightPanningTemplateElement;\n     * ```\n     */\n    @ViewChild('rightPanningTmpl')\n    public rightPanningTemplateElement;\n\n    constructor(\n        public list: IgxListBaseDirective,\n        private elementRef: ElementRef,\n        private _renderer: Renderer2) {\n    }\n\n    /**\n     * Sets/gets whether the `list item` is a header.\n     * ```html\n     * <igx-list-item [isHeader] = \"true\">Header</igx-list-item>\n     * ```\n     * ```typescript\n     * let isHeader =  this.listItem.isHeader;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @Input()\n    public isHeader: boolean;\n\n    /**\n     * Sets/gets whether the `list item` is hidden.\n     * By default the `hidden` value is `false`.\n     * ```html\n     * <igx-list-item [hidden] = \"true\">Hidden Item</igx-list-item>\n     * ```\n     * ```typescript\n     * let isHidden =  this.listItem.hidden;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @Input()\n    public hidden = false;\n\n    /**\n     * Gets the `role` attribute of the `list item`.\n     * ```typescript\n     * let itemRole =  this.listItem.role;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('attr.role')\n    public get role() {\n        return this.isHeader ? 'separator' : 'listitem';\n    }\n\n    /**\n     * Sets/gets the `aria-label` attribute of the `list item`.\n     * ```typescript\n     * this.listItem.ariaLabel = \"Item1\";\n     * ```\n     * ```typescript\n     * let itemAriaLabel = this.listItem.ariaLabel;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel: string;\n\n    /**\n     * Gets the `touch-action` style of the `list item`.\n     * ```typescript\n     * let touchAction = this.listItem.touchAction;\n     * ```\n     */\n    @HostBinding('style.touch-action')\n    public touchAction = 'pan-y';\n\n    /**\n     * Indicates whether `list item` should have header style.\n     * ```typescript\n     * let headerStyle =  this.listItem.headerStyle;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('class.igx-list__header')\n    get headerStyle(): boolean {\n        return this.isHeader;\n    }\n\n    /**\n     * Applies the inner style of the `list item` if the item is not counted as header.\n     * ```typescript\n     * let innerStyle =  this.listItem.innerStyle;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('class.igx-list__item-base')\n    get innerStyle(): boolean {\n        return !this.isHeader;\n    }\n\n    /**\n     * Returns string value which describes the display mode of the `list item`.\n     * ```typescript\n     * let isHidden = this.listItem.display;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @HostBinding('style.display')\n    get display(): string {\n        return this.hidden ? 'none' : '';\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click', ['$event'])\n    clicked(evt) {\n        this.list.onItemClicked.emit({ item: this, event: evt, direction: this.lastPanDir });\n        this.lastPanDir = IgxListPanState.NONE;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('panstart', ['$event'])\n    panStart(ev) {\n        if (this.isTrue(this.isHeader)) {\n            return;\n        }\n        if (!this.isTrue(this.list.allowLeftPanning) && !this.isTrue(this.list.allowRightPanning)) {\n            return;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('panmove', ['$event'])\n    panMove(ev) {\n        if (this.isTrue(this.isHeader)) {\n            return;\n        }\n        if (!this.isTrue(this.list.allowLeftPanning) && !this.isTrue(this.list.allowRightPanning)) {\n            return;\n        }\n        const isPanningToLeft = ev.deltaX < 0;\n        if (isPanningToLeft && this.isTrue(this.list.allowLeftPanning)) {\n            this.showLeftPanTemplate();\n            this.setContentElementLeft(Math.max(this.maxLeft, ev.deltaX));\n        } else if (!isPanningToLeft && this.isTrue(this.list.allowRightPanning)) {\n            this.showRightPanTemplate();\n            this.setContentElementLeft(Math.min(this.maxRight, ev.deltaX));\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('panend', ['$event'])\n    panEnd(ev) {\n        if (this.isTrue(this.isHeader)) {\n            return;\n        }\n        if (!this.isTrue(this.list.allowLeftPanning) && !this.isTrue(this.list.allowRightPanning)) {\n            return;\n        }\n\n        // the translation offset of the current list item content\n        const relativeOffset = this.panOffset;\n        const widthTriggeringGrip = this.width * this.list.panEndTriggeringThreshold;\n\n        if (relativeOffset === 0) {\n            return; // no panning has occured\n        }\n\n        const dir = relativeOffset > 0 ? IgxListPanState.RIGHT : IgxListPanState.LEFT;\n        this.lastPanDir = dir;\n\n        const oldPanState = this._panState;\n        if (Math.abs(relativeOffset) < widthTriggeringGrip) {\n            this.setContentElementLeft(0);\n            this._panState = IgxListPanState.NONE;\n            this.hideLeftAndRightPanTemplates();\n            return;\n        }\n\n        const args = { item: this, direction: dir, keepItem: false};\n\n        if (dir === IgxListPanState.LEFT) {\n            this.list.onLeftPan.emit(args);\n        } else {\n            this.list.onRightPan.emit(args);\n        }\n\n        if (args.keepItem === true) {\n            this.setContentElementLeft(0);\n            this._panState = IgxListPanState.NONE;\n        } else {\n            if (dir === IgxListPanState.LEFT) {\n                this.setContentElementLeft(this.maxLeft);\n                this._panState = IgxListPanState.LEFT;\n            } else {\n                this.setContentElementLeft(this.maxRight);\n                this._panState = IgxListPanState.RIGHT;\n            }\n        }\n\n        if (oldPanState !== this._panState) {\n            const args2 = { oldState: oldPanState, newState: this._panState, item: this };\n            this.list.onPanStateChange.emit(args2);\n        }\n        this.hideLeftAndRightPanTemplates();\n    }\n\n    /**\n     * @hidden\n     */\n    private showLeftPanTemplate() {\n        this.setLeftAndRightTemplatesVisibility('visible', 'hidden');\n    }\n\n    /**\n     * @hidden\n     */\n    private showRightPanTemplate() {\n        this.setLeftAndRightTemplatesVisibility('hidden', 'visible');\n    }\n\n    /**\n     * @hidden\n     */\n    private hideLeftAndRightPanTemplates() {\n        setTimeout(() => {\n            this.setLeftAndRightTemplatesVisibility('hidden', 'hidden');\n        }, 500);\n    }\n\n    /**\n     * @hidden\n     */\n    private setLeftAndRightTemplatesVisibility(leftVisibility, rightVisibility) {\n        if (this.leftPanningTemplateElement && this.leftPanningTemplateElement.nativeElement) {\n            this.leftPanningTemplateElement.nativeElement.style.visibility = leftVisibility;\n        }\n        if (this.rightPanningTemplateElement && this.rightPanningTemplateElement.nativeElement) {\n            this.rightPanningTemplateElement.nativeElement.style.visibility = rightVisibility;\n        }\n    }\n\n    /**\n     * Gets the `panState` of a `list item`.\n     * ```typescript\n     * let itemPanState =  this.listItem.panState;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get panState(): IgxListPanState {\n        return this._panState;\n    }\n\n    /**\n     * Gets the `index` of a `list item`.\n     * ```typescript\n     * let itemIndex =  this.listItem.index;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    @Input()\n    public get index(): number {\n        return this._index !== null ? this._index : this.list.children.toArray().indexOf(this);\n    }\n\n    /**\n     * Sets the `index` of the `list item`.\n     * ```typescript\n     * this.listItem.index = index;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public set index(value: number) {\n        this._index = value;\n    }\n\n    /**\n     * Returns an element reference to the list item.\n     * ```typescript\n     * let listItemElement =  this.listItem.element.\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Returns a reference container which contains the list item's content.\n     * ```typescript\n     * let listItemContainer =  this.listItem.contentElement.\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get contentElement() {\n        const candidates = this.element.getElementsByClassName('igx-list__item-content');\n        return (candidates && candidates.length > 0) ? candidates[0] : null;\n    }\n\n    /**\n     * Returns the `context` object which represents the `template context` binding into the `list item container`\n     * by providing the `$implicit` declaration which is the `IgxListItemComponent` itself.\n     * ```typescript\n     * let listItemComponent = this.listItem.context;\n     * ```\n     */\n    public get context(): any {\n        return {\n            $implicit: this\n        };\n    }\n\n    /**\n     * Gets the width of a `list item`.\n     * ```typescript\n     * let itemWidth = this.listItem.width;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get width() {\n        if (this.element) {\n            return this.element.offsetWidth;\n        }\n    }\n\n    /**\n     * Gets the maximum left position of the `list item`.\n     * ```typescript\n     * let maxLeft = this.listItem.maxLeft;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get maxLeft() {\n        return -this.width;\n    }\n\n    /**\n     * Gets the maximum right position of the `list item`.\n     * ```typescript\n     * let maxRight = this.listItem.maxRight;\n     * ```\n     * @memberof IgxListItemComponent\n     */\n    public get maxRight() {\n        return this.width;\n    }\n\n    /**\n     * @hidden\n     */\n    private setContentElementLeft(value: number) {\n        this.panOffset = value;\n        this.contentElement.style.transform = 'translateX(' + value + 'px)';\n    }\n\n    /**\n     * @hidden\n     */\n    private isTrue(value: boolean): boolean {\n        if (typeof (value) === 'boolean') {\n            return value;\n        } else {\n            return value === 'true';\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ContentChild,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    Optional,\n    Inject, Directive\n} from '@angular/core';\n\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\n\nimport { IgxListItemComponent } from './list-item.component';\nimport {\n    IgxListBaseDirective,\n    IgxDataLoadingTemplateDirective,\n    IgxEmptyListTemplateDirective,\n    IgxListPanState,\n    IgxListItemLeftPanningTemplateDirective,\n    IgxListItemRightPanningTemplateDirective\n} from './list.common';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensity } from '../core/density';\nimport { IBaseEventArgs } from '../core/utils';\nimport { IListResourceStrings } from '../core/i18n/list-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\n\nlet NEXT_ID = 0;\n\n/**\n * Interface for the panStateChange igxList event arguments\n */\nexport interface IPanStateChangeEventArgs extends IBaseEventArgs {\n    oldState: IgxListPanState;\n    newState: IgxListPanState;\n    item: IgxListItemComponent;\n}\n\n/**\n * Interface for the listItemClick igxList event arguments\n */\nexport interface IListItemClickEventArgs extends IBaseEventArgs {\n    item: IgxListItemComponent;\n    event: Event;\n    direction: IgxListPanState;\n}\n\n/**\n * Interface for the listItemPanning igxList event arguments\n */\nexport interface IListItemPanningEventArgs extends IBaseEventArgs {\n    item: IgxListItemComponent;\n    direction: IgxListPanState;\n    keepItem: boolean;\n}\n\n/**\n * igxListThumbnail is container for the List media\n * Use it to wrap anything you want to be used as a thumbnail.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListThumbnail]'\n})\nexport class IgxListThumbnailDirective {}\n\n/**\n * igxListAction is container for the List action\n * Use it to wrap anything you want to be used as a list action: icon, checkbox...\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListAction]'\n})\nexport class IgxListActionDirective {}\n\n/**\n * igxListLine is container for the List text content\n * Use it to wrap anything you want to be used as a plane text.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListLine]'\n})\nexport class IgxListLineDirective {}\n\n/**\n * igxListLineTitle is a directive that add class to the target element\n * Use it to make anything to look like list Title.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListLineTitle]'\n})\nexport class IgxListLineTitleDirective {\n    @HostBinding('class.igx-list__item-line-title')\n    public cssClass = 'igx-list__item-line-title';\n}\n\n/**\n * igxListLineSubTitle is a directive that add class to the target element\n * Use it to make anything to look like list Subtitle.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: '[igxListLineSubTitle]'\n})\nexport class IgxListLineSubTitleDirective {\n    @HostBinding('class.igx-list__item-line-subtitle')\n    public cssClass = 'igx-list__item-line-subtitle';\n}\n\n/**\n * Displays a collection of data items in a templatable list format\n *\n * @igxModule IgxListModule\n *\n * @igxTheme igx-list-theme\n *\n * @igxKeywords list, data\n *\n * @igxGroup Grids & Lists\n *\n * @remarks\n * The Ignite UI List displays rows of items and supports one or more header items as well as search and filtering\n * of list items. Each list item is completely templatable and will support any valid HTML or Angular component.\n *\n * @example\n * ```html\n * <igx-list>\n *   <igx-list-item isHeader=\"true\">Contacts</igx-list-item>\n *   <igx-list-item *ngFor=\"let contact of contacts\">\n *     <span class=\"name\">{{ contact.name }}</span>\n *     <span class=\"phone\">{{ contact.phone }}</span>\n *   </igx-list-item>\n * </igx-list>\n * ```\n */\n@Component({\n    selector: 'igx-list',\n    templateUrl: 'list.component.html',\n    providers: [{ provide: IgxListBaseDirective, useExisting: IgxListComponent }]\n})\nexport class IgxListComponent extends IgxListBaseDirective {\n    /**\n     * Sets the resource strings.\n     * By default it uses EN resources.\n     */\n   @Input()\n   set resourceStrings(value: IListResourceStrings) {\n       this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n   }\n\n    /**\n     * Returns the resource strings.\n     */\n    get resourceStrings(): IListResourceStrings {\n        return this._resourceStrings;\n    }\n\n    private _resourceStrings = CurrentResourceStrings.ListResStrings;\n\n    constructor(public element: ElementRef,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Returns a collection of all items and headers in the list.\n     *\n     * @example\n     * ```typescript\n     * let listChildren: QueryList = this.list.children;\n     * ```\n     */\n    @ContentChildren(forwardRef(() => IgxListItemComponent), { descendants: true })\n    public children: QueryList<IgxListItemComponent>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected get sortedChildren(): IgxListItemComponent[] {\n        if (this.children !== undefined) {\n            return this.children.toArray()\n                .sort((a: IgxListItemComponent, b: IgxListItemComponent) => {\n                    return a.index - b.index;\n                });\n        }\n        return null;\n    }\n\n    /**\n     * Sets/gets the empty list template.\n     *\n     * @remarks\n     * This template is used by IgxList in case there are no list items\n     * defined and `isLoading` is set to `false`.\n     *\n     * @example\n     * ```html\n     * <igx-list>\n     *   <ng-template igxEmptyList>\n     *     <p class=\"empty\">No contacts! :(</p>\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let emptyTemplate = this.list.emptyListTemplate;\n     * ```\n     */\n    @ContentChild(IgxEmptyListTemplateDirective, { read: IgxEmptyListTemplateDirective })\n    public emptyListTemplate: IgxEmptyListTemplateDirective;\n\n    /**\n     * Sets/gets the list loading template.\n     *\n     * @remarks\n     * This template is used by IgxList in case there are no list items defined and `isLoading` is set to `true`.\n     *\n     * @example\n     * ```html\n     * <igx-list>\n     *   <ng-template igxDataLoading>\n     *     <p>Patience, we are currently loading your data...</p>\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let loadingTemplate = this.list.dataLoadingTemplate;\n     * ```\n     */\n    @ContentChild(IgxDataLoadingTemplateDirective, { read: IgxDataLoadingTemplateDirective })\n    public dataLoadingTemplate: IgxDataLoadingTemplateDirective;\n\n    /**\n     * Sets/gets the template for left panning a list item.\n     *\n     * @remarks\n     * Default value is `null`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowLeftPanning]=\"true\">\n     *   <ng-template igxListItemLeftPanning>\n     *     <igx-icon>delete</igx-icon>Delete\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let itemLeftPanTmpl = this.list.listItemLeftPanningTemplate;\n     * ```\n     */\n    @ContentChild(IgxListItemLeftPanningTemplateDirective, { read: IgxListItemLeftPanningTemplateDirective })\n    public listItemLeftPanningTemplate: IgxListItemLeftPanningTemplateDirective;\n\n    /**\n     * Sets/gets the template for right panning a list item.\n     *\n     * @remarks\n     * Default value is `null`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowRightPanning] = \"true\">\n     *   <ng-template igxListItemRightPanning>\n     *     <igx-icon>call</igx-icon>Dial\n     *   </ng-template>\n     * </igx-list>\n     * ```\n     * ```typescript\n     * let itemRightPanTmpl = this.list.listItemRightPanningTemplate;\n     * ```\n     */\n    @ContentChild(IgxListItemRightPanningTemplateDirective, { read: IgxListItemRightPanningTemplateDirective })\n    public listItemRightPanningTemplate: IgxListItemRightPanningTemplateDirective;\n\n    /**\n     * Provides a threshold after which the item's panning will be completed automatically.\n     *\n     * @remarks\n     * By default this property is set to 0.5 which is 50% of the list item's width.\n     *\n     * @example\n     * ```html\n     * <igx-list [panEndTriggeringThreshold]=\"0.8\"></igx-list>\n     * ```\n     */\n    @Input()\n    public panEndTriggeringThreshold = 0.5;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultEmptyList', { read: TemplateRef, static: true })\n    protected defaultEmptyListTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('defaultDataLoading', { read: TemplateRef, static: true })\n    protected defaultDataLoadingTemplate: TemplateRef<any>;\n\n    /**\n     * Sets/gets the `id` of the list.\n     *\n     * @remarks\n     * If not set, the `id` of the first list component will be `\"igx-list-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-list id=\"my-first-list\"></igx-list>\n     * ```\n     * ```typescript\n     * let listId = this.list.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-list-${NEXT_ID++}`;\n\n    /**\n     * Sets/gets whether the left panning of an item is allowed.\n     *\n     * @remarks\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowLeftPanning]=\"true\"></igx-list>\n     * ```\n     * ```typescript\n     * let isLeftPanningAllowed = this.list.allowLeftPanning;\n     * ```\n     */\n    @Input()\n    public allowLeftPanning = false;\n\n    /**\n     * Sets/gets whether the right panning of an item is allowed.\n     *\n     * @remarks\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowRightPanning]=\"true\"></igx-list>\n     * ```\n     * ```typescript\n     * let isRightPanningAllowed = this.list.allowRightPanning;\n     * ```\n     */\n    @Input()\n    public allowRightPanning = false;\n\n    /**\n     * Sets/gets whether the list is currently loading data.\n     *\n     * @remarks\n     * Set it to display the dataLoadingTemplate while data is being retrieved.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     *  <igx-list [isLoading]=\"true\"></igx-list>\n     * ```\n     * ```typescript\n     * let isLoading = this.list.isLoading;\n     * ```\n     */\n    @Input()\n    public isLoading = false;\n\n    /**\n     * Event emitted when a left pan gesture is executed on a list item.\n     *\n     * @remarks\n     * Provides a reference to an object of type `IListItemPanningEventArgs` as an event argument.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowLeftPanning]=\"true\" (onLeftPan)=\"onLeftPan($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onLeftPan = new EventEmitter<IListItemPanningEventArgs>();\n\n    /**\n     * Event emitted when a right pan gesture is executed on a list item.\n     *\n     * @remarks\n     * Provides a reference to an object of type `IListItemPanningEventArgs` as an event argument.\n     *\n     * @example\n     * ```html\n     * <igx-list [allowRightPanning]=\"true\" (onRightPan)=\"onRightPan($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onRightPan = new EventEmitter<IListItemPanningEventArgs>();\n\n    /**\n     *\n     * Event emitted when a pan gesture is executed on a list item.\n     *\n     * @remarks\n     * Provides references to the `IgxListItemComponent` and `IgxListPanState` as event arguments.\n     *\n     * @example\n     * ```html\n     * <igx-list (onPanStateChange)=\"onPanStateChange($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onPanStateChange = new EventEmitter<IPanStateChangeEventArgs>();\n\n    /**\n     * Event emitted when a list item is clicked.\n     *\n     * @remarks\n     * Provides references to the `IgxListItemComponent` and `Event` as event arguments.\n     *\n     * @example\n     * ```html\n     * <igx-list (onItemClicked)=\"onItemClicked($event)\"></igx-list>\n     * ```\n     */\n    @Output()\n    public onItemClicked = new EventEmitter<IListItemClickEventArgs>();\n\n    /**\n     * Gets the `role` attribute value.\n     *\n     * @example\n     * ```typescript\n     * let listRole =  this.list.role;\n     * ```\n     */\n    @HostBinding('attr.role')\n    public get role() {\n        return 'list';\n    }\n\n    /**\n     * Gets a boolean indicating if the list is empty.\n     *\n     * @example\n     * ```typescript\n     * let isEmpty =  this.list.isListEmpty;\n     * ```\n     */\n    @HostBinding('class.igx-list-empty')\n    public get isListEmpty(): boolean {\n        return !this.children || this.children.length === 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-list')\n    public get cssClass(): boolean {\n        return !this.isListEmpty && this.displayDensity === DisplayDensity.comfortable;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-list--compact')\n    public get cssClassCompact(): boolean {\n        return !this.isListEmpty && this.displayDensity === DisplayDensity.compact;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-list--cosy')\n    public get cssClassCosy(): boolean {\n        return !this.isListEmpty && this.displayDensity === DisplayDensity.cosy;\n    }\n\n    /**\n     * Gets the list `items` excluding the header ones.\n     *\n     * @example\n     * ```typescript\n     * let listItems: IgxListItemComponent[] = this.list.items;\n     * ```\n     */\n    public get items(): IgxListItemComponent[] {\n        const items: IgxListItemComponent[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.sortedChildren) {\n                if (!child.isHeader) {\n                    items.push(child);\n                }\n            }\n        }\n        return items;\n    }\n\n    /**\n     * Gets the header list `items`.\n     *\n     * @example\n     * ```typescript\n     * let listHeaders: IgxListItemComponent[] =  this.list.headers;\n     * ```\n     */\n    public get headers(): IgxListItemComponent[] {\n        const headers: IgxListItemComponent[] = [];\n        if (this.children !== undefined) {\n            for (const child of this.children.toArray()) {\n                if (child.isHeader) {\n                    headers.push(child);\n                }\n            }\n        }\n        return headers;\n    }\n\n    /**\n     * Gets the `context` object of the template binding.\n     *\n     * @remark\n     * Gets the `context` object which represents the `template context` binding into the `list container`\n     * by providing the `$implicit` declaration which is the `IgxListComponent` itself.\n     *\n     * @example\n     * ```typescript\n     * let listComponent =  this.list.context;\n     * ```\n     */\n    public get context(): any {\n        return {\n            $implicit: this\n        };\n    }\n\n    /**\n     * Gets a `TemplateRef` to the currently used template.\n     *\n     * @example\n     * ```typescript\n     * let listTemplate = this.list.template;\n     * ```\n     */\n    public get template(): TemplateRef<any> {\n        if (this.isLoading) {\n            return this.dataLoadingTemplate ? this.dataLoadingTemplate.template : this.defaultDataLoadingTemplate;\n        } else {\n            return this.emptyListTemplate ? this.emptyListTemplate.template : this.defaultEmptyListTemplate;\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxListBaseDirective,\n        IgxListComponent,\n        IgxListItemComponent,\n        IgxListThumbnailDirective,\n        IgxListActionDirective,\n        IgxListLineDirective,\n        IgxListLineTitleDirective,\n        IgxListLineSubTitleDirective,\n        IgxDataLoadingTemplateDirective,\n        IgxEmptyListTemplateDirective,\n        IgxListItemLeftPanningTemplateDirective,\n        IgxListItemRightPanningTemplateDirective\n    ],\n    exports: [\n        IgxListComponent,\n        IgxListItemComponent,\n        IgxListThumbnailDirective,\n        IgxListActionDirective,\n        IgxListLineDirective,\n        IgxListLineTitleDirective,\n        IgxListLineSubTitleDirective,\n        IgxDataLoadingTemplateDirective,\n        IgxEmptyListTemplateDirective,\n        IgxListItemLeftPanningTemplateDirective,\n        IgxListItemRightPanningTemplateDirective\n    ],\n    imports: [\n        CommonModule,\n        IgxRippleModule\n    ]\n})\nexport class IgxListModule {\n}\n","import {\n    AfterViewInit,\n    Component,\n    ViewChild,\n    ChangeDetectorRef,\n    TemplateRef,\n    Directive,\n    OnDestroy,\n    HostBinding\n} from '@angular/core';\nimport { IgxInputDirective } from '../../../directives/input/input.directive';\nimport { DisplayDensity } from '../../../core/density';\nimport { IgxForOfDirective } from '../../../directives/for-of/for_of.directive';\nimport { IgxGridExcelStyleFilteringComponent, FilterListItem } from './grid.excel-style-filtering.component';\nimport { FilteringExpressionsTree } from '../../../data-operations/filtering-expressions-tree';\nimport { FilteringLogic } from '../../../data-operations/filtering-expression.interface';\nimport { DataType } from '../../../data-operations/data-util';\nimport {\n    IgxBooleanFilteringOperand, IgxNumberFilteringOperand, IgxDateFilteringOperand, IgxStringFilteringOperand\n} from '../../../data-operations/filtering-condition';\nimport { ExpressionUI } from '../grid-filtering.service';\nimport { Subject } from 'rxjs';\nimport { IgxListComponent } from '../../../list/public_api';\nimport { IChangeCheckboxEventArgs } from '../../../checkbox/checkbox.component';\nimport { takeUntil } from 'rxjs/operators';\nimport { KEYS } from '../../../core/utils';\n\n@Directive({\n    selector: '[igxExcelStyleLoading]'\n})\nexport class IgxExcelStyleLoadingValuesTemplateDirective {\n    constructor(public template: TemplateRef<any>) {}\n}\n\n/**\n * A component used for presenting Excel style search UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-search',\n    templateUrl: './excel-style-search.component.html'\n})\nexport class IgxExcelStyleSearchComponent implements AfterViewInit, OnDestroy {\n    private static readonly filterOptimizationThreshold = 2;\n    private _isLoading;\n    private _addToCurrentFilter: FilterListItem;\n    private destroy$ = new Subject<boolean>();\n\n    /**\n     * @hidden @internal\n     */\n    public get addToCurrentFilter(): FilterListItem {\n        if (!this._addToCurrentFilter) {\n            const addToCurrentFilterItem = {\n                isSelected: false,\n                isFiltered: false,\n                indeterminate: false,\n                isSpecial: true,\n                isBlanks: false,\n                value: this.esf.grid.resourceStrings.igx_grid_excel_add_to_filter,\n                label: this.esf.grid.resourceStrings.igx_grid_excel_add_to_filter\n            };\n\n            this._addToCurrentFilter = addToCurrentFilterItem;\n        }\n\n        return this._addToCurrentFilter;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isLoading() {\n        return this._isLoading;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set isLoading(value: boolean) {\n        this._isLoading = value;\n        if (!(this.cdr as any).destroyed) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public searchValue: any;\n\n    /**\n     * @hidden @internal\n     */\n    public displayedListData: FilterListItem[];\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class') class = 'igx-excel-filter__menu-main';\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('input', { read: IgxInputDirective, static: true })\n    public searchInput: IgxInputDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('list', { read: IgxListComponent, static: true })\n    public list: IgxListComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxForOfDirective, { static: true })\n    protected virtDir: IgxForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExcelStyleLoadingValuesTemplate', { read: TemplateRef })\n    protected defaultExcelStyleLoadingValuesTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    public get valuesLoadingTemplate() {\n        if (this.esf.grid?.excelStyleLoadingValuesTemplateDirective) {\n            return this.esf.grid.excelStyleLoadingValuesTemplateDirective.template;\n        } else {\n            return this.defaultExcelStyleLoadingValuesTemplate;\n        }\n    }\n\n    constructor(public cdr: ChangeDetectorRef, public esf: IgxGridExcelStyleFilteringComponent) {\n        esf.loadingStart.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.displayedListData = [];\n            this.isLoading = true;\n        });\n        esf.loadingEnd.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.isLoading = false;\n            this.refreshSize();\n        });\n        esf.initialized.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            requestAnimationFrame(() => {\n                this.searchInput.nativeElement.focus();\n            });\n        });\n        esf.columnChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.virtDir.resetScrollPosition();\n        });\n\n        esf.listDataLoaded.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.searchValue ?\n                this.clearInput() :\n                this.filterListData();\n\n            this.cdr.detectChanges();\n        });\n    }\n\n    public ngAfterViewInit() {\n        this.refreshSize();\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public refreshSize() {\n        requestAnimationFrame(() => {\n            this.virtDir?.recalcUpdateSizes();\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearInput() {\n        this.searchValue = null;\n        this.filterListData();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onCheckboxChange(eventArgs: IChangeCheckboxEventArgs) {\n        const selectedIndex = this.displayedListData.indexOf(eventArgs.checkbox.value);\n        const selectAllBtn = this.displayedListData[0];\n\n        if (selectedIndex === 0) {\n            this.displayedListData.forEach(element => {\n                if (element === this.addToCurrentFilter) { return; }\n                element.isSelected = eventArgs.checked;\n            });\n\n            selectAllBtn.indeterminate = false;\n        } else {\n            eventArgs.checkbox.value.isSelected = eventArgs.checked;\n            const indexToStartSlicing = this.displayedListData.indexOf(this.addToCurrentFilter) > -1 ? 2 : 1;\n\n            const slicedArray =\n                this.displayedListData.slice(indexToStartSlicing, this.displayedListData.length);\n\n            if (!slicedArray.find(el => el.isSelected === false)) {\n                selectAllBtn.indeterminate = false;\n                selectAllBtn.isSelected = true;\n            } else if (!slicedArray.find(el => el.isSelected === true)) {\n                selectAllBtn.indeterminate = false;\n                selectAllBtn.isSelected = false;\n            } else {\n                selectAllBtn.indeterminate = true;\n            }\n        }\n        eventArgs.checkbox.nativeCheckbox.nativeElement.blur();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get itemSize() {\n        let itemSize = '40px';\n        switch (this.esf.displayDensity) {\n            case DisplayDensity.cosy: itemSize = '32px'; break;\n            case DisplayDensity.compact: itemSize = '24px'; break;\n            default: break;\n        }\n        return itemSize;\n    }\n\n     /**\n      * @hidden @internal\n      */\n    public get type(): string {\n        switch (this.esf.column?.dataType) {\n            case DataType.Number:\n                return 'number';\n            default:\n                return 'text';\n        }\n    }\n\n\n    /**\n     * @hidden @internal\n     */\n    public get containerSize() {\n        if (this.list) {\n            return this.list.element.nativeElement.offsetHeight;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get applyButtonDisabled(): boolean {\n        return this.esf.listData[0] && !this.esf.listData[0].isSelected && !this.esf.listData[0].indeterminate ||\n            this.displayedListData && this.displayedListData.length === 0;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onInputKeyDown(event): void {\n        switch (event.key) {\n            case KEYS.ENTER:\n                event.preventDefault();\n                this.applyFilter();\n\n                return;\n            case KEYS.ESCAPE || KEYS.ESCAPE_IE:\n                if (this.searchValue) {\n                    event.stopPropagation();\n                    this.clearInput();\n                }\n\n                return;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public filterListData(): void {\n        if (!this.esf.listData || !this.esf.listData.length) {\n            this.displayedListData = [];\n\n            return;\n        }\n\n        const searchAllBtn = this.esf.listData[0];\n\n        if (!this.searchValue) {\n            const anyFiltered = this.esf.listData.some(i => i.isFiltered);\n            const anyUnfiltered = this.esf.listData.some(i => !i.isFiltered);\n\n            if (anyFiltered && anyUnfiltered) {\n                searchAllBtn.indeterminate = true;\n            }\n\n            this.esf.listData.forEach(i => i.isSelected = i.isFiltered);\n            this.displayedListData = this.esf.listData;\n            searchAllBtn.label = this.esf.grid.resourceStrings.igx_grid_excel_select_all;\n\n            return;\n        }\n\n        const searchVal = this.searchValue.toLowerCase();\n\n        this.displayedListData = this.esf.listData.filter((it, i) => (i === 0 && it.isSpecial) ||\n            (it.label !== null && it.label !== undefined) &&\n            !it.isBlanks &&\n            it.label.toString().toLowerCase().indexOf(searchVal) > -1);\n\n       this.esf.listData.forEach(i => i.isSelected = false);\n       this.displayedListData.forEach(i => i.isSelected = true);\n\n        this.displayedListData.splice(1, 0, this.addToCurrentFilter);\n\n        searchAllBtn.indeterminate = false;\n        searchAllBtn.label = this.esf.grid.resourceStrings.igx_grid_excel_select_all_search_results;\n\n        if (this.displayedListData.length === 2) {\n            this.displayedListData = [];\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public applyFilter() {\n        const filterTree = new FilteringExpressionsTree(FilteringLogic.Or, this.esf.column.field);\n\n        const item = this.displayedListData[1];\n        const addToCurrentFilterOptionVisible = item === this.addToCurrentFilter;\n\n        const selectedItems = addToCurrentFilterOptionVisible && item.isSelected ?\n            this.esf.listData.slice(1, this.esf.listData.length).filter(el => el.isSelected || el.isFiltered) :\n            this.esf.listData.slice(1, this.esf.listData.length).filter(el => el.isSelected);\n\n        const unselectedItem = this.esf.listData.slice(1, this.esf.listData.length).find(el => el.isSelected === false);\n\n        if (unselectedItem) {\n            if (selectedItems.length <= IgxExcelStyleSearchComponent.filterOptimizationThreshold) {\n                selectedItems.forEach(element => {\n                    let condition = null;\n                    if (element.value !== null && element.value !== undefined) {\n                        if (this.esf.column.dataType === DataType.Boolean) {\n                            condition = this.createCondition(element.value.toString());\n                        } else {\n                            condition = this.createCondition('equals');\n                        }\n                    } else {\n                        condition = this.createCondition('empty');\n                    }\n                    filterTree.filteringOperands.push({\n                        condition: condition,\n                        fieldName: this.esf.column.field,\n                        ignoreCase: this.esf.column.filteringIgnoreCase,\n                        searchVal: element.value\n                    });\n                });\n            } else {\n                const blanksItemIndex = selectedItems.findIndex(e => e.value === null || e.value === undefined);\n                let blanksItem: any;\n                if (blanksItemIndex >= 0) {\n                    blanksItem = selectedItems[blanksItemIndex];\n                    selectedItems.splice(blanksItemIndex, 1);\n                }\n\n                filterTree.filteringOperands.push({\n                    condition: this.createCondition('in'),\n                    fieldName: this.esf.column.field,\n                    ignoreCase: this.esf.column.filteringIgnoreCase,\n                    searchVal: new Set(this.esf.column.dataType === DataType.Date ?\n                        selectedItems.map(d => d.value.toISOString()) :\n                        selectedItems.map(e => e.value))\n                });\n\n                if (blanksItem) {\n                    filterTree.filteringOperands.push({\n                        condition: this.createCondition('empty'),\n                        fieldName: this.esf.column.field,\n                        ignoreCase: this.esf.column.filteringIgnoreCase,\n                        searchVal: blanksItem.value\n                    });\n                }\n            }\n\n            this.esf.grid.filteringService.filterInternal(this.esf.column.field, filterTree);\n            this.esf.expressionsList = new Array<ExpressionUI>();\n            this.esf.grid.filteringService.generateExpressionsList(this.esf.column.filteringExpressionsTree,\n                this.esf.grid.filteringLogic, this.esf.expressionsList);\n        } else {\n            this.esf.grid.filteringService.clearFilter(this.esf.column.field);\n        }\n\n        this.esf.closeDropdown();\n    }\n\n    private createCondition(conditionName: string) {\n        switch (this.esf.column.dataType) {\n            case DataType.Boolean:\n                return IgxBooleanFilteringOperand.instance().condition(conditionName);\n            case DataType.Number:\n                return IgxNumberFilteringOperand.instance().condition(conditionName);\n            case DataType.Date:\n                return IgxDateFilteringOperand.instance().condition(conditionName);\n            default:\n                return IgxStringFilteringOperand.instance().condition(conditionName);\n        }\n    }\n}\n","import { Component } from '@angular/core';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\n\n/**\n * A component used for presenting Excel style conditional filter UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-selecting',\n    templateUrl: './excel-style-selecting.component.html'\n})\nexport class IgxExcelStyleSelectingComponent {\n    constructor(public esf: IgxGridExcelStyleFilteringComponent) { }\n}\n","import {\n    Component,\n    ViewChild,\n    OnDestroy,\n    HostBinding,\n    ChangeDetectorRef\n} from '@angular/core';\nimport { IgxButtonGroupComponent } from '../../../buttonGroup/buttonGroup.component';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { IgxGridExcelStyleFilteringComponent } from './grid.excel-style-filtering.component';\n\n/**\n * A component used for presenting Excel style column sorting UI.\n */\n@Component({\n    preserveWhitespaces: false,\n    selector: 'igx-excel-style-sorting',\n    templateUrl: './excel-style-sorting.component.html'\n})\nexport class IgxExcelStyleSortingComponent implements OnDestroy {\n    private destroy$ = new Subject<boolean>();\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('class') class = 'igx-excel-filter__sort';\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('sortButtonGroup', { read: IgxButtonGroupComponent })\n    public sortButtonGroup: IgxButtonGroupComponent;\n\n    constructor(public esf: IgxGridExcelStyleFilteringComponent, private cdr: ChangeDetectorRef) {\n        this.esf.sortingChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.updateSelectedButtons(this.esf.column.field);\n        });\n     }\n\n    ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    private updateSelectedButtons(fieldName: string) {\n        const sortIndex = this.esf.grid.sortingExpressions.findIndex(s => s.fieldName === fieldName);\n\n        this.cdr.detectChanges();\n        this.sortButtonGroup.buttons.forEach((b, i) => {\n            this.sortButtonGroup.deselectButton(i);\n        });\n\n        if (sortIndex !== -1 ) {\n            const sortDirection = this.esf.grid.sortingExpressions[sortIndex].dir;\n            this.sortButtonGroup.selectButton(sortDirection - 1);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onSortButtonClicked(sortDirection) {\n        if (this.sortButtonGroup.selectedIndexes.length === 0) {\n            if (this.esf.grid.isColumnGrouped(this.esf.column.field)) {\n                this.sortButtonGroup.selectButton(sortDirection - 1);\n            } else {\n                this.esf.grid.clearSort(this.esf.column.field);\n            }\n        } else {\n            this.esf.grid.sort({ fieldName: this.esf.column.field, dir: sortDirection, ignoreCase: true });\n        }\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    TemplateRef,\n    ViewChild,\n    NgZone,\n    OnInit,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { IgxTextHighlightDirective } from '../directives/text-highlight/text-highlight.directive';\nimport { GridBaseAPIService } from './api.service';\nimport { getNodeSizeViaRange, isIE, isLeftClick, PlatformUtil } from '../core/utils';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxGridSelectionService, ISelectionNode, IgxGridCRUDService } from './selection/selection.service';\nimport { DeprecateMethod } from '../core/deprecateDecorators';\nimport { HammerGesturesManager } from '../core/touch';\nimport { ColumnType } from './common/column.interface';\nimport { RowType } from './common/row.interface';\nimport { GridSelectionMode } from './common/enums';\nimport { GridType } from './common/grid.interface';\nimport { ISearchInfo } from './grid/public_api';\n\n/**\n * Providing reference to `IgxGridCellComponent`:\n * ```typescript\n * @ViewChild('grid', { read: IgxGridComponent })\n *  public grid: IgxGridComponent;\n * ```\n * ```typescript\n *  let column = this.grid.columnList.first;\n * ```\n * ```typescript\n *  let cell = column.cells[0];\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-grid-cell',\n    templateUrl: './cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxGridCellComponent implements OnInit, OnChanges, OnDestroy {\n    private _vIndex = -1;\n    protected _lastSearchInfo: ISearchInfo;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid__td--new')\n    get isEmptyAddRowCell() {\n        return this.row.addRow && (this.value === undefined || this.value === null);\n    }\n\n    /**\n     * Gets the column of the cell.\n     * ```typescript\n     *  let cellColumn = this.cell.column;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public column: ColumnType;\n\n    /**\n     * Gets the row of the cell.\n     * ```typescript\n     * let cellRow = this.cell.row;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public row: RowType;\n\n    /**\n     * Gets the data of the row of the cell.\n     * ```typescript\n     * let rowData = this.cell.rowData;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public rowData: any;\n\n    /**\n     * Sets/gets the template of the cell.\n     * ```html\n     * <ng-template #cellTemplate igxCell let-value>\n     *   <div style=\"font-style: oblique; color:blueviolet; background:red\">\n     *       <span>{{value}}</span>\n     *   </div>\n     * </ng-template>\n     * ```\n     * ```typescript\n     * @ViewChild('cellTemplate',{read: TemplateRef})\n     * cellTemplate: TemplateRef<any>;\n     * ```\n     * ```typescript\n     * this.cell.cellTemplate = this.cellTemplate;\n     * ```\n     * ```typescript\n     * let template =  this.cell.cellTemplate;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public cellTemplate: TemplateRef<any>;\n\n    @Input()\n    public pinnedIndicator: TemplateRef<any>;\n\n    /**\n     * Sets/gets the cell value.\n     * ```typescript\n     * this.cell.value = \"Cell Value\";\n     * ```\n     * ```typescript\n     * let cellValue = this.cell.value;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    public value: any;\n\n    /**\n     * Sets/gets the highlight class of the cell.\n     * Default value is `\"igx-highlight\"`.\n     * ```typescript\n     * let highlightClass = this.cell.highlightClass;\n     * ```\n     * ```typescript\n     * this.cell.highlightClass = 'igx-cell-highlight';\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public highlightClass = 'igx-highlight';\n\n    /**\n     * Sets/gets the active highlight class class of the cell.\n     * Default value is `\"igx-highlight__active\"`.\n     * ```typescript\n     * let activeHighlightClass = this.cell.activeHighlightClass;\n     * ```\n     * ```typescript\n     * this.cell.activeHighlightClass = 'igx-cell-highlight_active';\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public activeHighlightClass = 'igx-highlight__active';\n\n    /**\n     * Gets the cell formatter.\n     * ```typescript\n     * let cellForamatter = this.cell.formatter;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    formatter: (value: any) => any;\n\n    /**\n     * Gets the cell template context object.\n     * ```typescript\n     *  let context = this.cell.context();\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get context(): any {\n        return {\n            $implicit: this.value,\n            cell: this\n        };\n    }\n\n    /**\n     * Gets the cell template.\n     * ```typescript\n     * let template = this.cell.template;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get template(): TemplateRef<any> {\n        if (this.editMode) {\n            const inlineEditorTemplate = this.column.inlineEditorTemplate;\n            return inlineEditorTemplate ? inlineEditorTemplate : this.inlineEditorTemplate;\n        }\n        if (this.cellTemplate) {\n            return this.cellTemplate;\n        }\n        if (this.grid.rowEditable && this.row.addRow) {\n            return this.addRowCellTemplate;\n        }\n        return this.defaultCellTemplate;\n    }\n\n    /**\n     * Gets the cell template.\n     * ```typescript\n     * let template = this.cell.template;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get pinnedIndicatorTemplate() {\n        if (this.pinnedIndicator) {\n            return this.pinnedIndicator;\n        }\n        return this.defaultPinnedIndicator;\n    }\n\n    /**\n     * Gets the `id` of the grid in which the cell is stored.\n     * ```typescript\n     * let gridId = this.cell.gridID;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get gridID(): any {\n        return this.row.gridID;\n    }\n\n    /**\n     * Gets the grid of the cell.\n     * ```typescript\n     * let grid = this.cell.grid;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Gets the `index` of the row where the cell is stored.\n     * ```typescript\n     * let rowIndex = this.cell.rowIndex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.data-rowIndex')\n    get rowIndex(): number {\n        return this.row.index;\n    }\n\n    /**\n     * Gets the `index` of the cell column.\n     * ```typescript\n     * let columnIndex = this.cell.columnIndex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get columnIndex(): number {\n        return this.column.index;\n    }\n\n    /**\n     * Gets the visible `index` of the in which the cell is stored.\n     * ```typescript\n     * let visibleColumnIndex = this.cell.visibleColumnIndex;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.data-visibleIndex')\n    @Input()\n    get visibleColumnIndex() {\n        return this.column.columnLayoutChild ? this.column.visibleIndex : this._vIndex;\n    }\n\n    set visibleColumnIndex(val) {\n        this._vIndex = val;\n    }\n\n    /**\n     * Gets the ID of the cell.\n     * ```typescript\n     * let cellID = this.cell.cellID;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public get cellID() {\n        const primaryKey = this.grid.primaryKey;\n        const rowID = primaryKey ? this.rowData[primaryKey] : this.rowData;\n        return { rowID, columnID: this.columnIndex, rowIndex: this.rowIndex };\n    }\n\n    @HostBinding('attr.id')\n    public get attrCellID() {\n        return `${this.row.gridID}_${this.rowIndex}_${ this.visibleColumnIndex}`;\n    }\n\n    @HostBinding('attr.title')\n    public get title() {\n        return this.editMode || this.cellTemplate ? '' : this.value;\n    }\n\n    @HostBinding('class.igx-grid__td--bool-true')\n    public get booleanClass() {\n        return this.column.dataType === 'boolean' && this.value;\n    }\n\n    /**\n     * Returns a reference to the nativeElement of the cell.\n     * ```typescript\n     * let cellNativeElement = this.cell.nativeElement;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    get nativeElement(): HTMLElement {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    get cellSelectionMode() {\n        return this._cellSelection;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    set lastSearchInfo(value: ISearchInfo) {\n        this._lastSearchInfo = value;\n        this.highlightText(this._lastSearchInfo.searchText, this._lastSearchInfo.caseSensitive, this._lastSearchInfo.exactMatch);\n    }\n\n    set cellSelectionMode(value) {\n        if (this._cellSelection === value) { return; }\n         this.zone.runOutsideAngular(() => {\n            value === GridSelectionMode.multiple ?\n            this.addPointerListeners(value) : this.removePointerListeners(this._cellSelection);\n        });\n        this._cellSelection = value;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--pinned-last')\n    lastPinned = false;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--pinned-first')\n    firstPinned = false;\n\n    /**\n     * Returns whether the cell is in edit mode.\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--editing')\n    editMode = false;\n\n    /**\n     * Sets/get the `role` property of the cell.\n     * Default value is `\"gridcell\"`.\n     * ```typescript\n     * this.cell.role = 'grid-cell';\n     * ```\n     * ```typescript\n     * let cellRole = this.cell.role;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.role')\n    public role = 'gridcell';\n\n    /**\n     * Gets whether the cell is editable.\n     * ```typescript\n     * let isCellReadonly = this.cell.readonly;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('attr.aria-readonly')\n    get readonly(): boolean {\n        return !this.editable;\n    }\n\n    get gridRowSpan(): number {\n        return this.column.gridRowSpan;\n    }\n\n    get gridColumnSpan(): number {\n        return this.column.gridColumnSpan;\n    }\n\n\n    get rowEnd(): number {\n        return this.column.rowEnd;\n    }\n\n    get colEnd(): number {\n        return this.column.colEnd;\n    }\n\n    get rowStart(): number {\n        return this.column.rowStart;\n    }\n\n    get colStart(): number {\n        return this.column.colStart;\n    }\n\n    /**\n     * Gets the width of the cell.\n     * ```typescript\n     * let cellWidth = this.cell.width;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @Input()\n    width = '';\n\n    /**\n     * @hidden\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--active')\n    public active = false;\n\n    @HostBinding('attr.aria-selected')\n    get ariaSelected() {\n        return this.selected || this.column.selected  || this.row.selected;\n    }\n\n    /**\n     * Gets whether the cell is selected.\n     * ```typescript\n     * let isSelected = this.cell.selected;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('class.igx-grid__td--selected')\n    get selected() {\n        return this.selectionService.selected(this.selectionNode);\n    }\n\n    /**\n     * Selects/deselects the cell.\n     * ```typescript\n     * this.cell.selected = true.\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    set selected(val: boolean) {\n        const node = this.selectionNode;\n        val ? this.selectionService.add(node) : this.selectionService.remove(node);\n        this.grid.notifyChanges();\n    }\n\n    /**\n     * Gets whether the cell column is selected.\n     * ```typescript\n     * let isCellColumnSelected = this.cell.columnSelected;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @HostBinding('class.igx-grid__td--column-selected')\n    get columnSelected() {\n        return this.selectionService.isColumnSelected(this.column.field);\n    }\n\n    /**\n     * Sets the current edit value while a cell is in edit mode.\n     * Only for cell editing mode.\n     * ```typescript\n     * this.cell.editValue = value;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public set editValue(value) {\n        if (this.crudService.cellInEditMode) {\n            this.crudService.cell.editValue = value;\n        }\n    }\n\n    /**\n     * Gets the current edit value while a cell is in edit mode.\n     * Only for cell editing mode.\n     * ```typescript\n     * let editValue = this.cell.editValue;\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public get editValue() {\n        if (this.crudService.cellInEditMode) {\n            return this.crudService.cell.editValue;\n        }\n    }\n\n    /**\n     * Returns whether the cell is editable.\n     */\n    get editable(): boolean {\n        return this.column.editable && !this.row.disabled;\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    @HostBinding('class.igx-grid__td--row-pinned-first')\n    public displayPinnedChip = false;\n\n\n    @ViewChild('defaultCell', { read: TemplateRef, static: true })\n    protected defaultCellTemplate: TemplateRef<any>;\n\n    @ViewChild('defaultPinnedIndicator', { read: TemplateRef, static: true })\n    protected defaultPinnedIndicator: TemplateRef<any>;\n\n    @ViewChild('inlineEditor', { read: TemplateRef, static: true })\n    protected inlineEditorTemplate: TemplateRef<any>;\n\n    @ViewChild('addRowCell', { read: TemplateRef, static: true})\n    protected addRowCellTemplate: TemplateRef<any>;\n\n    @ViewChild(IgxTextHighlightDirective, { read: IgxTextHighlightDirective })\n    protected set highlight(value: IgxTextHighlightDirective) {\n        this._highlight = value;\n\n        if (this._highlight && this.grid.lastSearchInfo.searchText) {\n            this._highlight.highlight(this.grid.lastSearchInfo.searchText,\n                this.grid.lastSearchInfo.caseSensitive,\n                this.grid.lastSearchInfo.exactMatch);\n            this._highlight.activateIfNecessary();\n        }\n    }\n\n    protected get highlight() {\n        return this._highlight;\n    }\n\n    protected get selectionNode(): ISelectionNode {\n        return {\n            row: this.rowIndex,\n            column: this.column.columnLayoutChild ? this.column.parent.visibleIndex : this.visibleColumnIndex,\n            layout: this.column.columnLayoutChild ? {\n                rowStart: this.column.rowStart,\n                colStart: this.column.colStart,\n                rowEnd: this.column.rowEnd,\n                colEnd: this.column.colEnd,\n                columnVisibleIndex: this.visibleColumnIndex\n            } : null\n            };\n    }\n\n    /** @hidden @internal @deprecated */\n    public focused = this.active;\n    protected compositionStartHandler;\n    protected compositionEndHandler;\n    private _highlight: IgxTextHighlightDirective;\n    private _cellSelection = GridSelectionMode.multiple;\n\n    constructor(\n        protected selectionService: IgxGridSelectionService,\n        protected crudService: IgxGridCRUDService,\n        public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public cdr: ChangeDetectorRef,\n        private element: ElementRef,\n        protected zone: NgZone,\n        private touchManager: HammerGesturesManager,\n        protected platformUtil: PlatformUtil) { }\n\n    private addPointerListeners(selection) {\n        if (selection !== GridSelectionMode.multiple) { return; }\n        this.nativeElement.addEventListener('pointerenter', this.pointerenter);\n        this.nativeElement.addEventListener('pointerup', this.pointerup);\n    }\n\n    private  removePointerListeners(selection) {\n        if (selection !== GridSelectionMode.multiple) { return; }\n        this.nativeElement.removeEventListener('pointerenter', this.pointerenter);\n        this.nativeElement.removeEventListener('pointerup', this.pointerup);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.addEventListener('pointerdown', this.pointerdown);\n            this.addPointerListeners(this.cellSelectionMode);\n            // IE 11 workarounds\n            if (this.platformUtil.isBrowser && isIE()) { // TODO: Move isIE to platformUtil\n                this.compositionStartHandler = () => this.crudService.isInCompositionMode = true;\n                this.compositionEndHandler = () => this.crudService.isInCompositionMode = false;\n                // Hitting Enter with IME submits and exits from edit mode instead of first closing the IME dialog\n                this.nativeElement.addEventListener('compositionstart', this.compositionStartHandler);\n                this.nativeElement.addEventListener('compositionend', this.compositionEndHandler);\n            }\n        });\n        if (this.platformUtil.isIOS) {\n            this.touchManager.addEventListener(this.nativeElement, 'doubletap', this.onDoubleClick, {\n                cssProps: { } /* don't disable user-select, etc */\n            } as HammerOptions);\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    ngOnDestroy() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.removeEventListener('pointerdown', this.pointerdown);\n            this.removePointerListeners(this.cellSelectionMode);\n            if (this.platformUtil.isBrowser && isIE()) {\n                this.nativeElement.removeEventListener('compositionstart', this.compositionStartHandler);\n                this.nativeElement.removeEventListener('compositionend', this.compositionEndHandler);\n            }\n        });\n        this.touchManager.destroy();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    _updateCRUDStatus() {\n        if (this.editMode) {\n            return;\n        }\n\n        const crud = this.crudService;\n        const editableCell = this.crudService.cell;\n        const editMode = !!(crud.row || crud.cell);\n\n        if (this.editable && editMode && !this.row.deleted) {\n            if (editableCell) {\n                if (this.row.addRow) {\n                    this.gridAPI.update_add_cell(editableCell, editableCell.editValue);\n                    this.row.rowData = editableCell.rowData;\n                } else {\n                    this.gridAPI.update_cell(editableCell, editableCell.editValue);\n                }\n                /* This check is related with the following issue #6517:\n                 * when edit cell that belongs to a column which is sorted and press tab,\n                 * the next cell in edit mode is with wrong value /its context is not updated/;\n                 * So we reapply sorting before the next cell enters edit mode.\n                 * Also we need to keep the notifyChanges below, because of the current\n                 * change detection cycle when we have editing with enabled transactions\n                 */\n                if (this.grid.sortingExpressions.length && this.grid.sortingExpressions.indexOf(editableCell.column.field)) {\n                    this.grid.cdr.detectChanges();\n                }\n\n                if (this.crudService.cellEditingBlocked) {\n                    return true;\n                }\n\n                crud.exitCellEdit();\n            }\n            this.grid.tbody.nativeElement.focus({ preventScroll: true });\n            this.grid.notifyChanges();\n            crud.enterEditMode(this);\n            return false;\n        }\n\n        if (editableCell && crud.sameRow(this.cellID.rowID)) {\n            if (this.row.addRow) {\n                this.gridAPI.submit_add_value();\n                this.row.rowData = editableCell.rowData;\n            } else {\n                this.gridAPI.submit_value();\n            }\n        } else if (editMode && !crud.sameRow(this.cellID.rowID)) {\n            this.grid.endEdit(true);\n        }\n    }\n\n    /**\n     * @deprecated\n     * Gets whether the cell is selected.\n     * ```typescript\n     * let isCellSelected = thid.cell.isCellSelected();\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    @DeprecateMethod(`'isCellSelected' is deprecated. Use 'selected' property instead.`)\n    public isCellSelected() {\n        return this.selectionService.selected(this.selectionNode);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.value && !changes.value.firstChange) {\n            if (this.highlight) {\n                this.highlight.lastSearchInfo.searchedText = this.grid.lastSearchInfo.searchText;\n                this.highlight.lastSearchInfo.caseSensitive = this.grid.lastSearchInfo.caseSensitive;\n                this.highlight.lastSearchInfo.exactMatch = this.grid.lastSearchInfo.exactMatch;\n            }\n        }\n    }\n\n    /**\n     * Starts/ends edit mode for the cell.\n     *\n     * ```typescript\n     * cell.setEditMode(true);\n     * ```\n     */\n    setEditMode(value: boolean): void {\n        if (this.row.deleted) {\n            return;\n        }\n        if (this.editable && value) {\n            this.gridAPI.submit_value();\n            this.crudService.enterEditMode(this);\n        } else {\n            this.grid.crudService.exitCellEdit();\n        }\n        this.grid.notifyChanges();\n    }\n\n    /**\n     * Sets new value to the cell.\n     * ```typescript\n     * this.cell.update('New Value');\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    // TODO: Refactor\n    public update(val: any) {\n        if (this.row.deleted) {\n            return;\n        }\n        const cell = this.crudService.createCell(this);\n        const args = this.gridAPI.update_cell(cell, val);\n        if (this.crudService.cell && this.crudService.sameCell(cell)) {\n            if (args.cancel) {\n                return;\n            }\n            this.grid.crudService.exitCellEdit();\n        }\n        this.cdr.markForCheck();\n    }\n\n    /**\n     *\n     * @hidden\n     * @internal\n     */\n    pointerdown = (event: PointerEvent) => {\n        if (this.cellSelectionMode !== GridSelectionMode.multiple) {\n            this.activate(event);\n            return;\n        }\n        if (!isLeftClick(event)) {\n            event.preventDefault();\n            this.grid.navigation.setActiveNode({rowIndex: this.rowIndex, colIndex: this.visibleColumnIndex});\n            this.selectionService.addKeyboardRange();\n            this.selectionService.initKeyboardState();\n            this.selectionService.primaryButton = false;\n            // Ensure RMB Click on edited cell does not end cell editing\n            if (!this.selected) {\n                this.gridAPI.submit_value();\n            }\n            return;\n        }\n        this.selectionService.pointerDown(this.selectionNode, event.shiftKey, event.ctrlKey);\n        this.activate(event);\n    }\n\n    /**\n     *\n     * @hidden\n     * @internal\n     */\n    pointerenter = (event: PointerEvent) => {\n        const isHierarchicalGrid =  this.grid.nativeElement.tagName.toLowerCase() === 'igx-hierarchical-grid';\n        if (isHierarchicalGrid && (!this.grid.navigation.activeNode.gridID || this.grid.navigation.activeNode.gridID !== this.gridID)) {\n            return;\n        }\n        const dragMode = this.selectionService.pointerEnter(this.selectionNode, event);\n        if (dragMode) {\n            this.grid.cdr.detectChanges();\n            if (isIE()) { this.grid.tbody.nativeElement.focus({ preventScroll: true }); }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    pointerup = (event: PointerEvent) => {\n        const isHierarchicalGrid =  this.grid.nativeElement.tagName.toLowerCase() === 'igx-hierarchical-grid';\n        if (!isLeftClick(event) || (isHierarchicalGrid && (!this.grid.navigation.activeNode.gridID ||\n        this.grid.navigation.activeNode.gridID !== this.gridID))) { return; }\n        if (this.selectionService.pointerUp(this.selectionNode, this.grid.onRangeSelection)) {\n            this.grid.cdr.detectChanges();\n            if (isIE()) { this.grid.tbody.nativeElement.focus({ preventScroll: true }); }\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('dblclick', ['$event'])\n    public onDoubleClick = (event: MouseEvent | HammerInput) => {\n        if (event.type === 'doubletap') {\n            // prevent double-tap to zoom on iOS\n            (event as HammerInput).preventDefault();\n        }\n        if (this.grid.rowEditable && this.row.addRow) {\n            this.crudService.enterEditMode(this);\n        }\n        if (this.editable && !this.editMode && !this.row.deleted && !this.crudService.rowEditingBlocked) {\n            this.crudService.enterEditMode(this);\n        }\n\n        this.grid.onDoubleClick.emit({\n            cell: this,\n            event\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event: MouseEvent) {\n        this.grid.onCellClick.emit({\n            cell: this,\n            event\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('contextmenu', ['$event'])\n    public onContextMenu(event: MouseEvent) {\n        this.grid.onContextMenu.emit({\n            cell: this,\n            event\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public activate(event: FocusEvent | KeyboardEvent) {\n        const node = this.selectionNode;\n        const shouldEmitSelection = !this.selectionService.isActiveNode(node);\n\n        if (this.selectionService.primaryButton) {\n            this._updateCRUDStatus();\n\n            const activeElement = this.selectionService.activeElement;\n            const row = activeElement ? this.gridAPI.get_row_by_index(activeElement.row) : null;\n            if ((this.crudService.rowEditingBlocked && row && this.row.rowID !== row.rowID) ||\n                (this.crudService.cell && this.crudService.cellEditingBlocked)) {\n                return;\n            }\n\n            this.selectionService.activeElement = node;\n        } else {\n            this.selectionService.activeElement = null;\n            if (this.crudService.cellInEditMode && !this.editMode) {\n                this.gridAPI.submit_value();\n            }\n        }\n\n        this.grid.navigation.setActiveNode({ row: this.rowIndex, column: this.visibleColumnIndex });\n\n        this.selectionService.primaryButton = true;\n        if (this.cellSelectionMode === GridSelectionMode.multiple && this.selectionService.activeElement) {\n            this.selectionService.add(this.selectionService.activeElement, false); // pointer events handle range generation\n            this.selectionService.keyboardStateOnFocus(node, this.grid.onRangeSelection, this.nativeElement);\n        }\n        if (this.grid.isCellSelectable && shouldEmitSelection) {\n            this.grid.onSelection.emit({ cell: this, event });\n        }\n    }\n\n\n    /**\n     * If the provided string matches the text in the cell, the text gets highlighted.\n     * ```typescript\n     * this.cell.highlightText('Cell Value', true);\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public highlightText(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        return this.highlight && this.column.searchable ? this.highlight.highlight(text, caseSensitive, exactMatch) : 0;\n    }\n\n    /**\n     * Clears the highlight of the text in the cell.\n     * ```typescript\n     * this.cell.clearHighLight();\n     * ```\n     * @memberof IgxGridCellComponent\n     */\n    public clearHighlight() {\n        if (this.highlight && this.column.searchable) {\n            this.highlight.clearHighlight();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public calculateSizeToFit(range: any): number {\n        return Math.max(...Array.from(this.nativeElement.children)\n            .map((child) => getNodeSizeViaRange(range, child)));\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get searchMetadata() {\n        const meta = new Map<string, any>();\n        meta.set('pinned', this.grid.isRecordPinnedByViewIndex(this.row.index));\n        return meta;\n    }\n}\n","import { Directive } from '@angular/core';\nimport { ConnectedPositioningStrategy } from '../services/public_api';\nimport { VerticalAlignment, PositionSettings, Point } from '../services/overlay/utilities';\nimport { scaleInVerBottom, scaleInVerTop } from '../animations/main';\nimport { IgxForOfSyncService } from '../directives/for-of/for_of.sync.service';\nimport { ColumnPinningPosition, RowPinningPosition } from './common/enums';\n\n\n@Directive({\n    selector: '[igxGridBody]',\n    providers: [IgxForOfSyncService]\n})\nexport class IgxGridBodyDirective {}\n\n\n/**\n * @hidden\n */\nexport interface RowEditPositionSettings extends PositionSettings {\n    container?: HTMLElement;\n}\n\n/**\n * An interface describing settings for row/column pinning position.\n */\nexport interface IPinningConfig {\n    columns?: ColumnPinningPosition;\n    rows?: RowPinningPosition;\n}\n\n/**\n * @hidden\n */\nexport class RowEditPositionStrategy extends ConnectedPositioningStrategy {\n    isTop = false;\n    isTopInitialPosition = null;\n    public settings: RowEditPositionSettings;\n    position(contentElement: HTMLElement, size: { width: number, height: number }, document?: Document, initialCall?: boolean,\n            target?: Point | HTMLElement): void {\n        const container = this.settings.container; // grid.tbody\n        const targetElement = <HTMLElement>target || <HTMLElement>this.settings.target; // current grid.row\n\n        // Position of the overlay depends on the available space in the grid.\n        // If the bottom space is not enough then the the row overlay will show at the top of the row.\n        // Once shown, either top or bottom, then this position stays until the overlay is closed (isTopInitialPosition property),\n        // which means that when scrolling then overlay may hide, while the row is still visible (UX requirement).\n        this.isTop = this.isTopInitialPosition !== null ?\n            this.isTopInitialPosition :\n            container.getBoundingClientRect().bottom <\n                targetElement.getBoundingClientRect().bottom + contentElement.getBoundingClientRect().height;\n\n        // Set width of the row editing overlay to equal row width, otherwise it fits 100% of the grid.\n        contentElement.style.width = targetElement.clientWidth + 'px';\n        this.settings.verticalStartPoint = this.settings.verticalDirection = this.isTop ? VerticalAlignment.Top : VerticalAlignment.Bottom;\n        this.settings.openAnimation = this.isTop ? scaleInVerBottom : scaleInVerTop;\n\n        super.position(contentElement, { width: targetElement.clientWidth, height: targetElement.clientHeight },\n                    document, initialCall, targetElement);\n    }\n}\n","import { Directive, HostBinding, TemplateRef } from '@angular/core';\nimport { IgxHierarchicalGridComponent } from '../hierarchical-grid/hierarchical-grid.component';\n\n\n// tslint:disable-next-line: directive-selector\n@Directive({ selector: '[excelText],excel-text' })\nexport class IgxExcelTextDirective { }\n\n\n// tslint:disable-next-line: directive-selector\n@Directive({ selector: '[csvText],csv-text' })\nexport class IgxCSVTextDirective { }\n\n/**\n * Provides a way to template the title portion of the toolbar in the grid.\n *\n * @igxModule IgxGridToolbarModule\n * @igxParent IgxGridToolbarComponent\n *\n * @example\n * ```html\n * <igx-grid-toolbar-title>My custom title</igx-grid-toolbar-title>\n * ```\n */\n@Directive({ selector: '[igxGridToolbarTitle],igx-grid-toolbar-title' })\nexport class IgxGridToolbarTitleDirective {\n    /**\n     * Host `class.igx-grid-toolbar__title` binding.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid-toolbar__title')\n    public cssClass = 'igx-grid-toolbar__title';\n}\n\n/**\n * Provides a way to template the action portion of the toolbar in the grid.\n *\n * @igxModule IgxGridToolbarModule\n * @igxParent IgxGridToolbarComponent\n *\n * @example\n * ```html\n * <igx-grid-toolbar-actions>\n *  <some-toolbar-action-here />\n * </igx-grid-toolbar-actions>\n * ```\n */\n@Directive({ selector: '[igxGridToolbarActions],igx-grid-toolbar-actions' })\nexport class IgxGridToolbarActionsDirective {\n    /**\n     * Host `class.igx-grid-toolbar__actions` binding.\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid-toolbar__actions')\n    public cssClass = 'igx-grid-toolbar__actions';\n }\n\nexport interface IgxGridToolbarTemplateContext {\n    $implicit: IgxHierarchicalGridComponent;\n}\n\n@Directive({ selector: '[igxGridToolbar]'})\nexport class IgxGridToolbarDirective {\n    constructor(public template: TemplateRef<IgxGridToolbarTemplateContext>) {}\n}\n","import {\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    Inject,\n    Input,\n    OnDestroy,\n    OnInit,\n    Optional\n} from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase } from '../../core/displayDensity';\nimport { IgxIconService } from '../../icon/public_api';\nimport { pinLeft, unpinLeft } from '@igniteui/material-icons-extended';\nimport { IgxGridToolbarTitleDirective, IgxGridToolbarActionsDirective } from './common';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridType } from '../common/grid.interface';\n\n\n /**\n  * Provides a context-aware container component for UI operations for the grid components.\n  *\n  * @igxModule IgxGridToolbarModule\n  *\n  */\n@Component({\n    selector: 'igx-grid-toolbar',\n    templateUrl: './grid-toolbar.component.html'\n})\nexport class IgxGridToolbarComponent extends DisplayDensityBase implements OnInit, OnDestroy {\n\n    /**\n     * When enabled, shows the indeterminate progress bar.\n     *\n     * @remarks\n     * By default this will be toggled, when the default exporter component is present\n     * and an exporting is in progress.\n     */\n    @Input()\n    public showProgress = false;\n\n    /**\n     * Gets/sets the grid component for the toolbar component.\n     *\n     * @remarks\n     * Usually you should not set this property in the context of the default grid/tree grid.\n     * The only grids that demands this to be set are the hierarchical child grids. For additional\n     * information check the toolbar topic.\n     */\n    @Input()\n    get grid() {\n        if (this._grid) {\n            return this._grid;\n        }\n        return this.api.grid;\n    }\n\n    set grid(value: IgxGridBaseDirective) {\n        this._grid = value;\n    }\n\n    /** Returns the native DOM element of the toolbar component */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChild(IgxGridToolbarTitleDirective)\n    public hasTitle: IgxGridToolbarTitleDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChild(IgxGridToolbarActionsDirective)\n    public hasActions: IgxGridToolbarActionsDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid-toolbar')\n    defaultStyle = true;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid-toolbar--cosy')\n    get cosyStyle() { return this.displayDensity === 'cosy'; }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('class.igx-grid-toolbar--compact')\n    get compactStyle() { return this.displayDensity === 'compact'; }\n\n    /** @hidden @internal */\n    @HostBinding('style.max-width.px')\n    @HostBinding('style.flex-basis.px')\n    width = null;\n\n    protected _grid: IgxGridBaseDirective;\n    protected sub: Subscription;\n\n    constructor(\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        private api: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        private iconService: IgxIconService,\n        private element: ElementRef<HTMLElement>\n    ) {\n        super(_displayDensityOptions);\n        this.iconService.addSvgIconFromText(pinLeft.name, pinLeft.value, 'imx-icons');\n        this.iconService.addSvgIconFromText(unpinLeft.name, unpinLeft.value, 'imx-icons');\n    }\n\n    /** @hidden @internal */\n    ngOnInit() {\n        this.grid.rendered$.pipe(first()).subscribe(() => this.width = this.grid.outerWidth);\n        this.sub = this.grid.resizeNotify.subscribe(() => this.width = this.grid.outerWidth);\n    }\n\n    /** @hidden @internal */\n    ngOnDestroy() {\n        this.sub?.unsubscribe();\n    }\n}\n","import { Directive, ElementRef, Host, HostListener } from '@angular/core';\nimport { GridBaseAPIService } from './api.service';\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxRowEdit]'\n})\nexport class IgxRowEditTemplateDirective { }\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxRowEditText]'\n})\nexport class IgxRowEditTextDirective { }\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxRowEditActions]'\n})\nexport class IgxRowEditActionsDirective { }\n\n\n// TODO: Refactor circular ref, deps and logic\n/** @hidden @internal */\n@Directive({\n    selector: `[igxRowEditTabStop]`\n})\nexport class IgxRowEditTabStopDirective {\n    private currentCellIndex: number;\n\n\n    constructor(public api: GridBaseAPIService<any>, public element: ElementRef) {}\n\n    get grid() {\n        return this.api.grid;\n    }\n\n    @HostListener('keydown.Tab', [`$event`])\n    @HostListener('keydown.Shift.Tab', [`$event`])\n    public handleTab(event: KeyboardEvent): void {\n        event.stopPropagation();\n        if ((this.grid.rowEditTabs.last === this && !event.shiftKey) ||\n            (this.grid.rowEditTabs.first === this && event.shiftKey)\n        ) {\n            this.move(event);\n        }\n    }\n\n    @HostListener('keydown.Escape', [`$event`])\n    public handleEscape(event: KeyboardEvent): void {\n        this.grid.endEdit(false, event);\n        this.grid.tbody.nativeElement.focus();\n    }\n\n    @HostListener('keydown.Enter', ['$event'])\n    public handleEnter(event: KeyboardEvent): void {\n        event.stopPropagation();\n    }\n\n    /**\n     * Moves focus to first/last editable cell in the editable row and put the cell in edit mode.\n     * If cell is out of view first scrolls to the cell\n     * @param event keyboard event containing information about whether SHIFT key was pressed\n     */\n    private move(event: KeyboardEvent) {\n        event.preventDefault();\n        this.currentCellIndex = event.shiftKey ? this.grid.lastEditableColumnIndex : this.grid.firstEditableColumnIndex;\n        this.grid.navigation.activeNode.row = this.grid.rowInEditMode.index;\n        this.grid.navigation.activeNode.column = this.currentCellIndex;\n        this.grid.navigateTo(this.grid.rowInEditMode.index, this.currentCellIndex, (obj) => {\n            obj.target.activate(event);\n            this.grid.cdr.detectChanges();\n        });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { IgxForOfDirective } from '../directives/for-of/for_of.directive';\nimport { GridType } from './common/grid.interface';\nimport { NAVIGATION_KEYS, ROW_COLLAPSE_KEYS, ROW_EXPAND_KEYS, SUPPORTED_KEYS, HORIZONTAL_NAV_KEYS, HEADER_KEYS, ROW_ADD_KEYS, isEdge } from '../core/utils';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IMultiRowLayoutNode } from './selection/selection.service';\nimport { GridKeydownTargetType, GridSelectionMode, FilterMode } from './common/enums';\nimport { SortingDirection } from '../data-operations/sorting-expression.interface';\nimport { IgxGridExcelStyleFilteringComponent } from './filtering/excel-style/grid.excel-style-filtering.component';\nimport { IActiveNodeChangeEventArgs } from './common/events';\nimport { IgxGridGroupByRowComponent } from './grid/groupby-row.component';\nexport interface ColumnGroupsCache {\n    level: number;\n    visibleIndex: number;\n}\nexport interface IActiveNode {\n    gridID?: string;\n    row: number;\n    column?: number;\n    level?: number;\n    mchCache?: ColumnGroupsCache;\n    layout?: IMultiRowLayoutNode;\n}\n\n/** @hidden */\n@Injectable()\nexport class IgxGridNavigationService {\n    public grid: IgxGridBaseDirective & GridType;\n    public _activeNode: IActiveNode = {} as IActiveNode;\n    protected pendingNavigation = false;\n\n    public get activeNode() {\n        return this._activeNode;\n    }\n\n    public set activeNode(value: IActiveNode) {\n        this._activeNode = value;\n    }\n\n    handleNavigation(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        if (event.repeat && SUPPORTED_KEYS.has(key) || (key === 'tab' && this.grid.crudService.cell)) {\n            event.preventDefault();\n        }\n        event.repeat ? setTimeout(() => this.dispatchEvent(event), 1) : this.dispatchEvent(event);\n    }\n\n    dispatchEvent(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        if (!this.activeNode || !(SUPPORTED_KEYS.has(key) || (key === 'tab' && this.grid.crudService.cell)) &&\n            !this.grid.crudService.rowEditingBlocked && !this.grid.rowInEditMode) { return; }\n        const shift = event.shiftKey;\n        const ctrl = event.ctrlKey;\n        if (NAVIGATION_KEYS.has(key) && this.pendingNavigation) { event.preventDefault(); return; }\n\n        const type = this.isDataRow(this.activeNode.row) ? 'dataCell' :\n            this.isDataRow(this.activeNode.row, true) ? 'summaryCell' : 'groupRow';\n        if (this.emitKeyDown(type, this.activeNode.row, event)) {\n            return;\n        }\n        if (event.altKey) {\n            this.handleAlt(key, event);\n            return;\n        }\n        if ([' ', 'spacebar', 'space'].indexOf(key) === -1) {\n            this.grid.selectionService.keyboardStateOnKeydown(this.activeNode, shift, shift && key === 'tab');\n        }\n        if (this.grid.crudService.cell && NAVIGATION_KEYS.has(key)) { return; }\n\n        const position = this.getNextPosition(this.activeNode.row, this.activeNode.column, key, shift, ctrl, event);\n        if (NAVIGATION_KEYS.has(key)) {\n            event.preventDefault();\n            this.navigateInBody(position.rowIndex, position.colIndex, (obj) => {\n                obj.target.activate(event);\n                this.grid.cdr.detectChanges();\n            });\n        }\n        this.grid.cdr.detectChanges();\n    }\n\n    protected getNextPosition(rowIndex: number, colIndex: number, key: string, shift: boolean, ctrl: boolean, event: KeyboardEvent) {\n        if (!this.isDataRow(rowIndex, true) && (key.indexOf('down') < 0 || key.indexOf('up') < 0) && ctrl) {\n            return { rowIndex, colIndex };\n        }\n        switch (key) {\n            case 'pagedown':\n            case 'pageup':\n                event.preventDefault();\n                key === 'pagedown' ? this.grid.verticalScrollContainer.scrollNextPage() :\n                    this.grid.verticalScrollContainer.scrollPrevPage();\n                const editCell = this.grid.crudService.cell;\n                this.grid.verticalScrollContainer.onChunkLoad\n                    .pipe(first()).subscribe(() => {\n                        if (editCell && this.grid.rowList.map(r => r.index).indexOf(editCell.rowIndex) < 0) {\n                            this.grid.tbody.nativeElement.focus({ preventScroll: true });\n                        }\n                    });\n                break;\n            case 'tab':\n                this.handleEditing(shift, event);\n                break;\n            case 'end':\n                rowIndex = ctrl ? this.findLastDataRowIndex() : this.activeNode.row;\n                colIndex = this.lastColumnIndex;\n                break;\n            case 'home':\n                rowIndex = ctrl ? this.findFirstDataRowIndex() : this.activeNode.row;\n                colIndex = 0;\n                break;\n            case 'arrowleft':\n            case 'left':\n                colIndex = ctrl ? 0 : this.activeNode.column - 1;\n                break;\n            case 'arrowright':\n            case 'right':\n                colIndex = ctrl ? this.lastColumnIndex : this.activeNode.column + 1;\n                break;\n            case 'arrowup':\n            case 'up':\n                if (ctrl && !this.isDataRow(rowIndex) || (this.grid.rowEditable && this.grid.crudService.rowEditingBlocked)) { break; }\n                colIndex = this.activeNode.column !== undefined ? this.activeNode.column : 0;\n                rowIndex = ctrl ? this.findFirstDataRowIndex() : this.activeNode.row - 1;\n                break;\n            case 'arrowdown':\n            case 'down':\n                if ((ctrl && !this.isDataRow(rowIndex)) || (this.grid.rowEditable && this.grid.crudService.rowEditingBlocked)) { break; }\n                colIndex = this.activeNode.column !== undefined ? this.activeNode.column : 0;\n                rowIndex = ctrl ? this.findLastDataRowIndex() : this.activeNode.row + 1;\n                break;\n            case 'enter':\n            case 'f2':\n                const cell = this.grid.getCellByColumnVisibleIndex(this.activeNode.row, this.activeNode.column);\n                if (!this.isDataRow(rowIndex) || !cell.editable) { break; }\n                this.grid.crudService.enterEditMode(cell);\n                break;\n            case 'escape':\n            case 'esc':\n                if (!this.isDataRow(rowIndex)) { break; }\n\n                if (this.grid.crudService.isInCompositionMode) {\n                    return;\n                }\n\n                if (this.grid.crudService.cellInEditMode || this.grid.crudService.rowInEditMode) {\n                    this.grid.endEdit(false);\n                    if (isEdge()) { this.grid.cdr.detectChanges(); }\n                    this.grid.tbody.nativeElement.focus();\n                }\n                break;\n            case ' ':\n            case 'spacebar':\n            case 'space':\n                const rowObj = this.grid.getRowByIndex(this.activeNode.row);\n                if (this.grid.isRowSelectable && rowObj) {\n                    if (this.isDataRow(rowIndex)) {\n                        if (rowObj.selected) {\n                            this.grid.selectionService.deselectRow(rowObj.rowID, event);\n                        } else {\n                            this.grid.selectionService.selectRowById(rowObj.rowID, false, event);\n                        }\n                    }\n                    if (this.isGroupRow(rowIndex)) {\n                        (<any>rowObj as IgxGridGroupByRowComponent).onGroupSelectorClick(event);\n                    }\n                }\n                break;\n            default:\n                return;\n        }\n        return { rowIndex, colIndex };\n    }\n\n    summaryNav(event: KeyboardEvent) {\n        if (this.grid.hasSummarizedColumns) {\n            this.horizontalNav(event, event.key.toLowerCase(), this.grid.dataView.length, 'summaryCell');\n        }\n    }\n\n    headerNavigation(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        if (!HEADER_KEYS.has(key)) { return; }\n        event.preventDefault();\n\n        const ctrl = event.ctrlKey;\n        const shift = event.shiftKey;\n        const alt = event.altKey;\n\n        this.performHeaderKeyCombination(this.currentActiveColumn, key, shift, ctrl, alt, event);\n        if (shift || alt || (ctrl && (key.includes('down') || key.includes('down')))) { return; }\n        !this.grid.hasColumnGroups ? this.horizontalNav(event, key, -1, 'headerCell') : this.handleMCHeaderNav(key, ctrl);\n    }\n\n    protected horizontalNav(event: KeyboardEvent, key: string, rowIndex: number, tag: GridKeydownTargetType) {\n        const ctrl = event.ctrlKey;\n        if (!HORIZONTAL_NAV_KEYS.has(event.key.toLowerCase())) { return; }\n        event.preventDefault();\n        this.activeNode.row = rowIndex;\n        if (rowIndex > 0) {\n            if (this.emitKeyDown('summaryCell', this.activeNode.row, event)) {\n                return;\n            }\n        }\n\n        const newActiveNode = {\n            column: this.activeNode.column,\n            mchCache: {\n                level: this.activeNode.level,\n                visibleIndex: this.activeNode.column\n            }\n        };\n\n        if ((key.includes('left') || key === 'home') && this.activeNode.column > 0) {\n            newActiveNode.column = ctrl || key === 'home' ? 0 : this.activeNode.column - 1;\n        }\n        if ((key.includes('right') || key === 'end') && this.activeNode.column < this.lastColumnIndex) {\n            newActiveNode.column = ctrl || key === 'end' ? this.lastColumnIndex : this.activeNode.column + 1;\n        }\n\n        if (tag === 'headerCell') {\n            const column = this.grid.getColumnByVisibleIndex(newActiveNode.column);\n            newActiveNode.mchCache.level = column.level;\n            newActiveNode.mchCache.visibleIndex = column.visibleIndex;\n        }\n\n        this.setActiveNode({ row: this.activeNode.row, column: newActiveNode.column, mchCache: newActiveNode.mchCache });\n        this.performHorizontalScrollToCell(this.activeNode.column);\n    }\n\n    focusTbody(event) {\n        const gridRows = this.grid.verticalScrollContainer.totalItemCount ?? this.grid.dataView.length;\n        if (gridRows < 1) { this.activeNode = null; return; }\n        if (!Object.keys(this.activeNode).length || this.activeNode.row < 0 || this.activeNode.row > gridRows - 1) {\n            this.grid.navigateTo(0, 0, (obj) => {\n                this.grid.clearCellSelection();\n                obj.target.activate(event);\n            });\n        }\n    }\n\n    focusFirstCell(header = true) {\n        if ((header || this.grid.dataView.length) && this.activeNode &&\n            (this.activeNode.row === -1 || this.activeNode.row === this.grid.dataView.length ||\n                (!header && !this.grid.hasSummarizedColumns))) { return; }\n\n        this.setActiveNode({\n            row: header ? -1 : this.grid.dataView.length, column: 0,\n            level: this.grid.hasColumnLayouts ? 1 : 0, mchCache: { level: 0, visibleIndex: 0 }\n        });\n        this.performHorizontalScrollToCell(0);\n    }\n\n    get lastColumnIndex() {\n        return Math.max(...this.grid.visibleColumns.map(col => col.visibleIndex));\n    }\n    get displayContainerWidth() {\n        return Math.round(this.grid.parentVirtDir.dc.instance._viewContainer.element.nativeElement.offsetWidth);\n    }\n    get displayContainerScrollLeft() {\n        return Math.ceil(this.grid.headerContainer.scrollPosition);\n    }\n    get containerTopOffset() {\n        return parseInt(this.grid.verticalScrollContainer.dc.instance._viewContainer.element.nativeElement.style.top, 10);\n    }\n\n    public isColumnFullyVisible(columnIndex: number) {\n        if (columnIndex < 0 || this.isColumnPinned(columnIndex, this.forOfDir())) {\n            return true;\n        }\n        const index = this.getColumnUnpinnedIndex(columnIndex);\n        const width = this.forOfDir().getColumnScrollLeft(index + 1) - this.forOfDir().getColumnScrollLeft(index);\n        if (this.displayContainerWidth < width && this.displayContainerScrollLeft === this.forOfDir().getColumnScrollLeft(index)) {\n            return true;\n        }\n        return this.displayContainerWidth >= this.forOfDir().getColumnScrollLeft(index + 1) - this.displayContainerScrollLeft &&\n            this.displayContainerScrollLeft <= this.forOfDir().getColumnScrollLeft(index);\n    }\n\n    protected getColumnUnpinnedIndex(visibleColumnIndex: number) {\n        const column = this.grid.unpinnedColumns.find((col) => !col.columnGroup && col.visibleIndex === visibleColumnIndex);\n        return this.grid.pinnedColumns.length ? this.grid.unpinnedColumns.filter((c) => !c.columnGroup).indexOf(column) :\n            visibleColumnIndex;\n    }\n\n    protected forOfDir(): IgxForOfDirective<any> {\n        const forOfDir = this.grid.dataRowList.length > 0 ? this.grid.dataRowList.first.virtDirRow : this.grid.summariesRowList.length ?\n        this.grid.summariesRowList.first.virtDirRow : this.grid.headerContainer;\n        return forOfDir as IgxForOfDirective<any>;\n    }\n\n    protected handleAlt(key: string, event: KeyboardEvent) {\n        event.preventDefault();\n        const row = this.grid.getRowByIndex(this.activeNode.row) as any;\n\n        if (!(this.isToggleKey(key) || this.isAddKey(key)) || !row) { return; }\n        if (this.isAddKey(key)) {\n            if (!this.grid.rowEditable) {\n                console.warn('The grid must be in row edit mode to perform row adding!');\n                return;\n            }\n\n            if (event.shiftKey && row.treeRow !== undefined) {\n                row.beginAddChild();\n            } else if (!event.shiftKey) {\n                row.beginAddRow();\n            }\n        } else if (!row.expanded && ROW_EXPAND_KEYS.has(key)) {\n            row.rowID === undefined ? row.toggle() :\n                this.grid.gridAPI.set_row_expansion_state(row.rowID, true, event);\n        } else if (row.expanded && ROW_COLLAPSE_KEYS.has(key)) {\n            row.rowID === undefined ? row.toggle() :\n                this.grid.gridAPI.set_row_expansion_state(row.rowID, false, event);\n        }\n        this.grid.notifyChanges();\n    }\n\n    protected handleEditing(shift: boolean, event: KeyboardEvent) {\n        const next = shift ? this.grid.getPreviousCell(this.activeNode.row, this.activeNode.column, col => col.editable) :\n            this.grid.getNextCell(this.activeNode.row, this.activeNode.column, col => col.editable);\n        if (!this.grid.rowInEditMode && this.isActiveNode(next.rowIndex, next.visibleColumnIndex)) {\n            this.grid.endEdit(true);\n            return;\n        }\n        event.preventDefault();\n        if ((this.grid.rowInEditMode && this.grid.rowEditTabs.length) &&\n            (this.activeNode.row !== next.rowIndex || this.isActiveNode(next.rowIndex, next.visibleColumnIndex))) {\n            if (this.grid.crudService.row?.isAddRow) {\n                this.grid.gridAPI.submit_add_value();\n                const row = this.grid.rowList.find(r => r.rowID === this.grid.crudService.row.id);\n                row.rowData = this.grid.crudService.row.data;\n            } else {\n                this.grid.gridAPI.submit_value();\n            }\n            shift ? this.grid.rowEditTabs.last.element.nativeElement.focus() :\n                this.grid.rowEditTabs.first.element.nativeElement.focus();\n            return;\n        }\n\n        if (this.grid.rowInEditMode && !this.grid.rowEditTabs.length) {\n            if (shift && next.rowIndex === this.activeNode.row && next.visibleColumnIndex === this.activeNode.column) {\n                next.visibleColumnIndex = this.grid.lastEditableColumnIndex;\n            } else if (!shift && next.rowIndex === this.activeNode.row && next.visibleColumnIndex === this.activeNode.column) {\n                next.visibleColumnIndex = this.grid.firstEditableColumnIndex;\n            } else {\n                next.rowIndex = this.activeNode.row;\n            }\n        }\n\n        this.navigateInBody(next.rowIndex, next.visibleColumnIndex, (obj) => {\n            obj.target.activate(event);\n            this.grid.cdr.detectChanges();\n        });\n    }\n\n    public shouldPerformHorizontalScroll(visibleColIndex: number, rowIndex = -1) {\n        if (visibleColIndex < 0 || visibleColIndex > this.grid.visibleColumns.length - 1) { return false; }\n        if (rowIndex < 0 || rowIndex > this.grid.dataView.length - 1) {\n            return !this.isColumnFullyVisible(visibleColIndex);\n        }\n        const row = this.grid.dataView[rowIndex];\n        return row.expression || row.detailsData ? false : !this.isColumnFullyVisible(visibleColIndex);\n    }\n\n    public shouldPerformVerticalScroll(targetRowIndex: number, visibleColIndex: number): boolean {\n        if (this.grid.isRecordPinnedByViewIndex(targetRowIndex)) { return false; }\n        const scrollRowIndex = this.grid.hasPinnedRecords && this.grid.isRowPinningToTop ?\n            targetRowIndex - this.grid.pinnedDataView.length : targetRowIndex;\n        const targetRow = this.getRowElementByIndex(targetRowIndex);\n        const rowHeight = this.grid.verticalScrollContainer.getSizeAt(scrollRowIndex);\n        const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n        const endTopOffset = targetRow ? targetRow.offsetTop + rowHeight + this.containerTopOffset : containerHeight + rowHeight;\n        // this is workaround: endTopOffset - containerHeight > 5 and should be replaced with: containerHeight < endTopOffset\n        // when the page is zoomed the grid does not scroll the row completely in the view\n        return !targetRow || targetRow.offsetTop < Math.abs(this.containerTopOffset)\n            || containerHeight && endTopOffset - containerHeight > 5;\n    }\n\n    protected navigateInBody(rowIndex, visibleColIndex, cb: Function = null): void {\n        if (!this.isValidPosition(rowIndex, visibleColIndex) || this.isActiveNode(rowIndex, visibleColIndex)) { return; }\n        this.grid.navigateTo(rowIndex, visibleColIndex, cb);\n    }\n\n    public performVerticalScrollToCell(rowIndex: number, visibleColIndex = -1, cb?: () => void) {\n        if (!this.shouldPerformVerticalScroll(rowIndex, visibleColIndex)) { return; }\n        this.pendingNavigation = true;\n        // Only for top pinning we need to subtract pinned count because virtualization indexing doesn't count pinned rows.\n        const scrollRowIndex = this.grid.hasPinnedRecords && this.grid.isRowPinningToTop ?\n            rowIndex - this.grid.pinnedDataView.length : rowIndex;\n        this.grid.verticalScrollContainer.scrollTo(scrollRowIndex);\n        this.grid.verticalScrollContainer.onChunkLoad\n            .pipe(first()).subscribe(() => {\n                this.pendingNavigation = false;\n                if (cb) { cb(); }\n            });\n    }\n\n    public performHorizontalScrollToCell(visibleColumnIndex: number, cb?: () => void) {\n        if (this.grid.rowList < 1 && this.grid.summariesRowList.length < 1 && this.grid.hasColumnGroups) {\n            let column = this.grid.getColumnByVisibleIndex(visibleColumnIndex);\n            while (column.parent) {\n                column = column.parent;\n            }\n            visibleColumnIndex = this.forOfDir().igxForOf.indexOf(column);\n        }\n        if (!this.shouldPerformHorizontalScroll(visibleColumnIndex)) { return; }\n        this.pendingNavigation = true;\n        this.grid.parentVirtDir.onChunkLoad\n            .pipe(first())\n            .subscribe(() => {\n                this.pendingNavigation = false;\n                if (cb) { cb(); }\n            });\n        this.forOfDir().scrollTo(this.getColumnUnpinnedIndex(visibleColumnIndex));\n    }\n\n    public isDataRow(rowIndex: number, includeSummary = false) {\n        if (rowIndex < 0 || rowIndex > this.grid.dataView.length - 1) { return false; }\n        const curRow = this.grid.dataView[rowIndex];\n        return curRow && !this.grid.isGroupByRecord(curRow) && !this.grid.isDetailRecord(curRow)\n            && !curRow.childGridsData && (includeSummary || !curRow.summaries);\n    }\n\n    public isGroupRow(rowIndex: number): boolean {\n        if (rowIndex < 0 || rowIndex > this.grid.dataView.length - 1) { return false; }\n        const curRow = this.grid.dataView[rowIndex];\n        return curRow && this.grid.isGroupByRecord(curRow);\n    }\n\n    public setActiveNode(activeNode: IActiveNode) {\n        if (!this.isActiveNodeChanged(activeNode)) {\n            return;\n        }\n\n        if (!this.activeNode) {\n            this.activeNode = activeNode;\n        }\n\n        Object.assign(this.activeNode, activeNode);\n\n        const currRow = this.grid.dataView[activeNode.row];\n        const type: GridKeydownTargetType = activeNode.row < 0 ? 'headerCell' :\n            this.isDataRow(activeNode.row) ? 'dataCell' :\n                currRow && this.grid.isGroupByRecord(currRow) ? 'groupRow' :\n                    currRow && this.grid.isDetailRecord(currRow) ? 'masterDetailRow' : 'summaryCell';\n\n        const args: IActiveNodeChangeEventArgs = {\n            row: this.activeNode.row,\n            column: this.activeNode.column,\n            level: this.activeNode.level,\n            tag: type\n        };\n\n        this.grid.activeNodeChange.emit(args);\n    }\n\n    public isActiveNodeChanged(activeNode: IActiveNode) {\n        let isChanged = false;\n        const checkInnerProp = (aciveNode: ColumnGroupsCache | IMultiRowLayoutNode, prop) => {\n            if (!aciveNode) {\n                isChanged = true;\n                return;\n            }\n\n            props = Object.getOwnPropertyNames(aciveNode);\n            for (let i = 0; i < props.length; i++) {\n                const propName = props[i];\n                if (this.activeNode[prop][propName] !== aciveNode[propName]) {\n                    isChanged = true;\n                }\n            }\n        };\n\n        if (!this.activeNode) {\n            return isChanged = true;\n        }\n\n        let props = Object.getOwnPropertyNames(activeNode);\n        for (let i = 0; i < props.length; i++) {\n            const propName = props[i];\n\n            if (!!this.activeNode[propName] && typeof this.activeNode[propName] === 'object') {\n                checkInnerProp(activeNode[propName], propName);\n            } else if (this.activeNode[propName] !== activeNode[propName]) {\n                isChanged = true;\n            }\n        }\n\n        return isChanged;\n    }\n\n\n    protected emitKeyDown(type: GridKeydownTargetType, rowIndex, event) {\n        const row = this.grid.summariesRowList.toArray().concat(this.grid.rowList.toArray()).find(r => r.index === rowIndex);\n        if (!row) { return; }\n\n        const target = type === 'groupRow' ? row :\n            type === 'dataCell' ? row.cells?.find(c => c.visibleColumnIndex === this.activeNode.column) :\n                row.summaryCells?.find(c => c.visibleColumnIndex === this.activeNode.column);\n        const keydownArgs = { targetType: type, event: event, cancel: false, target: target };\n        this.grid.onGridKeydown.emit(keydownArgs);\n        if (keydownArgs.cancel && type === 'dataCell') {\n            this.grid.selectionService.clear();\n            this.grid.selectionService.keyboardState.active = true;\n            return keydownArgs.cancel;\n        }\n    }\n\n    protected isColumnPinned(columnIndex: number, forOfDir: IgxForOfDirective<any>): boolean {\n        const horizontalScroll = forOfDir.getScroll();\n        return (!horizontalScroll.clientWidth || this.grid.getColumnByVisibleIndex(columnIndex)?.pinned);\n    }\n\n    protected findFirstDataRowIndex(): number {\n        return this.grid.dataView.findIndex(rec => !this.grid.isGroupByRecord(rec) && !this.grid.isDetailRecord(rec) && !rec.summaries);\n    }\n\n    protected findLastDataRowIndex(): number {\n        if ((this.grid as any).totalItemCount) { return (this.grid as any).totalItemCount - 1; }\n        let i = this.grid.dataView.length;\n        while (i--) {\n            if (this.isDataRow(i)) {\n                return i;\n            }\n        }\n    }\n\n    protected getRowElementByIndex(index) {\n        if (this.grid.hasDetails) {\n            const detail = this.grid.nativeElement.querySelector(`[detail=\"true\"][data-rowindex=\"${index}\"]`);\n            if (detail) { return detail; }\n        }\n        return this.grid.rowList.toArray().concat(this.grid.summariesRowList.toArray()).find(r => r.index === index)?.nativeElement;\n    }\n\n    protected isValidPosition(rowIndex: number, colIndex: number): boolean {\n        const length = (this.grid as any).totalItemCount ?? this.grid.dataView.length;\n        if (rowIndex < 0 || colIndex < 0 || length - 1 < rowIndex || this.lastColumnIndex < colIndex) {\n            return false;\n        }\n        return this.activeNode.column !== colIndex && !this.isDataRow(rowIndex, true) ? false : true;\n    }\n    protected performHeaderKeyCombination(column, key, shift, ctrl, alt, event) {\n        let direction = this.grid.sortingExpressions.find(expr => expr.fieldName === column.field)?.dir;\n        if (ctrl && key.includes('up') && column.sortable && !column.columnGroup) {\n            direction = direction === SortingDirection.Asc ? SortingDirection.None : SortingDirection.Asc;\n            this.grid.sort({ fieldName: column.field, dir: direction, ignoreCase: false });\n            return;\n        }\n        if (ctrl && key.includes('down') && column.sortable && !column.columnGroup) {\n            direction = direction === SortingDirection.Desc ? SortingDirection.None : SortingDirection.Desc;\n            this.grid.sort({ fieldName: column.field, dir: direction, ignoreCase: false });\n            return;\n        }\n        if (shift && alt && this.isToggleKey(key) && !column.columnGroup && column.groupable) {\n            direction = direction ? SortingDirection.Desc : SortingDirection.Asc;\n            key.includes('right') ? (this.grid as any).groupBy({ fieldName: column.field, dir: direction, ignoreCase: false }) :\n                (this.grid as any).clearGrouping(column.field);\n            this.activeNode.column = key.includes('right') && (this.grid as any).hideGroupedColumns &&\n                column.visibleIndex === this.lastColumnIndex ? this.lastColumnIndex - 1 : this.activeNode.column;\n            return;\n        }\n        if (alt && (ROW_EXPAND_KEYS.has(key) || ROW_COLLAPSE_KEYS.has(key))) {\n            this.handleMCHExpandCollapse(key, column);\n            return;\n        }\n        if ([' ', 'spacebar', 'space'].indexOf(key) !== -1) {\n            this.handleColumnSelection(column, event);\n        }\n        if (alt && (key === 'l' || key === '') && this.grid.allowAdvancedFiltering) {\n            this.grid.openAdvancedFilteringDialog();\n        }\n        if (ctrl && shift && key === 'l' && this.grid.allowFiltering && !column.columnGroup && column.filterable) {\n            if (this.grid.filterMode === FilterMode.excelStyleFilter) {\n                const headerEl = this.grid.nativeElement.querySelector(`.igx-grid__th--active`);\n                this.grid.filteringService.toggleFilterDropdown(headerEl, column, IgxGridExcelStyleFilteringComponent);\n            } else {\n                this.performHorizontalScrollToCell(column.visibleIndex);\n                this.grid.filteringService.filteredColumn = column;\n                this.grid.filteringService.isFilterRowVisible = true;\n            }\n        }\n    }\n\n    private handleMCHeaderNav(key: string, ctrl: boolean) {\n        const newHeaderNode: ColumnGroupsCache = {\n            visibleIndex: this.activeNode.mchCache.visibleIndex,\n            level: this.activeNode.mchCache.level\n        };\n        const activeCol = this.currentActiveColumn;\n        const lastGroupIndex = Math.max(... this.grid.visibleColumns.\n            filter(c => c.level <= this.activeNode.level).map(col => col.visibleIndex));\n        let nextCol = activeCol;\n        if ((key.includes('left') || key === 'home') && this.activeNode.column > 0) {\n            const index = ctrl || key === 'home' ? 0 : this.activeNode.column - 1;\n            nextCol = this.getNextColumnMCH(index);\n            newHeaderNode.visibleIndex = nextCol.visibleIndex;\n        }\n        if ((key.includes('right') || key === 'end') && activeCol.visibleIndex < lastGroupIndex) {\n            const nextVIndex = activeCol.children ? Math.max(...activeCol.allChildren.map(c => c.visibleIndex)) + 1 :\n                activeCol.visibleIndex + 1;\n            nextCol = ctrl || key === 'end' ? this.getNextColumnMCH(this.lastColumnIndex) : this.getNextColumnMCH(nextVIndex);\n            newHeaderNode.visibleIndex = nextCol.visibleIndex;\n        }\n        if (!ctrl && key.includes('up') && this.activeNode.level > 0) {\n            nextCol = activeCol.parent;\n            newHeaderNode.level = nextCol.level;\n        }\n        if (!ctrl && key.includes('down') && activeCol.children) {\n            nextCol = activeCol.children.find(c => c.visibleIndex === newHeaderNode.visibleIndex) ||\n                activeCol.children.toArray().sort((a, b) => b.visibleIndex - a.visibleIndex)\n                    .filter(col => col.visibleIndex < newHeaderNode.visibleIndex)[0];\n            newHeaderNode.level = nextCol.level;\n        }\n\n        this.setActiveNode({\n            row: this.activeNode.row,\n            column: nextCol.visibleIndex,\n            level: nextCol.level,\n            mchCache: newHeaderNode\n        });\n        this.performHorizontalScrollToCell(nextCol.visibleIndex);\n    }\n\n    private handleMCHExpandCollapse(key, column) {\n        if (!column.children || !column.collapsible) { return; }\n        if (!column.expanded && ROW_EXPAND_KEYS.has(key)) {\n            column.expanded = true;\n        } else if (column.expanded && ROW_COLLAPSE_KEYS.has(key)) {\n            column.expanded = false;\n        }\n    }\n\n    private handleColumnSelection(column, event) {\n        if (!column.selectable || this.grid.columnSelection === GridSelectionMode.none) { return; }\n        const clearSelection = this.grid.columnSelection === GridSelectionMode.single;\n        const columnsToSelect = !column.children ? [column.field] :\n            column.allChildren.filter(c => !c.hidden && c.selectable && !c.columnGroup).map(c => c.field);\n        column.selected ? this.grid.selectionService.deselectColumns(columnsToSelect, event) :\n            this.grid.selectionService.selectColumns(columnsToSelect, clearSelection, false, event);\n    }\n\n    private getNextColumnMCH(visibleIndex) {\n        let col = this.grid.getColumnByVisibleIndex(visibleIndex);\n        let parent = col.parent;\n        while (parent && col.level > this.activeNode.mchCache.level) {\n            col = col.parent;\n            parent = col.parent;\n        }\n        return col;\n    }\n\n    private get currentActiveColumn() {\n        return this.grid.visibleColumns.find(c => c.visibleIndex === this.activeNode.column && c.level === this.activeNode.level);\n    }\n\n    private isActiveNode(rIndex: number, cIndex: number): boolean {\n        return this.activeNode ? this.activeNode.row === rIndex && this.activeNode.column === cIndex : false;\n    }\n\n    private isToggleKey(key: string): boolean {\n        return ROW_COLLAPSE_KEYS.has(key) || ROW_EXPAND_KEYS.has(key);\n    }\n\n    private isAddKey(key: string): boolean {\n        return ROW_ADD_KEYS.has(key);\n    }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\n\n/**\n * @hidden\n * @internal\n */\n@Injectable()\nexport class IgxColumnResizingService {\n\n    /**\n     * @hidden\n     */\n    public startResizePos: number;\n    /**\n     * Indicates that a column is currently being resized.\n     */\n    public isColumnResizing: boolean;\n    /**\n     * @hidden\n     */\n    public resizeCursor: string = null;\n    /**\n     * @hidden\n     */\n    public showResizer = false;\n    /**\n     * The column being resized.\n     */\n    public column: IgxColumnComponent;\n\n    constructor(private zone: NgZone) { }\n\n    /**\n     * @hidden\n     */\n    get resizerHeight(): number {\n        let height = this.column.grid.getVisibleContentHeight();\n\n        // Column height multiplier in case there are Column Layouts. The resizer height need to take into account rowStart.\n        let columnHeightMultiplier = 1;\n        if (this.column.columnLayoutChild) {\n            columnHeightMultiplier = this.column.grid.multiRowLayoutRowSize - this.column.rowStart + 1;\n        }\n\n        if (this.column.level !== 0) {\n            height -= this.column.topLevelParent.headerGroup.height - this.column.headerGroup.height * columnHeightMultiplier;\n        }\n\n        return height;\n    }\n\n    /**\n     * Returns the minimal possible width to which the column can be resized.\n     */\n    get restrictResizeMin(): number {\n        const actualWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        const minWidth = this.column.minWidthPx < actualWidth ? this.column.minWidthPx : actualWidth;\n\n        return actualWidth - minWidth;\n    }\n\n    /**\n     * Returns the maximal possible width to which the column can be resized.\n     */\n    get restrictResizeMax(): number {\n        const actualWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        const maxWidth = this.column.maxWidthPx;\n        if (this.column.maxWidth) {\n            return maxWidth - actualWidth;\n        } else {\n            return Number.MAX_SAFE_INTEGER;\n        }\n    }\n\n    /**\n     * Autosizes the column to the longest currently visible cell value, including the header cell.\n     * If the column has a predifined maxWidth and the autosized column width will become bigger than it,\n     * then the column is sized to its maxWidth.\n     */\n    public autosizeColumnOnDblClick() {\n        const currentColWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        const isPercentageWidth = this.column.width && typeof this.column.width === 'string' && this.column.width.indexOf('%') !== -1;\n        let size = this.column.getAutoSize();\n        const maxWidth = isPercentageWidth ? this.column.maxWidthPercent : this.column.maxWidthPx;\n        const minWidth = isPercentageWidth ? this.column.minWidthPercent : this.column.minWidthPx;\n        if (this.column.maxWidth && (parseFloat(size) > maxWidth)) {\n            size = isPercentageWidth ? maxWidth + '%' : maxWidth + 'px';\n        } else if (parseFloat(size) < minWidth) {\n            size = isPercentageWidth ? minWidth + '%' : minWidth + 'px';\n        }\n        this.column.width = size;\n\n        this.zone.run(() => {});\n\n        this.column.grid.onColumnResized.emit({\n            column: this.column,\n            prevWidth: currentColWidth.toString(),\n            newWidth: this.column.width\n        });\n    }\n\n    /**\n     * Resizes the column regaridng to the column minWidth and maxWidth.\n     */\n    public resizeColumn(event: MouseEvent) {\n        this.showResizer = false;\n        const diff = event.clientX - this.startResizePos;\n\n        const colWidth = this.column.width;\n        const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n        let currentColWidth = parseFloat(colWidth);\n        const actualWidth = this.column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        currentColWidth = Number.isNaN(currentColWidth) ? parseFloat(actualWidth) : currentColWidth;\n\n        if (this.column.grid.hasColumnLayouts) {\n            this.resizeColumnLayoutFor(this.column, diff);\n        } else if (isPercentageWidth) {\n            this._handlePercentageResize(diff, this.column);\n        } else {\n            this._handlePixelResize(diff, this.column);\n        }\n\n\n        this.zone.run(() => {});\n\n        if (currentColWidth !== parseFloat(this.column.width)) {\n            this.column.grid.onColumnResized.emit({\n                column: this.column,\n                prevWidth: isPercentageWidth ? currentColWidth + '%' : currentColWidth + 'px',\n                newWidth: this.column.width\n            });\n        }\n\n        this.isColumnResizing = false;\n    }\n\n    protected _handlePixelResize(diff: number, column: IgxColumnComponent) {\n        const currentColWidth = parseFloat(column.width);\n        const colMinWidth = column.minWidthPx;\n        const colMaxWidth = column.maxWidthPx;\n        if (currentColWidth + diff < colMinWidth) {\n            column.width = colMinWidth + 'px';\n        } else if (colMaxWidth && (currentColWidth + diff > colMaxWidth)) {\n            column.width = colMaxWidth + 'px';\n        } else {\n            column.width = (currentColWidth + diff) + 'px';\n        }\n    }\n\n    protected _handlePercentageResize(diff: number, column: IgxColumnComponent) {\n        const currentPercentWidth = parseFloat(column.width);\n        const gridAvailableSize = column.grid.calcWidth;\n\n        const diffPercentage = (diff / gridAvailableSize) * 100;\n        const colMinWidth = column.minWidthPercent;\n        const colMaxWidth =  column.maxWidthPercent;\n\n        if (currentPercentWidth + diffPercentage < colMinWidth) {\n            column.width = colMinWidth + '%';\n        } else if (colMaxWidth && (currentPercentWidth + diffPercentage > colMaxWidth)) {\n            column.width = colMaxWidth + '%';\n        } else {\n            column.width = (currentPercentWidth + diffPercentage) + '%';\n        }\n    }\n\n    protected getColMinWidth(column: IgxColumnComponent) {\n        let currentColWidth = parseFloat(column.width);\n        const actualWidth = column.headerCell.elementRef.nativeElement.getBoundingClientRect().width;\n        currentColWidth = Number.isNaN(currentColWidth) || (currentColWidth < actualWidth) ? actualWidth : currentColWidth;\n\n        const actualMinWidth = parseFloat(column.minWidth);\n        return actualMinWidth < currentColWidth ? actualMinWidth : currentColWidth;\n    }\n\n    protected resizeColumnLayoutFor(column: IgxColumnComponent, diff: number) {\n        const relativeColumns = column.getResizableColUnderEnd();\n        const combinedSpan = relativeColumns.reduce((acc, col) =>  acc + col.spanUsed, 0);\n\n        // Resize first those who might reach min/max width\n        let columnsToResize = [...relativeColumns];\n        let updatedDiff = diff;\n        let updatedCombinedSpan = combinedSpan;\n        let setMinMaxCols = false;\n        do {\n            // Cycle them until there are not ones that reach min/max size, because the diff accumulates after each cycle.\n            // This is because we can have at first 2 cols reaching min width and then after\n            // recalculating the diff there might be 1 more that reaches min width.\n            setMinMaxCols = false;\n            let newCombinedSpan = updatedCombinedSpan;\n            const newColsToResize = [];\n            columnsToResize.forEach((col) => {\n                const currentResizeWidth = parseFloat(col.target.calcWidth);\n                const resizeScaled = (diff / updatedCombinedSpan) * col.target.gridColumnSpan;\n                const colWidth = col.target.width;\n                const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n\n                const minWidth = col.target.minWidthPx;\n                const maxWidth = col.target.maxWidthPx;\n                if (currentResizeWidth + resizeScaled < minWidth) {\n                    col.target.width = isPercentageWidth ? col.target.minWidthPercent + '%' : minWidth + 'px';\n                    updatedDiff += (currentResizeWidth - minWidth);\n                    newCombinedSpan -= col.spanUsed;\n                    setMinMaxCols = true;\n                } else if (maxWidth && (currentResizeWidth + resizeScaled > maxWidth)) {\n                    col.target.width = isPercentageWidth ? col.target.maxWidthPercent + '%' : col.target.maxWidthPx + 'px';\n                    updatedDiff -= (maxWidth - currentResizeWidth);\n                    newCombinedSpan -= col.spanUsed;\n                    setMinMaxCols = true;\n                } else {\n                    // Save new ones that can be resized\n                    newColsToResize.push(col);\n                }\n            });\n\n            updatedCombinedSpan = newCombinedSpan;\n            columnsToResize = newColsToResize;\n        } while (setMinMaxCols);\n\n        // Those left that don't reach min/max size resize them normally.\n        columnsToResize.forEach((col) => {\n            const resizeScaled = (updatedDiff / updatedCombinedSpan) * col.target.gridColumnSpan;\n            const colWidth = col.target.width;\n            const isPercentageWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1;\n            if (isPercentageWidth) {\n                this._handlePercentageResize(resizeScaled, col.target);\n            } else {\n                this._handlePixelResize(resizeScaled, col.target);\n            }\n        });\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    DoCheck,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    NgZone,\n    OnDestroy,\n    TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport { DataType } from '../../data-operations/data-util';\nimport { SortingDirection } from '../../data-operations/sorting-expression.interface';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { Subject } from 'rxjs';\nimport { GridType } from '../common/grid.interface';\nimport { GridSelectionMode } from '../common/enums';\nimport { IgxGridExcelStyleFilteringComponent } from '../filtering/excel-style/grid.excel-style-filtering.component';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-header',\n    templateUrl: './grid-header.component.html'\n})\nexport class IgxGridHeaderComponent implements DoCheck, OnDestroy {\n\n    private _destroy$ = new Subject<boolean>();\n\n    /**\n     * @hidden\n     */\n   @ViewChild('defaultESFHeaderIconTemplate', { read: TemplateRef, static: true })\n   protected defaultESFHeaderIconTemplate: TemplateRef<any>;\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public gridID: string;\n\n    /**\n     * Returns the `aria-selected` of the header.\n     */\n    @HostBinding('attr.aria-selected')\n    public get ariaSelected(): boolean {\n        return this.column.selected;\n    }\n\n    @HostBinding('class')\n    get styleClasses(): string {\n        const defaultClasses = [\n            'igx-grid__th--fw',\n            this.column.headerClasses\n        ];\n\n        const classList = {\n            'igx-grid__th': !this.column.columnGroup,\n            'asc': this.ascending,\n            'desc': this.descending,\n            'igx-grid__th--number': this.column.dataType === DataType.Number,\n            'igx-grid__th--sortable': this.column.sortable,\n            'igx-grid__th--selectable': this.selectable,\n            'igx-grid__th--filtrable': this.column.filterable && this.grid.filteringService.isFilterRowVisible,\n            'igx-grid__th--sorted': this.sorted,\n            'igx-grid__th--selected': this.selected\n        };\n\n        for (const klass of Object.keys(classList)) {\n            if (classList[klass]) {\n                defaultClasses.push(klass);\n            }\n        }\n        return defaultClasses.join(' ');\n    }\n\n    @HostBinding('style.height.rem')\n    get height() {\n        if (this.grid.hasColumnGroups) {\n            return (this.grid.maxLevelHeaderDepth + 1 - this.column.level) * this.grid.defaultRowHeight / this.grid._baseFontSize;\n        }\n        return null;\n    }\n\n    /**\n     * @hidden\n     */\n    public get esfIconTemplate() {\n        return this.grid.excelStyleHeaderIconTemplate || this.defaultESFHeaderIconTemplate;\n    }\n\n    get ascending() {\n        return this.sortDirection === SortingDirection.Asc;\n    }\n\n    get descending() {\n        return this.sortDirection === SortingDirection.Desc;\n    }\n\n    get sortingIcon(): string {\n        if (this.sortDirection !== SortingDirection.None) {\n            // arrow_downward and arrow_upward\n            // are material icons ligature strings\n            return this.sortDirection === SortingDirection.Asc ? 'arrow_upward' : 'arrow_downward';\n        }\n        return 'arrow_upward';\n    }\n\n    get sorted() {\n        return this.sortDirection !== SortingDirection.None;\n    }\n\n    get filterIconClassName() {\n        return this.column.filteringExpressionsTree ? 'igx-excel-filter__icon--filtered' : 'igx-excel-filter__icon';\n    }\n\n    get selectable() {\n        return this.grid.columnSelection !== GridSelectionMode.none &&\n            this.column.applySelectableClass &&\n            !this.column.selected &&\n            !this.grid.filteringService.isFilterRowVisible;\n    }\n\n    get selected() {\n        return this.column.selected\n            && (!this.grid.filteringService.isFilterRowVisible || this.grid.filteringService.filteredColumn !== this.column);\n    }\n\n    get columnTitle() {\n        return this.column.title || this.column.header || this.column.field;\n    }\n\n    @HostBinding('attr.role')\n    public hostRole = 'columnheader';\n\n    @HostBinding('attr.id')\n    get headerID() {\n        return `${this.gridID}_${this.column.field}`;\n    }\n\n    protected sortDirection = SortingDirection.None;\n\n    constructor(\n        public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public colResizingService: IgxColumnResizingService,\n        public cdr: ChangeDetectorRef,\n        public elementRef: ElementRef,\n        public zone: NgZone\n    ) { }\n\n    public ngDoCheck() {\n        this.getSortDirection();\n        this.cdr.markForCheck();\n    }\n\n    ngOnDestroy(): void {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n        this.grid.filteringService.hideExcelFiltering();\n    }\n\n    @HostListener('click', ['$event'])\n    public onClick(event) {\n        if (!this.colResizingService.isColumnResizing) {\n\n            if (this.grid.filteringService.isFilterRowVisible) {\n                if (this.column.filterCellTemplate) {\n                    this.grid.filteringRow.close();\n                    return;\n                }\n\n                if (this.column.filterable && !this.column.columnGroup &&\n                    !this.grid.filteringService.isFilterComplex(this.column.field)) {\n                    this.grid.filteringService.filteredColumn = this.column;\n                }\n            } else if (this.grid.columnSelection !== GridSelectionMode.none && this.column.selectable) {\n                const clearSelection = this.grid.columnSelection === GridSelectionMode.single || !event.ctrlKey;\n                const rangeSelection = this.grid.columnSelection === GridSelectionMode.multiple && event.shiftKey;\n\n                if (!this.column.selected || (this.grid.selectionService.getSelectedColumns().length > 1 && clearSelection)) {\n                    this.grid.selectionService.selectColumn(this.column.field, clearSelection, rangeSelection, event);\n                } else {\n                    this.grid.selectionService.deselectColumn(this.column.field, event);\n                }\n            }\n        }\n        this.grid.theadRow.nativeElement.focus();\n    }\n\n\n    public onFilteringIconClick(event) {\n        event.stopPropagation();\n        this.grid.filteringService.toggleFilterDropdown(this.elementRef.nativeElement, this.column, IgxGridExcelStyleFilteringComponent);\n    }\n\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    protected getSortDirection() {\n        const expr = this.gridAPI.grid.sortingExpressions.find((x) => x.fieldName === this.column.field);\n        this.sortDirection = expr ? expr.dir : SortingDirection.None;\n    }\n\n    public onSortingIconClick(event) {\n        event.stopPropagation();\n        this.triggerSort();\n    }\n\n    private triggerSort() {\n        const groupingExpr = this.grid.groupingExpressions ?\n            this.grid.groupingExpressions.find((expr) => expr.fieldName === this.column.field) : null;\n        const sortDir = groupingExpr ?\n            this.sortDirection + 1 > SortingDirection.Desc ? SortingDirection.Asc : SortingDirection.Desc\n            : this.sortDirection + 1 > SortingDirection.Desc ? SortingDirection.None : this.sortDirection + 1;\n        this.sortDirection = sortDir;\n        this.grid.sort({\n            fieldName: this.column.field, dir: this.sortDirection, ignoreCase: this.column.sortingIgnoreCase,\n            strategy: this.column.sortStrategy\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('pointerenter')\n    public onPinterEnter() {\n        this.column.applySelectableClass = true;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('pointerleave')\n    public onPointerLeave() {\n        this.column.applySelectableClass = false;\n    }\n}\n","import {\n    ChangeDetectorRef,\n    Component,\n    Input,\n    TemplateRef,\n    ViewChild,\n    HostBinding,\n    AfterViewInit,\n    ElementRef,\n    OnInit,\n    ChangeDetectionStrategy,\n    DoCheck\n} from '@angular/core';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { IBaseChipEventArgs, IgxChipsAreaComponent, IgxChipComponent } from '../../../chips/public_api';\nimport { IgxFilteringService, ExpressionUI } from '../grid-filtering.service';\nimport { DisplayDensity } from '../../../core/displayDensity';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-filtering-cell',\n    templateUrl: './grid-filtering-cell.component.html'\n})\nexport class IgxGridFilteringCellComponent implements AfterViewInit, OnInit, DoCheck {\n\n    private baseClass = 'igx-grid__filtering-cell-indicator';\n\n    public expressionsList: ExpressionUI[];\n    public moreFiltersCount = 0;\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @ViewChild('emptyFilter', { read: TemplateRef, static: true })\n    protected emptyFilter: TemplateRef<any>;\n\n    @ViewChild('defaultFilter', { read: TemplateRef, static: true })\n    protected defaultFilter: TemplateRef<any>;\n\n    @ViewChild('complexFilter', { read: TemplateRef, static: true })\n    protected complexFilter: TemplateRef<any>;\n\n    @ViewChild('chipsArea', { read: IgxChipsAreaComponent })\n    protected chipsArea: IgxChipsAreaComponent;\n\n    @ViewChild('moreIcon', { read: ElementRef })\n    protected moreIcon: ElementRef;\n\n    @ViewChild('ghostChip', { read: IgxChipComponent })\n    protected ghostChip: IgxChipComponent;\n\n    @ViewChild('complexChip', { read: IgxChipComponent })\n    protected complexChip: IgxChipComponent;\n\n\n    @HostBinding('class')\n    get styleClasses(): string {\n        let classes = this.column && this.column.selected ?\n            'igx-grid__filtering-cell--selected' :\n            'igx-grid__filtering-cell';\n\n        switch (this.column.grid.displayDensity) {\n            case DisplayDensity.compact:\n                classes = classes + ' igx-grid__filtering-cell--compact';\n                break;\n            case DisplayDensity.cosy:\n                classes = classes + ' igx-grid__filtering-cell--cosy';\n                break;\n        }\n        return classes;\n    }\n\n    constructor(public cdr: ChangeDetectorRef, public filteringService: IgxFilteringService) {\n        this.filteringService.subscribeToEvents();\n    }\n\n    ngOnInit(): void {\n        this.filteringService.columnToMoreIconHidden.set(this.column.field, true);\n    }\n\n    ngAfterViewInit(): void {\n        this.updateFilterCellArea();\n    }\n\n    public ngDoCheck() {\n        this.updateFilterCellArea();\n    }\n\n    /**\n     * Returns whether a chip with a given index is visible or not.\n     */\n    public isChipVisible(index: number) {\n        const expression = this.expressionsList[index];\n        return !!(expression && expression.isVisible);\n    }\n\n    /**\n     * Updates the filtering cell area.\n     */\n    public updateFilterCellArea() {\n        this.expressionsList = this.filteringService.getExpressions(this.column.field);\n        this.updateVisibleFilters();\n    }\n\n    get displayDensity(): string {\n        return this.column.grid.displayDensity === DisplayDensity.comfortable ? DisplayDensity.cosy : this.column.grid.displayDensity;\n    }\n\n    get template(): TemplateRef<any> {\n        if (!this.column.filterable) {\n            return null;\n        }\n        if (this.column.filterCellTemplate) {\n            return this.column.filterCellTemplate;\n        }\n        const expressionTree = this.column.filteringExpressionsTree;\n        if (!expressionTree || expressionTree.filteringOperands.length === 0) {\n            return this.emptyFilter;\n        }\n        if (this.filteringService.isFilterComplex(this.column.field)) {\n            return this.complexFilter;\n        }\n        return this.defaultFilter;\n    }\n\n    /**\n     * Gets the context passed to the filter template.\n     * @memberof IgxGridFilteringCellComponent\n     */\n    get context() {\n        return { column: this.column };\n    }\n\n    /**\n     * Chip clicked event handler.\n     */\n    public onChipClicked(expression?: IFilteringExpression) {\n        if (expression) {\n            this.expressionsList.forEach((item) => {\n                item.isSelected = (item.expression === expression);\n            });\n        } else if (this.expressionsList.length > 0) {\n            this.expressionsList.forEach((item) => {\n                item.isSelected = false;\n            });\n            this.expressionsList[0].isSelected = true;\n        }\n        this.filteringService.grid.navigation.performHorizontalScrollToCell(this.column.visibleIndex);\n        this.filteringService.filteredColumn = this.column;\n        this.filteringService.isFilterRowVisible = true;\n        this.filteringService.selectedExpression = expression;\n    }\n\n    /**\n     * Chip removed event handler.\n     */\n    public onChipRemoved(eventArgs: IBaseChipEventArgs, item: ExpressionUI): void {\n        const indexToRemove = this.expressionsList.indexOf(item);\n        this.removeExpression(indexToRemove);\n        this.filteringService.grid.theadRow.nativeElement.focus();\n    }\n\n    /**\n     * Clears the filtering.\n     */\n    public clearFiltering(): void {\n        this.filteringService.clearFilter(this.column.field);\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * Returns the filtering indicator class.\n     */\n    public filteringIndicatorClass() {\n        return {\n            [this.baseClass]: !this.isMoreIconHidden(),\n            [`${this.baseClass}--hidden`]: this.isMoreIconHidden()\n        };\n    }\n\n    private removeExpression(indexToRemove: number) {\n        if (indexToRemove === 0 && this.expressionsList.length === 1) {\n            this.clearFiltering();\n            return;\n        }\n\n        this.filteringService.removeExpression(this.column.field, indexToRemove);\n\n        this.updateVisibleFilters();\n        this.filteringService.filterInternal(this.column.field);\n    }\n\n    private isMoreIconHidden(): boolean {\n        return this.filteringService.columnToMoreIconHidden.get(this.column.field);\n    }\n\n    private updateVisibleFilters() {\n        this.expressionsList.forEach((ex) => ex.isVisible = true);\n\n        if (this.moreIcon) {\n            this.filteringService.columnToMoreIconHidden.set(this.column.field, true);\n        }\n        this.cdr.detectChanges();\n\n        if (this.chipsArea && this.expressionsList.length > 1) {\n            const areaWidth = this.chipsArea.element.nativeElement.offsetWidth;\n            let viewWidth = 0;\n            const chipsAreaElements = this.chipsArea.element.nativeElement.children;\n            let visibleChipsCount = 0;\n            const moreIconWidth = this.moreIcon.nativeElement.offsetWidth -\n                parseInt(document.defaultView.getComputedStyle(this.moreIcon.nativeElement)['margin-left'], 10);\n\n            for (let index = 0; index < chipsAreaElements.length - 1; index++) {\n                if (viewWidth + chipsAreaElements[index].offsetWidth < areaWidth) {\n                    viewWidth += chipsAreaElements[index].offsetWidth;\n                    if (index % 2 === 0) {\n                        visibleChipsCount++;\n                    } else {\n                        viewWidth += parseInt(document.defaultView.getComputedStyle(chipsAreaElements[index])['margin-left'], 10);\n                        viewWidth += parseInt(document.defaultView.getComputedStyle(chipsAreaElements[index])['margin-right'], 10);\n                    }\n                } else {\n                    if (index % 2 !== 0 && viewWidth + moreIconWidth > areaWidth) {\n                        visibleChipsCount--;\n                    } else if (visibleChipsCount > 0 && viewWidth - chipsAreaElements[index - 1].offsetWidth + moreIconWidth > areaWidth) {\n                        visibleChipsCount--;\n                    }\n                    this.moreFiltersCount = this.expressionsList.length - visibleChipsCount;\n                    this.filteringService.columnToMoreIconHidden.set(this.column.field, false);\n                    break;\n                }\n            }\n\n            for (let i = visibleChipsCount; i < this.expressionsList.length; i++) {\n                this.expressionsList[i].isVisible = false;\n            }\n            this.cdr.detectChanges();\n        }\n    }\n}\n","import {\n    Component,\n    HostBinding,\n    Input,\n    ViewChild,\n    QueryList,\n    ViewChildren,\n    forwardRef,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    DoCheck,\n    ElementRef,\n    HostListener\n} from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { IgxGridHeaderComponent } from './grid-header.component';\nimport { IgxGridFilteringCellComponent } from '../filtering/base/grid-filtering-cell.component';\nimport { isIE } from '../../core/utils';\nimport { GridType } from '../common/grid.interface';\nimport { GridSelectionMode } from '../common/enums';\n\nconst Z_INDEX = 9999;\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-header-group',\n    templateUrl: './grid-header-group.component.html'\n})\nexport class IgxGridHeaderGroupComponent implements DoCheck {\n\n    @HostBinding('style.-ms-grid-row-span')\n    get gridRowSpan(): number {\n        return this.column.gridRowSpan;\n    }\n\n    @HostBinding('style.-ms-grid-column-span')\n    get gridColumnSpan(): number {\n        return this.column.gridColumnSpan;\n    }\n\n\n    @HostBinding('style.grid-row-end')\n    get rowEnd(): number {\n        return this.column.rowEnd;\n    }\n\n    @HostBinding('style.grid-column-end')\n    get colEnd(): number {\n        return this.column.colEnd;\n    }\n\n    @HostBinding('style.-ms-grid-row')\n    @HostBinding('style.grid-row-start')\n    get rowStart(): number {\n        return this.column.rowStart;\n    }\n\n    @HostBinding('style.-ms-grid-column')\n    @HostBinding('style.grid-column-start')\n    get colStart(): number {\n        return this.column.colStart;\n    }\n\n    /**\n     * Gets the column of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    @Input()\n    public column: IgxColumnComponent;\n\n    /**\n     * Gets the `id` of the grid in which the header group is stored.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    @Input()\n    public gridID: string;\n\n    @HostBinding('class.igx-grid__th--active')\n    public get active() {\n        const node = this.grid.navigation.activeNode;\n        return  node && !this.column.columnGroup ?\n            node.row === -1 && node.column === this.column.visibleIndex && node.level === this.column.level : false;\n    }\n\n    public get activeGroup() {\n        const node = this.grid.navigation.activeNode;\n        return  node ? node.row === -1 && node.column === this.column.visibleIndex && node.level === this.column.level : false;\n    }\n\n    /**\n     * @hidden\n     */\n    @ViewChild(IgxGridHeaderComponent)\n    public headerCell: IgxGridHeaderComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChild(IgxGridFilteringCellComponent)\n    public filterCell: IgxGridFilteringCellComponent;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(forwardRef(() => IgxGridHeaderGroupComponent), { read: IgxGridHeaderGroupComponent })\n    public children: QueryList<IgxGridHeaderGroupComponent>;\n\n    /**\n     * Gets the width of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get width() {\n        return this.grid.getHeaderGroupWidth(this.column);\n    }\n\n    /**\n     * Gets the style classes of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    @HostBinding('class')\n    get styleClasses(): string {\n        const defaultClasses = [\n            'igx-grid__thead-item',\n            this.column.headerGroupClasses\n        ];\n\n        const classList = {\n            'igx-grid__th--pinned': this.isPinned,\n            'igx-grid__th--pinned-last': this.isLastPinned,\n            'igx-grid__th--pinned-first': this.isFirstPinned,\n            'igx-grid__drag-col-header': this.isHeaderDragged,\n            'igx-grid__th--filtering': this.isFiltered\n        };\n\n        for (const className of Object.keys(classList)) {\n            if (classList[className]) {\n                defaultClasses.push(className);\n            }\n        }\n        return defaultClasses.join(' ');\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.z-index')\n    get zIndex() {\n        if (!this.column.pinned) {\n            return null;\n        }\n        return Z_INDEX - this.grid.pinnedColumns.indexOf(this.column);\n    }\n\n    /**\n     * Gets the grid of the header group.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get grid(): any {\n        return this.gridAPI.grid;\n    }\n\n    /**\n     * Gets whether the header group belongs to a column that is filtered.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isFiltered(): boolean {\n        return this.filteringService.filteredColumn === this.column;\n    }\n\n    /**\n     * Gets whether the header group is stored in the last column in the pinned area.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isLastPinned(): boolean {\n        return !this.grid.hasColumnLayouts ? this.column.isLastPinned : false;\n    }\n\n    /**\n     * Gets whether the header group is stored in the first column of the right pinned area.\n     */\n    get isFirstPinned(): boolean {\n        return !this.grid.hasColumnLayouts ? this.column.isFirstPinned : false;\n    }\n\n    @HostBinding('style.display')\n    get groupDisplayStyle(): string {\n        return this.grid.hasColumnLayouts && this.column.children && !isIE() ? 'flex' : '';\n    }\n\n    /**\n     * Gets whether the header group is stored in a pinned column.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isPinned(): boolean {\n        return this.column.pinned;\n    }\n\n    /**\n     * Gets whether the header group belongs to a column that is moved.\n     * @memberof IgxGridHeaderGroupComponent\n     */\n    get isHeaderDragged(): boolean {\n        return this.grid.draggedColumn === this.column;\n    }\n\n    /**\n     * @hidden\n     */\n    get hasLastPinnedChildColumn(): boolean {\n        return this.column.allChildren.some(child => child.isLastPinned);\n    }\n\n    /**\n     * @hidden\n     */\n    get hasFirstPinnedChildColumn(): boolean {\n        return this.column.allChildren.some(child => child.isFirstPinned);\n    }\n\n    /**\n     * @hidden\n     */\n    get selectable() {\n        const selectableChildren = this.column.allChildren.filter(c => !c.hidden && c.selectable && !c.columnGroup);\n        return this.grid.columnSelection !== GridSelectionMode.none &&\n            this.column.applySelectableClass\n            && !this.selected && selectableChildren.length > 0\n            && !this.grid.filteringService.isFilterRowVisible;\n    }\n\n    /**\n     * @hidden\n     */\n    get selected() {\n        return this.column.selected;\n    }\n\n    /**\n     * @hidden\n     */\n    get height() {\n        return this.element.nativeElement.getBoundingClientRect().height;\n    }\n\n    /**\n     * @hidden\n     */\n    get columnTitle() {\n        return this.column.title || this.column.header;\n    }\n\n    /**\n     * @hidden\n     */\n    public groupClicked(event): void {\n        const columnsToSelect = this.column.allChildren.filter(c => !c.hidden && c.selectable && !c.columnGroup).map(c => c.field);\n        if (this.grid.columnSelection !== GridSelectionMode.none\n            && columnsToSelect.length > 0 && !this.grid.filteringService.isFilterRowVisible) {\n            const clearSelection = this.grid.columnSelection === GridSelectionMode.single || !event.ctrlKey;\n            const rangeSelection = this.grid.columnSelection === GridSelectionMode.multiple && event.shiftKey;\n            if (!this.selected) {\n                this.grid.selectionService.selectColumns(columnsToSelect, clearSelection, rangeSelection, event);\n            } else {\n                const selectedFields = this.grid.selectionService.getSelectedColumns();\n                if ((selectedFields.length === columnsToSelect.length) && selectedFields.every(el => columnsToSelect.includes(el))\n                    || !clearSelection) {\n                    this.grid.selectionService.deselectColumns(columnsToSelect, event);\n                } else {\n                    this.grid.selectionService.selectColumns(columnsToSelect, clearSelection, rangeSelection, event);\n                }\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public toggleExpandState(event): void {\n        event.stopPropagation();\n        this.column.expanded = !this.column.expanded;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mousedown', ['$event'])\n    public onMouseDown(event): void {\n        // hack for preventing text selection in IE and Edge while dragging the resizer\n        event.preventDefault();\n    }\n\n    /**\n     * @hidden\n     */\n    // @HostListener('pointerdown', ['$event'])\n    public pointerdown(event): void {\n        event.stopPropagation();\n        this.activate();\n        this.grid.theadRow.nativeElement.focus();\n    }\n\n    /*\n     * This method is necessary due to some specifics related with implementation of column moving\n     * @hidden\n     */\n    public activate() {\n        this.grid.navigation.setActiveNode(this.activeNode);\n        this.grid.theadRow.nativeElement.focus();\n    }\n\n    public ngDoCheck() {\n        this.cdr.markForCheck();\n    }\n    /**\n     * @hidden\n     */\n    public onPinterEnter() {\n        this.column.applySelectableClass = true;\n    }\n\n    /**\n     * @hidden\n     */\n    public onPointerLeave() {\n        this.column.applySelectableClass = false;\n    }\n\n    private get activeNode() {\n        return {row: -1, column: this.column.visibleIndex, level: this.column.level,\n            mchCache: {level: this.column.level, visibleIndex: this.column.visibleIndex},\n            layout: this.column.columnLayoutChild ? {\n            rowStart: this.column.rowStart,\n            colStart: this.column.colStart,\n            rowEnd: this.column.rowEnd,\n            colEnd: this.column.colEnd,\n            columnVisibleIndex: this.column.visibleIndex} : null };\n    }\n\n    constructor(private cdr: ChangeDetectorRef,\n        public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public element: ElementRef,\n        public colResizingService: IgxColumnResizingService,\n        public filteringService: IgxFilteringService) { }\n}\n","import { Injectable} from '@angular/core';\nimport { IgxSummaryResult } from './grid-summary';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneArray, resolveNestedPath } from '../../core/utils';\nimport { GridType, FlatGridType, TreeGridType } from '../common/grid.interface';\n\n/** @hidden */\n@Injectable()\nexport class IgxGridSummaryService {\n    protected summaryCacheMap: Map<string, Map<string, any[]>> = new Map<string, Map<string, IgxSummaryResult[]>>();\n    public grid: GridType;\n    public rootSummaryID = 'igxGridRootSummary';\n    public summaryHeight = 0;\n    public maxSummariesLenght = 0;\n    public groupingExpressions = [];\n    public retriggerRootPipe = 0;\n    public deleteOperation = false;\n\n    public recalculateSummaries() {\n        this.resetSummaryHeight();\n        this.grid.notifyChanges(true);\n    }\n\n    public clearSummaryCache(args?) {\n        if (!this.summaryCacheMap.size) { return; }\n        if (!args) {\n            this.summaryCacheMap.clear();\n            if (this.grid && this.grid.rootSummariesEnabled) {\n                this.retriggerRootPipe++;\n            }\n            return;\n        }\n        if (args.data) {\n            const rowID = this.grid.primaryKey ? args.data[this.grid.primaryKey] : args.data;\n            this.removeSummaries(rowID);\n        }\n        if (args.rowID !== undefined && args.rowID !== null) {\n            let columnName = args.cellID ? this.grid.columnList.find(col => col.index === args.cellID.columnID).field : undefined;\n            if (columnName && this.grid.rowEditable) { return; }\n\n            const isGroupedColumn = (this.grid as FlatGridType).groupingExpressions &&\n            (this.grid as FlatGridType).groupingExpressions.map(expr => expr.fieldName).indexOf(columnName) !== -1;\n            if (columnName && isGroupedColumn ) {\n                columnName = undefined;\n            }\n            this.removeSummaries(args.rowID, columnName);\n        }\n    }\n\n    public removeSummaries(rowID, columnName?) {\n        this.deleteSummaryCache(this.rootSummaryID, columnName);\n        if (this.summaryCacheMap.size === 1 && this.summaryCacheMap.has(this.rootSummaryID)) { return; }\n        if (this.isTreeGrid) {\n            if (this.grid.transactions.enabled && this.deleteOperation) {\n                this.deleteOperation = false;\n                // TODO: this.removeChildRowSummaries(rowID, columnName);\n                this.summaryCacheMap.clear();\n                return;\n            }\n            this.removeAllTreeGridSummaries(rowID, columnName);\n        } else if (this.isHierarchicalGrid) {\n            if (this.grid.transactions.enabled && this.deleteOperation) {\n                this.deleteOperation = false;\n                this.summaryCacheMap.clear();\n            }\n        } else {\n           const summaryIds = this.getSummaryID(rowID, (this.grid as FlatGridType).groupingExpressions);\n           summaryIds.forEach(id => {\n               this.deleteSummaryCache(id, columnName);\n           });\n        }\n    }\n\n    public removeSummariesCachePerColumn(columnName) {\n        this.summaryCacheMap.forEach((cache) => {\n            if (cache.get(columnName)) {\n                cache.delete(columnName);\n            }\n        });\n        if (this.grid.rootSummariesEnabled) {  this.retriggerRootPipe++; }\n    }\n\n    public calcMaxSummaryHeight() {\n        if (this.summaryHeight) {\n            return this.summaryHeight;\n        }\n        if (!this.grid.data) {return this.summaryHeight = 0; }\n        let maxSummaryLength = 0;\n        this.grid.columnList.filter((col) => col.hasSummary && !col.hidden).forEach((column) => {\n            const getCurrentSummaryColumn = column.summaries.operate([], [], column.field).length;\n            if (getCurrentSummaryColumn) {\n                if (maxSummaryLength < getCurrentSummaryColumn) {\n                    maxSummaryLength = getCurrentSummaryColumn;\n                }\n            }\n        });\n        this.maxSummariesLenght = maxSummaryLength;\n        this.summaryHeight =  maxSummaryLength * this.grid.defaultSummaryHeight;\n        return this.summaryHeight;\n    }\n\n    public calculateSummaries(rowID, data) {\n        let rowSummaries = this.summaryCacheMap.get(rowID);\n        if (!rowSummaries) {\n            rowSummaries = new Map<string, IgxSummaryResult[]>();\n            this.summaryCacheMap.set(rowID, rowSummaries);\n        }\n        if (!this.hasSummarizedColumns || !data) {return rowSummaries; }\n        this.grid.columnList.filter(col => col.hasSummary).forEach((column) => {\n            if (!rowSummaries.get(column.field)) {\n                const summaryResult = column.summaries.operate(data.map(r => resolveNestedPath(r, column.field)),\n                    data, column.field, this.grid.locale, column.pipeArgs);\n                rowSummaries.set(column.field, summaryResult);\n            }\n        });\n        return rowSummaries;\n    }\n\n    public resetSummaryHeight() {\n        this.summaryHeight = 0;\n        (this.grid as any)._summaryPipeTrigger++;\n        if (this.grid.rootSummariesEnabled) {\n            this.retriggerRootPipe++;\n        }\n    }\n\n    public updateSummaryCache(groupingArgs) {\n        if (this.summaryCacheMap.size === 0 || !this.hasSummarizedColumns) { return; }\n        if (this.groupingExpressions.length === 0) {\n            this.groupingExpressions = groupingArgs.expressions.map(record => record.fieldName);\n            return;\n        }\n        if (groupingArgs.length === 0) {\n            this.groupingExpressions = [];\n            this.clearSummaryCache();\n            return;\n        }\n        this.compareGroupingExpressions(this.groupingExpressions, groupingArgs);\n        this.groupingExpressions = groupingArgs.expressions.map(record => record.fieldName);\n    }\n\n    public get hasSummarizedColumns(): boolean {\n        const summarizedColumns = this.grid.columnList.filter(col => col.hasSummary && !col.hidden);\n        return summarizedColumns.length > 0;\n    }\n\n    private deleteSummaryCache(id, columnName) {\n        if (this.summaryCacheMap.get(id)) {\n            const filteringApplied = columnName && this.grid.filteringExpressionsTree &&\n                    this.grid.filteringExpressionsTree.filteringOperands.map((expr) => expr.fieldName).indexOf(columnName) !== -1;\n            if (columnName && this.summaryCacheMap.get(id).get(columnName) && !filteringApplied) {\n                this.summaryCacheMap.get(id).delete(columnName);\n            } else {\n                this.summaryCacheMap.delete(id);\n            }\n            if (id === this.rootSummaryID && this.grid.rootSummariesEnabled) {\n                this.retriggerRootPipe++;\n            }\n        }\n    }\n\n    private getSummaryID(rowID, groupingExpressions) {\n        if (groupingExpressions.length === 0) { return []; }\n        const summaryIDs = [];\n        let data = this.grid.data;\n        if (this.grid.transactions.enabled) {\n            data = DataUtil.mergeTransactions(\n                cloneArray(this.grid.data),\n                this.grid.transactions.getAggregatedChanges(true),\n                this.grid.primaryKey\n            );\n        }\n        const rowData = this.grid.primaryKey ? data.find(rec => rec[this.grid.primaryKey] === rowID) : rowID;\n        let id = '{ ';\n        groupingExpressions.forEach(expr => {\n            id += `'${expr.fieldName}': '${rowData[expr.fieldName]}'`;\n                summaryIDs.push(id.concat(' }'));\n                id += ', ';\n        });\n        return summaryIDs;\n    }\n\n    private removeAllTreeGridSummaries(rowID, columnName?) {\n        let row = (this.grid as TreeGridType).records.get(rowID);\n        if (!row) { return; }\n        row = row.children ? row : row.parent;\n        while (row) {\n            rowID = row.rowID;\n            this.deleteSummaryCache(rowID, columnName);\n            row = row.parent;\n        }\n    }\n\n    // TODO: remove only deleted rows\n    private removeChildRowSummaries(rowID, columnName?) {\n    }\n\n    private compareGroupingExpressions(current, groupingArgs) {\n        const newExpressions = groupingArgs.expressions.map(record => record.fieldName);\n        const removedCols = groupingArgs.ungroupedColumns;\n        if (current.length <= newExpressions.length) {\n            const newExpr = newExpressions.slice(0, current.length).toString();\n            if (current.toString() !== newExpr) {\n                this.clearSummaryCache();\n            }\n        } else {\n            const currExpr = current.slice(0, newExpressions.length).toString();\n            if (currExpr !== newExpressions.toString()) {\n                this.clearSummaryCache();\n                return;\n            }\n            removedCols.map(col => col.field).forEach(colName => {\n                this.summaryCacheMap.forEach((cache, id) => {\n                   if (id.indexOf(colName) !== -1) {\n                       this.summaryCacheMap.delete(id);\n                   }});\n            });\n        }\n    }\n\n    private get isTreeGrid() {\n        return this.grid.nativeElement.tagName.toLowerCase() === 'igx-tree-grid';\n    }\n\n    private get isHierarchicalGrid() {\n        return this.grid.nativeElement.tagName.toLowerCase() === 'igx-hierarchical-grid';\n    }\n\n}\n","import { Component, Input, HostBinding, HostListener, ChangeDetectionStrategy, ElementRef } from '@angular/core';\nimport { IgxSummaryResult } from './grid-summary';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { DataType } from '../../data-operations/data-util';\nimport { ISelectionNode } from '../selection/selection.service';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-summary-cell',\n    templateUrl: './summary-cell.component.html'\n})\nexport class IgxSummaryCellComponent {\n\n    @Input()\n    public summaryResults: IgxSummaryResult[];\n\n    @Input()\n    public column: IgxColumnComponent;\n\n    @Input()\n    public firstCellIndentation = 0;\n\n    @Input()\n    public hasSummary = false;\n\n    @Input()\n    public density;\n\n    constructor(private element: ElementRef) {\n    }\n\n    /** @hidden */\n    @Input()\n    @HostBinding('class.igx-grid-summary--active')\n    public active: boolean;\n\n    @Input()\n    @HostBinding('attr.data-rowIndex')\n    public rowIndex: number;\n\n    @HostBinding('attr.data-visibleIndex')\n    get visibleColumnIndex(): number {\n        return this.column.visibleIndex;\n    }\n\n    @HostBinding('attr.id')\n    public get attrCellID() {\n        return `${this.grid.id}_${this.rowIndex}_${ this.visibleColumnIndex}`;\n    }\n\n    @HostListener('pointerdown')\n    public activate() {\n        const currNode = this.grid.navigation.activeNode;\n        if (currNode && this.rowIndex === currNode.row && this.visibleColumnIndex === currNode.column) {\n            return;\n        }\n\n        this.grid.navigation.setActiveNode({row: this.rowIndex, column: this.visibleColumnIndex}, 'summaryCell');\n        this.grid.cdr.detectChanges();\n    }\n\n    protected get selectionNode(): ISelectionNode {\n        return {\n            row: this.rowIndex,\n            column: this.column.columnLayoutChild ? this.column.parent.visibleIndex : this.visibleColumnIndex,\n            isSummaryRow: true\n        };\n    }\n\n    get width() {\n        return this.column.getCellWidth();\n    }\n\n    get nativeElement(): any {\n        return this.element.nativeElement;\n    }\n\n    get columnDatatype(): DataType {\n        return this.column.dataType;\n    }\n\n    get itemHeight() {\n        return this.column.grid.defaultSummaryHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    public get grid() {\n        return (this.column.grid as any);\n    }\n\n    public translateSummary(summary: IgxSummaryResult): string {\n        return this.grid.resourceStrings[`igx_grid_summary_${summary.key}`] || summary.label;\n    }\n}\n","import { Directive, Input, Output, EventEmitter, ElementRef, OnDestroy, NgZone, OnInit } from '@angular/core';\nimport { interval, Observable, Subscription, Subject } from 'rxjs';\nimport { filter, takeUntil } from 'rxjs/operators';\n\nexport enum DragScrollDirection {\n    NONE,\n    LEFT,\n    TOP,\n    RIGHT,\n    BOTTOM,\n    TOPLEFT,\n    TOPRIGHT,\n    BOTTOMLEFT,\n    BOTTOMRIGHT\n}\n\n\n@Directive({\n    selector: '[igxGridDragSelect]'\n})\nexport class IgxGridDragSelectDirective implements OnInit, OnDestroy {\n    _activeDrag: boolean;\n\n    @Input('igxGridDragSelect')\n    get activeDrag(): boolean {\n        return this._activeDrag;\n    }\n\n    set activeDrag(val: boolean) {\n        if (val !== this._activeDrag) {\n            this.unsubscribe();\n            this._activeDrag = val;\n        }\n    }\n\n    @Output()\n    onDragStop = new EventEmitter<boolean>();\n\n    @Output()\n    onDragScroll = new EventEmitter<DragScrollDirection>();\n\n    get nativeElement(): HTMLElement {\n        return this.ref.nativeElement;\n    }\n\n    get clientRect(): ClientRect {\n        return this.nativeElement.getBoundingClientRect();\n    }\n\n    protected end$ = new Subject<any>();\n    protected lastDirection = DragScrollDirection.NONE;\n    protected _interval$: Observable<any>;\n    protected _sub: Subscription;\n\n    constructor(private ref: ElementRef, private zone: NgZone) {\n        this._interval$ = interval(100).pipe(\n            takeUntil(this.end$),\n            filter(() => this.activeDrag)\n        );\n    }\n\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.addEventListener('pointerover', this.startDragSelection);\n            this.nativeElement.addEventListener('pointerleave', this.stopDragSelection);\n        });\n    }\n\n    ngOnDestroy() {\n        this.zone.runOutsideAngular(() => {\n            this.nativeElement.removeEventListener('pointerover', this.startDragSelection);\n            this.nativeElement.removeEventListener('pointerleave', this.stopDragSelection);\n        });\n        this.unsubscribe();\n        this.end$.complete();\n    }\n\n\n    startDragSelection = (ev: PointerEvent) => {\n        if (!this.activeDrag) {\n            return;\n        }\n        const x = ev.clientX;\n        const y = ev.clientY;\n        const direction = this._measureDimensions(x, y);\n        if (direction === this.lastDirection) {\n            return;\n        }\n        this.unsubscribe();\n        this._sub = this._interval$.subscribe(() => this.onDragScroll.emit(direction));\n        this.lastDirection = direction;\n    }\n\n    stopDragSelection = () => {\n        if (!this.activeDrag) {\n            return;\n        }\n        this.onDragStop.emit(false);\n        this.unsubscribe();\n        this.lastDirection = DragScrollDirection.NONE;\n    }\n\n    _measureDimensions(x: number, y: number): DragScrollDirection {\n        let direction: DragScrollDirection;\n\n        const rect = this.clientRect;\n        const RATIO = 0.15;\n        const offsetX = Math.trunc(x - rect.left);\n        const offsetY = Math.trunc(y - rect.top);\n\n        const left = offsetX <= rect.width * RATIO;\n        const right = offsetX >= rect.width * (1 - RATIO);\n        const top = offsetY <= rect.height * RATIO;\n        const bottom = offsetY >= rect.height * (1 - RATIO);\n\n        if (top && left) {\n            direction = DragScrollDirection.TOPLEFT;\n        } else if (top && right) {\n            direction = DragScrollDirection.TOPRIGHT;\n        } else if (bottom && left) {\n            direction = DragScrollDirection.BOTTOMLEFT;\n        } else if (bottom && right) {\n            direction = DragScrollDirection.BOTTOMRIGHT;\n        } else if (top) {\n            direction = DragScrollDirection.TOP;\n        } else if (bottom) {\n            direction = DragScrollDirection.BOTTOM;\n        } else if (left) {\n            direction = DragScrollDirection.LEFT;\n        } else if (right) {\n            direction = DragScrollDirection.RIGHT;\n        } else {\n            direction = DragScrollDirection.NONE;\n        }\n\n        return direction;\n\n    }\n\n    protected unsubscribe() {\n        if (this._sub) {\n            this._sub.unsubscribe();\n        }\n    }\n}\n","import {\n    Component,\n    Input,\n    ViewChildren,\n    QueryList,\n    HostBinding,\n    ViewChild,\n    ElementRef,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    DoCheck\n} from '@angular/core';\nimport { IgxSummaryResult } from './grid-summary';\nimport { IgxSummaryCellComponent } from './summary-cell.component';\nimport { IgxGridForOfDirective } from '../../directives/for-of/for_of.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxForOfSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { GridType } from '../common/grid.interface';\n\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-summary-row',\n    templateUrl: './summary-row.component.html',\n    providers: [IgxForOfSyncService]\n})\nexport class IgxSummaryRowComponent implements DoCheck  {\n\n    @Input()\n    public summaries: Map<string, IgxSummaryResult[]>;\n\n    @Input()\n    public gridID;\n\n    @Input()\n    public index: number;\n\n    @Input()\n    public firstCellIndentation = -1;\n\n    @HostBinding('attr.data-rowIndex')\n    get dataRowIndex() {\n        return this.index;\n    }\n\n    get minHeight() {\n        return this.grid.summaryService.calcMaxSummaryHeight() - 1;\n    }\n\n    @ViewChildren(IgxSummaryCellComponent, { read: IgxSummaryCellComponent })\n    public _summaryCells: QueryList<IgxSummaryCellComponent>;\n\n    public get summaryCells(): QueryList<IgxSummaryCellComponent> {\n        const res = new QueryList<IgxSummaryCellComponent>();\n        if (!this._summaryCells) { return res; }\n        const cList = this._summaryCells.filter(c => c.nativeElement.isConnected);\n        res.reset(cList);\n        return res;\n    }\n    public set summaryCells(cells) { }\n\n    /**\n     * @hidden\n     */\n    @ViewChild('igxDirRef', { read: IgxGridForOfDirective })\n    public virtDirRow: IgxGridForOfDirective<any>;\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n                public element: ElementRef,\n                public cdr: ChangeDetectorRef) {}\n\n    public ngDoCheck() {\n        this.cdr.markForCheck();\n    }\n\n    public get grid() {\n        return this.gridAPI.grid;\n    }\n\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    public getColumnSummaries(columnName) {\n        if (!this.summaries.get(columnName)) {\n            return [];\n        }\n        return this.summaries.get(columnName);\n\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public isCellActive(visibleColumnIndex) {\n        const node = this.grid.navigation.activeNode;\n        return node ? node.row === this.index && node.column === visibleColumnIndex : false;\n    }\n\n    /**\n     * @hidden\n     */\n    public get pinnedColumns(): IgxColumnComponent[] {\n        return this.grid.pinnedColumns;\n    }\n\n    /**\n     * @hidden\n     */\n    public get unpinnedColumns(): IgxColumnComponent[] {\n        return this.grid.unpinnedColumns;\n    }\n\n    getContext(row) {\n        return {\n            $implicit: row\n        };\n    }\n}\n","import {\n    Directive, EmbeddedViewRef, Input, OnChanges, ChangeDetectorRef,\n    SimpleChange, SimpleChanges, TemplateRef, ViewContainerRef, NgModule, NgZone, Output, EventEmitter\n} from '@angular/core';\n\nimport { CommonModule } from '@angular/common';\nimport { IBaseEventArgs } from '../../core/utils';\n\n/**\n * @hidden\n */\n@Directive({ selector: '[igxTemplateOutlet]' })\nexport class IgxTemplateOutletDirective implements OnChanges {\n    private _viewRef !: EmbeddedViewRef<any>;\n\n    /**\n     * The embedded views cache. Collection is key-value paired.\n     * Key is the template id, value is the embedded view for the related template.\n     */\n    private _embeddedViewsMap: Map<string, EmbeddedViewRef<any>> = new Map();\n\n    @Input() public igxTemplateOutletContext !: Object;\n\n    @Input() public igxTemplateOutlet !: TemplateRef<any>;\n\n    @Output()\n    public onViewCreated = new EventEmitter<IViewChangeEventArgs>();\n\n    @Output()\n    public onViewMoved = new EventEmitter<IViewChangeEventArgs>();\n\n    @Output()\n    public onCachedViewLoaded = new EventEmitter<ICachedViewLoadedEventArgs>();\n\n    @Output()\n    public onBeforeViewDetach = new EventEmitter<IViewChangeEventArgs>();\n\n    constructor(public _viewContainerRef: ViewContainerRef, private _zone: NgZone, public cdr: ChangeDetectorRef) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const actionType: TemplateOutletAction = this._getActionType(changes);\n        switch (actionType) {\n            case TemplateOutletAction.CreateView: this._recreateView(); break;\n            case TemplateOutletAction.MoveView: this._moveView(); break;\n            case TemplateOutletAction.UseCachedView: this._useCachedView(); break;\n            case TemplateOutletAction.UpdateViewContext: this._updateExistingContext(this.igxTemplateOutletContext); break;\n        }\n    }\n\n    public cleanCache() {\n        this._embeddedViewsMap.forEach((item) => {\n            if (!item.destroyed) {\n                item.destroy();\n            }\n        });\n        this._embeddedViewsMap.clear();\n    }\n\n    public cleanView(tmplID) {\n        const embView = this._embeddedViewsMap.get(tmplID);\n        if (embView) {\n            embView.destroy();\n            this._embeddedViewsMap.delete(tmplID);\n        }\n    }\n\n    private _recreateView() {\n        const prevIndex = this._viewRef ? this._viewContainerRef.indexOf(this._viewRef) : -1;\n        // detach old and create new\n        if (prevIndex !== -1) {\n            this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n            this._viewContainerRef.detach(prevIndex);\n        }\n        if (this.igxTemplateOutlet) {\n            this._viewRef = this._viewContainerRef.createEmbeddedView(\n                this.igxTemplateOutlet, this.igxTemplateOutletContext);\n            this.onViewCreated.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n            const tmplId = this.igxTemplateOutletContext['templateID'];\n            if (tmplId) {\n                // if context contains a template id, check if we have a view for that template already stored in the cache\n                // if not create a copy and add it to the cache in detached state.\n                // Note: Views in detached state do not appear in the DOM, however they remain stored in memory.\n                const res = this._embeddedViewsMap.get(this.igxTemplateOutletContext['templateID']);\n                if (!res) {\n                    this._embeddedViewsMap.set(this.igxTemplateOutletContext['templateID'], this._viewRef);\n                }\n            }\n        }\n    }\n\n    private _moveView() {\n        // using external view and inserting it in current view.\n        const view = this.igxTemplateOutletContext['moveView'];\n        const owner = this.igxTemplateOutletContext['owner'];\n        if (view !== this._viewRef) {\n            if (owner._viewContainerRef.indexOf(view) !== -1) {\n                // detach in case view it is attached somewhere else at the moment.\n                this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n                owner._viewContainerRef.detach(owner._viewContainerRef.indexOf(view));\n            }\n            if (this._viewRef && this._viewContainerRef.indexOf(this._viewRef) !== -1) {\n                this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n                this._viewContainerRef.detach(this._viewContainerRef.indexOf(this._viewRef));\n            }\n            this._viewRef = view;\n            this._viewContainerRef.insert(view, 0);\n            this._updateExistingContext(this.igxTemplateOutletContext);\n            this.onViewMoved.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n        } else {\n            this._updateExistingContext(this.igxTemplateOutletContext);\n        }\n    }\n    private _useCachedView() {\n        // use view for specific template cached in the current template outlet\n        const tmplID = this.igxTemplateOutletContext['templateID'];\n        const cachedView = tmplID ?\n            this._embeddedViewsMap.get(tmplID) :\n            null;\n        // if view exists, but template has been changed and there is a view in the cache with the related template\n        // then detach old view and insert the stored one with the matching template\n        // after that update its context.\n        if (this._viewContainerRef.length > 0) {\n            this.onBeforeViewDetach.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext });\n            this._viewContainerRef.detach(this._viewContainerRef.indexOf(this._viewRef));\n        }\n\n        this._viewRef = cachedView;\n        const oldContext = this._cloneContext(cachedView.context);\n        this._viewContainerRef.insert(this._viewRef, 0);\n        this._updateExistingContext(this.igxTemplateOutletContext);\n        this.onCachedViewLoaded.emit({ owner: this, view: this._viewRef, context: this.igxTemplateOutletContext, oldContext });\n    }\n\n    private _shouldRecreateView(changes: SimpleChanges): boolean {\n        const ctxChange = changes['igxTemplateOutletContext'];\n        return !!changes['igxTemplateOutlet'] || (ctxChange && this._hasContextShapeChanged(ctxChange));\n    }\n\n    private _hasContextShapeChanged(ctxChange: SimpleChange): boolean {\n        const prevCtxKeys = Object.keys(ctxChange.previousValue || {});\n        const currCtxKeys = Object.keys(ctxChange.currentValue || {});\n\n        if (prevCtxKeys.length === currCtxKeys.length) {\n            for (const propName of currCtxKeys) {\n                if (prevCtxKeys.indexOf(propName) === -1) {\n                    return true;\n                }\n            }\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    private _updateExistingContext(ctx: Object): void {\n        for (const propName of Object.keys(ctx)) {\n            (<any>this._viewRef.context)[propName] = (<any>this.igxTemplateOutletContext)[propName];\n        }\n    }\n\n    private _cloneContext(ctx: any): any {\n        const clone = {};\n        for (const propName of Object.keys(ctx)) {\n            clone[propName] = ctx[propName];\n        }\n        return clone;\n    }\n\n    private _getActionType(changes: SimpleChanges) {\n        const movedView = this.igxTemplateOutletContext['moveView'];\n        const tmplID = this.igxTemplateOutletContext['templateID'];\n        const cachedView = tmplID ?\n            this._embeddedViewsMap.get(tmplID) :\n            null;\n        const shouldRecreate = this._shouldRecreateView(changes);\n        if (movedView) {\n            // view is moved from external source\n            return TemplateOutletAction.MoveView;\n        } else if (shouldRecreate && cachedView) {\n            // should recreate (template or context change) and there is a matching template in cache\n            return TemplateOutletAction.UseCachedView;\n        } else if (!this._viewRef || shouldRecreate) {\n            // no view or should recreate\n            return TemplateOutletAction.CreateView;\n        } else if (this.igxTemplateOutletContext) {\n            // has context, update context\n            return TemplateOutletAction.UpdateViewContext;\n        }\n    }\n}\nenum TemplateOutletAction {\n    CreateView,\n    MoveView,\n    UseCachedView,\n    UpdateViewContext\n}\n\nexport interface IViewChangeEventArgs extends IBaseEventArgs {\n    owner: IgxTemplateOutletDirective;\n    view: EmbeddedViewRef<any>;\n    context: any;\n}\n\nexport interface ICachedViewLoadedEventArgs extends IViewChangeEventArgs {\n    oldContext: any;\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTemplateOutletDirective],\n    entryComponents: [],\n    exports: [IgxTemplateOutletDirective],\n    imports: [CommonModule]\n})\n\nexport class IgxTemplateOutletModule {\n}\n","import {\n    Directive,\n    ElementRef,\n    Inject,\n    Input,\n    NgZone,\n    Output,\n    OnInit,\n    OnDestroy,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Subject, fromEvent, animationFrameScheduler, interval } from 'rxjs';\nimport { map, switchMap, takeUntil, throttle } from 'rxjs/operators';\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxResizer]'\n})\nexport class IgxColumnResizerDirective implements OnInit, OnDestroy {\n\n    @Input()\n    public restrictHResizeMin: number = Number.MIN_SAFE_INTEGER;\n\n    @Input()\n    public restrictHResizeMax: number = Number.MAX_SAFE_INTEGER;\n\n    @Output()\n    public resizeEnd = new Subject<any>();\n\n    @Output()\n    public resizeStart = new Subject<any>();\n\n    @Output()\n    public resize = new Subject<any>();\n\n    private _left;\n    private _destroy = new Subject<boolean>();\n\n    constructor(public element: ElementRef, @Inject(DOCUMENT) public document, public zone: NgZone) {\n\n        this.resizeStart.pipe(\n            map((event) => event.clientX),\n            takeUntil(this._destroy),\n            switchMap((offset) => this.resize.pipe(\n                map((event) => event.clientX - offset),\n                takeUntil(this.resizeEnd),\n                takeUntil(this._destroy)\n            ))\n        ).subscribe((pos) => {\n\n            const left = this._left + pos;\n\n            const min = this._left - this.restrictHResizeMin;\n            const max = this._left + this.restrictHResizeMax;\n\n            this.left = left < min ? min : left;\n\n            if (left > max) {\n                this.left = max;\n            }\n        });\n\n    }\n\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            fromEvent(this.document.defaultView, 'mousemove').pipe(\n                throttle(() => interval(0, animationFrameScheduler)),\n                takeUntil(this._destroy)\n            ).subscribe((res) => this.onMousemove(res));\n\n            fromEvent(this.document.defaultView, 'mouseup').pipe(takeUntil(this._destroy))\n                .subscribe((res) => this.onMouseup(res));\n        });\n    }\n\n    ngOnDestroy() {\n        this._destroy.next(true);\n        this._destroy.complete();\n    }\n\n    public set left(val) {\n        requestAnimationFrame(() => this.element.nativeElement.style.left = val + 'px');\n    }\n\n    public set top(val) {\n        requestAnimationFrame(() => this.element.nativeElement.style.top = val + 'px');\n    }\n\n    onMouseup(event) {\n        this.resizeEnd.next(event);\n        this.resizeEnd.complete();\n    }\n\n    onMousedown(event) {\n        event.preventDefault();\n        const parent = this.element.nativeElement.parentElement.parentElement;\n\n        this.left = this._left = event.clientX - parent.getBoundingClientRect().left;\n        this.top = event.target.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n\n        this.resizeStart.next(event);\n    }\n\n    onMousemove(event) {\n        event.preventDefault();\n        this.resize.next(event);\n    }\n}\n","import { ChangeDetectionStrategy, Component, ViewChild } from '@angular/core';\nimport { IgxColumnResizingService } from './resizing.service';\nimport { IgxColumnResizerDirective } from './resizer.directive';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-column-resizer',\n    templateUrl: './resizer.component.html'\n})\nexport class IgxGridColumnResizerComponent {\n    constructor(public colResizingService: IgxColumnResizingService) { }\n\n    @ViewChild(IgxColumnResizerDirective, { static: true })\n    public resizer: IgxColumnResizerDirective;\n}\n","import {\n    AfterViewInit,\n    ChangeDetectorRef,\n    Component,\n    Input,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    QueryList,\n    ElementRef,\n    HostBinding,\n    ChangeDetectionStrategy,\n    ViewRef,\n    HostListener\n} from '@angular/core';\nimport { DataType, DataUtil } from '../../../data-operations/data-util';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { IgxDropDownComponent, ISelectionEventArgs } from '../../../drop-down/public_api';\nimport { IFilteringOperation } from '../../../data-operations/filtering-condition';\nimport { FilteringLogic, IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { HorizontalAlignment, VerticalAlignment, OverlaySettings } from '../../../services/overlay/utilities';\nimport { ConnectedPositioningStrategy } from '../../../services/overlay/position/connected-positioning-strategy';\nimport { IBaseChipEventArgs, IgxChipsAreaComponent, IgxChipComponent } from '../../../chips/public_api';\nimport { ExpressionUI } from '../grid-filtering.service';\nimport { IgxDropDownItemComponent } from '../../../drop-down/drop-down-item.component';\nimport { IgxFilteringService } from '../grid-filtering.service';\nimport { KEYS, isEdge, isIE } from '../../../core/utils';\nimport { AbsoluteScrollStrategy } from '../../../services/overlay/scroll';\nimport { DisplayDensity } from '../../../core/displayDensity';\n\n/**\n * @hidden\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-filtering-row',\n    templateUrl: './grid-filtering-row.component.html'\n})\nexport class IgxGridFilteringRowComponent implements AfterViewInit {\n\n    private _positionSettings = {\n        horizontalStartPoint: HorizontalAlignment.Left,\n        verticalStartPoint: VerticalAlignment.Bottom\n    };\n\n    private _conditionsOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings)\n    };\n\n    private _operatorsOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false,\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings)\n    };\n\n    private chipsAreaWidth: number;\n    private chipAreaScrollOffset = 0;\n    private _column = null;\n    private isKeyPressed = false;\n    private isComposing = false;\n    private _cancelChipClick = false;\n\n    public showArrows: boolean;\n    public expression: IFilteringExpression;\n    public expressionsList: Array<ExpressionUI>;\n\n    @Input()\n    get column(): IgxColumnComponent {\n        return this._column;\n    }\n\n    set column(val) {\n        if (this._column) {\n            this.expressionsList.forEach(exp => exp.isSelected = false);\n        }\n        if (val) {\n            this._column = val;\n\n            this.expressionsList = this.filteringService.getExpressions(this._column.field);\n            this.resetExpression();\n\n            this.chipAreaScrollOffset = 0;\n            this.transform(this.chipAreaScrollOffset);\n        }\n    }\n\n    @Input()\n    get value(): any {\n        return this.expression ? this.expression.searchVal : null;\n    }\n\n    set value(val) {\n        if (!val && val !== 0) {\n            this.expression.searchVal = null;\n            this.showHideArrowButtons();\n        } else {\n            this.expression.searchVal = DataUtil.parseValue(this.column.dataType, val);\n            if (this.expressionsList.find(item => item.expression === this.expression) === undefined) {\n                this.addExpression(true);\n            }\n        }\n        this.filter();\n    }\n\n    public get displayDensity() {\n        return this.column.grid.displayDensity === DisplayDensity.comfortable ? DisplayDensity.cosy : this.column.grid.displayDensity;\n    }\n\n    @ViewChild('defaultFilterUI', { read: TemplateRef, static: true })\n    protected defaultFilterUI: TemplateRef<any>;\n\n    @ViewChild('defaultDateUI', { read: TemplateRef, static: true })\n    protected defaultDateUI: TemplateRef<any>;\n\n    @ViewChild('input', { read: ElementRef })\n    protected input: ElementRef;\n\n    @ViewChild('inputGroupConditions', { read: IgxDropDownComponent, static: true })\n    protected dropDownConditions: IgxDropDownComponent;\n\n    @ViewChild('chipsArea', { read: IgxChipsAreaComponent, static: true })\n    protected chipsArea: IgxChipsAreaComponent;\n\n    @ViewChildren('operators', { read: IgxDropDownComponent })\n    protected dropDownOperators: QueryList<IgxDropDownComponent>;\n\n    @ViewChild('inputGroup', { read: ElementRef })\n    protected inputGroup: ElementRef;\n\n    @ViewChild('inputGroupPrefix', { read: ElementRef })\n    protected inputGroupPrefix: ElementRef;\n\n    @ViewChild('container', { static: true })\n    protected container: ElementRef;\n\n    @ViewChild('operand')\n    protected operand: ElementRef;\n\n    @ViewChild('closeButton', { static: true })\n    public closeButton: ElementRef;\n\n    @HostBinding('class')\n    get styleClasses(): string {\n        let classes = 'igx-grid__filtering-row';\n\n        switch (this.column.grid.displayDensity) {\n            case DisplayDensity.compact:\n                classes = classes + ' igx-grid__filtering-row--compact';\n                break;\n            case DisplayDensity.cosy:\n                classes = classes + ' igx-grid__filtering-row--cosy';\n                break;\n        }\n        return classes;\n    }\n\n    constructor(public filteringService: IgxFilteringService, public element: ElementRef, public cdr: ChangeDetectorRef) { }\n\n    ngAfterViewInit() {\n        this._conditionsOverlaySettings.outlet = this.column.grid.outlet;\n        this._operatorsOverlaySettings.outlet = this.column.grid.outlet;\n\n        const selectedItem = this.expressionsList.find(expr => expr.isSelected === true);\n        if (selectedItem) {\n            this.expression = selectedItem.expression;\n        }\n\n        this.input.nativeElement.focus();\n    }\n\n    @HostListener('keydown', ['$event'])\n    public onKeydownHandler(evt) {\n        if (evt.key === KEYS.ESCAPE || evt.key === KEYS.ESCAPE_IE ||\n            evt.ctrlKey && evt.shiftKey && evt.key.toLowerCase() === 'l') {\n                evt.preventDefault();\n                evt.stopPropagation();\n                this.close();\n        }\n    }\n\n    get disabled(): boolean {\n        return !(this.column.filteringExpressionsTree && this.column.filteringExpressionsTree.filteringOperands.length > 0);\n    }\n\n    get template(): TemplateRef<any> {\n        if (this.column.dataType === DataType.Date) {\n            return this.defaultDateUI;\n        }\n        return this.defaultFilterUI;\n    }\n\n    get type() {\n        switch (this.column.dataType) {\n            case DataType.String:\n            case DataType.Boolean:\n                return 'text';\n            case DataType.Number:\n                return 'number';\n        }\n    }\n\n    get conditions(): any {\n        return this.column.filters.conditionList();\n    }\n\n    get isUnaryCondition(): boolean {\n        if (this.expression.condition) {\n            return this.expression.condition.isUnary;\n        } else {\n            return true;\n        }\n    }\n\n    get placeholder(): string {\n        if (this.expression.condition && this.expression.condition.isUnary) {\n            return this.filteringService.getChipLabel(this.expression);\n        } else if (this.column.dataType === DataType.Date) {\n            return this.filteringService.grid.resourceStrings.igx_grid_filter_row_date_placeholder;\n        } else if (this.column.dataType === DataType.Boolean) {\n            return this.filteringService.grid.resourceStrings.igx_grid_filter_row_boolean_placeholder;\n        } else {\n            return this.filteringService.grid.resourceStrings.igx_grid_filter_row_placeholder;\n        }\n    }\n\n    /**\n     * Event handler for keydown on the input group's prefix.\n     */\n    public onPrefixKeyDown(event: KeyboardEvent) {\n        if ((event.key === KEYS.ENTER || event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE) && this.dropDownConditions.collapsed) {\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n            event.stopImmediatePropagation();\n        } else if (event.key === KEYS.TAB && !this.dropDownConditions.collapsed) {\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n        }\n    }\n\n    /**\n     * Event handler for keydown on the input.\n     */\n    public onInputKeyDown(event: KeyboardEvent) {\n        this.isKeyPressed = true;\n        event.stopPropagation();\n        if (this.column.dataType === DataType.Boolean) {\n            if (event.key === KEYS.ENTER || event.key === KEYS.SPACE || event.key === KEYS.SPACE_IE) {\n                this.inputGroupPrefix.nativeElement.focus();\n                this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n                return;\n            }\n        }\n        if (event.key === KEYS.ENTER) {\n            if (this.isComposing) {\n                return;\n            }\n            this.commitInput();\n        } else if (event.altKey && (event.key === KEYS.DOWN_ARROW || event.key === KEYS.DOWN_ARROW_IE)) {\n            this.inputGroupPrefix.nativeElement.focus();\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n        } else if (event.key === KEYS.ESCAPE || event.key === KEYS.ESCAPE_IE ||\n            event.ctrlKey && event.shiftKey && event.key.toLowerCase() === 'l') {\n                this.close();\n        }\n    }\n\n    /**\n     * Event handler for keyup on the input.\n     */\n    public onInputKeyUp(eventArgs) {\n        this.isKeyPressed = false;\n    }\n\n    /**\n     * Event handler for input on the input.\n     */\n    public onInput(eventArgs) {\n        // The 'iskeyPressed' flag is needed for a case in IE, because the input event is fired on focus and for some reason,\n        // when you have a japanese character as a placeholder, on init the value here is empty string .\n        const target = eventArgs.target;\n\n        if (isEdge() && target.type !== 'number' || this.isKeyPressed && isIE() || target.value || target.checkValidity()) {\n            this.value = target.value;\n        }\n    }\n\n    /**\n     * Event handler for compositionstart on the input.\n     */\n    public onCompositionStart() {\n        this.isComposing = true;\n    }\n\n    /**\n     * Event handler for compositionend on the input.\n     */\n    public onCompositionEnd() {\n        this.isComposing = false;\n    }\n\n    /**\n     * Event handler for input click event.\n     */\n    public onInputClick() {\n        if (this.column.dataType === DataType.Boolean && this.dropDownConditions.collapsed) {\n            this.inputGroupPrefix.nativeElement.focus();\n            this.toggleConditionsDropDown(this.inputGroupPrefix.nativeElement);\n        }\n    }\n\n    /**\n     * Event handler for datepicker's close.\n     */\n    public datePickerClose() {\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Returns the filtering operation condition for a given value.\n     */\n    public getCondition(value: string): IFilteringOperation {\n        return this.column.filters.condition(value);\n    }\n\n    /**\n     * Returns the translated condition name for a given value.\n     */\n    public translateCondition(value: string): string {\n        return this.filteringService.grid.resourceStrings[`igx_grid_filter_${this.getCondition(value).name}`] || value;\n    }\n\n    /**\n     * Returns the icon name of the current condition.\n     */\n    public getIconName(): string {\n        if (this.column.dataType === DataType.Boolean && this.expression.condition === null) {\n            return this.getCondition(this.conditions[0]).iconName;\n        } else {\n            return this.expression.condition.iconName;\n        }\n    }\n\n    /**\n     * Returns whether a given condition is selected in dropdown.\n     */\n    public isConditionSelected(conditionName: string): boolean {\n        if (this.expression.condition) {\n            return this.expression.condition.name === conditionName;\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * Clears the current filtering.\n     */\n    public clearFiltering() {\n        this.filteringService.clearFilter(this.column.field);\n        this.resetExpression();\n        if (this.input) {\n            this.input.nativeElement.focus();\n        }\n        this.cdr.detectChanges();\n\n        this.chipAreaScrollOffset = 0;\n        this.transform(this.chipAreaScrollOffset);\n    }\n\n    /**\n     * Commits the value of the input.\n     */\n    public commitInput() {\n        const selectedItem = this.expressionsList.filter(ex => ex.isSelected === true);\n        selectedItem.forEach(e => e.isSelected = false);\n\n        let indexToDeselect = -1;\n        for (let index = 0; index < this.expressionsList.length; index++) {\n            const expression = this.expressionsList[index].expression;\n            if (expression.searchVal === null && !expression.condition.isUnary) {\n                indexToDeselect = index;\n            }\n        }\n        if (indexToDeselect !== -1) {\n            this.removeExpression(indexToDeselect, this.expression);\n        }\n        this.resetExpression();\n        this.scrollChipsWhenAddingExpression();\n    }\n\n    /**\n     * Clears the value of the input.\n     */\n    public clearInput() {\n        this.value = null;\n    }\n\n    /**\n     * Event handler for keydown on clear button.\n     */\n    public onClearKeyDown(eventArgs: KeyboardEvent) {\n        if (eventArgs.key === KEYS.ENTER || eventArgs.key === KEYS.SPACE || eventArgs.key === KEYS.SPACE_IE) {\n            eventArgs.preventDefault();\n            this.clearInput();\n            this.input.nativeElement.focus();\n        }\n    }\n\n    /**\n     * Event handler for click on clear button.\n     */\n    public onClearClick() {\n        this.clearInput();\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Event handler for keydown on commit button.\n     */\n    public onCommitKeyDown(eventArgs: KeyboardEvent) {\n        if (eventArgs.key === KEYS.ENTER || eventArgs.key === KEYS.SPACE || eventArgs.key === KEYS.SPACE_IE) {\n            eventArgs.preventDefault();\n            this.commitInput();\n            this.input.nativeElement.focus();\n        }\n    }\n\n    /**\n     * Event handler for click on commit button.\n     */\n    public onCommitClick() {\n        this.commitInput();\n        this.input.nativeElement.focus();\n    }\n\n    /**\n     * Event handler for focusout on the input group.\n     */\n    public onInputGroupFocusout() {\n        if (!this.value && this.value !== 0 &&\n            this.expression.condition && !this.expression.condition.isUnary) {\n            return;\n        }\n        requestAnimationFrame(() => {\n            const focusedElement = document.activeElement;\n\n            if (focusedElement.className === 'igx-chip__remove' || focusedElement.tagName === 'IGX-DAY-ITEM') {\n                return;\n            }\n\n            if (!(focusedElement && this.inputGroup.nativeElement.contains(focusedElement))\n                && this.dropDownConditions.collapsed) {\n                this.commitInput();\n            }\n        });\n    }\n\n    /**\n     * Closes the filtering edit row.\n     */\n    public close() {\n        if (this.expressionsList.length === 1 &&\n            this.expressionsList[0].expression.searchVal === null &&\n            this.expressionsList[0].expression.condition.isUnary === false) {\n            this.filteringService.getExpressions(this.column.field).pop();\n\n            this.filter();\n        } else {\n            const condToRemove = this.expressionsList.filter(ex => ex.expression.searchVal === null && !ex.expression.condition.isUnary);\n            if (condToRemove && condToRemove.length > 0) {\n                condToRemove.forEach(c => this.filteringService.removeExpression(this.column.field, this.expressionsList.indexOf(c)));\n                this.filter();\n            }\n        }\n\n        this.filteringService.isFilterRowVisible = false;\n        this.filteringService.updateFilteringCell(this.column);\n        this.filteringService.filteredColumn = null;\n        this.filteringService.selectedExpression = null;\n        this.filteringService.grid.theadRow.nativeElement.focus();\n\n        this.chipAreaScrollOffset = 0;\n        this.transform(this.chipAreaScrollOffset);\n    }\n\n    /*\n    * noop\n    */\n    public noop() { }\n\n    /**\n     *  Event handler for date picker's selection.\n     */\n    public onDateSelected(value: Date) {\n        this.value = value;\n    }\n\n    /** @hidden @internal */\n    public inputGroupPrefixClick(event: MouseEvent) {\n        event.stopPropagation();\n        (event.currentTarget as HTMLElement).focus();\n        this.toggleConditionsDropDown(event.currentTarget);\n    }\n\n    /**\n     * Opens the conditions dropdown.\n     */\n    public toggleConditionsDropDown(target: any) {\n        this._conditionsOverlaySettings.target = target;\n        this._conditionsOverlaySettings.excludeFromOutsideClick = [target as HTMLElement];\n        this.dropDownConditions.toggle(this._conditionsOverlaySettings);\n    }\n\n    /**\n     * Opens the logic operators dropdown.\n     */\n    public toggleOperatorsDropDown(eventArgs, index) {\n        this._operatorsOverlaySettings.target = eventArgs.target.parentElement;\n        this._operatorsOverlaySettings.excludeFromOutsideClick = [eventArgs.target.parentElement as HTMLElement];\n        this.dropDownOperators.toArray()[index].toggle(this._operatorsOverlaySettings);\n    }\n\n    /**\n     * Event handler for change event in conditions dropdown.\n     */\n    public onConditionsChanged(eventArgs) {\n        const value = (eventArgs.newSelection as IgxDropDownItemComponent).value;\n        this.expression.condition = this.getCondition(value);\n        if (this.expression.condition.isUnary) {\n            // update grid's filtering on the next cycle to ensure the drop-down is closed\n            // if the drop-down is not closed this event handler will be invoked multiple times\n            requestAnimationFrame(() => this.unaryConditionChangedCallback());\n        } else {\n            requestAnimationFrame(() => this.conditionChangedCallback());\n        }\n\n        if (this.input) {\n            // Add requestAnimationFrame becasue of an issue in IE, where you are still able to write in the input,\n            // if it has been focused and then set to readonly.\n            requestAnimationFrame(() => this.input.nativeElement.focus());\n        }\n    }\n\n\n    public onChipPointerdown(args, chip: IgxChipComponent) {\n        const activeElement = document.activeElement;\n        this._cancelChipClick = chip.selected && activeElement &&\n            this.inputGroup.nativeElement.contains(activeElement);\n    }\n\n    public onChipClick(args, item: ExpressionUI) {\n        if (this._cancelChipClick) {\n            this._cancelChipClick = false;\n            return;\n        }\n\n        this.expressionsList.forEach(ex => ex.isSelected = false);\n\n        this.toggleChip(item);\n    }\n\n    public toggleChip(item: ExpressionUI) {\n        item.isSelected = !item.isSelected;\n        if (item.isSelected) {\n            this.expression = item.expression;\n\n            if (this.input) {\n                this.input.nativeElement.focus();\n            }\n        }\n    }\n\n    /**\n     * Event handler for chip keydown event.\n     */\n    public onChipKeyDown(eventArgs: KeyboardEvent, item: ExpressionUI) {\n        if (eventArgs.key === KEYS.ENTER) {\n            eventArgs.preventDefault();\n\n            this.toggleChip(item);\n        }\n    }\n\n    /**\n     * Scrolls the first chip into view if the tab key is pressed on the left arrow.\n     */\n    public onLeftArrowKeyDown(event) {\n        if (event.key === KEYS.TAB) {\n            this.chipAreaScrollOffset = 0;\n            this.transform(this.chipAreaScrollOffset);\n        }\n    }\n\n    /**\n     * Event handler for chip removed event.\n     */\n    public onChipRemoved(eventArgs: IBaseChipEventArgs, item: ExpressionUI) {\n        const indexToRemove = this.expressionsList.indexOf(item);\n        this.removeExpression(indexToRemove, item.expression);\n\n        this.scrollChipsOnRemove();\n    }\n\n    /**\n     * Event handler for logic operator changed event.\n     */\n    public onLogicOperatorChanged(eventArgs: ISelectionEventArgs, expression: ExpressionUI) {\n        if (eventArgs.oldSelection) {\n            expression.afterOperator = (eventArgs.newSelection as IgxDropDownItemComponent).value;\n            this.expressionsList[this.expressionsList.indexOf(expression) + 1].beforeOperator = expression.afterOperator;\n\n            // update grid's filtering on the next cycle to ensure the drop-down is closed\n            // if the drop-down is not closed this event handler will be invoked multiple times\n            requestAnimationFrame(() => this.filter());\n        }\n    }\n\n    /**\n     * Scrolls the chips into the chip area when left or right arrows are pressed.\n     */\n    public scrollChipsOnArrowPress(arrowPosition: string) {\n        let count = 0;\n        const chipAraeChildren = this.chipsArea.element.nativeElement.children;\n        const containerRect = this.container.nativeElement.getBoundingClientRect();\n\n        if (arrowPosition === 'right') {\n            for (let index = 0; index < chipAraeChildren.length; index++) {\n                if (Math.ceil(chipAraeChildren[index].getBoundingClientRect().right) < Math.ceil(containerRect.right)) {\n                    count++;\n                }\n            }\n\n            if (count < chipAraeChildren.length) {\n                this.chipAreaScrollOffset -= Math.ceil(chipAraeChildren[count].getBoundingClientRect().right) -\n                    Math.ceil(containerRect.right) + 1;\n                this.transform(this.chipAreaScrollOffset);\n            }\n        }\n\n        if (arrowPosition === 'left') {\n            for (let index = 0; index < chipAraeChildren.length; index++) {\n                if (Math.ceil(chipAraeChildren[index].getBoundingClientRect().left) < Math.ceil(containerRect.left)) {\n                    count++;\n                }\n            }\n\n            if (count > 0) {\n                this.chipAreaScrollOffset += Math.ceil(containerRect.left) -\n                    Math.ceil(chipAraeChildren[count - 1].getBoundingClientRect().left) + 1;\n                this.transform(this.chipAreaScrollOffset);\n            }\n        }\n    }\n\n    private showHideArrowButtons() {\n        requestAnimationFrame(() => {\n            if (this.filteringService.isFilterRowVisible) {\n                const containerWidth = this.container.nativeElement.getBoundingClientRect().width;\n                this.chipsAreaWidth = this.chipsArea.element.nativeElement.getBoundingClientRect().width;\n\n                this.showArrows = this.chipsAreaWidth >= containerWidth && this.isColumnFiltered;\n\n                // TODO: revise the cdr.detectChanges() usage here\n                if (!(this.cdr as ViewRef).destroyed) {\n                this.cdr.detectChanges(); }\n            }\n        });\n    }\n\n    private addExpression(isSelected: boolean) {\n        const exprUI = new ExpressionUI();\n        exprUI.expression = this.expression;\n        exprUI.beforeOperator = this.expressionsList.length > 0 ? FilteringLogic.And : null;\n        exprUI.isSelected = isSelected;\n\n        this.expressionsList.push(exprUI);\n\n        const length = this.expressionsList.length;\n        if (this.expressionsList[length - 2]) {\n            this.expressionsList[length - 2].afterOperator = this.expressionsList[length - 1].beforeOperator;\n        }\n\n        this.showHideArrowButtons();\n    }\n\n    private removeExpression(indexToRemove: number, expression: IFilteringExpression) {\n        if (indexToRemove === 0 && this.expressionsList.length === 1) {\n            this.clearFiltering();\n            return;\n        }\n\n        this.filteringService.removeExpression(this.column.field, indexToRemove);\n\n        this.filter();\n\n        if (this.expression === expression) {\n            this.resetExpression();\n        }\n\n        this.showHideArrowButtons();\n    }\n\n    private resetExpression() {\n        this.expression = {\n            fieldName: this.column.field,\n            condition: null,\n            searchVal: null,\n            ignoreCase: this.column.filteringIgnoreCase\n        };\n\n        if (this.column.dataType !== DataType.Boolean) {\n            this.expression.condition = this.getCondition(this.conditions[0]);\n        }\n\n        if (this.column.dataType === DataType.Date && this.input) {\n            this.input.nativeElement.value = null;\n        }\n\n        this.showHideArrowButtons();\n    }\n\n    private scrollChipsWhenAddingExpression() {\n        const chipAraeChildren = this.chipsArea.element.nativeElement.children;\n        if (!chipAraeChildren || chipAraeChildren.length === 0) {\n            return;\n        }\n\n        const containerRectRight = Math.ceil(this.container.nativeElement.getBoundingClientRect().right);\n\n        const lastChipRectRight = Math.ceil(chipAraeChildren[chipAraeChildren.length - 1].getBoundingClientRect().right);\n        if (lastChipRectRight >= containerRectRight) {\n            this.chipAreaScrollOffset -= lastChipRectRight - containerRectRight;\n            this.transform(this.chipAreaScrollOffset);\n        }\n    }\n\n    /**\n     * @hidden\n     * Resets the chips area\n     * @memberof IgxGridFilteringRowComponent\n     */\n    public resetChipsArea() {\n        this.chipAreaScrollOffset = 0;\n        this.transform(this.chipAreaScrollOffset);\n        this.showHideArrowButtons();\n    }\n\n    private transform(offset: number) {\n        requestAnimationFrame(() => {\n            this.chipsArea.element.nativeElement.style.transform = `translate(${offset}px)`;\n        });\n    }\n\n    private scrollChipsOnRemove() {\n        let count = 0;\n        const chipAraeChildren = this.chipsArea.element.nativeElement.children;\n        const containerRect = this.container.nativeElement.getBoundingClientRect();\n\n        for (let index = 0; index < chipAraeChildren.length; index++) {\n            if (Math.ceil(chipAraeChildren[index].getBoundingClientRect().right) < Math.ceil(containerRect.left)) {\n                count++;\n            }\n        }\n\n        if (count <= 2) {\n            this.chipAreaScrollOffset = 0;\n        } else {\n            const dif = chipAraeChildren[count].id === 'chip' ? count - 2 : count - 1;\n            this.chipAreaScrollOffset += Math.ceil(containerRect.left) - Math.ceil(chipAraeChildren[dif].getBoundingClientRect().left) + 1;\n        }\n\n        this.transform(this.chipAreaScrollOffset);\n    }\n\n    private conditionChangedCallback() {\n        if (!!this.expression.searchVal || this.expression.searchVal === 0) {\n            this.filter();\n        } else if (this.value) {\n            this.value = null;\n        }\n    }\n\n    private unaryConditionChangedCallback() {\n        if (this.value) {\n            this.value = null;\n        }\n        if (this.expressionsList.find(item => item.expression === this.expression) === undefined) {\n            this.addExpression(true);\n        }\n        this.filter();\n    }\n\n    private filter() {\n        this.filteringService.filterInternal(this.column.field);\n    }\n\n    private get isColumnFiltered() {\n        return this.column.filteringExpressionsTree && this.column.filteringExpressionsTree.filteringOperands.length > 0;\n    }\n\n    public get isNarrowWidth(): boolean {\n        return this.element.nativeElement.offsetWidth < 432;\n    }\n}\n","import { Directive, OnDestroy, Input, ElementRef, ViewContainerRef, NgZone, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { IgxDragDirective } from '../../directives/drag-drop/drag-drop.directive';\nimport { Subscription, fromEvent } from 'rxjs';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { KEYS, PlatformUtil } from '../../core/utils';\nimport { IgxColumnMovingService } from './moving.service';\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxColumnMovingDrag]',\n\n})\nexport class IgxColumnMovingDragDirective extends IgxDragDirective implements OnDestroy {\n\n    @Input('igxColumnMovingDrag')\n    public data: any;\n\n    get column(): IgxColumnComponent {\n        return this.data;\n    }\n\n    get draggable(): boolean {\n        return this.column && (this.column.movable || (this.column.groupable && !this.column.columnGroup));\n    }\n\n    public get icon(): HTMLElement {\n        return this.cms.icon;\n    }\n\n    private subscription$: Subscription;\n    private _ghostClass = 'igx-grid__drag-ghost-image';\n    private ghostImgIconClass = 'igx-grid__drag-ghost-image-icon';\n    private ghostImgIconGroupClass = 'igx-grid__drag-ghost-image-icon-group';\n    private columnSelectedClass = 'igx-grid__th--selected';\n\n    constructor(\n        public element: ElementRef<HTMLElement>,\n        public viewContainer: ViewContainerRef,\n        public zone: NgZone,\n        public renderer: Renderer2,\n        public cdr: ChangeDetectorRef,\n        private cms: IgxColumnMovingService,\n        _platformUtil: PlatformUtil,\n    ) {\n        super(cdr, element, viewContainer, zone, renderer, _platformUtil);\n    }\n\n    public ngOnDestroy() {\n        this._unsubscribe();\n    }\n\n    public onEscape(event) {\n        this.cms.cancelDrop = true;\n        this.onPointerUp(event);\n    }\n\n    public onPointerDown(event) {\n        if (!this.draggable || event.target.getAttribute('draggable') === 'false') {\n            return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        this._removeOnDestroy = false;\n        this.cms.column = this.column;\n        this.ghostClass = this._ghostClass;\n\n        super.onPointerDown(event);\n\n        this.cms.isColumnMoving = true;\n        this.column.grid.cdr.detectChanges();\n\n        const args = {\n            source: this.column\n        };\n        this.column.grid.onColumnMovingStart.emit(args);\n\n        this.subscription$ = fromEvent(this.column.grid.document.defaultView, 'keydown').subscribe((ev: KeyboardEvent) => {\n            if (ev.key === KEYS.ESCAPE || ev.key === KEYS.ESCAPE_IE) {\n                this.onEscape(ev);\n            }\n        });\n    }\n\n    public onPointerMove(event) {\n        event.preventDefault();\n        super.onPointerMove(event);\n\n        if (this._dragStarted && this.ghostElement && !this.column.grid.draggedColumn) {\n            this.column.grid.draggedColumn = this.column;\n            this.column.grid.cdr.detectChanges();\n        }\n\n        if (this.cms.isColumnMoving) {\n            const args = {\n                source: this.column,\n                cancel: false\n            };\n            this.column.grid.onColumnMoving.emit(args);\n\n            if (args.cancel) {\n                this.onEscape(event);\n            }\n        }\n    }\n\n    public onPointerUp(event) {\n        // Run it explicitly inside the zone because sometimes onPointerUp executes after the code below.\n        this.zone.run(() => {\n            super.onPointerUp(event);\n\n            this.cms.isColumnMoving = false;\n            this.column.grid.draggedColumn = null;\n            this.column.grid.cdr.detectChanges();\n        });\n\n        this._unsubscribe();\n    }\n\n    protected createGhost(pageX, pageY) {\n        super.createGhost(pageX, pageY);\n\n        this.ghostElement.style.height = null;\n        this.ghostElement.style.minWidth = null;\n        this.ghostElement.style.flexBasis = null;\n        this.ghostElement.style.position = null;\n\n        this.renderer.removeClass( this.ghostElement, this.columnSelectedClass);\n\n        const icon = document.createElement('i');\n        const text = document.createTextNode('block');\n        icon.appendChild(text);\n\n        icon.classList.add('material-icons');\n        this.cms.icon = icon;\n\n        if (!this.column.columnGroup) {\n            this.renderer.addClass(icon, this.ghostImgIconClass);\n\n            this.ghostElement.insertBefore(icon, this.ghostElement.firstElementChild);\n\n            this.ghostLeft = this._ghostStartX = pageX - ((this.ghostElement.getBoundingClientRect().width / 3) * 2);\n            this.ghostTop = this._ghostStartY = pageY - ((this.ghostElement.getBoundingClientRect().height / 3) * 2);\n        } else {\n            this.ghostElement.insertBefore(icon, this.ghostElement.childNodes[0]);\n\n            this.renderer.addClass(icon, this.ghostImgIconGroupClass);\n            this.ghostElement.children[0].style.paddingLeft = '0px';\n\n            this.ghostLeft = this._ghostStartX = pageX - ((this.ghostElement.getBoundingClientRect().width / 3) * 2);\n            this.ghostTop = this._ghostStartY = pageY - ((this.ghostElement.getBoundingClientRect().height / 3) * 2);\n        }\n    }\n\n    private _unsubscribe() {\n        if (this.subscription$) {\n            this.subscription$.unsubscribe();\n            this.subscription$ = null;\n        }\n    }\n}\n","import { Directive, ElementRef, Renderer2, NgZone, HostBinding, TemplateRef } from '@angular/core';\nimport { IgxDropDirective } from '../../directives/drag-drop/drag-drop.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxGridComponent } from './grid.component';\nimport { SortingDirection } from '../../data-operations/sorting-expression.interface';\nimport { IgxColumnMovingDragDirective } from '../moving/moving.drag.directive';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxGroupByRow]'\n})\nexport class IgxGroupByRowTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxGridDetail]'\n})\nexport class IgxGridDetailTemplateDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowExpandedIndicator]'\n})\nexport class IgxRowExpandedIndicatorDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowCollapsedIndicator]'\n})\nexport class IgxRowCollapsedIndicatorDirective {\n}\n\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxHeaderExpandedIndicator]'\n})\nexport class IgxHeaderExpandIndicatorDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxHeaderCollapsedIndicator]'\n})\nexport class IgxHeaderCollapseIndicatorDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxExcelStyleHeaderIcon]'\n})\nexport class IgxExcelStyleHeaderIconDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxGroupAreaDrop]'\n})\nexport class IgxGroupAreaDropDirective extends IgxDropDirective {\n\n    constructor(private elementRef: ElementRef, private renderer: Renderer2, private zone: NgZone) {\n        super(elementRef, renderer, zone);\n    }\n\n    @HostBinding('class.igx-drop-area--hover')\n    public hovered = false;\n\n\n    public onDragEnter(event) {\n        const drag: IgxColumnMovingDragDirective = event.detail.owner;\n        const column: IgxColumnComponent = drag.column;\n        if (!this.columnBelongsToGrid(column)) {\n            return;\n        }\n        const grid = <IgxGridComponent>column.grid;\n        const isGrouped = grid.groupingExpressions.findIndex((item) => item.fieldName === column.field) !== -1;\n        if (column.groupable && !isGrouped && !column.columnGroup && !!column.field) {\n            drag.icon.innerText = 'group_work';\n            this.hovered = true;\n        } else {\n            drag.icon.innerText = 'block';\n            this.hovered = false;\n        }\n    }\n\n    public onDragLeave(event) {\n        const drag: IgxColumnMovingDragDirective = event.detail.owner;\n        const column: IgxColumnComponent = drag.column;\n        if (!this.columnBelongsToGrid(column)) {\n            return;\n        }\n        event.detail.owner.icon.innerText = 'block';\n        this.hovered = false;\n    }\n\n    public onDragDrop(event) {\n        const drag: IgxColumnMovingDragDirective = event.detail.owner;\n        if (drag instanceof IgxColumnMovingDragDirective) {\n            const column: IgxColumnComponent = drag.column;\n            if (!this.columnBelongsToGrid(column)) {\n                return;\n            }\n            const grid = <IgxGridComponent>column.grid;\n            const isGrouped = grid.groupingExpressions.findIndex((item) => item.fieldName === column.field) !== -1;\n            if (column.groupable && !isGrouped && !column.columnGroup && !!column.field) {\n                grid.groupBy({ fieldName: column.field, dir: SortingDirection.Asc, ignoreCase: column.sortingIgnoreCase,\n                    strategy: column.sortStrategy, groupingComparer: column.groupingComparer });\n            }\n        }\n    }\n\n    private closestParentByAttr(elem, attr) {\n        return elem.hasAttribute(attr) ?\n            elem :\n            this.closestParentByAttr(elem.parentElement, attr);\n    }\n\n    private columnBelongsToGrid(column) {\n        const elem = this.elementRef.nativeElement;\n        const closestGridID = this.closestParentByAttr(elem, 'igxGroupAreaDrop').getAttribute('gridId');\n        if (!column) {\n            return false;\n        } else {\n            const grid = <IgxGridComponent>column.grid;\n            if (!grid || grid.id !== closestGridID) {\n                return false;\n            }\n            return true;\n        }\n    }\n}\n","import {\n    Component, Input, ViewChild, ChangeDetectorRef, ViewChildren, QueryList, ElementRef, AfterViewInit, OnDestroy, HostBinding\n} from '@angular/core';\nimport { VerticalAlignment, HorizontalAlignment, Point, OverlaySettings } from '../../../services/overlay/utilities';\nimport { ConnectedPositioningStrategy } from '../../../services/overlay/position/connected-positioning-strategy';\nimport { IgxOverlayService } from '../../../services/overlay/overlay';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../../../data-operations/filtering-expressions-tree';\nimport { FilteringLogic, IFilteringExpression } from '../../../data-operations/filtering-expression.interface';\nimport { IgxChipComponent } from '../../../chips/chip.component';\nimport { IgxSelectComponent } from '../../../select/select.component';\nimport { IDragStartEventArgs, IDragBaseEventArgs } from '../../../directives/drag-drop/drag-drop.directive';\nimport { CloseScrollStrategy } from '../../../services/overlay/scroll/close-scroll-strategy';\nimport { IgxToggleDirective, IgxOverlayOutletDirective } from '../../../directives/toggle/toggle.directive';\nimport { IButtonGroupEventArgs } from '../../../buttonGroup/buttonGroup.component';\nimport { takeUntil, first } from 'rxjs/operators';\nimport { Subject, Subscription } from 'rxjs';\nimport { KEYS } from '../../../core/utils';\nimport { AbsoluteScrollStrategy, AutoPositionStrategy } from '../../../services/public_api';\nimport { IgxColumnComponent } from '../../columns/column.component';\nimport { GridType } from '../../common/grid.interface';\nimport { DataUtil } from './../../../data-operations/data-util';\n\n/**\n * @hidden\n */\nclass ExpressionItem {\n    constructor(parent?: ExpressionGroupItem) {\n        this.parent = parent;\n    }\n    parent: ExpressionGroupItem;\n    selected: boolean;\n}\n\n/**\n * @hidden\n */\nclass ExpressionGroupItem extends ExpressionItem {\n    constructor(operator: FilteringLogic, parent?: ExpressionGroupItem) {\n        super(parent);\n        this.operator = operator;\n        this.children = [];\n    }\n    operator: FilteringLogic;\n    children: ExpressionItem[];\n}\n\n/**\n * @hidden\n */\nclass ExpressionOperandItem extends ExpressionItem {\n    constructor(expression: IFilteringExpression, parent: ExpressionGroupItem) {\n        super(parent);\n        this.expression = expression;\n    }\n    expression: IFilteringExpression;\n    inEditMode: boolean;\n    inAddMode: boolean;\n    hovered: boolean;\n    columnHeader: string;\n}\n\n/**\n * A component used for presenting advanced filtering UI for a Grid.\n * It is used internally in the Grid, but could also be hosted in a container outside of it.\n *\n * Example:\n * ```html\n * <igx-advanced-filtering-dialog\n *     [grid]=\"grid1\">\n * </igx-advanced-filtering-dialog>\n * ```\n */\n@Component({\n    selector: 'igx-advanced-filtering-dialog',\n    templateUrl: './advanced-filtering-dialog.component.html'\n})\nexport class IgxAdvancedFilteringDialogComponent implements AfterViewInit, OnDestroy {\n    /**\n     * @hidden @internal\n     */\n    public inline = true;\n    /**\n     * @hidden @internal\n     */\n    public rootGroup: ExpressionGroupItem;\n\n    /**\n     * @hidden @internal\n     */\n    public selectedExpressions: ExpressionOperandItem[] = [];\n\n    /**\n     * @hidden @internal\n     */\n    public selectedGroups: ExpressionGroupItem[] = [];\n\n    /**\n     * @hidden @internal\n     */\n    public currentGroup: ExpressionGroupItem;\n\n    /**\n     * @hidden @internal\n     */\n    public editedExpression: ExpressionOperandItem;\n\n    /**\n     * @hidden @internal\n     */\n    public addModeExpression: ExpressionOperandItem;\n\n    /**\n     * @hidden @internal\n     */\n    public contextualGroup: ExpressionGroupItem;\n\n    /**\n     * @hidden @internal\n     */\n    public filteringLogics;\n\n    /**\n     * @hidden @internal\n     */\n    public selectedCondition: string;\n\n    /**\n     * @hidden @internal\n     */\n    public searchValue: any;\n\n    /**\n     * @hidden @internal\n     */\n    public lastActiveNode;\n\n    private _positionSettings = {\n        horizontalStartPoint: HorizontalAlignment.Right,\n        verticalStartPoint: VerticalAlignment.Top\n    };\n    private _overlaySettings: OverlaySettings = {\n        closeOnOutsideClick: false,\n        modal: false,\n        positionStrategy: new ConnectedPositioningStrategy(this._positionSettings),\n        scrollStrategy: new CloseScrollStrategy()\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public columnSelectOverlaySettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: false\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public conditionSelectOverlaySettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: false\n    };\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('columnSelect', { read: IgxSelectComponent })\n    public columnSelect: IgxSelectComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('conditionSelect', { read: IgxSelectComponent })\n    public conditionSelect: IgxSelectComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('searchValueInput', { read: ElementRef })\n    public searchValueInput: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('addRootAndGroupButton', { read: ElementRef })\n    public addRootAndGroupButton: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('addConditionButton', { read: ElementRef })\n    public addConditionButton: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('editingInputsContainer', { read: ElementRef })\n    public set editingInputsContainer(value: ElementRef) {\n        if ((value && !this._editingInputsContainer) ||\n            (value && this._editingInputsContainer && this._editingInputsContainer.nativeElement !== value.nativeElement)) {\n            requestAnimationFrame(() => {\n                this.scrollElementIntoView(value.nativeElement);\n            });\n        }\n\n        this._editingInputsContainer = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get editingInputsContainer(): ElementRef {\n        return this._editingInputsContainer;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('addModeContainer', { read: ElementRef })\n    public set addModeContainer(value: ElementRef) {\n        if ((value && !this._addModeContainer) ||\n            (value && this._addModeContainer && this._addModeContainer.nativeElement !== value.nativeElement)) {\n            requestAnimationFrame(() => {\n                this.scrollElementIntoView(value.nativeElement);\n            });\n        }\n\n        this._addModeContainer = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get addModeContainer(): ElementRef {\n        return this._addModeContainer;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('currentGroupButtonsContainer', { read: ElementRef })\n    public set currentGroupButtonsContainer(value: ElementRef) {\n        if ((value && !this._currentGroupButtonsContainer) ||\n            (value && this._currentGroupButtonsContainer && this._currentGroupButtonsContainer.nativeElement !== value.nativeElement)) {\n            requestAnimationFrame(() => {\n                this.scrollElementIntoView(value.nativeElement);\n            });\n        }\n\n        this._currentGroupButtonsContainer = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get currentGroupButtonsContainer(): ElementRef {\n        return this._currentGroupButtonsContainer;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxToggleDirective)\n    public contextMenuToggle: IgxToggleDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxChipComponent)\n    public chips: QueryList<IgxChipComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('expressionsContainer')\n    protected expressionsContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('overlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public overlayOutlet: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('style.display')\n    display = 'block';\n\n    private destroy$ = new Subject<any>();\n    private _overlayComponentId: string;\n    private _overlayService: IgxOverlayService;\n    private _selectedColumn: IgxColumnComponent;\n    private _clickTimer;\n    private _dblClickDelay = 200;\n    private _preventChipClick = false;\n    private _editingInputsContainer: ElementRef;\n    private _addModeContainer: ElementRef;\n    private _currentGroupButtonsContainer: ElementRef;\n    private _grid: GridType;\n    private _filteringChange: Subscription;\n\n    constructor(public cdr: ChangeDetectorRef) { }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit(): void {\n        this._overlaySettings.outlet = this.overlayOutlet;\n        this.columnSelectOverlaySettings.outlet = this.overlayOutlet;\n        this.conditionSelectOverlaySettings.outlet = this.overlayOutlet;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get displayDensity() {\n        return this.grid.displayDensity;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get selectedColumn(): IgxColumnComponent {\n        return this._selectedColumn;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public set selectedColumn(value: IgxColumnComponent) {\n        const oldValue = this._selectedColumn;\n\n        if (this._selectedColumn !== value) {\n            this._selectedColumn = value;\n            if (oldValue && this._selectedColumn && this._selectedColumn.dataType !== oldValue.dataType) {\n                this.selectedCondition = null;\n                this.searchValue = null;\n                this.cdr.detectChanges();\n            }\n        }\n    }\n\n    /**\n     * An @Input property that sets the grid.\n     */\n    @Input()\n    set grid(grid: GridType) {\n        this._grid = grid;\n\n        if (this._filteringChange) {\n            this._filteringChange.unsubscribe();\n        }\n\n        if (this._grid) {\n            this._grid.filteringService.registerSVGIcons();\n\n            this._filteringChange = this._grid.advancedFilteringExpressionsTreeChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this.init();\n            });\n\n            this.init();\n        }\n    }\n\n    /**\n     * Returns the grid.\n     */\n    get grid(): GridType {\n        return this._grid;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get filterableColumns(): IgxColumnComponent[] {\n        return this.grid.columns.filter((col) => !col.columnGroup && col.filterable);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dragStart(dragArgs: IDragStartEventArgs) {\n        if (!this._overlayComponentId) {\n            dragArgs.cancel = true;\n            return;\n        }\n\n        if (!this.contextMenuToggle.collapsed) {\n            this.contextMenuToggle.element.style.display = 'none';\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dragEnd(dragArgs: IDragBaseEventArgs) {\n        if (!this.contextMenuToggle.collapsed) {\n            this.calculateContextMenuTarget();\n            this.contextMenuToggle.reposition();\n            this.contextMenuToggle.element.style.display = '';\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onDragMove(e) {\n        const deltaX = e.nextPageX - e.pageX;\n        const deltaY = e.nextPageY - e.pageY;\n        e.cancel = true;\n        this._overlayService.setOffset(this._overlayComponentId, deltaX, deltaY);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addCondition(parent: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.cancelOperandAdd();\n\n        const operandItem = new ExpressionOperandItem({\n            fieldName: null,\n            condition: null,\n            ignoreCase: true,\n            searchVal: null\n        }, parent);\n\n        if (afterExpression) {\n            const index = parent.children.indexOf(afterExpression);\n            parent.children.splice(index + 1, 0, operandItem);\n        } else {\n            parent.children.push(operandItem);\n        }\n\n        this.enterExpressionEdit(operandItem);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addAndGroup(parent?: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.addGroup(FilteringLogic.And, parent, afterExpression);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public addOrGroup(parent?: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.addGroup(FilteringLogic.Or, parent, afterExpression);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public endGroup(groupItem: ExpressionGroupItem) {\n        this.currentGroup = groupItem.parent;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public commitOperandEdit() {\n        if (this.editedExpression) {\n            this.editedExpression.expression.fieldName = this.selectedColumn.field;\n            this.editedExpression.expression.condition = this.selectedColumn.filters.condition(this.selectedCondition);\n            this.editedExpression.expression.searchVal = DataUtil.parseValue(this.selectedColumn.dataType, this.searchValue);\n            this.editedExpression.columnHeader = this.selectedColumn.header;\n\n            this.editedExpression.inEditMode = false;\n            this.editedExpression = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancelOperandAdd() {\n        if (this.addModeExpression) {\n            this.addModeExpression.inAddMode = false;\n            this.addModeExpression = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancelOperandEdit() {\n        if (this.editedExpression) {\n            this.editedExpression.inEditMode = false;\n\n            if (!this.editedExpression.expression.fieldName) {\n                this.deleteItem(this.editedExpression);\n            }\n\n            this.editedExpression = null;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public operandCanBeCommitted(): boolean {\n        return this.selectedColumn && this.selectedCondition &&\n            (!!this.searchValue || this.selectedColumn.filters.condition(this.selectedCondition).isUnary);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public exitOperandEdit() {\n        if (!this.editedExpression) {\n            return;\n        }\n\n        if (this.operandCanBeCommitted()) {\n            this.commitOperandEdit();\n        } else {\n            this.cancelOperandEdit();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isExpressionGroup(expression: ExpressionItem): boolean {\n        return expression instanceof ExpressionGroupItem;\n    }\n\n    private addGroup(operator: FilteringLogic, parent?: ExpressionGroupItem, afterExpression?: ExpressionItem) {\n        this.cancelOperandAdd();\n\n        const groupItem = new ExpressionGroupItem(operator, parent);\n\n        if (parent) {\n            if (afterExpression) {\n                const index = parent.children.indexOf(afterExpression);\n                parent.children.splice(index + 1, 0, groupItem);\n            } else {\n                parent.children.push(groupItem);\n            }\n        } else {\n            this.rootGroup = groupItem;\n        }\n\n        this.addCondition(groupItem);\n        this.currentGroup = groupItem;\n    }\n\n    private createExpressionGroupItem(expressionTree: IFilteringExpressionsTree, parent?: ExpressionGroupItem): ExpressionGroupItem {\n        let groupItem: ExpressionGroupItem;\n        if (expressionTree) {\n            groupItem = new ExpressionGroupItem(expressionTree.operator, parent);\n\n            for (const expr of expressionTree.filteringOperands) {\n                if (expr instanceof FilteringExpressionsTree) {\n                    groupItem.children.push(this.createExpressionGroupItem(expr, groupItem));\n                } else {\n                    const filteringExpr = expr as IFilteringExpression;\n                    const exprCopy: IFilteringExpression = {\n                        fieldName: filteringExpr.fieldName,\n                        condition: filteringExpr.condition,\n                        searchVal: filteringExpr.searchVal,\n                        ignoreCase: filteringExpr.ignoreCase\n                    };\n                    const operandItem = new ExpressionOperandItem(exprCopy, groupItem);\n                    const column = this.grid.getColumnByName(filteringExpr.fieldName);\n                    operandItem.columnHeader = column.header;\n                    groupItem.children.push(operandItem);\n                }\n            }\n        }\n\n        return groupItem;\n    }\n\n    private createExpressionsTreeFromGroupItem(groupItem: ExpressionGroupItem): FilteringExpressionsTree {\n        if (!groupItem) {\n            return null;\n        }\n\n        const expressionsTree = new FilteringExpressionsTree(groupItem.operator);\n\n        for (const item of groupItem.children) {\n            if (item instanceof ExpressionGroupItem) {\n                const subTree = this.createExpressionsTreeFromGroupItem((item as ExpressionGroupItem));\n                expressionsTree.filteringOperands.push(subTree);\n            } else {\n                expressionsTree.filteringOperands.push((item as ExpressionOperandItem).expression);\n            }\n        }\n\n        return expressionsTree;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipRemove(expressionItem: ExpressionItem) {\n        this.deleteItem(expressionItem);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipClick(expressionItem: ExpressionOperandItem) {\n        this._clickTimer = setTimeout(() => {\n            if (!this._preventChipClick) {\n                this.onToggleExpression(expressionItem);\n            }\n            this._preventChipClick = false;\n        }, this._dblClickDelay);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipDblClick(expressionItem: ExpressionOperandItem) {\n        clearTimeout(this._clickTimer);\n        this._preventChipClick = true;\n        this.enterExpressionEdit(expressionItem);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public enterExpressionEdit(expressionItem: ExpressionOperandItem) {\n        this.clearSelection();\n        this.exitOperandEdit();\n        this.cancelOperandAdd();\n\n        if (this.editedExpression) {\n            this.editedExpression.inEditMode = false;\n        }\n\n        expressionItem.hovered = false;\n\n        this.selectedColumn = expressionItem.expression.fieldName ?\n            this.grid.getColumnByName(expressionItem.expression.fieldName) : null;\n        this.selectedCondition = expressionItem.expression.condition ?\n            expressionItem.expression.condition.name : null;\n        this.searchValue = expressionItem.expression.searchVal;\n\n        expressionItem.inEditMode = true;\n        this.editedExpression = expressionItem;\n\n        this.cdr.detectChanges();\n\n        this.columnSelectOverlaySettings.target = this.columnSelect.element;\n        this.columnSelectOverlaySettings.excludeFromOutsideClick = [this.columnSelect.element as HTMLElement];\n        this.columnSelectOverlaySettings.positionStrategy = new AutoPositionStrategy();\n        this.conditionSelectOverlaySettings.target = this.conditionSelect.element;\n        this.conditionSelectOverlaySettings.excludeFromOutsideClick = [this.conditionSelect.element as HTMLElement];\n        this.conditionSelectOverlaySettings.positionStrategy = new AutoPositionStrategy();\n\n        if (!this.selectedColumn) {\n            this.columnSelect.input.nativeElement.focus();\n        } else if (this.selectedColumn.filters.condition(this.selectedCondition).isUnary) {\n            this.conditionSelect.input.nativeElement.focus();\n        } else {\n            this.searchValueInput.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearSelection() {\n        for (const group of this.selectedGroups) {\n            group.selected = false;\n        }\n        this.selectedGroups = [];\n\n        for (const expr of this.selectedExpressions) {\n            expr.selected = false;\n        }\n        this.selectedExpressions = [];\n\n        this.toggleContextMenu();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public enterExpressionAdd(expressionItem: ExpressionOperandItem) {\n        this.clearSelection();\n        this.exitOperandEdit();\n\n        if (this.addModeExpression) {\n            this.addModeExpression.inAddMode = false;\n        }\n\n        expressionItem.inAddMode = true;\n        this.addModeExpression = expressionItem;\n        if (expressionItem.selected) {\n            this.toggleExpression(expressionItem);\n        }\n    }\n\n    private onToggleExpression(expressionItem: ExpressionOperandItem) {\n        this.exitOperandEdit();\n        this.toggleExpression(expressionItem);\n\n        this.toggleContextMenu();\n    }\n\n    private toggleExpression(expressionItem: ExpressionOperandItem) {\n        expressionItem.selected = !expressionItem.selected;\n\n        if (expressionItem.selected) {\n            this.selectedExpressions.push(expressionItem);\n        } else {\n            const index = this.selectedExpressions.indexOf(expressionItem);\n            this.selectedExpressions.splice(index, 1);\n            this.deselectParentRecursive(expressionItem);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public contextMenuClosed() {\n        this.contextualGroup = null;\n    }\n\n    private toggleContextMenu() {\n        const contextualGroup = this.findSingleSelectedGroup();\n\n        if (contextualGroup || this.selectedExpressions.length > 1) {\n            this.contextualGroup = contextualGroup;\n\n            if (contextualGroup) {\n                this.filteringLogics = [\n                    {\n                        label: this.grid.resourceStrings.igx_grid_filter_operator_and,\n                        selected: contextualGroup.operator === FilteringLogic.And\n                    },\n                    {\n                        label: this.grid.resourceStrings.igx_grid_filter_operator_or,\n                        selected: contextualGroup.operator === FilteringLogic.Or\n                    }\n                ];\n            }\n        } else if (this.contextMenuToggle) {\n            this.contextMenuToggle.close();\n        }\n    }\n\n    private findSingleSelectedGroup(): ExpressionGroupItem {\n        for (const group of this.selectedGroups) {\n            const containsAllSelectedExpressions = this.selectedExpressions.every(op => this.isInsideGroup(op, group));\n\n            if (containsAllSelectedExpressions) {\n                return group;\n            }\n        }\n\n        return null;\n    }\n\n    private isInsideGroup(item: ExpressionItem, group: ExpressionGroupItem): boolean {\n        if (!item) {\n            return false;\n        }\n\n        if (item.parent === group) {\n            return true;\n        }\n\n        return this.isInsideGroup(item.parent, group);\n    }\n\n    private deleteItem(expressionItem: ExpressionItem) {\n        if (!expressionItem.parent) {\n            this.rootGroup = null;\n            this.currentGroup = null;\n            return;\n        }\n\n        if (expressionItem === this.currentGroup) {\n            this.currentGroup = this.currentGroup.parent;\n        }\n\n        const children = expressionItem.parent.children;\n        const index = children.indexOf(expressionItem);\n        children.splice(index, 1);\n\n        if (!children.length) {\n            this.deleteItem(expressionItem.parent);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onKeyDown(eventArgs: KeyboardEvent) {\n        eventArgs.stopPropagation();\n        const key = eventArgs.key;\n        if (!this.contextMenuToggle.collapsed && (key === KEYS.ESCAPE || key === KEYS.ESCAPE_IE)) {\n            this.clearSelection();\n        } else if (key === KEYS.ESCAPE || key === KEYS.ESCAPE_IE) {\n            this.closeDialog();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public createAndGroup() {\n        this.createGroup(FilteringLogic.And);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public createOrGroup() {\n        this.createGroup(FilteringLogic.Or);\n    }\n\n    private createGroup(operator: FilteringLogic) {\n        const chips = this.chips.toArray();\n        const minIndex = this.selectedExpressions.reduce((i, e) => Math.min(i, chips.findIndex(c => c.data === e)), Number.MAX_VALUE);\n        const firstExpression = chips[minIndex].data;\n\n        const parent = firstExpression.parent;\n        const groupItem = new ExpressionGroupItem(operator, parent);\n\n        const index = parent.children.indexOf(firstExpression);\n        parent.children.splice(index, 0, groupItem);\n\n        for (const expr of this.selectedExpressions) {\n            this.deleteItem(expr);\n            groupItem.children.push(expr);\n            expr.parent = groupItem;\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public deleteFilters() {\n        for (const expr of this.selectedExpressions) {\n            this.deleteItem(expr);\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onGroupClick(groupItem: ExpressionGroupItem) {\n        this.toggleGroup(groupItem);\n    }\n\n    private toggleGroup(groupItem: ExpressionGroupItem) {\n        this.exitOperandEdit();\n        if (groupItem.children && groupItem.children.length) {\n            this.toggleGroupRecursive(groupItem, !groupItem.selected);\n            if (!groupItem.selected) {\n                this.deselectParentRecursive(groupItem);\n            }\n            this.toggleContextMenu();\n        }\n    }\n\n    private toggleGroupRecursive(groupItem: ExpressionGroupItem, selected: boolean) {\n        if (groupItem.selected !== selected) {\n            groupItem.selected = selected;\n\n            if (groupItem.selected) {\n                this.selectedGroups.push(groupItem);\n            } else {\n                const index = this.selectedGroups.indexOf(groupItem);\n                this.selectedGroups.splice(index, 1);\n            }\n        }\n\n        for (const expr of groupItem.children) {\n            if (expr instanceof ExpressionGroupItem) {\n                this.toggleGroupRecursive(expr, selected);\n            } else {\n                const operandExpression = expr as ExpressionOperandItem;\n                if (operandExpression.selected !== selected) {\n                    this.toggleExpression(operandExpression);\n                }\n            }\n        }\n    }\n\n    private deselectParentRecursive(expressionItem: ExpressionItem) {\n        const parent = expressionItem.parent;\n        if (parent) {\n            if (parent.selected) {\n                parent.selected = false;\n                const index = this.selectedGroups.indexOf(parent);\n                this.selectedGroups.splice(index, 1);\n            }\n            this.deselectParentRecursive(parent);\n        }\n    }\n\n    private calculateContextMenuTarget() {\n        const containerRect = this.expressionsContainer.nativeElement.getBoundingClientRect();\n        const chips = this.chips.filter(c => this.selectedExpressions.indexOf(c.data) !== -1);\n        let minTop = chips.reduce((t, c) =>\n            Math.min(t, c.elementRef.nativeElement.getBoundingClientRect().top), Number.MAX_VALUE);\n        minTop = Math.max(containerRect.top, minTop);\n        minTop = Math.min(containerRect.bottom, minTop);\n        let maxRight = chips.reduce((r, c) =>\n            Math.max(r, c.elementRef.nativeElement.getBoundingClientRect().right), 0);\n        maxRight = Math.max(maxRight, containerRect.left);\n        maxRight = Math.min(maxRight, containerRect.right);\n        this._overlaySettings.target = new Point(maxRight, minTop);\n    }\n\n    private scrollElementIntoView(target: HTMLElement) {\n        const container = this.expressionsContainer.nativeElement;\n        const targetOffset = target.offsetTop - container.offsetTop;\n        const delta = 10;\n\n        if (container.scrollTop + delta > targetOffset) {\n            container.scrollTop = targetOffset - delta;\n        } else if (container.scrollTop + container.clientHeight < targetOffset + target.offsetHeight + delta) {\n            container.scrollTop = targetOffset + target.offsetHeight + delta - container.clientHeight;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ungroup() {\n        const selectedGroup = this.contextualGroup;\n        const parent = selectedGroup.parent;\n        if (parent) {\n            const index = parent.children.indexOf(selectedGroup);\n            parent.children.splice(index, 1, ...selectedGroup.children);\n\n            for (const expr of selectedGroup.children) {\n                expr.parent = parent;\n            }\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public deleteGroup() {\n        const selectedGroup = this.contextualGroup;\n        const parent = selectedGroup.parent;\n        if (parent) {\n            const index = parent.children.indexOf(selectedGroup);\n            parent.children.splice(index, 1);\n        } else {\n            this.rootGroup = null;\n        }\n\n        this.clearSelection();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectFilteringLogic(event: IButtonGroupEventArgs) {\n        this.contextualGroup.operator = event.index as FilteringLogic;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getConditionFriendlyName(name: string): string {\n        return this.grid.resourceStrings[`igx_grid_filter_${name}`] || name;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isDate(value: any) {\n        return value instanceof Date;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onExpressionsScrolled() {\n        if (!this.contextMenuToggle.collapsed) {\n            this.calculateContextMenuTarget();\n            this.contextMenuToggle.reposition();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public invokeClick(eventArgs: KeyboardEvent) {\n        if (eventArgs.key === KEYS.ENTER || eventArgs.key === KEYS.SPACE || eventArgs.key === KEYS.SPACE_IE) {\n            eventArgs.preventDefault();\n            (eventArgs.currentTarget as HTMLElement).click();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onOutletPointerDown(event) {\n        // This prevents closing the select's dropdown when clicking the scroll\n        event.preventDefault();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getConditionList(): string[] {\n        return this.selectedColumn ? this.selectedColumn.filters.conditionList() : [];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public initialize(grid: GridType, overlayService: IgxOverlayService,\n        overlayComponentId: string) {\n        this.inline = false;\n        this.grid = grid;\n        this._overlayService = overlayService;\n        this._overlayComponentId = overlayComponentId;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getFormat(field: string) {\n        return this.grid.getColumnByName(field).pipeArgs.format;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getTimezone(field: string) {\n        return this.grid.getColumnByName(field).pipeArgs.timezone;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public setAddButtonFocus() {\n        if (this.addRootAndGroupButton) {\n            this.addRootAndGroupButton.nativeElement.focus();\n        } else if (this.addConditionButton) {\n            this.addConditionButton.nativeElement.focus();\n        }\n    }\n\n    private init() {\n        this.clearSelection();\n        this.cancelOperandAdd();\n        this.cancelOperandEdit();\n        this.rootGroup = this.createExpressionGroupItem(this.grid.advancedFilteringExpressionsTree);\n        this.currentGroup = this.rootGroup;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public context(expression: ExpressionItem, afterExpression?: ExpressionItem) {\n        return {\n            $implicit: expression,\n            afterExpression\n        };\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onClearButtonClick() {\n        this.grid.endEdit(false);\n        this.grid.advancedFilteringExpressionsTree = null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public closeDialog() {\n        if (this._overlayComponentId) {\n            this._overlayService.hide(this._overlayComponentId);\n        }\n        this.grid.navigation.activeNode = this.lastActiveNode;\n        if (this.grid.navigation.activeNode && this.grid.navigation.activeNode.row === -1) {\n            (this.grid as any).theadRow.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public applyChanges() {\n        this.grid.endEdit(false);\n        this.exitOperandEdit();\n        this.grid.advancedFilteringExpressionsTree = this.createExpressionsTreeFromGroupItem(this.rootGroup);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cancelChanges() {\n        if (!this._overlayComponentId) {\n            this.init();\n        }\n        this.closeDialog();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onApplyButtonClick() {\n        this.applyChanges();\n        this.closeDialog();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipSelectionEnd() {\n        const contextualGroup = this.findSingleSelectedGroup();\n        if (contextualGroup || this.selectedExpressions.length > 1) {\n            this.contextualGroup = contextualGroup;\n            this.calculateContextMenuTarget();\n            if (this.contextMenuToggle.collapsed) {\n                this.contextMenuToggle.open(this._overlaySettings);\n            } else {\n                this.contextMenuToggle.reposition();\n            }\n        }\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxRowSelector]'\n})\nexport class IgxRowSelectorDirective {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxGroupByRowSelector]'\n})\nexport class IgxGroupByRowSelectorDirective {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxHeadSelector]'\n})\nexport class IgxHeadSelectorDirective {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n","import { Directive, Input, OnDestroy, NgModule, TemplateRef } from '@angular/core';\nimport { IgxDragDirective } from '../directives/drag-drop/drag-drop.directive';\nimport { KEYS } from '../core/utils';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { IgxRowDirective, IgxGridBaseDirective } from './grid/public_api';\nimport { IRowDragStartEventArgs, IRowDragEndEventArgs } from './common/events';\nimport { GridType } from './common/grid.interface';\nimport { IgxHierarchicalRowComponent } from './hierarchical-grid/hierarchical-row.component';\n\n\nconst ghostBackgroundClass = 'igx-grid__tr--ghost';\nconst gridCellClass = 'igx-grid__td';\nconst rowSelectedClass = 'igx-grid__tr--selected';\nconst cellSelectedClass = 'igx-grid__td--selected';\nconst cellActiveClass = 'igx-grid__td--active';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowDrag]'\n})\nexport class IgxRowDragDirective extends IgxDragDirective implements OnDestroy {\n    private subscription$: Subscription;\n    private _rowDragStarted = false;\n    private get row(): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.data;\n    }\n\n    @Input('igxRowDrag')\n    public data: any;\n\n    public onPointerDown(event) {\n        event.preventDefault();\n        this._rowDragStarted = false;\n        this._removeOnDestroy = false;\n        super.onPointerDown(event);\n    }\n\n    public onPointerMove(event) {\n        super.onPointerMove(event);\n        if (this._dragStarted && !this._rowDragStarted) {\n            this._rowDragStarted = true;\n            const args: IRowDragStartEventArgs = {\n                dragDirective: this,\n                dragData: this.row,\n                cancel: false,\n                owner: this.row.grid\n            };\n\n            this.row.grid.onRowDragStart.emit(args);\n            if (args.cancel) {\n                this.ghostElement.parentNode.removeChild(this.ghostElement);\n                this.ghostElement = null;\n                this._dragStarted = false;\n                this._clicked = false;\n                return;\n            }\n            this.row.grid.dragRowID = this.row.rowID;\n            this.row.grid.rowDragging = true;\n            this.row.grid.markForCheck();\n\n            this.subscription$ = fromEvent(this.row.grid.document.defaultView, 'keydown').subscribe((ev: KeyboardEvent) => {\n                if (ev.key === KEYS.ESCAPE || ev.key === KEYS.ESCAPE_IE) {\n                    this._lastDropArea = false;\n                    this.onPointerUp(event);\n                }\n            });\n        }\n    }\n\n    public onPointerUp(event) {\n\n        if (!this._clicked) {\n            return;\n        }\n\n        const args: IRowDragEndEventArgs = {\n            dragDirective: this,\n            dragData: this.row,\n            animation: false,\n            owner: this.row.grid\n        };\n        this.zone.run(() => {\n            this.row.grid.onRowDragEnd.emit(args);\n        });\n\n        const dropArea = this._lastDropArea;\n        super.onPointerUp(event);\n        if (!dropArea && this.ghostElement) {\n            this.ghostElement.addEventListener('transitionend', this.transitionEndEvent, false);\n        }   else {\n            this.endDragging();\n        }\n    }\n\n    protected createGhost(pageX, pageY) {\n        this.row.grid.endEdit(true);\n        this.row.grid.markForCheck();\n        this.ghostContext = {\n            $implicit: this.row.rowData,\n            data: this.row.rowData,\n            grid: this.row.grid\n        };\n        super.createGhost(pageX, pageY, this.row.nativeElement);\n\n        // check if there is an expander icon and create the ghost at the corresponding position\n        if (this.isHierarchicalGrid) {\n            const row = this.row as IgxHierarchicalRowComponent;\n            if (row.expander) {\n                const expanderWidth = row.expander.nativeElement.getBoundingClientRect().width;\n                this._ghostHostX += expanderWidth;\n            }\n        }\n\n        const ghost = this.ghostElement;\n\n        const gridRect = this.row.grid.nativeElement.getBoundingClientRect();\n        const rowRect = this.row.nativeElement.getBoundingClientRect();\n        ghost.style.overflow = 'hidden';\n        ghost.style.width = gridRect.width + 'px';\n        ghost.style.height = rowRect.height + 'px';\n\n        this.renderer.addClass(ghost, ghostBackgroundClass);\n        this.renderer.removeClass(ghost, rowSelectedClass);\n\n        const ghostCells = ghost.getElementsByClassName(gridCellClass);\n        for (let index = 0; index < ghostCells.length; index++) {\n            this.renderer.removeClass(ghostCells[index], cellSelectedClass);\n            this.renderer.removeClass(ghostCells[index], cellActiveClass);\n        }\n    }\n\n    private _unsubscribe() {\n        if (this.subscription$ && !this.subscription$.closed) {\n            this.subscription$.unsubscribe();\n        }\n    }\n\n    private endDragging() {\n        this.onTransitionEnd(null);\n        this.row.grid.dragRowID = null;\n        this.row.grid.rowDragging = false;\n        this.row.grid.markForCheck();\n        this._unsubscribe();\n    }\n\n    private transitionEndEvent = (evt?) => {\n        if (this.ghostElement) {\n            this.ghostElement.removeEventListener('transitionend', this.transitionEndEvent, false);\n        }\n        this.endDragging();\n    }\n\n    private get isHierarchicalGrid() {\n        return this.row.grid.nativeElement.tagName.toLowerCase() === 'igx-hierarchical-grid';\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxDragIndicatorIcon]'\n})\n\nexport class IgxDragIndicatorIconDirective {\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowDragGhost]'\n})\n\nexport class IgxRowDragGhostDirective  {\n    constructor(public templateRef: TemplateRef<any>) { }\n}\n\n@NgModule({\n    declarations: [IgxRowDragDirective, IgxDragIndicatorIconDirective, IgxRowDragGhostDirective],\n    entryComponents: [],\n    exports: [IgxRowDragDirective, IgxDragIndicatorIconDirective, IgxRowDragGhostDirective],\n    imports: []\n})\n\nexport class IgxRowDragModule {\n}\n","import {\n    AnimationEvent,\n    transition,\n    trigger,\n    useAnimation\n} from '@angular/animations';\nimport { CommonModule } from '@angular/common';\nimport {\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    NgZone,\n    Output\n} from '@angular/core';\nimport { fadeIn, fadeOut, slideInBottom, slideOutBottom } from '../animations/main';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Snackbar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/snackbar.html)\n *\n * The Ignite UI Snack Bar provides feedback about an operation with a single-line message, which can\n * include a link to an action such as Undo.\n *\n * Example:\n * ```html\n * <button (click)=\"snackbar.show()\">Send message</button>\n * <div>\n *   <igx-snackbar #snackbar message=\"Message sent\">\n *   </igx-snackbar>\n * </div>\n * ```\n */\n@Component({\n    animations: [\n        trigger('slideInOut', [\n            transition('void => *', [\n                useAnimation(slideInBottom, {\n                    params: {\n                        duration: '.35s',\n                        easing: 'cubic-bezier(0.0, 0.0, 0.2, 1)',\n                        fromPosition: 'translateY(100%)',\n                        toPosition: 'translateY(0)'\n                    }\n                })\n            ]),\n            transition('* => void', [\n                useAnimation(slideOutBottom, {\n                    params: {\n                        duration: '.2s',\n                        easing: 'cubic-bezier(0.4, 0.0, 1, 1)',\n                        fromPosition: 'translateY(0)',\n                        toOpacity: 1,\n                        toPosition: 'translateY(100%)'\n                    }\n                })\n            ])\n        ]),\n        trigger('fadeInOut', [\n            transition('void => *', [\n                useAnimation(fadeIn, {\n                    params: {\n                        duration: '.35s',\n                        easing: 'ease-out'\n                    }\n                })\n            ]),\n            transition('* => void', [\n                useAnimation(fadeOut, {\n                    params: {\n                        duration: '.2s',\n                        easing: 'ease-out'\n                    }\n                })\n            ])\n        ])\n    ],\n    selector: 'igx-snackbar',\n    templateUrl: 'snackbar.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxSnackbarComponent {\n\n    /**\n     * Sets/gets the `id` of the snackbar.\n     * If not set, the `id` of the first snackbar component  will be `\"igx-snackbar-0\"`;\n     * ```html\n     * <igx-snackbar id = \"Snackbar1\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let snackbarId = this.snackbar.id;\n     * ```\n     * @memberof IgxSnackbarComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-snackbar-${NEXT_ID++}`;\n\n    /**\n     * Sets/gets the `message` attribute.\n     * ```html\n     * <igx-snackbar [message] = \"'Snackbar Component'\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let message =  this.snackbar.message;\n     * ```\n     */\n    @DeprecateProperty(`'message' property is deprecated.\n    You can use place the message in the snackbar content or pass a message parameter to the show method instead.`)\n    @Input()\n    public set message(value: string) {\n        this.snackbarMessage = value;\n    }\n    public get message() {\n        return this.snackbarMessage;\n    }\n\n    /**\n     * Enables/Disables the visibility of the snackbar.\n     * If not set, the `isVisible` attribute will have value `false`.\n     * ```html\n     * <igx-snackbar [isVisible] = \"true\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let isVisible =  this.snackbar.isVisible;\n     * ```\n     */\n    @Input() public isVisible = false;\n\n    /**\n     * Sets/gets if the snackbar will be automatically hidden after the `displayTime` is over.\n     * Default value is `true`.\n     * ```html\n     * <igx-snackbar [autoHide] = \"false\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let autoHide =  this.snackbar.autoHide;\n     * ```\n     */\n    @Input() public autoHide = true;\n\n    /**\n     * Sets/gets the duration of time(in milliseconds) in which the snackbar will be visible after it is being shown.\n     * Default value is 4000.\n     * ```html\n     * <igx-snackbar [displayTime] = \"2000\"></igx-snackbar>\n     * ```\n     * ```typescript\n     * let displayTime = this.snackbar.displayTime;\n     * ```\n     */\n    @Input() public displayTime = 4000;\n\n    /**\n     * Sets/gets the `actionText` attribute.\n     * ```html\n     * <igx-snackbar [actionText] = \"'Action Text'\"></igx-snackbar>\n     * ```\n     */\n    @Input() public actionText?: string;\n\n    /**\n     * An event that will be emitted when the action is executed.\n     * Provides reference to the `IgxSnackbarComponent` as an argument.\n     * ```html\n     * <igx-snackbar (onAction) = \"onAction($event)\"></igx-snackbar>\n     * ```\n     */\n    @Output() public onAction = new EventEmitter<IgxSnackbarComponent>();\n\n    /**\n     * An event that will be emitted when the snackbar animation starts.\n     * Provides reference to the `AnimationEvent` interface as an argument.\n     * ```html\n     * <igx-snackbar (animationStarted) = \"animationStarted($event)\"></igx-snackbar>\n     * ```\n     */\n    @Output() public animationStarted = new EventEmitter<AnimationEvent>();\n\n    /**\n     * An event that will be emitted when the snackbar animation ends.\n     * Provides reference to the `AnimationEvent` interface as an argument.\n     * ```html\n     * <igx-snackbar (animationDone) = \"animationDone($event)\"></igx-snackbar>\n     * ```\n     */\n    @Output() public animationDone = new EventEmitter<AnimationEvent>();\n\n    /**\n     * @hidden\n     * @internal\n     */\n    snackbarMessage = '';\n\n    /**\n     * @hidden\n     */\n    private timeoutId;\n\n    constructor(private zone: NgZone) { }\n\n    /**\n     * Shows the snackbar and hides it after the `displayTime` is over if `autoHide` is set to `true`.\n     * ```typescript\n     * this.snackbar.show();\n     * ```\n     */\n    public show(message?: string): void {\n        clearTimeout(this.timeoutId);\n        if (message !== undefined) { this.snackbarMessage = message; }\n        setTimeout(this.timeoutId);\n        this.isVisible = true;\n\n        if (this.autoHide) {\n            this.timeoutId = setTimeout(() => {\n                this.hide();\n            }, this.displayTime);\n        }\n    }\n\n    /**\n     * Hides the snackbar.\n     * ```typescript\n     * this.snackbar.hide();\n     * ```\n     */\n    public hide(): void {\n        this.isVisible = false;\n        clearTimeout(this.timeoutId);\n    }\n    /**\n     * @hidden\n     */\n    public triggerAction(): void {\n        this.onAction.emit(this);\n    }\n    /**\n     * @hidden\n     * @memberof IgxSnackbarComponent\n     */\n    public snackbarAnimationStarted(evt: AnimationEvent): void {\n        if (evt.fromState === 'void') {\n            this.animationStarted.emit(evt);\n        }\n    }\n    /**\n     * @hidden\n     * @memberof IgxSnackbarComponent\n     */\n    public snackbarAnimationDone(evt: AnimationEvent): void {\n        if (evt.fromState === 'show') {\n            this.animationDone.emit(evt);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxSnackbarComponent],\n    exports: [IgxSnackbarComponent],\n    imports: [CommonModule]\n})\nexport class IgxSnackbarModule { }\n","import { DOCUMENT, DatePipe, DecimalPipe } from '@angular/common';\nimport {\n    AfterContentInit,\n    AfterViewInit,\n    ChangeDetectorRef,\n    ComponentFactoryResolver,\n    ContentChildren,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    IterableChangeRecord,\n    IterableDiffers,\n    NgZone,\n    OnDestroy,\n    OnInit,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    ViewContainerRef,\n    InjectionToken,\n    Optional,\n    DoCheck,\n    Directive,\n    LOCALE_ID,\n    HostListener\n} from '@angular/core';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport 'igniteui-trial-watermark';\nimport { Subject, pipe, fromEvent, noop } from 'rxjs';\nimport { takeUntil, first, filter, throttleTime, map, shareReplay } from 'rxjs/operators';\nimport { cloneArray, flatten, mergeObjects, isIE, compareMaps, resolveNestedPath, isObject } from '../core/utils';\nimport { DataType } from '../data-operations/data-util';\nimport { FilteringLogic, IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { IGroupByRecord } from '../data-operations/groupby-record.interface';\nimport { ISortingExpression } from '../data-operations/sorting-expression.interface';\nimport { IgxGridForOfDirective } from '../directives/for-of/for_of.directive';\nimport { IgxTextHighlightDirective } from '../directives/text-highlight/text-highlight.directive';\nimport {\n    AbsoluteScrollStrategy,\n    HorizontalAlignment,\n    VerticalAlignment,\n    IgxOverlayService,\n    OverlaySettings,\n    PositionSettings,\n    ConnectedPositioningStrategy,\n    ContainerPositionStrategy,\n    StateUpdateEvent,\n    TransactionEventOrigin\n} from '../services/public_api';\nimport { GridBaseAPIService } from './api.service';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IColumnVisibilityChangedEventArgs } from './column-actions/column-hiding.directive';\nimport { ISummaryExpression } from './summaries/grid-summary';\nimport { RowEditPositionStrategy, IPinningConfig } from './grid.common';\nimport { IgxGridToolbarComponent } from './toolbar/grid-toolbar.component';\nimport { IgxRowDirective } from './row.directive';\nimport { IgxGridHeaderComponent } from './headers/grid-header.component';\nimport { IgxOverlayOutletDirective, IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport {\n    FilteringExpressionsTree, IFilteringExpressionsTree, FilteringExpressionsTreeType\n} from '../data-operations/filtering-expressions-tree';\nimport { IFilteringOperation } from '../data-operations/filtering-condition';\nimport { Transaction, TransactionType, TransactionService, State } from '../services/public_api';\nimport {\n    IgxRowEditTemplateDirective,\n    IgxRowEditTabStopDirective,\n    IgxRowEditTextDirective,\n    IgxRowEditActionsDirective\n} from './grid.rowEdit.directive';\nimport { IgxGridNavigationService, IActiveNode } from './grid-navigation.service';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase, DisplayDensity } from '../core/displayDensity';\nimport { IgxGridRowComponent } from './grid/public_api';\nimport { IgxFilteringService } from './filtering/grid-filtering.service';\nimport { IgxGridFilteringCellComponent } from './filtering/base/grid-filtering-cell.component';\nimport { WatchChanges } from './watch-changes';\nimport { IgxGridHeaderGroupComponent } from './headers/grid-header-group.component';\nimport { IGridResourceStrings } from '../core/i18n/grid-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { IgxGridSummaryService } from './summaries/grid-summary.service';\nimport { IgxSummaryRowComponent } from './summaries/summary-row.component';\nimport {\n    IgxGridSelectionService,\n    GridSelectionRange,\n    IgxGridCRUDService,\n    IgxRow,\n    IgxCell,\n    isChromium\n} from './selection/selection.service';\nimport { DragScrollDirection } from './selection/drag-select.directive';\nimport { ICachedViewLoadedEventArgs, IgxTemplateOutletDirective } from '../directives/template-outlet/template_outlet.directive';\nimport { IgxExcelStyleLoadingValuesTemplateDirective } from './filtering/excel-style/excel-style-search.component';\nimport { IgxGridColumnResizerComponent } from './resizing/resizer.component';\nimport { IgxGridFilteringRowComponent } from './filtering/base/grid-filtering-row.component';\nimport { CharSeparatedValueData } from '../services/csv/char-separated-value-data';\nimport { IgxColumnResizingService } from './resizing/resizing.service';\nimport { IFilteringStrategy } from '../data-operations/filtering-strategy';\nimport {\n    IgxRowExpandedIndicatorDirective, IgxRowCollapsedIndicatorDirective,\n    IgxHeaderExpandIndicatorDirective, IgxHeaderCollapseIndicatorDirective, IgxExcelStyleHeaderIconDirective\n} from './grid/grid.directives';\nimport {\n    GridKeydownTargetType,\n    GridSelectionMode,\n    GridSummaryPosition,\n    GridSummaryCalculationMode,\n    FilterMode,\n    ColumnPinningPosition,\n    RowPinningPosition,\n    GridPagingMode\n} from './common/enums';\nimport {\n    IGridCellEventArgs,\n    IRowSelectionEventArgs,\n    IPinColumnEventArgs,\n    IGridEditEventArgs,\n    IPageEventArgs,\n    IRowDataEventArgs,\n    IColumnResizeEventArgs,\n    IColumnMovingStartEventArgs,\n    IColumnMovingEventArgs,\n    IColumnMovingEndEventArgs,\n    IGridKeydownEventArgs,\n    IRowDragStartEventArgs,\n    IRowDragEndEventArgs,\n    IGridClipboardEvent,\n    IGridToolbarExportEventArgs,\n    ISearchInfo,\n    ICellPosition,\n    IRowToggleEventArgs,\n    IColumnSelectionEventArgs,\n    IPinRowEventArgs,\n    IGridScrollEventArgs,\n    IGridEditDoneEventArgs,\n    IActiveNodeChangeEventArgs\n} from './common/events';\nimport { IgxAdvancedFilteringDialogComponent } from './filtering/advanced-filtering/advanced-filtering-dialog.component';\nimport { GridType } from './common/grid.interface';\nimport { DropPosition } from './moving/moving.service';\nimport { IgxHeadSelectorDirective, IgxRowSelectorDirective } from './selection/row-selectors';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IgxColumnGroupComponent } from './columns/column-group.component';\nimport { IGridSortingStrategy } from '../data-operations/sorting-strategy';\nimport { IgxRowDragGhostDirective, IgxDragIndicatorIconDirective } from './row-drag.directive';\nimport { IgxGridExcelStyleFilteringComponent } from './filtering/excel-style/grid.excel-style-filtering.component';\nimport { IgxSnackbarComponent } from '../snackbar/snackbar.component';\nimport { v4 as uuidv4 } from 'uuid';\nimport { IgxActionStripComponent } from '../action-strip/action-strip.component';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\n\nlet FAKE_ROW_ID = -1;\n\nconst MINIMUM_COLUMN_WIDTH = 136;\nconst FILTER_ROW_HEIGHT = 50;\n// By default row editing overlay outlet is inside grid body so that overlay is hidden below grid header when scrolling.\n// In cases when grid has 1-2 rows there isn't enough space in grid body and row editing overlay should be shown above header.\n// Default row editing overlay height is higher then row height that is why the case is valid also for row with 2 rows.\n// More accurate calculation is not possible, cause row editing overlay is still not shown and we don't know its height,\n// but in the same time we need to set row editing overlay outlet before opening the overlay itself.\nconst MIN_ROW_EDITING_COUNT_THRESHOLD = 2;\n\nexport const IgxGridTransaction = new InjectionToken<string>('IgxGridTransaction');\n\n@Directive()\nexport abstract class IgxGridBaseDirective extends DisplayDensityBase implements GridType,\n    OnInit, DoCheck, OnDestroy, AfterContentInit, AfterViewInit {\n    private _customDragIndicatorIconTemplate: TemplateRef<any>;\n    protected _init = true;\n    private _cdrRequests = false;\n    protected _cdrRequestRepaint = false;\n\n    /**\n     * @hidden @internal\n     */\n    public get scrollSize() {\n        return this.verticalScrollContainer.getScrollNativeSize();\n    }\n\n    private _resourceStrings = CurrentResourceStrings.GridResStrings;\n    private _emptyGridMessage = null;\n    private _emptyFilteredGridMessage = null;\n    private _isLoading = false;\n    private _locale: string;\n    public _destroyed = false;\n    private overlayIDs = [];\n    private _filteringStrategy: IFilteringStrategy;\n    private _sortingStrategy: IGridSortingStrategy;\n    private _pinning: IPinningConfig = { columns: ColumnPinningPosition.Start };\n\n    private _hostWidth;\n    private _advancedFilteringOverlayId: string;\n    private _advancedFilteringPositionSettings: PositionSettings = {\n        verticalDirection: VerticalAlignment.Middle,\n        horizontalDirection: HorizontalAlignment.Center,\n        horizontalStartPoint: HorizontalAlignment.Center,\n        verticalStartPoint: VerticalAlignment.Middle\n    };\n\n    private _advancedFilteringOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: false,\n        modal: false,\n        positionStrategy: new ConnectedPositioningStrategy(this._advancedFilteringPositionSettings),\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public decimalPipe: DecimalPipe;\n    /**\n     * @hidden @internal\n     */\n    public datePipe: DatePipe;\n\n    protected _userOutletDirective: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultExpandedTemplate', { read: TemplateRef, static: true })\n    protected defaultExpandedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultCollapsedTemplate', { read: TemplateRef, static: true })\n    protected defaultCollapsedTemplate: TemplateRef<any>;\n\n     /**\n      * @hidden @internal\n      */\n    @ViewChild('defaultESFHeaderIcon', { read: TemplateRef, static: true })\n    protected defaultESFHeaderIconTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets the resource strings.\n     * @remarks\n     * By default it uses EN resources.\n     */\n    @Input()\n    set resourceStrings(value: IGridResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    get resourceStrings(): IGridResourceStrings {\n        return this._resourceStrings;\n    }\n\n    /**\n     * Gets/Sets the display time for the row adding snackbar notification.\n     * @remarks\n     * By default it is 6000ms.\n     */\n    @Input()\n    public snackbarDisplayTime = 6000;\n\n    /**\n     * Gets/Sets whether to autogenerate the columns.\n     * @remarks\n     * The default value is false. When set to true, it will override all columns declared through code or in markup.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public autoGenerate = false;\n\n    /**\n     * @hidden @internal\n     */\n    public abstract id: string;\n\n    /**\n     * @hidden @internal\n     */\n    public cancelAddMode = false;\n\n    /**\n     * Gets/Sets a custom template when empty.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [emptyGridTemplate]=\"myTemplate\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public emptyGridTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets a custom template for adding row UI when grid is empty.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [addRowEmptyTemplate]=\"myTemplate\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public addRowEmptyTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets a custom template when loading.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [loadingGridTemplate]=\"myTemplate\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public loadingGridTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets the filtering logic of the `IgxGridComponent`.\n     * @remarks\n     * The default is AND.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\" [filteringLogic]=\"filtering\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get filteringLogic() {\n        return this._filteringExpressionsTree.operator;\n    }\n\n    public set filteringLogic(value: FilteringLogic) {\n        this._filteringExpressionsTree.operator = value;\n    }\n\n    /**\n     * Gets/Sets the filtering state.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(filteringExpressionsTree)]=\"model.filteringExpressions\"></igx-grid>\n     * ```\n     * @remarks\n     * Supports two-way binding.\n     */\n    @WatchChanges()\n    @Input()\n    get filteringExpressionsTree() {\n        return this._filteringExpressionsTree;\n    }\n\n    set filteringExpressionsTree(value) {\n        if (value && value instanceof FilteringExpressionsTree) {\n            const val = (value as FilteringExpressionsTree);\n            for (let index = 0; index < val.filteringOperands.length; index++) {\n                if (!(val.filteringOperands[index] instanceof FilteringExpressionsTree)) {\n                    const newExpressionsTree = new FilteringExpressionsTree(FilteringLogic.And, val.filteringOperands[index].fieldName);\n                    newExpressionsTree.filteringOperands.push(val.filteringOperands[index] as IFilteringExpression);\n                    val.filteringOperands[index] = newExpressionsTree;\n                }\n            }\n\n            value.type = FilteringExpressionsTreeType.Regular;\n            this._filteringExpressionsTree = value;\n            this._filteringPipeTrigger++;\n            this.filteringExpressionsTreeChange.emit(this._filteringExpressionsTree);\n\n            if (this.filteringService.isFilteringExpressionsTreeEmpty(this._filteringExpressionsTree) &&\n                !this.advancedFilteringExpressionsTree) {\n                this.filteredData = null;\n            }\n\n            this.filteringService.refreshExpressions();\n            this.selectionService.clearHeaderCBState();\n            this.summaryService.clearSummaryCache();\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Emitted after filtering is performed.\n     * @remarks\n     * Returns the filtering expressions tree of the column for which filtering was performed.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"\n     *              (filteringExpressionsTreeChange)=\"filteringExprTreeChange($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public filteringExpressionsTreeChange = new EventEmitter<IFilteringExpressionsTree>();\n\n    /**\n     * Emitted after advanced filtering is performed.\n     * @remarks\n     * Returns the advanced filtering expressions tree.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"\n     *           (advancedFilteringExpressionsTreeChange)=\"advancedFilteringExprTreeChange($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public advancedFilteringExpressionsTreeChange = new EventEmitter<IFilteringExpressionsTree>();\n\n    /**\n     * Emitted when grid is scrolled horizontally/vertically.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"\n     *              (onScroll)=\"onScroll($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onScroll = new EventEmitter<IGridScrollEventArgs>();\n\n    /**\n     * Gets/Sets the advanced filtering state.\n     * @example\n     * ```typescript\n     * let advancedFilteringExpressionsTree = this.grid.advancedFilteringExpressionsTree;\n     * this.grid.advancedFilteringExpressionsTree = logic;\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get advancedFilteringExpressionsTree() {\n        return this._advancedFilteringExpressionsTree;\n    }\n\n    set advancedFilteringExpressionsTree(value) {\n        if (value && value instanceof FilteringExpressionsTree) {\n            value.type = FilteringExpressionsTreeType.Advanced;\n            this._advancedFilteringExpressionsTree = value;\n            this._filteringPipeTrigger++;\n        } else {\n            this._advancedFilteringExpressionsTree = null;\n        }\n        this.advancedFilteringExpressionsTreeChange.emit(this._advancedFilteringExpressionsTree);\n\n        if (this.filteringService.isFilteringExpressionsTreeEmpty(this._advancedFilteringExpressionsTree) &&\n            !this.advancedFilteringExpressionsTree) {\n            this.filteredData = null;\n        }\n\n        this.selectionService.clearHeaderCBState();\n        this.summaryService.clearSummaryCache();\n        this.notifyChanges();\n\n        // Wait for the change detection to update filtered data through the pipes and then emit the event.\n        requestAnimationFrame(() => this.onFilteringDone.emit(this._advancedFilteringExpressionsTree));\n    }\n\n    /**\n     * Gets/Sets the locale.\n     * @remarks\n     * If not set, returns browser's language.\n     */\n    @Input()\n    get locale(): string {\n        return this._locale;\n    }\n\n    set locale(value: string) {\n        if (value !== this._locale) {\n            this._locale = value;\n            this.summaryService.clearSummaryCache();\n            this._pipeTrigger++;\n            this.notifyChanges();\n        }\n    }\n\n    @Input()\n    get pagingMode() {\n        return this._pagingMode;\n    }\n\n    set pagingMode(val: GridPagingMode) {\n        this._pagingMode = val;\n        this._pipeTrigger++;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets whether the paging feature is enabled.\n     * @remarks\n     * The default state is disabled (false).\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [paging]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get paging(): boolean {\n        return this._paging;\n    }\n\n    set paging(value: boolean) {\n        this._paging = value;\n        this._pipeTrigger++;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets the current page index.\n     * @example\n     * ```html\n     *  <igx-grid #grid [data]=\"Data\" [paging]=\"true\" [(page)]=\"model.page\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * Supports two-way binding.\n     */\n    @Input()\n    get page(): number {\n        return this._page;\n    }\n\n    set page(val: number) {\n        if (val === this._page || val < 0 || val > this.totalPages - 1) {\n            return;\n        }\n        this.selectionService.clear(true);\n        this.onPagingDone.emit({ previous: this._page, current: val });\n        this._page = val;\n        this.pageChange.emit(this._page);\n        this.navigateTo(0);\n        this.notifyChanges();\n    }\n\n    /**\n     * Emitted after the current page is changed.\n     * @example\n     * ```html\n     * <igx-grid (pageChange)=\"onPageChange($event)\"></igx-grid>\n     * ```\n     * ```typescript\n     * public onPageChange(page: number) {\n     *   this.currentPage = page;\n     * }\n     * ```\n     */\n    @Output()\n    public pageChange = new EventEmitter<number>();\n\n    /**\n     * Gets/Sets the number of visible items per page.\n     * @remarks\n     * The default is 15.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [paging]=\"true\" [(perPage)]=\"model.perPage\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get perPage(): number {\n        return this._perPage;\n    }\n\n    set perPage(val: number) {\n        if (val < 0) {\n            return;\n        }\n        this.selectionService.clear(true);\n        this._perPage = val;\n        this.perPageChange.emit(this._perPage);\n        this.page = 0;\n        this.endEdit(true);\n        this.notifyChanges();\n    }\n\n    /**\n     * Emitted when `perPage` property value of the grid is changed.\n     * @example\n     * ```html\n     * <igx-grid #grid (perPageChange)=\"onPerPageChange($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * ```typescript\n     * public onPerPageChange(perPage: number) {\n     *   this.perPage = perPage;\n     * }\n     * ```\n     */\n    @Output()\n    public perPageChange = new EventEmitter<number>();\n\n    /**\n     * Gets/Sets a custom `ng-template` for the pagination UI of the grid.\n     * @example\n     * ```html\n     * <igx-grid #grid [paging]=\"true\" [myTemplate]=\"myTemplate\" [height]=\"'305px'\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public paginationTemplate: TemplateRef<any>;\n\n    /**\n     * Gets/Sets whether the column hiding UI is enabled.\n     *\n     * @deprecated\n     *\n     * @remarks\n     * By default it is disabled (false). In order for the UI to work, you need to enable the toolbar as shown in the example below.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\" [showToolbar]=\"true\" [columnHiding]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`columnHiding` is deprecated.')\n    @Input()\n    get columnHiding() {\n        return this._columnHiding;\n    }\n\n    set columnHiding(value) {\n        this._columnHiding = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets if the row selectors are hidden.\n     * @remarks\n     *  By default row selectors are shown\n     */\n    @WatchChanges()\n    @Input()\n    get hideRowSelectors() {\n        return this._hideRowSelectors;\n    }\n\n    set hideRowSelectors(value: boolean) {\n        this._hideRowSelectors = value;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets whether rows can be moved.\n     * @example\n     * ```html\n     * <igx-grid #grid [rowDraggable]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get rowDraggable(): boolean {\n        return this._rowDrag && this.hasVisibleColumns;\n    }\n\n\n    set rowDraggable(val: boolean) {\n        this._rowDrag = val;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public rowDragging = false;\n\n    /**\n     * Gets the row ID that is being dragged.\n     * @remarks\n     * The row ID is either the primaryKey value or the data record instance.\n     */\n    public dragRowID = null;\n\n    /**\n     * @hidden @interal\n     */\n    public addRowParent = null;\n\n    /**\n     * Gets/Sets whether the rows are editable.\n     * @remarks\n     * By default it is set to false.\n     * @example\n     * ```html\n     * <igx-grid #grid [showToolbar]=\"true\" [rowEditable]=\"true\" [primaryKey]=\"'ProductID'\" [columnHiding]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get rowEditable(): boolean {\n        return this._rowEditable;\n    }\n\n    set rowEditable(val: boolean) {\n        if (!this._init) {\n            this.refreshGridState();\n        }\n        this._rowEditable = val;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * Gets/Sets the height.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @HostBinding('style.height')\n    @Input()\n    public get height() {\n        return this._height;\n    }\n\n    public set height(value: string) {\n        if (this._height !== value) {\n            this._height = value;\n            this.nativeElement.style.height = value;\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('style.width')\n    get hostWidth() {\n        return this._width || this._hostWidth;\n    }\n\n    /**\n     * Gets/Sets the width of the grid.\n     * @example\n     * ```typescript\n     * let gridWidth = this.grid.width;\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get width() {\n        return this._width;\n    }\n\n    set width(value) {\n        if (this._width !== value) {\n            this._width = value;\n            this.nativeElement.style.width = value;\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Gets the width of the header.\n     * @example\n     * ```html\n     * let gridHeaderWidth = this.grid.headerWidth;\n     * ```\n     */\n    get headerWidth() {\n        return parseInt(this.width, 10) - 17;\n    }\n\n    /**\n     * Gets/Sets the styling classes applied to all even `IgxGridRowComponent`s in the grid.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [evenRowCSS]=\"'igx-grid--my-even-class'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public evenRowCSS = 'igx-grid__tr--even';\n\n    /**\n     * Gets/Sets the styling classes applied to all odd `IgxGridRowComponent`s in the grid.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [evenRowCSS]=\"'igx-grid--my-odd-class'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public oddRowCSS = 'igx-grid__tr--odd';\n\n    /**\n     * Gets/Sets the row height.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showToolbar]=\"true\" [rowHeight]=\"100\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get rowHeight() {\n        return this._rowHeight ? this._rowHeight : this.defaultRowHeight;\n    }\n\n    public set rowHeight(value) {\n        this._rowHeight = parseInt(value, 10);\n    }\n\n    /**\n     * Gets/Sets the default width of the columns.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showToolbar]=\"true\" [columnWidth]=\"100\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public get columnWidth(): string {\n        return this._columnWidth;\n    }\n    public set columnWidth(value: string) {\n        this._columnWidth = value;\n        this.columnWidthSetByUser = true;\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets the primary key.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showToolbar]=\"true\" [primaryKey]=\"'ProductID'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    public primaryKey;\n\n    /**\n     * Get/Sets the message displayed when there are no records.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [emptyGridMessage]=\"'The grid is empty'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    set emptyGridMessage(value: string) {\n        this._emptyGridMessage = value;\n    }\n    get emptyGridMessage(): string {\n        return this._emptyGridMessage || this.resourceStrings.igx_grid_emptyGrid_message;\n    }\n\n    /**\n     * Gets/Sets whether the grid is going to show a loading indicator.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [isLoading]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    set isLoading(value: boolean) {\n        if (this._isLoading !== value) {\n            this._isLoading = value;\n            this.evaluateLoadingState();\n        }\n        Promise.resolve().then(() => {\n            // wait for the current detection cycle to end before triggering a new one.\n            this.notifyChanges();\n        });\n    }\n\n    get isLoading(): boolean {\n        return this._isLoading;\n    }\n\n    /**\n     * Gets/Sets whether the columns should be auto-generated once again after the initialization of the grid\n     * @remarks\n     * This will allow to bind the grid to remote data and having auto-generated columns at the same time.\n     * Note that after generating the columns, this property would be disabled to avoid re-creating\n     * columns each time a new data is assigned.\n     * @example\n     * ```typescript\n     *  this.grid.shouldGenerate = true;\n     * ```\n     */\n    public shouldGenerate: boolean;\n\n    /**\n     * Gets/Sets the message displayed when there are no records and the grid is filtered.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [emptyGridMessage]=\"'The grid is empty'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    set emptyFilteredGridMessage(value: string) {\n        this._emptyFilteredGridMessage = value;\n    }\n\n    get emptyFilteredGridMessage(): string {\n        return this._emptyFilteredGridMessage || this.resourceStrings.igx_grid_emptyFilteredGrid_message;\n    }\n\n    /**\n     * Gets/Sets the title to be displayed in the built-in column hiding UI.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid [showToolbar]=\"true\" [columnHiding]=\"true\" columnHidingTitle=\"Column Hiding\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`columnHidingTitle` is deprecated')\n    @Input()\n    public get columnHidingTitle(): string {\n        return this._columnHidingTitle;\n    }\n    public set columnHidingTitle(v: string) {\n        this._columnHidingTitle = v;\n    }\n    private _columnHidingTitle: string;\n\n    /** @hidden @internal */\n    public get columnHidingTitleInternal(): string {\n        return this._columnHidingTitle;\n    }\n\n    /**\n     * Gets/Sets the initial pinning configuration.\n     * @remarks\n     * Allows to apply pinning the columns to the start or the end.\n     * Note that pinning to both sides at a time is not allowed.\n     * @example\n     * ```html\n     * <igx-grid [pinning]=\"pinningConfig\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get pinning() {\n        return this._pinning;\n    }\n    set pinning(value) {\n        if (value !== this._pinning) {\n            this.resetCaches();\n        }\n        this._pinning = value;\n    }\n\n\n    /**\n     * Gets/Sets if the built-in column pinning UI should be shown in the toolbar.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [columnPinning]=\"'true\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`columnPinning` is deprecated')\n    @Input()\n    get columnPinning() {\n        return this._columnPinning;\n    }\n    set columnPinning(value) {\n        this._columnPinning = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the title to be displayed in the UI of the column pinning.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [columnPinning]=\"'true\" [columnPinningTitle]=\"'Column Hiding'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`columnPinningTitle` is deprecated')\n    @Input()\n    public get columnPinningTitle(): string {\n        return this._columnPinningTitle;\n    }\n    public set columnPinningTitle(v: string) {\n        this._columnPinningTitle = v;\n    }\n    private _columnPinningTitle: string;\n\n    /** @hidden @internal */\n    public get columnPinningTitleInternal(): string {\n        return this._columnPinningTitle;\n    }\n\n    /**\n     * Gets/Sets if the filtering is enabled.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [allowFiltering]=\"true\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get allowFiltering() {\n        return this._allowFiltering;\n    }\n\n    set allowFiltering(value) {\n        if (this._allowFiltering !== value) {\n            this._allowFiltering = value;\n            this.filteringService.registerSVGIcons();\n\n            if (!this._init) {\n                this.calcGridHeadRow();\n            }\n\n            this.filteringService.isFilterRowVisible = false;\n            this.filteringService.filteredColumn = null;\n\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Gets/Sets a value indicating whether the advanced filtering is enabled.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [allowAdvancedFiltering]=\"true\" [showToolbar]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get allowAdvancedFiltering() {\n        return this._allowAdvancedFiltering;\n    }\n\n    set allowAdvancedFiltering(value) {\n        if (this._allowAdvancedFiltering !== value) {\n            this._allowAdvancedFiltering = value;\n            this.filteringService.registerSVGIcons();\n\n            if (!this._init) {\n                this.notifyChanges(true);\n            }\n        }\n    }\n\n    /**\n     * Gets/Sets the filter mode.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [filterMode]=\"'quickFilter'\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default it's set to FilterMode.quickFilter.\n     */\n    @Input()\n    get filterMode() {\n        return this._filterMode;\n    }\n\n    set filterMode(value: FilterMode) {\n        this._filterMode = value;\n\n        if (this.filteringService.isFilterRowVisible) {\n            this.filteringRow.close();\n        }\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Gets/Sets the summary position.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" summaryPosition=\"top\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default it is bottom.\n     */\n    @Input()\n    get summaryPosition() {\n        return this._summaryPosition;\n    }\n\n    set summaryPosition(value: GridSummaryPosition) {\n        this._summaryPosition = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the summary calculation mode.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" summaryCalculationMode=\"rootLevelOnly\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default it is rootAndChildLevels which means the summaries are calculated for the root level and each child level.\n     */\n    @Input()\n    get summaryCalculationMode() {\n        return this._summaryCalculationMode;\n    }\n\n    set summaryCalculationMode(value: GridSummaryCalculationMode) {\n        this._summaryCalculationMode = value;\n        if (!this._init) {\n            this.endEdit(true);\n            this.summaryService.resetSummaryHeight();\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Controls whether the summary row is visible when groupBy/parent row is collapsed.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [showSummaryOnCollapse]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     * @remarks\n     * By default showSummaryOnCollapse is set to 'false' which means that the summary row is not visible\n     * when the groupBy/parent row is collapsed.\n     */\n    @Input()\n    get showSummaryOnCollapse() {\n        return this._showSummaryOnCollapse;\n    }\n\n    set showSummaryOnCollapse(value: boolean) {\n        this._showSummaryOnCollapse = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the filtering strategy of the grid.\n     * @example\n     * ```html\n     *  <igx-grid #grid [data]=\"localData\" [filterStrategy]=\"filterStrategy\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get filterStrategy(): IFilteringStrategy {\n        return this._filteringStrategy;\n    }\n\n    set filterStrategy(classRef: IFilteringStrategy) {\n        this._filteringStrategy = classRef;\n    }\n\n    /**\n     * Gets/Sets the sorting strategy of the grid.\n     * @example\n     * ```html\n     *  <igx-grid #grid [data]=\"localData\" [sortStrategy]=\"sortStrategy\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get sortStrategy(): IGridSortingStrategy {\n        return this._sortingStrategy;\n    }\n\n    set sortStrategy(value: IGridSortingStrategy) {\n        this._sortingStrategy = value;\n    }\n\n    /**\n     * Gets/Sets a unique values strategy used by the Excel Style Filtering\n     * @remarks\n     * Provides a callback for loading unique column values on demand.\n     * If this property is provided, the unique values it generates will be used by the Excel Style Filtering.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [filterMode]=\"'excelStyleFilter'\" [uniqueColumnValuesStrategy]=\"columnValuesStrategy\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public uniqueColumnValuesStrategy: (column: IgxColumnComponent,\n        filteringExpressionsTree: IFilteringExpressionsTree,\n        done: (values: any[]) => void) => void;\n\n    /**\n     * Gets/Sets the current selection state.\n     * @remarks\n     * Represents the selected rows' IDs (primary key or rowData)\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" primaryKey=\"ID\" rowSelection=\"multiple\" [selectedRows]=\"[0, 1, 2]\"><igx-grid>\n     * ```\n     */\n    @Input()\n    public set selectedRows(rowIDs: any[]) {\n        rowIDs.length > 0\n            ? this.selectRows(rowIDs, true)\n            : this.deselectAllRows();\n    }\n\n    public get selectedRows(): any[] {\n        return this.selectionService.getSelectedRows();\n    }\n\n    /**\n     * Emitted when `IgxGridCellComponent` is clicked.\n     * @remarks\n     * Returns the `IgxGridCellComponent`.\n     * @example\n     * ```html\n     * <igx-grid #grid (onCellClick)=\"onCellClick($event)\" [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onCellClick = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     * Emitted when `IgxGridCellComponent` is selected.\n     * @remarks\n     *  Returns the `IgxGridCellComponent`.\n     * @example\n     * ```html\n     * <igx-grid #grid (onSelection)=\"onCellSelect($event)\" [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onSelection = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     *  Emitted when `IgxGridRowComponent` is selected.\n     * @example\n     * ```html\n     * <igx-grid #grid (onRowSelectionChange)=\"onCellClickChange($event)\" [data]=\"localData\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowSelectionChange = new EventEmitter<IRowSelectionEventArgs>();\n\n    /**\n     *  Emitted when `IgxColumnComponent` is selected.\n     * @example\n     * ```html\n     * <igx-grid #grid (onColumnSelectionChange)=\"onColumnSelectionChange($event)\" [data]=\"localData\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnSelectionChange = new EventEmitter<IColumnSelectionEventArgs>();\n\n    /**\n     * Emitted when `IgxColumnComponent` is pinned.\n     * @remarks\n     * The index that the column is inserted at may be changed through the `insertAtIndex` property.\n     * @example\n     * ```typescript\n     * public columnPinning(event) {\n     *     if (event.column.field === \"Name\") {\n     *       event.insertAtIndex = 0;\n     *     }\n     * }\n     * ```\n     */\n    @Output()\n    public onColumnPinning = new EventEmitter<IPinColumnEventArgs>();\n\n    /**\n     * Emitted when cell enters edit mode.\n     * @remarks\n     * This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (cellEditEnter)=\"editStart($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public cellEditEnter = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when cell exits edit mode.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (cellEditExit)=\"editExit($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public cellEditExit = new EventEmitter<IGridEditDoneEventArgs>();\n\n    /**\n     * Emitted when cell has been edited.\n     * @remarks\n     * Event is fired after editing is completed, when the cell is exiting edit mode.\n     * This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (cellEdit)=\"editDone($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public cellEdit = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted after cell has been edited and editing has been committed.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (cellEditDone)=\"editDone($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public cellEditDone = new EventEmitter<IGridEditDoneEventArgs>();\n\n    /**\n     * Emitted when a row enters edit mode.\n     * @remarks\n     * Emitted when [rowEditable]=\"true\".\n     * This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (rowEditEnter)=\"editStart($event)\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public rowEditEnter = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted when exiting edit mode for a row.\n     * @remarks\n     * Emitted when [rowEditable]=\"true\" & `endEdit(true)` is called.\n     * Emitted when changing rows during edit mode, selecting an un-editable cell in the edited row,\n     * performing paging operation, column resizing, pinning, moving or hitting `Done`\n     * button inside of the rowEditingOverlay, or hitting the `Enter` key while editing a cell.\n     * This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (rowEdit)=\"editDone($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public rowEdit = new EventEmitter<IGridEditEventArgs>();\n\n    /**\n     * Emitted after exiting edit mode for a row and editing has been committed.\n     * @remarks\n     * Emitted when [rowEditable]=\"true\" & `endEdit(true)` is called.\n     * Emitted when changing rows during edit mode, selecting an un-editable cell in the edited row,\n     * performing paging operation, column resizing, pinning, moving or hitting `Done`\n     * button inside of the rowEditingOverlay, or hitting the `Enter` key while editing a cell.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (rowEditDone)=\"editDone($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public rowEditDone = new EventEmitter<IGridEditDoneEventArgs>();\n\n    /**\n     * Emitted when row editing is canceled.\n     * @remarks\n     * Emits when [rowEditable]=\"true\" & `endEdit(false)` is called.\n     * Emitted when changing hitting `Esc` key during cell editing and when click on the `Cancel` button\n     * in the row editing overlay.\n     * @example\n     * ```html\n     * <igx-grid #grid3 (rowEditExit)=\"editExit($event)\" [data]=\"data\" [primaryKey]=\"'ProductID'\" [rowEditable]=\"true\">\n     * </igx-grid>\n     * ```\n     */\n    @Output()\n    public rowEditExit = new EventEmitter<IGridEditDoneEventArgs>();\n\n    /**\n     * Emitted when a column is initialized.\n     * @remarks\n     * Returns the column object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [onColumnInit]=\"initColumns($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnInit = new EventEmitter<IgxColumnComponent>();\n\n    /**\n     * Emitted when sorting is performed through the UI.\n     * @remarks\n     * Returns the sorting expression.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [autoGenerate]=\"true\" (onSortingDone)=\"sortingDone($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onSortingDone = new EventEmitter<ISortingExpression | Array<ISortingExpression>>();\n\n    /**\n     * Emitted when filtering is performed through the UI.\n     * @remarks\n     * Returns the filtering expressions tree of the column for which filtering was performed.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\" (onFilteringDone)=\"filteringDone($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onFilteringDone = new EventEmitter<IFilteringExpressionsTree>();\n\n    /**\n     * Emitted when paging is performed.\n     * @remarks\n     * Returns an object consisting of the previous and next pages.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [height]=\"'305px'\" [autoGenerate]=\"true\" (onPagingDone)=\"pagingDone($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onPagingDone = new EventEmitter<IPageEventArgs>();\n\n    /**\n     * Emitted when a row added through the API.\n     * @remarks\n     * Returns the data for the new `IgxGridRowComponent` object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onRowAdded)=\"rowAdded($event)\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowAdded = new EventEmitter<IRowDataEventArgs>();\n\n    /**\n     * Emitted when a row is deleted through API.\n     * @remarks\n     * Returns an `IRowDataEventArgs` object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onRowDeleted)=\"rowDeleted($event)\" [height]=\"'305px'\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowDeleted = new EventEmitter<IRowDataEventArgs>();\n\n    /**\n     * Emitted when column is resized.\n     * @remarks\n     * Returns the `IgxColumnComponent` object's old and new width.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onColumnResized)=\"resizing($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnResized = new EventEmitter<IColumnResizeEventArgs>();\n\n    /**\n     * Emitted when a cell is right clicked.\n     * @remarks\n     * Returns the `IgxGridCellComponent` object.\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onContextMenu)=\"contextMenu($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onContextMenu = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     * Emitted when a cell is double clicked.\n     * @remarks\n     * Returns the `IgxGridCellComponent` object.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onDoubleClick)=\"dblClick($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onDoubleClick = new EventEmitter<IGridCellEventArgs>();\n\n    /**\n     * Emitted when column visibility is changed.\n     * @remarks\n     * Args: { column: any, newValue: boolean }\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnVisibilityChanged)=\"visibilityChanged($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnVisibilityChanged = new EventEmitter<IColumnVisibilityChangedEventArgs>();\n\n    /**\n     * Emitted when column moving starts.\n     * @remarks\n     * Returns the moved `IgxColumnComponent` object.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnMovingStart)=\"movingStart($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnMovingStart = new EventEmitter<IColumnMovingStartEventArgs>();\n\n    /**\n     * Emitted during the column moving operation.\n     * @remarks\n     * Returns the source and target `IgxColumnComponent` objects. This event is cancelable.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnMoving)=\"moving($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnMoving = new EventEmitter<IColumnMovingEventArgs>();\n\n    /**\n     * Emitted when column moving ends.\n     * @remarks\n     * Returns the source and target `IgxColumnComponent` objects.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" (onColumnMovingEnd)=\"movingEnds($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onColumnMovingEnd = new EventEmitter<IColumnMovingEndEventArgs>();\n\n    /**\n     * Emitted when keydown is triggered over element inside grid's body.\n     * @remarks\n     * This event is fired only if the key combination is supported in the grid.\n     * Return the target type, target object and the original event. This event is cancelable.\n     * @example\n     * ```html\n     *  <igx-grid (onGridKeydown)=\"customKeydown($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onGridKeydown = new EventEmitter<IGridKeydownEventArgs>();\n\n    /**\n     * Emitted when start dragging a row.\n     * @remarks\n     * Return the dragged row.\n     */\n    @Output()\n    public onRowDragStart = new EventEmitter<IRowDragStartEventArgs>();\n\n    /**\n     * Emitted when dropping a row.\n     * @remarks\n     * Return the dropped row.\n     */\n    @Output()\n    public onRowDragEnd = new EventEmitter<IRowDragEndEventArgs>();\n\n    /**\n     * Emitted when a copy operation is executed.\n     * @remarks\n     * Fired only if copy behavior is enabled through the [`clipboardOptions`]{@link IgxGridBaseDirective#clipboardOptions}.\n     */\n    @Output()\n    onGridCopy = new EventEmitter<IGridClipboardEvent>();\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public expansionStatesChange = new EventEmitter<Map<any, boolean>>();\n\n    /**\n     * Emitted when the expanded state of a row gets changed.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"employeeData\" (onRowToggle)=\"rowToggle($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowToggle = new EventEmitter<IRowToggleEventArgs>();\n\n    /**\n     * Emitted when the pinned state of a row is changed.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"employeeData\" (onRowPinning)=\"rowPin($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onRowPinning = new EventEmitter<IPinRowEventArgs>();\n\n    /**\n     * Emmited when the active node is changed.\n     *\n     * @example\n     * ```\n     * <igx-grid [data]=\"data\" [autoGenerate]=\"true\" (activeNodeChange)=\"activeNodeChange($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public activeNodeChange = new EventEmitter<IActiveNodeChangeEventArgs>();\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxSnackbarComponent)\n    public addRowSnackbar: IgxSnackbarComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild(IgxGridColumnResizerComponent)\n    public resizeLine: IgxGridColumnResizerComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('loadingOverlay', { read: IgxToggleDirective, static: true })\n    public loadingOverlay: IgxToggleDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('igxLoadingOverlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public loadingOutlet: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChildren(IgxColumnComponent, { read: IgxColumnComponent, descendants: true })\n    public columnList: QueryList<IgxColumnComponent> = new QueryList<IgxColumnComponent>();\n\n    @ContentChild(IgxActionStripComponent)\n    public actionStrip: IgxActionStripComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxExcelStyleLoadingValuesTemplateDirective, { read: IgxExcelStyleLoadingValuesTemplateDirective, static: true })\n    public excelStyleLoadingValuesTemplateDirective: IgxExcelStyleLoadingValuesTemplateDirective;\n\n    /**\n     * @hidden @internal\n     */\n    public get excelStyleFilteringComponent() {\n        return this.excelStyleFilteringComponents.first;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChildren(IgxGridExcelStyleFilteringComponent, { read: IgxGridExcelStyleFilteringComponent, descendants: false })\n    public excelStyleFilteringComponents: QueryList<IgxGridExcelStyleFilteringComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxGridHeaderGroupComponent, { read: IgxGridHeaderGroupComponent })\n    public headerGroups: QueryList<IgxGridHeaderGroupComponent>;\n\n    /**\n     * A list of all `IgxGridHeaderGroupComponent`.\n     * @example\n     * ```typescript\n     * const headerGroupsList = this.grid.headerGroupsList;\n     * ```\n     */\n    get headerGroupsList(): IgxGridHeaderGroupComponent[] {\n        return this.headerGroups ? flatten(this.headerGroups.toArray()) : [];\n    }\n\n    /**\n     * A list of all `IgxGridHeaderComponent`.\n     * @example\n     * ```typescript\n     * const headers = this.grid.headerCellList;\n     * ```\n     */\n    get headerCellList(): IgxGridHeaderComponent[] {\n        return this.headerGroupsList.map((headerGroup) => headerGroup.headerCell).filter((headerCell) => headerCell);\n    }\n\n    /**\n     * A list of all `IgxGridFilteringCellComponent`.\n     * @example\n     * ```typescript\n     * const filterCells = this.grid.filterCellList;\n     * ```\n     */\n    get filterCellList(): IgxGridFilteringCellComponent[] {\n        return this.headerGroupsList.map((headerGroup) => headerGroup.filterCell).filter((filterCell) => filterCell);\n    }\n\n    @ViewChildren('row')\n    private _rowList: QueryList<IgxGridRowComponent>;\n\n    @ViewChildren('pinnedRow')\n    private _pinnedRowList: QueryList<IgxGridRowComponent>;\n\n    @ViewChildren('summaryRow', { read: IgxSummaryRowComponent })\n    protected _summaryRowList: QueryList<IgxSummaryRowComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    public get summariesRowList() {\n        const res = new QueryList<any>();\n        if (!this._summaryRowList) {\n            return res;\n        }\n        const sumList = this._summaryRowList.filter((item) => {\n            return item.element.nativeElement.parentElement !== null;\n        });\n        res.reset(sumList);\n        return res;\n    }\n\n    /**\n     * A list of `IgxGridRowComponent`.\n     * @example\n     * ```typescript\n     * const rowList = this.grid.rowList;\n     * ```\n     */\n    public get rowList() {\n        const res = new QueryList<any>();\n        if (!this._rowList) {\n            return res;\n        }\n        const rList = this._rowList\n            .filter((item) => {\n                return item.element.nativeElement.parentElement !== null;\n            })\n            .sort((a, b) => {\n                return a.index - b.index;\n            });\n        res.reset(rList);\n        return res;\n    }\n\n    @ViewChildren(IgxRowDirective, { read: IgxRowDirective })\n    private _dataRowList: QueryList<IgxRowDirective<IgxGridBaseDirective>>;\n\n    /**\n     * A list of currently rendered `IgxGridRowComponent`'s.\n     * @example\n     * ```typescript\n     * const dataList = this.grid.dataRowList;\n     * ```\n     */\n    public get dataRowList(): QueryList<IgxRowDirective<IgxGridBaseDirective>> {\n        const res = new QueryList<IgxRowDirective<IgxGridBaseDirective>>();\n        if (!this._dataRowList) {\n            return res;\n        }\n        const rList = this._dataRowList.filter((item) => {\n            return item.element.nativeElement.parentElement !== null;\n        }).sort((a, b) => {\n            return a.index - b.index;\n        });\n        res.reset(rList);\n        return res;\n    }\n\n    /**\n     * A template reference for the template when the filtered grid is empty.\n     * @example\n     * ```\n     * const emptyTempalte = this.grid.emptyGridTemplate;\n     * ```\n     */\n    @ViewChild('emptyFilteredGrid', { read: TemplateRef, static: true })\n    public emptyFilteredGridTemplate: TemplateRef<any>;\n\n    /**\n     * A template reference for the template when the grid is empty.\n     * @example\n     * ```\n     * const emptyTempalte = this.grid.emptyGridTemplate;\n     * ```\n     */\n    @ViewChild('defaultEmptyGrid', { read: TemplateRef, static: true })\n    public emptyGridDefaultTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultLoadingGrid', { read: TemplateRef, static: true })\n    public loadingGridDefaultTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('scrollContainer', { read: IgxGridForOfDirective, static: true })\n    public parentVirtDir: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get headSelectorTemplate(): TemplateRef<IgxHeadSelectorDirective> {\n        if (this.headSelectorsTemplates && this.headSelectorsTemplates.first) {\n            return this.headSelectorsTemplates.first.templateRef;\n        }\n\n        return null;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxHeadSelectorDirective, { read: IgxHeadSelectorDirective, descendants: false })\n    public headSelectorsTemplates: QueryList<IgxHeadSelectorDirective>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get isPinningToStart() {\n        return this.pinning.columns !== ColumnPinningPosition.End;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get isRowPinningToTop() {\n        return this.pinning.rows !== RowPinningPosition.Bottom;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get rowSelectorTemplate(): TemplateRef<IgxRowSelectorDirective> {\n        if (this.rowSelectorsTemplates && this.rowSelectorsTemplates.first) {\n            return this.rowSelectorsTemplates.first.templateRef;\n        }\n\n        return null;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxRowSelectorDirective, { read: IgxRowSelectorDirective, descendants: false })\n    public rowSelectorsTemplates: QueryList<IgxRowSelectorDirective>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxRowDragGhostDirective, { read: TemplateRef, descendants: false })\n    public dragGhostCustomTemplates: QueryList<TemplateRef<any>>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('verticalScrollContainer', { read: IgxGridForOfDirective, static: true })\n    public verticalScrollContainer: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('verticalScrollHolder', { read: IgxGridForOfDirective, static: true })\n    public verticalScroll: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('scr', { read: ElementRef, static: true })\n    public scr: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('footer', { read: ElementRef })\n    public footer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('hContainer', { read: IgxGridForOfDirective, static: true })\n    public headerContainer: IgxGridForOfDirective<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('headerSelectorContainer')\n    public headerSelectorContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('headerDragContainer')\n    public headerDragContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('headerGroupContainer')\n    public headerGroupContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('filteringRow', { read: IgxGridFilteringRowComponent })\n    public filteringRow: IgxGridFilteringRowComponent;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('theadRow', { static: true })\n    public theadRow: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('tbody', { static: true })\n    public tbody: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('pinContainer', { read: ElementRef })\n    public pinContainer: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('tfoot', { static: true })\n    public tfoot: ElementRef;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('igxFilteringOverlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    protected _outletDirective: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('igxRowEditingOverlayOutlet', { read: IgxOverlayOutletDirective, static: true })\n    public rowEditingOutletDirective: IgxOverlayOutletDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxTemplateOutletDirective, { read: IgxTemplateOutletDirective })\n    public tmpOutlets: QueryList<any> = new QueryList<any>();\n\n\n    /**\n     * @hidden @internal\n     */\n    public get rowOutletDirective() {\n        return this.rowEditingOutletDirective;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get parentRowOutletDirective() {\n        return this.outlet;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dragIndicatorIconBase', { read: TemplateRef, static: true })\n    public dragIndicatorIconBase: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultRowEditTemplate', { read: TemplateRef, static: true })\n    private defaultRowEditTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxRowEditTemplateDirective, { read: TemplateRef })\n    public rowEditCustom: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    public get rowEditContainer(): TemplateRef<any> {\n        return this.rowEditCustom ? this.rowEditCustom : this.defaultRowEditTemplate;\n    }\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxRowEditTextDirective, { read: TemplateRef })\n    public rowEditText: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxRowEditActionsDirective, { read: TemplateRef })\n    public rowEditActions: TemplateRef<any>;\n\n\n    /**\n     * The custom template, if any, that should be used when rendering a row expand indicator.\n     */\n    @ContentChild(IgxRowExpandedIndicatorDirective, { read: TemplateRef })\n    public rowExpandedIndicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering a row collapse indicator.\n     */\n    @ContentChild(IgxRowCollapsedIndicatorDirective, { read: TemplateRef })\n    public rowCollapsedIndicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering a header expand indicator.\n     */\n    @ContentChild(IgxHeaderExpandIndicatorDirective, { read: TemplateRef })\n    public headerExpandIndicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering a header collapse indicator.\n     */\n    @ContentChild(IgxHeaderCollapseIndicatorDirective, { read: TemplateRef })\n    public headerCollapseIndicatorTemplate: TemplateRef<any> = null;\n\n    /**\n     * The custom template, if any, that should be used when rendering a row expand indicator.\n     */\n    @ContentChild(IgxExcelStyleHeaderIconDirective, { read: TemplateRef })\n    public excelStyleHeaderIconTemplate: TemplateRef<any> = null;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxDragIndicatorIconDirective, { read: TemplateRef, descendants: false })\n    public dragIndicatorIconTemplates: QueryList<TemplateRef<any>>;\n\n    /**\n     * The custom template, if any, that should be used when rendering the row drag indicator icon\n     */\n    public get dragIndicatorIconTemplate(): TemplateRef<any> {\n        return this._customDragIndicatorIconTemplate || this.dragIndicatorIconTemplates.first;\n    }\n\n    public set dragIndicatorIconTemplate(val: TemplateRef<any>) {\n        this._customDragIndicatorIconTemplate = val;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get rowInEditMode(): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        const editRowState = this.crudService.row;\n        return editRowState !== null ? this.rowList.find(e => e.rowID === editRowState.id) : null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get firstEditableColumnIndex(): number {\n        const index = this.visibleColumns.filter(col => col.editable)\n            .map(c => c.visibleIndex).sort((a, b) => a - b);\n        return index.length ? index[0] : null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get lastEditableColumnIndex(): number {\n        const index = this.visibleColumns.filter(col => col.editable)\n            .map(c => c.visibleIndex).sort((a, b) => a > b ? -1 : 1);\n        return index.length ? index[0] : null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChildren(IgxRowEditTabStopDirective)\n    public rowEditTabsDEFAULT: QueryList<IgxRowEditTabStopDirective>;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChildren(IgxRowEditTabStopDirective, { descendants: true })\n    public rowEditTabsCUSTOM: QueryList<IgxRowEditTabStopDirective>;\n\n    /**\n     * @hidden @internal\n     * TODO: Nav service logic doesn't handle 0 results from this querylist\n     */\n    public get rowEditTabs(): QueryList<IgxRowEditTabStopDirective> {\n        return this.rowEditTabsCUSTOM.length ? this.rowEditTabsCUSTOM : this.rowEditTabsDEFAULT;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('rowEditingOverlay', { read: IgxToggleDirective })\n    public rowEditingOverlay: IgxToggleDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    get activeDescendant() {\n        const activeElem = this.navigation.activeNode;\n        if (activeElem) {\n            return !this.navigation.isDataRow(activeElem.row, true) ? this.id + '_' + activeElem.row :\n                this.id + '_' + activeElem.row + '_' + activeElem.column;\n        }\n        return null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.class')\n    get hostClass(): string {\n        const classes = [this.getComponentDensityClass('igx-grid')];\n        // The custom classes should be at the end.\n        classes.push(this.class);\n        return classes.join(' ');\n    }\n\n    get bannerClass(): string {\n        const position = this.rowEditPositioningStrategy.isTop ? 'igx-banner__border-top' : 'igx-banner__border-bottom';\n        return `${this.getComponentDensityClass('igx-banner')} ${position}`;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.role')\n    public hostRole = 'grid';\n\n    /**\n     * @hidden @internal\n     */\n    get pipeTrigger(): number {\n        return this._pipeTrigger;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get filteringPipeTrigger(): number {\n        return this._filteringPipeTrigger;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get summaryPipeTrigger(): number {\n        return this._summaryPipeTrigger;\n    }\n\n    /**\n     * Gets/Sets the sorting state.\n     * @remarks\n     * Supports two-way data binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(sortingExpressions)]=\"model.sortingExpressions\"></igx-grid>\n     * ```\n     */\n    @WatchChanges()\n    @Input()\n    get sortingExpressions(): ISortingExpression[] {\n        return this._sortingExpressions;\n    }\n\n    set sortingExpressions(value: ISortingExpression[]) {\n        this._sortingExpressions = cloneArray(value);\n        this.sortingExpressionsChange.emit(this._sortingExpressions);\n        this.notifyChanges();\n    }\n\n    /**\n     * Emitted before sorting is performed.\n     * @remarks\n     * Returns the sorting expressions.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [autoGenerate]=\"true\" (sortingExpressionsChange)=\"sortingExprChange($event)\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public sortingExpressionsChange = new EventEmitter<ISortingExpression[]>();\n\n    /**\n     * @hidden @internal\n     */\n    get maxLevelHeaderDepth() {\n        if (this._maxLevelHeaderDepth === null) {\n            this._maxLevelHeaderDepth = this.hasColumnLayouts ?\n                this.columnList.reduce((acc, col) => Math.max(acc, col.rowStart), 0) :\n                this.columnList.reduce((acc, col) => Math.max(acc, col.level), 0);\n        }\n        return this._maxLevelHeaderDepth;\n    }\n\n    /**\n     * Gets the number of hidden columns.\n     * @example\n     * ```typescript\n     * const hiddenCol = this.grid.hiddenColumnsCount;\n     * ``\n     */\n    get hiddenColumnsCount() {\n        return this.columnList.filter((col) => col.columnGroup === false && col.hidden === true).length;\n    }\n\n    /**\n     * Gets the number of pinned columns.\n     */\n    get pinnedColumnsCount() {\n        return this.pinnedColumns.filter(col => !col.columnLayout).length;\n    }\n\n    /**\n     * Gets/Sets the text to be displayed inside the toggle button.\n     *\n     * @deprecated\n     *\n     * @remarks\n     * Used for the built-in column hiding UI of the`IgxColumnComponent`.\n     * @example\n     * ```html\n     * <igx-grid [columnHiding]=\"true\" [showToolbar]=\"true\" [hiddenColumnsText]=\"'Hidden Columns'\"></igx-grid>\n     * ```\n     */\n    // @DeprecateProperty('`hiddenColumnsText` is deprecated')\n    @Input()\n    get hiddenColumnsText() {\n        return this._hiddenColumnsText;\n    }\n\n    set hiddenColumnsText(value) {\n        this._hiddenColumnsText = value;\n        this.notifyChanges();\n\n    }\n\n    /**\n     * Gets/Sets the text to be displayed inside the toggle button.\n     *\n     * @deprecated\n     *\n     * @remarks\n     * Used for the built-in column pinning UI of the`IgxColumnComponent`.\n     * @example\n     * ```html\n     * <igx-grid [pinnedColumnsText]=\"'PinnedCols Text\" [data]=\"data\" [width]=\"'100%'\" [height]=\"'500px'\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`pinnedColumnsText` is deprecated')\n    @Input()\n    get pinnedColumnsText() {\n        return this._pinnedColumnsText;\n    }\n    set pinnedColumnsText(value) {\n        this._pinnedColumnsText = value;\n        this.notifyChanges();\n    }\n\n    /** @hidden @internal */\n    get pinnedColumnsTextInternal() {\n        return this._pinnedColumnsText;\n    }\n\n    /**\n     * Get transactions service for the grid.\n     */\n    get transactions(): TransactionService<Transaction, State> {\n        return this._transactions;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public columnsWithNoSetWidths = null;\n\n    /* Toolbar related definitions */\n    private _showToolbar = false;\n    private _exportExcel = false;\n    private _exportCsv = false;\n    private _toolbarTitle: string = null;\n    private _exportText: string;\n    private _exportExcelText: string;\n    private _exportCsvText: string;\n    private _rowEditable = false;\n    private _currentRowState: any;\n    private _filteredSortedData = null;\n    /**\n     * @hidden @internal\n     */\n    public get currentRowState(): any {\n        return this._currentRowState;\n    }\n\n    /** @hidden @internal */\n    @ContentChildren(IgxGridToolbarComponent)\n    public toolbar: QueryList<IgxGridToolbarComponent>;\n\n\n    /**\n     * Gets/Sets whether the toolbar is shown.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" ></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`showToolbar` is deprecated')\n    @Input()\n    public get showToolbar(): boolean {\n        return this._showToolbar;\n    }\n    public set showToolbar(newValue: boolean) {\n        this._showToolbar = newValue;\n    }\n\n    /**\n     * Gets/Sets the toolbar's title.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" [toolbarTitle]=\"'My Grid'\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`toolbarTitle` is deprecated')\n    @Input()\n    public get toolbarTitle(): string {\n        return this._toolbarTitle;\n    }\n\n    public set toolbarTitle(newValue: string) {\n        this._toolbarTitle = newValue;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets whether exporting to MS Excel is enabled or disabled.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" [exportExcel]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`exportExcel` is deprecated')\n    @Input()\n    public get exportExcel(): boolean {\n        return this.getExportExcel();\n    }\n\n    public set exportExcel(newValue: boolean) {\n        this._exportExcel = newValue;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets whether the option for exporting to CSV is enabled or disabled.\n     *\n     * @deprecated\n     *\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [autoGenerate]=\"true\" [exportCsv]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`exportCsv` is deprecated')\n    @Input()\n    public get exportCsv(): boolean {\n        return this.getExportCsv();\n    }\n    public set exportCsv(newValue: boolean) {\n        this._exportCsv = newValue;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the textual content for the main export button.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid [data]=\"localData\" [showToolbar]=\"true\" [exportText]=\"'My Exporter'\" [exportCsv]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`exportText` is deprecated')\n    @Input()\n    public get exportText(): string {\n        return this._exportText;\n    }\n\n    public set exportText(newValue: string) {\n        this._exportText = newValue;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the textual content for the MS Excel export button.\n     *\n     * @deprecated\n     *\n     * ```html\n     * <igx-grid [exportExcelText]=\"'My Excel Exporter\" [showToolbar]=\"true\" [exportText]=\"'My Exporter'\" [exportCsv]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`exportExcelText` is deprecated')\n    @Input()\n    public get exportExcelText(): string {\n        return this._exportExcelText;\n    }\n    public set exportExcelText(newValue: string) {\n        this._exportExcelText = newValue;\n        this.notifyChanges();\n    }\n\n    /**\n     * Gets/Sets the textual content for the CSV export button.\n     *\n     * @deprecated\n     *\n     * @example\n     * ```html\n     * <igx-grid [exportCsvText]=\"'My Csv Exporter\" [showToolbar]=\"true\" [exportText]=\"'My Exporter'\" [exportExcel]=\"true\"></igx-grid>\n     * ```\n     */\n    @DeprecateProperty('`exportCsvText` is deprecated')\n    @Input()\n    public get exportCsvText(): string {\n        return this._exportCsvText;\n    }\n    public set exportCsvText(newValue: string) {\n        this._exportCsvText = newValue;\n        this.notifyChanges();\n    }\n\n    /**\n     * Controls the copy behavior of the grid.\n     */\n    @Input()\n    clipboardOptions = {\n        /**\n         * Enables/disables the copy behavior\n         */\n        enabled: true,\n        /**\n         * Include the columns headers in the clipboard output.\n         */\n        copyHeaders: true,\n        /**\n         * Apply the columns formatters (if any) on the data in the clipboard output.\n         */\n        copyFormatters: true,\n        /**\n         * The separator used for formatting the copy output. Defaults to `\\t`.\n         */\n        separator: '\\t'\n    };\n\n    /**\n     * Gets/Sets cell selection mode.\n     * @remarks\n     * By default the cell selection mode is multiple\n     * @param selectionMode: GridSelectionMode\n     */\n    @WatchChanges()\n    @Input()\n    get cellSelection() {\n        return this._cellSelectionMode;\n    }\n\n    set cellSelection(selectionMode: GridSelectionMode) {\n        this._cellSelectionMode = selectionMode;\n        if (this.gridAPI.grid) {\n            this.selectionService.clear(true);\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Gets/Sets row selection mode\n     * @remarks\n     * By default the row selection mode is none\n     * @param selectionMode: GridSelectionMode\n     */\n    @WatchChanges()\n    @Input()\n    get rowSelection() {\n        return this._rowSelectionMode;\n    }\n\n    set rowSelection(selectionMode: GridSelectionMode) {\n        this._rowSelectionMode = selectionMode;\n        if (this.gridAPI.grid && this.columnList) {\n            this.selectionService.clearAllSelectedRows();\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Gets/Sets column selection mode\n     * @remarks\n     * By default the row selection mode is none\n     * @param selectionMode: GridSelectionMode\n     */\n    @WatchChanges()\n    @Input()\n    get columnSelection() {\n        return this._columnSelectionMode;\n    }\n\n    set columnSelection(selectionMode: GridSelectionMode) {\n        this._columnSelectionMode = selectionMode;\n        if (this.gridAPI.grid) {\n            this.selectionService.clearAllSelectedColumns();\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public rowEditMessage;\n\n    /**\n     * @hidden @internal\n     */\n    public snackbarActionText = this.resourceStrings.igx_grid_snackbar_addrow_actiontext;\n\n    /**\n     * @hidden @internal\n     */\n    public snackbarLabel = this.resourceStrings.igx_grid_snackbar_addrow_label;\n\n\n    /**\n     * Emitted when an export process is initiated by the user.\n     * @example\n     * ```typescript\n     * toolbarExporting(event: IGridToolbarExportEventArgs){\n     *     const toolbarExporting = event;\n     * }\n     * ```\n     */\n    @Output()\n    public onToolbarExporting = new EventEmitter<IGridToolbarExportEventArgs>();\n\n    /* End of toolbar related definitions */\n\n    /**\n     * Emitted when making a range selection.\n     * @remarks\n     * Range selection can be made either through drag selection or through keyboard selection.\n     */\n    @Output()\n    onRangeSelection = new EventEmitter<GridSelectionRange>();\n\n    /**\n     * @hidden @internal\n     */\n    public pagingState;\n    /**\n     * @hidden @internal\n     */\n    public calcWidth: number;\n    /**\n     * @hidden @internal\n     */\n    public calcHeight = 0;\n    /**\n     * @hidden @internal\n     */\n    public tfootHeight: number;\n    /**\n     * @hidden @internal\n     */\n    public chipsGoupingExpressions = [];\n    /**\n     * @hidden @internal\n     */\n    public summariesHeight: number;\n\n    /**\n     * @hidden @internal\n     */\n    public draggedColumn: IgxColumnComponent;\n\n\n    /**\n     * @hidden @internal\n     */\n    public disableTransitions = false;\n\n    /**\n     * @hidden @internal\n     */\n    public lastSearchInfo: ISearchInfo = {\n        searchText: '',\n        caseSensitive: false,\n        exactMatch: false,\n        activeMatchIndex: 0,\n        matchInfoCache: []\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public columnWidthSetByUser = false;\n\n    /**\n     * @hidden @internal\n     */\n    public pinnedRecords: any[];\n\n    /**\n     * @hidden @internal\n     */\n    public unpinnedRecords: any[];\n\n    /** Emitted after the ngAfterViewInit hook. At this point the grid exists in the DOM */\n    @Output()\n    public rendered = new EventEmitter<boolean>();\n\n    public rendered$ = this.rendered.asObservable().pipe(shareReplay(1));\n\n    /** @hidden @internal */\n    public resizeNotify = new Subject();\n\n    abstract data: any[];\n    abstract filteredData: any[];\n\n    /**\n     * @hidden\n     */\n    protected destroy$ = new Subject<any>();\n\n    protected _filteredSortedPinnedData: any[];\n    protected _filteredSortedUnpinnedData: any[];\n    protected _filteredPinnedData: any[];\n\n    /**\n     * @hidden\n     */\n    public _filteredUnpinnedData;\n\n    /**\n     * @hidden\n     */\n    protected _perPage = 15;\n    /**\n     * @hidden\n     */\n    protected _page = 0;\n    /**\n     * @hidden\n     */\n    protected _paging = false;\n    /**\n     * @hidden\n     */\n    protected _pagingMode = GridPagingMode.local;\n    /**\n     * @hidden @internal\n     */\n    public _totalRecords = -1;\n    /**\n     * @hidden\n     */\n    protected _hideRowSelectors = false;\n    /**\n     * @hidden\n     */\n    protected _rowDrag = false;\n    /**\n     * @hidden\n     */\n    protected _pipeTrigger = 0;\n    /**\n     * @hidden\n     */\n    protected _filteringPipeTrigger = 0;\n    /**\n     * @hidden\n     */\n    protected _summaryPipeTrigger = 0;\n    /**\n     * @hidden\n     */\n    protected _columns: IgxColumnComponent[] = [];\n    /**\n     * @hidden\n     */\n    protected _pinnedColumns: IgxColumnComponent[] = [];\n    /**\n     * @hidden\n     */\n    protected _unpinnedColumns: IgxColumnComponent[] = [];\n    /**\n     * @hidden\n     */\n    protected _filteringExpressionsTree: IFilteringExpressionsTree = new FilteringExpressionsTree(FilteringLogic.And);\n    /**\n     * @hidden\n     */\n    protected _advancedFilteringExpressionsTree: IFilteringExpressionsTree;\n    /**\n     * @hidden\n     */\n    protected _sortingExpressions: Array<ISortingExpression> = [];\n    /**\n     * @hidden\n     */\n    protected _maxLevelHeaderDepth = null;\n    /**\n     * @hidden\n     */\n    protected _columnHiding = false;\n    /**\n     * @hidden\n     */\n    protected _columnPinning = false;\n\n    protected _pinnedRecordIDs = [];\n\n    /**\n     * @hidden\n     */\n    protected _hasVisibleColumns;\n    protected _allowFiltering = false;\n    protected _allowAdvancedFiltering = false;\n    protected _filterMode: FilterMode = FilterMode.quickFilter;\n\n    protected observer: ResizeObserver = new ResizeObserver(() => { });\n\n    private columnListDiffer;\n    private rowListDiffer;\n    private _hiddenColumnsText = '';\n    private _pinnedColumnsText = '';\n    private _height = '100%';\n    private _width = '100%';\n    private _rowHeight;\n    protected _baseFontSize: number;\n    private _horizontalForOfs: Array<IgxGridForOfDirective<any>> = [];\n    private _multiRowLayoutRowSize = 1;\n    protected _expansionStates: Map<any, boolean> = new Map<any, boolean>();\n    protected _defaultExpandState = false;\n    // Caches\n    private _totalWidth = NaN;\n    private _pinnedVisible = [];\n    private _unpinnedVisible = [];\n    private _pinnedWidth = NaN;\n    private _unpinnedWidth = NaN;\n    private _visibleColumns = [];\n    private _columnGroups = false;\n    private _autoGeneratedCols = [];\n    protected _headerFeaturesWidth = NaN;\n\n    private _columnWidth: string;\n\n    protected _defaultTargetRecordNumber = 10;\n\n    private _summaryPosition: GridSummaryPosition = GridSummaryPosition.bottom;\n    private _summaryCalculationMode: GridSummaryCalculationMode = GridSummaryCalculationMode.rootAndChildLevels;\n    private _showSummaryOnCollapse = false;\n    private _cellSelectionMode: GridSelectionMode = GridSelectionMode.multiple;\n    private _rowSelectionMode: GridSelectionMode = GridSelectionMode.none;\n    private _columnSelectionMode: GridSelectionMode = GridSelectionMode.none;\n\n    private lastAddedRowIndex;\n\n    private rowEditPositioningStrategy = new RowEditPositionStrategy({\n        horizontalDirection: HorizontalAlignment.Right,\n        verticalDirection: VerticalAlignment.Bottom,\n        horizontalStartPoint: HorizontalAlignment.Left,\n        verticalStartPoint: VerticalAlignment.Bottom,\n        closeAnimation: null\n    });\n\n    private rowEditSettings: OverlaySettings = {\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnOutsideClick: false,\n        outlet: this.rowOutletDirective,\n        positionStrategy: this.rowEditPositioningStrategy\n    };\n\n    /**\n     * @hidden @internal\n     */\n    public paginatorSettings: OverlaySettings = null;\n\n    private verticalScrollHandler = (event) => {\n        this.verticalScrollContainer.onScroll(event);\n        this.disableTransitions = true;\n\n        this.zone.run(() => {\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                this.verticalScrollContainer.onChunkLoad.emit(this.verticalScrollContainer.state);\n                if (this.rowEditable) {\n                    this.changeRowEditingOverlayStateOnScroll(this.rowInEditMode);\n                }\n            });\n        });\n        this.disableTransitions = false;\n\n        this.hideOverlays();\n        this.actionStrip?.hide();\n        const args: IGridScrollEventArgs = {\n            direction: 'vertical',\n            event: event,\n            scrollPosition: this.verticalScrollContainer.scrollPosition\n        };\n        this.onScroll.emit(args);\n    }\n\n    private horizontalScrollHandler = (event) => {\n        const scrollLeft = event.target.scrollLeft;\n        this.headerContainer.onHScroll(scrollLeft);\n        this._horizontalForOfs.forEach(vfor => vfor.onHScroll(scrollLeft));\n        this.cdr.markForCheck();\n\n        this.zone.run(() => {\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                this.parentVirtDir.onChunkLoad.emit(this.headerContainer.state);\n            });\n        });\n\n        this.hideOverlays();\n        const args: IGridScrollEventArgs = { direction: 'horizontal', event: event, scrollPosition: this.headerContainer.scrollPosition };\n        this.onScroll.emit(args);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get headerFeaturesWidth() {\n        return this._headerFeaturesWidth;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public isDetailRecord(rec) {\n        return false;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public isGroupByRecord(rec) {\n        return false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isGhostRecord(record: any): boolean {\n        return record.ghostRecord !== undefined;\n    }\n    /**\n     * @hidden @internal\n     */\n    public isAddRowRecord(record: any): boolean {\n        return record.addRow !== undefined;\n    }\n\n    /**\n     * @hidden\n     * Returns the row index of a row that takes into account the full view data like pinning.\n     */\n    public getDataViewIndex(rowIndex, pinned) {\n        if (pinned && !this.isRowPinningToTop) {\n            rowIndex = rowIndex + this.unpinnedDataView.length;\n        } else if (!pinned && this.isRowPinningToTop) {\n            rowIndex = rowIndex + this.pinnedDataView.length;\n        }\n        return rowIndex;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get hasDetails() {\n        return false;\n    }\n\n    /**\n     * Returns the state of the grid virtualization.\n     * @remarks\n     * Includes the start index and how many records are rendered.\n     * @example\n     * ```typescript\n     * const gridVirtState = this.grid1.virtualizationState;\n     * ```\n     */\n    get virtualizationState() {\n        return this.verticalScrollContainer.state;\n    }\n\n    /**\n     * @hidden\n     */\n    set virtualizationState(state) {\n        this.verticalScrollContainer.state = state;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public hideOverlays() {\n        this.overlayIDs.forEach(overlayID => {\n            this.overlayService.hide(overlayID);\n            this.overlayService.onClosed.pipe(\n                filter(o => o.id === overlayID),\n                takeUntil(this.destroy$)).subscribe(() => {\n                    this.nativeElement.focus();\n                });\n        });\n    }\n\n    /**\n     * Returns whether the record is pinned or not.\n     *\n     * @param rowIndex Index of the record in the `dataView` collection.\n     *\n     * @hidden\n     * @internal\n     */\n    public isRecordPinnedByViewIndex(rowIndex: number) {\n        return this.hasPinnedRecords && (this.isRowPinningToTop && rowIndex < this.pinnedDataView.length) ||\n            (!this.isRowPinningToTop && rowIndex >= this.unpinnedDataView.length);\n    }\n\n    /**\n     * Returns whether the record is pinned or not.\n     *\n     * @param rowIndex Index of the record in the `filteredSortedData` collection.\n     */\n    public isRecordPinnedByIndex(rowIndex: number) {\n        return this.hasPinnedRecords && (this.isRowPinningToTop && rowIndex < this._filteredSortedPinnedData.length) ||\n            (!this.isRowPinningToTop && rowIndex >= this._filteredSortedUnpinnedData.length);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public isRecordPinned(rec) {\n        return this.getInitialPinnedIndex(rec) !== -1;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     * Returns the record index in order of pinning by the user. Does not consider sorting/filtering.\n     */\n    public getInitialPinnedIndex(rec) {\n        const id = this.gridAPI.get_row_id(rec);\n        return this._pinnedRecordIDs.indexOf(id);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get hasPinnedRecords() {\n        return this._pinnedRecordIDs.length > 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get pinnedRecordsCount() {\n        return this._pinnedRecordIDs.length;\n    }\n\n\n    constructor(\n        public selectionService: IgxGridSelectionService,\n        public crudService: IgxGridCRUDService,\n        public colResizingService: IgxColumnResizingService,\n        public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        @Inject(IgxGridTransaction) protected _transactions: TransactionService<Transaction, State>,\n        private elementRef: ElementRef,\n        private zone: NgZone,\n        @Inject(DOCUMENT) public document,\n        public cdr: ChangeDetectorRef,\n        protected resolver: ComponentFactoryResolver,\n        protected differs: IterableDiffers,\n        protected viewRef: ViewContainerRef,\n        public navigation: IgxGridNavigationService,\n        public filteringService: IgxFilteringService,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        public summaryService: IgxGridSummaryService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        @Inject(LOCALE_ID) private localeId: string) {\n        super(_displayDensityOptions);\n        this.locale = this.locale || this.localeId;\n        this.datePipe = new DatePipe(this.locale);\n        this.decimalPipe = new DecimalPipe(this.locale);\n        this.cdr.detach();\n    }\n\n    _setupServices() {\n        this.gridAPI.grid = this;\n        this.crudService.grid = this;\n        this.selectionService.grid = this;\n        this.navigation.grid = this;\n        this.filteringService.grid = this;\n        this.summaryService.grid = this;\n    }\n\n    _setupListeners() {\n        const destructor = takeUntil<any>(this.destroy$);\n        fromEvent(this.nativeElement, 'focusout').pipe(filter(() => !!this.navigation.activeNode), destructor).subscribe((event) => {\n            if (this.selectionService.dragMode && isIE()) { return; }\n            if (!this.crudService.cell &&\n                !!this.navigation.activeNode &&\n                ((event.target === this.tbody.nativeElement && this.navigation.activeNode.row >= 0 &&\n                    this.navigation.activeNode.row < this.dataView.length)\n                    || (event.target === this.theadRow.nativeElement && this.navigation.activeNode.row === -1)\n                    || (event.target === this.tfoot.nativeElement && this.navigation.activeNode.row === this.dataView.length)) &&\n                !(this.rowEditable && this.crudService.rowEditingBlocked && this.rowInEditMode)) {\n                this.navigation.activeNode = {} as IActiveNode;\n                this.notifyChanges();\n            }\n        });\n        this.onRowAdded.pipe(destructor).subscribe(args => this.refreshGridState(args));\n        this.onRowDeleted.pipe(destructor).subscribe(args => {\n            this.summaryService.deleteOperation = true;\n            this.summaryService.clearSummaryCache(args);\n        });\n\n        this.transactions.onStateUpdate.pipe(destructor).subscribe((event: StateUpdateEvent) => {\n            let actions = [];\n            if (event.origin === TransactionEventOrigin.REDO) {\n                actions = event.actions ? event.actions.filter(x => x.transaction.type === TransactionType.DELETE) : [];\n            } else if (event.origin === TransactionEventOrigin.UNDO) {\n                actions = event.actions ? event.actions.filter(x => x.transaction.type === TransactionType.ADD) : [];\n            }\n            if (actions.length > 0) {\n                for (const action of actions) {\n                    if (this.selectionService.isRowSelected(action.transaction.id)) {\n                        this.selectionService.deselectRow(action.transaction.id);\n                    }\n                }\n            }\n            this.selectionService.clearHeaderCBState();\n            this.summaryService.clearSummaryCache();\n            this._pipeTrigger++;\n            this.notifyChanges();\n        });\n\n        this.resizeNotify.pipe(destructor, filter(() => !this._init), throttleTime(100, undefined, { leading: true, trailing: true }))\n            .subscribe(() => {\n                this.zone.run(() => {\n                    this.notifyChanges(true);\n                });\n            });\n\n        this.onPagingDone.pipe(destructor).subscribe(() => {\n            this.endEdit(true);\n            this.selectionService.clear(true);\n        });\n\n        this.onColumnMoving.pipe(destructor).subscribe(() => this.endEdit(true));\n        this.onColumnResized.pipe(destructor).subscribe(() => this.endEdit(true));\n\n        this.overlayService.onOpening.pipe(destructor).subscribe((event) => {\n            if (this._advancedFilteringOverlayId === event.id) {\n                const instance = event.componentRef.instance as IgxAdvancedFilteringDialogComponent;\n                if (instance) {\n                    instance.initialize(this, this.overlayService, event.id);\n                }\n            }\n        });\n\n        this.overlayService.onOpened.pipe(destructor).subscribe((event) => {\n            const overlaySettings = this.overlayService.getOverlayById(event.id)?.settings;\n\n            // do not hide the advanced filtering overlay on scroll\n            if (this._advancedFilteringOverlayId === event.id) {\n                const instance = event.componentRef.instance as IgxAdvancedFilteringDialogComponent;\n                if (instance) {\n                    instance.lastActiveNode = this.navigation.activeNode;\n                    instance.setAddButtonFocus();\n                }\n                return;\n            }\n\n            // do not hide the overlay if it's attached to a row\n            if (this.rowEditingOverlay?.overlayId === event.id) {\n                return;\n            }\n\n            if (overlaySettings?.outlet === this.outlet && this.overlayIDs.indexOf(event.id) === -1) {\n                this.overlayIDs.push(event.id);\n            }\n        });\n\n        this.overlayService.onClosed.pipe(destructor, filter(() => !this._init)).subscribe((event) => {\n            if (this._advancedFilteringOverlayId === event.id) {\n                this._advancedFilteringOverlayId = null;\n                return;\n            }\n\n            const ind = this.overlayIDs.indexOf(event.id);\n            if (ind !== -1) {\n                this.overlayIDs.splice(ind, 1);\n            }\n        });\n\n        this.verticalScrollContainer.onDataChanging.pipe(destructor, filter(() => !this._init)).subscribe(($event) => {\n            const shouldRecalcSize = this.isPercentHeight &&\n                (!this.calcHeight || this.calcHeight === this.getDataBasedBodyHeight() ||\n                    this.calcHeight === this.renderedRowHeight * this._defaultTargetRecordNumber);\n            if (shouldRecalcSize) {\n                this.calculateGridHeight();\n                $event.containerSize = this.calcHeight;\n            }\n            this.evaluateLoadingState();\n        });\n\n        this.verticalScrollContainer.onScrollbarVisibilityChanged.pipe(destructor, filter(() => !this._init)).subscribe(() => {\n            // called to recalc all widths that may have changes as a result of\n            // the vert. scrollbar showing/hiding\n            this.notifyChanges(true);\n        });\n\n        this.verticalScrollContainer.onContentSizeChange.pipe(destructor, filter(() => !this._init)).subscribe(($event) => {\n            this.calculateGridSizes(false);\n        });\n\n        this.onDensityChanged.pipe(destructor).subscribe(() => {\n            this.endEdit(true);\n            this.summaryService.summaryHeight = 0;\n            this.notifyChanges(true);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n        this._setupServices();\n        this._setupListeners();\n        this.rowListDiffer = this.differs.find([]).create(null);\n        this.columnListDiffer = this.differs.find([]).create(null);\n        this.calcWidth = this.width && this.width.indexOf('%') === -1 ? parseInt(this.width, 10) : 0;\n        this.shouldGenerate = this.autoGenerate;\n    }\n\n    protected setupColumns() {\n        if (this.autoGenerate) {\n            this.autogenerateColumns();\n        }\n\n        this.initColumns(this.columnList, (col: IgxColumnComponent) => this.onColumnInit.emit(col));\n        this.columnListDiffer.diff(this.columnList);\n\n        this.columnList.changes\n            .pipe(takeUntil(this.destroy$))\n            .subscribe((change: QueryList<IgxColumnComponent>) => {\n                this.onColumnsChanged(change);\n            });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetColumnsCaches() {\n        this.columnList.forEach(column => column.resetCaches());\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public generateRowID(): string | number {\n        const primaryColumn = this.columnList.find(col => col.field === this.primaryKey);\n        const idType = this.data.length ? typeof (this.data[0][this.primaryKey]) : primaryColumn ? primaryColumn.dataType : 'string';\n        return idType === 'string' ? uuidv4() : FAKE_ROW_ID--;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetForOfCache() {\n        const firstVirtRow = this.dataRowList.first;\n        if (firstVirtRow) {\n            if (this._cdrRequests) {\n                firstVirtRow.virtDirRow.cdr.detectChanges();\n            }\n            firstVirtRow.virtDirRow.assumeMaster();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public setFilteredData(data, pinned: boolean) {\n        if (this.hasPinnedRecords && pinned) {\n            this._filteredPinnedData = data || [];\n            const filteredUnpinned = this._filteredUnpinnedData || [];\n            const filteredData = [... this._filteredPinnedData, ...filteredUnpinned];\n            this.filteredData = filteredData.length > 0 ? filteredData : this._filteredUnpinnedData;\n        } else if (this.hasPinnedRecords && !pinned) {\n            this._filteredUnpinnedData = data;\n        } else {\n            this.filteredData = data;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetColumnCollections() {\n        this._visibleColumns.length = 0;\n        this._pinnedVisible.length = 0;\n        this._unpinnedVisible.length = 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetCachedWidths() {\n        this._unpinnedWidth = NaN;\n        this._pinnedWidth = NaN;\n        this._totalWidth = NaN;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public resetCaches(recalcFeatureWidth = true) {\n        if (recalcFeatureWidth) {\n            this._headerFeaturesWidth = NaN;\n        }\n        this.resetForOfCache();\n        this.resetColumnsCaches();\n        this.resetColumnCollections();\n        this.resetCachedWidths();\n        this.hasVisibleColumns = undefined;\n        this._columnGroups = this.columnList.some(col => col.columnGroup);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        this.setupColumns();\n        this.toolbar.changes.pipe(takeUntil(this.destroy$), filter(() => !this._init)).subscribe(() => this.notifyChanges(true));\n        if (this.actionStrip) {\n            this.actionStrip.menuOverlaySettings.outlet = this.outlet;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public setFilteredSortedData(data, pinned: boolean) {\n        data = data || [];\n        if (this.pinnedRecordsCount > 0 && pinned) {\n            this._filteredSortedPinnedData = data;\n            this.pinnedRecords = data;\n            this._filteredSortedData = this.isRowPinningToTop ? [... this._filteredSortedPinnedData, ... this._filteredSortedUnpinnedData] :\n                [... this._filteredSortedUnpinnedData, ... this._filteredSortedPinnedData];\n            this.refreshSearch(true, false);\n        } else if (this.pinnedRecordsCount > 0 && !pinned) {\n            this._filteredSortedUnpinnedData = data;\n        } else {\n            this._filteredSortedData = data;\n            this.refreshSearch(true, false);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public resetHorizontalForOfs() {\n        const elementFilter = (item: IgxRowDirective<any> | IgxSummaryRowComponent) => this.isDefined(item.nativeElement.parentElement);\n        this._horizontalForOfs = [\n            ...this._dataRowList.filter(elementFilter).map(item => item.virtDirRow),\n            ...this._summaryRowList.filter(elementFilter).map(item => item.virtDirRow)\n        ];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public _setupRowObservers() {\n        const elementFilter = (item: IgxRowDirective<any> | IgxSummaryRowComponent) => this.isDefined(item.nativeElement.parentElement);\n        const extractForOfs = pipe(map((collection: any[]) => collection.filter(elementFilter).map(item => item.virtDirRow)));\n        const rowListObserver = extractForOfs(this._dataRowList.changes);\n        const summaryRowObserver = extractForOfs(this._summaryRowList.changes);\n        rowListObserver.pipe(takeUntil(this.destroy$)).subscribe(() => { this.resetHorizontalForOfs(); });\n        summaryRowObserver.pipe(takeUntil(this.destroy$)).subscribe(() => { this.resetHorizontalForOfs(); });\n        this.resetHorizontalForOfs();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public _zoneBegoneListeners() {\n        this.zone.runOutsideAngular(() => {\n            this.verticalScrollContainer.getScroll().addEventListener('scroll', this.verticalScrollHandler);\n            this.headerContainer.getScroll().addEventListener('scroll', this.horizontalScrollHandler);\n            this.observer = new ResizeObserver(() => this.resizeNotify.next());\n            this.observer.observe(this.nativeElement);\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostListener('mouseleave', ['$event'])\n    public hideActionStrip(event: MouseEvent) {\n        this.actionStrip?.hide();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        this.initPinning();\n        this.calculateGridSizes();\n        this._init = false;\n        this.cdr.reattach();\n        this._setupRowObservers();\n        this._zoneBegoneListeners();\n\n        this.paginatorSettings = { outlet: this.outlet };\n\n        const vertScrDC = this.verticalScrollContainer.displayContainer;\n        vertScrDC.addEventListener('scroll', this.preventContainerScroll);\n\n        this._pinnedRowList.changes\n            .pipe(takeUntil(this.destroy$))\n            .subscribe((change: QueryList<IgxGridRowComponent>) => {\n                this.onPinnedRowsChanged(change);\n            });\n\n        this.addRowSnackbar?.onAction.subscribe(() => {\n            const rec = this.filteredSortedData[this.lastAddedRowIndex];\n            this.scrollTo(rec, 0);\n            this.addRowSnackbar.hide();\n        });\n\n        // Keep the stream open for future subscribers\n        this.rendered$.pipe(takeUntil(this.destroy$)).subscribe(noop);\n        Promise.resolve().then(() => this.rendered.next(true));\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public notifyChanges(repaint = false) {\n        this._cdrRequests = true;\n        this._cdrRequestRepaint = repaint;\n        this.cdr.markForCheck();\n    }\n\n    protected resetNotifyChanges() {\n        this._cdrRequestRepaint = false;\n        this._cdrRequests = false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngDoCheck() {\n        super.ngDoCheck();\n        if (this._init) {\n            return;\n        }\n\n        if (this._cdrRequestRepaint) {\n            this.resetNotifyChanges();\n            this.calculateGridSizes();\n            this.refreshSearch(true);\n            return;\n        }\n\n        if (this._cdrRequests) {\n            this.resetNotifyChanges();\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getDragGhostCustomTemplate() {\n        if (this.dragGhostCustomTemplates && this.dragGhostCustomTemplates.first) {\n            return this.dragGhostCustomTemplates.first;\n        }\n\n        return null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnDestroy() {\n        this.tmpOutlets.forEach((tmplOutlet) => {\n            tmplOutlet.cleanCache();\n        });\n\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this._destroyed = true;\n\n        if (this._advancedFilteringOverlayId) {\n            this.overlayService.hide(this._advancedFilteringOverlayId);\n        }\n\n        this.zone.runOutsideAngular(() => {\n            this.observer.disconnect();\n            this.verticalScrollContainer?.getScroll()?.removeEventListener('scroll', this.verticalScrollHandler);\n            this.headerContainer?.getScroll()?.removeEventListener('scroll', this.horizontalScrollHandler);\n            const vertScrDC = this.verticalScrollContainer?.displayContainer;\n            vertScrDC?.removeEventListener('scroll', this.preventContainerScroll);\n        });\n    }\n\n    /**\n     * Toggles the specified column's visibility.\n     * @example\n     * ```typescript\n     * this.grid1.toggleColumnVisibility({\n     *       column: this.grid1.columns[0],\n     *       newValue: true\n     * });\n     * ```\n     */\n    public toggleColumnVisibility(args: IColumnVisibilityChangedEventArgs) {\n        const col = args.column ? this.columnList.find((c) => c === args.column) : undefined;\n\n        if (!col) {\n            return;\n        }\n\n        col.hidden = args.newValue;\n        this.onColumnVisibilityChanged.emit(args);\n    }\n\n    /**\n     * Gets/Sets a list of key-value pairs [row ID, expansion state].\n     * @remarks\n     * Includes only states that differ from the default one.\n     * Supports two-way binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"data\" [(expansionStates)]=\"model.expansionStates\">\n     * </igx-grid>\n     * ```\n     */\n    @Input()\n    public get expansionStates() {\n        return this._expansionStates;\n    }\n\n    public set expansionStates(value) {\n        this._expansionStates = new Map<any, boolean>(value);\n        this.expansionStatesChange.emit(this._expansionStates);\n        this.notifyChanges(true);\n        if (this.gridAPI.grid) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * Expands all rows.\n     * @example\n     * ```typescript\n     * this.grid.expandAll();\n     * ```\n     */\n    public expandAll() {\n        this._defaultExpandState = true;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Collapses all rows.\n     * @example\n     * ```typescript\n     * this.grid.collapseAll();\n     * ```\n     */\n    public collapseAll() {\n        this._defaultExpandState = false;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Expands the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.expandRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n     */\n    public expandRow(rowID: any) {\n        this.gridAPI.set_row_expansion_state(rowID, true);\n    }\n\n    /**\n     * Collapses the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.collapseRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n     */\n    public collapseRow(rowID: any) {\n        this.gridAPI.set_row_expansion_state(rowID, false);\n    }\n\n\n    /**\n     * Toggles the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.toggleRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n     */\n    public toggleRow(rowID: any) {\n        const rec = this.gridAPI.get_rec_by_id(rowID);\n        const state = this.gridAPI.get_row_expansion_state(rec);\n        this.gridAPI.set_row_expansion_state(rowID, !state);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getDefaultExpandState(rec: any) {\n        return this._defaultExpandState;\n    }\n\n    /**\n     * Gets the native element.\n     * @example\n     * ```typescript\n     * const nativeEl = this.grid.nativeElement.\n     * ```\n     */\n    get nativeElement() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Gets/Sets the outlet used to attach the grid's overlays to.\n     * @remark\n     * If set, returns the outlet defined outside the grid. Otherwise returns the grid's internal outlet directive.\n     */\n    @Input()\n    get outlet() {\n        return this.resolveOutlet();\n    }\n\n    set outlet(val: IgxOverlayOutletDirective) {\n        this._userOutletDirective = val;\n    }\n\n    protected resolveOutlet() {\n        return this._userOutletDirective ? this._userOutletDirective : this._outletDirective;\n    }\n\n\n    /**\n     * Gets the default row height.\n     * @example\n     * ```typescript\n     * const rowHeigh = this.grid.defaultRowHeight;\n     * ```\n     */\n    get defaultRowHeight(): number {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 40;\n            case DisplayDensity.compact:\n                return 32;\n            default:\n                return 50;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get defaultSummaryHeight(): number {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 30;\n            case DisplayDensity.compact:\n                return 24;\n            default:\n                return 36;\n        }\n    }\n\n    /**\n     * Returns the `IgxGridHeaderGroupComponent`'s minimum allowed width.\n     * @remarks\n     * Used internally for restricting header group component width.\n     * The values below depend on the header cell default right/left padding values.\n     */\n    get defaultHeaderGroupMinWidth(): number {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 32;\n            case DisplayDensity.compact:\n                return 24;\n            default:\n                return 48;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public paginatorClassName(): string {\n        switch (this.displayDensity) {\n            case DisplayDensity.cosy:\n                return 'igx-paginator--cosy';\n            case DisplayDensity.compact:\n                return 'igx-paginator--compact';\n            default:\n                return 'igx-paginator';\n        }\n    }\n\n    /**\n     * Gets the current width of the container for the pinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const pinnedWidth = this.grid.getPinnedWidth;\n     * ```\n     */\n    get pinnedWidth() {\n        if (!isNaN(this._pinnedWidth)) { return this._pinnedWidth; }\n        this._pinnedWidth = this.getPinnedWidth();\n        return this._pinnedWidth;\n    }\n\n    /**\n     * Gets the current width of the container for the unpinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const unpinnedWidth = this.grid.getUnpinnedWidth;\n     * ```\n     */\n    get unpinnedWidth() {\n        if (!isNaN(this._unpinnedWidth)) { return this._unpinnedWidth; }\n        this._unpinnedWidth = this.getUnpinnedWidth();\n        return this._unpinnedWidth;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get isHorizontalScrollHidden() {\n        const diff = this.unpinnedWidth - this.totalWidth;\n        return this.width === null || diff >= 0;\n    }\n\n    /**\n     * @hidden @internal\n     * Gets the combined width of the columns that are specific to the enabled grid features. They are fixed.\n     */\n    public featureColumnsWidth(expander?: ElementRef) {\n        if (Number.isNaN(this._headerFeaturesWidth)) {\n            // TODO: platformUtil.isBrowser check\n            const rowSelectArea = this.headerSelectorContainer?.nativeElement?.getBoundingClientRect ?\n                this.headerSelectorContainer.nativeElement.getBoundingClientRect().width : 0;\n            const rowDragArea = this.rowDraggable && this.headerDragContainer?.nativeElement?.getBoundingClientRect ?\n                this.headerDragContainer.nativeElement.getBoundingClientRect().width : 0;\n            const groupableArea = this.headerGroupContainer?.nativeElement?.getBoundingClientRect ?\n                this.headerGroupContainer.nativeElement.getBoundingClientRect().width : 0;\n            const expanderWidth = expander?.nativeElement?.getBoundingClientRect ? expander.nativeElement.getBoundingClientRect().width : 0;\n            this._headerFeaturesWidth = rowSelectArea + rowDragArea + groupableArea + expanderWidth;\n        }\n        return this._headerFeaturesWidth;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get summariesMargin() {\n        return this.featureColumnsWidth();\n    }\n\n    /**\n     * Gets an array of `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const colums = this.grid.columns.\n     * ```\n     */\n    get columns(): IgxColumnComponent[] {\n        return this._columns;\n    }\n\n    /**\n     * Gets an array of the pinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const pinnedColumns = this.grid.pinnedColumns.\n     * ```\n     */\n    get pinnedColumns(): IgxColumnComponent[] {\n        if (this._pinnedVisible.length) {\n            return this._pinnedVisible;\n        }\n        this._pinnedVisible = this._pinnedColumns.filter(col => !col.hidden);\n        return this._pinnedVisible;\n    }\n\n    /**\n     * Gets an array of the pinned `IgxRowComponent`s.\n     * @example\n     * ```typescript\n     * const pinnedRow = this.grid.pinnedRows;\n     * ```\n     */\n    get pinnedRows(): IgxGridRowComponent[] {\n        return this._pinnedRowList.toArray().sort((a, b) => {\n            return a.index - b.index;\n        });\n    }\n\n    /**\n     * Gets an array of unpinned `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const unpinnedColumns = this.grid.unpinnedColumns.\n     * ```\n     */\n    get unpinnedColumns(): IgxColumnComponent[] {\n        if (this._unpinnedVisible.length) {\n            return this._unpinnedVisible;\n        }\n        this._unpinnedVisible = this._unpinnedColumns.filter((col) => !col.hidden);\n        return this._unpinnedVisible;\n    }\n\n    /**\n     * Gets the `width` to be set on `IgxGridHeaderGroupComponent`.\n     */\n    public getHeaderGroupWidth(column: IgxColumnComponent): string {\n        if (this.hasColumnLayouts) {\n            return '';\n        }\n        const colWidth = parseFloat(column.calcWidth);\n        const minWidth = this.defaultHeaderGroupMinWidth;\n\n        if (colWidth < minWidth) {\n            return minWidth + 'px';\n        }\n        return colWidth + 'px';\n    }\n\n    /**\n     * Returns the `IgxColumnComponent` by field name.\n     * @example\n     * ```typescript\n     * const myCol = this.grid1.getColumnByName(\"ID\");\n     * ```\n     * @param name\n     */\n    public getColumnByName(name: string): IgxColumnComponent {\n        return this.columnList.find((col) => col.field === name);\n    }\n\n    public getColumnByVisibleIndex(index: number): IgxColumnComponent {\n        return this.visibleColumns.find((col) =>\n            !col.columnGroup && !col.columnLayout &&\n            col.visibleIndex === index\n        );\n    }\n\n    /**\n     * Returns the `IgxRowDirective` by index.\n     * @example\n     * ```typescript\n     * const myRow = this.grid1.getRowByIndex(1);\n     * ```\n     * @param index\n     */\n    public getRowByIndex(index: number): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.gridAPI.get_row_by_index(index);\n    }\n\n    /**\n     * Returns `IgxGridRowComponent` object by the specified primary key .\n     * @remarks\n     * Requires that the `primaryKey` property is set.\n     * @example\n     * ```typescript\n     * const myRow = this.grid1.getRowByKey(\"cell5\");\n     * ```\n     * @param keyValue\n     */\n    public getRowByKey(keyValue: any): IgxRowDirective<IgxGridBaseDirective & GridType> {\n        return this.gridAPI.get_row_by_key(keyValue);\n    }\n\n    /**\n     * Returns an array of visible `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * const visibleColumns = this.grid.visibleColumns.\n     * ```\n     */\n    get visibleColumns(): IgxColumnComponent[] {\n        if (this._visibleColumns.length) {\n            return this._visibleColumns;\n        }\n        this._visibleColumns = this.columnList.filter(c => !c.hidden);\n        return this._visibleColumns;\n    }\n\n    /**\n     * Returns the `IgxGridCellComponent` that matches the conditions.\n     * @example\n     * ```typescript\n     * const myCell = this.grid1.getCellByColumn(2,\"UnitPrice\");\n     * ```\n     * @param rowIndex\n     * @param columnField\n     */\n    public getCellByColumn(rowIndex: number, columnField: string): IgxGridCellComponent {\n        const columnId = this.columnList.map((column) => column.field).indexOf(columnField);\n        if (columnId !== -1) {\n            return this.gridAPI.get_cell_by_index(rowIndex, columnId);\n        }\n    }\n\n    public getCellByColumnVisibleIndex(rowIndex: number, index: number): IgxGridCellComponent {\n        return this.gridAPI.get_cell_by_visible_index(rowIndex, index);\n\n    }\n\n    /**\n     * Returns an `IgxGridCellComponent` object by the specified primary key and column field.\n     * @remarks\n     * Requires that the primaryKey property is set.\n     * @example\n     * ```typescript\n     * grid.getCellByKey(1, 'index');\n     * ```\n     * @param rowSelector match any rowID\n     * @param columnField\n     */\n    public getCellByKey(rowSelector: any, columnField: string): IgxGridCellComponent {\n        return this.gridAPI.get_cell_by_key(rowSelector, columnField);\n    }\n\n    /**\n     * Gets the total number of pages.\n     * @example\n     * ```typescript\n     * const totalPages = this.grid.totalPages;\n     * ```\n     */\n    get totalPages(): number {\n        if (this.pagingState) {\n            return this.pagingState.metadata.countPages;\n        }\n        return this._totalRecords >= 0 ? Math.ceil(this._totalRecords / this.perPage) : -1;\n    }\n\n    /**\n     * Gets if the current page is the first page.\n     * @example\n     * ```typescript\n     * const firstPage = this.grid.isFirstPage;\n     * ```\n     */\n    get isFirstPage(): boolean {\n        return this.page === 0;\n    }\n\n    /**\n     * Goes to the next page, if the grid is not already at the last page.\n     * @example\n     * ```typescript\n     * this.grid1.nextPage();\n     * ```\n     */\n    public nextPage(): void {\n        if (!this.isLastPage) {\n            this.page += 1;\n        }\n    }\n\n    /**\n     * Goes to the previous page, if the grid is not already at the first page.\n     * @example\n     * ```typescript\n     * this.grid1.previousPage();\n     * ```\n     */\n    public previousPage(): void {\n        if (!this.isFirstPage) {\n            this.page -= 1;\n        }\n    }\n\n    /**\n     * Returns the total number of records.\n     * @remarks\n     * Only functions when paging is enabled.\n     * @example\n     * ```typescript\n     * const totalRecords = this.grid.totalRecords;\n     * ```\n     */\n    @Input()\n    get totalRecords(): number {\n        return this._totalRecords >= 0 ? this._totalRecords : this.pagingState?.metadata.countRecords;\n    }\n\n    set totalRecords(total: number) {\n        if (total >= 0) {\n            this._totalRecords = total;\n            this._pipeTrigger++;\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Returns if the current page is the last page.\n     * @example\n     * ```typescript\n     * const lastPage = this.grid.isLastPage;\n     * ```\n     */\n    get isLastPage(): boolean {\n        return this.page + 1 >= this.totalPages;\n    }\n\n    /**\n     * Returns the total width of the `IgxGridComponent`.\n     * @example\n     * ```typescript\n     * const gridWidth = this.grid.totalWidth;\n     * ```\n     */\n    get totalWidth(): number {\n        if (!isNaN(this._totalWidth)) { return this._totalWidth; }\n        // Take only top level columns\n        const cols = this.visibleColumns.filter(col => col.level === 0 && !col.pinned);\n        let totalWidth = 0;\n        let i = 0;\n        for (i; i < cols.length; i++) {\n            totalWidth += parseInt(cols[i].calcWidth, 10) || 0;\n        }\n        this._totalWidth = totalWidth;\n        return totalWidth;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get showRowSelectors(): boolean {\n        return this.isRowSelectable && this.hasVisibleColumns && !this.hideRowSelectors;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get showAddButton() {\n        return this.rowEditable && this.dataView.length === 0 && this.columns.length > 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get showDragIcons(): boolean {\n        return this.rowDraggable && this.columns.length > this.hiddenColumnsCount;\n    }\n\n    /**\n     * Reorder columns in the main columnList and _columns collections.\n     * @hidden\n     */\n    protected _moveColumns(from: IgxColumnComponent, to: IgxColumnComponent, pos: DropPosition) {\n        const list = this.columnList.toArray();\n        this._reorderColumns(from, to, pos, list);\n        const newList = this._resetColumnList(list);\n        this.columnList.reset(newList);\n        this.columnList.notifyOnChanges();\n        this._columns = this.columnList.toArray();\n    }\n\n    /**\n     * @hidden\n     */\n    protected _resetColumnList(list?) {\n        if (!list) {\n            list = this.columnList.toArray();\n        }\n        let newList = [];\n        list.filter(c => c.level === 0).forEach(p => {\n            newList.push(p);\n            if (p.columnGroup) {\n                newList = newList.concat(p.allChildren);\n            }\n        });\n        return newList;\n    }\n\n    /**\n     * Reorders columns inside the passed column collection.\n     * When reordering column group collection, the collection is not flattened.\n     * In all other cases, the columns collection is flattened, this is why adittional calculations on the dropIndex are done.\n     * @hidden\n     */\n    protected _reorderColumns(from: IgxColumnComponent, to: IgxColumnComponent, position: DropPosition, columnCollection: any[],\n        inGroup = false) {\n        const fromIndex = columnCollection.indexOf(from);\n        const childColumnsCount = inGroup ? 1 : from.allChildren.length + 1;\n        columnCollection.splice(fromIndex, childColumnsCount);\n        let dropIndex = columnCollection.indexOf(to);\n        if (position === DropPosition.AfterDropTarget) {\n            dropIndex++;\n            if (!inGroup && to.columnGroup) {\n                dropIndex += to.allChildren.length;\n            }\n        }\n        columnCollection.splice(dropIndex, 0, from);\n    }\n\n    /**\n     * Reorder column group collection.\n     * @hidden\n     */\n    protected _moveChildColumns(parent: IgxColumnComponent, from: IgxColumnComponent, to: IgxColumnComponent, pos: DropPosition) {\n        const buffer = parent.children.toArray();\n        this._reorderColumns(from, to, pos, buffer, true);\n        parent.children.reset(buffer);\n    }\n    /**\n     * Places a column before or after the specified target column.\n     * @example\n     * ```typescript\n     * grid.moveColumn(column, target);\n     * ```\n     */\n    public moveColumn(column: IgxColumnComponent, target: IgxColumnComponent, pos: DropPosition = DropPosition.AfterDropTarget) {\n\n        if (column === target || (column.level !== target.level) ||\n            (column.topLevelParent !== target.topLevelParent)) {\n            return;\n        }\n\n        this.endEdit(true);\n        if (column.level) {\n            this._moveChildColumns(column.parent, column, target, pos);\n        }\n\n        if (target.pinned && !column.pinned) {\n            column.pin();\n        }\n\n        if (!target.pinned && column.pinned) {\n            column.unpin();\n        }\n\n        if (target.pinned && column.pinned) {\n            this._reorderColumns(column, target, pos, this._pinnedColumns);\n        }\n\n        if (!target.pinned && !column.pinned) {\n            this._reorderColumns(column, target, pos, this._unpinnedColumns);\n        }\n\n        this._moveColumns(column, target, pos);\n        this._columnsReordered(column, target);\n    }\n\n    /**\n     * Notiy changes, reset cache and populateVisibleIndexes.\n     * @hidden\n     */\n    private _columnsReordered(column: IgxColumnComponent, target) {\n        this.notifyChanges();\n        if (this.hasColumnLayouts) {\n            this.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n        // after reordering is done reset cached column collections.\n        this.resetColumnCollections();\n        column.resetCaches();\n\n        const args = {\n            source: column,\n            target: target\n        };\n\n        this.onColumnMovingEnd.emit(args);\n    }\n\n    /**\n     * Goes to the desired page index.\n     * @example\n     * ```typescript\n     * this.grid1.paginate(1);\n     * ```\n     * @param val\n     */\n    public paginate(val: number): void {\n        if (val < 0 || val > this.totalPages - 1) {\n            return;\n        }\n\n        this.page = val;\n    }\n\n    /**\n     * Manually marks the `IgxGridComponent` for change detection.\n     * @example\n     * ```typescript\n     * this.grid1.markForCheck();\n     * ```\n     */\n    public markForCheck() {\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public beginAddRowByIndex(rowID: any, index: number, asChild?: boolean) {\n        if (!this.rowEditable) {\n            console.warn('The grid must use row edit mode to perform row adding! Please set rowEditable to true.');\n            return;\n        }\n        this.endEdit(true);\n        this.cancelAddMode = false;\n        const isInPinnedArea = this.isRecordPinnedByViewIndex(index);\n        const pinIndex = this.pinnedRecords.findIndex(x => x[this.primaryKey] === rowID);\n        const unpinIndex = this.getUnpinnedIndexById(rowID);\n\n        if (this.expansionStates.get(rowID)) {\n            this.collapseRow(rowID);\n        }\n\n        this.addRowParent = {\n            rowID: rowID,\n            index: isInPinnedArea ? pinIndex : unpinIndex,\n            asChild: asChild,\n            isPinned: isInPinnedArea\n        };\n        this._pipeTrigger++;\n        this.cdr.detectChanges();\n        if (isInPinnedArea) {\n            this.calculateGridHeight();\n        }\n        const newRowIndex = this.addRowParent.index + 1;\n        // ensure adding row is in view.\n        const shouldScroll = this.navigation.shouldPerformVerticalScroll(newRowIndex, -1);\n        if (shouldScroll) {\n            this.navigateTo(newRowIndex, -1);\n        }\n        const row = this.getRowByIndex(index + 1);\n        row.animateAdd = true;\n        row.onAnimationEnd.pipe(first()).subscribe(() => {\n            row.animateAdd = false;\n            const cell = row.cells.find(c => c.editable);\n            if (cell) {\n                cell.setEditMode(true);\n                cell.activate();\n            }\n        });\n    }\n\n    /**\n     * Creates a new `IgxGridRowComponent` and adds the data record to the end of the data source.\n     * @example\n     * ```typescript\n     * this.grid1.addRow(record);\n     * ```\n     * @param data\n     */\n    public addRow(data: any): void {\n        // commit pending states prior to adding a row\n        this.endEdit(true);\n        this.gridAPI.addRowToData(data);\n\n        this.onRowAdded.emit({ data });\n        this._pipeTrigger++;\n        this.notifyChanges();\n    }\n\n    /**\n     * Removes the `IgxGridRowComponent` and the corresponding data record by primary key.\n     * @remarks\n     * Requires that the `primaryKey` property is set.\n     * The method accept rowSelector as a parameter, which is the rowID.\n     * @example\n     * ```typescript\n     * this.grid1.deleteRow(0);\n     * ```\n     * @param rowSelector\n     */\n    public deleteRow(rowSelector: any): void {\n        if (this.primaryKey !== undefined && this.primaryKey !== null) {\n            this.deleteRowById(rowSelector);\n        }\n    }\n\n    /** @hidden */\n    public deleteRowById(rowId: any) {\n        this.gridAPI.deleteRowById(rowId);\n    }\n\n    /**\n     * @hidden\n     */\n    protected deleteRowFromData(rowID: any, index: number) {\n        //  if there is a row (index !== 0) delete it\n        //  if there is a row in ADD or UPDATE state change it's state to DELETE\n        if (index !== -1) {\n            if (this.transactions.enabled) {\n                const transaction: Transaction = { id: rowID, type: TransactionType.DELETE, newValue: null };\n                this.transactions.add(transaction, this.data[index]);\n            } else {\n                this.data.splice(index, 1);\n            }\n        } else {\n            const state: State = this.transactions.getState(rowID);\n            this.transactions.add({ id: rowID, type: TransactionType.DELETE, newValue: null }, state && state.recordRef);\n        }\n    }\n\n    /**\n     * Updates the `IgxGridRowComponent` and the corresponding data record by primary key.\n     * @remarks\n     * Requires that the `primaryKey` property is set.\n     * @example\n     * ```typescript\n     * this.gridWithPK.updateCell('Updated', 1, 'ProductName');\n     * ```\n     * @param value the new value which is to be set.\n     * @param rowSelector corresponds to rowID.\n     * @param column corresponds to column field.\n     */\n    public updateCell(value: any, rowSelector: any, column: string): void {\n        if (this.isDefined(this.primaryKey)) {\n            const col = this.columnList.toArray().find(c => c.field === column);\n            if (col) {\n                // Simplify\n                const rowData = this.gridAPI.getRowData(rowSelector);\n                const index = this.gridAPI.get_row_index_in_data(rowSelector);\n                // If row passed is invalid\n                if (index < 0) {\n                    return;\n                }\n                const id = {\n                    rowID: rowSelector,\n                    columnID: col.index,\n                    rowIndex: index\n                };\n\n                const cell = new IgxCell(id, index, col, rowData[col.field], rowData[col.field], rowData, this);\n                const args = this.gridAPI.update_cell(cell, value);\n\n                if (this.crudService.cell && this.crudService.sameCell(cell)) {\n                    if (args.cancel) {\n                        return;\n                    }\n                    this.crudService.exitCellEdit();\n                }\n                this.cdr.detectChanges();\n            }\n        }\n    }\n\n    /**\n     * Updates the `IgxGridRowComponent`\n     * @remarks\n     * The row is specified by\n     * rowSelector parameter and the data source record with the passed value.\n     * This method will apply requested update only if primary key is specified in the grid.\n     * @example\n     * ```typescript\n     * grid.updateRow({\n     *       ProductID: 1, ProductName: 'Spearmint', InStock: true, UnitsInStock: 1, OrderDate: new Date('2005-03-21')\n     *   }, 1);\n     * ```\n     * @param value\n     * @param rowSelector correspond to rowID\n     */\n    public updateRow(value: any, rowSelector: any): void {\n        if (this.isDefined(this.primaryKey)) {\n            const editableCell = this.crudService.cell;\n            if (editableCell && editableCell.id.rowID === rowSelector) {\n                this.crudService.exitCellEdit();\n            }\n            const row = new IgxRow(rowSelector, -1, this.gridAPI.getRowData(rowSelector), this);\n            this.gridAPI.update_row(row, value);\n\n            // TODO: fix for #5934 and probably break for #5763\n            // consider adding of third optional boolean parameter in updateRow.\n            // If developer set this parameter to true we should call notifyChanges(true), and\n            // vise-versa if developer set it to false we should call notifyChanges(false).\n            // The parameter should default to false\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Returns the data that is contained in the row component.\n     * @remarks\n     * If the primary key is not specified the row selector match the row data.\n     * @example\n     * ```typescript\n     * const data = grid.getRowData(94741);\n     * ```\n     * @param rowSelector correspond to rowID\n     */\n    public getRowData(rowSelector: any) {\n        if (!this.primaryKey) {\n            return rowSelector;\n        }\n        const data = this.gridAPI.get_all_data(this.transactions.enabled);\n        const index = this.gridAPI.get_row_index_in_data(rowSelector);\n        return index < 0 ? {} : data[index];\n    }\n\n    /**\n     * Sort a single `IgxColumnComponent`.\n     * @remarks\n     * Sort the `IgxGridComponent`'s `IgxColumnComponent` based on the provided array of sorting expressions.\n     * @example\n     * ```typescript\n     * this.grid.sort({ fieldName: name, dir: SortingDirection.Asc, ignoreCase: false });\n     * ```\n     */\n    public sort(expression: ISortingExpression | Array<ISortingExpression>): void {\n        this.endEdit(false);\n\n\n        if (expression instanceof Array) {\n            this.gridAPI.sort_multiple(expression);\n        } else {\n            this.gridAPI.sort(expression);\n        }\n        requestAnimationFrame(() => this.onSortingDone.emit(expression));\n    }\n\n    /**\n     * Filters a single `IgxColumnComponent`.\n     * @example\n     * ```typescript\n     * public filter(term) {\n     *      this.grid.filter(\"ProductName\", term, IgxStringFilteringOperand.instance().condition(\"contains\"));\n     * }\n     * ```\n     * @param name\n     * @param value\n     * @param conditionOrExpressionTree\n     * @param ignoreCase\n     */\n    public filter(name: string, value: any, conditionOrExpressionTree?: IFilteringOperation | IFilteringExpressionsTree,\n        ignoreCase?: boolean) {\n        this.filteringService.filter(name, value, conditionOrExpressionTree, ignoreCase);\n    }\n\n    /**\n     * Filters all the `IgxColumnComponent` in the `IgxGridComponent` with the same condition.\n     * @example\n     * ```typescript\n     * grid.filterGlobal('some', IgxStringFilteringOperand.instance().condition('contains'));\n     * ```\n     * @param value\n     * @param condition\n     * @param ignoreCase\n     */\n    public filterGlobal(value: any, condition, ignoreCase?) {\n        this.filteringService.filterGlobal(value, condition, ignoreCase);\n    }\n\n    /**\n     * Enables summaries for the specified column and applies your customSummary.\n     * @remarks\n     * If you do not provide the customSummary, then the default summary for the column data type will be applied.\n     * @example\n     * ```typescript\n     * grid.enableSummaries([{ fieldName: 'ProductName' }, { fieldName: 'ID' }]);\n     * ```\n     * Enable summaries for the listed columns.\n     * @example\n     * ```typescript\n     * grid.enableSummaries('ProductName');\n     * ```\n     * @param rest\n     */\n    public enableSummaries(...rest) {\n        if (rest.length === 1 && Array.isArray(rest[0])) {\n            this._multipleSummaries(rest[0], true);\n        } else {\n            this._summaries(rest[0], true, rest[1]);\n        }\n    }\n\n    /**\n     * Disable summaries for the specified column.\n     * @example\n     * ```typescript\n     * grid.disableSummaries('ProductName');\n     * ```\n     * @remarks\n     * Disable summaries for the listed columns.\n     * @example\n     * ```typescript\n     * grid.disableSummaries([{ fieldName: 'ProductName' }]);\n     * ```\n     */\n    public disableSummaries(...rest) {\n        if (rest.length === 1 && Array.isArray(rest[0])) {\n            this._disableMultipleSummaries(rest[0]);\n        } else {\n            this._summaries(rest[0], false);\n        }\n    }\n\n    /**\n     * If name is provided, clears the filtering state of the corresponding `IgxColumnComponent`.\n     * @remarks\n     * Otherwise clears the filtering state of all `IgxColumnComponent`s.\n     * @example\n     * ```typescript\n     * this.grid.clearFilter();\n     * ```\n     * @param name\n     */\n    public clearFilter(name?: string) {\n        this.filteringService.clearFilter(name);\n    }\n\n    /**\n     * If name is provided, clears the sorting state of the corresponding `IgxColumnComponent`.\n     * @remarks\n     * otherwise clears the sorting state of all `IgxColumnComponent`.\n     * @example\n     * ```typescript\n     * this.grid.clearSort();\n     * ```\n     * @param name\n     */\n    public clearSort(name?: string) {\n        if (!name) {\n            this.sortingExpressions = [];\n            return;\n        }\n        if (!this.gridAPI.get_column_by_name(name)) {\n            return;\n        }\n        this.gridAPI.clear_sort(name);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public refreshGridState(args?) {\n        this.endEdit(true);\n        this.selectionService.clearHeaderCBState();\n        this.summaryService.clearSummaryCache();\n        this.cdr.detectChanges();\n    }\n\n    // TODO: We have return values here. Move them to event args ??\n\n    /**\n     * Pins a column by field name.\n     * @remarks\n     * Returns whether the operation is successful.\n     * @example\n     * ```typescript\n     * this.grid.pinColumn(\"ID\");\n     * ```\n     * @param columnName\n     * @param index\n     */\n    public pinColumn(columnName: string | IgxColumnComponent, index?): boolean {\n        const col = columnName instanceof IgxColumnComponent ? columnName : this.getColumnByName(columnName);\n        return col.pin(index);\n    }\n\n    /**\n     * Unpins a column by field name. Returns whether the operation is successful.\n     * @example\n     * ```typescript\n     * this.grid.pinColumn(\"ID\");\n     * ```\n     * @param columnName\n     * @param index\n     */\n    public unpinColumn(columnName: string | IgxColumnComponent, index?): boolean {\n        const col = columnName instanceof IgxColumnComponent ? columnName : this.getColumnByName(columnName);\n        return col.unpin(index);\n    }\n\n    /**\n     * Pin the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.pinRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n     * @param index The index at which to insert the row in the pinned collection.\n     */\n    public pinRow(rowID: any, index?: number): boolean {\n        if (this._pinnedRecordIDs.indexOf(rowID) !== -1) {\n            return false;\n        }\n        const row = this.gridAPI.get_row_by_key(rowID);\n\n        const eventArgs: IPinRowEventArgs = {\n            insertAtIndex: index,\n            isPinned: true,\n            rowID: rowID,\n            row: row\n        };\n        this.onRowPinning.emit(eventArgs);\n\n        this.endEdit(true);\n\n        const insertIndex = typeof eventArgs.insertAtIndex === 'number' ? eventArgs.insertAtIndex : this._pinnedRecordIDs.length;\n        this._pinnedRecordIDs.splice(insertIndex, 0, rowID);\n        this._pipeTrigger++;\n        if (this.gridAPI.grid) {\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * Unpin the row by its id.\n     * @remarks\n     * ID is either the primaryKey value or the data record instance.\n     * @example\n     * ```typescript\n     * this.grid.unpinRow(rowID);\n     * ```\n     * @param rowID The row id - primaryKey value or the data record instance.\n     */\n    public unpinRow(rowID: any) {\n        const index = this._pinnedRecordIDs.indexOf(rowID);\n        if (index === -1) {\n            return false;\n        }\n        const row = this.gridAPI.get_row_by_key(rowID);\n        const eventArgs: IPinRowEventArgs = {\n            isPinned: false,\n            rowID: rowID,\n            row: row\n        };\n        this.onRowPinning.emit(eventArgs);\n        this.endEdit(true);\n        this._pinnedRecordIDs.splice(index, 1);\n        this._pipeTrigger++;\n        if (this.gridAPI.grid) {\n            this.cdr.detectChanges();\n        }\n        return true;\n    }\n\n    get pinnedRowHeight() {\n        const containerHeight = this.pinContainer ? this.pinContainer.nativeElement.offsetHeight : 0;\n        return this.hasPinnedRecords ? containerHeight : 0;\n    }\n\n    get totalHeight() {\n        return this.calcHeight ? this.calcHeight + this.pinnedRowHeight : this.calcHeight;\n    }\n\n    /**\n     * Recalculates grid width/height dimensions.\n     * @remarks\n     * Should be run when changing DOM elements dimentions manually that affect the grid's size.\n     * @example\n     * ```typescript\n     * this.grid.reflow();\n     * ```\n     */\n    public reflow() {\n        this.calculateGridSizes();\n    }\n\n    /**\n     * Finds the next occurrence of a given string in the grid and scrolls to the cell if it isn't visible.\n     * @remarks\n     * Returns how many times the grid contains the string.\n     * @example\n     * ```typescript\n     * this.grid.findNext(\"financial\");\n     * ```\n     * @param text the string to search.\n     * @param caseSensitive optionally, if the search should be case sensitive (defaults to false).\n     * @param exactMatch optionally, if the text should match the entire value  (defaults to false).\n     */\n    public findNext(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        return this.find(text, 1, caseSensitive, exactMatch);\n    }\n\n    /**\n     * Finds the previous occurrence of a given string in the grid and scrolls to the cell if it isn't visible.\n     * @remarks\n     * Returns how many times the grid contains the string.\n     * @example\n     * ```typescript\n     * this.grid.findPrev(\"financial\");\n     * ```\n     * @param text the string to search.\n     * @param caseSensitive optionally, if the search should be case sensitive (defaults to false).\n     * @param exactMatch optionally, if the text should match the entire value (defaults to false).\n     */\n    public findPrev(text: string, caseSensitive?: boolean, exactMatch?: boolean): number {\n        return this.find(text, -1, caseSensitive, exactMatch);\n    }\n\n    /**\n     * Reapplies the existing search.\n     * @remarks\n     * Returns how many times the grid contains the last search.\n     * @example\n     * ```typescript\n     * this.grid.refreshSearch();\n     * ```\n     * @param updateActiveInfo\n     */\n    public refreshSearch(updateActiveInfo?: boolean, endEdit = true): number {\n        if (this.lastSearchInfo.searchText) {\n            this.rebuildMatchCache();\n\n            if (updateActiveInfo) {\n                const activeInfo = IgxTextHighlightDirective.highlightGroupsMap.get(this.id);\n                this.lastSearchInfo.matchInfoCache.forEach((match, i) => {\n                    if (match.column === activeInfo.column &&\n                        match.row === activeInfo.row &&\n                        match.index === activeInfo.index &&\n                        compareMaps(match.metadata, activeInfo.metadata)) {\n                        this.lastSearchInfo.activeMatchIndex = i;\n                    }\n                });\n            }\n\n            return this.find(this.lastSearchInfo.searchText,\n                0,\n                this.lastSearchInfo.caseSensitive,\n                this.lastSearchInfo.exactMatch,\n                false,\n                endEdit);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Removes all the highlights in the cell.\n     * @example\n     * ```typescript\n     * this.grid.clearSearch();\n     * ```\n     */\n    public clearSearch() {\n        this.lastSearchInfo = {\n            searchText: '',\n            caseSensitive: false,\n            exactMatch: false,\n            activeMatchIndex: 0,\n            matchInfoCache: []\n        };\n\n        this.rowList.forEach((row) => {\n            if (row.cells) {\n                row.cells.forEach((c) => {\n                    c.clearHighlight();\n                });\n            }\n        });\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has sortable columns.\n     * @example\n     * ```typescript\n     * const sortableGrid = this.grid.hasSortableColumns;\n     * ```\n     */\n    get hasSortableColumns(): boolean {\n        return this.columnList.some((col) => col.sortable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has editable columns.\n     * @example\n     * ```typescript\n     * const editableGrid = this.grid.hasEditableColumns;\n     * ```\n     */\n    get hasEditableColumns(): boolean {\n        return this.columnList.some((col) => col.editable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has filterable columns.\n     * @example\n     * ```typescript\n     * const filterableGrid = this.grid.hasFilterableColumns;\n     * ```\n     */\n    get hasFilterableColumns(): boolean {\n        return this.columnList.some((col) => col.filterable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has summarized columns.\n     * @example\n     * ```typescript\n     * const summarizedGrid = this.grid.hasSummarizedColumns;\n     * ```\n     */\n    get hasSummarizedColumns(): boolean {\n        return this.summaryService.hasSummarizedColumns;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get rootSummariesEnabled(): boolean {\n        return this.summaryCalculationMode !== GridSummaryCalculationMode.childLevelsOnly;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get hasVisibleColumns(): boolean {\n        if (this._hasVisibleColumns === undefined) {\n            return this.columnList ? this.columnList.some(c => !c.hidden) : false;\n        }\n        return this._hasVisibleColumns;\n    }\n\n    set hasVisibleColumns(value) {\n        this._hasVisibleColumns = value;\n    }\n    /**\n     * Returns if the `IgxGridComponent` has moveable columns.\n     * @example\n     * ```typescript\n     * const movableGrid = this.grid.hasMovableColumns;\n     * ```\n     */\n    get hasMovableColumns(): boolean {\n        return this.columnList && this.columnList.some((col) => col.movable);\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has column groups.\n     * @example\n     * ```typescript\n     * const groupGrid = this.grid.hasColumnGroups;\n     * ```\n     */\n    get hasColumnGroups(): boolean {\n        return this._columnGroups;\n    }\n    /**\n     * Returns if the `IgxGridComponent` has column layouts for multi-row layout definition.\n     * @example\n     * ```typescript\n     * const layoutGrid = this.grid.hasColumnLayouts;\n     * ```\n     */\n    public get hasColumnLayouts() {\n        return !!this.columnList.some(col => col.columnLayout);\n    }\n\n    /**\n     * Returns an array of the selected `IgxGridCellComponent`s.\n     * @example\n     * ```typescript\n     * const selectedCells = this.grid.selectedCells;\n     * ```\n     */\n    get selectedCells(): IgxGridCellComponent[] | any[] {\n        if (this.dataRowList) {\n            return this.dataRowList.map((row) => row.cells.filter((cell) => cell.selected))\n                .reduce((a, b) => a.concat(b), []);\n        }\n        return [];\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get multiRowLayoutRowSize() {\n        return this._multiRowLayoutRowSize;\n    }\n\n    /**\n     * @hidden\n     */\n    protected get rowBasedHeight() {\n        return this.dataLength * this.rowHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected get isPercentWidth() {\n        return this.width && this.width.indexOf('%') !== -1;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isPercentHeight() {\n        return this._height && this._height.indexOf('%') !== -1;\n    }\n\n    /**\n     * @hidden\n     * Sets columns defaultWidth property\n     */\n    protected _derivePossibleWidth() {\n        if (!this.columnWidthSetByUser) {\n            this._columnWidth = this.width !== null ? this.getPossibleColumnWidth() : MINIMUM_COLUMN_WIDTH + 'px';\n        }\n        this.columnList.forEach((column: IgxColumnComponent) => {\n            if (this.hasColumnLayouts && parseInt(this._columnWidth, 10)) {\n                const columnWidthCombined = parseInt(this._columnWidth, 10) * (column.colEnd ? column.colEnd - column.colStart : 1);\n                column.defaultWidth = columnWidthCombined + 'px';\n            } else {\n                column.defaultWidth = this._columnWidth;\n                column.resetCaches();\n            }\n        });\n        this.resetCachedWidths();\n    }\n\n    /**\n     * @hidden\n     */\n    protected get defaultTargetBodyHeight(): number {\n        const allItems = this.dataLength;\n        return this.renderedRowHeight * Math.min(this._defaultTargetRecordNumber,\n            this.paging ? Math.min(allItems, this.perPage) : allItems);\n    }\n\n    /**\n     * @hidden @internal\n     * The rowHeight input is bound to min-height css prop of rows that adds a 1px border in all cases\n     */\n    public get renderedRowHeight(): number {\n        return this.rowHeight + 1;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected calcGridHeadRow() {\n        if (this.maxLevelHeaderDepth) {\n            this._baseFontSize = parseFloat(getComputedStyle(this.document.documentElement).getPropertyValue('font-size'));\n            let minSize = (this.maxLevelHeaderDepth + 1) * this.defaultRowHeight / this._baseFontSize;\n            if (this._allowFiltering && this._filterMode === FilterMode.quickFilter) {\n                minSize += (FILTER_ROW_HEIGHT + 1) / this._baseFontSize;\n            }\n            this.theadRow.nativeElement.style.minHeight = `${minSize}rem`;\n        }\n    }\n\n    /**\n     * @hidden\n     * Sets TBODY height i.e. this.calcHeight\n     */\n    protected calculateGridHeight() {\n        this.calcGridHeadRow();\n        this.summariesHeight = 0;\n        if (this.hasSummarizedColumns && this.rootSummariesEnabled) {\n            this.summariesHeight = this.summaryService.calcMaxSummaryHeight();\n        }\n\n        this.calcHeight = this._calculateGridBodyHeight();\n        if (this.pinnedRowHeight && this.calcHeight) {\n            this.calcHeight -= this.pinnedRowHeight;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected getGroupAreaHeight(): number {\n        return 0;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getComputedHeight(elem) {\n        return elem.offsetHeight ? parseFloat(this.document.defaultView.getComputedStyle(elem).getPropertyValue('height')) : 0;\n    }\n    /**\n     * @hidden\n     */\n    protected getFooterHeight(): number {\n        return this.summariesHeight || this.getComputedHeight(this.tfoot.nativeElement);\n    }\n    /**\n     * @hidden\n     */\n    protected getTheadRowHeight(): number {\n        const height = this.getComputedHeight(this.theadRow.nativeElement);\n        return (!this.allowFiltering || (this.allowFiltering && this.filterMode !== FilterMode.quickFilter)) ?\n            height - this.getFilterCellHeight() :\n            height;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getToolbarHeight(): number {\n        let toolbarHeight = 0;\n        if (this.toolbar.first) {\n            toolbarHeight = this.getComputedHeight(this.toolbar.first.nativeElement);\n        }\n        return toolbarHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getPagingFooterHeight(): number {\n        let pagingHeight = 0;\n        if (this.footer) {\n            const height = this.getComputedHeight(this.footer.nativeElement);\n            pagingHeight = this.footer.nativeElement.firstElementChild ?\n                height : 0;\n        }\n        return pagingHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getFilterCellHeight(): number {\n        const headerGroupNativeEl = (this.headerGroupsList.length !== 0) ?\n            this.headerGroupsList[0].element.nativeElement : null;\n        const filterCellNativeEl = (headerGroupNativeEl) ?\n            headerGroupNativeEl.querySelector('igx-grid-filtering-cell') : null;\n        return (filterCellNativeEl) ? filterCellNativeEl.offsetHeight : 0;\n    }\n\n    /**\n     * @hidden\n     */\n    protected _calculateGridBodyHeight(): number {\n        if (!this._height) {\n            return null;\n        }\n        const actualTheadRow = this.getTheadRowHeight();\n        const footerHeight = this.getFooterHeight();\n        const toolbarHeight = this.getToolbarHeight();\n        const pagingHeight = this.getPagingFooterHeight();\n        const groupAreaHeight = this.getGroupAreaHeight();\n        const scrHeight = this.getComputedHeight(this.scr.nativeElement);\n        const renderedHeight = toolbarHeight + actualTheadRow +\n            footerHeight + pagingHeight + groupAreaHeight +\n            scrHeight;\n\n        let gridHeight = 0;\n\n        if (this.isPercentHeight) {\n            const computed = this.document.defaultView.getComputedStyle(this.nativeElement).getPropertyValue('height');\n            const autoSize = this._shouldAutoSize(renderedHeight);\n            if (autoSize || computed.indexOf('%') !== -1) {\n                const bodyHeight = this.getDataBasedBodyHeight();\n                return bodyHeight > 0 ? bodyHeight : null;\n            }\n            gridHeight = parseFloat(computed);\n        } else {\n            gridHeight = parseInt(this._height, 10);\n        }\n        const height = Math.abs(gridHeight - renderedHeight);\n\n        if (Math.round(height) === 0 || isNaN(gridHeight)) {\n            const bodyHeight = this.defaultTargetBodyHeight;\n            return bodyHeight > 0 ? bodyHeight : null;\n        }\n        return height;\n    }\n\n    protected checkContainerSizeChange() {\n        const origHeight = this.nativeElement.parentElement.offsetHeight;\n        this.nativeElement.style.display = 'none';\n        const height = this.nativeElement.parentElement.offsetHeight;\n        this.nativeElement.style.display = '';\n        return origHeight !== height;\n    }\n\n    protected _shouldAutoSize(renderedHeight) {\n        this.tbody.nativeElement.style.display = 'none';\n        let res = !this.nativeElement.parentElement ||\n            this.nativeElement.parentElement.clientHeight === 0 ||\n            this.nativeElement.parentElement.clientHeight === renderedHeight;\n        if (!isChromium()) {\n            // If grid causes the parent container to extend (for example when container is flex)\n            // we should always auto-size since the actual size of the container will continuously change as the grid renders elements.\n            res = this.checkContainerSizeChange();\n        }\n        this.tbody.nativeElement.style.display = '';\n        return res;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get outerWidth() {\n        return this.hasVerticalScroll() ? this.calcWidth + this.scrollSize : this.calcWidth;\n    }\n\n    /**\n     * @hidden @internal\n     * Gets the visible content height that includes header + tbody + footer.\n     */\n    public getVisibleContentHeight() {\n        let height = this.theadRow.nativeElement.clientHeight + this.tbody.nativeElement.clientHeight;\n        if (this.hasSummarizedColumns) {\n            height += this.tfoot.nativeElement.clientHeight;\n        }\n        return height;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getPossibleColumnWidth(baseWidth: number = null) {\n        let computedWidth;\n        if (baseWidth !== null) {\n            computedWidth = baseWidth;\n        } else {\n            computedWidth = this.calcWidth ||\n                parseInt(this.document.defaultView.getComputedStyle(this.nativeElement).getPropertyValue('width'), 10);\n        }\n\n        computedWidth -= this.featureColumnsWidth();\n\n        const visibleChildColumns = this.visibleColumns.filter(c => !c.columnGroup);\n\n\n        // Column layouts related\n        let visibleCols = [];\n        const columnBlocks = this.visibleColumns.filter(c => c.columnGroup);\n        const colsPerBlock = columnBlocks.map(block => block.getInitialChildColumnSizes(block.children));\n        const combinedBlocksSize = colsPerBlock.reduce((acc, item) => acc + item.length, 0);\n        colsPerBlock.forEach(blockCols => visibleCols = visibleCols.concat(blockCols));\n        //\n\n        const columnsWithSetWidths = this.hasColumnLayouts ?\n            visibleCols.filter(c => c.widthSetByUser) :\n            visibleChildColumns.filter(c => c.widthSetByUser);\n\n        const columnsToSize = this.hasColumnLayouts ?\n            combinedBlocksSize - columnsWithSetWidths.length :\n            visibleChildColumns.length - columnsWithSetWidths.length;\n        const sumExistingWidths = columnsWithSetWidths\n            .reduce((prev, curr) => {\n                const colWidth = curr.width;\n                const widthValue = parseInt(colWidth, 10);\n                const currWidth = colWidth && typeof colWidth === 'string' && colWidth.indexOf('%') !== -1 ?\n                    widthValue / 100 * computedWidth :\n                    widthValue;\n                return prev + currWidth;\n            }, 0);\n\n        // When all columns are hidden, return 0px width\n        if (!sumExistingWidths && !columnsToSize) {\n            return '0px';\n        }\n\n        const columnWidth = Math.floor(!Number.isFinite(sumExistingWidths) ?\n            Math.max(computedWidth / columnsToSize, MINIMUM_COLUMN_WIDTH) :\n            Math.max((computedWidth - sumExistingWidths) / columnsToSize, MINIMUM_COLUMN_WIDTH));\n\n        return columnWidth + 'px';\n    }\n\n    /**\n     * @hidden\n     * Sets grid width i.e. this.calcWidth\n     */\n    protected calculateGridWidth() {\n        let width;\n\n        if (this.isPercentWidth) {\n            /* width in %*/\n            const computed = this.document.defaultView.getComputedStyle(this.nativeElement).getPropertyValue('width');\n            width = computed.indexOf('%') === -1 ? parseInt(computed, 10) : null;\n        } else {\n            width = parseInt(this.width, 10);\n        }\n\n        if (!width && this.nativeElement) {\n            width = this.nativeElement.offsetWidth;\n        }\n\n\n        if (this.width === null || !width) {\n            width = this.getColumnWidthSum();\n        }\n\n        if (this.hasVerticalScroll() && this.width !== null) {\n            width -= this.scrollSize;\n        }\n        if ((Number.isFinite(width) || width === null) && width !== this.calcWidth) {\n            this.calcWidth = width;\n        }\n        this._derivePossibleWidth();\n    }\n\n    private getColumnWidthSum(): number {\n        let colSum = 0;\n        const cols = this.hasColumnLayouts ?\n            this.visibleColumns.filter(x => x.columnLayout) : this.visibleColumns.filter(x => !x.columnGroup);\n        cols.forEach((item) => {\n            colSum += parseInt((item.calcWidth || item.defaultWidth), 10) || MINIMUM_COLUMN_WIDTH;\n        });\n        if (!colSum) {\n            return null;\n        }\n        this.cdr.detectChanges();\n        colSum += this.featureColumnsWidth();\n        return colSum;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public hasVerticalScroll() {\n        if (this._init) { return false; }\n        const isScrollable = this.verticalScrollContainer ? this.verticalScrollContainer.isScrollable() : false;\n        return !!(this.calcWidth && this.dataView &&\n            this.dataView.length > 0 &&\n            isScrollable);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected getDataBasedBodyHeight(): number {\n        return !this.data || (this.data.length < this._defaultTargetRecordNumber) ?\n            0 : this.defaultTargetBodyHeight;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected onPinnedRowsChanged(change: QueryList<IgxGridRowComponent>) {\n        const diff = this.rowListDiffer.diff(change);\n        if (diff) {\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected onColumnsChanged(change: QueryList<IgxColumnComponent>) {\n        const diff = this.columnListDiffer.diff(change);\n\n        if (this.autoGenerate && this.columnList.length === 0 && this._autoGeneratedCols.length > 0) {\n            // In Ivy if there are nested conditional templates the content children are re-evaluated\n            // hence autogenerated columns are cleared and need to be reset.\n            this.columnList.reset(this._autoGeneratedCols);\n            return;\n        }\n        if (diff) {\n            let added = false;\n            let removed = false;\n            diff.forEachAddedItem((record: IterableChangeRecord<IgxColumnComponent>) => {\n                this.onColumnInit.emit(record.item);\n                added = true;\n                record.item.pinned ? this._pinnedColumns.push(record.item) : this._unpinnedColumns.push(record.item);\n            });\n\n            this.initColumns(this.columnList);\n\n            diff.forEachRemovedItem((record: IterableChangeRecord<IgxColumnComponent | IgxColumnGroupComponent>) => {\n                const isColumnGroup = record.item instanceof IgxColumnGroupComponent;\n                if (!isColumnGroup) {\n                    // Clear Grouping\n                    this.gridAPI.clear_groupby(record.item.field);\n\n                    // Clear Filtering\n                    this.gridAPI.clear_filter(record.item.field);\n\n                    // Close filter row\n                    if (this.filteringService.isFilterRowVisible\n                        && this.filteringService.filteredColumn\n                        && this.filteringService.filteredColumn.field === record.item.field) {\n                        this.filteringRow.close();\n                    }\n\n                    // Clear Sorting\n                    this.gridAPI.clear_sort(record.item.field);\n\n                    // Remove column selection\n                    this.selectionService.deselectColumnsWithNoEvent([record.item.field]);\n                }\n                removed = true;\n            });\n\n            this.resetCaches();\n\n            if (added || removed) {\n                this.summaryService.clearSummaryCache();\n                Promise.resolve().then(() => {\n                    // `onColumnsChanged` can be executed midway a current detectChange cycle and markForCheck will be ignored then.\n                    // This ensures that we will wait for the current cycle to end so we can trigger a new one and ngDoCheck to fire.\n                    this.notifyChanges(true);\n                });\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected calculateGridSizes(recalcFeatureWidth = true) {\n        /*\n            TODO: (R.K.) This layered lasagne should be refactored\n            ASAP. The reason I have to reset the caches so many times is because\n            after teach `detectChanges` call they are filled with invalid\n            state. Of course all of this happens midway through the grid\n            sizing process which of course, uses values from the caches, thus resulting\n            in a broken layout.\n        */\n        this.resetCaches(recalcFeatureWidth);\n        this.cdr.detectChanges();\n        const hasScroll = this.hasVerticalScroll();\n        this.calculateGridWidth();\n        this.resetCaches(recalcFeatureWidth);\n        this.cdr.detectChanges();\n        this.calculateGridHeight();\n\n        if (this.rowEditable) {\n            this.repositionRowEditingOverlay(this.rowInEditMode);\n        }\n\n        if (this.filteringService.isFilterRowVisible) {\n            this.filteringRow.resetChipsArea();\n        }\n\n        this.cdr.detectChanges();\n        // in case scrollbar has appeared recalc to size correctly.\n        if (hasScroll !== this.hasVerticalScroll()) {\n            this.calculateGridWidth();\n            this.cdr.detectChanges();\n        }\n        if (this.zone.isStable) {\n            this.zone.run(() => {\n                this._applyWidthHostBinding();\n                this.cdr.detectChanges();\n            });\n        } else {\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                this.zone.run(() => {\n                    this._applyWidthHostBinding();\n                });\n            });\n        }\n        this.resetCaches(recalcFeatureWidth);\n    }\n\n    private _applyWidthHostBinding() {\n        let width = this._width;\n        if (width === null) {\n            let currentWidth = this.calcWidth;\n            if (this.hasVerticalScroll()) {\n                currentWidth += this.scrollSize;\n            }\n            width = currentWidth + 'px';\n            this.resetCaches();\n        }\n        this._hostWidth = width;\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Gets calculated width of the pinned area.\n     * @example\n     * ```typescript\n     * const pinnedWidth = this.grid.getPinnedWidth();\n     * ```\n     * @param takeHidden If we should take into account the hidden columns in the pinned area.\n     */\n    public getPinnedWidth(takeHidden = false) {\n        const fc = takeHidden ? this._pinnedColumns : this.pinnedColumns;\n        let sum = 0;\n        for (const col of fc) {\n            if (col.level === 0) {\n                sum += parseInt(col.calcWidth, 10);\n            }\n        }\n        if (this.pinning.columns === ColumnPinningPosition.Start) {\n            sum += this.featureColumnsWidth();\n        }\n\n        return sum;\n    }\n\n    /**\n     * @hidden\n     * Gets calculated width of the unpinned area\n     * @param takeHidden If we should take into account the hidden columns in the pinned area.\n     */\n    protected getUnpinnedWidth(takeHidden = false) {\n        let width = this.isPercentWidth ?\n            this.calcWidth :\n            parseInt(this.width, 10) || parseInt(this.hostWidth, 10) || this.calcWidth;\n        if (this.hasVerticalScroll() && !this.isPercentWidth) {\n            width -= this.scrollSize;\n        }\n        if (this.pinning.columns === ColumnPinningPosition.End) {\n            width -= this.featureColumnsWidth();\n        }\n\n        return width - this.getPinnedWidth(takeHidden);\n    }\n\n    /**\n     * @hidden\n     */\n    protected _summaries(fieldName: string, hasSummary: boolean, summaryOperand?: any) {\n        const column = this.gridAPI.get_column_by_name(fieldName);\n        if (column) {\n            column.hasSummary = hasSummary;\n            if (summaryOperand) {\n                if (this.rootSummariesEnabled) { this.summaryService.retriggerRootPipe++; }\n                column.summaries = summaryOperand;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected _multipleSummaries(expressions: ISummaryExpression[], hasSummary: boolean) {\n        expressions.forEach((element) => {\n            this._summaries(element.fieldName, hasSummary, element.customSummary);\n        });\n    }\n    /**\n     * @hidden\n     */\n    protected _disableMultipleSummaries(expressions) {\n        expressions.forEach((column) => {\n            const columnName = column && column.fieldName ? column.fieldName : column;\n            this._summaries(columnName, false);\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    protected resolveDataTypes(rec) {\n        if (typeof rec === 'number') {\n            return DataType.Number;\n        } else if (typeof rec === 'boolean') {\n            return DataType.Boolean;\n        } else if (typeof rec === 'object' && rec instanceof Date) {\n            return DataType.Date;\n        }\n        return DataType.String;\n    }\n\n    /**\n     * @hidden\n     */\n    protected autogenerateColumns() {\n        const data = this.gridAPI.get_data();\n        const factory = this.resolver.resolveComponentFactory(IgxColumnComponent);\n        const fields = this.generateDataFields(data);\n        const columns = [];\n\n        fields.forEach((field) => {\n            const ref = factory.create(this.viewRef.injector);\n            ref.instance.field = field;\n            ref.instance.dataType = this.resolveDataTypes(data[0][field]);\n            ref.changeDetectorRef.detectChanges();\n            columns.push(ref.instance);\n        });\n        this._autoGeneratedCols = columns;\n\n        this.columnList.reset(columns);\n        if (data && data.length > 0) {\n            this.shouldGenerate = false;\n        }\n    }\n\n    protected generateDataFields(data: any[]): string[] {\n        return Object.keys(data && data.length !== 0 ? data[0] : []);\n    }\n\n    /**\n     * @hidden\n     */\n    onlyTopLevel(arr) {\n        return arr.filter(c => c.level === 0);\n    }\n\n    /**\n     * @hidden\n     */\n    protected initColumns(collection: QueryList<IgxColumnComponent>, cb: Function = null) {\n        this._columnGroups = this.columnList.some(col => col.columnGroup);\n        if (this.hasColumnLayouts) {\n            // Set overall row layout size\n            this.columnList.forEach((col) => {\n                if (col.columnLayout) {\n                    const layoutSize = col.children ?\n                        col.children.reduce((acc, val) => Math.max(val.rowStart + val.gridRowSpan - 1, acc), 1) :\n                        1;\n                    this._multiRowLayoutRowSize = Math.max(layoutSize, this._multiRowLayoutRowSize);\n                }\n            });\n        }\n        if (this.hasColumnLayouts && this.hasColumnGroups) {\n            // invalid configuration - multi-row and column groups\n            // remove column groups\n            const columnLayoutColumns = this.columnList.filter((col) => col.columnLayout || col.columnLayoutChild);\n            this.columnList.reset(columnLayoutColumns);\n        }\n        this._maxLevelHeaderDepth = null;\n        this._columns = this.columnList.toArray();\n        collection.forEach((column: IgxColumnComponent) => {\n            column.defaultWidth = this.columnWidthSetByUser ? this._columnWidth : column.defaultWidth ? column.defaultWidth : '';\n\n            if (cb) {\n                cb(column);\n            }\n        });\n\n        this.reinitPinStates();\n\n        if (this.hasColumnLayouts) {\n            collection.forEach((column: IgxColumnComponent) => {\n                column.populateVisibleIndexes();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected reinitPinStates() {\n        this._pinnedColumns = this.columnList\n            .filter((c) => c.pinned).sort((a, b) => this._pinnedColumns.indexOf(a) - this._pinnedColumns.indexOf(b));\n        this._unpinnedColumns = this.hasColumnGroups ? this.columnList.filter((c) => !c.pinned) :\n            this.columnList.filter((c) => !c.pinned)\n                .sort((a, b) => this._unpinnedColumns.indexOf(a) - this._unpinnedColumns.indexOf(b));\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isColumnGrouped(fieldName: string): boolean {\n        return false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onHeaderSelectorClick(event) {\n        if (!this.isMultiRowSelectionEnabled) { return; }\n        this.selectionService.areAllRowSelected() ?\n            this.selectionService.clearRowSelection(event) : this.selectionService.selectAllRows(event);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get headSelectorBaseAriaLabel() {\n        if (this._filteringExpressionsTree.filteringOperands.length > 0) {\n            return this.selectionService.areAllRowSelected() ? 'Deselect all filtered' : 'Select all filtered';\n        }\n\n        return this.selectionService.areAllRowSelected() ? 'Deselect all' : 'Select all';\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get totalRowsCountAfterFilter() {\n        if (this.data) {\n            return this.selectionService.allData.length;\n        }\n\n        return 0;\n    }\n\n    /**\n     * Returns the currently transformed paged/filtered/sorted/grouped pinned row data, displayed in the grid.\n     * @example\n     * ```typescript\n     *      const pinnedDataView = this.grid.pinnedDataView;\n     * ```\n     */\n    get pinnedDataView(): any[] {\n        return this.pinnedRecords ? this.pinnedRecords : [];\n    }\n\n    /**\n     * Returns currently transformed paged/filtered/sorted/grouped unpinned row data, displayed in the grid.\n     * @example\n     * ```typescript\n     *      const pinnedDataView = this.grid.pinnedDataView;\n     * ```\n     */\n    get unpinnedDataView(): any[] {\n        return this.unpinnedRecords ? this.unpinnedRecords : this.verticalScrollContainer.igxForOf || [];\n    }\n\n    /**\n     * Returns the currently transformed paged/filtered/sorted/grouped/pinned/unpinned row data, displayed in the grid.\n     * @example\n     * ```typescript\n     *      const dataView = this.grid.dataView;\n     * ```\n     */\n    get dataView(): any[] {\n        return this.isRowPinningToTop ?\n            [...this.pinnedDataView, ...this.unpinnedDataView] :\n            [...this.unpinnedDataView, ...this.pinnedDataView];\n    }\n\n    /**\n     * Select specified rows by ID.\n     * @example\n     * ```typescript\n     * this.grid.selectRows([1,2,5], true);\n     * ```\n     * @param rowIDs\n     * @param clearCurrentSelection if true clears the current selection\n     */\n    public selectRows(rowIDs: any[], clearCurrentSelection?: boolean) {\n        this.selectionService.selectRowsWithNoEvent(rowIDs, clearCurrentSelection);\n        this.notifyChanges();\n    }\n\n    /**\n     * Deselect specified rows by ID.\n     * @example\n     * ```typescript\n     * this.grid.deselectRows([1,2,5]);\n     * ```\n     * @param rowIDs\n     */\n    public deselectRows(rowIDs: any[]) {\n        this.selectionService.deselectRowsWithNoEvent(rowIDs);\n        this.notifyChanges();\n    }\n\n    /**\n     * Selects all rows\n     * @remarks\n     * By default if filtering is in place, selectAllRows() and deselectAllRows() select/deselect all filtered rows.\n     * If you set the parameter onlyFilterData to false that will select all rows in the grid exept deleted rows.\n     * @example\n     * ```typescript\n     * this.grid.selectAllRows();\n     * this.grid.selectAllRows(false);\n     * ```\n     * @param onlyFilterData\n     */\n    public selectAllRows(onlyFilterData = true) {\n        const data = onlyFilterData && this.filteredData ? this.filteredData : this.gridAPI.get_all_data(true);\n        const rowIDs = this.selectionService.getRowIDs(data).filter(rID => !this.gridAPI.row_deleted_transaction(rID));\n        this.selectRows(rowIDs);\n    }\n\n    /**\n     * Deselects all rows\n     * @remarks\n     * By default if filtering is in place, selectAllRows() and deselectAllRows() select/deselect all filtered rows.\n     * If you set the parameter onlyFilterData to false that will deselect all rows in the grid exept deleted rows.\n     * @example\n     * ```typescript\n     * this.grid.deselectAllRows();\n     * ```\n     * @param onlyFilterData\n     */\n    public deselectAllRows(onlyFilterData = true) {\n        if (onlyFilterData && this.filteredData && this.filteredData.length > 0) {\n            this.deselectRows(this.selectionService.getRowIDs(this.filteredData));\n        } else {\n            this.selectionService.clearAllSelectedRows();\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public clearCellSelection(): void {\n        this.selectionService.clear(true);\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dragScroll(dir: DragScrollDirection): void {\n        const scrollDelta = 48;\n        const horizontal = this.headerContainer.getScroll();\n        const vertical = this.verticalScrollContainer.getScroll();\n        switch (dir) {\n            case DragScrollDirection.LEFT:\n                horizontal.scrollLeft -= scrollDelta;\n                break;\n            case DragScrollDirection.RIGHT:\n                horizontal.scrollLeft += scrollDelta;\n                break;\n            case DragScrollDirection.TOP:\n                vertical.scrollTop -= scrollDelta;\n                break;\n            case DragScrollDirection.BOTTOM:\n                vertical.scrollTop += scrollDelta;\n                break;\n            case DragScrollDirection.BOTTOMLEFT:\n                horizontal.scrollLeft -= scrollDelta;\n                vertical.scrollTop += scrollDelta;\n                break;\n            case DragScrollDirection.BOTTOMRIGHT:\n                horizontal.scrollLeft += scrollDelta;\n                vertical.scrollTop += scrollDelta;\n                break;\n            case DragScrollDirection.TOPLEFT:\n                horizontal.scrollLeft -= scrollDelta;\n                vertical.scrollTop -= scrollDelta;\n                break;\n            case DragScrollDirection.TOPRIGHT:\n                horizontal.scrollLeft += scrollDelta;\n                vertical.scrollTop -= scrollDelta;\n                break;\n            default:\n                return;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isDefined(arg: any): boolean {\n        return arg !== undefined && arg !== null;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public selectRange(arg: GridSelectionRange | GridSelectionRange[] | null | undefined): void {\n        if (!this.isDefined(arg)) {\n            this.clearCellSelection();\n            return;\n        }\n        if (arg instanceof Array) {\n            arg.forEach(range => this.setSelection(range));\n        } else {\n            this.setSelection(arg);\n        }\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public columnToVisibleIndex(field: string | number): number {\n        const visibleColumns = this.visibleColumns;\n        if (typeof field === 'number') {\n            return field;\n        }\n        return visibleColumns.find(column => column.field === field).visibleIndex;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public setSelection(range: GridSelectionRange): void {\n        const startNode = { row: range.rowStart, column: this.columnToVisibleIndex(range.columnStart) };\n        const endNode = { row: range.rowEnd, column: this.columnToVisibleIndex(range.columnEnd) };\n\n        this.selectionService.pointerState.node = startNode;\n        this.selectionService.selectRange(endNode, this.selectionService.pointerState);\n        this.selectionService.addRangeMeta(endNode, this.selectionService.pointerState);\n        this.selectionService.initPointerState();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    getSelectedRanges(): GridSelectionRange[] {\n        return this.selectionService.ranges;\n    }\n\n\n    protected extractDataFromSelection(source: any[], formatters = false, headers = false): any[] {\n        let columnsArray: IgxColumnComponent[];\n        let record = {};\n        const selectedData = [];\n        const activeEl = this.selectionService.activeElement;\n        const totalItems = (this as any).totalItemCount ?? 0;\n        const isRemote = totalItems && totalItems > this.dataView.length;\n        const selectionMap = isRemote ? Array.from(this.selectionService.selection) :\n            Array.from(this.selectionService.selection).filter((tuple) => tuple[0] < source.length);\n\n        if (this.cellSelection === GridSelectionMode.single && activeEl) {\n            selectionMap.push([activeEl.row, new Set<number>().add(activeEl.column)]);\n        }\n\n        for (let [row, set] of selectionMap) {\n            row = this.paging ? row + (this.perPage * this.page) : row;\n            row = isRemote ? row - this.virtualizationState.startIndex : row;\n            if (!source[row] || source[row].detailsData !== undefined) {\n                continue;\n            }\n            const temp = Array.from(set);\n            for (const each of temp) {\n                columnsArray = this.getSelectableColumnsAt(each);\n                columnsArray.forEach((col) => {\n                    if (col) {\n                        const key = headers ? col.header || col.field : col.field;\n                        const value = source[row].ghostRecord ?\n                            resolveNestedPath(source[row].recordRef, col.field) : resolveNestedPath(source[row], col.field);\n                        record[key] = formatters && col.formatter ? col.formatter(value) : value;\n                    }\n                });\n            }\n            if (Object.keys(record).length) {\n                selectedData.push(record);\n            }\n            record = {};\n        }\n        return selectedData;\n    }\n\n    protected getSelectableColumnsAt(index) {\n        if (this.hasColumnLayouts) {\n            const visibleLayoutColumns = this.visibleColumns\n                .filter(col => col.columnLayout)\n                .sort((a, b) => a.visibleIndex - b.visibleIndex);\n            const colLayout = visibleLayoutColumns[index];\n            return colLayout ? colLayout.children.toArray() : [];\n        } else {\n            const visibleColumns = this.visibleColumns\n                .filter(col => !col.columnGroup)\n                .sort((a, b) => a.visibleIndex - b.visibleIndex);\n            return [visibleColumns[index]];\n        }\n    }\n\n    /**\n     *\n     * Returns an array of the current cell selection in the form of `[{ column.field: cell.value }, ...]`.\n     * @remarks\n     * If `formatters` is enabled, the cell value will be formatted by its respective column formatter (if any).\n     * If `headers` is enabled, it will use the column header (if any) instead of the column field.\n     */\n    public getSelectedData(formatters = false, headers = false) {\n        const source = this.filteredSortedData;\n        return this.extractDataFromSelection(source, formatters, headers);\n    }\n\n    /**\n     * Get current selected columns.\n     * @example\n     * Returns an array with selected columns\n     * ```typescript\n     * const selectedColumns = this.grid.selectedColumns();\n     * ```\n     */\n    public selectedColumns(): IgxColumnComponent[] {\n        const fields = this.selectionService.getSelectedColumns();\n        return fields.map(field => this.getColumnByName(field)).filter(field => field);\n    }\n\n    /**\n     * Select specified columns.\n     * @example\n     * ```typescript\n     * this.grid.selectColumns(['ID','Name'], true);\n     * ```\n     * @param columns\n     * @param clearCurrentSelection if true clears the current selection\n     */\n    public selectColumns(columns: string[] | IgxColumnComponent[], clearCurrentSelection?: boolean) {\n        let fieldToSelect: string[] = [];\n        if (columns.length === 0 || typeof columns[0] === 'string') {\n            fieldToSelect = columns as string[];\n        } else {\n            (columns as IgxColumnComponent[]).forEach(col => {\n                if (col.columnGroup) {\n                    const children = col.allChildren.filter(c => !c.columnGroup).map(c => c.field);\n                    fieldToSelect = [...fieldToSelect, ...children];\n                } else {\n                    fieldToSelect.push(col.field);\n                }\n            });\n        }\n\n        this.selectionService.selectColumnsWithNoEvent(fieldToSelect, clearCurrentSelection);\n        this.notifyChanges();\n    }\n\n    /**\n     * Deselect specified columns by filed.\n     * @example\n     * ```typescript\n     * this.grid.deselectColumns(['ID','Name']);\n     * ```\n     * @param columns\n     */\n    public deselectColumns(columns: string[] | IgxColumnComponent[]) {\n        let fieldToDeselect: string[] = [];\n        if (columns.length === 0 || typeof columns[0] === 'string') {\n            fieldToDeselect = columns as string[];\n        } else {\n            (columns as IgxColumnComponent[]).forEach(col => {\n                if (col.columnGroup) {\n                    const children = col.allChildren.filter(c => !c.columnGroup).map(c => c.field);\n                    fieldToDeselect = [...fieldToDeselect, ...children];\n                } else {\n                    fieldToDeselect.push(col.field);\n                }\n            });\n        }\n        this.selectionService.deselectColumnsWithNoEvent(fieldToDeselect);\n        this.notifyChanges();\n    }\n\n    /**\n     * Deselects all columns\n     * @example\n     * ```typescript\n     * this.grid.deselectAllColumns();\n     * ```\n     */\n    public deselectAllColumns() {\n        this.selectionService.clearAllSelectedColumns();\n        this.notifyChanges();\n    }\n\n    /**\n     * Selects all columns\n     * @example\n     * ```typescript\n     * this.grid.deselectAllColumns();\n     * ```\n     */\n    public selectAllColumns() {\n        this.selectColumns(this.columnList.filter(c => !c.columnGroup));\n    }\n\n    protected extractDataFromColumnsSelection(source: any[], formatters = false, headers = false): any[] {\n        let record = {};\n        const selectedData = [];\n        const selectedColumns = this.selectedColumns();\n        if (selectedColumns.length === 0) {\n            return [];\n        }\n\n        for (let rowIndex = 0; rowIndex < source.length; rowIndex++) {\n            selectedColumns.forEach((col) => {\n                const key = headers ? col.header || col.field : col.field;\n                record[key] = formatters && col.formatter ? col.formatter(source[rowIndex][col.field])\n                    : source[rowIndex][col.field];\n            });\n\n            if (Object.keys(record).length) {\n                selectedData.push(record);\n            }\n            record = {};\n        }\n        return selectedData;\n    }\n\n    /**\n     *\n     * Returns an array of the current columns selection in the form of `[{ column.field: cell.value }, ...]`.\n     * @remarks\n     * If `formatters` is enabled, the cell value will be formatted by its respective column formatter (if any).\n     * If `headers` is enabled, it will use the column header (if any) instead of the column field.\n     */\n    public getSelectedColumnsData(formatters = false, headers = false) {\n        const source = this.filteredSortedData ? this.filteredSortedData : this.data;\n        return this.extractDataFromColumnsSelection(source, formatters, headers);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public preventContainerScroll = (evt) => {\n        if (evt.target.scrollTop !== 0) {\n            this.verticalScrollContainer.addScrollTop(evt.target.scrollTop);\n            evt.target.scrollTop = 0;\n        }\n        if (evt.target.scrollLeft !== 0) {\n            this.headerContainer.scrollPosition += evt.target.scrollLeft;\n            evt.target.scrollLeft = 0;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public copyHandler(event) {\n        if (!this.clipboardOptions.enabled || this.crudService.cellInEditMode || (!isIE() && event.type === 'keydown')) {\n            return;\n        }\n\n        const data = this.getSelectedData(this.clipboardOptions.copyFormatters, this.clipboardOptions.copyHeaders);\n        const ev = { data, cancel: false } as IGridClipboardEvent;\n        this.onGridCopy.emit(ev);\n\n        if (ev.cancel) {\n            return;\n        }\n\n        const transformer = new CharSeparatedValueData(ev.data, this.clipboardOptions.separator);\n        let result = transformer.prepareData();\n\n        if (!this.clipboardOptions.copyHeaders) {\n            result = result.substring(result.indexOf('\\n') + 1);\n        }\n\n        if (isIE()) {\n            (window as any).clipboardData.setData('Text', result);\n            return;\n        }\n\n        event.preventDefault();\n\n        /* Necessary for the hiearachical case but will probably have to\n           change how getSelectedData is propagated in the hiearachical grid\n        */\n        event.stopPropagation();\n        event.clipboardData.setData('text/plain', result);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public showSnackbarFor(index: number) {\n        this.addRowSnackbar.actionText = index === -1 ? '' : this.snackbarActionText;\n        this.lastAddedRowIndex = index;\n        this.addRowSnackbar.show();\n    }\n\n    /**\n     * Navigates to a position in the grid based on provided `rowindex` and `visibleColumnIndex`.\n     * @remarks\n     * Also can execute a custom logic over the target element,\n     * through a callback function that accepts { targetType: GridKeydownTargetType, target: Object }\n     * @example\n     * ```typescript\n     *  this.grid.navigateTo(10, 3, (args) => { args.target.nativeElement.focus(); });\n     * ```\n     */\n    public navigateTo(rowIndex: number, visibleColIndex = -1, cb: Function = null) {\n        const totalItems = (this as any).totalItemCount ?? this.dataView.length - 1;\n        if (rowIndex < 0 || rowIndex > totalItems || (visibleColIndex !== -1\n            && this.columnList.map(col => col.visibleIndex).indexOf(visibleColIndex) === -1)) {\n            return;\n        }\n        if (this.dataView.slice(rowIndex, rowIndex + 1).find(rec => rec.expression || rec.childGridsData)) {\n            visibleColIndex = -1;\n        }\n        // If the target row is pinned no need to scroll as well.\n        const shouldScrollVertically = this.navigation.shouldPerformVerticalScroll(rowIndex, visibleColIndex);\n        const shouldScrollHorizontally = this.navigation.shouldPerformHorizontalScroll(visibleColIndex, rowIndex);\n        if (shouldScrollVertically) {\n            this.navigation.performVerticalScrollToCell(rowIndex, visibleColIndex, () => {\n                if (shouldScrollHorizontally) {\n                    this.navigation.performHorizontalScrollToCell(visibleColIndex, () =>\n                        this.executeCallback(rowIndex, visibleColIndex, cb));\n                } else {\n                    this.executeCallback(rowIndex, visibleColIndex, cb);\n                }\n            });\n        } else if (shouldScrollHorizontally) {\n            this.navigation.performHorizontalScrollToCell(visibleColIndex, () => {\n                if (shouldScrollVertically) {\n                    this.navigation.performVerticalScrollToCell(rowIndex, visibleColIndex, () =>\n                        this.executeCallback(rowIndex, visibleColIndex, cb));\n                } else {\n                    this.executeCallback(rowIndex, visibleColIndex, cb);\n                }\n            });\n        } else {\n            this.executeCallback(rowIndex, visibleColIndex, cb);\n        }\n    }\n\n    /**\n     * Returns `ICellPosition` which defines the next cell,\n     * according to the current position, that match specific criteria.\n     * @remarks\n     * You can pass callback function as a third parameter of `getPreviousCell` method.\n     * The callback function accepts IgxColumnComponent as a param\n     * @example\n     * ```typescript\n     *  const nextEditableCellPosition = this.grid.getNextCell(0, 3, (column) => column.editable);\n     * ```\n     */\n    public getNextCell(currRowIndex: number, curVisibleColIndex: number,\n        callback: (IgxColumnComponent) => boolean = null): ICellPosition {\n        const columns = this.columnList.filter(col => !col.columnGroup && col.visibleIndex >= 0);\n\n        if (!this.isValidPosition(currRowIndex, curVisibleColIndex)) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n        }\n        const colIndexes = callback ? columns.filter((col) => callback(col)).map(editCol => editCol.visibleIndex).sort((a, b) => a - b) :\n            columns.map(editCol => editCol.visibleIndex).sort((a, b) => a - b);\n        const nextCellIndex = colIndexes.find(index => index > curVisibleColIndex);\n        if (this.dataView.slice(currRowIndex, currRowIndex + 1)\n            .find(rec => !rec.expression && !rec.summaries && !rec.childGridsData && !rec.detailsData) && nextCellIndex !== undefined) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: nextCellIndex };\n        } else {\n            if (colIndexes.length === 0 || this.getNextDataRowIndex(currRowIndex) === currRowIndex) {\n                return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n            } else {\n                return { rowIndex: this.getNextDataRowIndex(currRowIndex), visibleColumnIndex: colIndexes[0] };\n            }\n        }\n    }\n\n    /**\n     * Returns `ICellPosition` which defines the previous cell,\n     * according to the current position, that match specific criteria.\n     * @remarks\n     * You can pass callback function as a third parameter of `getPreviousCell` method.\n     * The callback function accepts IgxColumnComponent as a param\n     * @example\n     * ```typescript\n     *  const previousEditableCellPosition = this.grid.getPreviousCell(0, 3, (column) => column.editable);\n     * ```\n     */\n    public getPreviousCell(currRowIndex: number, curVisibleColIndex: number,\n        callback: (IgxColumnComponent) => boolean = null): ICellPosition {\n        const columns = this.columnList.filter(col => !col.columnGroup && col.visibleIndex >= 0);\n\n        if (!this.isValidPosition(currRowIndex, curVisibleColIndex)) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n        }\n        const colIndexes = callback ? columns.filter((col) => callback(col)).map(editCol => editCol.visibleIndex).sort((a, b) => b - a) :\n            columns.map(editCol => editCol.visibleIndex).sort((a, b) => b - a);\n        const prevCellIndex = colIndexes.find(index => index < curVisibleColIndex);\n        if (this.dataView.slice(currRowIndex, currRowIndex + 1)\n            .find(rec => !rec.expression && !rec.summaries && !rec.childGridsData && !rec.detailsData) && prevCellIndex !== undefined) {\n            return { rowIndex: currRowIndex, visibleColumnIndex: prevCellIndex };\n        } else {\n            if (colIndexes.length === 0 || this.getNextDataRowIndex(currRowIndex, true) === currRowIndex) {\n                return { rowIndex: currRowIndex, visibleColumnIndex: curVisibleColIndex };\n            } else {\n                return { rowIndex: this.getNextDataRowIndex(currRowIndex, true), visibleColumnIndex: colIndexes[0] };\n            }\n        }\n    }\n\n    private executeCallback(rowIndex, visibleColIndex = -1, cb: Function = null) {\n        if (!cb) { return; }\n        let row = this.summariesRowList.filter(s => s.index !== 0).concat(this.rowList.toArray()).find(r => r.index === rowIndex);\n        if (!row) {\n            if ((this as any).totalItemCount) {\n                this.verticalScrollContainer.onDataChanged.pipe(first()).subscribe(() => {\n                    this.cdr.detectChanges();\n                    row = this.summariesRowList.filter(s => s.index !== 0).concat(this.rowList.toArray()).find(r => r.index === rowIndex);\n                    const cbArgs = this.getNavigationArguments(row, visibleColIndex);\n                    cb(cbArgs);\n                });\n            }\n\n            if (this.dataView[rowIndex].detailsData) {\n                this.navigation.setActiveNode({ row: rowIndex });\n                this.cdr.detectChanges();\n            }\n\n            return;\n        }\n        const args = this.getNavigationArguments(row, visibleColIndex);\n        cb(args);\n    }\n\n    private getNavigationArguments(row, visibleColIndex) {\n        let targetType: GridKeydownTargetType, target;\n        switch (row.nativeElement.tagName.toLowerCase()) {\n            case 'igx-grid-groupby-row':\n                targetType = 'groupRow';\n                target = row;\n                break;\n            case 'igx-grid-summary-row':\n                targetType = 'summaryCell';\n                target = visibleColIndex !== -1 ?\n                    row.summaryCells.find(c => c.visibleColumnIndex === visibleColIndex) : row.summaryCells.first;\n                break;\n            case 'igx-child-grid-row':\n                targetType = 'hierarchicalRow';\n                target = row;\n                break;\n            default:\n                targetType = 'dataCell';\n                target = visibleColIndex !== -1 ? row.cells.find(c => c.visibleColumnIndex === visibleColIndex) : row.cells.first;\n                break;\n        }\n        return { targetType: targetType, target: target };\n    }\n\n    private getNextDataRowIndex(currentRowIndex, previous = false): number {\n        if (currentRowIndex < 0 || (currentRowIndex === 0 && previous) || (currentRowIndex >= this.dataView.length - 1 && !previous)) {\n            return currentRowIndex;\n        }\n        // find next/prev record that is editable.\n        const nextRowIndex = previous ? this.findPrevEditableDataRowIndex(currentRowIndex) :\n            this.dataView.findIndex((rec, index) =>\n                index > currentRowIndex && this.isEditableDataRecordAtIndex(index));\n        return nextRowIndex !== -1 ? nextRowIndex : currentRowIndex;\n    }\n\n    /**\n     * Returns the previous editable row index or -1 if no such row is found.\n     * @param currentIndex The index of the current editable record.\n     */\n    private findPrevEditableDataRowIndex(currentIndex): number {\n        let i = this.dataView.length;\n        while (i--) {\n            if (i < currentIndex && this.isEditableDataRecordAtIndex(i)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n\n    /**\n     * Returns if the record at the specified data view index is a an editable data record.\n     * If record is group rec, summary rec, child rec, ghost rec. etc. it is not editable.\n     * @param dataViewIndex The index of that record in the data view.\n     */\n    private isEditableDataRecordAtIndex(dataViewIndex) {\n        const rec = this.dataView[dataViewIndex];\n        return !rec.expression && !rec.summaries && !rec.childGridsData && !rec.detailsData &&\n            !this.isGhostRecordAtIndex(dataViewIndex);\n    }\n\n    /**\n     * Returns if the record at the specified data view index is a ghost.\n     * If record is pinned but is not in pinned area then it is a ghost record.\n     * @param dataViewIndex The index of that record in the data view.\n     */\n    private isGhostRecordAtIndex(dataViewIndex) {\n        const isPinned = this.isRecordPinned(this.dataView[dataViewIndex]);\n        const isInPinnedArea = this.isRecordPinnedByViewIndex(dataViewIndex);\n        return isPinned && !isInPinnedArea;\n    }\n\n    private isValidPosition(rowIndex, colIndex): boolean {\n        const rows = this.summariesRowList.filter(s => s.index !== 0).concat(this.rowList.toArray()).length;\n        const cols = this.columnList.filter(col => !col.columnGroup && col.visibleIndex >= 0 && !col.hidden).length;\n        if (rows < 1 || cols < 1) { return false; }\n        if (rowIndex > -1 && rowIndex < this.dataView.length &&\n            colIndex > - 1 && colIndex <= Math.max(...this.visibleColumns.map(c => c.visibleIndex))) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public trackColumnChanges(index, col) {\n        return col.field + col._calcWidth;\n    }\n\n    private find(text: string, increment: number, caseSensitive?: boolean, exactMatch?: boolean, scroll?: boolean, endEdit = true) {\n        if (!this.rowList) {\n            return 0;\n        }\n\n        if (endEdit) {\n            this.endEdit(false);\n        }\n\n        if (!text) {\n            this.clearSearch();\n            return 0;\n        }\n\n        const caseSensitiveResolved = caseSensitive ? true : false;\n        const exactMatchResolved = exactMatch ? true : false;\n        let rebuildCache = false;\n\n        if (this.lastSearchInfo.searchText !== text ||\n            this.lastSearchInfo.caseSensitive !== caseSensitiveResolved ||\n            this.lastSearchInfo.exactMatch !== exactMatchResolved) {\n            this.lastSearchInfo = {\n                searchText: text,\n                activeMatchIndex: 0,\n                caseSensitive: caseSensitiveResolved,\n                exactMatch: exactMatchResolved,\n                matchInfoCache: []\n            };\n\n            rebuildCache = true;\n        } else {\n            this.lastSearchInfo.activeMatchIndex += increment;\n        }\n\n        if (rebuildCache) {\n            this.rowList.forEach((row) => {\n                if (row.cells) {\n                    row.cells.forEach((c) => {\n                        c.highlightText(text, caseSensitiveResolved, exactMatchResolved);\n                    });\n                }\n            });\n\n            this.rebuildMatchCache();\n        }\n\n        if (this.lastSearchInfo.activeMatchIndex >= this.lastSearchInfo.matchInfoCache.length) {\n            this.lastSearchInfo.activeMatchIndex = 0;\n        } else if (this.lastSearchInfo.activeMatchIndex < 0) {\n            this.lastSearchInfo.activeMatchIndex = this.lastSearchInfo.matchInfoCache.length - 1;\n        }\n\n        if (this.lastSearchInfo.matchInfoCache.length) {\n            const matchInfo = this.lastSearchInfo.matchInfoCache[this.lastSearchInfo.activeMatchIndex];\n            this.lastSearchInfo = { ...this.lastSearchInfo };\n\n            if (scroll !== false) {\n                this.scrollTo(matchInfo.row, matchInfo.column);\n            }\n\n            IgxTextHighlightDirective.setActiveHighlight(this.id, {\n                column: matchInfo.column,\n                row: matchInfo.row,\n                index: matchInfo.index,\n                metadata: matchInfo.metadata,\n            });\n\n        } else {\n            IgxTextHighlightDirective.clearActiveHighlight(this.id);\n        }\n\n        return this.lastSearchInfo.matchInfoCache.length;\n    }\n\n    /**\n     * Returns an array containing the filtered sorted data.\n     * @example\n     * ```typescript\n     * const filteredSortedData = this.grid1.filteredSortedData;\n     * ```\n     */\n    get filteredSortedData(): any[] {\n        return this._filteredSortedData;\n    }\n\n    /**\n     * @hidden\n     */\n    protected initPinning() {\n        let currentPinnedWidth = 0;\n        const pinnedColumns = [];\n        const unpinnedColumns = [];\n\n        this.calculateGridWidth();\n        this.resetCaches();\n        // When a column is a group or is inside a group, pin all related.\n        this._pinnedColumns.forEach(col => {\n            if (col.parent) {\n                col.parent.pinned = true;\n            }\n            if (col.columnGroup) {\n                col.children.forEach(child => child.pinned = true);\n            }\n        });\n\n        // Make sure we don't exceed unpinned area min width and get pinned and unpinned col collections.\n        // We take into account top level columns (top level groups and non groups).\n        // If top level is unpinned the pinning handles all children to be unpinned as well.\n        for (let i = 0; i < this._columns.length; i++) {\n            if (this._columns[i].pinned && !this._columns[i].parent) {\n                // Pinned column. Check if with it the unpinned min width is exceeded.\n                const colWidth = parseInt(this._columns[i].width, 10);\n                currentPinnedWidth += colWidth;\n                pinnedColumns.push(this._columns[i]);\n            } else if (this._columns[i].pinned && this._columns[i].parent) {\n                if (this._columns[i].topLevelParent.pinned) {\n                    pinnedColumns.push(this._columns[i]);\n                } else {\n                    this._columns[i].pinned = false;\n                    unpinnedColumns.push(this._columns[i]);\n                }\n            } else {\n                unpinnedColumns.push(this._columns[i]);\n            }\n        }\n\n        // Assign the applicaple collections.\n        this._pinnedColumns = pinnedColumns;\n        this._unpinnedColumns = unpinnedColumns;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollTo(row: any | number, column: any | number, inCollection = this._filteredSortedUnpinnedData): void {\n        let delayScrolling = false;\n\n        if (this.paging && typeof (row) !== 'number') {\n            const rowIndex = inCollection.indexOf(row);\n            const page = Math.floor(rowIndex / this.perPage);\n\n            if (this.page !== page) {\n                delayScrolling = true;\n                this.page = page;\n            }\n        }\n\n        if (delayScrolling) {\n            this.verticalScrollContainer.onDataChanged.pipe(first()).subscribe(() => {\n                this.scrollDirective(this.verticalScrollContainer,\n                    typeof (row) === 'number' ? row : this.unpinnedDataView.indexOf(row));\n            });\n        } else {\n            this.scrollDirective(this.verticalScrollContainer,\n                typeof (row) === 'number' ? row : this.unpinnedDataView.indexOf(row));\n        }\n\n        this.scrollToHorizontally(column);\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollToHorizontally(column: any | number) {\n        let columnIndex = typeof column === 'number' ? column : this.getColumnByName(column).visibleIndex;\n        const scrollRow = this.rowList.find(r => r.virtDirRow);\n        const virtDir = scrollRow ? scrollRow.virtDirRow : null;\n        if (this.isPinningToStart && this.pinnedColumns.length) {\n            if (columnIndex >= this.pinnedColumns.length) {\n                columnIndex -= this.pinnedColumns.length;\n                this.scrollDirective(virtDir, columnIndex);\n            }\n        } else {\n            this.scrollDirective(virtDir, columnIndex);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollDirective(directive: IgxGridForOfDirective<any>, goal: number): void {\n        if (!directive) {\n            return;\n        }\n        directive.scrollTo(goal);\n    }\n\n    private rebuildMatchCache() {\n        this.lastSearchInfo.matchInfoCache = [];\n\n        const caseSensitive = this.lastSearchInfo.caseSensitive;\n        const exactMatch = this.lastSearchInfo.exactMatch;\n        const searchText = caseSensitive ? this.lastSearchInfo.searchText : this.lastSearchInfo.searchText.toLowerCase();\n        const data = this.filteredSortedData;\n        const columnItems = this.visibleColumns.filter((c) => !c.columnGroup).sort((c1, c2) => c1.visibleIndex - c2.visibleIndex);\n        data.forEach((dataRow, rowIndex) => {\n            columnItems.forEach((c) => {\n                const pipeArgs = this.getColumnByName(c.field).pipeArgs;\n                const value = c.formatter ? c.formatter(resolveNestedPath(dataRow, c.field)) :\n                    c.dataType === 'number' ? this.decimalPipe.transform(resolveNestedPath(dataRow, c.field),\n                        pipeArgs.digitsInfo, this.locale) :\n                        c.dataType === 'date' ? this.datePipe.transform(resolveNestedPath(dataRow, c.field),\n                            pipeArgs.format, pipeArgs.timezone, this.locale)\n                            : resolveNestedPath(dataRow, c.field);\n                if (value !== undefined && value !== null && c.searchable) {\n                    let searchValue = caseSensitive ? String(value) : String(value).toLowerCase();\n\n                    if (exactMatch) {\n                        if (searchValue === searchText) {\n                            const metadata = new Map<string, any>();\n                            metadata.set('pinned', this.isRecordPinnedByIndex(rowIndex));\n                            this.lastSearchInfo.matchInfoCache.push({\n                                row: dataRow,\n                                column: c.field,\n                                index: 0,\n                                metadata: metadata,\n                            });\n                        }\n                    } else {\n                        let occurenceIndex = 0;\n                        let searchIndex = searchValue.indexOf(searchText);\n\n                        while (searchIndex !== -1) {\n                            const metadata = new Map<string, any>();\n                            metadata.set('pinned', this.isRecordPinnedByIndex(rowIndex));\n                            this.lastSearchInfo.matchInfoCache.push({\n                                row: dataRow,\n                                column: c.field,\n                                index: occurenceIndex++,\n                                metadata: metadata,\n                            });\n\n                            searchValue = searchValue.substring(searchIndex + searchText.length);\n                            searchIndex = searchValue.indexOf(searchText);\n                        }\n                    }\n                }\n            });\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public isExpandedGroup(_group: IGroupByRecord): boolean {\n        return undefined;\n    }\n\n    protected changeRowEditingOverlayStateOnScroll(row: IgxRowDirective<IgxGridBaseDirective & GridType>) {\n        if (!this.rowEditable || !this.rowEditingOverlay || this.rowEditingOverlay.collapsed) {\n            return;\n        }\n        if (!row) {\n            this.toggleRowEditingOverlay(false);\n        } else {\n            this.repositionRowEditingOverlay(row);\n        }\n    }\n\n    /**\n     * Should be called when data and/or isLoading input changes so that the overlay can be\n     * hidden/shown based on the current value of shouldOverlayLoading\n     */\n    protected evaluateLoadingState() {\n        if (this.shouldOverlayLoading) {\n            // a new overlay should be shown\n            const overlaySettings: OverlaySettings = {\n                outlet: this.loadingOutlet,\n                closeOnOutsideClick: false,\n                positionStrategy: new ContainerPositionStrategy()\n            };\n            this.loadingOverlay.open(overlaySettings);\n        } else {\n            this.loadingOverlay.close();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    openRowOverlay(id) {\n        this.configureRowEditingOverlay(id, this.rowList.length <= MIN_ROW_EDITING_COUNT_THRESHOLD);\n\n        this.rowEditingOverlay.open(this.rowEditSettings);\n        this.rowEditingOverlay.element.addEventListener('wheel', this.rowEditingWheelHandler);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public closeRowEditingOverlay() {\n        this.rowEditingOverlay.element.removeEventListener('wheel', this.rowEditingWheelHandler);\n        this.rowEditPositioningStrategy.isTopInitialPosition = null;\n        this.rowEditingOverlay.close();\n        this.rowEditingOverlay.element.parentElement.style.display = '';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public toggleRowEditingOverlay(show) {\n        const rowStyle = this.rowEditingOverlay.element.style;\n        if (show) {\n            rowStyle.display = 'block';\n        } else {\n            rowStyle.display = 'none';\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public repositionRowEditingOverlay(row: IgxRowDirective<IgxGridBaseDirective & GridType>) {\n        if (row && !this.rowEditingOverlay.collapsed) {\n            const rowStyle = this.rowEditingOverlay.element.parentElement.style;\n            if (row) {\n                rowStyle.display = '';\n                this.configureRowEditingOverlay(row.rowID);\n                this.rowEditingOverlay.reposition();\n            } else {\n                rowStyle.display = 'none';\n            }\n        }\n    }\n\n    private configureRowEditingOverlay(rowID: any, useOuter = false) {\n        let settings = this.rowEditSettings;\n        const overlay = this.overlayService.getOverlayById(this.rowEditingOverlay.overlayId);\n        if (overlay) {\n            settings = overlay.settings;\n        }\n        settings.outlet = useOuter ? this.parentRowOutletDirective : this.rowOutletDirective;\n        this.rowEditPositioningStrategy.settings.container = this.tbody.nativeElement;\n        const pinned = this._pinnedRecordIDs.indexOf(rowID) !== -1;\n        const targetRow = !pinned ? this.gridAPI.get_row_by_key(rowID) : this.pinnedRows.find(x => x.rowID === rowID);\n        if (!targetRow) {\n            return;\n        }\n        settings.target = targetRow.element.nativeElement;\n        this.toggleRowEditingOverlay(true);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get rowChangesCount() {\n        if (!this.crudService.row) {\n            return 0;\n        }\n        const f = (obj: any) => {\n            let changes = 0;\n            Object.keys(obj).forEach(key => isObject(obj[key]) ? changes += f(obj[key]) : changes++);\n            return changes;\n        };\n        const rowChanges = this.transactions.getAggregatedValue(this.crudService.row.id, false);\n        return rowChanges ? f(rowChanges) : 0;\n    }\n\n    protected writeToData(rowIndex: number, value: any) {\n        mergeObjects(this.gridAPI.get_all_data()[rowIndex], value);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    endRowTransaction(commit: boolean, row: IgxRow) {\n        row.newData = this.transactions.getAggregatedValue(row.id, true);\n        let rowEditArgs = row.createEditEventArgs();\n\n        if (!commit) {\n            this.transactions.endPending(false);\n        } else {\n            rowEditArgs = this.gridAPI.update_row(row, row.newData);\n            if (rowEditArgs?.cancel) {\n                return true;\n            }\n        }\n\n        this.crudService.endRowEdit();\n\n        const nonCancelableArgs = row.createDoneEditEventArgs(rowEditArgs.oldValue);\n        this.rowEditExit.emit(nonCancelableArgs);\n        this.closeRowEditingOverlay();\n    }\n\n    // TODO: Refactor\n    /**\n     * Finishes the row transactions on the current row.\n     * @remarks\n     * If `commit === true`, passes them from the pending state to the data (or transaction service)\n     * @example\n     * ```html\n     * <button igxButton (click)=\"grid.endEdit(true)\">Commit Row</button>\n     * ```\n     * @param commit\n     */\n    public endEdit(commit = true, event?: Event) {\n        const row = this.crudService.row;\n        const cell = this.crudService.cell;\n        let canceled = false;\n        // TODO: Merge the crudService with with BaseAPI service\n        if (!row && !cell) { return; }\n\n        if (row?.isAddRow) {\n            canceled = this.endAdd(commit, event);\n            return canceled;\n        }\n\n        if (commit) {\n            canceled = this.gridAPI.submit_value();\n            if (canceled) {\n                return true;\n            }\n        } else {\n            this.crudService.exitCellEdit();\n        }\n\n        canceled = this.crudService.exitRowEdit(commit);\n        this.crudService.rowEditingBlocked = canceled;\n        if (canceled) {\n            return true;\n        }\n\n        const activeCell = this.selectionService.activeElement;\n        if (event && activeCell) {\n            const rowIndex = activeCell.row;\n            const visibleColIndex = activeCell.layout ? activeCell.layout.columnVisibleIndex : activeCell.column;\n            this.navigateTo(rowIndex, visibleColIndex, (c) => {\n                if (c.targetType === 'dataCell' && c.target) {\n                    c.target.activate(event);\n                }\n            });\n        }\n\n        return false;\n    }\n\n    public endAdd(commit = true, event?: Event) {\n        const row = this.crudService.row;\n        const cell = this.crudService.cell;\n        const cachedRowData = { ...row.data };\n        let cancelable = false;\n        if (!row && !cell) {\n            return;\n        }\n        if (commit) {\n            this.onRowAdded.pipe(first()).subscribe((args: IRowDataEventArgs) => {\n                const rowData = args.data;\n                const pinnedIndex = this.pinnedRecords.findIndex(x => x[this.primaryKey] === rowData[this.primaryKey]);\n                // A check whether the row is in the current view\n                const viewIndex = pinnedIndex !== -1 ? pinnedIndex : this.findRecordIndexInView(rowData);\n                const dataIndex = this.filteredSortedData.findIndex(data => data[this.primaryKey] === rowData[this.primaryKey]);\n                const isInView = viewIndex !== -1 && !this.navigation.shouldPerformVerticalScroll(viewIndex, 0);\n                const showIndex = isInView ? -1 : dataIndex;\n                this.showSnackbarFor(showIndex);\n            });\n            cancelable = this.gridAPI.submit_add_value();\n            if (!cancelable) {\n                const args = row.createEditEventArgs();\n                this.rowEdit.emit(args);\n                if (args.cancel) {\n                    return args.cancel;\n                }\n                const parentId = this._getParentRecordId();\n                this.gridAPI.addRowToData(row.data, parentId);\n                const doneArgs = row.createDoneEditEventArgs(cachedRowData);\n                this.rowEditDone.emit(doneArgs);\n                this.crudService.endRowEdit();\n                if (this.addRowParent.isPinned) {\n                    this.pinRow(row.id);\n                }\n            }\n            this.addRowParent = null;\n            this.cancelAddMode = cancelable;\n        } else {\n            this.crudService.exitCellEdit();\n            this.cancelAddMode = true;\n        }\n        this.crudService.endRowEdit();\n        this.closeRowEditingOverlay();\n        this._pipeTrigger++;\n        if (!this.cancelAddMode) {\n            this.cdr.detectChanges();\n            this.onRowAdded.emit({ data: row.data });\n        }\n        const nonCancelableArgs = row.createDoneEditEventArgs(cachedRowData);\n        this.rowEditExit.emit(nonCancelableArgs);\n        return this.cancelAddMode;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected _getParentRecordId() {\n        return this.addRowParent.asChild ? this.addRowParent.rowID : undefined;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public endRowEdit(commit = true, event?: Event) {\n        const canceled = this.endEdit(commit, event);\n\n        if (canceled) {\n            return true;\n        }\n\n        const activeCell = this.navigation.activeNode;\n        if (activeCell && activeCell.row !== -1) {\n            this.tbody.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public triggerPipes() {\n        this._pipeTrigger++;\n        this.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public endAddRow() {\n        this.cancelAddMode = true;\n        this.triggerPipes();\n    }\n\n    protected findRecordIndexInView(rec) {\n        return this.dataView.findIndex(data => data[this.primaryKey] === rec[this.primaryKey]);\n    }\n\n    protected getUnpinnedIndexById(id) {\n        return this.unpinnedRecords.findIndex(x => x[this.primaryKey] === id);\n    }\n\n    /**\n     * @hidden\n     */\n    private rowEditingWheelHandler = (event: WheelEvent) => {\n        if (event.deltaY > 0) {\n            this.verticalScrollContainer.scrollNext();\n        } else {\n            this.verticalScrollContainer.scrollPrev();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dataWithAddedInTransactionRows() {\n        const result = <any>cloneArray(this.gridAPI.get_all_data());\n        if (this.transactions.enabled) {\n            result.push(...this.transactions.getAggregatedChanges(true)\n                .filter(t => t.type === TransactionType.ADD)\n                .map(t => t.newValue));\n        }\n\n        return result;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dataLength() {\n        return this.transactions.enabled ? this.dataWithAddedInTransactionRows.length : this.gridAPI.get_all_data().length;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get template(): TemplateRef<any> {\n        if (this.isLoading && (this.hasZeroResultFilter || this.hasNoData)) {\n            return this.loadingGridTemplate ? this.loadingGridTemplate : this.loadingGridDefaultTemplate;\n        }\n\n        if (this.hasZeroResultFilter) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyFilteredGridTemplate;\n        }\n\n        if (this.hasNoData) {\n            return this.emptyGridTemplate ? this.emptyGridTemplate : this.emptyGridDefaultTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    private get hasZeroResultFilter(): boolean {\n        return this.filteredData && this.filteredData.length === 0;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    private get hasNoData(): boolean {\n        return !this.data || this.dataLength === 0;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public hasHorizontalScroll() {\n        return this.totalWidth - this.unpinnedWidth > 0;\n    }\n\n    protected _restoreVirtState(row) {\n        // check virtualization state of data record added from cache\n        // in case state is no longer valid - update it.\n        const rowForOf = row.virtDirRow;\n        const gridScrLeft = rowForOf.getScroll().scrollLeft;\n        const left = -parseInt(rowForOf.dc.instance._viewContainer.element.nativeElement.style.left, 10);\n        const actualScrollLeft = left + rowForOf.getColumnScrollLeft(rowForOf.state.startIndex);\n        if (gridScrLeft !== actualScrollLeft) {\n            rowForOf.onHScroll(gridScrLeft);\n            rowForOf.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected getExportExcel(): boolean {\n        return this._exportExcel;\n    }\n\n    /**\n     * @hidden\n     */\n    protected getExportCsv(): boolean {\n        return this._exportCsv;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get shouldOverlayLoading(): boolean {\n        return this.isLoading && !this.hasNoData && !this.hasZeroResultFilter;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isSummaryRow(rowData): boolean {\n        return rowData.summaries && (rowData.summaries instanceof Map);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isMultiRowSelectionEnabled(): boolean {\n        return this.rowSelection === GridSelectionMode.multiple;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isRowSelectable(): boolean {\n        return this.rowSelection !== GridSelectionMode.none;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get isCellSelectable() {\n        return this.cellSelection !== GridSelectionMode.none;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public cachedViewLoaded(args: ICachedViewLoadedEventArgs) {\n        if (this.hasHorizontalScroll()) {\n            const tmplId = args.context.templateID;\n            const index = args.context.index;\n            args.view.detectChanges();\n            this.zone.onStable.pipe(first()).subscribe(() => {\n                const row = tmplId === 'dataRow' ? this.getRowByIndex(index) : null;\n                const summaryRow = tmplId === 'summaryRow' ? this.summariesRowList.find((sr) => sr.dataRowIndex === index) : null;\n                if (row && row instanceof IgxRowDirective) {\n                    this._restoreVirtState(row);\n                } else if (summaryRow) {\n                    this._restoreVirtState(summaryRow);\n                }\n            });\n        }\n    }\n\n    /**\n     * Opens the advanced filtering dialog.\n     */\n    public openAdvancedFilteringDialog() {\n        if (!this._advancedFilteringOverlayId) {\n            this._advancedFilteringOverlaySettings.target =\n                (this as any).rootGrid ? (this as any).rootGrid.nativeElement : this.nativeElement;\n            this._advancedFilteringOverlaySettings.outlet = this.outlet;\n\n            this._advancedFilteringOverlayId = this.overlayService.attach(\n                IgxAdvancedFilteringDialogComponent,\n                this._advancedFilteringOverlaySettings,\n                {\n                    injector: this.viewRef.injector,\n                    componentFactoryResolver: this.resolver\n                });\n            this.overlayService.show(this._advancedFilteringOverlayId, this._advancedFilteringOverlaySettings);\n        }\n    }\n\n    /**\n     * Closes the advanced filtering dialog.\n     * @param applyChanges indicates whether the changes should be applied\n     */\n    public closeAdvancedFilteringDialog(applyChanges: boolean) {\n        if (this._advancedFilteringOverlayId) {\n            const advancedFilteringOverlay = this.overlayService.getOverlayById(this._advancedFilteringOverlayId);\n            const advancedFilteringDialog = advancedFilteringOverlay.componentRef.instance as IgxAdvancedFilteringDialogComponent;\n\n            if (applyChanges) {\n                advancedFilteringDialog.applyChanges();\n            }\n            advancedFilteringDialog.closeDialog();\n        }\n    }\n\n    public getEmptyRecordObjectFor(rec) {\n        const row = { ...rec };\n        Object.keys(row).forEach(key => row[key] = undefined);\n        row[this.primaryKey] = this.generateRowID();\n        return row;\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'igx-grid-footer',\n    template: '<ng-content></ng-content>'\n})\nexport class IgxGridFooterComponent {\n}\n","import { Component } from '@angular/core';\nimport { IgxDropDownGroupComponent } from '../drop-down/public_api';\n\n/**\n * The `<igx-select-item>` is a container intended for row items in\n * a `<igx-select>` container.\n */\n@Component({\n    selector: 'igx-select-item-group',\n    template: `\n        <label id=\"{{labelId}}\">{{ label }}</label>\n        <ng-content select=\"igx-select-item\"></ng-content>\n    `\n})\nexport class IgxSelectGroupComponent extends IgxDropDownGroupComponent {\n}\n","import { IgxDropDownItemNavigationDirective } from '../drop-down/drop-down-navigation.directive';\nimport { Directive, Input, HostListener, OnDestroy } from '@angular/core';\nimport { Subscription, timer } from 'rxjs';\nimport { IgxSelectItemComponent } from './select-item.component';\nimport { IgxSelectBase } from './select.common';\n\n/** @hidden @internal */\n@Directive({\n    selector: '[igxSelectItemNavigation]'\n})\nexport class IgxSelectItemNavigationDirective extends IgxDropDownItemNavigationDirective implements OnDestroy {\n    protected _target: IgxSelectBase = null;\n\n    @Input('igxSelectItemNavigation')\n    get target(): IgxSelectBase {\n        return this._target;\n    }\n    set target(target: IgxSelectBase) {\n        this._target = target ? target : this.dropdown as IgxSelectBase;\n    }\n\n    constructor() { super(null); }\n\n    /** Captures keydown events and calls the appropriate handlers on the target component */\n    handleKeyDown(event: KeyboardEvent) {\n        if (!event) {\n            return;\n        }\n\n        const key = event.key.toLowerCase();\n        if (event.altKey && (key === 'arrowdown' || key === 'arrowup' || key === 'down' || key === 'up')) {\n            this.target.toggle();\n            return;\n        }\n\n        if (this.target.collapsed) {\n            switch (key) {\n                case 'space':\n                case 'spacebar':\n                case ' ':\n                case 'enter':\n                    event.preventDefault();\n                    this.target.open();\n                    return;\n                case 'arrowdown':\n                case 'down':\n                    this.target.navigateNext();\n                    this.target.selectItem(this.target.focusedItem);\n                    event.preventDefault();\n                    return;\n                case 'arrowup':\n                case 'up':\n                    this.target.navigatePrev();\n                    this.target.selectItem(this.target.focusedItem);\n                    event.preventDefault();\n                    return;\n                default:\n                    break;\n            }\n        } else if (key === 'tab' || event.shiftKey && key === 'tab') {\n            this.target.close();\n        }\n\n        super.handleKeyDown(event);\n    }\n\n    // tslint:disable:member-ordering\n    private inputStream = '';\n    private clearStream$ = Subscription.EMPTY;\n\n    /** Handle continuous letter typing navigation */\n    @HostListener('keyup', ['$event'])\n    public captureKey(event: KeyboardEvent) {\n        // relying only on key, available on all major browsers:\n        // https://caniuse.com/#feat=keyboardevent-key (IE/Edge quirk doesn't affect letter typing)\n        if (!event || !event.key || event.key.length > 1) {\n            // ignore longer keys ('Alt', 'ArrowDown', etc)\n            return;\n        }\n\n        this.clearStream$.unsubscribe();\n        this.clearStream$ = timer(500).subscribe(() => {\n            this.inputStream = '';\n        });\n        this.inputStream += event.key;\n        const focusedItem = this.target.focusedItem as IgxSelectItemComponent;\n\n        // select the item\n        if (focusedItem && this.inputStream.length > 1 && focusedItem.itemText.toLowerCase().startsWith(this.inputStream.toLowerCase())) {\n            return;\n        }\n        this.activateItemByText(this.inputStream);\n    }\n\n    public activateItemByText(text: string) {\n        const items = this.target.items as IgxSelectItemComponent[];\n        const activeItemIndex = items.indexOf(this.target.focusedItem as IgxSelectItemComponent) || 0;\n        // ^ this is focused OR selected if the dd is closed\n        let nextItem = items.slice(activeItemIndex + 1).find(x => !x.disabled && (x.itemText.toLowerCase().startsWith(text.toLowerCase())));\n\n        if (!nextItem) {\n            nextItem = items.slice(0, activeItemIndex).find(x => !x.disabled && (x.itemText.toLowerCase().startsWith(text.toLowerCase())));\n        }\n\n        if (!nextItem) {\n            return;\n        }\n\n        if (this.target.collapsed) {\n            this.target.selectItem(nextItem);\n        }\n        this.target.navigateItem(items.indexOf(nextItem));\n    }\n\n    ngOnDestroy(): void {\n        this.clearStream$.unsubscribe();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxDropDownModule } from '../drop-down/public_api';\nimport { IgxToggleModule } from './../directives/toggle/toggle.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../input-group/input-group.component';\nimport { IgxButtonModule } from '../directives/button/button.directive';\n\nimport { IgxSelectComponent, IgxSelectToggleIconDirective, IgxSelectHeaderDirective, IgxSelectFooterDirective } from './select.component';\nimport { IgxSelectItemComponent } from './select-item.component';\nimport { IgxSelectItemNavigationDirective } from './select-navigation.directive';\nimport { IgxSelectGroupComponent } from './select-group.component';\n\n/** @hidden */\n@NgModule({\n    declarations: [\n        IgxSelectComponent,\n        IgxSelectFooterDirective,\n        IgxSelectGroupComponent,\n        IgxSelectHeaderDirective,\n        IgxSelectItemComponent,\n        IgxSelectItemNavigationDirective,\n        IgxSelectToggleIconDirective\n    ],\n    exports: [\n        IgxSelectComponent,\n        IgxSelectFooterDirective,\n        IgxSelectGroupComponent,\n        IgxSelectHeaderDirective,\n        IgxSelectItemComponent,\n        IgxSelectItemNavigationDirective,\n        IgxSelectToggleIconDirective,\n        IgxInputGroupModule\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        IgxButtonModule,\n        IgxDropDownModule,\n        IgxIconModule,\n        IgxInputGroupModule,\n        IgxRippleModule,\n        IgxToggleModule,\n        ReactiveFormsModule\n    ],\n    providers: []\n})\nexport class IgxSelectModule { }\n","import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Component, Input, Output, NgModule, Optional, Inject, EventEmitter, HostBinding } from '@angular/core';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { IDisplayDensityOptions, DisplayDensityToken, DisplayDensityBase, DisplayDensity } from '../core/displayDensity';\nimport { OverlaySettings } from '../services/public_api';\nimport { IgxSelectModule } from '../select/public_api';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../input-group/public_api';\nimport { IPaginatorResourceStrings } from '../core/i18n/paginator-resources';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\n\n@Component({\n    selector: 'igx-paginator',\n    templateUrl: 'paginator.component.html',\n})\nexport class IgxPaginatorComponent extends DisplayDensityBase {\n\n    /**\n     * Total pages calculated from totalRecords and perPage\n     */\n    public totalPages: number;\n    private _resourceStrings = CurrentResourceStrings.PaginatorResStrings;\n    private _overlaySettings: OverlaySettings = {};\n    protected _page = 0;\n    protected _totalRecords: number;\n    protected _selectOptions;\n    private defaultSelectValues = [5, 10, 15, 25, 50, 100, 500];\n    protected _perPage = 15;\n\n    /**\n     * Sets the class of the IgxPaginatorComponent based\n     * on the provided displayDensity.\n     */\n    @HostBinding('class.igx-paginator--cosy')\n    public get classCosy(): boolean {\n        return this.displayDensity === DisplayDensity.cosy;\n    }\n\n    @HostBinding('class.igx-paginator--compact')\n    public get classCompact(): boolean {\n        return this.displayDensity === DisplayDensity.compact;\n    }\n\n    @HostBinding('class.igx-paginator')\n    public get classComfortable(): boolean {\n        return this.displayDensity === DisplayDensity.comfortable;\n    }\n\n    /**\n     * An @Input property, sets current page of the `IgxPaginatorComponent`.\n     * The default is 0.\n     * ```typescript\n     * let page = this.paginator.page;\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public get page() {\n        return this._page;\n    }\n\n    public set page(value: number) {\n        this._page = value;\n        this.pageChange.emit(this._page);\n    }\n\n    /**\n     * An @Input property, sets number of visible items per page in the `IgxPaginatorComponent`.\n     * The default is 15.\n     * ```typescript\n     * let itemsPerPage = this.paginator.perPage;\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public get perPage() {\n        return this._perPage;\n    }\n\n    public set perPage(value: number) {\n        this._perPage = Number(value);\n        this.perPageChange.emit(this._perPage);\n        this._selectOptions = this.sortUniqueOptions(this.defaultSelectValues, this._perPage);\n        this.totalPages = Math.ceil(this.totalRecords / this._perPage);\n        if (this.totalPages !== 0 && this.page >= this.totalPages) {\n            this.page = this.totalPages - 1;\n        }\n    }\n\n    /**\n     * An @Input property that sets the total records.\n     * ```typescript\n     * let totalRecords = this.paginator.totalRecords;\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public get totalRecords() {\n        return this._totalRecords;\n    }\n\n    public set totalRecords(value: number) {\n        this._totalRecords = value;\n        this.totalPages = Math.ceil(this.totalRecords / this.perPage);\n    }\n\n    /**\n     * An @Input property that sets custom options in the select of the paginator\n     * ```typescript\n     * let options = this.paginator.selectOptions;\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public get selectOptions() {\n        return this._selectOptions;\n    }\n\n    public set selectOptions(value: Array<number>) {\n        this._selectOptions = this.sortUniqueOptions(value, this._perPage);\n        this.defaultSelectValues = [...value];\n    }\n\n    /**\n     * An @Input property that sets if the pager in the paginator should be enabled.\n     * ```html\n     * <igx-paginator [pagerEnabled]=\"true\"></igx-paginator>\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public pagerEnabled = true;\n\n    /**\n     * An @Input property that sets if the pager in the paginator should be hidden.\n     * ```html\n     * <igx-paginator [pagerHidden]=\"true\"></igx-paginator>\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public pagerHidden = false;\n\n    /**\n     * An @Input property that sets if the dropdown in the paginator should be enabled.\n     * ```html\n     * <igx-paginator [dropdownEnabled]=\"true\"></igx-paginator>\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public dropdownEnabled = true;\n\n    /**\n     * An @Input property that sets if the dropdown in the paginator should be hidden.\n     * ```html\n     * <igx-paginator [dropdownHidden]=\"true\"></igx-paginator>\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @Input()\n    public dropdownHidden = false;\n\n    /**\n     * An @Input property that sets custom OverlaySettings.\n     * ```html\n     * <igx-paginator [overlaySettings] = \"customOverlaySettings\"></igx-paginator>\n     * ```\n     */\n    @Input()\n    public get overlaySettings(): OverlaySettings {\n        return this._overlaySettings;\n    }\n\n    public set overlaySettings(value: OverlaySettings) {\n        this._overlaySettings = Object.assign({}, this._overlaySettings, value);\n    }\n\n    /**\n     * An accessor that sets the resource strings.\n     * By default it uses EN resources.\n     */\n    @Input()\n    set resourceStrings(value: IPaginatorResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    /**\n     * An accessor that returns the resource strings.\n     */\n    get resourceStrings(): IPaginatorResourceStrings {\n        return this._resourceStrings;\n    }\n\n    /**\n     * @deprecated Use 'resourceStrings' instead.\n     * An @Input property, sets number of label of the select.\n     * The default is 'Items per page' localized string.\n     * ```html\n     * <igx-paginator label=\"My custom label\"></igx-paginator>\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    @DeprecateProperty(`'selectLabel' property is deprecated. Use 'resourceStrings' instead.`)\n    @Input()\n    public selectLabel;\n\n    /**\n     * @deprecated Use 'resourceStrings' instead.\n     * An @Input property, sets a preposition between the current page and total pages.\n     * The default is 'of' localized string.\n     * @memberof IgxPaginatorComponent\n     */\n    @DeprecateProperty(`'prepositionPage' property is deprecated. Use 'resourceStrings' instead.`)\n    @Input()\n    public prepositionPage;\n\n    /**\n     * Emitted when `perPage` property value of the paginator is changed.\n     * @example\n     * ```html\n     * <igx-paginator (perPageChange)=\"onPerPageChange($event)\"></igx-paginator>\n     * ```\n     * ```typescript\n     * public onPerPageChange(perPage: number) {\n     *   this.perPage = perPage;\n     * }\n     * ```\n     */\n    @Output()\n    public perPageChange = new EventEmitter<number>();\n\n    /**\n     * Emitted after the current page is changed.\n     * @example\n     * ```html\n     * <igx-paginator (pageChange)=\"onPageChange($event)\"></igx-paginator>\n     * ```\n     * ```typescript\n     * public onPageChange(page: number) {\n     *   this.currentPage = page;\n     * }\n     * ```\n     */\n    @Output()\n    public pageChange = new EventEmitter<number>();\n\n    constructor(@Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions\n    ) {\n        super(_displayDensityOptions);\n    }\n\n    /**\n     * Returns if the current page is the last page.\n     * ```typescript\n     * const lastPage = this.paginator.isLastPage;\n     * ```\n     */\n    get isLastPage(): boolean {\n        return this.page + 1 >= this.totalPages;\n    }\n\n    /**\n     * Returns if the current page is the first page.\n     * ```typescript\n     * const lastPage = this.paginator.isFirstPage;\n     * ```\n     */\n    get isFirstPage(): boolean {\n        return this.page === 0;\n    }\n\n\n    /**\n     * Returns if the first pager buttons should be disabled\n     */\n    get isFirstPageDisabled(): boolean {\n        return this.isFirstPage || !this.pagerEnabled;\n    }\n\n    /**\n     * Returns if the last pager buttons should be disabled\n     */\n    get isLastPageDisabled(): boolean {\n        return this.isLastPage || !this.pagerEnabled;\n    }\n\n    private sortUniqueOptions(values: Array<number>, newOption: number): number[] {\n        return Array.from(new Set([...values, newOption])).sort((a, b) => a - b);\n    }\n\n    /**\n     * Sets DisplayDensity for the <select> inside the paginator\n     * @hidden\n     */\n    public paginatorSelectDisplayDensity(): string {\n        if (this.displayDensity === DisplayDensity.comfortable) {\n            return DisplayDensity.cosy;\n        }\n        return DisplayDensity.compact;\n    }\n    /**\n     * Goes to the next page of the `IgxPaginatorComponent`, if the paginator is not already at the last page.\n     * ```typescript\n     * this.paginator.nextPage();\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    public nextPage(): void {\n        if (!this.isLastPage) {\n            this.page += 1;\n        }\n    }\n    /**\n     * Goes to the previous page of the `IgxPaginatorComponent`, if the paginator is not already at the first page.\n     * ```typescript\n     * this.paginator.previousPage();\n     * ```\n     * @memberof IgxPaginatorComponent\n     */\n    public previousPage(): void {\n        if (!this.isFirstPage) {\n            this.page -= 1;\n        }\n    }\n    /**\n     * Goes to the desired page index.\n     * ```typescript\n     * this.paginator.paginate(1);\n     * ```\n     * @param val\n     * @memberof IgxPaginatorComponent\n     */\n    public paginate(val: number): void {\n        if (val < 0 || val > this.totalPages - 1) {\n            return;\n        }\n        this.page = val;\n    }\n}\n\n@NgModule({\n    declarations: [IgxPaginatorComponent],\n    exports: [IgxPaginatorComponent],\n    imports: [CommonModule, IgxSelectModule, FormsModule, IgxIconModule, IgxButtonModule, IgxRippleModule, IgxInputGroupModule]\n})\nexport class IgxPaginatorModule { }\n","import {\n    Component,\n    HostBinding,\n    Input,\n    ViewChildren,\n    QueryList,\n    EventEmitter,\n    Output,\n    IterableDiffers,\n    IterableDiffer,\n    DoCheck\n} from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { ColumnDisplayOrder } from '../common/enums';\nimport { IgxColumnActionsBaseDirective } from './column-actions-base.directive';\nimport { IgxCheckboxComponent, IChangeCheckboxEventArgs } from '../../checkbox/checkbox.component';\nimport { IColumnToggledEventArgs } from '../common/events';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { DeprecateProperty } from '../../core/deprecateDecorators';\n\nlet NEXT_ID = 0;\n/**\n * Providing reference to `IgxColumnActionsComponent`:\n * ```typescript\n *  @ViewChild('columnActions', { read: IgxColumnActionsComponent })\n *  public columnActions: IgxColumnActionsComponent;\n */\n@Component({\n    selector: 'igx-column-actions',\n    templateUrl: './column-actions.component.html'\n})\nexport class IgxColumnActionsComponent implements DoCheck {\n    protected _differ: IterableDiffer<any> | null = null;\n\n    constructor (private differs: IterableDiffers) {\n        this._differ = this.differs.find([]).create(this.trackChanges);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public actionableColumns: IgxColumnComponent[] = [];\n\n    /**\n     * @hidden @internal\n     */\n    public filteredColumns: IgxColumnComponent[] = [];\n\n    /**\n     * Gets the grid columns to provide an action for.\n     * @deprecated\n     * @example\n     * ```typescript\n     * let gridColumns = this.columnActions.columns;\n     * ```\n     */\n    @DeprecateProperty(`Deprecated. Use 'grid' input instead.`)\n    @Input()\n    public get columns() {\n        return this.grid?.columns;\n    }\n\n    public set columns(value) {\n        if (value && value.length > 0) {\n            this.grid = value[0].grid;\n        }\n    }\n\n    /**\n     * Gets/sets the title of the column actions component.\n     * @example\n     * ```html\n     * <igx-column-actions [title]=\"'Pin Columns'\"></igx-column-actions>\n     * ```\n     */\n    @Input()\n    public title = '';\n\n    /**\n     * @hidden @internal\n     */\n    private _filterColumnsPrompt = '';\n    /**\n     * Gets the prompt that is displayed in the filter input.\n     * @example\n     * ```typescript\n     * let filterColumnsPrompt = this.columnActions.filterColumnsPrompt;\n     * ```\n     */\n    @Input()\n    public get filterColumnsPrompt(): string {\n        return this._filterColumnsPrompt;\n    }\n    /**\n     * Sets the prompt that is displayed in the filter input.\n     * @example\n     * ```html\n     * <igx-column-actions [filterColumnsPrompt]=\"'Type here to search'\"></igx-column-actions>\n     * ```\n     */\n    public set filterColumnsPrompt(value: string) {\n        this._filterColumnsPrompt = value || '';\n    }\n\n    /**\n     * Shows/hides the columns filtering input from the UI.\n     * @example\n     * ```html\n     *  <igx-column-actions [hideFilter]=\"true\"></igx-column-actions>\n     * ```\n     */\n    @Input()\n    public hideFilter = false;\n\n    /**\n     * Gets the checkbox components representing column items currently present in the dropdown\n     * @example\n     * ```typescript\n     * let columnItems =  this.columnActions.columnItems;\n     * ```\n     */\n    @ViewChildren(IgxCheckboxComponent)\n    public columnItems: QueryList<IgxCheckboxComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    private _filterCriteria = '';\n    /**\n     * Gets the value which filters the columns list.\n     * @example\n     * ```typescript\n     * let filterCriteria =  this.columnActions.filterCriteria;\n     * ```\n     */\n    @Input()\n    public get filterCriteria() {\n        return this._filterCriteria;\n    }\n    /**\n     * Sets the value which filters the columns list.\n     * @example\n     * ```html\n     *  <igx-column-actions [filterCriteria]=\"'ID'\"></igx-column-actions>\n     * ```\n     */\n    public set filterCriteria(value: string) {\n        value = value || '';\n        if (value !== this._filterCriteria) {\n            this._filterCriteria = value;\n            this._pipeTrigger++;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    private _columnDisplayOrder: ColumnDisplayOrder = ColumnDisplayOrder.DisplayOrder;\n    /**\n     * Gets the display order of the columns.\n     * @example\n     * ```typescript\n     * let columnDisplayOrder = this.columnActions.columnDisplayOrder;\n     * ```\n     */\n    @Input()\n    public get columnDisplayOrder() {\n        return this._columnDisplayOrder;\n    }\n    /**\n     * Sets the display order of the columns.\n     * @example\n     * ```typescript\n     * this.columnActions.columnDisplayOrder = ColumnDisplayOrder.Alphabetical;\n     * ```\n     */\n    public set columnDisplayOrder(value: ColumnDisplayOrder) {\n        if (value && value !== this._columnDisplayOrder) {\n            this._columnDisplayOrder = value;\n            this._pipeTrigger++;\n        }\n    }\n\n    /**\n     * Gets/sets the max height of the columns area.\n     * @remarks\n     * The default max height is 100%.\n     * @example\n     * ```html\n     * <igx-column-actions [columnsAreaMaxHeight]=\"200px\"></igx-column-actions>\n     * ```\n     */\n    @Input()\n    public columnsAreaMaxHeight = '100%';\n\n    /**\n     * @hidden @internal\n     */\n    private _uncheckAllText: string;\n    /**\n     * Gets the text of the button that unchecks all columns.\n     * @remarks\n     * If unset it is obtained from the IgxColumnActionsBased derived directive applied.\n     * @example\n     * ```typescript\n     * let uncheckAllText = this.columnActions.uncheckAllText;\n     * ```\n     */\n    @Input()\n    public get uncheckAllText() {\n        return this._uncheckAllText || this.actionsDirective.uncheckAllLabel;\n    }\n    /**\n     * Sets the text of the button that unchecks all columns.\n     * @example\n     * ```html\n     * <igx-column-actions [uncheckAllText]=\"'Show All'\"></igx-column-actions>\n     * ```\n     */\n    public set uncheckAllText(value: string) {\n        this._uncheckAllText = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    private _checkAllText: string;\n    /**\n     * Gets the text of the button that checks all columns.\n     * @remarks\n     * If unset it is obtained from the IgxColumnActionsBased derived directive applied.\n     * @example\n     * ```typescript\n     * let uncheckAllText = this.columnActions.uncheckAllText;\n     * ```\n     */\n    @Input()\n    public get checkAllText() {\n        return this._checkAllText || this.actionsDirective.checkAllLabel;\n    }\n    /**\n     * Sets the text of the button that checks all columns.\n     * @remarks\n     * If unset it is obtained from the IgxColumnActionsBased derived directive applied.\n     * @example\n     * ```html\n     * <igx-column-actions [checkAllText]=\"'Hide All'\"></igx-column-actions>\n     * ```\n     */\n    public set checkAllText(value: string) {\n        this._checkAllText = value;\n    }\n\n    /**\n     * Gets/sets the indentation of columns in the column list based on their hierarchy level.\n     * @example\n     * ```\n     * <igx-column-actions [indentation]=\"15\"></igx-column-actions>\n     * ```\n     */\n    @Input()\n    public indentation = 30;\n\n    /**\n     * An event that is emitted after a column's checked state is changed.\n     * Provides references to the `column` and the `checked` properties as event arguments.\n     * ```html\n     *  <igx-column-actions (onColumnToggled)=\"onColumnToggled($event)\"></igx-column-actions>\n     * ```\n     */\n    @Output()\n    public onColumnToggled = new EventEmitter<IColumnToggledEventArgs>();\n\n    /**\n     * @hidden @internal\n     */\n    private _pipeTrigger = 0;\n    /**\n     * @hidden @internal\n     */\n    public get pipeTrigger(): number {\n        return this._pipeTrigger;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public actionsDirective: IgxColumnActionsBaseDirective;\n\n    /**\n     * Sets/Gets the css class selector.\n     * By default the value of the `class` attribute is `\"igx-column-actions\"`.\n     * ```typescript\n     * let cssCLass =  this.columnHidingUI.cssClass;\n     * ```\n     * ```typescript\n     * this.columnHidingUI.cssClass = 'column-chooser';\n     * ```\n     */\n    @HostBinding('attr.class')\n    public cssClass = 'igx-column-actions';\n\n    /**\n     * @hidden @internal\n     */\n    public get checkAllDisabled(): boolean {\n        return this.actionsDirective.allUnchecked;\n\n    }\n    /**\n     * @hidden @internal\n     */\n    public get uncheckAllDisabled(): boolean {\n        return this.actionsDirective.allChecked;\n    }\n\n    /**\n     * Gets/Sets the grid to provide column actions for.\n     * @example\n     * ```typescript\n     * let grid = this.columnActions.grid;\n     * ```\n     */\n    @Input()\n    public grid: IgxGridBaseDirective;\n\n    /**\n     * @hidden @internal\n     */\n    private _id = `igx-column-actions-${NEXT_ID++}`;\n\n    /**\n     * Gets/Sets the value of the `id` attribute.\n     * @remarks\n     * If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-column-actions [id]=\"'igx-actions-1'\"></igx-column-actions>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this._id = value;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get titleID() {\n        return this.id + '_title';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public trackChanges = (index, col) => {\n        return col.field + '_' + this.actionsDirective.actionEnabledColumnsFilter(col, index, []);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngDoCheck() {\n        if (this._differ) {\n            const changes = this._differ.diff(this.grid?.columns);\n            if (changes) {\n                this._pipeTrigger++;\n            }\n        }\n    }\n\n    /**\n     * Unchecks all columns and performs the appropriate action.\n     * @example\n     * ```typescript\n     * this.columnActions.uncheckAllColumns();\n     * ```\n     */\n    public uncheckAllColumns() {\n        this.actionsDirective.uncheckAll();\n    }\n\n    /**\n     * Checks all columns and performs the appropriate action.\n     * @example\n     * ```typescript\n     * this.columnActions.checkAllColumns();\n     * ```\n     */\n    public checkAllColumns() {\n        this.actionsDirective.checkAll();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public toggleColumn(event: IChangeCheckboxEventArgs, column: IgxColumnComponent) {\n        this.onColumnToggled.emit({\n            column: column,\n            checked: event.checked\n        });\n        this.actionsDirective.toggleColumn(column);\n    }\n}\n","import { Pipe, PipeTransform, Inject } from '@angular/core';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneArray, resolveNestedPath } from '../../core/utils';\nimport { GridType } from './grid.interface';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { ColumnDisplayOrder } from './enums';\nimport { IgxColumnActionsComponent } from '../column-actions/column-actions.component';\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxCellStyleClasses'\n})\nexport class IgxGridCellStyleClassesPipe implements PipeTransform {\n\n    transform(cssClasses: { [prop: string]: any }, _: any, data: any, field: string, index: number, __: number): string {\n        if (!cssClasses) {\n            return '';\n        }\n\n        const result = [];\n\n        for (const cssClass of Object.keys(cssClasses)) {\n            const callbackOrValue = cssClasses[cssClass];\n            const apply = typeof callbackOrValue === 'function' ?\n                callbackOrValue(data, field, resolveNestedPath(data, field), index) : callbackOrValue;\n            if (apply) {\n                result.push(cssClass);\n            }\n        }\n\n        return result.join(' ');\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxCellStyles'\n})\nexport class IgxGridCellStylesPipe implements PipeTransform {\n\n    transform(styles: { [prop: string]: any }, _: any, data: any, field: string, index: number, __: number): { [prop: string]: any } {\n        const css = {};\n        if (!styles) {\n            return css;\n        }\n\n        for (const prop of Object.keys(styles)) {\n            const res = styles[prop];\n            css[prop] = typeof res === 'function' ? res(data, field, resolveNestedPath(data, field), index) : res;\n        }\n\n        return css;\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxNotGrouped'\n})\nexport class IgxGridNotGroupedPipe implements PipeTransform {\n\n    transform(value: any[]): any[] {\n        return value.filter(item => !item.columnGroup);\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'igxTopLevel'\n})\nexport class IgxGridTopLevelColumns implements PipeTransform {\n\n    transform(value: any[]): any[] {\n        return value.filter(item => item.level === 0);\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'filterCondition',\n    pure: true\n})\nexport class IgxGridFilterConditionPipe implements PipeTransform {\n\n    public transform(value: string): string {\n        return value.split(/(?=[A-Z])/).join(' ');\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'gridTransaction',\n    pure: true\n})\nexport class IgxGridTransactionPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    transform(collection: any[], id: string, pipeTrigger: number) {\n        const grid: IgxGridBaseDirective = this.gridAPI.grid;\n\n        if (grid.transactions.enabled) {\n            const result = DataUtil.mergeTransactions(\n                cloneArray(collection),\n                grid.transactions.getAggregatedChanges(true),\n                grid.primaryKey);\n            return result;\n        }\n        return collection;\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'paginatorOptions',\n    pure: true,\n})\nexport class IgxGridPaginatorOptionsPipe implements PipeTransform {\n    public transform(values: Array<number>) {\n        return Array.from(new Set([...values])).sort((a, b) => a - b);\n    }\n}\n\n/**\n * @hidden\n * @internal\n */\n@Pipe({\n    name: 'visibleColumns',\n    pure: true\n})\nexport class IgxHasVisibleColumnsPipe implements PipeTransform {\n    transform(values: any[], hasVisibleColumns) {\n        if (!(values && values.length)) {\n            return values;\n        }\n        return hasVisibleColumns ? values : [];\n    }\n\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridRowPinning',\n    pure: true\n})\nexport class IgxGridRowPinningPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    public transform(collection: any[], id: string, isPinned = false, pipeTrigger: number) {\n        const grid = this.gridAPI.grid;\n\n        if (grid.hasPinnedRecords && isPinned) {\n            const result = collection.filter(rec => grid.isRecordPinned(rec));\n            result.sort((rec1, rec2) => grid.getInitialPinnedIndex(rec1) - grid.getInitialPinnedIndex(rec2));\n            return result;\n        }\n\n        grid.unpinnedRecords = collection;\n        if (!grid.hasPinnedRecords) {\n            grid.pinnedRecords = [];\n            return isPinned ? [] : collection;\n        }\n\n        return collection.map((rec) => {\n            return grid.isRecordPinned(rec) ? { recordRef: rec, ghostRecord: true } : rec;\n        });\n    }\n}\n\n@Pipe({\n    name: 'columnActionEnabled',\n    pure: true\n})\nexport class IgxColumnActionEnabledPipe implements PipeTransform {\n\n    constructor(@Inject(IgxColumnActionsComponent) protected columnActions: IgxColumnActionsComponent) { }\n\n    public transform(\n        collection: IgxColumnComponent[],\n        actionFilter: (value: IgxColumnComponent, index: number, array: IgxColumnComponent[]) => boolean,\n        pipeTrigger: number\n    ): IgxColumnComponent[] {\n        if (!collection) {\n            return collection;\n        }\n        let copy = collection.slice(0);\n        if (copy.length && copy[0].grid.hasColumnLayouts) {\n            copy = copy.filter(c => c.columnLayout);\n        }\n        if (actionFilter) {\n            copy = copy.filter(actionFilter);\n        }\n        // Preserve the actionable collection for use in the component\n        this.columnActions.actionableColumns = copy;\n        return copy;\n    }\n}\n\n@Pipe({\n    name: 'filterActionColumns',\n    pure: true\n})\nexport class IgxFilterActionColumnsPipe implements PipeTransform {\n\n    constructor(@Inject(IgxColumnActionsComponent) protected columnActions: IgxColumnActionsComponent) { }\n\n    public transform(collection: IgxColumnComponent[], filterCriteria: string, pipeTrigger: number): IgxColumnComponent[] {\n        if (!collection) {\n            return collection;\n        }\n        let copy = collection.slice(0);\n        if (filterCriteria && filterCriteria.length > 0) {\n            const filterFunc = (c) => {\n                const filterText = c.header || c.field;\n                if (!filterText) { return false; }\n                return filterText.toLocaleLowerCase().indexOf(filterCriteria.toLocaleLowerCase()) >= 0 ||\n                    (c.children?.some(filterFunc) ?? false);\n            };\n            copy = collection.filter(filterFunc);\n        }\n        // Preserve the filtered collection for use in the component\n        this.columnActions.filteredColumns = copy;\n        return copy;\n    }\n}\n\n@Pipe({\n    name: 'sortActionColumns',\n    pure: true\n})\nexport class IgxSortActionColumnsPipe implements PipeTransform {\n\n    public transform(collection: IgxColumnComponent[], displayOrder: ColumnDisplayOrder, pipeTrigger: number): IgxColumnComponent[] {\n        if (displayOrder === ColumnDisplayOrder.Alphabetical) {\n            return collection.sort((a, b) => (a.header || a.field).localeCompare(b.header || b.field));\n        }\n        return collection;\n    }\n}\n\n@Pipe({ name: 'dataMapper' })\nexport class IgxGridDataMapperPipe implements PipeTransform {\n\n    transform(data: any[], field: string, _: number, __: any) {\n        return resolveNestedPath(data, field);\n    }\n}\n\n@Pipe({ name: 'igxStringReplace' })\nexport class IgxStringReplacePipe implements PipeTransform {\n\n    transform(value: string, search: string | RegExp, replacement: string): string {\n        return value.replace(search, replacement);\n    }\n}\n\n@Pipe({ name: 'transactionState' })\nexport class IgxGridTransactionStatePipe implements PipeTransform {\n\n    transform(row_id: any, field: string, rowEditable: boolean, transactions: any, _: any, __: any, ___: any) {\n        if (rowEditable) {\n            const rowCurrentState = transactions.getAggregatedValue(row_id, false);\n            if (rowCurrentState) {\n                const value = resolveNestedPath(rowCurrentState, field);\n                return value !== undefined && value !== null;\n            }\n        } else {\n            const transaction = transactions.getState(row_id);\n            const value = resolveNestedPath(transaction?.value ?? {}, field);\n            return transaction && transaction.value && (value || value === 0 || value === false);\n        }\n    }\n}\n\n@Pipe({ name: 'columnFormatter' })\nexport class IgxColumnFormatterPipe implements PipeTransform {\n\n    transform(value: any, formatter: (v: any) => any) {\n        return formatter(value);\n    }\n}\n\n@Pipe({\n    name: 'gridAddRow',\n    pure: true\n})\nexport class IgxGridAddRowPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    transform(collection: any, isPinned = false, pipeTrigger: number) {\n        const grid = this.gridAPI.grid;\n        if (!grid.rowEditable || !grid.addRowParent || grid.cancelAddMode || isPinned !== grid.addRowParent.isPinned) {\n            return collection;\n        }\n        const copy = collection.slice(0);\n        const parentIndex = grid.addRowParent.index;\n        const row = grid.getEmptyRecordObjectFor(collection[parentIndex]);\n        const rec = {\n            recordRef: row,\n            addRow: true\n        };\n        copy.splice(parentIndex + 1, 0, rec);\n        if (isPinned) {\n            grid.pinnedRecords = copy;\n        } else {\n            grid.unpinnedRecords = copy;\n        }\n        return copy;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n    IgxGridFilterConditionPipe,\n    IgxGridTransactionPipe,\n    IgxGridNotGroupedPipe,\n    IgxGridTopLevelColumns,\n    IgxGridCellStylesPipe,\n    IgxGridCellStyleClassesPipe,\n    IgxGridPaginatorOptionsPipe,\n    IgxHasVisibleColumnsPipe,\n    IgxGridRowPinningPipe,\n    IgxColumnActionEnabledPipe,\n    IgxFilterActionColumnsPipe,\n    IgxSortActionColumnsPipe,\n    IgxGridDataMapperPipe,\n    IgxStringReplacePipe,\n    IgxGridTransactionStatePipe,\n    IgxColumnFormatterPipe,\n    IgxGridAddRowPipe\n} from './pipes';\n\n@NgModule({\n    declarations: [\n        IgxGridFilterConditionPipe,\n        IgxGridTransactionPipe,\n        IgxGridNotGroupedPipe,\n        IgxGridTopLevelColumns,\n        IgxGridCellStylesPipe,\n        IgxGridCellStyleClassesPipe,\n        IgxGridPaginatorOptionsPipe,\n        IgxHasVisibleColumnsPipe,\n        IgxGridRowPinningPipe,\n        IgxColumnActionEnabledPipe,\n        IgxFilterActionColumnsPipe,\n        IgxSortActionColumnsPipe,\n        IgxGridDataMapperPipe,\n        IgxStringReplacePipe,\n        IgxGridTransactionStatePipe,\n        IgxGridAddRowPipe,\n        IgxColumnFormatterPipe\n    ],\n    exports: [\n        IgxGridFilterConditionPipe,\n        IgxGridTransactionPipe,\n        IgxGridNotGroupedPipe,\n        IgxGridTopLevelColumns,\n        IgxGridCellStylesPipe,\n        IgxGridCellStyleClassesPipe,\n        IgxGridPaginatorOptionsPipe,\n        IgxHasVisibleColumnsPipe,\n        IgxGridRowPinningPipe,\n        IgxColumnActionEnabledPipe,\n        IgxFilterActionColumnsPipe,\n        IgxSortActionColumnsPipe,\n        IgxGridDataMapperPipe,\n        IgxStringReplacePipe,\n        IgxGridTransactionStatePipe,\n        IgxGridAddRowPipe,\n        IgxColumnFormatterPipe\n    ],\n    imports: [\n        CommonModule\n    ]\n  })\nexport class IgxGridPipesModule { }\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxProcessBarText]'\n})\nexport class IgxProcessBarTextTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n@Directive({\n    selector: '[igxProgressBarGradient]'\n})\nexport class IgxProgressBarGradientDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n","import { Injectable, Inject, InjectionToken, inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * @hidden\n */\nexport type Direction = 'ltr' | 'rtl';\n\n/**\n * Injection token is used to inject the document into Directionality\n * which factory could be faked for testing purposes.\n *\n * We can't provide and mock the DOCUMENT token from platform-browser because configureTestingModule\n * allows override of the default providers, directive, pipes, modules of the test injector\n * which causes errors.\n *\n * @hidden\n */\nexport const DIR_DOCUMENT = new InjectionToken<Document>('dir-doc', {\n    providedIn: 'root',\n    factory: DIR_DOCUMENT_FACTORY\n});\n\n/**\n * @hidden\n */\nexport function DIR_DOCUMENT_FACTORY(): Document {\n    return inject(DOCUMENT);\n}\n\n/**\n * @hidden\n *\n * Bidirectional service that extracts the value of the direction attribute on the body or html elements.\n *\n * The dir attribute over the body element takes precedence.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class IgxDirectionality {\n    private _dir: Direction;\n    private _document: Document;\n\n    public get value(): Direction {\n        return this._dir;\n    }\n\n    public get document() {\n        return this._document;\n    }\n\n    public get rtl() {\n        return this._dir === 'rtl';\n    }\n\n    constructor(@Inject(DIR_DOCUMENT) document) {\n        this._document = <Document>document;\n        const bodyDir = this._document.body ? this._document.body.dir : null;\n        const htmlDir = this._document.documentElement ? this._document.documentElement.dir : null;\n        const extractedDir = bodyDir || htmlDir;\n        this._dir = (extractedDir === 'ltr' || extractedDir === 'rtl') ? extractedDir : 'ltr';\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Renderer2,\n    ViewChild,\n    ContentChild,\n    AfterViewInit,\n    AfterContentInit,\n    Directive\n} from '@angular/core';\nimport {\n    IgxProcessBarTextTemplateDirective,\n    IgxProgressBarGradientDirective,\n} from './progressbar.common';\nimport { IBaseEventArgs, mkenum } from '../core/utils';\nimport { IgxDirectionality } from '../services/direction/directionality';\n\nconst ONE_PERCENT = 0.01;\nconst MIN_VALUE = 0;\n\nexport const IgxTextAlign = mkenum({\n    START: 'start',\n    CENTER: 'center',\n    END: 'end'\n});\nexport type IgxTextAlign = (typeof IgxTextAlign)[keyof typeof IgxTextAlign];\n\nexport const IgxProgressType = mkenum({\n    ERROR: 'error',\n    INFO: 'info',\n    WARNING: 'warning',\n    SUCCESS: 'success'\n});\nexport type IgxProgressType = (typeof IgxProgressType)[keyof typeof IgxProgressType];\n\nexport interface IChangeProgressEventArgs extends IBaseEventArgs {\n    previousValue: number;\n    currentValue: number;\n}\n\n/**\n * @hidden\n */\n@Directive()\nexport abstract class BaseProgressDirective {\n    private requestAnimationId: number = undefined;\n\n    protected _initValue = 0;\n    protected _contentInit = false;\n    protected _valueInPercent = MIN_VALUE;\n    protected _max = 100;\n    protected _value = MIN_VALUE;\n    protected _newVal = MIN_VALUE;\n    protected _animate = true;\n    protected _step;\n\n    /**\n     * An event, which is triggered after a progress is changed.\n     * ```typescript\n     * public progressChange(event) {\n     *     alert(\"Progress made!\");\n     * }\n     *  //...\n     * ```\n     * ```html\n     * <igx-circular-bar [value]=\"currentValue\" (onProgressChanged)=\"progressChange($event)\"></igx-circular-bar>\n     * <igx-linear-bar [value]=\"currentValue\" (onProgressChanged)=\"progressChange($event)\"></igx-linear-bar>\n     * ```\n     */\n    @Output()\n    public onProgressChanged = new EventEmitter<IChangeProgressEventArgs>();\n\n    /**\n     * Returns the value which update the progress indicator of the `progress bar`.\n     * ```typescript\n     *  @ViewChild(\"MyProgressBar\")\n     * public progressBar: IgxLinearProgressBarComponent | IgxCircularBarComponent;\n     * public stepValue(event) {\n     *     let step = this.progressBar.step;\n     *     alert(step);\n     * }\n     * ```\n     */\n    @Input()\n    get step(): number {\n        if (this._step) {\n            return this._step;\n        }\n\n        return this._max * ONE_PERCENT;\n    }\n\n    /**\n     * Sets the value by which progress indicator is updated. By default it is 1% of the maximum value.\n     * ```html\n     * <igx-linear-bar [max]=\"200\" [value]=\"0\" [step]=\"1\"></igx-linear-bar>\n     * <igx-circular-bar [max]=\"200\" [value]=\"0\" [step]=\"1\"></igx-circular-bar>\n     * ```\n     */\n    set step(val: number) {\n        this._step = Number(val);\n    }\n\n    /**\n     * Animating the progress. By default it is set to true.\n     * ```html\n     * <igx-linear-bar [animate]=\"false\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     * <igx-circular-bar [animate]=\"false\" [max]=\"200\" [value]=\"50\"></igx-circular-bar>\n     * ```\n     */\n    @Input()\n    public set animate(animate: boolean) {\n        this._animate = animate;\n    }\n\n    /**\n     * Returns whether the `progress bar` has animation true/false.\n     * ```typescript\n     *  @ViewChild(\"MyProgressBar\")\n     * public progressBar: IgxLinearProgressBarComponent | IgxCircularBarComponent;\n     * public animationStatus(event) {\n     *     let animationStatus = this.progressBar.animate;\n     *     alert(animationStatus);\n     * }\n     * ```\n     */\n    public get animate(): boolean {\n        return this._animate;\n    }\n\n    /**\n     * Set maximum value that can be passed. By default it is set to 100.\n     * ```html\n     * <igx-linear-bar [max]=\"200\" [value]=\"0\"></igx-linear-bar>\n     * <igx-circular-bar [max]=\"200\" [value]=\"0\"></igx-circular-bar>\n     * ```\n     */\n    @HostBinding('attr.aria-valuemax')\n    @Input()\n    set max(maxNum: number) {\n        this._max = maxNum;\n    }\n\n    /**\n     * Returns the the maximum progress value of the `progress bar`.\n     * ```typescript\n     *  @ViewChild(\"MyProgressBar\")\n     * public progressBar: IgxLinearProgressBarComponent | IgxCircularBarComponent;\n     * public maxValue(event) {\n     *     let max = this.progressBar.max;\n     *     alert(max);\n     * }\n     * ```\n     */\n    get max() {\n        return this._max;\n    }\n\n    /**\n     * Sets the `IgxLinearProgressBarComponent`/`IgxCircularProgressBarComponent` value in percentage.\n     * ```typescript\n     *  @ViewChild(\"MyProgressBar\")\n     * public progressBar: IgxLinearProgressBarComponent; // IgxCircularProgressBarComponent\n     *     public setValue(event){\n     *     this.progressBar.valueInPercent = 56;\n     * }\n     * ```\n     */\n    public set valueInPercent(value: number) {\n        this._valueInPercent = value;\n    }\n\n    /**\n     * Returns the `IgxLinearProgressBarComponent`/`IgxCircularProgressBarComponent` value in percentage.\n     * ```typescript\n     *  @ViewChild(\"MyProgressBar\")\n     * public progressBar: IgxLinearProgressBarComponent; // IgxCircularProgressBarComponent\n     * public valuePercent(event){\n     *     let percentValue = this.progressBar.valueInPercent;\n     *     alert(percentValue);\n     * }\n     * ```\n     */\n    public get valueInPercent(): number {\n        return this._valueInPercent;\n    }\n\n    protected triggerProgressTransition(oldVal, newVal) {\n        if (oldVal === newVal) {\n            return;\n        }\n\n        const changedValues = {\n            currentValue: newVal,\n            previousValue: oldVal\n        };\n\n        const stepDirection = this.directionFlow(oldVal, newVal);\n        if (this._animate) {\n            this.runAnimation(newVal, stepDirection);\n        } else {\n            this.updateProgressDirectly(newVal);\n        }\n\n        this.onProgressChanged.emit(changedValues);\n    }\n\n    /**\n     * @hidden\n     */\n    protected runAnimation(val: number, step: number) {\n        this.requestAnimationId = requestAnimationFrame(\n            () => this.updateProgressSmoothly.call(this, val, step));\n    }\n\n    /**\n     * @hidden\n     */\n    protected updateProgressSmoothly(val: number, step: number) {\n        this._value = valueInRange(this._value, this._max) + step;\n        const passedValue = toPercent(val, this._max);\n        const progressValue = toPercent(this._value, this._max);\n        if (this.valueInPercent === passedValue) {\n            this.updateProgress(val);\n            cancelAnimationFrame(this.requestAnimationId);\n        } else if (this.isInLimitRange(progressValue, passedValue, step)) {\n            this.updateProgress(val);\n            cancelAnimationFrame(this.requestAnimationId);\n        } else {\n            this.valueInPercent = progressValue;\n            this.requestAnimationId = requestAnimationFrame(() => this.updateProgressSmoothly.call(this, val, step));\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    protected updateProgressDirectly(val: number) {\n        this._value = valueInRange(val, this._max);\n        this.valueInPercent = toPercent(this._value, this._max);\n    }\n\n    /**\n     * @hidden\n     */\n    protected directionFlow(currentValue: number, prevValue: number): number {\n        return currentValue < prevValue ? this.step : -this.step;\n    }\n\n    /**\n     * @hidden\n     */\n    private isInLimitRange(val: number, comparator: number, step: number) {\n        return this.isExceedingUpperLimit(val, comparator, step) || this.isExceedingLowerLimit(val, comparator, step);\n    }\n\n    /**\n     * @hidden\n     *\n     *\n     * @param val\n     * @param comparator\n     * @param step\n     */\n    private isExceedingUpperLimit(val: number, comparator: number, step: number) {\n        return val > comparator && step > 0;\n    }\n\n    /**\n     * @hidden\n     *\n     * @param val\n     * @param comparator\n     * @param step\n     */\n    private isExceedingLowerLimit(val: number, comparator: number, step: number) {\n        return val < comparator && step < 0;\n    }\n\n    /**\n     * @hidden\n     * @param step\n     */\n    private updateProgress(val: number) {\n        this._value = valueInRange(val, this._max);\n        this.valueInPercent = toPercent(this._value, this._max);\n    }\n}\nlet NEXT_LINEAR_ID = 0;\nlet NEXT_CIRCULAR_ID = 0;\nlet NEXT_GRADIENT_ID = 0;\n@Component({\n    selector: 'igx-linear-bar',\n    templateUrl: 'templates/linear-bar.component.html'\n})\nexport class IgxLinearProgressBarComponent extends BaseProgressDirective implements AfterContentInit {\n\n    constructor() {\n        super();\n    }\n\n    @HostBinding('attr.aria-valuemin')\n    public valueMin = 0;\n\n    @HostBinding('class.igx-linear-bar')\n    public cssClass = 'igx-linear-bar';\n\n    /**\n     * Set `IgxLinearProgressBarComponent` to have striped style. By default it is set to false.\n     * ```html\n     * <igx-linear-bar [striped]=\"true\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     * ```\n     */\n    @HostBinding('class.igx-linear-bar--striped')\n    @Input()\n    public striped = false;\n\n    /**\n     * Set `IgxLinearProgressBarComponent` to have indeterminate. By default it is set to false.\n     * ```html\n     * <igx-linear-bar [indeterminate]=\"true\"></igx-linear-bar>\n     * ```\n     */\n    @HostBinding('class.igx-linear-bar--indeterminate')\n    @Input()\n    public indeterminate = false;\n\n    /**\n     * An @Input property that sets the value of the `role` attribute. If not provided it will be automatically set to `progressbar`.\n     * ```html\n     * <igx-linear-bar role=\"progressbar\"></igx-linear-bar>\n     * ```\n     */\n    @HostBinding('attr.role')\n    @Input()\n    public role = 'progressbar';\n\n    /**\n     * An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-linear-bar [id]=\"'igx-linear-bar-55'\" [striped]=\"true\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-linear-bar-${NEXT_LINEAR_ID++}`;\n\n    /**\n     * Set the position that defines where the text is aligned.\n     * Possible options - `IgxTextAlign.START` (default), `IgxTextAlign.CENTER`, `IgxTextAlign.END`.\n     * ```typescript\n     * public positionCenter: IgxTextAlign;\n     * public ngOnInit() {\n     *     this.positionCenter = IgxTextAlign.CENTER;\n     * }\n     *  //...\n     * ```\n     *  ```html\n     * <igx-linear-bar type=\"warning\" [text]=\"'Custom text'\" [textAlign]=\"positionCenter\" [striped]=\"true\"></igx-linear-bar>\n     * ```\n     */\n    @Input()\n    public textAlign: IgxTextAlign = IgxTextAlign.START;\n\n    /**\n     * Set the text to be visible. By default it is set to true.\n     * ```html\n     *  <igx-linear-bar type=\"default\" [textVisibility]=\"false\"></igx-linear-bar>\n     * ```\n     */\n    @Input()\n    public textVisibility = true;\n\n    /**\n     * Set the position that defines if the text should be aligned above the progress line. By default is set to false.\n     * ```html\n     *  <igx-linear-bar type=\"error\" [textTop]=\"true\"></igx-linear-bar>\n     * ```\n     */\n    @Input()\n    public textTop = false;\n\n    /**\n     * Set a custom text that is displayed according to the defined position.\n     *  ```html\n     * <igx-linear-bar type=\"warning\" [text]=\"'Custom text'\" [textAlign]=\"positionCenter\" [striped]=\"true\"></igx-linear-bar>\n     * ```\n     */\n    @Input()\n    public text: string;\n\n    /**\n     * Set type of the `IgxLinearProgressBarComponent`. Possible options - `default`, `success`, `info`, `warning`, and `error`.\n     * ```html\n     * <igx-linear-bar [striped]=\"false\" [max]=\"100\" [value]=\"0\" type=\"error\"></igx-linear-bar>\n     * ```\n     */\n    @Input()\n    public type = 'default';\n\n   /**\n    * Returns value that indicates the current `IgxLinearProgressBarComponent` position.\n    * ```typescript\n    *  @ViewChild(\"MyProgressBar\")\n    * public progressBar: IgxLinearProgressBarComponent;\n    * public getValue(event) {\n    *     let value = this.progressBar.value;\n    *     alert(value);\n    * }\n    * ```\n    */\n    @HostBinding('attr.aria-valuenow')\n    @Input()\n    get value(): number {\n        return this._value;\n    }\n\n    /**\n     * Set value that indicates the current `IgxLinearProgressBarComponent` position.\n     * ```html\n     * <igx-linear-bar [striped]=\"false\" [max]=\"200\" [value]=\"50\"></igx-linear-bar>\n     * ```\n     */\n    set value(val) {\n        const valInRange = valueInRange(val, this.max);\n        if (isNaN(valInRange) || this._value === val || this.indeterminate) {\n            return;\n        }\n\n        if (this._contentInit) {\n            this.triggerProgressTransition(this._value, valInRange);\n        } else {\n            this._initValue = valInRange;\n        }\n\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--danger')\n    public get error() {\n        return this.type === IgxProgressType.ERROR;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--info')\n    public get info() {\n        return this.type === IgxProgressType.INFO;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--warning')\n    public get warning() {\n        return this.type === IgxProgressType.WARNING;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-linear-bar--success')\n    public get success() {\n        return this.type === IgxProgressType.SUCCESS;\n    }\n\n    public ngAfterContentInit() {\n        this.triggerProgressTransition(MIN_VALUE, this._initValue);\n        this._contentInit = true;\n    }\n}\n\n@Component({\n    selector: 'igx-circular-bar',\n    templateUrl: 'templates/circular-bar.component.html'\n})\nexport class IgxCircularProgressBarComponent extends BaseProgressDirective implements AfterViewInit, AfterContentInit {\n\n    private readonly STROKE_OPACITY_DVIDER = 100;\n    private readonly STROKE_OPACITY_ADDITION = .2;\n\n    /** @hidden */\n    @HostBinding('class.igx-circular-bar')\n    public cssClass = 'igx-circular-bar';\n\n    /**\n     * An @Input property that sets the value of `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-circular-bar [id]=\"'igx-circular-bar-55'\" [value]=\"50\"></igx-circular-bar>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-circular-bar-${NEXT_CIRCULAR_ID++}`;\n\n    /**\n     * @hidden\n     */\n    public gradientId = `igx-circular-gradient-${NEXT_GRADIENT_ID++}`;\n\n    /**\n     * An @Input property that sets the value of the `indeterminate` attribute. If not provided it will be automatically set to false.\n     * ```html\n     * <igx-circular-bar [indeterminate]=\"true\"></igx-circular-bar>\n     * ```\n     */\n    @HostBinding('class.igx-circular-bar--indeterminate')\n    @Input()\n    public indeterminate = false;\n\n    /**\n     * Sets the text visibility. By default it is set to true.\n     * ```html\n     * <igx-circular-bar [textVisibility]=\"false\"></igx-circular-bar>\n     * ```\n     */\n    @Input()\n    public textVisibility = true;\n\n    /**\n     * Sets/gets the text to be displayed inside the `igxCircularBar`.\n     * ```html\n     * <igx-circular-bar text=\"Progress\"></igx-circular-bar>\n     * ```\n     * ```typescript\n     * let text = this.circularBar.text;\n     * ```\n     */\n    @Input()\n    public text: string;\n\n    @ContentChild(IgxProcessBarTextTemplateDirective, { read: IgxProcessBarTextTemplateDirective })\n    public textTemplate: IgxProcessBarTextTemplateDirective;\n\n    @ContentChild(IgxProgressBarGradientDirective, { read: IgxProgressBarGradientDirective })\n    public gradientTemplate: IgxProgressBarGradientDirective;\n\n    /**\n     * @hidden\n     */\n    public get context(): any {\n        return {\n            $implicit: { value: this.value, valueInPercent: this.valueInPercent, max: this.max }\n        };\n    }\n\n    /**\n     * Returns value that indicates the current `IgxCircularProgressBarComponent` position.\n     * ```typescript\n     *  @ViewChild(\"MyProgressBar\")\n     * public progressBar: IgxCircularProgressBarComponent;\n     * public getValue(event) {\n     *     let value = this.progressBar.value;\n     *     alert(value);\n     * }\n     * ```\n     * ```html\n     * <button igxButton=\"fab\" igxRipple=\"\" (click)=\"getValue()\">Click</button>\n     * ```\n     */\n    @Input()\n    get value(): number {\n        return this._value;\n    }\n\n    /**\n     * Set value that indicates the current `IgxCircularProgressBarComponent` position.\n     * ```html\n     * <igx-circular-bar [value]=\"50\"></igx-circular-bar>\n     * ```\n     */\n    set value(val: number) {\n        const valInRange = valueInRange(val, this.max);\n        if (isNaN(valInRange) || this._value === val || this.indeterminate) {\n            return;\n        }\n\n        if (this._contentInit) {\n            this.triggerProgressTransition(this._value, valInRange);\n        } else {\n            this._initValue = valInRange;\n        }\n\n    }\n\n    private _circleRadius = 46;\n    private _circumference = 2 * Math.PI * this._circleRadius;\n\n    @ViewChild('circle', { static: true })\n    private _svgCircle: ElementRef;\n\n    constructor(private renderer: Renderer2, private _directionality: IgxDirectionality) {\n        super();\n    }\n\n    public ngAfterContentInit() {\n        this.triggerProgressTransition(MIN_VALUE, this._initValue);\n        this._contentInit = true;\n    }\n\n    public ngAfterViewInit() {\n        this.renderer.setStyle(\n            this._svgCircle.nativeElement,\n            'stroke',\n            `url(#${this.gradientId})`\n        );\n    }\n\n    /**\n     * @hidden\n     */\n    public updateProgressSmoothly(val: number, step: number) {\n        // Set frames for the animation\n        const FRAMES = [{\n            strokeDashoffset: this.getProgress(this._value),\n            strokeOpacity: (this._value / this.STROKE_OPACITY_DVIDER) + this.STROKE_OPACITY_ADDITION\n        }, {\n            strokeDashoffset: this.getProgress(this.valueInPercent),\n            strokeOpacity: (this.valueInPercent / this.STROKE_OPACITY_DVIDER) + this.STROKE_OPACITY_ADDITION\n        }];\n        this._svgCircle.nativeElement.animate(FRAMES, {\n            easing: 'ease-out',\n            fill: 'forwards'\n        });\n\n        super.updateProgressSmoothly(val, step);\n    }\n\n    /**\n     * @hidden\n     */\n    public get textContent(): string {\n        return this.text;\n    }\n\n    /**\n     * @hidden\n     */\n    public updateProgressDirectly(val: number) {\n        super.updateProgressDirectly(val);\n\n        this.renderer.setStyle(\n            this._svgCircle.nativeElement,\n            'stroke-dashoffset',\n            this.getProgress(this.valueInPercent));\n\n        this.renderer.setStyle(\n            this._svgCircle.nativeElement,\n            'stroke-opacity',\n            (this.valueInPercent / this.STROKE_OPACITY_DVIDER) + this.STROKE_OPACITY_ADDITION);\n    }\n\n    private getProgress(percentage: number) {\n        return this._directionality.rtl ?\n            this._circumference + (percentage * this._circumference / 100) :\n            this._circumference - (percentage * this._circumference / 100);\n    }\n}\n\nexport function valueInRange(value: number, max: number, min = 0): number {\n    return Math.max(Math.min(value, max), min);\n}\n\nexport function toPercent(value: number, max: number) {\n    return Math.floor(100 * value / max);\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxLinearProgressBarComponent,\n        IgxCircularProgressBarComponent,\n        IgxProcessBarTextTemplateDirective,\n        IgxProgressBarGradientDirective,\n    ],\n    exports: [\n        IgxLinearProgressBarComponent,\n        IgxCircularProgressBarComponent,\n        IgxProcessBarTextTemplateDirective,\n        IgxProgressBarGradientDirective,\n    ],\n    imports: [CommonModule]\n})\nexport class IgxProgressBarModule { }\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IgxExcelStyleLoadingValuesTemplateDirective } from './excel-style-search.component';\nimport {\n    IgxGridExcelStyleFilteringComponent,\n    IgxExcelStyleColumnOperationsTemplateDirective,\n    IgxExcelStyleFilterOperationsTemplateDirective\n} from './grid.excel-style-filtering.component';\nimport { IgxExcelStyleSortingComponent } from './excel-style-sorting.component';\nimport { IgxExcelStyleMovingComponent } from './excel-style-moving.component';\nimport { IgxExcelStyleSearchComponent } from './excel-style-search.component';\nimport { IgxExcelStyleCustomDialogComponent } from './excel-style-custom-dialog.component';\nimport { IgxExcelStyleDefaultExpressionComponent } from './excel-style-default-expression.component';\nimport { IgxExcelStyleDateExpressionComponent } from './excel-style-date-expression.component';\nimport { IgxSelectionAPIService } from '../../../core/selection';\nimport { FormsModule } from '@angular/forms';\nimport { IgxGridPipesModule } from '../../common/grid-pipes.module';\nimport { IgxButtonModule } from '../../../directives/button/button.directive';\nimport { IgxButtonGroupModule } from '../../../buttonGroup/buttonGroup.component';\nimport { IgxDatePickerModule } from '../../../date-picker/date-picker.component';\nimport { IgxIconModule } from '../../../icon/public_api';\nimport { IgxRippleModule } from '../../../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../../../input-group/input-group.component';\nimport { IgxDropDownModule } from '../../../drop-down/public_api';\nimport { IgxForOfModule } from '../../../directives/for-of/for_of.directive';\nimport { IgxCheckboxModule } from '../../../checkbox/checkbox.component';\nimport { IgxFilterModule } from '../../../directives/filter/filter.directive';\nimport { IgxToggleModule } from '../../../directives/toggle/toggle.directive';\nimport { IgxListModule } from '../../../list/list.component';\nimport { IgxProgressBarModule } from '../../../progressbar/progressbar.component';\nimport { IgxSelectModule } from './../../../select/select.module';\nimport { IgxExcelStylePinningComponent } from './excel-style-pinning.component';\nimport { IgxExcelStyleHeaderComponent } from './excel-style-header.component';\nimport { IgxExcelStyleHidingComponent } from './excel-style-hiding.component';\nimport { IgxExcelStyleSelectingComponent } from './excel-style-selecting.component';\nimport { IgxExcelStyleClearFiltersComponent } from './excel-style-clear-filters.component';\nimport { IgxExcelStyleConditionalFilterComponent } from './excel-style-conditional-filter.component';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxGridExcelStyleFilteringComponent,\n        IgxExcelStyleHeaderComponent,\n        IgxExcelStyleSortingComponent,\n        IgxExcelStylePinningComponent,\n        IgxExcelStyleHidingComponent,\n        IgxExcelStyleSelectingComponent,\n        IgxExcelStyleClearFiltersComponent,\n        IgxExcelStyleConditionalFilterComponent,\n        IgxExcelStyleMovingComponent,\n        IgxExcelStyleSearchComponent,\n        IgxExcelStyleCustomDialogComponent,\n        IgxExcelStyleDefaultExpressionComponent,\n        IgxExcelStyleDateExpressionComponent,\n        IgxExcelStyleColumnOperationsTemplateDirective,\n        IgxExcelStyleFilterOperationsTemplateDirective,\n        IgxExcelStyleLoadingValuesTemplateDirective\n    ],\n    exports: [\n        IgxGridExcelStyleFilteringComponent,\n        IgxExcelStyleColumnOperationsTemplateDirective,\n        IgxExcelStyleFilterOperationsTemplateDirective,\n        IgxExcelStyleLoadingValuesTemplateDirective,\n        IgxExcelStyleDateExpressionComponent,\n        IgxExcelStyleHeaderComponent,\n        IgxExcelStyleSortingComponent,\n        IgxExcelStylePinningComponent,\n        IgxExcelStyleHidingComponent,\n        IgxExcelStyleSelectingComponent,\n        IgxExcelStyleClearFiltersComponent,\n        IgxExcelStyleConditionalFilterComponent,\n        IgxExcelStyleMovingComponent,\n        IgxExcelStyleSearchComponent,\n        IgxExcelStyleHeaderComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        IgxGridPipesModule,\n        IgxButtonModule,\n        IgxButtonGroupModule,\n        IgxDatePickerModule,\n        IgxIconModule,\n        IgxRippleModule,\n        IgxInputGroupModule,\n        IgxDropDownModule,\n        IgxForOfModule,\n        IgxCheckboxModule,\n        IgxFilterModule,\n        IgxToggleModule,\n        IgxListModule,\n        IgxProgressBarModule,\n        IgxSelectModule,\n    ],\n    entryComponents: [\n        IgxGridExcelStyleFilteringComponent\n    ],\n    providers: [\n        IgxSelectionAPIService\n    ]\n})\nexport class IgxGridExcelStyleFilteringModule {\n\n}\n","import { NgModule } from '@angular/core';\nimport { IgxRowSelectorDirective, IgxHeadSelectorDirective, IgxGroupByRowSelectorDirective } from './row-selectors';\nimport { IgxGridDragSelectDirective } from './drag-select.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxRowSelectorDirective,\n        IgxGroupByRowSelectorDirective,\n        IgxHeadSelectorDirective,\n        IgxGridDragSelectDirective\n    ],\n    exports: [\n        IgxRowSelectorDirective,\n        IgxGroupByRowSelectorDirective,\n        IgxHeadSelectorDirective,\n        IgxGridDragSelectDirective\n    ]\n})\nexport class IgxGridSelectionModule { }\n","import {\n    AfterViewInit,\n    Directive,\n    ElementRef,\n    Input,\n    NgZone,\n    HostListener,\n    OnDestroy\n} from '@angular/core';\nimport { Subject, fromEvent } from 'rxjs';\nimport { debounceTime, takeUntil} from 'rxjs/operators';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxColumnResizingService } from './resizing.service';\n\n\n/**\n * @hidden\n * @internal\n */\n@Directive({\n    selector: '[igxResizeHandle]'\n})\nexport class IgxResizeHandleDirective implements AfterViewInit, OnDestroy {\n\n    /**\n     * @hidden\n     */\n    @Input('igxResizeHandle')\n    public column: IgxColumnComponent;\n\n    /**\n     * @hidden\n     */\n    private _dblClick = false;\n\n    /**\n     * @hidden\n     */\n    private destroy$ = new Subject<boolean>();\n\n    private readonly DEBOUNCE_TIME = 200;\n\n    constructor(private zone: NgZone,\n               private element: ElementRef,\n               public colResizingService: IgxColumnResizingService) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this.destroy$.next(true);\n        this.destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        if (!this.column.columnGroup && this.column.resizable) {\n            this.zone.runOutsideAngular(() => {\n                fromEvent(this.element.nativeElement, 'mousedown').pipe(\n                    debounceTime(this.DEBOUNCE_TIME),\n                    takeUntil(this.destroy$)\n                ).subscribe((event: MouseEvent) => {\n\n                    if (this._dblClick) {\n                        this._dblClick = false;\n                        return;\n                    }\n\n                    if (event.button === 0) {\n                        this._onResizeAreaMouseDown(event);\n                        this.column.grid.resizeLine.resizer.onMousedown(event);\n                    }\n                });\n            });\n\n            fromEvent(this.element.nativeElement, 'mouseup').pipe(\n                debounceTime(this.DEBOUNCE_TIME),\n                takeUntil(this.destroy$)\n            ).subscribe(() => {\n                this.colResizingService.isColumnResizing = false;\n                this.colResizingService.showResizer = false;\n                this.column.grid.cdr.detectChanges();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseover')\n    public onMouseOver() {\n        this.colResizingService.resizeCursor = 'col-resize';\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('dblclick')\n    public onDoubleClick() {\n        this._dblClick = true;\n        this.colResizingService.column = this.column;\n        this.colResizingService.autosizeColumnOnDblClick();\n    }\n\n    /**\n     * @hidden\n     */\n    private _onResizeAreaMouseDown(event) {\n        this.colResizingService.column = this.column;\n        this.colResizingService.isColumnResizing = true;\n        this.colResizingService.startResizePos = event.clientX;\n\n        this.colResizingService.showResizer = true;\n        this.column.grid.cdr.detectChanges();\n    }\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IgxColumnResizingService } from './resizing.service';\nimport { IgxGridColumnResizerComponent } from './resizer.component';\nimport { IgxResizeHandleDirective } from './resize-handle.directive';\nimport { IgxColumnResizerDirective } from './resizer.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxGridColumnResizerComponent,\n        IgxResizeHandleDirective,\n        IgxColumnResizerDirective\n    ],\n    imports: [\n        CommonModule\n    ],\n    exports: [\n        IgxGridColumnResizerComponent,\n        IgxResizeHandleDirective,\n        IgxColumnResizerDirective\n    ],\n    providers: [\n        IgxColumnResizingService\n    ]\n})\nexport class IgxGridResizingModule {}\n","import { Directive, Input, OnDestroy, ElementRef, Renderer2, NgZone } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { DropPosition, IgxColumnMovingService } from './moving.service';\nimport { Subject, interval } from 'rxjs';\nimport { IgxColumnMovingDragDirective } from './moving.drag.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxDropDirective } from '../../directives/drag-drop/drag-drop.directive';\nimport { IgxGridForOfDirective } from '../../directives/for-of/for_of.directive';\n\n\n@Directive({\n    selector: '[igxColumnMovingDrop]'\n})\nexport class IgxColumnMovingDropDirective extends IgxDropDirective implements OnDestroy {\n\n    @Input('igxColumnMovingDrop')\n    set data(val: any) {\n        if (val instanceof IgxColumnComponent) {\n            this._column = val;\n        }\n\n        if (val instanceof IgxGridForOfDirective) {\n            this._hVirtDir = val;\n        }\n    }\n\n    get column(): IgxColumnComponent {\n        return this._column;\n    }\n\n    get isDropTarget(): boolean {\n        return this._column && this._column.grid.hasMovableColumns && this.cms.column.movable &&\n            ((!this._column.pinned && this.cms.column.disablePinning) || !this.cms.column.disablePinning);\n    }\n\n    get horizontalScroll(): any {\n        if (this._hVirtDir) {\n            return this._hVirtDir;\n        }\n    }\n\n    private _dropPos: DropPosition;\n    private _dropIndicator: any = null;\n    private _lastDropIndicator: any = null;\n    private _column: IgxColumnComponent;\n    private _hVirtDir: IgxGridForOfDirective<any>;\n    private _dragLeave = new Subject<boolean>();\n    private _dropIndicatorClass = 'igx-grid__th-drop-indicator--active';\n\n    constructor(private elementRef: ElementRef, private renderer: Renderer2, private zone: NgZone, private cms: IgxColumnMovingService) {\n        super(elementRef, renderer, zone);\n    }\n\n    public ngOnDestroy() {\n        this._dragLeave.next(true);\n        this._dragLeave.complete();\n    }\n\n    public onDragOver(event) {\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        if (this.isDropTarget &&\n            this.cms.column !== this.column &&\n            this.cms.column.level === this.column.level &&\n            this.cms.column.parent === this.column.parent) {\n\n            if (this._lastDropIndicator) {\n                this.renderer.removeClass(this._dropIndicator, this._dropIndicatorClass);\n            }\n\n            const clientRect = this.elementRef.nativeElement.getBoundingClientRect();\n            const pos = clientRect.left + clientRect.width / 2;\n\n            const parent = this.elementRef.nativeElement.parentElement;\n            if (event.detail.pageX < pos) {\n                this._dropPos = DropPosition.BeforeDropTarget;\n                this._lastDropIndicator = this._dropIndicator = parent.firstElementChild;\n            } else {\n                this._dropPos = DropPosition.AfterDropTarget;\n                this._lastDropIndicator = this._dropIndicator = parent.lastElementChild;\n            }\n\n            if (this.cms.icon.innerText !== 'block') {\n                this.renderer.addClass(this._dropIndicator, this._dropIndicatorClass);\n            }\n        }\n    }\n\n    public onDragEnter(event) {\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        if (this.column && this.cms.column.grid.id !== this.column.grid.id) {\n            this.cms.icon.innerText = 'block';\n            return;\n        }\n\n        if (this.isDropTarget &&\n            this.cms.column !== this.column &&\n            this.cms.column.level === this.column.level &&\n            this.cms.column.parent === this.column.parent) {\n\n                if (!this.column.pinned || (this.column.pinned && this.cms.column.pinned)) {\n                    this.cms.icon.innerText = 'swap_horiz';\n                }\n\n                this.cms.icon.innerText = 'lock';\n            } else {\n                this.cms.icon.innerText = 'block';\n            }\n\n            if (this.horizontalScroll) {\n                this.cms.icon.innerText = event.target.id === 'right' ? 'arrow_forward' : 'arrow_back';\n\n                interval(100).pipe(takeUntil(this._dragLeave)).subscribe(() => {\n                    event.target.id === 'right' ? this.horizontalScroll.scrollPosition += 15 :\n                        this.horizontalScroll.scrollPosition -= 15;\n                });\n            }\n    }\n\n    public onDragLeave(event) {\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        this.cms.icon.innerText = 'block';\n\n        if (this._dropIndicator) {\n            this.renderer.removeClass(this._dropIndicator, this._dropIndicatorClass);\n        }\n\n        if (this.horizontalScroll) {\n            this._dragLeave.next(true);\n        }\n    }\n\n    public onDragDrop(event) {\n        event.preventDefault();\n        const drag = event.detail.owner;\n        if (!(drag instanceof IgxColumnMovingDragDirective)) {\n            return;\n        }\n\n        if (this.column && (this.cms.column.grid.id !== this.column.grid.id)) {\n            return;\n        }\n\n        if (this.horizontalScroll) {\n            this._dragLeave.next(true);\n        }\n\n        if (this.isDropTarget) {\n            const args = {\n                source: this.cms.column,\n                target: this.column\n            };\n\n            this.column.grid.moveColumn(this.cms.column, this.column, this._dropPos);\n\n            this.column.grid.draggedColumn = null;\n            this.column.grid.cdr.detectChanges();\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxColumnMovingDragDirective } from './moving.drag.directive';\nimport { IgxColumnMovingDropDirective } from './moving.drop.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxColumnMovingDropDirective,\n        IgxColumnMovingDragDirective\n    ],\n    exports: [\n        IgxColumnMovingDropDirective,\n        IgxColumnMovingDragDirective\n    ]\n})\nexport class IgxColumnMovingModule {}\n","import { GridBaseAPIService } from '../api.service';\nimport { IgxGridComponent } from './grid.component';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { IGroupByExpandState } from '../../data-operations/groupby-expand-state.interface';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { cloneArray } from '../../core/utils';\nimport { IGroupingExpression } from '../../data-operations/grouping-expression.interface';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxGridAPIService extends GridBaseAPIService<IgxGridComponent> {\n\n    public groupBy(expression: IGroupingExpression): void {\n        const groupingState = cloneArray(this.grid.groupingExpressions);\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n        this.prepare_sorting_expression([sortingState, groupingState], expression);\n        this.grid.groupingExpressions = groupingState;\n        this.arrange_sorting_expressions();\n    }\n\n    public groupBy_multiple(expressions: IGroupingExpression[]): void {\n        const groupingState = cloneArray(this.grid.groupingExpressions);\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n\n        for (const each of expressions) {\n            this.prepare_sorting_expression([sortingState, groupingState], each);\n        }\n\n        this.grid.groupingExpressions = groupingState;\n        this.arrange_sorting_expressions();\n    }\n\n    public clear_groupby(name?: string | Array<string>) {\n        const groupingState = cloneArray(this.grid.groupingExpressions);\n        const sortingState = cloneArray(this.grid.sortingExpressions);\n\n        if (name) {\n            const names = typeof name === 'string' ? [name] : name;\n            const groupedCols = groupingState.filter((state) => names.indexOf(state.fieldName) < 0);\n            const newSortingExpr = sortingState.filter((state) => names.indexOf(state.fieldName) < 0);\n            this.grid.groupingExpressions = groupedCols;\n            this.grid.sortingExpressions = newSortingExpr;\n            names.forEach((colName) => {\n                const grExprIndex = groupingState.findIndex((exp) => exp.fieldName === colName);\n                const grpExpandState = this.grid.groupingExpansionState;\n                /* remove expansion states related to the cleared group\n                   and all with deeper hierarchy than the cleared group */\n                const newExpandState = grpExpandState.filter((val) => {\n                    return val.hierarchy && val.hierarchy.length <= grExprIndex;\n                });\n                /* Do not set the new instance produced by filter\n                    when there are no differences between expansion states */\n                if (newExpandState.length !== grpExpandState.length) {\n                    this.grid.groupingExpansionState = newExpandState;\n                }\n            });\n        } else {\n            // clear all\n            this.grid.groupingExpressions = [];\n            this.grid.groupingExpansionState = [];\n            for (const grExpr of groupingState) {\n                const sortExprIndex = sortingState.findIndex((exp) => exp.fieldName === grExpr.fieldName);\n                if (sortExprIndex > -1) {\n                    sortingState.splice(sortExprIndex, 1);\n                }\n            }\n            this.grid.sortingExpressions = sortingState;\n        }\n    }\n\n    public groupBy_get_expanded_for_group(groupRow: IGroupByRecord): IGroupByExpandState {\n        const grState = this.grid.groupingExpansionState;\n        const hierarchy = DataUtil.getHierarchy(groupRow);\n        return grState.find((state) =>\n            DataUtil.isHierarchyMatch(state.hierarchy || [{ fieldName: groupRow.expression.fieldName, value: groupRow.value }], hierarchy));\n    }\n\n    public groupBy_is_row_in_group(groupRow: IGroupByRecord, rowID): boolean {\n        const grid = this.grid;\n        let rowInGroup = false;\n        groupRow.records.forEach(row => {\n            if (grid.primaryKey ? row[grid.primaryKey] === rowID : row === rowID) {\n                rowInGroup = true;\n            }\n        });\n        return rowInGroup;\n    }\n\n    public groupBy_toggle_group(groupRow: IGroupByRecord) {\n        const grid = this.grid;\n        if (grid.crudService.cellInEditMode) {\n            grid.endEdit(true);\n        }\n\n        const expansionState = grid.groupingExpansionState;\n        const state: IGroupByExpandState = this.groupBy_get_expanded_for_group(groupRow);\n        if (state) {\n            state.expanded = !state.expanded;\n        } else {\n            expansionState.push({\n                expanded: !grid.groupsExpanded,\n                hierarchy: DataUtil.getHierarchy(groupRow)\n            });\n        }\n        this.grid.groupingExpansionState = [...expansionState];\n        if (grid.rowEditable) {\n            grid.repositionRowEditingOverlay(grid.rowInEditMode);\n        }\n    }\n\n    public groupBy_fully_expand_group(groupRow: IGroupByRecord) {\n        const state: IGroupByExpandState = this.groupBy_get_expanded_for_group(groupRow);\n        const expanded = state ? state.expanded : this.grid.groupsExpanded;\n        if (!expanded) {\n            this.groupBy_toggle_group(groupRow);\n        }\n        if (groupRow.groupParent) {\n            this.groupBy_fully_expand_group(groupRow.groupParent);\n        }\n    }\n\n    public groupBy_select_all_rows_in_group(groupRow: IGroupByRecord, clearPrevSelection: boolean) {\n        this.grid.selectionService.selectRowsWithNoEvent(this.grid.primaryKey ?\n            groupRow.records.map(x => x[this.grid.primaryKey]) : groupRow.records, clearPrevSelection);\n    }\n\n    public groupBy_deselect_all_rows_in_group(groupRow: IGroupByRecord) {\n        this.grid.selectionService.deselectRowsWithNoEvent(this.grid.primaryKey ?\n            groupRow.records.map(x => x[this.grid.primaryKey]) : groupRow.records);\n    }\n\n    protected remove_grouping_expression(fieldName) {\n        const groupingExpressions = this.grid.groupingExpressions;\n        const index = groupingExpressions.findIndex((expr) => expr.fieldName === fieldName);\n        if (index !== -1) {\n            groupingExpressions.splice(index, 1);\n        }\n    }\n\n    public arrange_sorting_expressions() {\n        const groupingState = this.grid.groupingExpressions;\n        this.grid.sortingExpressions.sort((a, b) => {\n            const groupExprA = groupingState.find((expr) => expr.fieldName === a.fieldName);\n            const groupExprB = groupingState.find((expr) => expr.fieldName === b.fieldName);\n            if (groupExprA && groupExprB) {\n                return groupingState.indexOf(groupExprA) > groupingState.indexOf(groupExprB) ? 1 : -1;\n            } else if (groupExprA) {\n                return -1;\n            } else if (groupExprB) {\n                return 1;\n            } else {\n                return 0;\n            }\n        });\n    }\n\n    public get_groupBy_record_id(gRow: IGroupByRecord): string {\n        let recordId = '{ ';\n        const hierrarchy = DataUtil.getHierarchy(gRow);\n\n        for (let i = 0; i < hierrarchy.length; i++) {\n            const groupByKey = hierrarchy[i];\n            recordId += `'${groupByKey.fieldName}': '${groupByKey.value}'`;\n\n            if (i < hierrarchy.length - 1) {\n                recordId += ', ';\n            }\n        }\n        recordId += ' }';\n\n        return recordId;\n    }\n\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    ViewChild,\n    TemplateRef,\n    OnDestroy\n} from '@angular/core';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { DataType } from '../../data-operations/data-util';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridSelectionService, ISelectionNode } from '../selection/selection.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\nimport { IgxGridRowComponent } from './grid-row.component';\nimport { IgxGridComponent } from './grid.component';\nimport { GridSelectionMode } from '../common/enums';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-groupby-row',\n    templateUrl: './groupby-row.component.html'\n})\nexport class IgxGridGroupByRowComponent implements OnDestroy {\n\n    constructor(public gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        public gridSelection: IgxGridSelectionService,\n        public element: ElementRef,\n        public cdr: ChangeDetectorRef,\n        public filteringService: IgxFilteringService) {\n        this.gridSelection.selectedRowsChange.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            this.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    protected destroy$ = new Subject<any>();\n\n    /**\n     * @hidden\n     */\n    protected defaultCssClass = 'igx-grid__group-row';\n\n    /**\n     * @hidden\n     */\n    protected paddingIndentationCssClass = 'igx-grid__group-row--padding-level';\n\n    /**\n     * @hidden\n     */\n    @ViewChild('defaultGroupByExpandedTemplate', { read: TemplateRef, static: true })\n    protected defaultGroupByExpandedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('defaultGroupByCollapsedTemplate', { read: TemplateRef, static: true })\n    protected defaultGroupByCollapsedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    protected isFocused = false;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public hideGroupRowSelectors: boolean;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public rowDraggable: boolean;\n\n    /**\n     * Returns whether the row is focused.\n     * ```\n     * let gridRowFocused = this.grid1.rowList.first.focused;\n     * ```\n     */\n    get focused(): boolean {\n        return this.isActive();\n    }\n\n    /**\n     * An @Input property that sets the index of the row.\n     * ```html\n     * <igx-grid-groupby-row [gridID]=\"id\" [index]=\"rowIndex\" [groupRow]=\"rowData\" #row></igx-grid-groupby-row>\n     * ```\n     */\n    @Input()\n    public index: number;\n\n    /**\n     * An @Input property that sets the id of the grid the row belongs to.\n     * ```html\n     * <igx-grid-groupby-row [gridID]=\"id\" [index]=\"rowIndex\" [groupRow]=\"rowData\" #row></igx-grid-groupby-row>\n     * ```\n     */\n    @Input()\n    public gridID: string;\n\n    /**\n     * An @Input property that specifies the group record the component renders for.\n     * ```typescript\n     * <igx-grid-groupby-row [gridID]=\"id\" [index]=\"rowIndex\" [groupRow]=\"rowData\" #row></igx-grid-groupby-row>\n     * ```\n     */\n    @Input()\n    public groupRow: IGroupByRecord;\n\n    /**\n     * Returns a reference of the content of the group.\n     * ```typescript\n     * const groupRowContent = this.grid1.rowList.first.groupContent;\n     * ```\n     */\n    @ViewChild('groupContent', { static: true })\n    public groupContent: ElementRef;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public ngOnDestroy(): void {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n\n    /**\n     * Returns whether the group row is expanded.\n     * ```typescript\n     * const groupRowExpanded = this.grid1.rowList.first.expanded;\n     * ```\n     */\n    @HostBinding('attr.aria-expanded')\n    get expanded(): boolean {\n        return this.grid.isExpandedGroup(this.groupRow);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.aria-describedby')\n    get describedBy(): string {\n        const grRowExpr = this.groupRow.expression !== undefined ? this.groupRow.expression.fieldName : '';\n        return this.gridID + '_' + grRowExpr;\n    }\n\n    @HostBinding('attr.data-rowIndex')\n    get dataRowIndex() {\n        return this.index;\n    }\n\n    /**\n     * Returns a reference to the underlying HTML element.\n     * ```typescript\n     * const groupRowElement = this.nativeElement;\n     * ```\n     */\n    get nativeElement(): any {\n        return this.element.nativeElement;\n    }\n\n    @HostBinding('attr.id')\n    public get attrCellID() {\n        return `${this.gridID}_${this.index}`;\n    }\n\n    /**\n     * Returns the style classes applied to the group rows.\n     * ```typescript\n     * const groupCssStyles = this.grid1.rowList.first.styleClasses;\n     * ```\n     */\n    @HostBinding('class')\n    get styleClasses(): string {\n        return `${this.defaultCssClass} ` + `${this.paddingIndentationCssClass}-` + this.groupRow.level +\n            (this.isActive() ? ` ${this.defaultCssClass}--active` : '');\n    }\n\n    public isActive() {\n        return this.grid.navigation.activeNode ? this.grid.navigation.activeNode.row === this.index : false;\n    }\n\n\n    @HostListener('pointerdown')\n    public activate() {\n        this.grid.navigation.setActiveNode({ row: this.index });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    getRowID(rowData): IgxGridRowComponent {\n        return this.grid.primaryKey ? rowData[this.grid.primaryKey] : rowData;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onGroupSelectorClick(event) {\n        if (!this.grid.isMultiRowSelectionEnabled) { return; }\n        event.stopPropagation();\n        if (this.areAllRowsInTheGroupSelected) {\n            this.groupRow.records.forEach(row => {\n                this.gridSelection.deselectRow(this.getRowID(row), event);\n            });\n        } else {\n            this.groupRow.records.forEach(row => {\n                this.gridSelection.selectRowById(this.getRowID(row), false, event);\n            });\n        }\n    }\n\n    /**\n     * Toggles the group row.\n     * ```typescript\n     * this.grid1.rowList.first.toggle()\n     * ```\n     */\n    public toggle() {\n        this.grid.toggleGroup(this.groupRow);\n    }\n\n    public get iconTemplate() {\n        if (this.expanded) {\n            return this.grid.rowExpandedIndicatorTemplate || this.defaultGroupByExpandedTemplate;\n        } else {\n            return this.grid.rowCollapsedIndicatorTemplate || this.defaultGroupByCollapsedTemplate;\n        }\n    }\n\n    protected get selectionNode(): ISelectionNode {\n        return {\n            row: this.index,\n            column: this.gridSelection.activeElement ? this.gridSelection.activeElement.column : 0\n        };\n    }\n\n    /**\n     * Returns a reference to the `IgxGridComponent` the `IgxGridGroupByRowComponent` belongs to.\n     * ```typescript\n     * this.grid1.rowList.first.grid;\n     * ```\n     */\n    get grid(): IgxGridComponent {\n        return this.gridAPI.grid as IgxGridComponent;\n    }\n\n    /**\n     * @hidden\n     */\n    get dataType(): any {\n        const column = this.groupRow.column;\n        return (column && column.dataType) || DataType.String;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get areAllRowsInTheGroupSelected(): boolean {\n        return this.groupRow.records.every(x => this.gridSelection.isRowSelected(this.getRowID(x)));\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get selectedRowsInTheGroup(): any[] {\n        return this.groupRow.records.filter(rowID => this.gridSelection.filteredSelectedRowIds.indexOf(this.getRowID(rowID)) > -1);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get groupByRowCheckboxIndeterminateState(): boolean {\n        if (this.selectedRowsInTheGroup.length > 0) {\n            return !this.areAllRowsInTheGroupSelected;\n        }\n        return false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get groupByRowSelectorBaseAriaLabel(): string {\n        const ariaLabel: string = this.areAllRowsInTheGroupSelected ?\n            this.grid.resourceStrings.igx_grid_groupByArea_deselect_message : this.grid.resourceStrings.igx_grid_groupByArea_select_message;\n        return ariaLabel.replace('{0}', this.groupRow.expression.fieldName).replace('{1}', this.groupRow.value);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    get showRowSelectors(): boolean {\n        return this.grid.rowSelection !== GridSelectionMode.none && !this.hideGroupRowSelectors;\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { first } from 'rxjs/operators';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IgxGridNavigationService } from './grid-navigation.service';\nimport { HORIZONTAL_NAV_KEYS, HEADER_KEYS } from '../core/utils';\nimport { GridKeydownTargetType } from './common/enums';\n\n/** @hidden */\n@Injectable()\nexport class IgxGridMRLNavigationService extends IgxGridNavigationService {\n    public grid: IgxGridBaseDirective;\n\n    protected getNextPosition(rowIndex: number, colIndex: number, key: string, shift: boolean, ctrl: boolean, event: KeyboardEvent) {\n        if (!this.activeNode.layout) {\n            this.activeNode.layout = this.layout(this.activeNode.column || 0);\n        }\n        switch (key) {\n            case 'tab':\n            case ' ':\n            case 'spacebar':\n            case 'space':\n            case 'escape':\n            case 'esc':\n            case 'enter':\n            case 'f2':\n                super.getNextPosition(rowIndex, colIndex, key, shift, ctrl, event);\n                break;\n            case 'end':\n                rowIndex = ctrl ? this.findLastDataRowIndex() : this.activeNode.row;\n                colIndex = ctrl ? this.lastColIndexPerMRLBlock(this.lastIndexPerRow) : this.lastIndexPerRow;\n                break;\n            case 'home':\n                rowIndex = ctrl ? this.findFirstDataRowIndex() : this.activeNode.row;\n                colIndex = ctrl ? 0 : this.firstIndexPerRow;\n                break;\n            case 'arrowleft':\n            case 'left':\n                colIndex = ctrl ? this.firstIndexPerRow : this.getNextHorizontalCellPosition(true).column;\n                break;\n            case 'arrowright':\n            case 'right':\n                colIndex = ctrl ? this.lastIndexPerRow : this.getNextHorizontalCellPosition().column;\n                break;\n            case 'arrowup':\n            case 'up':\n                const prevPos = this.getNextVerticalPosition(true);\n                colIndex = ctrl ? this.activeNode.column : prevPos.column;\n                rowIndex = ctrl ? this.findFirstDataRowIndex() : prevPos.row;\n                break;\n            case 'arrowdown':\n            case 'down':\n                const nextPos = this.getNextVerticalPosition();\n                colIndex = ctrl ? this.activeNode.column : nextPos.column;\n                rowIndex = ctrl ? this.findLastDataRowIndex() : nextPos.row;\n                break;\n            default:\n                return;\n        }\n        const nextLayout = this.layout(colIndex);\n        const newLayout = key.includes('up') || key.includes('down') ? {rowStart: nextLayout.rowStart} : {colStart: nextLayout.colStart};\n        Object.assign(this.activeNode.layout, newLayout, {rowEnd: nextLayout.rowEnd});\n\n        if (ctrl && (key === 'home' || key === 'end')) { this.activeNode.layout = nextLayout; }\n        return { rowIndex, colIndex };\n    }\n\n    public isValidPosition(rowIndex: number, colIndex: number): boolean {\n        if (rowIndex < 0 || colIndex < 0 || this.grid.dataView.length - 1 < rowIndex ||\n            Math.max(...this.grid.visibleColumns.map(col => col.visibleIndex)) < colIndex ||\n            (this.activeNode.column !== colIndex && !this.isDataRow(rowIndex, true))) {\n            return false;\n        }\n        return true;\n    }\n\n    public shouldPerformVerticalScroll(targetRowIndex: number, visibleColIndex: number): boolean {\n        if (!super.shouldPerformVerticalScroll(targetRowIndex, visibleColIndex)) { return false; }\n        if (!this.isDataRow(targetRowIndex) || visibleColIndex < 0) {\n            return super.shouldPerformVerticalScroll(targetRowIndex, visibleColIndex);\n        }\n\n        const targetRow = super.getRowElementByIndex(targetRowIndex);\n        const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n        const scrollPos = this.getVerticalScrollPositions(targetRowIndex, visibleColIndex);\n        return (!targetRow || targetRow.offsetTop + scrollPos.topOffset < Math.abs(this.containerTopOffset)\n            || containerHeight && containerHeight < scrollPos.rowBottom -  Math.ceil(this.scrollTop));\n    }\n\n    public isColumnFullyVisible(visibleColIndex: number): boolean {\n        const targetCol = this.grid.getColumnByVisibleIndex(visibleColIndex);\n        if (this.isParentColumnFullyVisible(targetCol?.parent) || super.isColumnPinned(visibleColIndex, this.forOfDir())) { return true; }\n\n        const scrollPos = this.getChildColumnScrollPositions(visibleColIndex);\n        const colWidth = scrollPos.rightScroll - scrollPos.leftScroll;\n        if (this.displayContainerWidth < colWidth && this.displayContainerScrollLeft === scrollPos.leftScroll) { return true; }\n        return this.displayContainerWidth >= scrollPos.rightScroll - this.displayContainerScrollLeft &&\n            this.displayContainerScrollLeft <= scrollPos.leftScroll;\n    }\n\n    private isParentColumnFullyVisible(parent: IgxColumnComponent): boolean {\n        if (!this.forOfDir().getScroll().clientWidth || parent?.pinned) { return true; }\n\n        const index = this.forOfDir().igxForOf.indexOf(parent);\n        return this.displayContainerWidth >= this.forOfDir().getColumnScrollLeft(index + 1) - this.displayContainerScrollLeft &&\n            this.displayContainerScrollLeft <= this.forOfDir().getColumnScrollLeft(index);\n    }\n\n    private getChildColumnScrollPositions(visibleColIndex: number) {\n        const targetCol: IgxColumnComponent = this.grid.getColumnByVisibleIndex(visibleColIndex);\n        const parentVIndex = this.forOfDir().igxForOf.indexOf(targetCol.parent);\n        let leftScroll = this.forOfDir().getColumnScrollLeft(parentVIndex);\n        let rightScroll = this.forOfDir().getColumnScrollLeft(parentVIndex + 1);\n        targetCol.parent.children.forEach((c) => {\n            if (c.rowStart >= targetCol.rowStart && c.visibleIndex < targetCol.visibleIndex) {\n                leftScroll += parseInt(c.width, 10);\n            }\n            if (c.rowStart <= targetCol.rowStart && c.visibleIndex > targetCol.visibleIndex) {\n                rightScroll -= parseInt(c.width, 10);\n            }\n        });\n        return { leftScroll, rightScroll: rightScroll };\n    }\n\n    public getVerticalScrollPositions(rowIndex: number, visibleIndex: number) {\n        const targetCol = this.grid.getColumnByVisibleIndex(visibleIndex);\n        const rowSpan = targetCol.rowEnd && targetCol.rowEnd - targetCol.rowStart ? targetCol.rowEnd - targetCol.rowStart : 1;\n        const topOffset = this.grid.defaultRowHeight * (targetCol.rowStart - 1);\n        const rowTop = this.grid.verticalScrollContainer.sizesCache[rowIndex] + topOffset;\n        return { topOffset, rowTop, rowBottom: rowTop + (this.grid.defaultRowHeight * rowSpan) };\n    }\n\n    public performHorizontalScrollToCell(visibleColumnIndex: number, cb?: () => void) {\n        if (!this.shouldPerformHorizontalScroll(visibleColumnIndex)) { return; }\n        const scrollPos = this.getChildColumnScrollPositions(visibleColumnIndex);\n        const startScroll = scrollPos.rightScroll - this.displayContainerScrollLeft;\n        const nextScroll = !(this.displayContainerScrollLeft <= scrollPos.leftScroll) && this.displayContainerWidth >= startScroll ?\n            scrollPos.leftScroll : scrollPos.rightScroll - this.displayContainerWidth;\n        this.forOfDir().getScroll().scrollLeft = nextScroll;\n        this.grid.parentVirtDir.onChunkLoad\n            .pipe(first())\n            .subscribe(() => {\n                if (cb) { cb(); }\n            });\n    }\n\n    public performVerticalScrollToCell(rowIndex: number, visibleColIndex: number, cb?: () => void) {\n        const children = this.parentByChildIndex(visibleColIndex || 0)?.children;\n        if (!super.isDataRow(rowIndex) || (children && children.length < 2) || visibleColIndex < 0) {\n            return super.performVerticalScrollToCell(rowIndex, visibleColIndex, cb);\n        }\n\n        const containerHeight = this.grid.calcHeight ? Math.ceil(this.grid.calcHeight) : 0;\n        const pos = this.getVerticalScrollPositions(rowIndex, visibleColIndex);\n        const row = super.getRowElementByIndex(rowIndex);\n        if ((this.scrollTop > pos.rowTop) && (!row || row.offsetTop + pos.topOffset < Math.abs(this.containerTopOffset))) {\n            pos.topOffset === 0 ? this.grid.verticalScrollContainer.scrollTo(rowIndex) :\n                this.grid.verticalScrollContainer.scrollPosition = pos.rowTop;\n        } else {\n            this.grid.verticalScrollContainer.addScrollTop(Math.abs(pos.rowBottom - this.scrollTop - containerHeight));\n        }\n        this.grid.verticalScrollContainer.onChunkLoad\n            .pipe(first()).subscribe(() => {\n                if (cb) { cb(); }\n            });\n    }\n\n    getNextHorizontalCellPosition(previous = false) {\n        const parent = this.parentByChildIndex(this.activeNode.column);\n        if (!this.hasNextHorizontalPosition(previous, parent)) {\n            return { row: this.activeNode.row, column: this.activeNode.column };\n        }\n        const columns = previous ? parent.children.filter(c => c.rowStart <= this.activeNode.layout.rowStart)\n            .sort((a, b) => b.visibleIndex - a.visibleIndex) : parent.children.filter(c => c.rowStart <= this.activeNode.layout.rowStart);\n        let column = columns.find((col) => previous ?\n                col.visibleIndex < this.activeNode.column && this.rowEnd(col) > this.activeNode.layout.rowStart :\n                col.visibleIndex > this.activeNode.column && col.colStart > this.activeNode.layout.colStart);\n        if (!column || (previous && this.activeNode.layout.colStart === 1)) {\n            const index = previous ? parent.visibleIndex - 1 : parent.visibleIndex + 1;\n            const children = this.grid.columnList.find(cols => cols.columnLayout && cols.visibleIndex === index).children;\n            column = previous ? children.toArray().reverse().find(child => child.rowStart <= this.activeNode.layout.rowStart) :\n                children.find(child => this.rowEnd(child) > this.activeNode.layout.rowStart && child.colStart === 1);\n        }\n        return { row: this.activeNode.row, column: column.visibleIndex };\n    }\n\n    getNextVerticalPosition(previous = false) {\n        this.activeNode.column = this.activeNode.column || 0;\n        if (!this.hasNextVerticalPosition(previous)) {\n            return { row: this.activeNode.row, column: this.activeNode.column };\n        }\n        const currentRowStart = this.grid.getColumnByVisibleIndex(this.activeNode.column).rowStart;\n        const nextBlock = !this.isDataRow(this.activeNode.row) ||\n        (previous ? currentRowStart === 1 : currentRowStart === this.lastRowStartPerBlock());\n        const nextRI = previous ? this.activeNode.row - 1 : this.activeNode.row + 1;\n        if (nextBlock && !this.isDataRow(nextRI)) {\n            return {row: nextRI,  column: this.activeNode.column};\n        }\n        const children = this.parentByChildIndex(this.activeNode.column).children;\n        const col = previous ? this.getPreviousRowIndex(children, nextBlock) : this.getNextRowIndex(children, nextBlock);\n        return { row: nextBlock ? nextRI : this.activeNode.row, column: col.visibleIndex };\n    }\n\n    private getNextRowIndex(children, next) {\n        const rowStart = next ? 1 : this.rowEnd(this.grid.getColumnByVisibleIndex(this.activeNode.column));\n        const  col = children.filter(c => c.rowStart === rowStart);\n        return col.find(co => co.colStart === this.activeNode.layout.colStart) ||\n            col.sort((a, b) => b.visibleIndex - a.visibleIndex).find(co => co.colStart <= this.activeNode.layout.colStart);    }\n\n    private getPreviousRowIndex(children, prev) {\n        const end = prev ? Math.max(...children.map(c => this.rowEnd(c))) :\n            this.grid.getColumnByVisibleIndex(this.activeNode.column).rowStart;\n        const col = children.filter(c => this.rowEnd(c) ===  end);\n        return col.find(co => co.colStart === this.activeNode.layout.colStart) ||\n            col.sort((a, b) => b.visibleIndex - a.visibleIndex).find(co => co.colStart <= this.activeNode.layout.colStart);\n    }\n\n    headerNavigation(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        if (!HEADER_KEYS.has(key)) { return; }\n        event.preventDefault();\n        if (!this.activeNode.layout) {\n            this.activeNode.layout = this.layout(this.activeNode.column || 0);\n        }\n        const alt = event.altKey;\n        const ctrl = event.ctrlKey;\n        this.performHeaderKeyCombination(this.grid.getColumnByVisibleIndex(this.activeNode.column), key, event.shiftKey, ctrl, alt, event);\n        if (!ctrl && !alt && (key.includes('down') || key.includes('up'))) {\n            const children = this.parentByChildIndex(this.activeNode.column).children;\n            const col = key.includes('down') ? this.getNextRowIndex(children, false) : this.getPreviousRowIndex(children, false);\n            if (!col) { return; }\n            this.activeNode.column = col.visibleIndex;\n            const layout = this.layout(this.activeNode.column);\n            const nextLayout = {...this.activeNode.layout, rowStart: layout.rowStart, rowEnd: layout.rowEnd};\n            this.setActiveNode({row: this.activeNode.row, layout: nextLayout});\n            return;\n        }\n        this.horizontalNav(event, key, -1, 'headerCell');\n    }\n\n    protected horizontalNav(event: KeyboardEvent, key: string, rowIndex: number, tag: GridKeydownTargetType) {\n        const ctrl = event.ctrlKey;\n        if (!HORIZONTAL_NAV_KEYS.has(key) || event.altKey) { return; }\n        this.activeNode.row = rowIndex;\n\n        const newActiveNode = {\n            column: this.activeNode.column,\n            mchCache: {\n                level: this.activeNode.level,\n                visibleIndex: this.activeNode.column\n            }\n        };\n\n        if ((key.includes('left') || key === 'home') && this.activeNode.column > 0) {\n            newActiveNode.column = ctrl || key === 'home' ? this.firstIndexPerRow : this.getNextHorizontalCellPosition(true).column;\n        }\n        if ((key.includes('right') || key === 'end') && this.activeNode.column !== this.lastIndexPerRow) {\n            newActiveNode.column = ctrl || key === 'end' ? this.lastIndexPerRow : this.getNextHorizontalCellPosition().column;\n        }\n\n        if (tag === 'headerCell') {\n            const column = this.grid.getColumnByVisibleIndex(newActiveNode.column);\n            newActiveNode.mchCache.level = column.level;\n            newActiveNode.mchCache.visibleIndex = column.visibleIndex;\n        }\n\n        const layout = this.layout(newActiveNode.column);\n        const newLayout = {...this.activeNode.layout, colStart: layout.colStart, rowEnd: layout.rowEnd};\n        this.setActiveNode({row: this.activeNode.row, column: newActiveNode.column,\n            layout: newLayout, mchCache: newActiveNode.mchCache});\n        this.performHorizontalScrollToCell(newActiveNode.column);\n    }\n\n    private get lastIndexPerRow(): number {\n        const children = this.grid.visibleColumns.find(c => c.visibleIndex === this.lastLayoutIndex && c.columnLayout)\n            .children.toArray().reverse();\n        const column = children.find(co => co.rowStart === this.activeNode.layout.rowStart) ||\n        children.find(co => co.rowStart <= this.activeNode.layout.rowStart);\n        return column.visibleIndex;\n    }\n\n    private get firstIndexPerRow(): number {\n        const children = this.grid.visibleColumns.find(c => c.visibleIndex === 0 && c.columnLayout).children;\n        const column = children.find(co => co.rowStart === this.activeNode.layout.rowStart) ||\n        children.find(co => co.rowStart <= this.activeNode.layout.rowStart);\n        return column.visibleIndex;\n    }\n\n    private get lastLayoutIndex(): number {\n        return Math.max(...this.grid.visibleColumns.filter(c => c.columnLayout).map(col => col.visibleIndex));\n    }\n\n    private get scrollTop(): number {\n       return Math.abs(this.grid.verticalScrollContainer.getScroll().scrollTop);\n    }\n\n    private lastColIndexPerMRLBlock(visibleIndex = this.activeNode.column): number {\n        return this.parentByChildIndex(visibleIndex).children.last.visibleIndex;\n    }\n\n    private lastRowStartPerBlock(visibleIndex = this.activeNode.column) {\n        return Math.max(...this.parentByChildIndex(visibleIndex).children.map(c => c.rowStart));\n    }\n\n    private rowEnd(column): number {\n        return column.rowEnd && column.rowEnd - column.rowStart ? column.rowStart + column.rowEnd - column.rowStart : column.rowStart + 1;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public layout(visibleIndex) {\n        const column = this.grid.getColumnByVisibleIndex(visibleIndex);\n        return {colStart: column.colStart, rowStart: column.rowStart,\n                colEnd: column.colEnd, rowEnd: column.rowEnd, columnVisibleIndex: column.visibleIndex };\n    }\n\n    private parentByChildIndex(visibleIndex) {\n        return this.grid.getColumnByVisibleIndex(visibleIndex)?.parent;\n\n    }\n\n    private hasNextHorizontalPosition(previous = false, parent) {\n        if (previous && parent.visibleIndex === 0 && this.activeNode.layout.colStart === 1 ||\n            !previous && parent.visibleIndex === this.lastLayoutIndex && this.activeNode.column === this.lastIndexPerRow) {\n            return false;\n        }\n        return true;\n    }\n\n    private hasNextVerticalPosition(prev = false) {\n        if ((prev && this.activeNode.row === 0 && (!this.isDataRow(this.activeNode.row) || this.activeNode.layout.rowStart === 1)) ||\n            (!prev && this.activeNode.row >= this.grid.dataView.length - 1 && this.activeNode.column === this.lastColIndexPerMRLBlock())) {\n            return false;\n        }\n        return true;\n    }\n}\n","import {\n    Component, ChangeDetectionStrategy, Input, Output, EventEmitter, ContentChild, ViewChildren,\n    QueryList, ViewChild, ElementRef, TemplateRef, DoCheck, AfterContentInit, HostBinding,\n    forwardRef, OnInit, AfterViewInit, ContentChildren\n} from '@angular/core';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridNavigationService } from '../grid-navigation.service';\nimport { IgxGridAPIService } from './grid-api.service';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\nimport { cloneArray, IBaseEventArgs } from '../../core/utils';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { IgxGroupByRowTemplateDirective, IgxGridDetailTemplateDirective } from './grid.directives';\nimport { IgxGridGroupByRowComponent } from './groupby-row.component';\nimport { IGroupByExpandState } from '../../data-operations/groupby-expand-state.interface';\nimport { IForOfState } from '../../directives/for-of/for_of.directive';\nimport { IBaseChipEventArgs, IChipClickEventArgs, IChipKeyDownEventArgs } from '../../chips/chip.component';\nimport { IChipsAreaReorderEventArgs } from '../../chips/chips-area.component';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IGroupingExpression } from '../../data-operations/grouping-expression.interface';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { IgxGridMRLNavigationService } from '../grid-mrl-navigation.service';\nimport { FilterMode } from '../common/enums';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGroupByRowSelectorDirective } from '../selection/row-selectors';\n\nlet NEXT_ID = 0;\n\nexport interface IGroupingDoneEventArgs extends IBaseEventArgs {\n    expressions: Array<ISortingExpression> | ISortingExpression;\n    groupedColumns: Array<IgxColumnComponent> | IgxColumnComponent;\n    ungroupedColumns: Array<IgxColumnComponent> | IgxColumnComponent;\n}\n\n/**\n * Grid provides a way to present and manipulate tabular data.\n * @igxModule IgxGridModule\n * @igxGroup Grids & Lists\n * @igxKeywords grid, table\n * @igxTheme igx-grid-theme\n * @remarks\n * The Ignite UI Grid is used for presenting and manipulating tabular data in the simplest way possible.  Once data\n * has been bound, it can be manipulated through filtering, sorting & editing operations.\n * @example\n * ```html\n * <igx-grid [data]=\"employeeData\" autoGenerate=\"false\">\n *   <igx-column field=\"first\" header=\"First Name\"></igx-column>\n *   <igx-column field=\"last\" header=\"Last Name\"></igx-column>\n *   <igx-column field=\"role\" header=\"Role\"></igx-column>\n * </igx-grid>\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    providers: [\n        IgxGridNavigationService,\n        IgxGridSummaryService,\n        IgxGridSelectionService,\n        IgxGridCRUDService,\n        { provide: GridBaseAPIService, useClass: IgxGridAPIService },\n        { provide: IgxGridBaseDirective, useExisting: forwardRef(() => IgxGridComponent) },\n        IgxFilteringService,\n        IgxColumnResizingService,\n        IgxForOfSyncService,\n        IgxForOfScrollSyncService\n    ],\n    selector: 'igx-grid',\n    templateUrl: './grid.component.html'\n})\nexport class IgxGridComponent extends IgxGridBaseDirective implements GridType, OnInit, DoCheck, AfterContentInit, AfterViewInit {\n    private _id = `igx-grid-${NEXT_ID++}`;\n    /**\n     * @hidden @internal\n     */\n    public groupingResult: any[];\n\n    /**\n     * @hidden @internal\n     */\n    public groupingMetadata: any[];\n\n    /**\n     * @hidden @internal\n     */\n    public groupingFlatResult: any[];\n    /**\n     * @hidden\n     */\n    protected _groupingExpressions: IGroupingExpression[] = [];\n    /**\n     * @hidden\n     */\n    protected _groupingExpandState: IGroupByExpandState[] = [];\n    /**\n     * @hidden\n     */\n    protected _groupRowTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected _groupAreaTemplate: TemplateRef<any>;\n    /**\n     * @hidden\n     */\n    protected groupingDiffer;\n    private _data;\n    private _hideGroupedColumns = false;\n    private _dropAreaMessage = null;\n    private _showGroupArea = true;\n\n    /**\n     * Gets/Sets the value of the `id` attribute.\n     * @remarks\n     * If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this._id = value;\n    }\n\n    /**\n     * Gets/Sets the array of data that populates the `IgxGridComponent`.\n     * @example\n     * ```html\n     * <igx-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public get data(): any[] {\n        return this._data;\n    }\n\n    public set data(value: any[]) {\n        this._data = value || [];\n        this.summaryService.clearSummaryCache();\n        if (this.shouldGenerate) {\n            this.setupColumns();\n        }\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Gets/Sets an array of objects containing the filtered data.\n     * @example\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * this.grid.filteredData = [...];\n     * ```\n     */\n    get filteredData() {\n        return this._filteredData;\n    }\n\n    set filteredData(value) {\n        this._filteredData = value;\n    }\n\n    /**\n     * Emitted when a new chunk of data is loaded from virtualization.\n     * @example\n     * ```typescript\n     *  <igx-grid #grid [data]=\"localData\" [autoGenerate]=\"true\" (onDataPreLoad)='handleDataPreloadEvent()'></igx-grid>\n     * ```\n     */\n    @Output()\n    public onDataPreLoad = new EventEmitter<IForOfState>();\n\n    /**\n     * Gets/Sets the total number of records in the data source.\n     * @remarks\n     * This property is required for remote grid virtualization to function when it is bound to remote data.\n     * @example\n     * ```typescript\n     * const itemCount = this.grid1.totalItemCount;\n     * this.grid1.totalItemCount = 55;\n     * ```\n     */\n    set totalItemCount(count) {\n        this.verticalScrollContainer.totalItemCount = count;\n        this.cdr.detectChanges();\n    }\n\n    get totalItemCount() {\n        return this.verticalScrollContainer.totalItemCount;\n    }\n\n    private get _gridAPI(): IgxGridAPIService {\n        return this.gridAPI as IgxGridAPIService;\n    }\n    private _filteredData = null;\n\n    private childDetailTemplates: Map<any, any> = new Map();\n\n    /**\n     * Gets/Sets the group by state.\n     * @example\n     * ```typescript\n     * let groupByState = this.grid.groupingExpressions;\n     * this.grid.groupingExpressions = [...];\n     * ```\n     * @remarks\n     * Supports two-way data binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(groupingExpressions)]=\"model.groupingExpressions\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get groupingExpressions(): IGroupingExpression[] {\n        return this._groupingExpressions;\n    }\n\n    set groupingExpressions(value: IGroupingExpression[]) {\n        if (value && value.length > 10) {\n            throw Error('Maximum amount of grouped columns is 10.');\n        }\n        const oldExpressions: IGroupingExpression[] = this.groupingExpressions;\n        const newExpressions: IGroupingExpression[] = value;\n        this._groupingExpressions = cloneArray(value);\n        this.groupingExpressionsChange.emit(this._groupingExpressions);\n        this.chipsGoupingExpressions = cloneArray(value);\n        if (this._gridAPI.grid) {\n            /* grouping should work in conjunction with sorting\n            and without overriding separate sorting expressions */\n            this._applyGrouping();\n            this._gridAPI.arrange_sorting_expressions();\n            this.notifyChanges();\n        } else {\n            // setter called before grid is registered in grid API service\n            this.sortingExpressions.unshift.apply(this.sortingExpressions, this._groupingExpressions);\n        }\n        if (!this._init && JSON.stringify(oldExpressions) !== JSON.stringify(newExpressions) && this.columnList) {\n            const groupedCols: IgxColumnComponent[] = [];\n            const ungroupedCols: IgxColumnComponent[] = [];\n            const groupedColsArr = newExpressions.filter((obj) => {\n                return !oldExpressions.some((obj2) => {\n                    return obj.fieldName === obj2.fieldName;\n                });\n            });\n            groupedColsArr.forEach((elem) => {\n                groupedCols.push(this.getColumnByName(elem.fieldName));\n            }, this);\n            const ungroupedColsArr = oldExpressions.filter((obj) => {\n                return !newExpressions.some((obj2) => {\n                    return obj.fieldName === obj2.fieldName;\n                });\n            });\n            ungroupedColsArr.forEach((elem) => {\n                ungroupedCols.push(this.getColumnByName(elem.fieldName));\n            }, this);\n            this.notifyChanges();\n            const groupingDoneArgs: IGroupingDoneEventArgs = {\n                expressions: newExpressions,\n                groupedColumns: groupedCols,\n                ungroupedColumns: ungroupedCols\n            };\n            this.onGroupingDone.emit(groupingDoneArgs);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public groupingExpressionsChange = new EventEmitter<IGroupingExpression[]>();\n\n    /**\n     * Gets/Sets a list of expansion states for group rows.\n     * @remarks\n     * Includes only states that differ from the default one (controlled through groupsExpanded and states that the user has changed.\n     * Contains the expansion state (expanded: boolean) and the unique identifier for the group row (Array).\n     * Supports two-way data binding.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [autoGenerate]=\"true\" [(groupingExpansionState)]=\"model.groupingExpansionState\"></igx-grid>\n     * ```\n     */\n    @Input()\n    get groupingExpansionState() {\n        return this._groupingExpandState;\n    }\n\n    set groupingExpansionState(value) {\n        if (value !== this._groupingExpandState) {\n            this.groupingExpansionStateChange.emit(value);\n        }\n        this._groupingExpandState = value;\n        if (this.gridAPI.grid) {\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @Output()\n    public groupingExpansionStateChange = new EventEmitter<IGroupByExpandState[]>();\n\n    /**\n     * Gets/Sets whether created groups are rendered expanded or collapsed.\n     * @remarks\n     * The default rendered state is expanded.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"Data\" [groupsExpanded]=\"false\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public groupsExpanded = true;\n\n    /**\n     * Gets the hierarchical representation of the group by records.\n     * @example\n     * ```typescript\n     * let groupRecords = this.grid.groupsRecords;\n     * ```\n     */\n    public groupsRecords: IGroupByRecord[] = [];\n\n    /**\n     * Gets/Sets whether the grouped columns should be hidden.\n     * @remarks\n     * The default value is \"false\"\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" [hideGroupedColumns]=\"true\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Input()\n    public get hideGroupedColumns() {\n        return this._hideGroupedColumns;\n    }\n\n    public set hideGroupedColumns(value: boolean) {\n        if (value) {\n            this.groupingDiffer = this.differs.find(this.groupingExpressions).create();\n        } else {\n            this.groupingDiffer = null;\n        }\n        if (this.columnList && this.groupingExpressions) {\n            this._setGroupColsVisibility(value);\n        }\n\n        this._hideGroupedColumns = value;\n    }\n\n    /**\n     * Gets/Sets the message displayed inside the GroupBy drop area where columns can be dragged on.\n     * @remarks\n     * The grid needs to have at least one groupable column in order the GroupBy area to be displayed.\n     * @example\n     * ```html\n     * <igx-grid dropAreaMessage=\"Drop here to group!\">\n     *      <igx-column [groupable]=\"true\" field=\"ID\"></igx-column>\n     * </igx-grid>\n     * ```\n     */\n    @Input()\n    set dropAreaMessage(value: string) {\n        this._dropAreaMessage = value;\n        this.notifyChanges();\n    }\n\n    get dropAreaMessage(): string {\n        return this._dropAreaMessage || this.resourceStrings.igx_grid_groupByArea_message;\n    }\n\n    /**\n     * Gets/Sets the template that will be rendered as a GroupBy drop area.\n     * @remarks\n     * The grid needs to have at least one groupable column in order the GroupBy area to be displayed.\n     * @example\n     * ```html\n     * <igx-grid [dropAreaTemplate]=\"dropAreaRef\">\n     * </igx-grid>\n     * <ng-template #myDropArea>\n     *      <span> Custom drop area! </span>\n     * </ng-template>\n     * ```\n     */\n    @Input()\n    public dropAreaTemplate: TemplateRef<any>;\n\n    /**\n     * Emitted when columns are grouped/ungrouped.\n     * @remarks\n     * The `onGroupingDone` event would be raised only once if several columns get grouped at once by calling\n     * the `groupBy()` or `clearGrouping()` API methods and passing an array as an argument.\n     * The event arguments provide the `expressions`, `groupedColumns` and `ungroupedColumns` properties, which contain\n     * the `ISortingExpression` and the `IgxColumnComponent` related to the grouping/ungrouping operation.\n     * Please note that `groupedColumns` and `ungroupedColumns` show only the **newly** changed columns (affected by the **last**\n     * grouping/ungrouping operation), not all columns which are currently grouped/ungrouped.\n     * columns.\n     * @example\n     * ```html\n     * <igx-grid #grid [data]=\"localData\" (onGroupingDone)=\"groupingDone($event)\" [autoGenerate]=\"true\"></igx-grid>\n     * ```\n     */\n    @Output()\n    public onGroupingDone = new EventEmitter<IGroupingDoneEventArgs>();\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxGroupByRowTemplateDirective, { read: IgxGroupByRowTemplateDirective })\n    protected groupTemplate: IgxGroupByRowTemplateDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxGridDetailTemplateDirective, { read: IgxGridDetailTemplateDirective, static: false })\n    protected gridDetailsTemplate: IgxGridDetailTemplateDirective;\n\n    @ViewChildren(IgxGridGroupByRowComponent, { read: IgxGridGroupByRowComponent })\n    private _groupsRowList: QueryList<IgxGridGroupByRowComponent>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('defaultDropArea', { read: TemplateRef, static: true })\n    public defaultDropAreaTemplate: TemplateRef<any>;\n\n    /**\n     * Gets the list of group rows.\n     * @example\n     * ```typescript\n     * const groupList = this.grid.groupsRowList;\n     * ```\n     */\n    public get groupsRowList() {\n        const res = new QueryList<any>();\n        if (!this._groupsRowList) {\n            return res;\n        }\n        const rList = this._groupsRowList.filter((item) => {\n            return item.element.nativeElement.parentElement !== null;\n        }).sort((item1, item2) => item1.index - item2.index);\n        res.reset(rList);\n        return res;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('groupArea')\n    public groupArea: ElementRef;\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('record_template', { read: TemplateRef, static: true })\n    protected recordTemplate: TemplateRef<any>;\n\n    @ViewChild('detail_template_container', { read: TemplateRef, static: true })\n    protected detailTemplateContainer: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxGridDetailTemplateDirective, { read: TemplateRef, static: false })\n    public detailTemplate: TemplateRef<any> = null;\n\n    @ViewChild('group_template', { read: TemplateRef, static: true })\n    protected defaultGroupTemplate: TemplateRef<any>;\n\n    @ViewChild('summary_template', { read: TemplateRef, static: true })\n    protected summaryTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get groupByRowSelectorTemplate(): TemplateRef<IgxGroupByRowSelectorDirective> {\n        if (this.groupByRowSelectorsTemplates && this.groupByRowSelectorsTemplates.first) {\n            return this.groupByRowSelectorsTemplates.first.templateRef;\n        }\n        return null;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChildren(IgxGroupByRowSelectorDirective, { read: IgxGroupByRowSelectorDirective, descendants: false })\n    protected groupByRowSelectorsTemplates: QueryList<IgxGroupByRowSelectorDirective>;\n\n    /**\n     * @hidden @internal\n     */\n    public getDetailsContext(rowData, index) {\n        return {\n            $implicit: rowData,\n            index: index\n        };\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public trackChanges(index, rec) {\n        if (rec.detailsData !== undefined) {\n            return rec.detailsData;\n        }\n        return rec;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public detailsViewFocused(container, rowIndex) {\n        this.navigation.setActiveNode({ row: rowIndex });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get hasDetails() {\n        return !!this.gridDetailsTemplate;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getRowTemplate(rowData) {\n        if (this.isGroupByRecord(rowData)) {\n            return this.defaultGroupTemplate;\n        } else if (this.isSummaryRow(rowData)) {\n            return this.summaryTemplate;\n        } else if (this.hasDetails && this.isDetailRecord(rowData)) {\n            return this.detailTemplateContainer;\n        } else {\n            return this.recordTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isDetailRecord(record) {\n        return record.detailsData !== undefined;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isDetailActive(rowIndex) {\n        return this.navigation.activeNode ? this.navigation.activeNode.row === rowIndex : false;\n    }\n    /**\n     * @hidden @internal\n     */\n    get groupAreaHostClass(): string {\n        return this.getComponentDensityClass('igx-drop-area');\n    }\n\n    /**\n     * Gets/Sets the template reference for the group row.\n     * @example\n     * ```\n     * const groupRowTemplate = this.grid.groupRowTemplate;\n     * this.grid.groupRowTemplate = myRowTemplate;\n     * ```\n     */\n    get groupRowTemplate(): TemplateRef<any> {\n        return this._groupRowTemplate;\n    }\n\n    set groupRowTemplate(template: TemplateRef<any>) {\n        this._groupRowTemplate = template;\n        this.notifyChanges();\n    }\n\n\n    /**\n     * Gets/Sets the template reference of the `IgxGridComponent`'s group area.\n     * @example\n     * ```typescript\n     * const groupAreaTemplate = this.grid.groupAreaTemplate;\n     * this.grid.groupAreaTemplate = myAreaTemplate.\n     * ```\n     */\n    get groupAreaTemplate(): TemplateRef<any> {\n        return this._groupAreaTemplate;\n    }\n\n    set groupAreaTemplate(template: TemplateRef<any>) {\n        this._groupAreaTemplate = template;\n        this.notifyChanges();\n    }\n\n    /**\n     * Groups by a new `IgxColumnComponent` based on the provided expression, or modifies an existing one.\n     * @remarks\n     * Also allows for multiple columns to be grouped at once if an array of `ISortingExpression` is passed.\n     * The onGroupingDone event would get raised only **once** if this method gets called multiple times with the same arguments.\n     * @example\n     * ```typescript\n     * this.grid.groupBy({ fieldName: name, dir: SortingDirection.Asc, ignoreCase: false });\n     * this.grid.groupBy([\n     *     { fieldName: name1, dir: SortingDirection.Asc, ignoreCase: false },\n     *     { fieldName: name2, dir: SortingDirection.Desc, ignoreCase: true },\n     *     { fieldName: name3, dir: SortingDirection.Desc, ignoreCase: false }\n     * ]);\n     * ```\n     */\n    public groupBy(expression: IGroupingExpression | Array<IGroupingExpression>): void {\n        if (this.checkIfNoColumnField(expression)) {\n            return;\n        }\n        this.endEdit(true);\n        if (expression instanceof Array) {\n            this._gridAPI.groupBy_multiple(expression);\n        } else {\n            this._gridAPI.groupBy(expression);\n        }\n        this.notifyChanges(true);\n    }\n\n    /**\n     * Clears grouping for particular column, array of columns or all columns.\n     * @remarks\n     * Clears all grouping in the grid, if no parameter is passed.\n     * If a parameter is provided, clears grouping for a particular column or an array of columns.\n     * @example\n     * ```typescript\n     * this.grid.clearGrouping(); //clears all grouping\n     * this.grid.clearGrouping(\"ID\"); //ungroups a single column\n     * this.grid.clearGrouping([\"ID\", \"Column1\", \"Column2\"]); //ungroups multiple columns\n     * ```\n     * @param name Name of column or array of column names to be ungrouped.\n     */\n    public clearGrouping(name?: string | Array<string>): void {\n        this._gridAPI.clear_groupby(name);\n        this.notifyChanges(true);\n    }\n\n    public preventHeaderScroll(args) {\n        if (args.target.scrollLeft !== 0) {\n            (this.navigation as any).forOfDir().getScroll().scrollLeft = args.target.scrollLeft;\n            args.target.scrollLeft = 0;\n        }\n    }\n\n    /**\n     * Returns if a group is expanded or not.\n     * @param group The group record.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * const expandedGroup = this.grid.isExpandedGroup(this.groupRow);\n     * ```\n     */\n    public isExpandedGroup(group: IGroupByRecord): boolean {\n        const state: IGroupByExpandState = this._getStateForGroupRow(group);\n        return state ? state.expanded : this.groupsExpanded;\n    }\n\n    /**\n     * Toggles the expansion state of a group.\n     * @param groupRow The group record to toggle.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * const toggleExpGroup = this.grid.toggleGroup(this.groupRow);\n     * ```\n     */\n    public toggleGroup(groupRow: IGroupByRecord) {\n        this._toggleGroup(groupRow);\n        this.notifyChanges();\n    }\n\n    /**\n     * Select all rows within a group.\n     * @param groupRow: The group record which rows would be selected.\n     * @param clearCurrentSelection if true clears the current selection\n     * @example\n     * ```typescript\n     * this.grid.selectRowsInGroup(this.groupRow, true);\n     * ```\n     */\n    public selectRowsInGroup(groupRow: IGroupByRecord, clearPrevSelection?: boolean) {\n        this._gridAPI.groupBy_select_all_rows_in_group(groupRow, clearPrevSelection);\n        this.notifyChanges();\n    }\n\n    /**\n     * Deselect all rows within a group.\n     * @param groupRow The group record which rows would be deselected.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * this.grid.deselectRowsInGroup(this.groupRow);\n     * ```\n     */\n    public deselectRowsInGroup(groupRow: IGroupByRecord) {\n        this._gridAPI.groupBy_deselect_all_rows_in_group(groupRow);\n        this.notifyChanges();\n    }\n\n    /**\n     * Expands the specified group and all of its parent groups.\n     * @param groupRow The group record to fully expand.\n     * @example\n     * ```typescript\n     * public groupRow: IGroupByRecord;\n     * this.grid.fullyExpandGroup(this.groupRow);\n     * ```\n     */\n    public fullyExpandGroup(groupRow: IGroupByRecord) {\n        this._fullyExpandGroup(groupRow);\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isGroupByRecord(record: any): boolean {\n        // return record.records instance of GroupedRecords fails under Webpack\n        return record.records && record.records.length;\n    }\n\n    /**\n     * Toggles the expansion state of all group rows recursively.\n     * @example\n     * ```typescript\n     * this.grid.toggleAllGroupRows;\n     * ```\n     */\n    public toggleAllGroupRows() {\n        this.groupingExpansionState = [];\n        this.groupsExpanded = !this.groupsExpanded;\n        this.notifyChanges();\n    }\n\n    /**\n     * Returns if the `IgxGridComponent` has groupable columns.\n     * @example\n     * ```typescript\n     * const groupableGrid = this.grid.hasGroupableColumns;\n     * ```\n     */\n    get hasGroupableColumns(): boolean {\n        return this.columnList.some((col) => col.groupable && !col.columnGroup);\n    }\n\n    @Input()\n    public get showGroupArea(): boolean {\n        return this._showGroupArea;\n    }\n    public set showGroupArea(value: boolean) {\n        this._showGroupArea = value;\n    }\n\n    private _setGroupColsVisibility(value) {\n        if (this.columnList.length > 0 && !this.hasColumnLayouts) {\n            this.groupingExpressions.forEach((expr) => {\n                const col = this.getColumnByName(expr.fieldName);\n                col.hidden = value;\n            });\n        }\n    }\n\n    /**\n     * Gets if the grid's group by drop area is visible.\n     * @example\n     * ```typescript\n     * const dropVisible = this.grid.dropAreaVisible;\n     * ```\n     */\n    public get dropAreaVisible(): boolean {\n        return (this.draggedColumn && this.draggedColumn.groupable) ||\n            !this.chipsGoupingExpressions.length;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected _getStateForGroupRow(groupRow: IGroupByRecord): IGroupByExpandState {\n        return this._gridAPI.groupBy_get_expanded_for_group(groupRow);\n    }\n\n    /**\n     * @hidden\n     */\n    protected _toggleGroup(groupRow: IGroupByRecord) {\n        this._gridAPI.groupBy_toggle_group(groupRow);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected _fullyExpandGroup(groupRow: IGroupByRecord) {\n        this._gridAPI.groupBy_fully_expand_group(groupRow);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected _applyGrouping() {\n        this._gridAPI.sort_multiple(this._groupingExpressions);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public isColumnGrouped(fieldName: string): boolean {\n        return this.groupingExpressions.find(exp => exp.fieldName === fieldName) ? true : false;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getContext(rowData: any, rowIndex: number, pinned?: boolean): any {\n        if (this.isDetailRecord(rowData)) {\n            const cachedData = this.childDetailTemplates.get(rowData.detailsData);\n            const rowID = this.primaryKey ? rowData.detailsData[this.primaryKey] : this.data.indexOf(rowData.detailsData);\n            if (cachedData) {\n                const view = cachedData.view;\n                const tmlpOutlet = cachedData.owner;\n                return {\n                    $implicit: rowData.detailsData,\n                    moveView: view,\n                    owner: tmlpOutlet,\n                    index: this.dataView.indexOf(rowData),\n                    templateID: 'detailRow-' + rowID\n                };\n            } else {\n                // child rows contain unique grids, hence should have unique templates\n                return {\n                    $implicit: rowData.detailsData,\n                    templateID: 'detailRow-' + rowID,\n                    index: this.dataView.indexOf(rowData)\n                };\n            }\n        }\n        return {\n            $implicit: this.isGhostRecord(rowData) || this.isAddRowRecord(rowData) ? rowData.recordRef : rowData,\n            index: this.getDataViewIndex(rowIndex, pinned),\n            templateID: this.isGroupByRecord(rowData) ? 'groupRow' : this.isSummaryRow(rowData) ? 'summaryRow' : 'dataRow',\n            disabled: this.isGhostRecord(rowData),\n            addRow: this.isAddRowRecord(rowData) ? rowData.addRow : false\n        };\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public viewCreatedHandler(args) {\n        if (args.context.templateID.indexOf('detailRow') !== -1) {\n            this.childDetailTemplates.set(args.context.$implicit, args);\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public viewMovedHandler(args) {\n        if (args.context.templateID.indexOf('detailRow') !== -1) {\n            // view was moved, update owner in cache\n            const key = args.context.$implicit;\n            const cachedData = this.childDetailTemplates.get(key);\n            cachedData.owner = args.owner;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipRemoved(event: IBaseChipEventArgs) {\n        this.clearGrouping(event.owner.id);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public chipsOrderChanged(event: IChipsAreaReorderEventArgs) {\n        const newGrouping = [];\n        for (let i = 0; i < event.chipsArray.length; i++) {\n            const expr = this.groupingExpressions.filter((item) => {\n                return item.fieldName === event.chipsArray[i].id;\n            })[0];\n\n            if (!this.getColumnByName(expr.fieldName).groupable) {\n                // disallow changing order if there are columns with groupable: false\n                return;\n            }\n            newGrouping.push(expr);\n        }\n        this.groupingExpansionState = [];\n        this.chipsGoupingExpressions = newGrouping;\n\n        if (event.originalEvent instanceof KeyboardEvent) {\n            // When reordered using keyboard navigation, we don't have `onMoveEnd` event.\n            this.groupingExpressions = this.chipsGoupingExpressions;\n        }\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public chipsMovingEnded() {\n        this.groupingExpressions = this.chipsGoupingExpressions;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipClicked(event: IChipClickEventArgs) {\n        const sortingExpr = this.sortingExpressions;\n        const columnExpr = sortingExpr.find((expr) => expr.fieldName === event.owner.id);\n        columnExpr.dir = 3 - columnExpr.dir;\n        this.sort(columnExpr);\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onChipKeyDown(event: IChipKeyDownEventArgs) {\n        if (event.originalEvent.key === ' ' || event.originalEvent.key === 'Spacebar' || event.originalEvent.key === 'Enter') {\n            const sortingExpr = this.sortingExpressions;\n            const columnExpr = sortingExpr.find((expr) => expr.fieldName === event.owner.id);\n            columnExpr.dir = 3 - columnExpr.dir;\n            this.sort(columnExpr);\n            this.notifyChanges();\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected get defaultTargetBodyHeight(): number {\n        const allItems = this.totalItemCount || this.dataLength;\n        return this.renderedRowHeight * Math.min(this._defaultTargetRecordNumber,\n            this.paging ? Math.min(allItems, this.perPage) : allItems);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected getGroupAreaHeight(): number {\n        return this.groupArea ? this.getComputedHeight(this.groupArea.nativeElement) : 0;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected scrollTo(row: any | number, column: any | number): void {\n        if (this.groupingExpressions && this.groupingExpressions.length\n            && typeof (row) !== 'number') {\n            const rowIndex = this.groupingResult.indexOf(row);\n            const groupByRecord = this.groupingMetadata[rowIndex];\n            if (groupByRecord) {\n                this._fullyExpandGroup(groupByRecord);\n            }\n        }\n\n        super.scrollTo(row, column, this.groupingFlatResult);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dropAreaTemplateResolved(): TemplateRef<any> {\n        if (this.dropAreaTemplate) {\n            return this.dropAreaTemplate;\n        } else {\n            return this.defaultDropAreaTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getGroupByChipTitle(expression: IGroupingExpression): string {\n        const column = this.getColumnByName(expression.fieldName);\n        return (column && column.header) || expression.fieldName;\n    }\n    /**\n     * @hidden @internal\n     */\n    public get iconTemplate() {\n        if (this.groupsExpanded) {\n            return this.headerExpandIndicatorTemplate || this.defaultExpandedTemplate;\n        } else {\n            return this.headerCollapseIndicatorTemplate || this.defaultCollapsedTemplate;\n        }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public getColumnGroupable(fieldName: string): boolean {\n        const column = this.getColumnByName(fieldName);\n        return column && column.groupable;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterContentInit() {\n        super.ngAfterContentInit();\n        if (this.allowFiltering && this.hasColumnLayouts) {\n            this.filterMode = FilterMode.excelStyleFilter;\n        }\n        if (this.groupTemplate) {\n            this._groupRowTemplate = this.groupTemplate.template;\n        }\n\n        if (this.hideGroupedColumns && this.columnList && this.groupingExpressions) {\n            this._setGroupColsVisibility(this.hideGroupedColumns);\n        }\n        this._setupNavigationService();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngAfterViewInit() {\n        super.ngAfterViewInit();\n        this.verticalScrollContainer.onBeforeViewDestroyed.pipe(takeUntil(this.destroy$)).subscribe((view) => {\n            const rowData = view.context.$implicit;\n            if (this.isDetailRecord(rowData)) {\n                const cachedData = this.childDetailTemplates.get(rowData.detailsData);\n                if (cachedData) {\n                    const tmlpOutlet = cachedData.owner;\n                    tmlpOutlet._viewContainerRef.detach(0);\n                }\n            }\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n        this.onGroupingDone.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n            this.endEdit(true);\n            this.summaryService.updateSummaryCache(args);\n            this._headerFeaturesWidth = NaN;\n        });\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public ngDoCheck(): void {\n        if (this.groupingDiffer && this.columnList && !this.hasColumnLayouts) {\n            const changes = this.groupingDiffer.diff(this.groupingExpressions);\n            if (changes && this.columnList.length > 0) {\n                changes.forEachAddedItem((rec) => {\n                    const col = this.getColumnByName(rec.item.fieldName);\n                    col.hidden = true;\n                });\n                changes.forEachRemovedItem((rec) => {\n                    const col = this.getColumnByName(rec.item.fieldName);\n                    col.hidden = false;\n                });\n            }\n        }\n        super.ngDoCheck();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dataLoading(event) {\n        this.onDataPreLoad.emit(event);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getSelectedData(formatters = false, headers = false): any[] {\n        if (this.groupingExpressions.length || this.hasDetails) {\n            const source = [];\n\n            const process = (record) => {\n                if (record.expression || record.summaries || this.isDetailRecord(record)) {\n                    source.push(null);\n                    return;\n                }\n                source.push(record);\n\n            };\n\n            this.dataView.forEach(process);\n            return this.extractDataFromSelection(source, formatters, headers);\n        } else {\n            return super.getSelectedData(formatters, headers);\n        }\n    }\n\n    private _setupNavigationService() {\n        if (this.hasColumnLayouts) {\n            this.navigation = new IgxGridMRLNavigationService();\n            this.navigation.grid = this;\n        }\n    }\n\n    private checkIfNoColumnField(expression: IGroupingExpression | Array<IGroupingExpression> | any): boolean {\n        if (expression instanceof Array) {\n            for (const singleExpression of expression) {\n                if (!singleExpression.fieldName) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        return !expression.fieldName;\n    }\n\n}\n","import { Directive, Optional, Input, NgModule, Host, ComponentFactoryResolver, ViewContainerRef } from '@angular/core';\nimport { ISortingExpression } from '../data-operations/sorting-expression.interface';\nimport { FilteringExpressionsTree, IFilteringExpressionsTree } from '../data-operations/filtering-expressions-tree';\nimport { IFilteringExpression } from '../data-operations/filtering-expression.interface';\nimport { IgxColumnComponent } from './columns/column.component';\nimport { IGroupingExpression } from '../data-operations/grouping-expression.interface';\nimport { IPagingState } from '../data-operations/paging-state.interface';\nimport { DataType } from '../data-operations/data-util';\nimport { IgxBooleanFilteringOperand, IgxNumberFilteringOperand, IgxDateFilteringOperand,\n    IgxStringFilteringOperand, IFilteringOperation} from '../data-operations/filtering-condition';\nimport { GridSelectionRange } from './selection/selection.service';\nimport { IGroupByExpandState } from '../data-operations/groupby-expand-state.interface';\nimport { IGroupingState } from '../data-operations/groupby-state.interface';\nimport { IgxGridBaseDirective } from './grid-base.directive';\nimport { IgxGridComponent } from './grid/grid.component';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid/hierarchical-grid.component';\nimport { IPinningConfig } from './grid.common';\n\nexport interface IGridState {\n    columns?: IColumnState[];\n    filtering?: IFilteringExpressionsTree;\n    advancedFiltering?: IFilteringExpressionsTree;\n    paging?: IPagingState;\n    sorting?: ISortingExpression[];\n    groupBy?: IGroupingState;\n    cellSelection?: GridSelectionRange[];\n    rowSelection?: any[];\n    columnSelection?: string[];\n    rowPinning?: any[];\n    pinningConfig?: IPinningConfig;\n    expansion?: any[];\n    rowIslands?: IGridStateCollection[];\n    id?: string;\n}\n\nexport interface IGridStateCollection {\n    id: string;\n    parentRowID: any;\n    state: IGridState;\n}\n\nexport interface IGridStateOptions {\n    columns?: boolean;\n    filtering?: boolean;\n    advancedFiltering?: boolean;\n    sorting?: boolean;\n    groupBy?: boolean;\n    paging?: boolean;\n    cellSelection?: boolean;\n    rowSelection?: boolean;\n    columnSelection?: boolean;\n    rowPinning?: boolean;\n    pinningConfig?: boolean;\n    expansion?: boolean;\n    rowIslands?: boolean;\n}\n\nexport interface IColumnState {\n    pinned: boolean;\n    sortable: boolean;\n    filterable: boolean;\n    editable: boolean;\n    sortingIgnoreCase: boolean;\n    filteringIgnoreCase: boolean;\n    headerClasses: string;\n    headerGroupClasses: string;\n    maxWidth: string;\n    groupable: boolean;\n    movable: boolean;\n    hidden: boolean;\n    dataType: DataType;\n    hasSummary: boolean;\n    field: string;\n    width: any;\n    header: string;\n    resizable: boolean;\n    searchable: boolean;\n}\n\nexport type GridFeatures = keyof IGridStateOptions;\n\ninterface Feature {\n    getFeatureState: (context: IgxGridStateDirective) => IGridState;\n    restoreFeatureState: (context: IgxGridStateDirective, state: IColumnState[] | IPagingState | ISortingExpression[] |\n        IGroupingState | IFilteringExpressionsTree | GridSelectionRange[] | IPinningConfig | any[]) => void;\n}\n\n@Directive({\n    selector: '[igxGridState]'\n})\nexport class IgxGridStateDirective {\n\n    private featureKeys: GridFeatures[] = [];\n    private state: IGridState;\n    private currGrid: IgxGridBaseDirective;\n    private _options: IGridStateOptions = {\n        columns: true,\n        filtering: true,\n        advancedFiltering: true,\n        sorting: true,\n        groupBy: true,\n        paging: true,\n        cellSelection: true,\n        rowSelection: true,\n        columnSelection: true,\n        rowPinning: true,\n        expansion: true,\n        rowIslands: true\n    };\n    private FEATURES = {\n        sorting:  {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const sortingState = context.currGrid.sortingExpressions;\n                sortingState.forEach(s => {\n                    delete s.strategy;\n                    delete s.owner;\n                });\n                return { sorting: sortingState };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: ISortingExpression[]): void {\n                context.currGrid.sortingExpressions = state;\n            }\n        },\n        filtering: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const filteringState = context.currGrid.filteringExpressionsTree;\n                if (filteringState) {\n                    delete filteringState.owner;\n                    for (const item of filteringState.filteringOperands) {\n                        delete (item as IFilteringExpressionsTree).owner;\n                    }\n                }\n                return { filtering: filteringState };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: FilteringExpressionsTree): void {\n                const filterTree = context.createExpressionsTreeFromObject(state);\n                context.currGrid.filteringExpressionsTree = filterTree as FilteringExpressionsTree;\n            }\n        },\n        advancedFiltering: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const filteringState = context.currGrid.advancedFilteringExpressionsTree;\n                let advancedFiltering: any;\n                if (filteringState) {\n                    delete filteringState.owner;\n                    for (const item of filteringState.filteringOperands) {\n                        delete (item as IFilteringExpressionsTree).owner;\n                    }\n                    advancedFiltering = filteringState;\n                } else {\n                    advancedFiltering = {};\n                }\n                return { advancedFiltering: advancedFiltering };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: FilteringExpressionsTree): void {\n                const filterTree = context.createExpressionsTreeFromObject(state);\n                context.currGrid.advancedFilteringExpressionsTree = filterTree as FilteringExpressionsTree;\n            }\n        },\n        columns: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const gridColumns: IColumnState[] = context.currGrid.columns.map((c) => {\n                    return {\n                        pinned: c.pinned,\n                        sortable: c.sortable,\n                        filterable: c.filterable,\n                        editable: c.editable,\n                        sortingIgnoreCase: c.sortingIgnoreCase,\n                        filteringIgnoreCase: c.filteringIgnoreCase,\n                        headerClasses: c.headerClasses,\n                        headerGroupClasses: c.headerGroupClasses,\n                        maxWidth: c.maxWidth,\n                        groupable: c.groupable,\n                        movable: c.movable,\n                        hidden: c.hidden,\n                        dataType: c.dataType,\n                        hasSummary: c.hasSummary,\n                        field: c.field,\n                        width: c.width,\n                        header: c.header,\n                        resizable: c.resizable,\n                        searchable: c.searchable,\n                        selectable: c.selectable\n                    };\n                });\n                return { columns: gridColumns };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: IColumnState[]): void {\n                const newColumns = [];\n                const factory = context.resolver.resolveComponentFactory(IgxColumnComponent);\n                state.forEach((colState) => {\n                    const ref = factory.create(context.viewRef.injector);\n                    Object.assign(ref.instance, colState);\n                    ref.changeDetectorRef.detectChanges();\n                    newColumns.push(ref.instance);\n                });\n                context.currGrid.columnList.reset(newColumns);\n                context.currGrid.columnList.notifyOnChanges();\n            }\n        },\n        groupBy: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const grid = context.currGrid as IgxGridComponent;\n                const groupingExpressions = grid.groupingExpressions;\n                groupingExpressions.forEach(expr => {\n                    delete expr.strategy;\n                });\n                const expansionState = grid.groupingExpansionState;\n                const groupsExpanded = grid.groupsExpanded;\n\n                return { groupBy: { expressions: groupingExpressions, expansion: expansionState, defaultExpanded: groupsExpanded}  };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: IGroupingState): void {\n                const grid = context.currGrid as IgxGridComponent;\n                grid.groupingExpressions = state.expressions as IGroupingExpression[];\n                if (grid.groupsExpanded !== state.defaultExpanded) {\n                    grid.toggleAllGroupRows();\n                } else {\n                    grid.groupingExpansionState = state.expansion as IGroupByExpandState[];\n                }\n            }\n        },\n        paging: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const pagingState = context.currGrid.pagingState;\n                return { paging: pagingState };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: IPagingState): void {\n                if (context.currGrid.perPage !== state.recordsPerPage) {\n                    context.currGrid.perPage = state.recordsPerPage;\n                    context.currGrid.cdr.detectChanges();\n                }\n                context.currGrid.page = state.index;\n            }\n        },\n        rowSelection: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const selection = context.currGrid.selectedRows;\n                return { rowSelection: selection };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: any[]): void {\n                context.currGrid.selectRows(state);\n            }\n        },\n        cellSelection: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const selection = context.currGrid.getSelectedRanges().map(range => {\n                    return { rowStart: range.rowStart, rowEnd: range.rowEnd, columnStart: range.columnStart, columnEnd: range.columnEnd };\n                });\n                return { cellSelection: selection };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: GridSelectionRange[]): void {\n                state.forEach(r => {\n                    const range = { rowStart: r.rowStart, rowEnd: r.rowEnd, columnStart: r.columnStart, columnEnd: r.columnEnd};\n                    context.currGrid.selectRange(range);\n                });\n            }\n        },\n        columnSelection: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const selection = context.currGrid.selectedColumns().map(c => c.field);\n                return { columnSelection: selection };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: string[]): void {\n                context.currGrid.deselectAllColumns();\n                context.currGrid.selectColumns(state);\n            }\n        },\n        rowPinning: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const pinned = context.currGrid.pinnedRows.map(x => x.rowID);\n                return { rowPinning: pinned };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: any[]): void {\n                // clear current state.\n                context.currGrid.pinnedRows.forEach(row => row.unpin());\n                state.forEach(rowID => context.currGrid.pinRow(rowID));\n            }\n        },\n        pinningConfig: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                return { pinningConfig: context.currGrid.pinning };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: IPinningConfig): void {\n                context.currGrid.pinning = state;\n            }\n        },\n        expansion: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const expansionStates = Array.from(context.currGrid.expansionStates);\n                return { expansion: expansionStates };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: any[]): void {\n                const expansionStates = new Map<any, boolean>(state);\n                context.currGrid.expansionStates = expansionStates;\n            }\n        },\n        rowIslands: {\n            getFeatureState(context: IgxGridStateDirective): IGridState {\n                const childGridStates: IGridStateCollection[] = [];\n                const rowIslands = (context.currGrid as any).allLayoutList;\n                if (rowIslands) {\n                    rowIslands.forEach(rowIsland => {\n                        const childGrids = rowIsland.rowIslandAPI.getChildGrids();\n                        childGrids.forEach(chGrid => {\n                            const parentRowID = this.getParentRowID(chGrid);\n                            context.currGrid = chGrid;\n                            if (context.currGrid) {\n                                const childGridState = context.buildState(context.featureKeys) as IGridState;\n                                childGridStates.push({ id: `${rowIsland.id}`, parentRowID: parentRowID, state: childGridState });\n                            }\n                        });\n                    });\n                }\n                context.currGrid = context.grid;\n                return { rowIslands: childGridStates };\n            },\n            restoreFeatureState(context: IgxGridStateDirective, state: any): void {\n                const rowIslands = (context.currGrid as any).allLayoutList;\n                if (rowIslands) {\n                    rowIslands.forEach(rowIsland => {\n                        const childGrids = rowIsland.rowIslandAPI.getChildGrids();\n                        childGrids.forEach(chGrid => {\n                            const parentRowID = this.getParentRowID(chGrid);\n                            context.currGrid = chGrid;\n                            const childGridState = state.find(st => st.id === rowIsland.id && st.parentRowID === parentRowID);\n                            if (childGridState && context.currGrid) {\n                                context.restoreGridState(childGridState.state, context.featureKeys);\n                            }\n                        });\n                    });\n                }\n                context.currGrid = context.grid;\n            },\n            /**\n             * Traverses the hierarchy up to the root grid to return the ID of the expanded row.\n             */\n            getParentRowID(grid: IgxHierarchicalGridComponent) {\n                let childGrid, childRow;\n                while (grid.parent) {\n                    childRow = grid.childRow;\n                    childGrid = grid;\n                    grid = grid.parent;\n                }\n                return grid.hgridAPI.getParentRowId(childGrid);\n            }\n        }\n    };\n\n    /**\n     *  An object with options determining if a certain feature state should be saved.\n     * ```html\n     * <igx-grid [igxGridState]=\"options\"></igx-grid>\n     * ```\n     * ```typescript\n     * public options = {selection: false, advancedFiltering: false};\n     * ```\n     */\n    @Input('igxGridState')\n    public get options(): IGridStateOptions {\n       return this._options;\n    }\n\n    public set options(value: IGridStateOptions) {\n        Object.assign(this._options, value);\n        if (!(this.grid instanceof IgxGridComponent)) {\n            delete this._options.groupBy;\n        } else {\n            delete this._options.rowIslands;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    constructor(\n        @Host() @Optional() public grid: IgxGridBaseDirective,\n        private resolver: ComponentFactoryResolver,\n        private viewRef: ViewContainerRef) { }\n\n    /**\n     * Gets the state of a feature or states of all grid features, unless a certain feature is disabled through the `options` property.\n     * @param `serialize` determines whether the returned object will be serialized to JSON string. Default value is true.\n     * @param `feature` string or array of strings determining the features to be added in the state. If skipped, all features are added.\n     * @returns Returns the serialized to JSON string IGridState object, or the non-serialized IGridState object.\n     * ```html\n     * <igx-grid [igxGridState]=\"options\"></igx-grid>\n     * ```\n     * ```typescript\n     * @ViewChild(IgxGridStateDirective, { static: true }) public state;\n     * let state = this.state.getState(); // returns string\n     * let state = this.state(false) // returns `IGridState` object\n     * ```\n     */\n    public getState(serialize = true, features?: GridFeatures | GridFeatures[]): IGridState | string  {\n        let state: IGridState | string;\n        this.currGrid = this.grid;\n        this.state = state = this.buildState(features) as IGridState;\n        if (serialize) {\n            state = JSON.stringify(state, this.stringifyCallback) as string;\n        }\n        return state;\n    }\n\n    /**\n     * Restores grid features' state based on the IGridState object passed as an argument.\n     * @param IGridState object to restore state from.\n     * @returns\n     * ```html\n     * <igx-grid [igxGridState]=\"options\"></igx-grid>\n     * ```\n     * ```typescript\n     * @ViewChild(IgxGridStateDirective, { static: true }) public state;\n     * this.state.setState(gridState);\n     * ```\n     */\n    public setState(state: IGridState | string, features?: GridFeatures | GridFeatures[]) {\n        if (typeof state === 'string') {\n            state = JSON.parse(state) as IGridState;\n        }\n        this.currGrid = this.grid;\n        this.restoreGridState(state, features);\n        this.grid.cdr.detectChanges(); // TODO\n    }\n\n    /**\n     * Builds an IGridState object.\n     */\n    private buildState(keys?: GridFeatures | GridFeatures[]): IGridState {\n        this.applyFeatures(keys);\n        let gridState = {} as IGridState;\n        this.featureKeys.forEach(f => {\n            if (this.options[f]) {\n                if (!(this.grid instanceof IgxGridComponent) && f === 'groupBy') {\n                    return;\n                }\n                const feature = this.getFeature(f);\n                const featureState: IGridState = feature.getFeatureState(this);\n                gridState = Object.assign(gridState, featureState);\n            }\n        });\n        return gridState;\n    }\n\n    /**\n     * The method that calls corresponding methods to restore features from the passed IGridState object.\n     */\n    private restoreGridState(state: IGridState, features?: GridFeatures | GridFeatures[]) {\n        this.applyFeatures(features);\n        this.featureKeys.forEach(f => {\n            if (this.options[f]) {\n                const featureState = state[f];\n                if (featureState) {\n                    const feature = this.getFeature(f);\n                    feature.restoreFeatureState(this, featureState);\n                }\n            }\n        });\n    }\n\n    /**\n     * Returns a collection of all grid features.\n     */\n    private applyFeatures(keys?: GridFeatures | GridFeatures[]) {\n        this.featureKeys = [];\n        if (!keys) {\n            for (const key of Object.keys(this.options)) {\n                this.featureKeys.push(key as GridFeatures);\n            }\n        } else if (Array.isArray(keys)) {\n            this.featureKeys = [...keys as GridFeatures[]];\n        } else {\n            this.featureKeys.push(keys);\n        }\n    }\n\n    /**\n     * This method builds a FilteringExpressionsTree from a provided object.\n     */\n    private createExpressionsTreeFromObject(exprTreeObject: FilteringExpressionsTree): FilteringExpressionsTree {\n        if (!exprTreeObject || !exprTreeObject.filteringOperands) {\n            return null;\n        }\n\n        const expressionsTree = new FilteringExpressionsTree(exprTreeObject.operator, exprTreeObject.fieldName);\n\n        for (const item of exprTreeObject.filteringOperands) {\n            // Check if item is an expressions tree or a single expression.\n            if ((item as FilteringExpressionsTree).filteringOperands) {\n                const subTree = this.createExpressionsTreeFromObject((item as FilteringExpressionsTree));\n                expressionsTree.filteringOperands.push(subTree);\n            } else {\n                const expr = item as IFilteringExpression;\n                let dataType: string;\n                if (this.currGrid.columnList.length > 0) {\n                    dataType = this.currGrid.columnList.find(c => c.field === expr.fieldName).dataType;\n                } else {\n                    dataType = this.state.columns.find(c => c.field === expr.fieldName).dataType;\n                }\n                // when ESF, values are stored in Set.\n                // First those values are converted to an array before returning string in the stringifyCallback\n                // now we need to convert those back to Set\n                if (Array.isArray(expr.searchVal)) {\n                    expr.searchVal = new Set(expr.searchVal);\n                } else {\n                    expr.searchVal = (dataType === 'date') ? new Date(Date.parse(expr.searchVal)) : expr.searchVal;\n                }\n                expr.condition = this.generateFilteringCondition(dataType, expr.condition.name);\n                expressionsTree.filteringOperands.push(expr);\n            }\n        }\n\n        return expressionsTree;\n    }\n\n    /**\n     * Returns the filtering logic function for a given dataType and condition (contains, greaterThan, etc.)\n     */\n    private generateFilteringCondition(dataType: string, name: string): IFilteringOperation {\n        let filters;\n        switch (dataType) {\n            case DataType.Boolean:\n                filters = IgxBooleanFilteringOperand.instance();\n                break;\n            case DataType.Number:\n                filters = IgxNumberFilteringOperand.instance();\n                break;\n            case DataType.Date:\n                filters = IgxDateFilteringOperand.instance();\n                break;\n            case DataType.String:\n            default:\n                filters = IgxStringFilteringOperand.instance();\n                break;\n        }\n        return filters.condition(name);\n    }\n\n    private stringifyCallback(key: string, val: any) {\n        if (key === 'searchVal' && val instanceof Set) {\n            return Array.from(val);\n        }\n        return val;\n    }\n\n    private getFeature(key: string): Feature {\n        const feature: Feature = this.FEATURES[key];\n        return feature;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxGridStateDirective],\n    exports: [IgxGridStateDirective]\n})\nexport class IgxGridStateModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IgxButtonModule } from '../../directives/button/button.directive';\nimport { IgxDatePickerModule } from '../../date-picker/date-picker.component';\nimport { IgxIconModule } from '../../icon/public_api';\nimport { IgxRippleModule } from '../../directives/ripple/ripple.directive';\nimport { IgxInputGroupModule } from '../../input-group/public_api';\nimport { IgxFocusModule } from '../../directives/focus/focus.directive';\nimport { IgxToggleModule } from '../../directives/toggle/toggle.directive';\nimport { IgxForOfModule } from '../../directives/for-of/for_of.directive';\nimport { IgxTemplateOutletModule } from '../../directives/template-outlet/template_outlet.directive';\nimport { IgxTextHighlightModule } from '../../directives/text-highlight/text-highlight.directive';\nimport { IgxTextSelectionModule } from '../../directives/text-selection/text-selection.directive';\nimport { IgxCheckboxModule } from '../../checkbox/checkbox.component';\nimport { IgxBadgeModule } from '../../badge/badge.component';\nimport { IgxChipsModule } from '../../chips/chips.module';\nimport { IgxDragDropModule } from '../../directives/drag-drop/drag-drop.directive';\nimport { IgxButtonGroupModule } from '../../buttonGroup/buttonGroup.component';\nimport { IgxProgressBarModule } from '../../progressbar/progressbar.component';\nimport { IgxSelectModule } from '../../select/select.module';\nimport { IgxDropDownModule } from '../../drop-down/public_api';\nimport { IgxGridStateModule } from '../state.directive';\nimport { IgxSnackbarModule } from '../../snackbar/snackbar.component';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IgxButtonModule,\n        IgxDatePickerModule,\n        IgxIconModule,\n        IgxRippleModule,\n        IgxInputGroupModule,\n        IgxFocusModule,\n        IgxToggleModule,\n        IgxForOfModule,\n        IgxTemplateOutletModule,\n        IgxTextHighlightModule,\n        IgxTextSelectionModule,\n        IgxCheckboxModule,\n        IgxBadgeModule,\n        IgxChipsModule,\n        IgxDragDropModule,\n        IgxDropDownModule,\n        IgxButtonGroupModule,\n        IgxProgressBarModule,\n        IgxSelectModule,\n        IgxGridStateModule,\n        IgxSnackbarModule\n    ],\n    exports: [\n        CommonModule,\n        FormsModule,\n        IgxButtonModule,\n        IgxDatePickerModule,\n        IgxIconModule,\n        IgxRippleModule,\n        IgxInputGroupModule,\n        IgxFocusModule,\n        IgxToggleModule,\n        IgxForOfModule,\n        IgxTemplateOutletModule,\n        IgxTextHighlightModule,\n        IgxGridStateModule,\n        IgxTextSelectionModule,\n        IgxCheckboxModule,\n        IgxBadgeModule,\n        IgxChipsModule,\n        IgxDragDropModule,\n        IgxDropDownModule,\n        IgxButtonGroupModule,\n        IgxProgressBarModule,\n        IgxSelectModule,\n        IgxSnackbarModule\n    ]\n})\nexport class IgxGridSharedModules {}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridType } from '../common/grid.interface';\n\n@Pipe({\n    name: 'igxGridSummaryDataPipe',\n    pure: true\n})\nexport class IgxSummaryDataPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    transform(id: string, trigger: number = 0) {\n        const summaryService = this.gridAPI.grid.summaryService;\n        return summaryService.calculateSummaries(\n            summaryService.rootSummaryID,\n            this.gridAPI.get_summary_data()\n        );\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxSummaryCellComponent } from './summary-cell.component';\nimport { IgxSummaryRowComponent } from './summary-row.component';\nimport { IgxSummaryDataPipe } from './grid-root-summary.pipe';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxGridPipesModule } from '../common/grid-pipes.module';\n\n\n@NgModule({\n    declarations: [\n        IgxSummaryCellComponent,\n        IgxSummaryRowComponent,\n        IgxSummaryDataPipe\n    ],\n    imports: [\n        IgxGridPipesModule,\n        IgxGridSharedModules\n    ],\n    exports: [\n        IgxSummaryCellComponent,\n        IgxSummaryRowComponent,\n        IgxSummaryDataPipe\n    ]\n})\nexport class IgxGridSummaryModule {}\n","import { Directive } from '@angular/core';\nimport { IgxColumnComponent } from '../columns/column.component';\n\n@Directive()\nexport abstract class IgxColumnActionsBaseDirective {\n\n    /** @hidden @internal */\n    public actionEnabledColumnsFilter: (\n        value: IgxColumnComponent,\n        index: number,\n        array: IgxColumnComponent[]\n    ) => boolean;\n\n    /**\n     * @hidden @internal\n     */\n    public abstract get checkAllLabel(): string;\n\n    /**\n     * @hidden @internal\n     */\n    public abstract get uncheckAllLabel(): string;\n\n    /** @hidden @internal */\n    public abstract columnChecked(column: IgxColumnComponent): boolean;\n\n    /** @hidden @internal */\n    public abstract toggleColumn(column: IgxColumnComponent): void;\n\n    /** @hidden @internal */\n    public abstract uncheckAll(): void;\n\n    /** @hidden @internal */\n    public abstract checkAll(): void;\n\n    /** @hidden @internal */\n    public abstract get allChecked(): boolean;\n\n    /** @hidden @internal */\n    public abstract get allUnchecked(): boolean;\n}\n","import { Directive, Inject } from '@angular/core';\nimport { IgxColumnActionsBaseDirective } from './column-actions-base.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxColumnActionsComponent } from './column-actions.component';\nimport { IBaseEventArgs } from '../../core/utils';\n\nexport interface IColumnVisibilityChangedEventArgs extends IBaseEventArgs {\n    column: any;\n    newValue: boolean;\n}\n\n@Directive({\n    selector: '[igxColumnHiding]'\n})\nexport class IgxColumnHidingDirective extends IgxColumnActionsBaseDirective {\n\n    constructor(\n        @Inject(IgxColumnActionsComponent) protected columnActions: IgxColumnActionsComponent\n    ) {\n        super();\n        columnActions.actionsDirective = this;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get checkAllLabel(): string {\n        return this.columnActions.grid?.resourceStrings.igx_grid_hiding_check_all_label ?? 'Hide All';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get uncheckAllLabel(): string {\n        return this.columnActions.grid?.resourceStrings.igx_grid_hiding_uncheck_all_label ?? 'Show All';\n    }\n    /**\n     * @hidden @internal\n     */\n    public checkAll() {\n        this.columnActions.filteredColumns.forEach(c => c.hidden = true);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public uncheckAll() {\n        this.columnActions.filteredColumns.forEach(c => c.hidden = false);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public actionEnabledColumnsFilter = c => !c.disableHiding;\n\n    /**\n     * @hidden @internal\n     */\n    public columnChecked(column: IgxColumnComponent): boolean {\n        return !column.hidden;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public toggleColumn(column: IgxColumnComponent) {\n        column.hidden = !column.hidden;\n    }\n\n    public get allChecked() {\n        return this.columnActions.filteredColumns.every(col => this.columnChecked(col));\n    }\n\n    public get allUnchecked() {\n        return this.columnActions.filteredColumns.every(col => !this.columnChecked(col));\n    }\n}\n","import { Directive, Inject } from '@angular/core';\nimport { IgxColumnActionsBaseDirective } from './column-actions-base.directive';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxColumnActionsComponent } from './column-actions.component';\n\n@Directive({\n    selector: '[igxColumnPinning]'\n})\nexport class IgxColumnPinningDirective extends IgxColumnActionsBaseDirective {\n\n    constructor(\n        @Inject(IgxColumnActionsComponent) protected columnActions: IgxColumnActionsComponent\n    ) {\n        super();\n        columnActions.actionsDirective = this;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get checkAllLabel(): string {\n        return this.columnActions.grid?.resourceStrings.igx_grid_pinning_check_all_label ?? 'Pin All';\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get uncheckAllLabel(): string {\n        return this.columnActions.grid?.resourceStrings.igx_grid_pinning_uncheck_all_label ?? 'Unpin All';\n    }\n    /**\n     * @hidden @internal\n     */\n    public checkAll() {\n        this.columnActions.filteredColumns.forEach(c => c.pinned = true);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public uncheckAll() {\n        this.columnActions.filteredColumns.forEach(c => c.pinned = false);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public actionEnabledColumnsFilter = (c: IgxColumnComponent) => !c.disablePinning && !c.level;\n\n    /**\n     * @hidden @internal\n     */\n    public columnChecked(column: IgxColumnComponent): boolean {\n        return column.pinned;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public toggleColumn(column: IgxColumnComponent) {\n        column.pinned = !column.pinned;\n    }\n\n    public get allUnchecked() {\n        return !this.columnActions.filteredColumns.some(col => !this.columnChecked(col));\n    }\n\n    public get allChecked() {\n        return !this.columnActions.filteredColumns.some(col => this.columnChecked(col));\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxColumnHidingDirective } from './column-hiding.directive';\nimport { IgxColumnPinningDirective } from './column-pinning.directive';\nimport { IgxColumnActionsComponent } from './column-actions.component';\nimport { IgxGridPipesModule } from '../common/grid-pipes.module';\n\n@NgModule({\n    declarations: [\n        IgxColumnHidingDirective,\n        IgxColumnPinningDirective,\n        IgxColumnActionsComponent,\n    ],\n    imports: [\n        IgxGridSharedModules,\n        IgxGridPipesModule\n    ],\n    exports: [\n        IgxColumnHidingDirective,\n        IgxColumnPinningDirective,\n        IgxColumnActionsComponent\n    ]\n})\nexport class IgxColumnActionsModule {}\n","import { Component, Host } from '@angular/core';\nimport { IgxGridToolbarComponent } from './grid-toolbar.component';\n\n\n/**\n * Provides a pre-configured button to open the advanced filtering dialog of the grid.\n *\n *\n * @igxModule IgxGridToolbarModule\n * @igxParent IgxGridToolbarComponent\n *\n * @example\n * ```html\n * <igx-grid-toolbar-advanced-filtering></igx-grid-toolbar-advanced-filtering>\n * <igx-grid-toolbar-advanced-filtering>Custom text</igx-grid-toolbar-advanced-filtering>\n * ```\n */\n@Component({\n    selector: 'igx-grid-toolbar-advanced-filtering',\n    templateUrl: './grid-toolbar-advanced-filtering.component.html'\n})\nexport class IgxGridToolbarAdvancedFilteringComponent {\n\n    /**\n     * Returns the grid containing this component.\n     */\n    get grid() {\n        return this.toolbar.grid;\n    }\n\n    constructor(@Host() private toolbar: IgxGridToolbarComponent) { }\n}\n","import { Directive, Host, Input } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { IgxToggleDirective } from '../../directives/toggle/toggle.directive';\nimport {\n    AbsoluteScrollStrategy,\n    ConnectedPositioningStrategy,\n    HorizontalAlignment,\n    OverlaySettings,\n    PositionSettings,\n    VerticalAlignment\n} from '../../services/public_api';\nimport { IgxColumnActionsComponent } from '../column-actions/column-actions.component';\nimport { IgxGridToolbarComponent } from './grid-toolbar.component';\n\n\n/**\n * Base class for the pinning/hiding column actions.\n * @hidden @internal\n */\n@Directive()\nexport abstract class BaseToolbarDirective {\n\n    /**\n     * Sets the height of the column list in the dropdown.\n     */\n    @Input()\n    public columnListHeight: string;\n\n    /**\n     * Title text for the column action component\n     */\n    @Input()\n    public title: string;\n\n    /**\n     * The placeholder text for the search input.\n     */\n    @Input()\n    public prompt: string;\n\n    /**\n     * Returns the grid containing this component.\n     */\n    public get grid() {\n        return this.toolbar.grid;\n    }\n\n    constructor(@Host() protected toolbar: IgxGridToolbarComponent) { }\n\n    /** @hidden @internal */\n    public toggle(anchorElement: HTMLElement, toggleRef: IgxToggleDirective, actions?: IgxColumnActionsComponent): void {\n        if (actions) {\n            const setHeight = () => actions.columnsAreaMaxHeight = this.columnListHeight ?? `${Math.max(this.grid.calcHeight, 200)}px`;\n            toggleRef.onOpening.pipe(first()).subscribe(setHeight);\n        }\n        toggleRef.toggle({ ..._makeOverlaySettings(), ...{ target: anchorElement, outlet: this.grid.outlet,\n            excludeFromOutsideClick: [anchorElement] }});\n    }\n\n    /** @hidden @internal */\n    public focusSearch(columnActions: HTMLElement) {\n        columnActions.querySelector('input')?.focus();\n    }\n}\n\n\nfunction _makeOverlaySettings(): OverlaySettings {\n    const positionSettings: PositionSettings = {\n        horizontalDirection: HorizontalAlignment.Left,\n        horizontalStartPoint: HorizontalAlignment.Right,\n        verticalDirection: VerticalAlignment.Bottom,\n        verticalStartPoint: VerticalAlignment.Bottom\n    };\n    return {\n        positionStrategy: new ConnectedPositioningStrategy(positionSettings),\n        scrollStrategy: new AbsoluteScrollStrategy(),\n        modal: false,\n        closeOnEscape: true,\n        closeOnOutsideClick: true\n    };\n}\n","import { Component, ContentChild, Input, Output, EventEmitter, Optional, Host } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { BaseToolbarDirective } from './grid-toolbar.base';\nimport { IgxGridToolbarComponent } from './grid-toolbar.component';\nimport { IgxExcelTextDirective, IgxCSVTextDirective } from './common';\nimport {\n    CsvFileTypes,\n    IgxBaseExporter,\n    IgxCsvExporterOptions,\n    IgxCsvExporterService,\n    IgxExcelExporterOptions,\n    IgxExcelExporterService\n} from '../../services/public_api';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxToggleDirective } from '../../directives/toggle/toggle.directive';\n\n\nexport type IgxExporterOptions = IgxCsvExporterOptions | IgxExcelExporterOptions;\n\n\nexport interface IgxExporterEvent {\n    exporter: IgxBaseExporter;\n    options: IgxExporterOptions;\n    grid: IgxGridBaseDirective;\n    cancel: boolean;\n}\n\n/**\n * Provides a pre-configured exporter component for the grid.\n *\n * @remarks\n * This component still needs the actual exporter service(s) provided in the DI chain\n * in order to export something.\n *\n * @igxModule IgxGridToolbarModule\n * @igxParent IgxGridToolbarComponent\n *\n */\n@Component({\n    selector: 'igx-grid-toolbar-exporter',\n    templateUrl: './grid-toolbar-exporter.component.html'\n})\nexport class IgxGridToolbarExporterComponent extends BaseToolbarDirective {\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChild(IgxExcelTextDirective)\n    public hasExcelAttr: IgxExcelTextDirective;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ContentChild(IgxCSVTextDirective)\n    public hasCSVAttr: IgxCSVTextDirective;\n\n    /**\n     * Returns whether the CSV exporter service is available in the DI chain.\n     */\n    public get hasCsvExporter() {\n        return !!this.csvExporter;\n    }\n\n    /**\n     * Returns whether the Excel exporter service is available in the DI chain.\n     */\n    public get hasExcelExporter() {\n        return !!this.excelExporter;\n    }\n\n    /**\n     * Show entry for CSV export.\n     */\n    @Input()\n    public exportCSV = true;\n\n    /**\n     * Show entry for Excel export.\n     */\n    @Input()\n    public exportExcel = true;\n\n    /**\n     * The name for the exported file.\n     */\n    @Input()\n    public filename = 'ExportedData';\n\n    /**\n     * Indicates whether there is an export in progress.\n     */\n    public isExporting = false;\n\n    /**\n     * Emitted when starting an export operation. Re-emitted additionally\n     * by the grid itself.\n     */\n    @Output()\n    public exportStarted = new EventEmitter<IgxExporterEvent>();\n\n    /**\n     * Emitted on successful ending of an export operation.\n     */\n    @Output()\n    public exportEnded = new EventEmitter<void>();\n\n    constructor(\n        @Host() protected toolbar: IgxGridToolbarComponent,\n        @Optional() private excelExporter: IgxExcelExporterService,\n        @Optional() private csvExporter: IgxCsvExporterService,\n    ) {\n        super(toolbar);\n    }\n\n    public export(type: 'excel' | 'csv', toggleRef?: IgxToggleDirective): void {\n        let options: IgxExporterOptions;\n        let exporter: IgxBaseExporter;\n\n        toggleRef?.close();\n\n        switch (type) {\n            case 'csv':\n                options = new IgxCsvExporterOptions(this.filename, CsvFileTypes.CSV);\n                exporter = this.csvExporter;\n                break;\n            case 'excel':\n                options = new IgxExcelExporterOptions(this.filename);\n                exporter = this.excelExporter;\n        }\n\n        const args = { exporter, options, grid: this.grid, cancel: false } as IgxExporterEvent;\n\n        this.exportStarted.emit(args);\n        this.grid.onToolbarExporting.emit(args);\n        this.isExporting = true;\n        this.toolbar.showProgress = true;\n\n        if (args.cancel) {\n            return;\n        }\n\n        exporter.onExportEnded.pipe(first()).subscribe(() => {\n            this.exportEnded.emit();\n            this.isExporting = false;\n            this.toolbar.showProgress = false;\n        });\n\n        exporter.export(this.grid, options);\n    }\n}\n","import { Component } from '@angular/core';\nimport { BaseToolbarDirective } from './grid-toolbar.base';\n\n\n/**\n * Provides a pre-configured column hiding component for the grid.\n *\n *\n * @igxModule IgxGridToolbarModule\n * @igxParent IgxGridToolbarComponent\n *\n * @example\n * ```html\n *  <igx-grid-toolbar-hiding></igx-grid-toolbar-hiding>\n * ```\n */\n@Component({\n    selector: 'igx-grid-toolbar-hiding',\n    templateUrl: './grid-toolbar-hiding.component.html'\n})\nexport class IgxGridToolbarHidingComponent extends BaseToolbarDirective { }\n","import { Component } from '@angular/core';\nimport { BaseToolbarDirective } from './grid-toolbar.base';\n\n/**\n * Provides a pre-configured column pinning component for the grid.\n *\n *\n * @igxModule IgxGridToolbarModule\n * @igxParent IgxGridToolbarComponent\n *\n * @example\n * ```html\n *  <igx-grid-toolbar-pinning></igx-grid-toolbar-pinning>\n * ```\n */\n@Component({\n    selector: 'igx-grid-toolbar-pinning',\n    templateUrl: './grid-toolbar-pinning.component.html'\n})\nexport class IgxGridToolbarPinningComponent extends BaseToolbarDirective { }\n","import { NgModule } from '@angular/core';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxColumnActionsModule } from '../column-actions/column-actions.module';\nimport { IgxGridToolbarComponent } from './grid-toolbar.component';\nimport { IgxGridToolbarAdvancedFilteringComponent } from './grid-toolbar-advanced-filtering.component';\nimport { IgxGridToolbarExporterComponent } from './grid-toolbar-exporter.component';\nimport { IgxGridToolbarHidingComponent } from './grid-toolbar-hiding.component';\nimport { IgxGridToolbarPinningComponent } from './grid-toolbar-pinning.component';\nimport {\n    IgxCSVTextDirective,\n    IgxExcelTextDirective,\n    IgxGridToolbarActionsDirective,\n    IgxGridToolbarDirective,\n    IgxGridToolbarTitleDirective\n} from './common';\n\n\n\n@NgModule({\n    declarations: [\n        IgxCSVTextDirective,\n        IgxExcelTextDirective,\n        IgxGridToolbarActionsDirective,\n        IgxGridToolbarAdvancedFilteringComponent,\n        IgxGridToolbarComponent,\n        IgxGridToolbarExporterComponent,\n        IgxGridToolbarHidingComponent,\n        IgxGridToolbarPinningComponent,\n        IgxGridToolbarTitleDirective,\n        IgxGridToolbarDirective\n    ],\n    imports: [\n        IgxColumnActionsModule,\n        IgxGridSharedModules\n    ],\n    exports: [\n        IgxCSVTextDirective,\n        IgxExcelTextDirective,\n        IgxGridToolbarActionsDirective,\n        IgxGridToolbarAdvancedFilteringComponent,\n        IgxGridToolbarComponent,\n        IgxGridToolbarExporterComponent,\n        IgxGridToolbarHidingComponent,\n        IgxGridToolbarPinningComponent,\n        IgxGridToolbarTitleDirective,\n        IgxGridToolbarDirective\n    ]\n})\nexport class IgxGridToolbarModule {}\n","import {\n    AfterContentInit,\n    Component,\n    ChangeDetectionStrategy,\n    forwardRef,\n    Input\n} from '@angular/core';\nimport { IgxColumnComponent } from './column.component';\nimport { IgxColumnGroupComponent } from './column-group.component';\n\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [{ provide: IgxColumnComponent, useExisting: forwardRef(() => IgxColumnLayoutComponent) }],\n    selector: 'igx-column-layout',\n    template: ``\n})\nexport class IgxColumnLayoutComponent extends IgxColumnGroupComponent implements AfterContentInit {\n    public childrenVisibleIndexes = [];\n    /**\n     * Gets the width of the column layout.\n     * ```typescript\n     * let columnGroupWidth = this.columnGroup.width;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    get width(): any {\n        const width = this.getFilledChildColumnSizes(this.children).reduce((acc, val) => acc + parseInt(val, 10), 0);\n        return width;\n    }\n\n    set width(val: any) { }\n\n    get columnLayout() {\n        return true;\n    }\n\n    /**\n     * @hidden\n     */\n    public getCalcWidth(): any {\n        let borderWidth = 0;\n\n        if (this.headerGroup && this.headerGroup.hasLastPinnedChildColumn) {\n            const headerStyles = this.grid.document.defaultView.getComputedStyle(this.headerGroup.element.nativeElement.children[0]);\n            borderWidth = parseInt(headerStyles.borderRightWidth, 10);\n        }\n\n        return super.getCalcWidth() + borderWidth;\n    }\n\n    /**\n     * Gets the column visible index.\n     * If the column is not visible, returns `-1`.\n     * ```typescript\n     * let visibleColumnIndex =  this.column.visibleIndex;\n     * ```\n     * @memberof IgxColumnComponent\n     */\n    get visibleIndex(): number {\n        if (!isNaN(this._vIndex)) {\n            return this._vIndex;\n        }\n\n        const unpinnedColumns = this.grid.unpinnedColumns.filter(c => c.columnLayout && !c.hidden);\n        const pinnedColumns = this.grid.pinnedColumns.filter(c => c.columnLayout && !c.hidden);\n        let vIndex = -1;\n\n        if (!this.pinned) {\n            const indexInCollection = unpinnedColumns.indexOf(this);\n            vIndex = indexInCollection === -1 ? -1 : pinnedColumns.length + indexInCollection;\n        } else {\n            vIndex = pinnedColumns.indexOf(this);\n        }\n        this._vIndex = vIndex;\n        return vIndex;\n    }\n\n    /*\n     * Gets whether the column layout is hidden.\n     * ```typescript\n     * let isHidden = this.columnGroup.hidden;\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    @Input()\n    get hidden() {\n        return this._hidden;\n    }\n\n    /**\n     * Sets the column layout hidden property.\n     * ```typescript\n     * <igx-column-layout [hidden] = \"true\"></igx-column->\n     * ```\n     * @memberof IgxColumnGroupComponent\n     */\n    set hidden(value: boolean) {\n        this._hidden = value;\n        this.children.forEach(child => child.hidden = value);\n        if (this.grid && this.grid.columns && this.grid.columns.length > 0) {\n            // reset indexes in case columns are hidden/shown runtime\n            const columns = this.grid && this.grid.pinnedColumns && this.grid.unpinnedColumns ?\n            this.grid.pinnedColumns.concat(this.grid.unpinnedColumns) : [];\n            if (!this._hidden && !columns.find(c => c.field === this.field)) {\n                this.grid.resetColumnCollections();\n            }\n            this.grid.columns.filter(x => x.columnLayout).forEach(x => x.populateVisibleIndexes());\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterContentInit() {\n        super.ngAfterContentInit();\n        if (!this.hidden) {\n            this.hidden = this.allChildren.some(x => x.hidden);\n        } else {\n            this.children.forEach(child => child.hidden = this.hidden);\n        }\n\n        this.children.forEach(child => {\n            child.movable = false;\n        });\n    }\n\n    /*\n     * Gets whether the group contains the last pinned child column of the column layout.\n     * ```typescript\n     * let columsHasLastPinned = this.columnLayout.hasLastPinnedChildColumn;\n     * ```\n     * @memberof IgxColumnLayoutComponent\n     */\n    get hasLastPinnedChildColumn() {\n        return this.children.some(child => child.isLastPinned);\n    }\n\n    /*\n     * Gets whether the group contains the first pinned child column of the column layout.\n     * ```typescript\n     * let hasFirstPinnedChildColumn = this.columnLayout.hasFirstPinnedChildColumn;\n     * ```\n     * @memberof IgxColumnLayoutComponent\n     */\n    get hasFirstPinnedChildColumn() {\n        return this.children.some(child => child.isFirstPinned);\n    }\n\n    /**\n     * @hidden\n     */\n    public populateVisibleIndexes() {\n        this.childrenVisibleIndexes = [];\n        const grid = this.gridAPI.grid;\n        const columns = grid && grid.pinnedColumns && grid.unpinnedColumns ? grid.pinnedColumns.concat(grid.unpinnedColumns) : [];\n        const orderedCols = columns\n            .filter(x => !x.columnGroup && !x.hidden)\n            .sort((a, b) => a.rowStart - b.rowStart || columns.indexOf(a.parent) - columns.indexOf(b.parent) || a.colStart - b.colStart);\n        this.children.forEach(child => {\n            const rs = child.rowStart || 1;\n            let vIndex = 0;\n            // filter out all cols with larger rowStart\n            const cols = orderedCols.filter(c =>\n                !c.columnGroup && (c.rowStart || 1) <= rs);\n            vIndex = cols.indexOf(child);\n            this.childrenVisibleIndexes.push({ column: child, index: vIndex });\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxColumnComponent } from './column.component';\nimport { IgxColumnGroupComponent } from './column-group.component';\nimport { IgxColumnLayoutComponent } from './column-layout.component';\nimport {\n    IgxCellEditorTemplateDirective,\n    IgxCellFooterTemplateDirective,\n    IgxCellHeaderTemplateDirective,\n    IgxCellTemplateDirective,\n    IgxCollapsibleIndicatorTemplateDirective,\n    IgxFilterCellTemplateDirective\n} from './templates.directive';\n\n\n@NgModule({\n    declarations: [\n        IgxFilterCellTemplateDirective,\n        IgxCellTemplateDirective,\n        IgxCellHeaderTemplateDirective,\n        IgxCellFooterTemplateDirective,\n        IgxCellEditorTemplateDirective,\n        IgxCollapsibleIndicatorTemplateDirective,\n        IgxColumnComponent,\n        IgxColumnGroupComponent,\n        IgxColumnLayoutComponent\n    ],\n    entryComponents: [\n        IgxColumnComponent,\n        IgxColumnGroupComponent,\n        IgxColumnLayoutComponent\n    ],\n    exports: [\n        IgxFilterCellTemplateDirective,\n        IgxCellTemplateDirective,\n        IgxCellHeaderTemplateDirective,\n        IgxCellFooterTemplateDirective,\n        IgxCellEditorTemplateDirective,\n        IgxCollapsibleIndicatorTemplateDirective,\n        IgxColumnComponent,\n        IgxColumnGroupComponent,\n        IgxColumnLayoutComponent\n    ]\n})\nexport class IgxGridColumnModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridFilteringCellComponent } from './grid-filtering-cell.component';\nimport { IgxGridFilteringRowComponent } from './grid-filtering-row.component';\nimport { IgxGridSharedModules } from '../../common/shared.module';\nimport { IgxGridPipesModule } from '../../common/grid-pipes.module';\n\n\n@NgModule({\n    declarations: [\n        IgxGridFilteringCellComponent,\n        IgxGridFilteringRowComponent\n    ],\n    imports: [\n        IgxGridSharedModules,\n        IgxGridPipesModule\n    ],\n    exports: [\n        IgxGridFilteringCellComponent,\n        IgxGridFilteringRowComponent\n    ]\n})\nexport class IgxGridFilteringModule {}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\n\n@Pipe({\n  name: 'sortingIndex',\n  pure: true\n})\nexport class SortingIndexPipe implements PipeTransform {\n\n  transform(columnField: string, sortingExpressions: ISortingExpression[]): number {\n    let sortIndex = sortingExpressions.findIndex(expression => expression.fieldName === columnField);\n    return sortIndex !== -1 ? ++sortIndex : null;\n  }\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { IgxGridHeaderComponent } from './grid-header.component';\nimport { IgxGridHeaderGroupComponent } from './grid-header-group.component';\nimport { IgxGridSharedModules } from '../common/shared.module';\nimport { IgxColumnMovingModule } from '../moving/moving.module';\nimport { IgxGridFilteringModule } from '../filtering/base/filtering.module';\nimport { IgxGridResizingModule } from '../resizing/resize.module';\nimport { SortingIndexPipe } from './sorting-index.pipe';\n\n@NgModule({\n    declarations: [\n        IgxGridHeaderComponent,\n        IgxGridHeaderGroupComponent,\n        SortingIndexPipe\n    ],\n    imports: [\n        IgxGridSharedModules,\n        IgxGridFilteringModule,\n        IgxColumnMovingModule,\n        IgxGridResizingModule\n    ],\n    exports: [\n        IgxGridHeaderComponent,\n        IgxGridHeaderGroupComponent\n    ]\n})\nexport class IgxGridHeadersModule {}\n","import { NgModule } from '@angular/core';\nimport { IgxGridCellComponent } from './cell.component';\nimport { IgxGridFooterComponent } from './grid-footer/grid-footer.component';\nimport {\n    IgxGridBodyDirective\n} from './grid.common';\nimport { IgxGridTransaction } from './grid-base.directive';\nimport { IgxBaseTransactionService } from '../services/transaction/base-transaction';\nimport {\n    IgxRowEditTemplateDirective,\n    IgxRowEditActionsDirective,\n    IgxRowEditTextDirective,\n    IgxRowEditTabStopDirective\n} from './grid.rowEdit.directive';\nimport { IgxPaginatorModule } from '../paginator/paginator.component';\nimport { IgxGridPipesModule } from './common/grid-pipes.module';\nimport { IgxGridExcelStyleFilteringModule } from './filtering/excel-style/grid.excel-style-filtering.module';\nimport { IgxRowDragModule } from './row-drag.directive';\nimport { IgxAdvancedFilteringDialogComponent } from './filtering/advanced-filtering/advanced-filtering-dialog.component';\nimport { IgxGridSelectionModule } from './selection/selection.module';\nimport { IgxGridResizingModule } from './resizing/resize.module';\nimport { IgxColumnMovingModule } from './moving/moving.module';\nimport { IgxGridSharedModules } from './common/shared.module';\nimport { IgxGridSummaryModule } from './summaries/summary.module';\nimport { IgxGridToolbarModule } from './toolbar/toolbar.module';\nimport { IgxColumnActionsModule } from './column-actions/column-actions.module';\nimport { IgxGridColumnModule } from './columns/column.module';\nimport { IgxGridHeadersModule } from './headers/headers.module';\nimport { IgxGridFilteringModule } from './filtering/base/filtering.module';\nimport { IgxRowDirective } from './row.directive';\nimport {\n    IgxExcelStyleHeaderIconDirective,\n    IgxHeaderCollapseIndicatorDirective,\n    IgxHeaderExpandIndicatorDirective,\n    IgxRowCollapsedIndicatorDirective,\n    IgxRowExpandedIndicatorDirective\n} from './grid/grid.directives';\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxRowDirective,\n        IgxGridCellComponent,\n        IgxRowEditTemplateDirective,\n        IgxRowEditActionsDirective,\n        IgxRowEditTextDirective,\n        IgxRowEditTabStopDirective,\n        IgxGridBodyDirective,\n        IgxGridFooterComponent,\n        IgxAdvancedFilteringDialogComponent,\n        IgxRowExpandedIndicatorDirective,\n        IgxRowCollapsedIndicatorDirective,\n        IgxHeaderExpandIndicatorDirective,\n        IgxHeaderCollapseIndicatorDirective,\n        IgxExcelStyleHeaderIconDirective,\n    ],\n    entryComponents: [\n        IgxAdvancedFilteringDialogComponent\n    ],\n    exports: [\n        IgxGridCellComponent,\n        IgxRowEditTemplateDirective,\n        IgxRowEditActionsDirective,\n        IgxRowEditTextDirective,\n        IgxRowEditTabStopDirective,\n        IgxGridBodyDirective,\n        IgxColumnActionsModule,\n        IgxGridColumnModule,\n        IgxGridHeadersModule,\n        IgxGridPipesModule,\n        IgxGridFilteringModule,\n        IgxGridExcelStyleFilteringModule,\n        IgxRowDragModule,\n        IgxPaginatorModule,\n        IgxGridFooterComponent,\n        IgxGridResizingModule,\n        IgxColumnMovingModule,\n        IgxGridSelectionModule,\n        IgxGridSummaryModule,\n        IgxGridToolbarModule,\n        IgxAdvancedFilteringDialogComponent,\n        IgxGridSharedModules,\n        IgxRowExpandedIndicatorDirective,\n        IgxRowCollapsedIndicatorDirective,\n        IgxHeaderExpandIndicatorDirective,\n        IgxHeaderCollapseIndicatorDirective,\n        IgxExcelStyleHeaderIconDirective,\n    ],\n    imports: [\n        IgxGridColumnModule,\n        IgxGridHeadersModule,\n        IgxColumnMovingModule,\n        IgxGridResizingModule,\n        IgxGridSelectionModule,\n        IgxGridSummaryModule,\n        IgxGridToolbarModule,\n        IgxColumnActionsModule,\n        IgxGridPipesModule,\n        IgxGridFilteringModule,\n        IgxGridExcelStyleFilteringModule,\n        IgxRowDragModule,\n        IgxPaginatorModule,\n        IgxGridSharedModules\n    ],\n    providers: [\n        { provide: IgxGridTransaction, useClass: IgxBaseTransactionService }\n    ]\n})\nexport class IgxGridCommonModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { cloneArray } from '../../core/utils';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { IGroupByExpandState } from '../../data-operations/groupby-expand-state.interface';\nimport { IGroupByResult } from '../../data-operations/grouping-result.interface';\nimport { IFilteringExpressionsTree, FilteringExpressionsTree } from '../../data-operations/filtering-expressions-tree';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\nimport { IgxGridAPIService } from './grid-api.service';\nimport { IgxGridComponent } from './grid.component';\nimport { IGroupingExpression } from '../../data-operations/grouping-expression.interface';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridType } from '../common/grid.interface';\nimport { IFilteringStrategy } from '../../data-operations/filtering-strategy';\nimport { IGridSortingStrategy } from '../../data-operations/sorting-strategy';\nimport { GridPagingMode } from '../common/enums';\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridSort',\n    pure: true\n})\nexport class IgxGridSortingPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n\n    public transform(collection: any[], expressions: ISortingExpression[], sorting: IGridSortingStrategy,\n        id: string, pipeTrigger: number, pinned?): any[] {\n        const grid = this.gridAPI.grid;\n        let result: any[];\n\n        if (!expressions.length) {\n            result = collection;\n        } else {\n            result = DataUtil.sort(cloneArray(collection), expressions, sorting, grid);\n        }\n        grid.setFilteredSortedData(result, pinned);\n\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridGroupBy',\n    pure: true\n})\nexport class IgxGridGroupingPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n\n    public transform(collection: any[], expression: IGroupingExpression | IGroupingExpression[],\n        expansion: IGroupByExpandState | IGroupByExpandState[], defaultExpanded: boolean,\n        id: string, groupsRecords: any[], pipeTrigger: number): IGroupByResult {\n\n        const state = { expressions: [], expansion: [], defaultExpanded };\n        const grid: IgxGridComponent = this.gridAPI.grid;\n        state.expressions = grid.groupingExpressions;\n        let result: IGroupByResult;\n        const fullResult: IGroupByResult = { data: [], metadata: [] };\n\n        if (!state.expressions.length) {\n            // empty the array without changing reference\n            groupsRecords.splice(0, groupsRecords.length);\n            result = {\n                data: collection,\n                metadata: collection\n            };\n        } else {\n            state.expansion = grid.groupingExpansionState;\n            state.defaultExpanded = grid.groupsExpanded;\n            result = DataUtil.group(cloneArray(collection), state, grid, groupsRecords, fullResult);\n        }\n        grid.groupingFlatResult = result.data;\n        grid.groupingResult = fullResult.data;\n        grid.groupingMetadata = fullResult.metadata;\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridPaging',\n    pure: true\n})\nexport class IgxGridPagingPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    public transform(collection: IGroupByResult, page = 0, perPage = 15, id: string, pipeTrigger: number): IGroupByResult {\n        if (!this.gridAPI.grid.paging || this.gridAPI.grid.pagingMode !== GridPagingMode.local) {\n            return collection;\n        }\n        const state = {\n            index: page,\n            recordsPerPage: perPage\n        };\n        const total = this.gridAPI.grid._totalRecords >= 0 ? this.gridAPI.grid._totalRecords : collection.data.length;\n        DataUtil.correctPagingState(state, total);\n\n        const result = {\n            data: DataUtil.page(cloneArray(collection.data), state, total),\n            metadata: DataUtil.page(cloneArray(collection.metadata), state, total)\n        };\n        if (this.gridAPI.grid.page !== state.index) {\n            this.gridAPI.grid.page = state.index;\n        }\n        this.gridAPI.grid.pagingState = state;\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridFiltering',\n    pure: true\n})\nexport class IgxGridFilteringPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) { }\n\n    public transform(collection: any[], expressionsTree: IFilteringExpressionsTree,\n        filterStrategy: IFilteringStrategy,\n        advancedExpressionsTree: IFilteringExpressionsTree, id: string, pipeTrigger: number, filteringPipeTrigger: number, pinned?) {\n        const grid = this.gridAPI.grid;\n        const state = {\n            expressionsTree: expressionsTree,\n            strategy: filterStrategy,\n            advancedExpressionsTree: advancedExpressionsTree\n        };\n\n        if (FilteringExpressionsTree.empty(state.expressionsTree) && FilteringExpressionsTree.empty(state.advancedExpressionsTree)) {\n            return collection;\n        }\n\n        const result = DataUtil.filter(cloneArray(collection), state, grid);\n        grid.setFilteredData(result, pinned);\n        return result;\n    }\n}\n","import { Component, forwardRef, ChangeDetectionStrategy, HostBinding } from '@angular/core';\nimport { IgxGridComponent } from './grid.component';\nimport { IgxRowDirective } from '../row.directive';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-grid-row',\n    templateUrl: './grid-row.component.html',\n    providers: [{ provide: IgxRowDirective, useExisting: forwardRef(() => IgxGridRowComponent) }]\n})\nexport class IgxGridRowComponent extends IgxRowDirective<IgxGridComponent> {\n\n    @HostBinding('class.igx-grid__tr--mrl')\n    get hasColumnLayouts(): boolean {\n        return this.grid.hasColumnLayouts;\n    }\n\n    getContext(col, row) {\n        return {\n            $implicit: col,\n            row: row\n        };\n    }\n\n    get mrlRightPinnedOffset(): string {\n        return !this.grid.isPinningToStart ?\n            - this.grid.pinnedWidth - this.grid.headerFeaturesWidth + 'px' :\n            null;\n    }\n\n    getContextMRL(pinnedCols, row) {\n        return {\n            $implicit: pinnedCols,\n            row: row\n        };\n    }\n\n    get expanded() {\n        return this.gridAPI.get_row_expansion_state(this.rowData);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IgxGridAPIService } from './grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { IgxGridComponent } from './grid.component';\nimport { ISummaryRecord } from '../summaries/grid-summary';\nimport { IGroupByRecord } from '../../data-operations/groupby-record.interface';\nimport { IGroupByResult } from '../../data-operations/grouping-result.interface';\nimport { GridSummaryCalculationMode, GridSummaryPosition } from '../common/enums';\nimport { GridType } from '../common/grid.interface';\n\n/** @hidden */\ninterface ISkipRecord {\n    skip?: boolean;\n}\n\n/** @hidden */\n@Pipe({\n    name: 'gridSummary',\n    pure: true\n})\nexport class IgxGridSummaryPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n\n    public transform(collection: IGroupByResult,\n        hasSummary: boolean,\n        summaryCalculationMode: GridSummaryCalculationMode,\n        summaryPosition: GridSummaryPosition,\n        id: string, showSummary, pipeTrigger: number, summaryPipeTrigger: number): any[] {\n\n        if (!collection.data || !hasSummary || summaryCalculationMode === GridSummaryCalculationMode.rootLevelOnly) {\n            return collection.data;\n        }\n\n        return this.addSummaryRows(id, collection, summaryPosition, showSummary);\n    }\n\n    private addSummaryRows(gridId: string, collection: IGroupByResult, summaryPosition: GridSummaryPosition, showSummary): any[] {\n        const recordsWithSummary = [];\n        const lastChildMap = new Map<any, IGroupByRecord[]>();\n        const grid: IgxGridComponent = this.gridAPI.grid;\n        const maxSummaryHeight = grid.summaryService.calcMaxSummaryHeight();\n\n        if (collection.metadata.length && !grid.isGroupByRecord(collection.data[0]) &&\n            grid.isGroupByRecord(collection.metadata[0]) && summaryPosition === GridSummaryPosition.bottom) {\n            const groups: Array<IGroupByRecord & ISkipRecord> = [];\n            groups.push(collection.metadata[0]);\n            while (groups[groups.length - 1].groupParent) {\n                groups.push(groups[groups.length - 1].groupParent);\n            }\n            groups.reverse();\n            groups.forEach(g => g.skip = true);\n            collection.data.splice(0, 0, ...groups);\n        }\n        for (let i = 0; i < collection.data.length; i++) {\n            const record = collection.data[i];\n            let skipAdd = false;\n            let recordId;\n            let groupByRecord: IGroupByRecord = null;\n            if (grid.isGroupByRecord(record)) {\n                skipAdd = !!record.skip;\n                record.skip = null;\n                groupByRecord = record as IGroupByRecord;\n                recordId = this.gridAPI.get_groupBy_record_id(groupByRecord);\n            } else {\n                recordId = this.gridAPI.get_row_id(record);\n            }\n            if (!skipAdd) {\n                recordsWithSummary.push(record);\n            }\n\n            if (summaryPosition === GridSummaryPosition.bottom && showSummary && (groupByRecord && !grid.isExpandedGroup(groupByRecord))) {\n                const records = this.removeDeletedRecord(grid, groupByRecord.records.slice());\n                const summaries = grid.summaryService.calculateSummaries(recordId, records);\n                const summaryRecord: ISummaryRecord = {\n                    summaries: summaries,\n                    max: maxSummaryHeight\n                };\n                recordsWithSummary.push(summaryRecord);\n            }\n            if (summaryPosition === GridSummaryPosition.bottom && lastChildMap.has(recordId)) {\n                const groupRecords = lastChildMap.get(recordId);\n\n                for (let j = 0; j < groupRecords.length; j++) {\n                    const groupRecord = groupRecords[j];\n                    const groupRecordId = this.gridAPI.get_groupBy_record_id(groupRecord);\n                    const records = this.removeDeletedRecord(grid, groupRecord.records.slice());\n                    const summaries = grid.summaryService.calculateSummaries(groupRecordId, records);\n                    const summaryRecord: ISummaryRecord = {\n                        summaries: summaries,\n                        max: maxSummaryHeight\n                    };\n                    recordsWithSummary.push(summaryRecord);\n                }\n            }\n\n            const showSummaries = showSummary ? false : (groupByRecord && !grid.isExpandedGroup(groupByRecord));\n            if (groupByRecord === null || showSummaries) {\n                continue;\n            }\n\n            if (summaryPosition === GridSummaryPosition.top) {\n                const records = this.removeDeletedRecord(grid, groupByRecord.records.slice());\n                const summaries = grid.summaryService.calculateSummaries(recordId, records);\n                const summaryRecord: ISummaryRecord = {\n                    summaries: summaries,\n                    max: maxSummaryHeight\n                };\n                recordsWithSummary.push(summaryRecord);\n            } else if (summaryPosition === GridSummaryPosition.bottom) {\n                let lastChild = groupByRecord;\n\n                while (lastChild.groups && lastChild.groups.length > 0 && grid.isExpandedGroup(lastChild)) {\n                    lastChild = lastChild.groups[lastChild.groups.length - 1];\n                }\n\n                let lastChildId;\n                if (grid.isExpandedGroup(lastChild)) {\n                    lastChildId = this.gridAPI.get_row_id(lastChild.records[lastChild.records.length - 1]);\n                } else {\n                    lastChildId = this.gridAPI.get_groupBy_record_id(lastChild);\n                }\n\n                let groupRecords = lastChildMap.get(lastChildId);\n                if (!groupRecords) {\n                    groupRecords = [];\n                    lastChildMap.set(lastChildId, groupRecords);\n                }\n                groupRecords.unshift(groupByRecord);\n            }\n        }\n        return recordsWithSummary;\n    }\n\n    private removeDeletedRecord(grid, data) {\n        if (!grid.transactions.enabled) {\n            return data;\n        }\n        const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === 'delete').map(t => t.id);\n        deletedRows.forEach(rowID => {\n            const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n            const index = tempData.indexOf(rowID);\n            if (index !== -1) {\n                data.splice(index, 1);\n            }\n        });\n        return data;\n    }\n}\n","import { PipeTransform, Pipe } from '@angular/core';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridAPIService } from './grid-api.service';\n\n/** @hidden */\n@Pipe({\n    name: 'gridDetails',\n    pure: true\n})\nexport class IgxGridDetailsPipe implements PipeTransform {\n    private gridAPI: IgxGridAPIService;\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxGridAPIService>gridAPI;\n    }\n    public transform(collection: any[], hasDetails: boolean, expansionStates:  Map<any, boolean>, pipeTrigger: number) {\n        if (!hasDetails) {\n            return collection;\n        }\n        const res = this.addDetailRows(collection, expansionStates);\n        return res;\n    }\n\n    protected addDetailRows(collection: any[], expansionStates: Map<any, boolean>) {\n        const result = [];\n        collection.forEach((v) => {\n            result.push(v);\n            if (!this.gridAPI.grid.isGroupByRecord(v) && !this.gridAPI.grid.isSummaryRow(v) &&\n                this.gridAPI.get_row_expansion_state(v)) {\n                const detailsObj = { detailsData: v };\n                result.push(detailsObj);\n            }\n        });\n        return result;\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    Inject,\n    Input,\n    NgZone,\n    OnInit,\n    TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport { IgxGridCellComponent } from '../cell.component';\nimport { GridBaseAPIService } from '../api.service';\nimport { getNodeSizeViaRange, PlatformUtil } from '../../core/utils';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxGridBaseDirective } from './public_api';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { HammerGesturesManager } from '../../core/touch';\nimport { GridType } from '../common/grid.interface';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-expandable-grid-cell',\n    templateUrl: 'expandable-cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxGridExpandableCellComponent extends IgxGridCellComponent implements OnInit {\n\n    constructor(\n                selectionService: IgxGridSelectionService,\n                crudService: IgxGridCRUDService,\n                gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n                cdr: ChangeDetectorRef,\n                element: ElementRef,\n                protected zone: NgZone,\n                touchManager: HammerGesturesManager,\n                @Inject(DOCUMENT) public document,\n                protected platformUtil: PlatformUtil) {\n        super(selectionService, crudService, gridAPI, cdr, element, zone, touchManager, platformUtil);\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    expanded = false;\n\n    @ViewChild('indicator', { read: ElementRef })\n    public indicator: ElementRef;\n\n    @ViewChild('indentationDiv', { read: ElementRef })\n    public indentationDiv: ElementRef;\n\n   /**\n    * @hidden\n    */\n   @ViewChild('defaultExpandedTemplate', { read: TemplateRef, static: true })\n   protected defaultExpandedTemplate: TemplateRef<any>;\n\n   /**\n    * @hidden\n    */\n   @ViewChild('defaultCollapsedTemplate', { read: TemplateRef, static: true })\n   protected defaultCollapsedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    public toggle(event: Event) {\n        event.stopPropagation();\n        const expansionState = this.gridAPI.get_row_expansion_state(this.row.rowData);\n        this.gridAPI.set_row_expansion_state(this.row.rowID, !expansionState, event);\n    }\n\n    /**\n     * @hidden\n     */\n    public onIndicatorFocus() {\n        this.gridAPI.submit_value();\n    }\n\n    /**\n     * @hidden\n     */\n    public calculateSizeToFit(range: any): number {\n        const indicatorWidth = this.indicator.nativeElement.getBoundingClientRect().width;\n        const indicatorStyle = this.document.defaultView.getComputedStyle(this.indicator.nativeElement);\n        const indicatorMargin = parseFloat(indicatorStyle.marginRight);\n        let leftPadding = 0;\n        if (this.indentationDiv) {\n            const indentationStyle = this.document.defaultView.getComputedStyle(this.indentationDiv.nativeElement);\n            leftPadding = parseFloat(indentationStyle.paddingLeft);\n        }\n        const largestWidth = Math.max(...Array.from(this.nativeElement.children)\n            .map((child) => getNodeSizeViaRange(range, child)));\n        return largestWidth + indicatorWidth + indicatorMargin + leftPadding;\n    }\n\n    /**\n     * @hidden\n     */\n    public get iconTemplate() {\n        if (this.expanded) {\n            return this.grid.rowExpandedIndicatorTemplate || this.defaultExpandedTemplate;\n        } else {\n            return this.grid.rowCollapsedIndicatorTemplate || this.defaultCollapsedTemplate;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public get showExpanderIndicator() {\n        const isGhost = this.row.pinned && this.row.disabled;\n        return !this.editMode && (!this.row.pinned || isGhost);\n    }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport {\n    IgxGroupAreaDropDirective,\n    IgxGroupByRowTemplateDirective,\n    IgxGridDetailTemplateDirective\n} from './grid.directives';\nimport { IgxGridComponent } from './grid.component';\nimport {\n    IgxGridPagingPipe,\n    IgxGridGroupingPipe,\n    IgxGridSortingPipe,\n    IgxGridFilteringPipe\n} from './grid.pipes';\nimport { IgxGridGroupByRowComponent } from './groupby-row.component';\nimport { IgxGridRowComponent } from './grid-row.component';\nimport { IgxGridCommonModule } from '../grid-common.module';\nimport { IgxGridSummaryPipe } from './grid.summary.pipe';\nimport { IgxGridDetailsPipe } from './grid.details.pipe';\nimport { IgxGridExpandableCellComponent } from './expandable-cell.component';\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxGridComponent,\n    IgxGridRowComponent,\n    IgxGridGroupByRowComponent,\n    IgxGroupByRowTemplateDirective,\n    IgxGridDetailTemplateDirective,\n    IgxGroupAreaDropDirective,\n    IgxGridGroupingPipe,\n    IgxGridPagingPipe,\n    IgxGridSortingPipe,\n    IgxGridFilteringPipe,\n    IgxGridSummaryPipe,\n    IgxGridDetailsPipe,\n    IgxGridExpandableCellComponent\n  ],\n  exports: [\n    IgxGridComponent,\n    IgxGridExpandableCellComponent,\n    IgxGridGroupByRowComponent,\n    IgxGridRowComponent,\n    IgxGroupByRowTemplateDirective,\n    IgxGridDetailTemplateDirective,\n    IgxGroupAreaDropDirective,\n    IgxGridGroupingPipe,\n    IgxGridPagingPipe,\n    IgxGridSortingPipe,\n    IgxGridFilteringPipe,\n    IgxGridSummaryPipe,\n    IgxGridDetailsPipe,\n    IgxGridCommonModule\n  ],\n  imports: [\n    IgxGridCommonModule,\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class IgxGridModule {}\n","import { GridBaseAPIService } from '../api.service';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { DataType } from '../../data-operations/data-util';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { HierarchicalTransaction, TransactionType, State } from '../../services/public_api';\nimport { Injectable } from '@angular/core';\nimport { ColumnType } from '../common/column.interface';\nimport { mergeObjects } from '../../core/utils';\n\n@Injectable()\nexport class IgxTreeGridAPIService extends GridBaseAPIService<IgxTreeGridComponent> {\n\n    public get_all_data(transactions?: boolean): any[] {\n        const grid = this.grid;\n        const data = transactions ? grid.dataWithAddedInTransactionRows : grid.flatData;\n        return data ? data : [];\n    }\n\n    public get_summary_data() {\n        const grid = this.grid;\n        const data = grid.processedRootRecords.filter(row => row.isFilteredOutParent === undefined || row.isFilteredOutParent === false)\n            .map(rec => rec.data);\n        if (grid.transactions.enabled) {\n            const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === TransactionType.DELETE).map(t => t.id);\n            deletedRows.forEach(rowID => {\n                const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n                const index = tempData.indexOf(rowID);\n                if (index !== -1) {\n                    data.splice(index, 1);\n                }\n            });\n        }\n        return data;\n    }\n\n    public allow_expansion_state_change(rowID, expanded): boolean {\n        const grid = this.grid;\n        const row = grid.records.get(rowID);\n        if (row.expanded === expanded ||\n            ((!row.children || !row.children.length) && (!grid.loadChildrenOnDemand ||\n            (grid.hasChildrenKey && !row.data[grid.hasChildrenKey])))) {\n            return false;\n        }\n        return true;\n    }\n\n    public expand_path_to_record(record: ITreeGridRecord) {\n        const grid = this.grid;\n        const expandedStates = grid.expansionStates;\n\n        while (record.parent) {\n            record = record.parent;\n            const expanded = this.get_row_expansion_state(record);\n\n            if (!expanded) {\n                expandedStates.set(record.rowID, true);\n            }\n        }\n        grid.expansionStates = expandedStates;\n\n        if (grid.rowEditable) {\n            grid.endEdit(true);\n        }\n    }\n\n    public get_row_expansion_state(record: ITreeGridRecord): boolean {\n        const grid = this.grid;\n        const states = grid.expansionStates;\n        const expanded = states.get(record.rowID);\n\n        if (expanded !== undefined) {\n            return expanded;\n        } else {\n            return record.children && record.children.length && record.level < grid.expansionDepth;\n        }\n    }\n\n    protected update_row_in_array(value: any, rowID: any, index: number) {\n        const grid = this.grid;\n        if (grid.primaryKey && grid.foreignKey) {\n            super.update_row_in_array(value, rowID, index);\n        } else {\n            const record = grid.records.get(rowID);\n            const childData = record.parent ? record.parent.data[grid.childDataKey] : grid.data;\n            index = grid.primaryKey ? childData.map(c => c[grid.primaryKey]).indexOf(rowID) :\n                childData.indexOf(rowID);\n            childData[index] = value;\n        }\n    }\n\n    public should_apply_number_style(column: ColumnType): boolean {\n        return column.dataType === DataType.Number && column.visibleIndex !== 0;\n    }\n\n    public deleteRowById(rowID: any) {\n        const treeGrid = this.grid;\n        const flatDataWithCascadeOnDeleteAndTransactions =\n        treeGrid.primaryKey &&\n        treeGrid.foreignKey &&\n        treeGrid.cascadeOnDelete &&\n        treeGrid.transactions.enabled;\n\n        if (flatDataWithCascadeOnDeleteAndTransactions) {\n            treeGrid.transactions.startPending();\n        }\n\n        super.deleteRowById(rowID);\n\n        if (flatDataWithCascadeOnDeleteAndTransactions) {\n            treeGrid.transactions.endPending(true);\n        }\n    }\n\n    public deleteRowFromData(rowID: any, index: number) {\n        const treeGrid = this.grid;\n        const record = treeGrid.records.get(rowID);\n\n        if (treeGrid.primaryKey && treeGrid.foreignKey) {\n            index = treeGrid.primaryKey ?\n                treeGrid.data.map(c => c[treeGrid.primaryKey]).indexOf(rowID) :\n                treeGrid.data.indexOf(rowID);\n            super.deleteRowFromData(rowID, index);\n\n            if (treeGrid.cascadeOnDelete) {\n                if (record && record.children && record.children.length > 0) {\n                    for (let i = 0; i < record.children.length; i++) {\n                        const child = record.children[i];\n                        super.deleteRowById(child.rowID);\n                    }\n                }\n            }\n        } else {\n            const collection = record.parent ? record.parent.data[treeGrid.childDataKey] : treeGrid.data;\n            index = treeGrid.primaryKey ?\n                collection.map(c => c[treeGrid.primaryKey]).indexOf(rowID) :\n                collection.indexOf(rowID);\n\n            const selectedChildren = [];\n            this.get_selected_children(record, selectedChildren);\n            if (selectedChildren.length > 0) {\n                treeGrid.deselectRows(selectedChildren);\n            }\n\n            if (treeGrid.transactions.enabled) {\n                const path = treeGrid.generateRowPath(rowID);\n                treeGrid.transactions.add({\n                    id: rowID,\n                    type: TransactionType.DELETE,\n                    newValue: null,\n                    path: path\n                },\n                    collection[index]\n                );\n            } else {\n                collection.splice(index, 1);\n            }\n        }\n    }\n\n    /**\n     * Updates related row of provided grid's data source with provided new row value\n     * @param grid Grid to update data for\n     * @param rowID ID of the row to update\n     * @param rowValueInDataSource Initial value of the row as it is in data source\n     * @param rowCurrentValue Current value of the row as it is with applied previous transactions\n     * @param rowNewValue New value of the row\n     */\n    protected updateData(\n        grid: IgxTreeGridComponent,\n        rowID: any,\n        rowValueInDataSource: any,\n        rowCurrentValue: any,\n        rowNewValue: { [x: string]: any }) {\n        if (grid.transactions.enabled) {\n            const path = grid.generateRowPath(rowID);\n            const transaction: HierarchicalTransaction = {\n                id: rowID,\n                type: TransactionType.UPDATE,\n                newValue: rowNewValue,\n                path: path\n            };\n            grid.transactions.add(transaction, rowCurrentValue);\n        } else {\n            mergeObjects(rowValueInDataSource, rowNewValue);\n        }\n    }\n\n    public get_selected_children(record: ITreeGridRecord, selectedRowIDs: any[]) {\n        const grid = this.grid;\n        if (!record.children || record.children.length === 0) {\n            return;\n        }\n        for (const child of record.children) {\n            if (grid.selectionService.isRowSelected(child.rowID)) {\n                selectedRowIDs.push(child.rowID);\n            }\n            this.get_selected_children(child, selectedRowIDs);\n        }\n    }\n\n    public row_deleted_transaction(rowID: any): boolean {\n        return this.row_deleted_parent(rowID) || super.row_deleted_transaction(rowID);\n    }\n\n    public get_rec_by_id(rowID) {\n        return this.grid.records.get(rowID);\n    }\n\n    private row_deleted_parent(rowID: any): boolean {\n        const grid = this.grid;\n        if (!grid) {\n            return false;\n        }\n        if ((grid.cascadeOnDelete && grid.foreignKey) || grid.childDataKey) {\n            let node = grid.records.get(rowID);\n            while (node) {\n                const state: State = grid.transactions.getState(node.rowID);\n                if (state && state.type === TransactionType.DELETE) {\n                    return true;\n                }\n                node = node.parent;\n            }\n        }\n        return false;\n    }\n\n    public addRowToData(data: any, parentRowID?: any) {\n        if (parentRowID !== undefined && parentRowID !== null) {\n\n            const state = this.grid.transactions.getState(parentRowID);\n            // we should not allow adding of rows as child of deleted row\n            if (state && state.type === TransactionType.DELETE) {\n                throw Error(`Cannot add child row to deleted parent row`);\n            }\n\n            const parentRecord = this.grid.records.get(parentRowID);\n\n            if (!parentRecord) {\n                throw Error('Invalid parent row ID!');\n            }\n            this.grid.summaryService.clearSummaryCache({rowID: parentRecord.rowID});\n            if (this.grid.primaryKey && this.grid.foreignKey) {\n                data[this.grid.foreignKey] = parentRowID;\n                super.addRowToData(data);\n            } else {\n                const parentData = parentRecord.data;\n                const childKey = this.grid.childDataKey;\n                if (this.grid.transactions.enabled) {\n                    const rowId = this.grid.primaryKey ? data[this.grid.primaryKey] : data;\n                    const path: any[] = [];\n                    path.push(...this.grid.generateRowPath(parentRowID));\n                    path.push(parentRowID);\n                    this.grid.transactions.add({\n                        id: rowId,\n                        path: path,\n                        newValue: data,\n                        type: TransactionType.ADD\n                    } as HierarchicalTransaction,\n                        null);\n                } else {\n                    if (!parentData[childKey]) {\n                        parentData[childKey] = [];\n                    }\n                    parentData[childKey].push(data);\n                }\n            }\n        } else {\n            super.addRowToData(data);\n        }\n    }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxRowLoadingIndicator]'\n})\nexport class IgxRowLoadingIndicatorTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) { }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    Input,\n    forwardRef,\n    OnInit,\n    TemplateRef,\n    QueryList,\n    ContentChild,\n    AfterContentInit,\n    ViewChild,\n    DoCheck\n} from '@angular/core';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IRowToggleEventArgs } from '../common/events';\nimport {\n    HierarchicalTransaction,\n    HierarchicalState,\n    TransactionType,\n    TransactionEventOrigin,\n    StateUpdateEvent\n} from '../../services/transaction/transaction';\nimport { HierarchicalTransactionService } from '../../services/public_api';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { mergeObjects } from '../../core/utils';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { IgxRowLoadingIndicatorTemplateDirective } from './tree-grid.directives';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { IgxGridNavigationService } from '../grid-navigation.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxTreeGridRowComponent } from './tree-grid-row.component';\n\nlet NEXT_ID = 0;\n\n/**\n * **Ignite UI for Angular Tree Grid** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/grid/grid)\n *\n * The Ignite UI Tree Grid displays and manipulates hierarchical data with consistent schema formatted as a table and\n * provides features such as sorting, filtering, editing, column pinning, paging, column moving and hiding.\n *\n * Example:\n * ```html\n * <igx-tree-grid [data]=\"employeeData\" primaryKey=\"employeeID\" foreignKey=\"PID\" autoGenerate=\"false\">\n *   <igx-column field=\"first\" header=\"First Name\"></igx-column>\n *   <igx-column field=\"last\" header=\"Last Name\"></igx-column>\n *   <igx-column field=\"role\" header=\"Role\"></igx-column>\n * </igx-tree-grid>\n * ```\n */\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-tree-grid',\n    templateUrl: 'tree-grid.component.html',\n    providers: [\n        IgxGridSelectionService,\n        IgxGridCRUDService,\n        IgxGridSummaryService,\n        IgxGridNavigationService,\n        { provide: GridBaseAPIService, useClass: IgxTreeGridAPIService },\n        { provide: IgxGridBaseDirective, useExisting: forwardRef(() => IgxTreeGridComponent) },\n        IgxFilteringService,\n        IgxForOfSyncService,\n        IgxForOfScrollSyncService\n    ]\n})\nexport class IgxTreeGridComponent extends IgxGridBaseDirective implements GridType, OnInit, DoCheck, AfterContentInit {\n    private _id = `igx-tree-grid-${NEXT_ID++}`;\n    private _data;\n    private _rowLoadingIndicatorTemplate: TemplateRef<any>;\n    protected _transactions: HierarchicalTransactionService<HierarchicalTransaction, HierarchicalState>;\n\n    /**\n     * An @Input property that sets the value of the `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-tree-grid [id]=\"'igx-tree-grid-1'\"></igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this._id;\n    }\n    public set id(value: string) {\n        this._id = value;\n    }\n\n    /**\n     * An @Input property that lets you fill the `IgxTreeGridComponent` with an array of data.\n     * ```html\n     * <igx-tree-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public get data(): any[] {\n        return this._data;\n    }\n\n    public set data(value: any[]) {\n        this._data = value || [];\n        this.summaryService.clearSummaryCache();\n        if (this.shouldGenerate) {\n            this.setupColumns();\n        }\n        this.cdr.markForCheck();\n    }\n\n    /**\n     * Returns an array of objects containing the filtered data in the `IgxGridComponent`.\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    get filteredData() {\n        return this._filteredData;\n    }\n\n    /**\n     * Sets an array of objects containing the filtered data in the `IgxGridComponent`.\n     * ```typescript\n     * this.grid.filteredData = [{\n     *       ID: 1,\n     *       Name: \"A\"\n     * }];\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    set filteredData(value) {\n        this._filteredData = value;\n    }\n\n    /**\n     * Get transactions service for the grid.\n     * @experimental @hidden\n     */\n    get transactions() {\n        return this._transactions;\n    }\n\n    /**\n     * @hidden\n     */\n    public flatData: any[];\n\n    /**\n     * @hidden\n     */\n    public processedExpandedFlatData: any[];\n\n    /**\n     * Returns an array of the root level `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the root record with index=2\n     * const states = this.grid.rootRecords[2];\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    public rootRecords: ITreeGridRecord[];\n\n    /**\n     * Returns a map of all `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the record with primaryKey=2\n     * const states = this.grid.records.get(2);\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    public records: Map<any, ITreeGridRecord> = new Map<any, ITreeGridRecord>();\n\n    /**\n     * Returns an array of processed (filtered and sorted) root `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the processed root record with index=2\n     * const states = this.grid.processedRootRecords[2];\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    public processedRootRecords: ITreeGridRecord[];\n\n    /**\n     * Returns a map of all processed (filtered and sorted) `ITreeGridRecord`s.\n     * ```typescript\n     * // gets the processed record with primaryKey=2\n     * const states = this.grid.processedRecords.get(2);\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    public processedRecords: Map<any, ITreeGridRecord> = new Map<any, ITreeGridRecord>();\n\n    /**\n     * An @Input property that sets the child data key of the `IgxTreeGridComponent`.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [childDataKey]=\"'employees'\" [autoGenerate]=\"true\"></igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public childDataKey;\n\n    /**\n     * An @Input property that sets the foreign key of the `IgxTreeGridComponent`.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\" [autoGenerate]=\"true\">\n     * </igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public foreignKey;\n\n    /**\n     * An @Input property that sets the key indicating whether a row has children.\n     * This property is only used for load on demand scenarios.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\"\n     *                [loadChildrenOnDemand]=\"loadChildren\"\n     *                [hasChildrenKey]=\"'hasEmployees'\">\n     * </igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public hasChildrenKey;\n\n    /**\n     * An @Input property indicating whether child records should be deleted when their parent gets deleted.\n     * By default it is set to true and deletes all children along with the parent.\n     * ```html\n     * <igx-tree-grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\" cascadeOnDelete=\"false\">\n     * </igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public cascadeOnDelete = true;\n\n    private _expansionDepth = Infinity;\n\n    /**\n     * An @Input property that sets the count of levels to be expanded in the `IgxTreeGridComponent`. By default it is\n     * set to `Infinity` which means all levels would be expanded.\n     * ```html\n     * <igx-tree-grid #grid [data]=\"employeeData\" [childDataKey]=\"'employees'\" expansionDepth=\"1\" [autoGenerate]=\"true\"></igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public get expansionDepth(): number {\n        return this._expansionDepth;\n    }\n\n    public set expansionDepth(value: number) {\n        this._expansionDepth = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxRowLoadingIndicatorTemplateDirective, { read: IgxRowLoadingIndicatorTemplateDirective })\n    protected rowLoadingTemplate: IgxRowLoadingIndicatorTemplateDirective;\n\n    /**\n     * An @Input property that provides a template for the row loading indicator when load on demand is enabled.\n     * ```html\n     * <ng-template #rowLoadingTemplate>\n     *     <igx-icon fontSet=\"material\">loop</igx-icon>\n     * </ng-template>\n     *\n     * <igx-tree-grid #grid [data]=\"employeeData\" [primaryKey]=\"'ID'\" [foreignKey]=\"'parentID'\"\n     *                [loadChildrenOnDemand]=\"loadChildren\"\n     *                [rowLoadingIndicatorTemplate]=\"rowLoadingTemplate\">\n     * </igx-tree-grid>\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public get rowLoadingIndicatorTemplate(): TemplateRef<any> {\n        return this._rowLoadingIndicatorTemplate;\n    }\n\n    public set rowLoadingIndicatorTemplate(value: TemplateRef<any>) {\n        this._rowLoadingIndicatorTemplate = value;\n        this.notifyChanges();\n    }\n\n    /**\n     * An @Input property that provides a callback for loading child rows on demand.\n     * ```html\n     * <igx-tree-grid [data]=\"employeeData\" [primaryKey]=\"'employeeID'\" [foreignKey]=\"'parentID'\" [loadChildrenOnDemand]=\"loadChildren\">\n     * </igx-tree-grid>\n     * ```\n     * ```typescript\n     * public loadChildren = (parentID: any, done: (children: any[]) => void) => {\n     *     this.dataService.getData(parentID, children => done(children));\n     * }\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    @Input()\n    public loadChildrenOnDemand: (parentID: any, done: (children: any[]) => void) => void;\n\n    /**\n     * @hidden\n     */\n    public loadingRows = new Set<any>();\n\n    // Kind of stupid\n    private get _gridAPI(): IgxTreeGridAPIService {\n        return this.gridAPI as IgxTreeGridAPIService;\n    }\n    private _filteredData = null;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dragIndicatorIconBase', { read: TemplateRef, static: true })\n    public dragIndicatorIconBase: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('record_template', { read: TemplateRef, static: true })\n    protected recordTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden @internal\n     */\n    @ViewChild('summary_template', { read: TemplateRef, static: true })\n    protected summaryTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        super.ngOnInit();\n\n        this.onRowToggle.pipe(takeUntil(this.destroy$)).subscribe((args) => {\n            this.loadChildrenOnRowExpansion(args);\n        });\n\n        this.transactions.onStateUpdate.pipe(takeUntil<any>(this.destroy$)).subscribe((event: StateUpdateEvent) => {\n            let actions = [];\n            if (event.origin === TransactionEventOrigin.REDO) {\n                actions = event.actions ? event.actions.filter(x => x.transaction.type === TransactionType.DELETE) : [];\n            } else if (event.origin === TransactionEventOrigin.UNDO) {\n                actions = event.actions ? event.actions.filter(x => x.transaction.type === TransactionType.ADD) : [];\n            }\n            if (actions.length) {\n                for (const action of actions) {\n                    this.deselectChildren(action.transaction.id);\n                }\n            }\n        });\n    }\n\n    ngDoCheck() {\n        super.ngDoCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        if (this.rowLoadingTemplate) {\n            this._rowLoadingIndicatorTemplate = this.rowLoadingTemplate.template;\n        }\n        super.ngAfterContentInit();\n    }\n\n    private loadChildrenOnRowExpansion(args: IRowToggleEventArgs) {\n        if (this.loadChildrenOnDemand) {\n            const parentID = args.rowID;\n\n            if (args.expanded && !this._expansionStates.has(parentID)) {\n                this.loadingRows.add(parentID);\n\n                this.loadChildrenOnDemand(parentID, children => {\n                    this.loadingRows.delete(parentID);\n                    this.addChildRows(children, parentID);\n                    this.notifyChanges();\n                });\n            }\n        }\n    }\n\n    private addChildRows(children: any[], parentID: any) {\n        if (this.primaryKey && this.foreignKey) {\n            for (const child of children) {\n                child[this.foreignKey] = parentID;\n            }\n            this.data.push(...children);\n        } else if (this.childDataKey) {\n            let parent = this.records.get(parentID);\n            let parentData = parent.data;\n\n            if (this.transactions.enabled && this.transactions.getAggregatedChanges(true).length) {\n                const path = [];\n                while (parent) {\n                    path.push(parent.rowID);\n                    parent = parent.parent;\n                }\n\n                let collection = this.data;\n                let record: any;\n                for (let i = path.length - 1; i >= 0; i--) {\n                    const pid = path[i];\n                    record = collection.find(r => r[this.primaryKey] === pid);\n\n                    if (!record) {\n                        break;\n                    }\n                    collection = record[this.childDataKey];\n                }\n                if (record) {\n                    parentData = record;\n                }\n            }\n\n            parentData[this.childDataKey] = children;\n        }\n        this.selectionService.clearHeaderCBState();\n        this._pipeTrigger++;\n    }\n\n   protected findRecordIndexInView(rec) {\n        return this.dataView.findIndex(x => x.data[this.primaryKey] === rec[this.primaryKey]);\n    }\n\n    protected getUnpinnedIndexById(id) {\n        return this.unpinnedRecords.findIndex(x => x.data[this.primaryKey] === id);\n    }\n\n    private cloneMap(mapIn: Map<any, boolean>): Map<any, boolean> {\n        const mapCloned: Map<any, boolean> = new Map<any, boolean>();\n\n        mapIn.forEach((value: boolean, key: any, mapObj: Map<any, boolean>) => {\n\n            mapCloned.set(key, value);\n        });\n\n        return mapCloned;\n    }\n\n    public getDefaultExpandState(record: ITreeGridRecord) {\n        return record.children && record.children.length && record.level < this.expansionDepth;\n    }\n\n    /**\n     * Expands all rows.\n     * ```typescript\n     * this.grid.expandAll();\n     * ```\n     * @memberof IgxTreeGridComponent\n     */\n    public expandAll() {\n        this._expansionDepth = Infinity;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Collapses all rows.\n     *\n     * ```typescript\n     * this.grid.collapseAll();\n     *  ```\n     * @memberof IgxTreeGridComponent\n     */\n    public collapseAll() {\n        this._expansionDepth = 0;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * @hidden\n     */\n    public refreshGridState(args?) {\n        super.refreshGridState();\n        if (this.primaryKey && this.foreignKey) {\n            const rowID = args.data[this.foreignKey];\n            this.summaryService.clearSummaryCache({rowID: rowID});\n            this._pipeTrigger++;\n            this.cdr.detectChanges();\n        }\n    }\n\n    /**\n     * Creates a new `IgxTreeGridRowComponent` with the given data. If a parentRowID is not specified, the newly created\n     * row would be added at the root level. Otherwise, it would be added as a child of the row whose primaryKey matches\n     * the specified parentRowID. If the parentRowID does not exist, an error would be thrown.\n     * ```typescript\n     * const record = {\n     *     ID: this.grid.data[this.grid1.data.length - 1].ID + 1,\n     *     Name: this.newRecord\n     * };\n     * this.grid.addRow(record, 1); // Adds a new child row to the row with ID=1.\n     * ```\n     * @param data\n     * @param parentRowID\n     * @memberof IgxTreeGridComponent\n     */\n    public addRow(data: any, parentRowID?: any) {\n        super.endEdit(true);\n        this.gridAPI.addRowToData(data, parentRowID);\n        this.onRowAdded.emit({ data });\n        this._pipeTrigger++;\n        this.notifyChanges();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    protected _getParentRecordId() {\n        if (this.addRowParent.asChild) {\n            return super._getParentRecordId();\n        } else if (this.addRowParent.rowID !== null && this.addRowParent.rowID !== undefined) {\n            const spawnedForRecord =  this._gridAPI.get_rec_by_id(this.addRowParent.rowID);\n            return spawnedForRecord?.parent?.rowID;\n        }\n    }\n\n    /** @hidden */\n    public deleteRowById(rowId: any) {\n        //  if this is flat self-referencing data, and CascadeOnDelete is set to true\n        //  and if we have transactions we should start pending transaction. This allows\n        //  us in case of delete action to delete all child rows as single undo action\n        this._gridAPI.deleteRowById(rowId);\n\n    }\n\n    /** @hidden */\n    public generateRowPath(rowId: any): any[] {\n        const path: any[] = [];\n        let record = this.records.get(rowId);\n\n        while (record.parent) {\n            path.push(record.parent.rowID);\n            record = record.parent;\n        }\n\n        return path.reverse();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    protected getDataBasedBodyHeight(): number {\n        return !this.flatData || (this.flatData.length < this._defaultTargetRecordNumber) ?\n            0 : this.defaultTargetBodyHeight;\n    }\n\n    /**\n     * @hidden\n     */\n    protected scrollTo(row: any | number, column: any | number): void {\n        let delayScrolling = false;\n        let record: ITreeGridRecord;\n\n        if (typeof(row) !== 'number') {\n            const rowData = row;\n            const rowID = this._gridAPI.get_row_id(rowData);\n            record = this.processedRecords.get(rowID);\n            this._gridAPI.expand_path_to_record(record);\n\n            if (this.paging) {\n                const rowIndex = this.processedExpandedFlatData.indexOf(rowData);\n                const page = Math.floor(rowIndex / this.perPage);\n\n                if (this.page !== page) {\n                    delayScrolling = true;\n                    this.page = page;\n                }\n            }\n        }\n\n        if (delayScrolling) {\n            this.verticalScrollContainer.onDataChanged.pipe(first()).subscribe(() => {\n                this.scrollDirective(this.verticalScrollContainer,\n                    typeof(row) === 'number' ? row : this.unpinnedDataView.indexOf(record));\n            });\n        } else {\n            this.scrollDirective(this.verticalScrollContainer,\n                typeof(row) === 'number' ? row : this.unpinnedDataView.indexOf(record));\n        }\n\n        this.scrollToHorizontally(column);\n    }\n\n    /**\n     * @hidden\n     */\n    public getContext(rowData: any, rowIndex: number, pinned?: boolean): any {\n        return {\n            $implicit: this.isGhostRecord(rowData) || this.isAddRowRecord(rowData) ? rowData.recordRef : rowData,\n            index: this.getDataViewIndex(rowIndex, pinned),\n            templateID: this.isSummaryRow(rowData) ? 'summaryRow' : 'dataRow',\n            disabled: this.isGhostRecord(rowData) ? rowData.recordRef.isFilteredOutParent === undefined : false,\n            addRow: this.isAddRowRecord(rowData) ? rowData.addRow : false\n        };\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getInitialPinnedIndex(rec) {\n        return this._pinnedRecordIDs.indexOf(rec.rowID);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getSelectedData(formatters = false, headers = false): any[] {\n        let source = [];\n\n        const process = (record) => {\n            if (record.summaries) {\n                source.push(null);\n                return;\n            }\n            source.push(record.data);\n        };\n\n        this.unpinnedDataView.forEach(process);\n        source = this.isRowPinningToTop ? [...this.pinnedDataView, ...source] : [...source, ...this.pinnedDataView];\n        return this.extractDataFromSelection(source, formatters, headers);\n    }\n\n    public getEmptyRecordObjectFor(rec) {\n        const row = {...rec};\n        const data = rec || {};\n        row.data = {... data};\n        Object.keys(row.data).forEach(key => {\n            // persist foreign key if one is set.\n            if (this.foreignKey && key === this.foreignKey) {\n                row.data[key] = rec.data[key];\n            } else {\n                row.data[key] = undefined;\n            }\n        });\n        let id = this.generateRowID();\n        const rootRecPK = this.foreignKey && this.rootRecords && this.rootRecords.length > 0 ?\n         this.rootRecords[0].data[this.foreignKey] : null;\n        if (id === rootRecPK) {\n            // safeguard in case generated id matches the root foreign key.\n            id = this.generateRowID();\n        }\n        row.rowID = id;\n        row.data[this.primaryKey] = id;\n        return row;\n    }\n\n    protected writeToData(rowIndex: number, value: any) {\n        mergeObjects(this.flatData[rowIndex], value);\n    }\n\n    /**\n     * @hidden\n     */\n   protected initColumns(collection: QueryList<IgxColumnComponent>, cb: Function = null) {\n        if (this.hasColumnLayouts) {\n            // invalid configuration - tree grid should not allow column layouts\n            // remove column layouts\n            const nonColumnLayoutColumns = this.columnList.filter((col) => !col.columnLayout && !col.columnLayoutChild);\n            this.columnList.reset(nonColumnLayoutColumns);\n        }\n        super.initColumns(collection, cb);\n    }\n\n    /**\n     * @description A recursive way to deselect all selected children of a given record\n     * @param recordID ID of the record whose children to deselect\n     * @hidden\n     * @internal\n     */\n    private deselectChildren(recordID): void {\n        const selectedChildren = [];\n        const rowToDeselect = (this.getRowByKey(recordID) as IgxTreeGridRowComponent).treeRow;\n        this.selectionService.deselectRow(recordID);\n        this._gridAPI.get_selected_children(rowToDeselect, selectedChildren);\n        if (selectedChildren.length > 0) {\n            selectedChildren.forEach(x => this.deselectChildren(x));\n        }\n    }\n}\n","import { Component, forwardRef, Input, ViewChildren, QueryList, HostBinding, DoCheck, ChangeDetectionStrategy } from '@angular/core';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-tree-grid-row',\n    templateUrl: 'tree-grid-row.component.html',\n    providers: [{ provide: IgxRowDirective, useExisting: forwardRef(() => IgxTreeGridRowComponent) }]\n})\nexport class IgxTreeGridRowComponent extends IgxRowDirective<IgxTreeGridComponent> implements DoCheck {\n    private _treeRow: ITreeGridRecord;\n\n    @ViewChildren('treeCell')\n    protected _cells: QueryList<any>;\n\n    /**\n     * The `ITreeGridRecord` passed to the row component.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * const treeRow = row.treeRow;\n     * ```\n     */\n    @Input()\n    public get treeRow(): ITreeGridRecord {\n        return this._treeRow;\n    }\n\n    public set treeRow(value: ITreeGridRecord) {\n        if (this._treeRow !== value) {\n            this._treeRow = value;\n            this.rowData = this._treeRow.data;\n        }\n    }\n\n    /**\n     * Gets whether the row is pinned.\n     * ```typescript\n     * let isPinned = row.pinned;\n     * ```\n     */\n    public get pinned() {\n        return this.grid.isRecordPinned(this._treeRow);\n    }\n\n    /**\n     * @hidden\n     */\n    public get isRoot(): boolean {\n        let treeRec = this.treeRow;\n        const isPinnedArea = this.pinned && !this.disabled;\n        if (isPinnedArea) {\n            treeRec = this.grid.unpinnedRecords.find(x => x.data === this.rowData);\n        }\n        return treeRec.level === 0;\n    }\n\n    /**\n     * @hidden\n     */\n    public get hasChildren(): boolean {\n        return true;\n    }\n\n    /**\n     * Sets whether the row is pinned.\n     * Default value is `false`.\n     * ```typescript\n     * this.grid.selectedRows[0].pinned = true;\n     * ```\n     */\n    public set pinned(value: boolean) {\n        if (value) {\n            this.grid.pinRow(this.rowID);\n        } else {\n            this.grid.unpinRow(this.rowID);\n        }\n    }\n\n    /**\n     * Returns a value indicating whether the row component is expanded.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * const expanded = row.expanded;\n     * ```\n     */\n    @HostBinding('attr.aria-expanded')\n    get expanded(): boolean {\n        return this._treeRow.expanded;\n    }\n\n    /**\n     * Sets a value indicating whether the row component is expanded.\n     *\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * row.expanded = true;\n     * ```\n     */\n    set expanded(value: boolean) {\n        (this.gridAPI as IgxTreeGridAPIService).set_row_expansion_state(this._treeRow.rowID, value);\n    }\n\n    /**\n     * @hidden\n     */\n    public isLoading: boolean;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    get viewIndex(): number {\n        return this.index + this.grid.page * this.grid.perPage;\n    }\n\n    /**\n     * @hidden\n     */\n    public get showIndicator() {\n        return this.grid.loadChildrenOnDemand ?\n            this.grid.expansionStates.has(this.rowID) ?\n                this.treeRow.children && this.treeRow.children.length :\n                this.grid.hasChildrenKey ?\n                    this.rowData[this.grid.hasChildrenKey] :\n                    true :\n            this.treeRow.children && this.treeRow.children.length;\n    }\n\n    /**\n     * @hidden\n     */\n    protected resolveClasses(): string {\n        const classes = super.resolveClasses();\n        const filteredClass = this.treeRow.isFilteredOutParent ? 'igx-grid__tr--filtered' : '';\n        return `${classes} ${filteredClass}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngDoCheck() {\n        this.isLoading = this.grid.loadChildrenOnDemand ? this.grid.loadingRows.has(this.rowID) : false;\n        super.ngDoCheck();\n    }\n\n    /**\n     * Spawns the add child row UI for the specific row.\n     * @example\n     * ```typescript\n     * const row = this.grid.getRowByKey(1) as IgxTreeGridRowComponent;\n     * row.beginAddChild();\n     * ```\n     * @param rowID\n     */\n    public beginAddChild() {\n        this.grid.beginAddRowByIndex(this.rowID, this.index, true);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { cloneArray, cloneHierarchicalArray } from '../../core/utils';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxGridBaseDirective } from '../grid/public_api';\nimport { ISortingExpression } from '../../data-operations/sorting-expression.interface';\nimport { GridType } from '../common/grid.interface';\nimport { IGridSortingStrategy } from '../../data-operations/sorting-strategy';\nimport { GridPagingMode } from '../common/enums';\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'treeGridHierarchizing',\n    pure: true\n})\nexport class IgxTreeGridHierarchizingPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(collection: any[], primaryKey: string, foreignKey: string, childDataKey: string,\n        id: string, pipeTrigger: number): ITreeGridRecord[] {\n        const grid = this.gridAPI.grid;\n        let hierarchicalRecords: ITreeGridRecord[] = [];\n        const treeGridRecordsMap = new Map<any, ITreeGridRecord>();\n        const flatData: any[] = [];\n\n        if (primaryKey && foreignKey) {\n            hierarchicalRecords = this.hierarchizeFlatData(id, collection, primaryKey, foreignKey, treeGridRecordsMap, flatData);\n        } else if (childDataKey) {\n            hierarchicalRecords = this.hierarchizeRecursive(id, collection, primaryKey, childDataKey, undefined,\n                flatData, 0, treeGridRecordsMap);\n        }\n\n        grid.flatData = grid.transactions.enabled ?\n        flatData.filter(rec => !grid.transactions.getState(this.getRowID(primaryKey, rec))) : flatData;\n        grid.records = treeGridRecordsMap;\n        grid.rootRecords = hierarchicalRecords;\n        return hierarchicalRecords;\n    }\n\n    private getRowID(primaryKey: any, rowData: any) {\n        return primaryKey ? rowData[primaryKey] : rowData;\n    }\n\n    private hierarchizeFlatData(id: string, collection: any[], primaryKey: string, foreignKey: string,\n        map: Map<any, ITreeGridRecord>, flatData: any[]):\n        ITreeGridRecord[] {\n        const result: ITreeGridRecord[] = [];\n        const missingParentRecords: ITreeGridRecord[] = [];\n        collection.forEach(row => {\n            const record: ITreeGridRecord = {\n                rowID: this.getRowID(primaryKey, row),\n                data: row,\n                children: []\n            };\n            const parent = map.get(row[foreignKey]);\n            if (parent) {\n                record.parent = parent;\n                parent.children.push(record);\n            } else {\n                missingParentRecords.push(record);\n            }\n\n            map.set(row[primaryKey], record);\n        });\n\n        missingParentRecords.forEach(record => {\n            const parent = map.get(record.data[foreignKey]);\n            if (parent) {\n                record.parent = parent;\n                parent.children.push(record);\n            } else {\n                result.push(record);\n            }\n        });\n\n        this.setIndentationLevels(id, result, 0, flatData);\n\n        return result;\n    }\n\n    private setIndentationLevels(id: string, collection: ITreeGridRecord[], indentationLevel: number, flatData: any[]) {\n        for (let i = 0; i < collection.length; i++) {\n            const record = collection[i];\n            record.level = indentationLevel;\n            record.expanded = this.gridAPI.get_row_expansion_state(record);\n            flatData.push(record.data);\n\n            if (record.children && record.children.length > 0) {\n                this.setIndentationLevels(id, record.children, indentationLevel + 1, flatData);\n            }\n        }\n    }\n\n    private hierarchizeRecursive(id: string, collection: any[], primaryKey: string, childDataKey: string,\n        parent: ITreeGridRecord, flatData: any[], indentationLevel: number, map: Map<any, ITreeGridRecord>): ITreeGridRecord[] {\n        const result: ITreeGridRecord[] = [];\n\n        for (let i = 0; i < collection.length; i++) {\n            const item = collection[i];\n            const record: ITreeGridRecord = {\n                rowID: this.getRowID(primaryKey, item),\n                data: item,\n                parent: parent,\n                level: indentationLevel\n            };\n            record.expanded = this.gridAPI.get_row_expansion_state(record);\n            flatData.push(item);\n            map.set(record.rowID, record);\n            record.children = item[childDataKey] ?\n                this.hierarchizeRecursive(id, item[childDataKey], primaryKey, childDataKey, record, flatData, indentationLevel + 1, map) :\n                undefined;\n            result.push(record);\n        }\n\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'treeGridFlattening',\n    pure: true\n})\nexport class IgxTreeGridFlatteningPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(collection: ITreeGridRecord[], id: string,\n        expandedLevels: number, expandedStates: Map<any, boolean>, pipeTrigger: number): any[] {\n\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n        const data: ITreeGridRecord[] = [];\n\n        grid.processedRootRecords = collection;\n        grid.processedRecords = new Map<any, ITreeGridRecord>();\n\n        this.getFlatDataRecursive(collection, data, expandedLevels, expandedStates, id, true);\n\n        grid.processedExpandedFlatData = data.map(r => r.data);\n\n        return data;\n    }\n\n    private getFlatDataRecursive(collection: ITreeGridRecord[], data: ITreeGridRecord[],\n        expandedLevels: number, expandedStates: Map<any, boolean>, gridID: string,\n        parentExpanded: boolean) {\n        if (!collection || !collection.length) {\n            return;\n        }\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n\n        for (let i = 0; i < collection.length; i++) {\n            const hierarchicalRecord = collection[i];\n\n            if (parentExpanded) {\n                data.push(hierarchicalRecord);\n            }\n\n            hierarchicalRecord.expanded = this.gridAPI.get_row_expansion_state(hierarchicalRecord);\n\n            this.updateNonProcessedRecordExpansion(grid, hierarchicalRecord);\n\n            grid.processedRecords.set(hierarchicalRecord.rowID, hierarchicalRecord);\n\n            this.getFlatDataRecursive(hierarchicalRecord.children, data, expandedLevels,\n                expandedStates, gridID, parentExpanded && hierarchicalRecord.expanded);\n        }\n    }\n\n    private updateNonProcessedRecordExpansion(grid: IgxTreeGridComponent, record: ITreeGridRecord) {\n        const rec = grid.records.get(record.rowID);\n        rec.expanded = record.expanded;\n    }\n}\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridSorting',\n    pure: true\n})\nexport class IgxTreeGridSortingPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(\n        hierarchicalData: ITreeGridRecord[],\n        expressions: ISortingExpression[],\n        sorting: IGridSortingStrategy,\n        id: string,\n        pipeTrigger: number,\n        pinned?: boolean): ITreeGridRecord[] {\n        const grid = this.gridAPI.grid;\n\n        let result: ITreeGridRecord[];\n        if (!expressions.length) {\n            result = hierarchicalData;\n        } else {\n            result = DataUtil.treeGridSort(hierarchicalData, expressions, sorting, null, grid);\n        }\n\n        const filteredSortedData = [];\n        this.flattenTreeGridRecords(result, filteredSortedData);\n        grid.setFilteredSortedData(filteredSortedData, pinned);\n\n        return result;\n    }\n\n    private flattenTreeGridRecords(records: ITreeGridRecord[], flatData: any[]) {\n        if (records && records.length) {\n            for (const record of records) {\n                flatData.push(record.data);\n                this.flattenTreeGridRecords(record.children, flatData);\n            }\n        }\n    }\n}\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridPaging',\n    pure: true\n})\nexport class IgxTreeGridPagingPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    public transform(collection: ITreeGridRecord[], page = 0, perPage = 15, id: string, pipeTrigger: number): ITreeGridRecord[] {\n        const grid = this.gridAPI.grid;\n        if (!grid.paging || grid.pagingMode !== GridPagingMode.local) {\n            return collection;\n        }\n\n        const len = grid._totalRecords >= 0 ? grid._totalRecords : collection.length;\n        const totalPages = Math.ceil(len / perPage);\n\n        const state = {\n            index: (totalPages > 0 && page >= totalPages) ? totalPages - 1 : page,\n            recordsPerPage: perPage\n        };\n\n        const result: ITreeGridRecord[] = DataUtil.page(cloneArray(collection), state, len);\n        grid.pagingState = state;\n        (grid as any)._page = state.index;\n\n        return result;\n    }\n}\n/** @hidden */\n@Pipe({\n    name: 'treeGridTransaction',\n    pure: true\n})\nexport class IgxTreeGridTransactionPipe implements PipeTransform {\n\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n    }\n\n    transform(collection: any[], id: string, pipeTrigger: number): any[] {\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n\n        if (grid.transactions.enabled) {\n            const aggregatedChanges = grid.transactions.getAggregatedChanges(true);\n            if (aggregatedChanges.length > 0) {\n                const primaryKey = grid.primaryKey;\n                if (!primaryKey) {\n                    return collection;\n                }\n\n                const foreignKey = grid.foreignKey;\n                const childDataKey = grid.childDataKey;\n\n                if (foreignKey) {\n                    const flatDataClone = cloneArray(collection);\n                    return DataUtil.mergeTransactions(\n                        flatDataClone,\n                        aggregatedChanges,\n                        grid.primaryKey);\n                } else if (childDataKey) {\n                    const hierarchicalDataClone = cloneHierarchicalArray(collection, childDataKey);\n                    return DataUtil.mergeHierarchicalTransactions(\n                        hierarchicalDataClone,\n                        aggregatedChanges,\n                        childDataKey,\n                        grid.primaryKey);\n                }\n            }\n        }\n        return collection;\n    }\n}\n\n/**\n * This pipe maps the original record to ITreeGridRecord format used in TreeGrid.\n */\n@Pipe({\n    name: 'treeGridNormalizeRecord',\n    pure: true\n})\nexport class IgxTreeGridNormalizeRecordsPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService> gridAPI;\n    }\n\n    transform(collection: any[], pipeTrigger: number): any[] {\n        const grid =  this.gridAPI.grid;\n        const primaryKey = grid.primaryKey;\n        // using flattened data because origin data may be hierarchical.\n        const flatData = grid.flatData;\n        const res = flatData.map(rec =>\n            ({\n                    rowID: grid.primaryKey ? rec[primaryKey] : rec,\n                    data: rec,\n                    level: 0,\n                    children: []\n            }));\n        return res;\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    Input\n} from '@angular/core';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { HammerGesturesManager } from '../../core/touch';\nimport { IgxGridExpandableCellComponent } from '../grid/expandable-cell.component';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-tree-grid-cell',\n    templateUrl: 'tree-cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxTreeGridCellComponent extends IgxGridExpandableCellComponent {\n\n    private get treeGridAPI(): IgxTreeGridAPIService {\n        return this.gridAPI as IgxTreeGridAPIService;\n    }\n\n    /**\n     * @hidden\n     */\n    @Input()\n    level = 0;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    showIndicator = false;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public isLoading: boolean;\n\n    /**\n     * @hidden\n     */\n    public toggle(event: Event) {\n        event.stopPropagation();\n        this.treeGridAPI.set_row_expansion_state(this.row.rowID, !this.row.expanded, event);\n    }\n\n    /**\n     * @hidden\n     */\n    public onLoadingDblClick(event: Event) {\n        event.stopPropagation();\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { IgxTreeGridAPIService } from './tree-grid-api.service';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { ITreeGridRecord } from './tree-grid.interfaces';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { ISummaryRecord } from '../summaries/grid-summary';\nimport { GridSummaryCalculationMode, GridSummaryPosition } from '../common/enums';\nimport { GridType } from '../common/grid.interface';\n\n/** @hidden */\n@Pipe({\n    name: 'treeGridSummary',\n    pure: true\n})\nexport class IgxTreeGridSummaryPipe implements PipeTransform {\n    private gridAPI: IgxTreeGridAPIService;\n\n    constructor(gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>) {\n        this.gridAPI = <IgxTreeGridAPIService>gridAPI;\n     }\n\n    public transform(flatData: ITreeGridRecord[],\n        hasSummary: boolean,\n        summaryCalculationMode: GridSummaryCalculationMode,\n        summaryPosition: GridSummaryPosition, showSummaryOnCollapse: boolean,\n        id: string, pipeTrigger: number, summaryPipeTrigger: number): any[] {\n        const grid: IgxTreeGridComponent = this.gridAPI.grid;\n\n        if (!flatData || !hasSummary || summaryCalculationMode === GridSummaryCalculationMode.rootLevelOnly) {\n            return flatData;\n        }\n\n        return this.addSummaryRows(grid, flatData, summaryPosition, showSummaryOnCollapse);\n    }\n\n    private addSummaryRows(grid: IgxTreeGridComponent, collection: ITreeGridRecord[],\n        summaryPosition: GridSummaryPosition, showSummaryOnCollapse: boolean): any[] {\n        const recordsWithSummary = [];\n        const maxSummaryHeight = grid.summaryService.calcMaxSummaryHeight();\n\n        for (let i = 0; i < collection.length; i++) {\n            const record = collection[i];\n            recordsWithSummary.push(record);\n\n            const isCollapsed = !record.expanded && record.children && record.children.length > 0 && showSummaryOnCollapse;\n            if (isCollapsed) {\n                let childData = record.children.filter(r => !r.isFilteredOutParent).map(r => r.data);\n                childData = this.removeDeletedRecord(grid, record.rowID, childData);\n                const summaries = grid.summaryService.calculateSummaries(record.rowID, childData);\n                const summaryRecord: ISummaryRecord = {\n                    summaries: summaries,\n                    max: maxSummaryHeight,\n                    cellIndentation: record.level + 1\n                };\n                recordsWithSummary.push(summaryRecord);\n            }\n            const isExpanded = record.children && record.children.length > 0 && record.expanded;\n            if (summaryPosition === GridSummaryPosition.bottom && !isExpanded) {\n                let childRecord = record;\n                let parent = record.parent;\n\n                while (parent) {\n                    const children = parent.children;\n\n                    if (children[children.length - 1] === childRecord ) {\n                        let childData = children.filter(r => !r.isFilteredOutParent).map(r => r.data);\n                        childData = this.removeDeletedRecord(grid, parent.rowID, childData);\n                        const summaries = grid.summaryService.calculateSummaries(parent.rowID, childData);\n                        const summaryRecord: ISummaryRecord = {\n                            summaries: summaries,\n                            max: maxSummaryHeight,\n                            cellIndentation: parent.level + 1\n                        };\n                        recordsWithSummary.push(summaryRecord);\n\n                        childRecord = parent;\n                        parent = childRecord.parent;\n                    } else {\n                        break;\n                    }\n                }\n            } else if (summaryPosition === GridSummaryPosition.top && isExpanded) {\n                let childData = record.children.filter(r => !r.isFilteredOutParent).map(r => r.data);\n                childData = this.removeDeletedRecord(grid, record.rowID, childData);\n                const summaries = grid.summaryService.calculateSummaries(record.rowID, childData);\n                const summaryRecord: ISummaryRecord = {\n                    summaries: summaries,\n                    max: maxSummaryHeight,\n                    cellIndentation: record.level + 1\n                };\n                recordsWithSummary.push(summaryRecord);\n            }\n        }\n        return recordsWithSummary;\n    }\n\n    private removeDeletedRecord(grid, rowId, data) {\n        if (!grid.transactions.enabled || !grid.cascadeOnDelete) {\n            return data;\n        }\n        const deletedRows = grid.transactions.getTransactionLog().filter(t => t.type === 'delete').map(t => t.id);\n        let row = grid.records.get(rowId);\n        if (!row && deletedRows.lenght === 0) { return []; }\n        row = row.children ? row : row.parent;\n        while (row) {\n            rowId = row.rowID;\n            if (deletedRows.indexOf(rowId) !== -1) {\n                return [];\n            }\n            row = row.parent;\n        }\n        deletedRows.forEach(rowID => {\n            const tempData = grid.primaryKey ? data.map(rec => rec[grid.primaryKey]) : data;\n            const index = tempData.indexOf(rowID);\n            if (index !== -1) {\n                data.splice(index, 1);\n            }\n        });\n        return data;\n    }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { IgxTreeGridComponent } from './tree-grid.component';\nimport { IgxTreeGridRowComponent } from './tree-grid-row.component';\nimport { IgxGridCommonModule } from '../grid-common.module';\nimport { IgxTreeGridHierarchizingPipe, IgxTreeGridNormalizeRecordsPipe } from './tree-grid.pipes';\nimport { IgxTreeGridFlatteningPipe, IgxTreeGridSortingPipe, IgxTreeGridPagingPipe, IgxTreeGridTransactionPipe } from './tree-grid.pipes';\nimport { IgxTreeGridCellComponent } from './tree-cell.component';\nimport { IgxTreeGridFilteringPipe } from './tree-grid.filtering.pipe';\nimport { IgxTreeGridSummaryPipe } from './tree-grid.summary.pipe';\nimport { IgxRowLoadingIndicatorTemplateDirective } from './tree-grid.directives';\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxTreeGridComponent,\n    IgxTreeGridRowComponent,\n    IgxTreeGridCellComponent,\n    IgxTreeGridHierarchizingPipe,\n    IgxTreeGridFlatteningPipe,\n    IgxTreeGridSortingPipe,\n    IgxTreeGridFilteringPipe,\n    IgxTreeGridPagingPipe,\n    IgxTreeGridTransactionPipe,\n    IgxTreeGridSummaryPipe,\n    IgxRowLoadingIndicatorTemplateDirective,\n    IgxTreeGridNormalizeRecordsPipe\n  ],\n  exports: [\n    IgxTreeGridComponent,\n    IgxTreeGridRowComponent,\n    IgxTreeGridCellComponent,\n    IgxRowLoadingIndicatorTemplateDirective,\n    IgxGridCommonModule\n  ],\n  imports: [\n    IgxGridCommonModule,\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class IgxTreeGridModule {\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    HostBinding,\n    Input,\n    OnInit,\n    ViewChild,\n    AfterViewInit,\n    SimpleChanges,\n    ComponentFactoryResolver\n} from '@angular/core';\nimport { GridBaseAPIService } from '.././api.service';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxGridComponent } from '../grid/grid.component';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-child-grid-row',\n    templateUrl: './child-grid-row.component.html'\n})\nexport class IgxChildGridRowComponent implements AfterViewInit, OnInit {\nprivate resolver;\n\n    /**\n     * Returns whether the row is expanded.\n     * ```typescript\n     * const RowExpanded = this.grid1.rowList.first.expanded;\n     * ```\n     */\n    public expanded = false;\n\n    @Input()\n    layout: IgxRowIslandComponent;\n\n    /**\n     * @hidden\n     */\n    public get parentHasScroll() {\n        return !this.parentGrid.verticalScrollContainer.dc.instance.notVirtual;\n    }\n\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public parentGridID: string;\n\n    /**\n     *  The data passed to the row component.\n     *\n     * ```typescript\n     * // get the row data for the first selected row\n     * let selectedRowData = this.grid.selectedRows[0].rowData;\n     * ```\n     */\n    @Input()\n    public rowData: any = [];\n\n    /**\n     * The index of the row.\n     *\n     * ```typescript\n     * // get the index of the second selected row\n     * let selectedRowIndex = this.grid.selectedRows[1].index;\n     * ```\n     */\n    @Input()\n    public index: number;\n\n    @ViewChild('hgrid', { static: true })\n    public hGrid: any/* TODO: IgxHierarchicalGridComponent*/;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.role')\n    public role = 'row';\n\n    /**\n     * Get a reference to the grid that contains the selected row.\n     *\n     * ```typescript\n     * handleRowSelection(event) {\n     *  // the grid on which the onRowSelectionChange event was triggered\n     *  const grid = event.row.grid;\n     * }\n     * ```\n     *\n     * ```html\n     *  <igx-grid\n     *    [data]=\"data\"\n     *    (onRowSelectionChange)=\"handleRowSelection($event)\">\n     *  </igx-grid>\n     * ```\n     */\n    // TODO: Refactor\n    get parentGrid(): any/* TODO: IgxHierarchicalGridComponent*/ {\n        return this.gridAPI.grid;\n    }\n\n    @HostBinding('attr.data-level')\n    get level() {\n        return this.layout.level;\n    }\n\n    /**\n     * The native DOM element representing the row. Could be null in certain environments.\n     *\n     * ```typescript\n     * // get the nativeElement of the second selected row\n     * let selectedRowNativeElement = this.grid.selectedRows[1].nativeElement;\n     * ```\n     */\n    get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    constructor(public gridAPI: GridBaseAPIService<any/* TODO: IgxHierarchicalGridComponent*/>,\n        public element: ElementRef,\n        resolver: ComponentFactoryResolver,\n        public cdr: ChangeDetectorRef) {\n            this.resolver = resolver;\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        this.layout.onLayoutChange.subscribe((ch) => {\n            this._handleLayoutChanges(ch);\n        });\n        const changes = this.layout.initialChanges;\n        changes.forEach(change => {\n            this._handleLayoutChanges(change);\n        });\n        this.hGrid.parent = this.parentGrid;\n        this.hGrid.parentIsland = this.layout;\n        this.hGrid.childRow =  this;\n        // handler logic that re-emits hgrid events on the row island\n        this.setupEventEmitters();\n        this.layout.onGridCreated.emit({\n            owner: this.layout,\n            parentID: this.rowData.rowID,\n            grid: this.hGrid\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        this.hGrid.childLayoutList = this.layout.children;\n        const layouts = this.hGrid.childLayoutList.toArray();\n        layouts.forEach((l) => this.hGrid.hgridAPI.registerChildRowIsland(l));\n        this.parentGrid.hgridAPI.registerChildGrid(this.rowData.rowID, this.layout.key, this.hGrid);\n        this.layout.rowIslandAPI.registerChildGrid(this.rowData.rowID, this.hGrid);\n\n        this.layout.onGridInitialized.emit({\n            owner: this.layout,\n            parentID: this.rowData.rowID,\n            grid: this.hGrid\n        });\n\n        this.hGrid.cdr.detectChanges();\n    }\n\n    private setupEventEmitters() {\n        const destructor = takeUntil(this.hGrid.destroy$);\n\n        const factory = this.resolver.resolveComponentFactory(IgxGridComponent);\n        // exclude outputs related to two-way binding functionality\n        const inputNames = factory.inputs.map(input => input.propName);\n        const outputs = factory.outputs.filter(o => {\n            const matchingInputPropName = o.propName.slice(0, o.propName.indexOf('Change'));\n            return inputNames.indexOf(matchingInputPropName) === -1;\n        });\n\n        // TODO: Skip the `rendered` output. Rendered should be called once per grid.\n        outputs.filter(o => o.propName !== 'rendered').forEach(output => {\n            if (this.hGrid[output.propName]) {\n                this.hGrid[output.propName].pipe(destructor).subscribe((args) => {\n                    if (!args) {\n                        args = {};\n                    }\n                    args.owner = this.hGrid;\n                    this.layout[output.propName].emit(args);\n                });\n            }\n        });\n    }\n\n\n    private _handleLayoutChanges(changes: SimpleChanges) {\n        for (const change in changes) {\n            if (changes.hasOwnProperty(change)) {\n                this.hGrid[change] = changes[change].currentValue;\n            }\n        }\n    }\n}\n","import { IgxGridNavigationService } from '../grid-navigation.service';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { first } from 'rxjs/operators';\nimport { SUPPORTED_KEYS, NAVIGATION_KEYS } from '../../core/utils';\nimport { Injectable } from '@angular/core';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxRowDirective, IgxGridBaseDirective } from '../grid/public_api';\nimport { GridType } from '../common/grid.interface';\nimport { IPathSegment } from './hierarchical-grid-base.directive';\n\n@Injectable()\nexport class IgxHierarchicalGridNavigationService extends IgxGridNavigationService {\n    public grid: IgxHierarchicalGridComponent;\n\n    protected _pendingNavigation = false;\n\n\n    dispatchEvent(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        if (!this.activeNode || !(SUPPORTED_KEYS.has(key) || (key === 'tab' && this.grid.crudService.cell)) &&\n        !this.grid.crudService.rowEditingBlocked && !this.grid.rowInEditMode) { return; }\n\n        const targetGrid = this.getClosestElemByTag(event.target, 'igx-hierarchical-grid');\n        if (targetGrid !== this.grid.nativeElement) {\n            return;\n        }\n\n        if (this._pendingNavigation && NAVIGATION_KEYS.has(key)) {\n            // In case focus needs to be moved from one grid to another, however there is a pending scroll operation\n            // which is an async operation, any additional navigation keys should be ignored\n            // untill operation complete.\n            event.preventDefault();\n            return;\n        }\n        super.dispatchEvent(event);\n    }\n\n    public navigateInBody(rowIndex, visibleColIndex, cb: Function = null): void {\n        const rec = this.grid.dataView[rowIndex];\n        if (rec && this.grid.isChildGridRecord(rec)) {\n             // target is child grid\n            const virtState = this.grid.verticalScrollContainer.state;\n             const inView = rowIndex >= virtState.startIndex && rowIndex <= virtState.startIndex + virtState.chunkSize;\n             const isNext =  this.activeNode.row < rowIndex;\n             const targetLayoutIndex = isNext ? null : this.grid.childLayoutKeys.length - 1;\n             if (inView) {\n                this._moveToChild(rowIndex, visibleColIndex, isNext, targetLayoutIndex, cb);\n            } else {\n                let scrollAmount = this.grid.verticalScrollContainer.getScrollForIndex(rowIndex, !isNext);\n                scrollAmount += isNext ? 1 : -1;\n                this.grid.verticalScrollContainer.getScroll().scrollTop = scrollAmount;\n                this._pendingNavigation = true;\n                this.grid.verticalScrollContainer.onChunkLoad.pipe(first()).subscribe(() => {\n                    this._moveToChild(rowIndex, visibleColIndex, isNext, targetLayoutIndex, cb);\n                    this._pendingNavigation = false;\n                });\n            }\n            return;\n        }\n\n        const isLast = rowIndex === this.grid.dataView.length;\n        if ((rowIndex === -1 || isLast) &&\n            this.grid.parent !== null) {\n            // reached end of child grid\n            const nextSiblingIndex = this.nextSiblingIndex(isLast);\n            if (nextSiblingIndex !== null) {\n                this.grid.parent.navigation._moveToChild(this.grid.childRow.index, visibleColIndex, isLast, nextSiblingIndex, cb);\n            } else {\n                this._moveToParent(isLast, visibleColIndex, cb);\n            }\n            return;\n        }\n\n        if (this.grid.parent) {\n            const isNext = this.activeNode && typeof this.activeNode.row === 'number' ? rowIndex > this.activeNode.row : false;\n            const cbHandler = (args) => {\n                this._handleScrollInChild(rowIndex, isNext);\n                cb(args);\n            };\n            if (!this.activeNode) {\n                this.activeNode = { row: null, column: null };\n            }\n            super.navigateInBody(rowIndex, visibleColIndex, cbHandler);\n            return;\n        }\n\n        if (!this.activeNode) {\n            this.activeNode = { row: null, column: null };\n        }\n        super.navigateInBody(rowIndex, visibleColIndex, cb);\n    }\n\n    public shouldPerformVerticalScroll(index, visibleColumnIndex = -1, isNext?) {\n        const targetRec = this.grid.dataView[index];\n        if (this.grid.isChildGridRecord(targetRec)) {\n            const scrollAmount = this.grid.verticalScrollContainer.getScrollForIndex(index, !isNext);\n            const currScroll = this.grid.verticalScrollContainer.getScroll().scrollTop;\n            const shouldScroll = !isNext ? scrollAmount > currScroll : currScroll < scrollAmount;\n            return shouldScroll;\n        } else {\n            return super.shouldPerformVerticalScroll(index, visibleColumnIndex);\n        }\n    }\n\n    focusTbody(event) {\n        if (!this.activeNode || this.activeNode.row === null) {\n            this.activeNode = {\n                row: 0,\n                column: 0\n            };\n\n            this.grid.navigateTo(0, 0, (obj) => {\n                this.grid.clearCellSelection();\n                obj.target.activate(event);\n            });\n\n        } else {\n            super.focusTbody(event);\n        }\n    }\n\n    protected nextSiblingIndex(isNext) {\n        const layoutKey = this.grid.childRow.layout.key;\n        const layoutIndex = this.grid.parent.childLayoutKeys.indexOf(layoutKey);\n        const nextIndex = isNext ? layoutIndex + 1 : layoutIndex - 1;\n        if (nextIndex <= this.grid.parent.childLayoutKeys.length - 1 && nextIndex > -1) {\n            return nextIndex;\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Handles scrolling in child grid and ensures target child row is in main grid view port.\n     * @param rowIndex The row index which should be in view.\n     * @param isNext  Optional. Whether we are navigating to next. Used to determine scroll direction.\n     * @param cb  Optional.Callback function called when operation is complete.\n     */\n    protected _handleScrollInChild(rowIndex: number, isNext?: boolean, cb?: Function) {\n        const shouldScroll = this.shouldPerformVerticalScroll(rowIndex, -1, isNext);\n        if (shouldScroll) {\n            this.grid.navigation.performVerticalScrollToCell(rowIndex, -1, () => {\n                this.positionInParent(rowIndex, isNext, cb);\n            });\n        } else {\n            this.positionInParent(rowIndex, isNext, cb);\n        }\n    }\n\n    /**\n     *\n     * @param rowIndex Row index that should come in view.\n     * @param isNext  Whether we are navigating to next. Used to determine scroll direction.\n     * @param cb  Optional.Callback function called when operation is complete.\n     */\n    protected positionInParent(rowIndex, isNext, cb?: Function) {\n        const rowObj = this.grid.getRowByIndex(rowIndex);\n        if (!rowObj) {\n            if (cb) {\n                cb();\n            }\n            return;\n        }\n        const positionInfo = this.getPositionInfo(rowObj, isNext);\n        if (!positionInfo.inView) {\n            // stop event from triggering multiple times before scrolling is complete.\n            this._pendingNavigation = true;\n            const scrollableGrid = isNext ? this.getNextScrollableDown(this.grid) : this.getNextScrollableUp(this.grid);\n            scrollableGrid.grid.verticalScrollContainer.recalcUpdateSizes();\n            scrollableGrid.grid.verticalScrollContainer.addScrollTop(positionInfo.offset);\n            scrollableGrid.grid.verticalScrollContainer.onChunkLoad.pipe(first()).subscribe(() => {\n                this._pendingNavigation = false;\n                if (cb) {\n                    cb();\n                }\n            });\n        } else {\n            if (cb) {\n                cb();\n            }\n        }\n    }\n\n    /**\n     * Moves navigation to child grid.\n     * @param parentRowIndex The parent row index, at which the child grid is rendered.\n     * @param childLayoutIndex Optional. The index of the child row island to which the child grid belongs to. Uses first if not set.\n     */\n    protected _moveToChild(parentRowIndex: number, visibleColIndex: number, isNext: boolean, childLayoutIndex?: number, cb?: Function) {\n        const ri = typeof childLayoutIndex !== 'number' ?\n         this.grid.childLayoutList.first : this.grid.childLayoutList.toArray()[childLayoutIndex];\n        const rowId = this.grid.dataView[parentRowIndex].rowID;\n        const pathSegment: IPathSegment = {\n            rowID: rowId,\n            rowIslandKey: ri.key\n        };\n        const childGrid =  this.grid.hgridAPI.getChildGrid([pathSegment]);\n        const targetIndex = isNext ? 0 : childGrid.dataView.length - 1;\n        const targetRec =  childGrid.dataView[targetIndex];\n        if (!targetRec) {\n            // if no target rec, then move on in next sibling or parent\n            childGrid.navigation.navigateInBody(targetIndex, visibleColIndex, cb);\n            return;\n        }\n        if (childGrid.isChildGridRecord(targetRec)) {\n            // if target is a child grid record should move into it.\n            this.grid.navigation.activeNode.row = null;\n            childGrid.navigation.activeNode = { row: targetIndex, column: this.activeNode.column};\n            childGrid.navigation._handleScrollInChild(targetIndex, isNext, () => {\n                const targetLayoutIndex = isNext ? 0 : childGrid.childLayoutList.toArray().length - 1;\n                childGrid.navigation._moveToChild(targetIndex, visibleColIndex, isNext, targetLayoutIndex, cb);\n            });\n            return;\n        }\n\n        const childGridNav =  childGrid.navigation;\n        this.clearActivation();\n        const lastVisibleIndex = childGridNav.lastColumnIndex;\n        const columnIndex = visibleColIndex <= lastVisibleIndex ? visibleColIndex : lastVisibleIndex;\n        childGridNav.activeNode = { row: targetIndex, column: columnIndex};\n        childGrid.tbody.nativeElement.focus({preventScroll: true});\n        this._pendingNavigation = false;\n        childGrid.navigation._handleScrollInChild(targetIndex, isNext, () => {\n            childGrid.navigateTo(targetIndex, columnIndex, cb);\n        });\n    }\n\n    /**\n     * Moves navigation back to parent grid.\n     * @param rowIndex\n     */\n    protected _moveToParent(isNext: boolean, columnIndex, cb?) {\n        const indexInParent = this.grid.childRow.index;\n        const hasNextTarget = this.hasNextTarget(this.grid.parent, indexInParent, isNext);\n        if (!hasNextTarget) {\n            return;\n        }\n        this.clearActivation();\n        const targetRowIndex =  isNext ? indexInParent + 1 : indexInParent - 1;\n        const lastVisibleIndex = this.grid.parent.navigation.lastColumnIndex;\n        const nextColumnIndex = columnIndex <= lastVisibleIndex ? columnIndex : lastVisibleIndex;\n        this._pendingNavigation = true;\n        const cbFunc = (args) => {\n            this._pendingNavigation = false;\n            cb(args);\n            args.target.grid.tbody.nativeElement.focus();\n        };\n        this.grid.parent.navigation.navigateInBody(targetRowIndex, nextColumnIndex, cbFunc);\n    }\n\n    /**\n     * Gets information on the row position relative to the root grid view port.\n     * Returns whether the row is in view and its offset.\n     * @param rowObj\n     * @param isNext\n     */\n    protected getPositionInfo(rowObj: IgxRowDirective<IgxGridBaseDirective & GridType>, isNext: boolean) {\n        let rowElem = rowObj.nativeElement;\n        if (rowObj instanceof IgxChildGridRowComponent) {\n            const childLayoutKeys = this.grid.childLayoutKeys;\n            const riKey = isNext ? childLayoutKeys[0] : childLayoutKeys[childLayoutKeys.length - 1];\n            const pathSegment: IPathSegment = {\n                rowID: rowObj.rowData.rowID,\n                rowIslandKey: riKey\n            };\n            const childGrid =  this.grid.hgridAPI.getChildGrid([pathSegment]);\n            rowElem = childGrid.tfoot.nativeElement;\n        }\n        const gridBottom = this._getMinBottom(this.grid);\n        const diffBottom =\n        rowElem.getBoundingClientRect().bottom - gridBottom;\n        const gridTop = this._getMaxTop(this.grid);\n        const diffTop = rowElem.getBoundingClientRect().bottom -\n        rowElem.offsetHeight - gridTop;\n        const isInView = isNext ? diffBottom <= 0 : diffTop >= 0;\n        const calcOffset =  isNext ? diffBottom : diffTop;\n\n        return { inView: isInView, offset: calcOffset };\n    }\n\n    private clearActivation() {\n        // clear if previous activation exists.\n        if (this.activeNode) {\n            this.activeNode.row = null;\n        }\n    }\n\n    private hasNextTarget(grid, index: number, isNext: boolean) {\n        const targetRowIndex =  isNext ? index + 1 : index - 1;\n        const hasTargetRecord = !!grid.dataView[targetRowIndex];\n        if (hasTargetRecord) {\n            return true;\n        } else {\n            let hasTargetRecordInParent = false;\n            if (grid.parent) {\n                const indexInParent = grid.childRow.index;\n                hasTargetRecordInParent = this.hasNextTarget(grid.parent, indexInParent, isNext);\n            }\n            return hasTargetRecordInParent;\n        }\n    }\n\n    /**\n     * Gets closest element by its tag name.\n     * @param sourceElem The element from which to start the search.\n     * @param targetTag The target element tag name, for which to search.\n     */\n    protected getClosestElemByTag(sourceElem, targetTag) {\n        let result = sourceElem;\n        while (result !== null && result.nodeType === 1) {\n            if (result.tagName.toLowerCase() === targetTag.toLowerCase()) {\n                return result;\n            }\n            result = result.parentNode;\n        }\n        return null;\n    }\n\n    /**\n     * Gets the max top view in the current grid hierarchy.\n     * @param grid\n     */\n    private _getMaxTop(grid) {\n        let currGrid = grid;\n        let top = currGrid.tbody.nativeElement.getBoundingClientRect().top;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n            const pinnedRowsHeight = currGrid.hasPinnedRecords && currGrid.isRowPinningToTop ? currGrid.pinnedRowHeight : 0;\n            top = Math.max(top, currGrid.tbody.nativeElement.getBoundingClientRect().top + pinnedRowsHeight);\n        }\n        return top;\n    }\n\n    /**\n     * Gets the min bottom view in the current grid hierarchy.\n     * @param grid\n     */\n    private _getMinBottom(grid) {\n        let currGrid = grid;\n        let bottom = currGrid.tbody.nativeElement.getBoundingClientRect().bottom;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n            const pinnedRowsHeight = currGrid.hasPinnedRecords && !currGrid.isRowPinningToTop ? currGrid.pinnedRowHeight : 0;\n            bottom = Math.min(bottom, currGrid.tbody.nativeElement.getBoundingClientRect().bottom - pinnedRowsHeight);\n        }\n        return bottom;\n    }\n\n    /**\n     * Finds the next grid that allows scrolling down.\n     * @param grid The grid from which to begin the search.\n     */\n    private getNextScrollableDown(grid) {\n        let currGrid = grid.parent;\n        if (!currGrid) {\n            return { grid: grid, prev: null };\n        }\n        let scrollTop = currGrid.verticalScrollContainer.scrollPosition;\n        let scrollHeight = currGrid.verticalScrollContainer.getScroll().scrollHeight;\n        let nonScrollable = scrollHeight === 0 ||\n            Math.round(scrollTop + currGrid.verticalScrollContainer.igxForContainerSize) === scrollHeight;\n        let prev = grid;\n        while (nonScrollable && currGrid.parent !== null) {\n            prev = currGrid;\n            currGrid = currGrid.parent;\n            scrollTop = currGrid.verticalScrollContainer.scrollPosition;\n            scrollHeight = currGrid.verticalScrollContainer.getScroll().scrollHeight;\n            nonScrollable = scrollHeight === 0 ||\n                Math.round(scrollTop + currGrid.verticalScrollContainer.igxForContainerSize) === scrollHeight;\n        }\n        return { grid: currGrid, prev: prev };\n    }\n\n    /**\n     * Finds the next grid that allows scrolling up.\n     * @param grid The grid from which to begin the search.\n     */\n    private getNextScrollableUp(grid) {\n        let currGrid = grid.parent;\n        if (!currGrid) {\n            return { grid: grid, prev: null };\n        }\n        let nonScrollable = currGrid.verticalScrollContainer.scrollPosition === 0;\n        let prev = grid;\n        while (nonScrollable && currGrid.parent !== null) {\n            prev = currGrid;\n            currGrid = currGrid.parent;\n            nonScrollable = currGrid.verticalScrollContainer.scrollPosition === 0;\n        }\n        return { grid: currGrid, prev: prev };\n    }\n}\n","import {\n    ElementRef,\n    NgZone,\n    ChangeDetectorRef,\n    IterableDiffers,\n    ViewContainerRef,\n    Inject,\n    ComponentFactoryResolver,\n    Optional,\n    Input,\n    ViewChild,\n    TemplateRef,\n    Directive,\n    Output,\n    EventEmitter,\n    LOCALE_ID\n} from '@angular/core';\nimport { IgxGridBaseDirective, IgxGridTransaction } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridAPIService } from './hierarchical-grid-api.service';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IDisplayDensityOptions, DisplayDensityToken } from '../../core/displayDensity';\nimport { IgxSummaryOperand } from '../summaries/grid-summary';\nimport { IgxOverlayService, IgxTransactionService, Transaction, TransactionService, State } from '../../services/public_api';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxHierarchicalGridNavigationService } from './hierarchical-grid-navigation.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxColumnGroupComponent } from '../columns/column-group.component';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IForOfState } from '../../directives/for-of/for_of.directive';\n\nexport const IgxHierarchicalTransactionServiceFactory = {\n    provide: IgxGridTransaction,\n    useFactory: hierarchicalTransactionServiceFactory\n};\n\nexport function hierarchicalTransactionServiceFactory() {\n    return new IgxTransactionService();\n}\n\nexport interface IPathSegment {\n    rowID: any;\n    rowIslandKey: string;\n}\n\n@Directive()\nexport abstract class IgxHierarchicalGridBaseDirective extends IgxGridBaseDirective {\n    public abstract rootGrid;\n\n    public abstract expandChildren: boolean;\n\n    /**\n     * Gets/Sets the key indicating whether a row has children. If row has no children it does not render an expand indicator.\n     * @example\n     * ```html\n     * <igx-hierarchical-grid #grid [data]=\"localData\" [hasChildrenKey]=\"'hasEmployees'\">\n     * </igx-hierarchical-grid>\n     * ```\n     */\n    @Input()\n    public hasChildrenKey: string;\n\n    /**\n     * Gets/Sets whether the expand/collapse all button in the header should be rendered.\n     * @remark\n     * The default value is false.\n     * @example\n     * ```html\n     * <igx-hierarchical-grid #grid [data]=\"localData\" [showExpandAll]=\"true\">\n     * </igx-hierarchical-grid>\n     * ```\n     */\n    @Input()\n    public showExpandAll = false;\n\n    /**\n     * Emitted when a new chunk of data is loaded from virtualization.\n     * @example\n     * ```typescript\n     *  <igx-hierarchical-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [autoGenerate]=\"true\" (onDataPreLoad)=\"handleEvent()\">\n     *  </igx-hierarchical-grid>\n     * ```\n     */\n    @Output()\n    public onDataPreLoad = new EventEmitter<IForOfState>();\n\n    /**\n     * @hidden\n     */\n    get maxLevelHeaderDepth() {\n        if (this._maxLevelHeaderDepth === null) {\n            this._maxLevelHeaderDepth = this.columnList.reduce((acc, col) => Math.max(acc, col.level), 0);\n        }\n        return this._maxLevelHeaderDepth;\n    }\n\n    /**\n     * Gets the outlet used to attach the grid's overlays to.\n     * @remark\n     * If set, returns the outlet defined outside the grid. Otherwise returns the grid's internal outlet directive.\n     */\n    get outlet() {\n        return this.rootGrid ? this.rootGrid.resolveOutlet() : this.resolveOutlet();\n    }\n\n    /**\n     * Sets the outlet used to attach the grid's overlays to.\n     */\n    set outlet(val: any) {\n        this._userOutletDirective = val;\n    }\n\n    /**\n     * @hidden\n     */\n    public hgridAPI: IgxHierarchicalGridAPIService;\n\n    /**\n     * @hidden\n     */\n    public parentIsland: IgxRowIslandComponent;\n\n    /**\n     * @hidden\n     */\n    public childRow: IgxChildGridRowComponent;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @ViewChild('dragIndicatorIconBase', { read: TemplateRef, static: true })\n    public dragIndicatorIconBase: TemplateRef<any>;\n\n    constructor(\n        public selectionService: IgxGridSelectionService,\n        crudService: IgxGridCRUDService,\n        public colResizingService: IgxColumnResizingService,\n        gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        @Inject(IgxGridTransaction) protected transactionFactory: TransactionService<Transaction, State>,\n        elementRef: ElementRef,\n        zone: NgZone,\n        @Inject(DOCUMENT) public document,\n        cdr: ChangeDetectorRef,\n        resolver: ComponentFactoryResolver,\n        differs: IterableDiffers,\n        viewRef: ViewContainerRef,\n        navigation: IgxHierarchicalGridNavigationService,\n        filteringService: IgxFilteringService,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        public summaryService: IgxGridSummaryService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        @Inject(LOCALE_ID) localeId: string) {\n        super(\n            selectionService,\n            crudService,\n            colResizingService,\n            gridAPI,\n            transactionFactory,\n            elementRef,\n            zone,\n            document,\n            cdr,\n            resolver,\n            differs,\n            viewRef,\n            navigation,\n            filteringService,\n            overlayService,\n            summaryService,\n            _displayDensityOptions,\n            localeId);\n        this.hgridAPI = <IgxHierarchicalGridAPIService>gridAPI;\n    }\n\n    /**\n     * @hidden\n     */\n    public createColumnsList(cols: Array<any>) {\n        const columns = [];\n        const topLevelCols = this.onlyTopLevel(cols);\n        topLevelCols.forEach((col) => {\n            const ref = this._createColumn(col);\n            ref.changeDetectorRef.detectChanges();\n            columns.push(ref.instance);\n        });\n        const result = flatten(columns);\n        this.columnList.reset(result);\n        this.columnList.notifyOnChanges();\n        this.initPinning();\n    }\n\n    protected _createColumn(col) {\n        let ref;\n        if (col instanceof IgxColumnGroupComponent) {\n            ref = this._createColGroupComponent(col);\n        } else {\n            ref = this._createColComponent(col);\n        }\n        return ref;\n    }\n\n    protected _createColGroupComponent(col: IgxColumnGroupComponent) {\n        const factoryGroup = this.resolver.resolveComponentFactory(IgxColumnGroupComponent);\n        const ref = this.viewRef.createComponent(factoryGroup, null, this.viewRef.injector);\n        ref.changeDetectorRef.detectChanges();\n        factoryGroup.inputs.forEach((input) => {\n            const propName = input.propName;\n            (<any>ref.instance)[propName] = (<any>col)[propName];\n        });\n        if (col.children.length > 0) {\n            const newChildren = [];\n            col.children.forEach(child => {\n                const newCol = this._createColumn(child).instance;\n                newCol.parent = ref.instance;\n                newChildren.push(newCol);\n            });\n            (<IgxColumnGroupComponent>ref.instance).children.reset(newChildren);\n            (<IgxColumnGroupComponent>ref.instance).children.notifyOnChanges();\n        }\n        return ref;\n    }\n\n    protected _createColComponent(col) {\n        const factoryColumn = this.resolver.resolveComponentFactory(IgxColumnComponent);\n        const ref = this.viewRef.createComponent(factoryColumn, null, this.viewRef.injector);\n        factoryColumn.inputs.forEach((input) => {\n            const propName = input.propName;\n            if (!((<any>col)[propName] instanceof IgxSummaryOperand)) {\n                (<any>ref.instance)[propName] = (<any>col)[propName];\n            } else {\n                (<any>ref.instance)[propName] = col[propName].constructor;\n            }\n        });\n        return ref;\n    }\n\n    protected getGridsForIsland(rowIslandID: string) {\n        return this.hgridAPI.getChildGridsForRowIsland(rowIslandID);\n    }\n\n    protected getChildGrid(path: Array<IPathSegment>) {\n        if (!path) {\n            return;\n        }\n        return this.hgridAPI.getChildGrid(path);\n    }\n}\n\nfunction flatten(arr: any[]) {\n    let result = [];\n\n    arr.forEach(el => {\n        result.push(el);\n        if (el.children) {\n            result = result.concat(flatten(el.children.toArray()));\n        }\n    });\n    return result;\n}\n","import { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { Subject } from 'rxjs';\nimport { IPathSegment } from './hierarchical-grid-base.directive';\nimport { IgxGridBaseDirective, GridBaseAPIService } from '../grid/public_api';\nimport { GridType } from '../common/grid.interface';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxHierarchicalGridAPIService extends GridBaseAPIService<IgxGridBaseDirective & GridType> {\n    protected childRowIslands: Map<string, IgxRowIslandComponent> = new Map<string, IgxRowIslandComponent>();\n    protected childGrids:  Map<string, Map<any, IgxHierarchicalGridComponent>> =\n        new Map<string, Map<any, IgxHierarchicalGridComponent>>();\n\n    registerChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childRowIslands.set(rowIsland.key, rowIsland);\n        this.destroyMap.set(rowIsland.key, new Subject<boolean>());\n    }\n\n    unsetChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childGrids.delete(rowIsland.key);\n        this.childRowIslands.delete(rowIsland.key);\n        this.destroyMap.delete(rowIsland.key);\n    }\n\n    getChildRowIsland(key: string) {\n        return this.childRowIslands.get(key);\n    }\n\n    getChildGrid(path: Array<IPathSegment>) {\n        const currPath = path;\n        let grid;\n        const pathElem = currPath.shift();\n        const childrenForLayout = this.childGrids.get(pathElem.rowIslandKey);\n        if (childrenForLayout) {\n            const childGrid = childrenForLayout.get(pathElem.rowID);\n            if (currPath.length === 0) {\n                grid = childGrid;\n            } else {\n                grid = childGrid.hgridAPI.getChildGrid(currPath);\n            }\n        }\n        return grid;\n    }\n\n    getChildGrids(inDepth?: boolean) {\n        const allChildren = [];\n        this.childGrids.forEach((layoutMap) => {\n            layoutMap.forEach((grid) => {\n                allChildren.push(grid);\n                if (inDepth) {\n                    const children = grid.hgridAPI.getChildGrids(inDepth);\n                    children.forEach((item) => {\n                        allChildren.push(item);\n                    });\n                }\n            });\n        });\n\n        return allChildren;\n    }\n\n    getParentRowId(childGrid: IgxHierarchicalGridComponent) {\n        let rowID;\n        this.childGrids.forEach((layoutMap) => {\n            layoutMap.forEach((grid, key) => {\n                if (grid === childGrid) {\n                    rowID = key;\n                    return;\n                }\n            });\n        });\n        return rowID;\n    }\n\n    registerChildGrid(parentRowID: string|object, rowIslandKey: string, grid: IgxHierarchicalGridComponent) {\n        let childrenForLayout = this.childGrids.get(rowIslandKey);\n        if (!childrenForLayout) {\n            this.childGrids.set(rowIslandKey, new Map<any, IgxHierarchicalGridComponent>());\n            childrenForLayout = this.childGrids.get(rowIslandKey);\n        }\n        childrenForLayout.set(parentRowID, grid);\n    }\n\n    getChildGridsForRowIsland(rowIslandKey): IgxHierarchicalGridComponent[] {\n        const childrenForLayout = this.childGrids.get(rowIslandKey);\n        const children = [];\n        if (childrenForLayout) {\n            childrenForLayout.forEach((child) => {\n                children.push(child);\n            });\n        }\n        return children;\n    }\n\n    getChildGridByID(rowIslandKey, rowID) {\n        const childrenForLayout = this.childGrids.get(rowIslandKey);\n        return childrenForLayout.get(rowID);\n    }\n\n    public get_row_expansion_state(record: any): boolean {\n        let inState;\n        if (record.childGridsData !== undefined) {\n            const ri = record.rowID;\n            const states = this.grid.expansionStates;\n            const expanded = states.get(ri);\n            if (expanded !== undefined) {\n                return expanded;\n            } else {\n                return this.grid.getDefaultExpandState(record);\n            }\n        } else {\n            inState = !!super.get_row_expansion_state(record);\n        }\n        return inState && (this.grid as any).childLayoutList.length !== 0;\n    }\n\n    public allow_expansion_state_change(rowID, expanded): boolean {\n        const rec = this.get_rec_by_id(rowID);\n        const grid = (this.grid as any);\n        if (grid.hasChildrenKey && !rec[grid.hasChildrenKey]) {\n            return false;\n        }\n        return !!rec && this.grid.expansionStates.get(rowID) !== expanded;\n    }\n\n    public get_rec_by_id(rowID): any {\n        const data = this.get_all_data(false);\n        const index = this.get_row_index_in_data(rowID, data);\n        return data[index];\n    }\n}\n","import { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { Subject } from 'rxjs';\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class IgxRowIslandAPIService {\n    public rowIsland: IgxRowIslandComponent;\n    public change: Subject<any> = new Subject<any>();\n    protected state: Map<string, IgxRowIslandComponent> = new Map<string, IgxRowIslandComponent>();\n    protected destroyMap: Map<string, Subject<boolean>> = new Map<string, Subject<boolean>>();\n\n    protected childRowIslands: Map<string, IgxRowIslandComponent> = new Map<string, IgxRowIslandComponent>();\n    protected childGrids:  Map<any, IgxHierarchicalGridComponent> = new Map<any, IgxHierarchicalGridComponent>();\n\n    public register(rowIsland: IgxRowIslandComponent) {\n        this.state.set(rowIsland.id, rowIsland);\n        this.destroyMap.set(rowIsland.id, new Subject<boolean>());\n    }\n\n    public unsubscribe(rowIsland: IgxRowIslandComponent) {\n        this.state.delete(rowIsland.id);\n    }\n\n    public get(id: string): IgxRowIslandComponent {\n        return this.state.get(id);\n    }\n\n    public unset(id: string) {\n        this.state.delete(id);\n        this.destroyMap.delete(id);\n    }\n\n    public reset(oldId: string, newId: string) {\n        const destroy = this.destroyMap.get(oldId);\n        const rowIsland = this.get(oldId);\n\n        this.unset(oldId);\n\n        if (rowIsland) {\n            this.state.set(newId, rowIsland);\n        }\n\n        if (destroy) {\n            this.destroyMap.set(newId, destroy);\n        }\n    }\n\n    registerChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childRowIslands.set(rowIsland.key, rowIsland);\n        this.destroyMap.set(rowIsland.key, new Subject<boolean>());\n    }\n\n    unsetChildRowIsland(rowIsland: IgxRowIslandComponent) {\n        this.childRowIslands.delete(rowIsland.key);\n        this.destroyMap.delete(rowIsland.key);\n    }\n\n    getChildRowIsland(rowIslandKey: string) {\n        return this.childRowIslands.get(rowIslandKey);\n    }\n\n    registerChildGrid(parentRowID: string|object, grid: IgxHierarchicalGridComponent) {\n        this.childGrids.set(parentRowID, grid);\n    }\n\n    getChildGrids(inDepth?: boolean) {\n        let allChildren = [];\n        this.childGrids.forEach((grid) => {\n            allChildren.push(grid);\n        });\n        if (inDepth) {\n            this.childRowIslands.forEach((layout) => {\n                allChildren = allChildren.concat(layout.rowIslandAPI.getChildGrids(inDepth));\n            });\n        }\n\n        return allChildren;\n    }\n\n    getChildGridByID(rowID) {\n        return this.childGrids.get(rowID);\n    }\n}\n","import {\n    AfterContentInit,\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ComponentFactoryResolver,\n    ContentChild,\n    ContentChildren,\n    DoCheck,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Input,\n    IterableChangeRecord,\n    IterableDiffers,\n    LOCALE_ID,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewContainerRef\n} from '@angular/core';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxGridTransaction, IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridAPIService } from './hierarchical-grid-api.service';\nimport { DOCUMENT } from '@angular/common';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IDisplayDensityOptions, DisplayDensityToken } from '../../core/displayDensity';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxHierarchicalGridBaseDirective } from './hierarchical-grid-base.directive';\nimport { IgxHierarchicalGridNavigationService } from './hierarchical-grid-navigation.service';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxOverlayService } from '../../services/public_api';\nimport { first, filter, takeUntil, pluck } from 'rxjs/operators';\nimport { IgxColumnComponent } from '../columns/column.component';\nimport { IgxRowIslandAPIService } from './row-island-api.service';\nimport { IBaseEventArgs } from '../../core/utils';\nimport { IgxColumnResizingService } from '../resizing/resizing.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxGridToolbarDirective, IgxGridToolbarTemplateContext } from '../toolbar/common';\nimport { IgxActionStripComponent } from '../../action-strip/action-strip.component';\n\nexport interface IGridCreatedEventArgs extends IBaseEventArgs {\n    owner: IgxRowIslandComponent;\n    parentID: any;\n    grid: IgxHierarchicalGridComponent;\n}\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-row-island',\n    template: ``,\n    providers: [IgxRowIslandAPIService,\n        IgxGridSelectionService]\n})\nexport class IgxRowIslandComponent extends IgxHierarchicalGridBaseDirective\n    implements AfterContentInit, AfterViewInit, OnChanges, OnInit, OnDestroy, DoCheck {\n    /**\n     * Sets the key of the row island by which child data would be taken from the row data if such is provided.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\">\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Input()\n    public key: string;\n\n    /**\n     * Sets if all immediate children of the grids for this `IgxRowIslandComponent` should be expanded/collapsed.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\" [expandChildren]=\"true\" #rowIsland>\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Input()\n    set expandChildren(value: boolean) {\n        this._defaultExpandState = value;\n        this.rowIslandAPI.getChildGrids().forEach((grid) => {\n            if (document.body.contains(grid.nativeElement)) {\n                // Detect changes right away if the grid is visible\n                grid.expandChildren = value;\n                grid.markForCheck();\n            } else {\n                // Else defer the detection on changes when the grid gets into view for performance.\n                grid.updateOnRender = true;\n            }\n        });\n    }\n\n    /**\n     * Gets if all immediate children of the grids for this `IgxRowIslandComponent` have been set to be expanded/collapsed.\n     * ```typescript\n     * const expanded = this.rowIsland.expandChildren;\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    get expandChildren(): boolean {\n        return this._defaultExpandState;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxRowIslandComponent, { read: IgxRowIslandComponent, descendants: false })\n    public children = new QueryList<IgxRowIslandComponent>();\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxColumnComponent, { read: IgxColumnComponent, descendants: false })\n    public childColumns = new QueryList<IgxColumnComponent>();\n\n    @ContentChild(IgxGridToolbarDirective, { read: TemplateRef })\n    public islandToolbarTemplate: TemplateRef<IgxGridToolbarTemplateContext>;\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public onLayoutChange = new EventEmitter<any>();\n\n    /**\n     * Event emmited when a grid is being created based on this row island.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\" (onGridCreated)=\"gridCreated($event)\" #rowIsland>\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Output()\n    public onGridCreated = new EventEmitter<IGridCreatedEventArgs>();\n\n    /**\n     * Emitted after a grid is being initialized for this row island.\n     * The emitting is done in `ngAfterViewInit`.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\">\n     *      <igx-row-island [key]=\"'childData'\" (onGridInitialized)=\"gridInitialized($event)\" #rowIsland>\n     *          <!-- ... -->\n     *      </igx-row-island>\n     * </igx-hierarchical-grid>\n     * ```\n     * @memberof IgxRowIslandComponent\n     */\n    @Output()\n    public onGridInitialized = new EventEmitter<IGridCreatedEventArgs>();\n\n    /**\n     * @hidden\n     */\n    get id() {\n        const pId = this.parentId ? this.parentId.substring(this.parentId.indexOf(this.layout_id) + this.layout_id.length) + '-' : '';\n        return this.layout_id + pId + this.key;\n    }\n\n    /**\n     * @hidden\n     */\n    get parentId() {\n        return this.parentIsland ? this.parentIsland.id : null;\n    }\n\n    /**\n     * @hidden\n     */\n    get level() {\n        let ptr = this.parentIsland;\n        let lvl = 0;\n        while (ptr) {\n            lvl++;\n            ptr = ptr.parentIsland;\n        }\n        return lvl + 1;\n    }\n\n    /**\n     * @hidden\n     */\n    public initialChanges = [];\n\n    private ri_columnListDiffer;\n\n    /**\n     * @hidden\n     */\n    public rootGrid = null;\n    readonly data: any[];\n    readonly filteredData: any[];\n    private layout_id = `igx-row-island-`;\n    private isInit = false;\n\n    constructor(\n        public selectionService: IgxGridSelectionService,\n        crudService: IgxGridCRUDService,\n        public colResizingService: IgxColumnResizingService,\n        gridAPI: GridBaseAPIService<IgxGridBaseDirective & GridType>,\n        @Inject(IgxGridTransaction) protected transactionFactory: any,\n        elementRef: ElementRef,\n        zone: NgZone,\n        @Inject(DOCUMENT) public document,\n        cdr: ChangeDetectorRef,\n        resolver: ComponentFactoryResolver,\n        differs: IterableDiffers,\n        viewRef: ViewContainerRef,\n        navigation: IgxHierarchicalGridNavigationService,\n        filteringService: IgxFilteringService,\n        @Inject(IgxOverlayService) protected overlayService: IgxOverlayService,\n        public summaryService: IgxGridSummaryService,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        public rowIslandAPI: IgxRowIslandAPIService,\n        @Inject(LOCALE_ID) localeId: string) {\n        super(\n            selectionService,\n            crudService,\n            colResizingService,\n            gridAPI,\n            typeof transactionFactory === 'function' ? transactionFactory() : transactionFactory,\n            elementRef,\n            zone,\n            document,\n            cdr,\n            resolver,\n            differs,\n            viewRef,\n            navigation,\n            filteringService,\n            overlayService,\n            summaryService,\n            _displayDensityOptions,\n            localeId\n        );\n        this.hgridAPI = <IgxHierarchicalGridAPIService>gridAPI;\n    }\n\n    @ContentChildren(IgxActionStripComponent, { read: IgxActionStripComponent, descendants: false })\n    public actionStrips: QueryList<IgxActionStripComponent>;\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        this.rootGrid = this.hgridAPI.grid;\n        this.rowIslandAPI.rowIsland = this;\n        this.ri_columnListDiffer = this.differs.find([]).create(null);\n    }\n\n    /**\n     * @hidden\n     */\n    ngDoCheck() {\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterContentInit() {\n        this.updateChildren();\n        this.children.notifyOnChanges();\n        this.children.changes.pipe(takeUntil(this.destroy$))\n            .subscribe((change) => {\n                this.updateChildren();\n                // update existing grids since their child ri have been changed.\n                this.getGridsForIsland(this.key).forEach(grid => {\n                    (grid as any).onRowIslandChange(this.children);\n                });\n            });\n        const nestedColumns = this.children.map((layout) => layout.columnList.toArray());\n        const colsArray = [].concat.apply([], nestedColumns);\n        const topCols = this.columnList.filter((item) => {\n            return colsArray.indexOf(item) === -1;\n        });\n        this.childColumns.reset(topCols);\n        this.columnList.changes.pipe(takeUntil(this.destroy$)).subscribe(() => {\n            Promise.resolve().then(() => {\n                this.updateColumnList();\n            });\n        });\n\n        // handle column changes so that they are passed to child grid instances when onColumnChange is emitted.\n        this.ri_columnListDiffer.diff(this.childColumns);\n        this.childColumns.toArray().forEach(x => x.onColumnChange.pipe(takeUntil(x.destroy$)).subscribe(() => this.updateColumnList()));\n        this.childColumns.changes.pipe(takeUntil(this.destroy$)).subscribe((change: QueryList<IgxColumnComponent>) => {\n            const diff = this.ri_columnListDiffer.diff(change);\n            if (diff) {\n                diff.forEachAddedItem((record: IterableChangeRecord<IgxColumnComponent>) => {\n                    record.item.onColumnChange.pipe(takeUntil(record.item.destroy$)).subscribe(() => this.updateColumnList());\n                });\n            }\n         });\n         this.actionStrip = this.actionStrips.first;\n         if (this.actionStrip) {\n            this.actionStrip.menuOverlaySettings.outlet = this.outlet;\n        }\n    }\n\n    protected updateChildren() {\n        if (this.children.first === this) {\n            this.children.reset(this.children.toArray().slice(1));\n        }\n        this.children.forEach(child => {\n            child.parentIsland = this;\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        this.rowIslandAPI.register(this);\n        if (this.parentIsland) {\n            this.parentIsland.rowIslandAPI.registerChildRowIsland(this);\n        } else {\n            this.rootGrid.hgridAPI.registerChildRowIsland(this);\n        }\n        this._init = false;\n\n        // Create the child toolbar if the parent island has a toolbar definition\n        this.onGridCreated.pipe(pluck('grid'), takeUntil(this.destroy$)).subscribe(grid => {\n            grid.rendered$.pipe(first(), filter(() => !!this.islandToolbarTemplate))\n                .subscribe(() => grid.toolbarOutlet.createEmbeddedView(this.islandToolbarTemplate, { $implicit: grid }));\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnChanges(changes) {\n        this.onLayoutChange.emit(changes);\n        if (!this.isInit) {\n            this.initialChanges.push(changes);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnDestroy() {\n        // Override the base destroy because we don't have rendered anything to use removeEventListener on\n        this.destroy$.next(true);\n        this.destroy$.complete();\n        this._destroyed = true;\n        this.rowIslandAPI.unset(this.id);\n        if (this.parentIsland) {\n            this.getGridsForIsland(this.key).forEach(grid => {\n                this.cleanGridState(grid);\n                grid.hgridAPI.unsetChildRowIsland(this);\n            });\n            this.parentIsland.rowIslandAPI.unsetChildRowIsland(this);\n        } else {\n            this.rootGrid.hgridAPI.unsetChildRowIsland(this);\n            this.cleanGridState(this.rootGrid);\n        }\n    }\n\n    private cleanGridState(grid) {\n        grid.childGridTemplates.forEach((tmpl) => {\n            tmpl.owner.cleanView(tmpl.context.templateID);\n        });\n        grid.childGridTemplates.clear();\n        grid.onRowIslandChange();\n    }\n\n    /**\n     * @hidden\n     */\n    reflow() { }\n\n    /**\n     * @hidden\n     */\n    calculateGridHeight() { }\n\n    protected updateColumnList() {\n        const nestedColumns = this.children.map((layout) => layout.columnList.toArray());\n        const colsArray = [].concat.apply([], nestedColumns);\n        const topCols = this.columnList.filter((item) => {\n            if (colsArray.indexOf(item) === -1) {\n                /* Reset the default width of the columns that come into this row island,\n                because the root catches them first during the detectChanges() and sets their defaultWidth. */\n                item.defaultWidth = undefined;\n                return true;\n            }\n            return false;\n        });\n        this.childColumns.reset(topCols);\n\n        if (this.parentIsland) {\n            this.parentIsland.columnList.notifyOnChanges();\n        } else {\n            this.rootGrid.columnList.notifyOnChanges();\n        }\n\n        this.rowIslandAPI.getChildGrids().forEach((grid: IgxHierarchicalGridComponent) => {\n            grid.createColumnsList(this.childColumns.toArray());\n            if (!document.body.contains(grid.nativeElement)) {\n                grid.updateOnRender = true;\n            }\n        });\n    }\n}\n","import {\n    AfterContentInit,\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    ContentChildren,\n    DoCheck,\n    ElementRef,\n    forwardRef,\n    HostBinding,\n    Input,\n    OnDestroy,\n    OnInit,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    ViewContainerRef\n} from '@angular/core';\nimport { IgxGridBaseDirective } from '../grid-base.directive';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridAPIService } from './hierarchical-grid-api.service';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxFilteringService } from '../filtering/grid-filtering.service';\nimport { IgxColumnComponent, } from '../columns/column.component';\nimport { IgxHierarchicalGridNavigationService } from './hierarchical-grid-navigation.service';\nimport { IgxGridSummaryService } from '../summaries/grid-summary.service';\nimport { IgxHierarchicalGridBaseDirective } from './hierarchical-grid-base.directive';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxTemplateOutletDirective } from '../../directives/template-outlet/template_outlet.directive';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { IgxTransactionService } from '../../services/public_api';\nimport { IgxForOfSyncService, IgxForOfScrollSyncService } from '../../directives/for-of/for_of.sync.service';\nimport { GridType } from '../common/grid.interface';\nimport { IgxRowIslandAPIService } from './row-island-api.service';\nimport { IgxGridToolbarDirective, IgxGridToolbarTemplateContext } from '../toolbar/common';\n\nlet NEXT_ID = 0;\n\nexport interface HierarchicalStateRecord {\n    rowID: any;\n}\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    preserveWhitespaces: false,\n    selector: 'igx-hierarchical-grid',\n    templateUrl: 'hierarchical-grid.component.html',\n    providers: [\n        IgxGridSelectionService,\n        IgxGridCRUDService,\n        { provide: GridBaseAPIService, useClass: IgxHierarchicalGridAPIService },\n        { provide: IgxGridBaseDirective, useExisting: forwardRef(() => IgxHierarchicalGridComponent) },\n        IgxGridSummaryService,\n        IgxFilteringService,\n        IgxHierarchicalGridNavigationService,\n        IgxForOfSyncService,\n        IgxForOfScrollSyncService,\n        IgxRowIslandAPIService\n    ]\n})\nexport class IgxHierarchicalGridComponent extends IgxHierarchicalGridBaseDirective\n    implements GridType, AfterViewInit, AfterContentInit, OnInit, OnDestroy, DoCheck {\n\n    /**\n     * Gets/Sets the value of the `id` attribute.\n     * @remarks\n     * If not provided it will be automatically generated.\n     * @example\n     * ```html\n     * <igx-hierarchical-grid [id]=\"'igx-hgrid-1'\" [data]=\"Data\" [autoGenerate]=\"true\"></igx-hierarchical-grid>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public get id(): string {\n        return this.h_id;\n    }\n    public set id(value: string) {\n        this.h_id = value;\n    }\n\n    /**\n     * An @Input property that lets you fill the `IgxHierarchicalGridComponent` with an array of data.\n     * ```html\n     * <igx-hierarchical-grid [data]=\"Data\" [autoGenerate]=\"true\"></igx-hierarchical-grid>\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    @Input()\n    public set data(value: any[]) {\n        this._data = value || [];\n        this.summaryService.clearSummaryCache();\n        if (this.shouldGenerate) {\n            this.setupColumns();\n            this.reflow();\n        }\n        this.cdr.markForCheck();\n        if (this.parent && (this.height === null || this.height.indexOf('%') !== -1)) {\n            // If the height will change based on how much data there is, recalculate sizes in igxForOf.\n            this.notifyChanges(true);\n        }\n    }\n\n    /**\n     * Returns an array of data set to the `IgxHierarchicalGridComponent`.\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public get data(): any[] {\n        return this._data;\n    }\n\n\n    /**\n     * Sets an array of objects containing the filtered data in the `IgxHierarchicalGridComponent`.\n     * ```typescript\n     * this.grid.filteredData = [{\n     *       ID: 1,\n     *       Name: \"A\"\n     * }];\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public set filteredData(value) {\n        this._filteredData = value;\n    }\n\n    /**\n     * Returns an array of objects containing the filtered data in the `IgxHierarchicalGridComponent`.\n     * ```typescript\n     * let filteredData = this.grid.filteredData;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public get filteredData() {\n        return this._filteredData;\n    }\n\n    /**\n     * Gets/Sets the total number of records in the data source.\n     * @remarks\n     * This property is required for remote grid virtualization to function when it is bound to remote data.\n     * @example\n     * ```typescript\n     * const itemCount = this.grid1.totalItemCount;\n     * this.grid1.totalItemCount = 55;\n     * ```\n     */\n    set totalItemCount(count) {\n        this.verticalScrollContainer.totalItemCount = count;\n        this.cdr.detectChanges();\n    }\n\n    get totalItemCount() {\n        return this.verticalScrollContainer.totalItemCount;\n    }\n\n    /**\n     * Sets if all immediate children of the `IgxHierarchicalGridComponent` should be expanded/collapsed.\n     * Defult value is false.\n     * ```html\n     * <igx-hierarchical-grid [id]=\"'igx-grid-1'\" [data]=\"Data\" [autoGenerate]=\"true\" [expandChildren]=\"true\"></igx-hierarchical-grid>\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    @Input()\n    set expandChildren(value: boolean) {\n        this._defaultExpandState  = value;\n        this.expansionStates = new Map<any, boolean>();\n    }\n\n    /**\n     * Gets if all immediate children of the `IgxHierarchicalGridComponent` previously have been set to be expanded/collapsed.\n     * If previously set and some rows have been manually expanded/collapsed it will still return the last set value.\n     * ```typescript\n     * const expanded = this.grid.expandChildren;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    get expandChildren(): boolean {\n        return this._defaultExpandState ;\n    }\n\n    /**\n     * Gets the unique identifier of the parent row. It may be a `string` or `number` if `primaryKey` of the\n     * parent grid is set or an object reference of the parent record otherwise.\n     * ```typescript\n     * const foreignKey = this.grid.foreignKey;\n     * ```\n     * @memberof IgxHierarchicalGridComponent\n     */\n    public get foreignKey() {\n        if (!this.parent) {\n            return null;\n        }\n        return this.parent.hgridAPI.getParentRowId(this);\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxRowIslandComponent, { read: IgxRowIslandComponent, descendants: false })\n    public childLayoutList: QueryList<IgxRowIslandComponent>;\n\n    /**\n     * @hidden\n     */\n    @ContentChildren(IgxRowIslandComponent, { read: IgxRowIslandComponent, descendants: true })\n    public allLayoutList: QueryList<IgxRowIslandComponent>;\n\n    @ViewChild('hierarchical_record_template', { read: TemplateRef, static: true })\n    protected hierarchicalRecordTemplate: TemplateRef<any>;\n\n    @ViewChild('child_record_template', { read: TemplateRef, static: true })\n    protected childTemplate: TemplateRef<any>;\n\n    @ViewChild('headerHierarchyExpander', { read: ElementRef, static: true })\n    protected headerHierarchyExpander: ElementRef;\n\n    @ContentChild(IgxGridToolbarDirective, { read: TemplateRef, static: true })\n    public toolbarTemplate: TemplateRef<IgxGridToolbarTemplateContext>;\n\n    @ViewChild('toolbarOutlet', { read: ViewContainerRef })\n    public toolbarOutlet: ViewContainerRef;\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxTemplateOutletDirective, { read: IgxTemplateOutletDirective })\n    public templateOutlets: QueryList<any>;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxChildGridRowComponent, { read: IgxChildGridRowComponent })\n    public hierarchicalRows: QueryList<IgxChildGridRowComponent>;\n\n    /**\n     * @hidden\n     */\n    get hasExpandableChildren() {\n        return !!this.childLayoutKeys.length;\n    }\n\n    /**\n     * @hidden\n     */\n    public childLayoutKeys = [];\n\n    /**\n     * @hidden\n     */\n    public highlightedRowID = null;\n\n    /**\n     * @hidden\n     */\n    public updateOnRender = false;\n\n    /**\n     * @hidden\n     */\n    public parent = null;\n\n    private _data;\n    private _filteredData = null;\n    private h_id = `igx-hierarchical-grid-${NEXT_ID++}`;\n    private childGridTemplates: Map<any, any> = new Map();\n    private scrollTop = 0;\n    private scrollLeft = 0;\n\n    /**\n     * @hidden\n     */\n    public hideActionStrip(event: MouseEvent) {\n        if (!this.parent) {\n            // hide child layout actions strips when\n            // moving outside root grid.\n            super.hideActionStrip(event);\n            this.allLayoutList.forEach(ri => {\n                ri.actionStrip?.hide();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        if (this._transactions instanceof IgxTransactionService) {\n            // transaction service cannot be injected in a derived class in a factory manner\n            this._transactions = new IgxTransactionService();\n        }\n        this.expansionStatesChange.pipe(takeUntil(this.destroy$)).subscribe((value: Map<any, boolean>) => {\n            const res = Array.from(value.entries()).filter(({1: v}) => v === true).map(([k]) => k);\n        });\n        super.ngOnInit();\n    }\n\n    public ngDoCheck() {\n        if (this._cdrRequestRepaint && !this._init) {\n            this.updateSizes();\n        }\n        super.ngDoCheck();\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterViewInit() {\n        super.ngAfterViewInit();\n        this.verticalScrollContainer.getScroll().addEventListener('scroll', this.hg_verticalScrollHandler.bind(this));\n        this.headerContainer.getScroll().addEventListener('scroll', this.hg_horizontalScrollHandler.bind(this));\n\n        this.verticalScrollContainer.onBeforeViewDestroyed.pipe(takeUntil(this.destroy$)).subscribe((view) => {\n            const rowData = view.context.$implicit;\n            if (this.isChildGridRecord(rowData)) {\n                const cachedData = this.childGridTemplates.get(rowData.rowID);\n                if (cachedData) {\n                    const tmlpOutlet = cachedData.owner;\n                    tmlpOutlet._viewContainerRef.detach(0);\n                }\n            }\n        });\n\n        if (this.parent) {\n            this._displayDensity = this.rootGrid._displayDensity;\n            this.rootGrid.onDensityChanged.pipe(takeUntil(this.destroy$)).subscribe(() => {\n                this._displayDensity = this.rootGrid._displayDensity;\n                this.notifyChanges(true);\n                this.cdr.markForCheck();\n            });\n            this.childLayoutKeys = this.parentIsland.children.map((item) => item.key);\n        }\n\n        this.actionStrip = this.parentIsland ? this.parentIsland.actionStrip : this.actionStrip;\n\n        this.headSelectorsTemplates = this.parentIsland ?\n            this.parentIsland.headSelectorsTemplates :\n            this.headSelectorsTemplates;\n\n        this.rowSelectorsTemplates = this.parentIsland ?\n            this.parentIsland.rowSelectorsTemplates :\n            this.rowSelectorsTemplates;\n        this.dragIndicatorIconTemplate = this.parentIsland ?\n            this.parentIsland.dragIndicatorIconTemplate :\n            this.dragIndicatorIconTemplate;\n        this.rowExpandedIndicatorTemplate  = this.rootGrid.rowExpandedIndicatorTemplate;\n        this.rowCollapsedIndicatorTemplate   = this.rootGrid.rowCollapsedIndicatorTemplate;\n        this.headerCollapseIndicatorTemplate = this.rootGrid.headerCollapseIndicatorTemplate;\n        this.headerExpandIndicatorTemplate = this.rootGrid.headerExpandIndicatorTemplate;\n        this.excelStyleHeaderIconTemplate = this.rootGrid.excelStyleHeaderIconTemplate;\n        this.hasChildrenKey = this.parentIsland ?\n         this.parentIsland.hasChildrenKey || this.rootGrid.hasChildrenKey :\n         this.rootGrid.hasChildrenKey;\n         this.showExpandAll = this.parentIsland ?\n         this.parentIsland.showExpandAll : this.rootGrid.showExpandAll;\n\n        this.excelStyleFilteringComponents = this.parentIsland ?\n            this.parentIsland.excelStyleFilteringComponents :\n            this.excelStyleFilteringComponents;\n    }\n\n    private updateSizes() {\n        if (document.body.contains(this.nativeElement) && this.isPercentWidth) {\n            this.reflow();\n\n            this.hgridAPI.getChildGrids(false).forEach((grid) => {\n                grid.updateSizes();\n            });\n        }\n    }\n\n    protected _shouldAutoSize(renderedHeight) {\n        if (this.isPercentHeight && this.parent) {\n            return true;\n        }\n        return super._shouldAutoSize(renderedHeight);\n    }\n\n    public get outletDirective() {\n        return this.rootGrid._outletDirective;\n    }\n\n    /**\n     * @hidden\n     */\n    ngAfterContentInit() {\n        this.updateColumnList(false);\n        this.childLayoutKeys = this.parent ?\n            this.parentIsland.children.map((item) => item.key) :\n            this.childLayoutKeys = this.childLayoutList.map((item) => item.key);\n        this.childLayoutList.notifyOnChanges();\n        this.childLayoutList.changes.pipe(takeUntil(this.destroy$)).subscribe(() =>\n            this.onRowIslandChange()\n        );\n        super.ngAfterContentInit();\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public dataLoading(event) {\n        this.onDataPreLoad.emit(event);\n    }\n\n    /** @hidden */\n    public featureColumnsWidth() {\n        return super.featureColumnsWidth(this.headerHierarchyExpander);\n    }\n\n    /**\n     * @hidden\n     */\n    public onRowIslandChange() {\n        if (this.parent) {\n            this.childLayoutKeys = this.parentIsland.children.filter(item => !(item as any)._destroyed).map((item) => item.key);\n        } else {\n            this.childLayoutKeys = this.childLayoutList.filter(item => !(item as any)._destroyed).map((item) => item.key);\n        }\n        if (!(this.cdr as any).destroyed) {\n            this.cdr.detectChanges();\n        }\n    }\n\n\n    protected setupColumns() {\n        if (this.parentIsland && this.parentIsland.childColumns.length > 0 && !this.autoGenerate) {\n            this.createColumnsList(this.parentIsland.childColumns.toArray());\n        }\n        super.setupColumns();\n    }\n\n    protected onColumnsChanged(change: QueryList<IgxColumnComponent>) {\n        Promise.resolve().then(() => {\n            this.updateColumnList();\n            const cols = change.filter(c => c.gridAPI.grid === this);\n            if (cols.length > 0 || this.autoGenerate) {\n                this.columnList.reset(cols);\n                super.onColumnsChanged(this.columnList);\n            }\n        });\n    }\n\n    private updateColumnList(recalcColSizes = true) {\n        const childLayouts = this.parent ? this.childLayoutList : this.allLayoutList;\n        const nestedColumns = childLayouts.map((layout) => {\n            return layout.columnList.toArray();\n        });\n        const colsArray = [].concat.apply([], nestedColumns);\n        const colLength = this.columnList.length;\n        if (colsArray.length > 0) {\n            const topCols = this.columnList.filter((item) => {\n                return colsArray.indexOf(item) === -1;\n            });\n            this.columnList.reset(topCols);\n            if (recalcColSizes && this.columnList.length !== colLength) {\n                this.calculateGridSizes(false);\n            }\n        }\n    }\n\n    ngOnDestroy() {\n        if (!this.parent) {\n            this.hgridAPI.getChildGrids(true).forEach((grid) => {\n                if (!grid.childRow.cdr.destroyed) {\n                    grid.childRow.cdr.destroy();\n                }\n            });\n        }\n        if (this.parent && this.selectionService.activeElement) {\n            // in case selection is in destroyed child grid, selection should be cleared.\n            this._clearSeletionHighlights();\n        }\n        super.ngOnDestroy();\n    }\n\n    private _clearSeletionHighlights() {\n        [this.rootGrid, ...this.rootGrid.getChildGrids(true)].forEach(grid => {\n            grid.selectionService.clear();\n            grid.selectionService.activeElement = null;\n            grid.nativeElement.classList.remove('igx-grid__tr--highlighted');\n            grid.highlightedRowID = null;\n            grid.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public isRowHighlighted(rowData) {\n        return this.highlightedRowID === rowData.rowID;\n    }\n\n    /**\n     * @hidden\n     */\n    public isHierarchicalRecord(record: any): boolean {\n        if (this.isGhostRecord(record)) {\n            record = record.recordRef;\n        }\n        return this.childLayoutList.length !== 0 && record[this.childLayoutList.first.key];\n    }\n\n    /**\n     * @hidden\n     */\n    public isChildGridRecord(record: any): boolean {\n        // Can be null when there is defined layout but no child data was found\n        return record.childGridsData !== undefined;\n    }\n\n    /**\n     * @hidden\n     */\n    public trackChanges(index, rec) {\n        if (rec.childGridsData !== undefined) {\n            // if is child rec\n            return rec.rowID;\n        }\n        return rec;\n    }\n\n    /**\n     * @hidden\n     */\n    public getContext(rowData, rowIndex, pinned): any {\n        if (this.isChildGridRecord(rowData)) {\n            const cachedData = this.childGridTemplates.get(rowData.rowID);\n            if (cachedData) {\n                const view = cachedData.view;\n                const tmlpOutlet = cachedData.owner;\n                return {\n                    $implicit: rowData,\n                    moveView: view,\n                    owner: tmlpOutlet,\n                    index: this.dataView.indexOf(rowData)\n                };\n            } else {\n                const rowID = this.primaryKey ? rowData.rowID : this.data.indexOf(rowData.rowID);\n                // child rows contain unique grids, hence should have unique templates\n                return {\n                    $implicit: rowData,\n                    templateID: 'childRow-' + rowID,\n                    index: this.dataView.indexOf(rowData)\n                };\n            }\n        } else {\n            return {\n                $implicit: this.isGhostRecord(rowData) || this.isAddRowRecord(rowData) ? rowData.recordRef : rowData,\n                templateID: 'dataRow',\n                index: this.getDataViewIndex(rowIndex, pinned),\n                disabled: this.isGhostRecord(rowData),\n                addRow: this.isAddRowRecord(rowData) ? rowData.addRow : false\n            };\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public get rootGrid() {\n        let currGrid = this;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n        }\n        return currGrid;\n    }\n\n    /**\n     * @hidden\n     */\n    public get iconTemplate() {\n        const expanded = this.hasExpandedRecords() && this.hasExpandableChildren;\n        if (!expanded && this.showExpandAll) {\n            return this.headerCollapseIndicatorTemplate || this.defaultCollapsedTemplate;\n        } else {\n            return this.headerExpandIndicatorTemplate || this.defaultExpandedTemplate;\n        }\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public getDragGhostCustomTemplate(): TemplateRef<any> {\n        if (this.parentIsland) {\n            return this.parentIsland.getDragGhostCustomTemplate();\n        }\n        return super.getDragGhostCustomTemplate();\n    }\n\n    /**\n     * @hidden\n     */\n    protected initColumns(collection: QueryList<IgxColumnComponent>, cb: Function = null) {\n        if (this.hasColumnLayouts) {\n            // invalid configuration - hierarchical grid should not allow column layouts\n            // remove column layouts\n            const nonColumnLayoutColumns = this.columnList.filter((col) => !col.columnLayout && !col.columnLayoutChild);\n            this.columnList.reset(nonColumnLayoutColumns);\n        }\n        super.initColumns(collection, cb);\n    }\n\n    /**\n     * @hidden\n     * Gets the visible content height that includes header + tbody + footer.\n     * For hierarchical child grid it may be scrolled and not fully visible.\n     */\n    public getVisibleContentHeight() {\n        let height = super.getVisibleContentHeight();\n        if (this.parent) {\n            const rootHeight = this.rootGrid.getVisibleContentHeight();\n            const topDiff = this.nativeElement.getBoundingClientRect().top - this.rootGrid.nativeElement.getBoundingClientRect().top;\n            height = rootHeight - topDiff > height ? height : rootHeight - topDiff;\n        }\n        return height;\n    }\n\n    /**\n     * @hidden\n     */\n   toggleAll() {\n    const expanded = this.hasExpandedRecords() && this.hasExpandableChildren;\n    if (!expanded && this.showExpandAll) {\n        this.expandAll();\n    } else {\n        this.collapseAll();\n    }\n   }\n\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public hasExpandedRecords() {\n       if (this.expandChildren) {\n            return true;\n       }\n       let hasExpandedEntry = false;\n       this.expansionStates.forEach((value, key) => {\n           if (value) {\n            hasExpandedEntry = value;\n           }\n        });\n        return hasExpandedEntry;\n    }\n\n    public getDefaultExpandState(record: any) {\n        if (this.hasChildrenKey && !record[this.hasChildrenKey]) {\n            return false;\n        }\n        return this.expandChildren;\n\n    }\n\n    /**\n     * @hidden\n     */\n    public isExpanded(record: any): boolean {\n        return this.gridAPI.get_row_expansion_state(record);\n    }\n\n    /**\n     * @hidden\n     */\n    public viewCreatedHandler(args) {\n        if (this.isChildGridRecord(args.context.$implicit)) {\n            const key = args.context.$implicit.rowID;\n            this.childGridTemplates.set(key, args);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public viewMovedHandler(args) {\n        if (this.isChildGridRecord(args.context.$implicit)) {\n            // view was moved, update owner in cache\n            const key = args.context.$implicit.rowID;\n            const cachedData = this.childGridTemplates.get(key);\n            cachedData.owner = args.owner;\n\n            this.childLayoutList.forEach((layout) => {\n                const relatedGrid = this.hgridAPI.getChildGridByID(layout.key, args.context.$implicit.rowID);\n                if (relatedGrid && relatedGrid.updateOnRender) {\n                    // Detect changes if `expandChildren` has changed when the grid wasn't visible. This is for performance reasons.\n                    relatedGrid.notifyChanges(true);\n                    relatedGrid.updateOnRender = false;\n                }\n            });\n\n            const childGrids = this.getChildGrids(true);\n            childGrids.forEach((grid) => {\n                if (grid.isPercentWidth) {\n                    grid.notifyChanges(true);\n                }\n                grid.updateScrollPosition();\n            });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public updateScrollPosition() {\n        const vScr = this.verticalScrollContainer.getScroll();\n        const hScr = this.headerContainer.getScroll();\n        if (vScr) {\n            vScr.scrollTop = this.scrollTop;\n        }\n        if (hScr) {\n            hScr.scrollLeft = this.scrollLeft;\n        }\n    }\n\n    protected getChildGrids(inDeph?: boolean) {\n        return this.hgridAPI.getChildGrids(inDeph);\n    }\n\n    protected generateDataFields(data: any[]): string[] {\n        return super.generateDataFields(data).filter((field) => {\n            const layoutsList = this.parentIsland ? this.parentIsland.children : this.childLayoutList;\n            const keys = layoutsList.map((item) => item.key);\n            return keys.indexOf(field) === -1;\n        });\n    }\n\n\n    private hg_verticalScrollHandler(event) {\n        this.scrollTop = event.target.scrollTop;\n    }\n\n    public onContainerScroll() {\n        this.hideOverlays();\n    }\n\n    private hg_horizontalScrollHandler(event) {\n        this.scrollLeft = event.target.scrollLeft;\n    }\n}\n","import { IgxGridCellComponent } from '../cell.component';\nimport { GridBaseAPIService } from '../api.service';\nimport { ChangeDetectorRef, ElementRef, ChangeDetectionStrategy, Component, OnInit, NgZone } from '@angular/core';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxGridSelectionService, IgxGridCRUDService } from '../selection/selection.service';\nimport { HammerGesturesManager } from '../../core/touch';\nimport { PlatformUtil } from '../../core/utils';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-hierarchical-grid-cell',\n    templateUrl: '../cell.component.html',\n    providers: [HammerGesturesManager]\n})\nexport class IgxHierarchicalGridCellComponent extends IgxGridCellComponent implements OnInit {\n    // protected hSelection;\n    protected _rootGrid;\n\n    constructor(\n        protected selectionService: IgxGridSelectionService,\n        protected crudService: IgxGridCRUDService,\n        public gridAPI: GridBaseAPIService<IgxHierarchicalGridComponent>,\n        public cdr: ChangeDetectorRef,\n        private helement: ElementRef,\n        protected zone: NgZone,\n        touchManager: HammerGesturesManager,\n        protected platformUtil: PlatformUtil\n        ) {\n            super(selectionService, crudService, gridAPI, cdr, helement, zone, touchManager, platformUtil);\n         }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this._rootGrid = this._getRootGrid();\n    }\n\n    private _getRootGrid() {\n        let currGrid = this.grid;\n        while (currGrid.parent) {\n            currGrid = currGrid.parent;\n        }\n        return currGrid;\n    }\n\n    // TODO: Extend the new selection service to avoid complete traversal\n    _clearAllHighlights() {\n        [this._rootGrid, ...this._rootGrid.getChildGrids(true)].forEach(grid => {\n            if (grid !== this.grid && grid.navigation.activeNode) {\n                grid.navigation.clearActivation();\n                grid.selectionService.initKeyboardState();\n                grid.selectionService.clear();\n            }\n\n            grid.selectionService.activeElement = null;\n            grid.nativeElement.classList.remove('igx-grid__tr--highlighted');\n            grid.highlightedRowID = null;\n            grid.cdr.markForCheck();\n        });\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public activate(event: FocusEvent) {\n        this._clearAllHighlights();\n        const currentElement = this.grid.nativeElement;\n        let parentGrid = this.grid;\n        let childGrid;\n        // add highligh to the current grid\n        if (this._rootGrid.id !== currentElement.id) {\n            currentElement.classList.add('igx-grid__tr--highlighted');\n        }\n\n        // add highligh to the current grid\n        while (this._rootGrid.id !== parentGrid.id) {\n            childGrid = parentGrid;\n            parentGrid = parentGrid.parent;\n\n            const parentRowID = parentGrid.hgridAPI.getParentRowId(childGrid);\n            parentGrid.highlightedRowID = parentRowID;\n        }\n        this.grid.navigation.activeNode.gridID = this.gridID;\n        super.activate(event);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    HostBinding,\n    forwardRef,\n    ElementRef,\n    ViewChildren,\n    QueryList,\n    ViewChild,\n    TemplateRef\n} from '@angular/core';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxRowDirective } from '../row.directive';\nimport { IgxHierarchicalGridCellComponent } from './hierarchical-cell.component';\n\n@Component({\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    selector: 'igx-hierarchical-grid-row',\n    templateUrl: './hierarchical-row.component.html',\n    providers: [{ provide: IgxRowDirective, useExisting: forwardRef(() => IgxHierarchicalRowComponent) }]\n})\nexport class IgxHierarchicalRowComponent extends IgxRowDirective<IgxHierarchicalGridComponent> {\n\n    protected expanderClass = 'igx-grid__hierarchical-expander';\n    protected rolActionClass = 'igx-grid__tr-action';\n\n    /**\n     * @hidden\n     */\n    public get expanderClassResolved() {\n        return {\n            [`${this.expanderClass} ${this.rolActionClass}`]: !this.pinned || this.disabled,\n            [`${this.expanderClass}--empty`]: this.pinned && !this.disabled\n        };\n    }\n\n    @ViewChildren(forwardRef(() => IgxHierarchicalGridCellComponent), { read: IgxHierarchicalGridCellComponent })\n    protected _cells: QueryList<IgxHierarchicalGridCellComponent>;\n\n    @ViewChild('expander', { read: ElementRef })\n    public expander: ElementRef<HTMLElement>;\n\n    get viewIndex(): number {\n        return this.index + this.grid.page * this.grid.perPage;\n    }\n\n    /**\n     * @hidden\n     */\n   @ViewChild('defaultExpandedTemplate', { read: TemplateRef, static: true })\n   protected defaultExpandedTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n   @ViewChild('defaultEmptyTemplate', { read: TemplateRef, static: true })\n   protected defaultEmptyTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n   @ViewChild('defaultCollapsedTemplate', { read: TemplateRef, static: true })\n   protected defaultCollapsedTemplate: TemplateRef<any>;\n\n    /**\n     * Returns whether the row is expanded.\n     * ```typescript\n     * const RowExpanded = this.grid1.rowList.first.expanded;\n     * ```\n     */\n    public get expanded() {\n        return this.gridAPI.get_row_expansion_state(this.rowData);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-grid__tr--expanded')\n    public get expandedClass() {\n        return this.expanded && !this.pinned;\n    }\n\n    public get hasChildren() {\n        return  !!this.grid.childLayoutKeys.length;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-grid__tr--highlighted')\n    public get highlighted() {\n        return this.grid && this.grid.highlightedRowID === this.rowID;\n    }\n\n   /**\n    * @hidden\n    */\n   public expanderClick(event) {\n        event.stopPropagation();\n        this.toggle();\n    }\n\n    /**\n     * Toggles the hierarchical row.\n     * ```typescript\n     * this.grid1.rowList.first.toggle()\n     * ```\n     */\n    public toggle() {\n        if (this.added) {\n            return;\n        }\n        const grid = this.gridAPI.grid;\n        this.endEdit(grid.rootGrid);\n        this.gridAPI.set_row_expansion_state(this.rowID, !this.expanded);\n        grid.cdr.detectChanges();\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public select = () => {\n        this.grid.selectRows([this.rowID]);\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public deselect = () => {\n        this.grid.deselectRows([this.rowID]);\n    }\n\n    /**\n     * @hidden\n     */\n    public get iconTemplate() {\n        let expandable = true;\n        if (this.grid.hasChildrenKey) {\n            expandable = this.rowData[this.grid.hasChildrenKey];\n        }\n        if (!expandable || (this.pinned && !this.disabled)) {\n            return this.defaultEmptyTemplate;\n        }\n        if (this.expanded) {\n            return this.grid.rowExpandedIndicatorTemplate || this.defaultExpandedTemplate;\n        } else {\n            return this.grid.rowCollapsedIndicatorTemplate || this.defaultCollapsedTemplate;\n        }\n    }\n\n    protected endEdit(grid: IgxHierarchicalGridComponent) {\n        if (grid.crudService.cellInEditMode) {\n            grid.endEdit();\n        }\n        grid.hgridAPI.getChildGrids(true).forEach(g => {\n            if (g.crudService.cellInEditMode) {\n            g.endEdit();\n        }});\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { cloneArray } from '../../core/utils';\nimport { GridBaseAPIService } from '../api.service';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { DataUtil } from '../../data-operations/data-util';\nimport { GridPagingMode } from '../common/enums';\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridHierarchical',\n    pure: true\n})\nexport class IgxGridHierarchicalPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxHierarchicalGridComponent>) { }\n\n    public transform(\n        collection: any,\n        state = new Map<any, boolean>(),\n        id: string,\n        primaryKey: any,\n        childKeys: string[],\n        pipeTrigger: number\n        ): any[] {\n        if (childKeys.length === 0) {\n            return collection;\n        }\n        const grid: IgxHierarchicalGridComponent = this.gridAPI.grid;\n        if (grid.verticalScrollContainer.isRemote) {\n            return collection;\n        }\n        const result = this.addHierarchy(grid, cloneArray(collection), state, primaryKey, childKeys);\n\n        return result;\n    }\n\n    public addHierarchy<T>(grid, data: T[], state, primaryKey, childKeys: string[]): T[] {\n        const result = [];\n\n        data.forEach((v) => {\n            result.push(v);\n            const childGridsData = {};\n            childKeys.forEach((childKey) => {\n                const childData = v[childKey] ? v[childKey] : null;\n                childGridsData[childKey] = childData;\n            });\n            if (grid.gridAPI.get_row_expansion_state(v)) {\n                result.push({ rowID: primaryKey ? v[primaryKey] : v, childGridsData: childGridsData});\n            }\n        });\n        return result;\n    }\n}\n\n/**\n * @hidden\n */\n@Pipe({\n    name: 'gridHierarchicalPaging',\n    pure: true\n})\nexport class IgxGridHierarchicalPagingPipe implements PipeTransform {\n\n    constructor(private gridAPI: GridBaseAPIService<IgxHierarchicalGridComponent>) { }\n\n    public transform(collection: any[], page = 0, perPage = 15, id: string, pipeTrigger: number): any[] {\n\n        if (!this.gridAPI.grid.paging || this.gridAPI.grid.pagingMode !== GridPagingMode.local) {\n            return collection;\n        }\n\n        const state = {\n            index: page,\n            recordsPerPage: perPage\n        };\n\n        const total = this.gridAPI.grid._totalRecords >= 0 ? this.gridAPI.grid._totalRecords : collection.length;\n        const result: any[] = DataUtil.page(cloneArray(collection), state, total);\n        this.gridAPI.grid.pagingState = state;\n        return result;\n\n    }\n}\n","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { IgxGridModule } from '../grid/grid.module';\nimport { IgxHierarchicalGridComponent } from './hierarchical-grid.component';\nimport { IgxHierarchicalRowComponent } from './hierarchical-row.component';\nimport { IgxGridHierarchicalPipe, IgxGridHierarchicalPagingPipe } from './hierarchical-grid.pipes';\nimport { IgxRowIslandComponent } from './row-island.component';\nimport { IgxChildGridRowComponent } from './child-grid-row.component';\nimport { IgxHierarchicalGridCellComponent } from './hierarchical-cell.component';\nimport { IgxGridComponent } from '../grid/grid.component';\n\n/**\n * @hidden\n */\n@NgModule({\n  declarations: [\n    IgxHierarchicalGridComponent,\n    IgxHierarchicalRowComponent,\n    IgxRowIslandComponent,\n    IgxChildGridRowComponent,\n    IgxHierarchicalGridCellComponent,\n    IgxGridHierarchicalPipe,\n    IgxGridHierarchicalPagingPipe\n  ],\n  exports: [\n    IgxGridModule,\n    IgxHierarchicalGridComponent,\n    IgxHierarchicalRowComponent,\n    IgxHierarchicalGridCellComponent,\n    IgxRowIslandComponent,\n    IgxChildGridRowComponent\n  ],\n  imports: [\n    IgxGridModule,\n  ],\n  entryComponents: [\n    IgxGridComponent\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class IgxHierarchicalGridModule {\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    Component,\n    EventEmitter,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Directive,\n    ContentChild\n} from '@angular/core';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxIconModule } from '../icon/public_api';\n\n/**\n * IgxActionIcon is a container for the action nav icon of the IgxNavbar.\n */\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-navbar-action,[igxNavbarAction]'\n})\nexport class IgxNavbarActionDirective { }\n\n@Directive({\n    // tslint:disable-next-line:directive-selector\n    selector: 'igx-navbar-title,[igxNavbarTitle]'\n})\nexport class IgxNavbarTitleDirective { }\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Navbar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/navbar.html)\n *\n * The Ignite UI Navbar is most commonly used to provide an app header with a hamburger menu and navigation\n * state such as a \"Go Back\" button. It also supports other actions represented by icons.\n *\n * Example:\n * ```html\n * <igx-navbar title=\"Sample App\" actionButtonIcon=\"menu\">\n *   <igx-icon>search</igx-icon>\n *   <igx-icon>favorite</igx-icon>\n *   <igx-icon>more_vert</igx-icon>\n * </igx-navbar>\n * ```\n */\n\n@Component({\n    selector: 'igx-navbar',\n    templateUrl: 'navbar.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `\n    ]\n})\n\nexport class IgxNavbarComponent {\n    private static NEXT_ID = 1;\n    private isVisible = true;\n\n    /**\n     * An @Input property that sets the value of the `id` attribute. If not provided it will be automatically generated.\n     * ```html\n     * <igx-navbar [id]=\"'igx-navbar-12'\" title=\"Sample App\" actionButtonIcon=\"menu\">\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-navbar-${NEXT_ID++}`;\n    /**\n     * Returns whether the `IgxNavbarComponent` action button is visible, true/false.\n     * ```typescript\n     *  @ViewChild(\"MyChild\")\n     * public navBar: IgxNavbarComponent;\n     * ngAfterViewInit(){\n     *     let actionButtonVisibile = this.navBar.isActionButtonVisible;\n     * }\n     * ```\n     */\n    @Input()\n    public get isActionButtonVisible(): boolean {\n        if (this.actionIconTemplate || !this.actionButtonIcon) {\n            return false;\n        }\n        return this.isVisible;\n    }\n\n    public get isTitleContentVisible(): boolean {\n        return this.titleContent ? true : false;\n    }\n\n    /**\n     * Sets whether the action button of the `IgxNavbarComponent` is visible.\n     * ```html\n     * <igx-navbar [title]=\"currentView\" [isActionButtonVisible]=\"'false'\"></igx-navbar>\n     * ```\n     */\n    public set isActionButtonVisible(value: boolean) {\n        this.isVisible = value;\n    }\n    /**\n     * An @Input property that sets the icon of the `IgxNavbarComponent`.\n     * ```html\n     * <igx-navbar [title]=\"currentView\" actionButtonIcon=\"arrow_back\"></igx-navbar>\n     * ```\n     */\n    @Input() public actionButtonIcon: string;\n\n    /**\n     * An @Input property that sets the title of the `IgxNavbarComponent`.\n     * ```html\n     * <igx-navbar title=\"Sample App\" actionButtonIcon=\"menu\">\n     * ```\n     */\n    @Input() public title: string;\n\n    /**\n     * The event that will be thrown when the action is executed,\n     * provides reference to the `IgxNavbar` component as argument\n     * ```typescript\n     * public actionExc(event){\n     *     alert(\"Action Execute!\");\n     * }\n     *  //..\n     * ```\n     * ```html\n     * <igx-navbar (onAction)=\"actionExc($event)\" title=\"Sample App\" actionButtonIcon=\"menu\">\n     * ```\n     */\n    @Output() public onAction = new EventEmitter<IgxNavbarComponent>();\n\n    /**\n     * An @Input property that sets the titleId of the `IgxNavbarComponent`. If not set it will be automatically generated.\n     * ```html\n     * <igx-navbar [titleId]=\"'igx-navbar-7'\" title=\"Sample App\" actionButtonIcon=\"menu\">\n     * ```\n     */\n    @Input()\n    public titleId = `igx-navbar-${IgxNavbarComponent.NEXT_ID++}`;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxNavbarActionDirective, { read: IgxNavbarActionDirective })\n    protected actionIconTemplate: IgxNavbarActionDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxNavbarTitleDirective, { read: IgxNavbarTitleDirective })\n    protected titleContent: IgxNavbarTitleDirective;\n\n    /**\n     * @hidden\n     */\n    public _triggerAction() {\n        this.onAction.emit(this);\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxNavbarComponent, IgxNavbarActionDirective, IgxNavbarTitleDirective],\n    exports: [IgxNavbarComponent, IgxNavbarActionDirective, IgxNavbarTitleDirective],\n    imports: [IgxButtonModule, IgxIconModule, CommonModule]\n})\nexport class IgxNavbarModule {\n}\n","import { Directive, HostBinding, Input, TemplateRef } from '@angular/core';\n\n@Directive({\n    selector: '[igxDrawerItem]',\n    exportAs: 'igxDrawerItem'\n})\nexport class IgxNavDrawerItemDirective {\n\n    /**\n     * @hidden\n     */\n    @Input('active') public active = false;\n\n    /**\n     * @hidden\n     */\n    @Input('isHeader') public isHeader = false;\n\n    /**\n     * @hidden\n     */\n    public readonly activeClass = 'igx-nav-drawer__item--active';\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-nav-drawer__item')\n    get defaultCSS(): boolean {\n        return !this.active && !this.isHeader;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-nav-drawer__item--active')\n    get currentCSS(): boolean {\n        return this.active && !this.isHeader;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-nav-drawer__item--header')\n    get headerCSS(): boolean {\n        return this.isHeader;\n    }\n}\n\n@Directive({\n    selector: '[igxDrawer]'\n})\nexport class IgxNavDrawerTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n     }\n}\n\n@Directive({\n    selector: '[igxDrawerMini]'\n})\nexport class IgxNavDrawerMiniTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n     }\n}\n","import {\n    AfterContentInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    SimpleChange,\n    ViewChild,\n    Renderer2\n} from '@angular/core';\nimport { fromEvent, interval, Subscription } from 'rxjs';\nimport { debounce } from 'rxjs/operators';\nimport { IgxNavigationService, IToggleView } from '../core/navigation';\nimport { HammerGesturesManager } from '../core/touch';\nimport { IgxNavDrawerMiniTemplateDirective, IgxNavDrawerTemplateDirective } from './navigation-drawer.directives';\nimport { PlatformUtil } from '../core/utils';\n\nlet NEXT_ID = 0;\n/**\n * **Ignite UI for Angular Navigation Drawer** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/navdrawer)\n *\n * The Ignite UI Navigation Drawer is a collapsible side navigation container commonly used in combination with the Navbar.\n *\n * Example:\n * ```html\n * <igx-nav-drawer id=\"navigation\" [isOpen]=\"true\">\n *   <ng-template igxDrawer>\n *     <nav>\n *       <span igxDrawerItem [isHeader]=\"true\">Email</span>\n *       <span igxDrawerItem igxRipple>Inbox</span>\n *       <span igxDrawerItem igxRipple>Deleted</span>\n *       <span igxDrawerItem igxRipple>Sent</span>\n *     </nav>\n *   </ng-template>\n * </igx-nav-drawer>\n * ```\n */\n@Component({\n    providers: [HammerGesturesManager],\n    selector: 'igx-nav-drawer',\n    templateUrl: 'navigation-drawer.component.html',\n    styles: [`\n        :host {\n            display: block;\n            height: 100%;\n        }\n    `]\n})\nexport class IgxNavigationDrawerComponent implements\n    IToggleView,\n    OnInit,\n    AfterContentInit,\n    OnDestroy,\n    OnChanges {\n\n    private _isOpen = false;\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-nav-drawer')\n    public cssClass = true;\n\n    /**\n     * ID of the component\n     *\n     * ```typescript\n     * // get\n     * let myNavDrawerId = this.navdrawer.id;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     *  <igx-nav-drawer id='navdrawer'></igx-nav-drawer>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-nav-drawer-${NEXT_ID++}`;\n\n    /**\n     * Position of the Navigation Drawer. Can be \"left\"(default) or \"right\".\n     *\n     * ```typescript\n     * // get\n     * let myNavDrawerPosition = this.navdrawer.position;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [position]=\"'left'\"></igx-nav-drawer>\n     * ```\n     */\n    @Input() public position = 'left';\n\n    /**\n     * Enables the use of touch gestures to manipulate the drawer:\n     * - swipe/pan from edge to open, swipe-toggle and pan-drag.\n     *\n     * ```typescript\n     * // get\n     * let gesturesEnabled = this.navdrawer.enableGestures;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [enableGestures]='true'></igx-nav-drawer>\n     * ```\n     */\n    @Input() public enableGestures = true;\n\n    /**\n     * State of the drawer.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerIsOpen = this.navdrawer.isOpen;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [isOpen]='false'></igx-nav-drawer>\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [(isOpen)]='model.isOpen'></igx-nav-drawer>\n     * ```\n     */\n    @Input()\n    public get isOpen() {\n        return this._isOpen;\n    }\n    public set isOpen(value) {\n        this._isOpen = value;\n        this.isOpenChange.emit(this._isOpen);\n    }\n\n    /**\n     * @hidden\n     */\n    @Output() public isOpenChange = new EventEmitter<boolean>();\n\n    /**\n     * When pinned the drawer is relatively positioned instead of sitting above content.\n     * May require additional layout styling.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerIsPinned = this.navdrawer.pin;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [pin]='false'></igx-nav-drawer>\n     * ```\n     */\n    @Input() public pin = false;\n\n    /**\n     * Minimum device width required for automatic pin to be toggled.\n     * Default is 1024, can be set to a falsy value to disable this behavior.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerPinTreshold = this.navdrawer.pinThreshold;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [pinTreshold]='1024'></igx-nav-drawer>\n     * ```\n     */\n    @Input() public pinThreshold = 1024;\n\n    /**\n     * Returns nativeElement of the component.\n     *\n     * @hidden\n     */\n    get element() {\n        return this.elementRef.nativeElement;\n    }\n\n    /**\n     * Width of the drawer in its open state. Defaults to \"280px\".\n     *\n     * ```typescript\n     * // get\n     * let navDrawerWidth = this.navdrawer.width;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [width]=\"'228px'\"></igx-nav-drawer>\n     * ```\n     */\n    @Input() public width = '280px';\n\n\n    /**\n     * Enables/disables the animation, when toggling the drawer. Set to `false` by default.\n     * ````html\n     * <igx-nav-drawer [disableAnimation]=\"true\"></igx-nav-drawer>\n     * ````\n     */\n    @HostBinding ('class.igx-nav-drawer--disable-animation')\n    @Input() public disableAnimation = false;\n\n    /**\n     * Width of the drawer in its mini state. Defaults to 68px.\n     *\n     * ```typescript\n     * // get\n     * let navDrawerMiniWidth = this.navdrawer.miniWidth;\n     * ```\n     *\n     * ```html\n     * <!--set-->\n     * <igx-nav-drawer [miniWidth]=\"'34px'\"></igx-nav-drawer>\n     * ```\n     */\n    @Input() public miniWidth = '68px';\n\n    /**\n     * Pinned state change output for two-way binding.\n     *\n     * ```html\n     * <igx-nav-drawer [(pin)]='isPinned'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public pinChange = new EventEmitter<boolean>(true);\n    /**\n     * Event fired as the Navigation Drawer is about to open.\n     *\n     * ```html\n     *  <igx-nav-drawer (opening)='onOpening()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public opening = new EventEmitter();\n    /**\n     * Event fired when the Navigation Drawer has opened.\n     *\n     * ```html\n     * <igx-nav-drawer (opened)='onOpened()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public opened = new EventEmitter();\n    /**\n     * Event fired as the Navigation Drawer is about to close.\n     *\n     * ```html\n     * <igx-nav-drawer (closing)='onClosing()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public closing = new EventEmitter();\n    /**\n     * Event fired when the Navigation Drawer has closed.\n     *\n     * ```html\n     * <igx-nav-drawer (closed)='onClosed()'></igx-nav-drawer>\n     * ```\n     */\n    @Output() public closed = new EventEmitter();\n\n    /**\n     * @hidden\n     */\n    get template() {\n        if (this.miniTemplate && !this.isOpen) {\n            return this.miniTemplate.template;\n        } else if (this.contentTemplate) {\n            return this.contentTemplate.template;\n        }\n    }\n\n    private _miniTemplate: IgxNavDrawerMiniTemplateDirective;\n    /**\n     * @hidden\n     */\n    public get miniTemplate(): IgxNavDrawerMiniTemplateDirective {\n        return this._miniTemplate;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxNavDrawerMiniTemplateDirective, { read: IgxNavDrawerMiniTemplateDirective })\n    public set miniTemplate(v: IgxNavDrawerMiniTemplateDirective) {\n        if (!this.isOpen) {\n            this.setDrawerWidth(v ? this.miniWidth : '');\n        }\n        this._miniTemplate = v;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxNavDrawerTemplateDirective, { read: IgxNavDrawerTemplateDirective })\n    protected contentTemplate: IgxNavDrawerTemplateDirective;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('style.flexBasis')\n    get flexWidth() {\n        if (!this.pin) {\n            return '0px';\n        }\n        if (this.isOpen) {\n            return this.width;\n        }\n        if (this.miniTemplate && this.miniWidth) {\n            return this.miniWidth;\n        }\n\n        return '0px';\n    }\n\n    /** @hidden */\n    @HostBinding('style.order')\n    get isPinnedRight() {\n        return this.pin && this.position === 'right' ? '1' : '0';\n    }\n\n    private _gesturesAttached = false;\n    private _widthCache: { width: number, miniWidth: number, windowWidth: number } = { width: null, miniWidth: null, windowWidth: null };\n    private _resizeObserver: Subscription;\n    private css: { [name: string]: string; } = {\n        drawer: 'igx-nav-drawer__aside',\n        mini: 'igx-nav-drawer__aside--mini',\n        overlay: 'igx-nav-drawer__overlay',\n        styleDummy: 'igx-nav-drawer__style-dummy'\n    };\n\n    @ViewChild('aside', { static: true }) private _drawer: ElementRef;\n    @ViewChild('overlay', { static: true }) private _overlay: ElementRef;\n    @ViewChild('dummy', { static: true }) private _styleDummy: ElementRef;\n\n    /**\n     * @hidden\n     */\n    get drawer() {\n        return this._drawer.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    get overlay() {\n        return this._overlay.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    get styleDummy() {\n        return this._styleDummy.nativeElement;\n    }\n\n    /** Pan animation properties */\n    private _panning = false;\n    private _panStartWidth: number;\n    private _panLimit: number;\n\n    /**\n     * Property to decide whether to change width or translate the drawer from pan gesture.\n     *\n     * @hidden\n     */\n    public get hasAnimateWidth(): boolean {\n        return this.pin || !!this.miniTemplate;\n    }\n\n    private _maxEdgeZone = 50;\n    /**\n     * Used for touch gestures (swipe and pan).\n     * Defaults to 50 (in px) and is extended to at least 110% of the mini template width if available.\n     *\n     * @hidden\n     */\n    public get maxEdgeZone() {\n        return this._maxEdgeZone;\n    }\n\n    /**\n     * Gets the Drawer width for specific state.\n     * Will attempt to evaluate requested state and cache.\n     *\n     *\n     * @hidden\n     */\n    public get expectedWidth() {\n        return this.getExpectedWidth(false);\n    }\n\n    /**\n     * Get the Drawer mini width for specific state.\n     * Will attempt to evaluate requested state and cache.\n     *\n     * @hidden\n     */\n    public get expectedMiniWidth() {\n        return this.getExpectedWidth(true);\n    }\n\n    /**\n     * @hidden\n     */\n    public get touchManager() {\n        return this._touchManager;\n    }\n\n    /**\n     * Exposes optional navigation service\n     *\n     * @hidden\n     */\n    public get state() {\n        return this._state;\n    }\n\n    constructor(\n        @Inject(ElementRef) private elementRef: ElementRef,\n        @Optional() private _state: IgxNavigationService,\n        protected renderer: Renderer2,\n        private _touchManager: HammerGesturesManager,\n        private platformUtil: PlatformUtil) {\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        // DOM and @Input()-s initialized\n        if (this._state) {\n            this._state.add(this.id, this);\n        }\n        if (this.isOpen) {\n            this.setDrawerWidth(this.width);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit() {\n        // wait for template and ng-content to be ready\n        this.updateEdgeZone();\n        this.checkPinThreshold();\n\n        this.ensureEvents();\n\n        // TODO: apply platform-safe Ruler from http://plnkr.co/edit/81nWDyreYMzkunihfRgX?p=preview\n        // (https://github.com/angular/angular/issues/6515), blocked by https://github.com/angular/angular/issues/6904\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._touchManager.destroy();\n        if (this._state) {\n            this._state.remove(this.id);\n        }\n        if (this._resizeObserver) {\n            this._resizeObserver.unsubscribe();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnChanges(changes: { [propName: string]: SimpleChange }) {\n        // simple settings can come from attribute set (rather than binding), make sure boolean props are converted\n        if (changes.enableGestures && changes.enableGestures.currentValue !== undefined) {\n            this.enableGestures = !!(this.enableGestures && this.enableGestures.toString() === 'true');\n            this.ensureEvents();\n        }\n        if (changes.pin && changes.pin.currentValue !== undefined) {\n            this.pin = !!(this.pin && this.pin.toString() === 'true');\n            if (this.pin) {\n                this._touchManager.destroy();\n                this._gesturesAttached = false;\n            } else {\n                this.ensureEvents();\n            }\n        }\n\n        if (changes.pinThreshold) {\n            if (this.pinThreshold) {\n                this.ensureEvents();\n                this.checkPinThreshold();\n            }\n        }\n\n        if (changes.width && this.isOpen) {\n            this.setDrawerWidth(changes.width.currentValue);\n        }\n\n        if (changes.isOpen) {\n            this.setDrawerWidth(this.isOpen ? this.width : (this.miniTemplate ? this.miniWidth : ''));\n        }\n\n        if (changes.miniWidth) {\n            if (!this.isOpen) {\n                this.setDrawerWidth(changes.miniWidth.currentValue);\n            }\n            this.updateEdgeZone();\n        }\n    }\n\n    /**\n     * Toggle the open state of the Navigation Drawer.\n     *\n     * ```typescript\n     * this.navdrawer.toggle();\n     * ```\n     */\n    public toggle() {\n        if (this.isOpen) {\n            this.close();\n        } else {\n            this.open();\n        }\n    }\n\n    /**\n     * Open the Navigation Drawer. Has no effect if already opened.\n     *\n     * ```typescript\n     * this.navdrawer.open();\n     * ```\n     */\n    public open() {\n        if (this._panning) {\n            this.resetPan();\n        }\n        if (this.isOpen) {\n            return;\n        }\n        this.opening.emit();\n        this.isOpen = true;\n\n        // TODO: Switch to animate API when available\n        // var animationCss = this.animate.css();\n        //     animationCss\n        //         .setStyles({'width':'50px'}, {'width':'400px'})\n        //         .start(this.elementRef.nativeElement)\n        //         .onComplete(() => animationCss.setToStyles({'width':'auto'}).start(this.elementRef.nativeElement));\n\n        this.elementRef.nativeElement.addEventListener('transitionend', this.toggleOpenedEvent, false);\n        this.setDrawerWidth(this.width);\n    }\n\n    /**\n     * Close the Navigation Drawer. Has no effect if already closed.\n     *\n     * ```typescript\n     * this.navdrawer.close();\n     * ```\n     */\n    public close() {\n        if (this._panning) {\n            this.resetPan();\n        }\n        if (!this.isOpen) {\n            return;\n        }\n        this.closing.emit();\n\n        this.isOpen = false;\n        this.setDrawerWidth(this.miniTemplate ? this.miniWidth : '');\n        this.elementRef.nativeElement.addEventListener('transitionend', this.toggleClosedEvent, false);\n    }\n\n    /**\n     * @hidden\n     */\n    protected set_maxEdgeZone(value: number) {\n        this._maxEdgeZone = value;\n    }\n\n    /**\n     * Get the Drawer width for specific state. Will attempt to evaluate requested state and cache.\n     *\n     * @hidden\n     * @param [mini] - Request mini width instead\n     */\n    protected getExpectedWidth(mini?: boolean): number {\n        if (mini) {\n            if (!this.miniTemplate) {\n                return 0;\n            }\n            if (this.miniWidth) {\n                return parseFloat(this.miniWidth);\n            } else {\n                // if (!this.isOpen) { // This WON'T work due to transition timings...\n                //     return this.elementRef.nativeElement.children[1].offsetWidth;\n                // } else {\n                if (this._widthCache.miniWidth === null) {\n                    // force class for width calc. TODO?\n                    // force class for width calc. TODO?\n                    this.renderer.addClass(this.styleDummy, this.css.drawer);\n                    this.renderer.addClass(this.styleDummy, this.css.mini);\n                    this._widthCache.miniWidth = this.styleDummy.offsetWidth;\n                    this.renderer.removeClass(this.styleDummy, this.css.drawer);\n                    this.renderer.removeClass(this.styleDummy, this.css.mini);\n                }\n                return this._widthCache.miniWidth;\n            }\n        } else {\n            if (this.width) {\n                return parseFloat(this.width);\n            } else {\n                if (this._widthCache.width === null) {\n                    // force class for width calc. TODO?\n                    // force class for width calc. TODO?\n                    this.renderer.addClass(this.styleDummy, this.css.drawer);\n                    this._widthCache.width = this.styleDummy.offsetWidth;\n                    this.renderer.removeClass(this.styleDummy, this.css.drawer);\n                }\n                return this._widthCache.width;\n            }\n        }\n    }\n\n    private getWindowWidth() {\n        return (window.innerWidth > 0) ? window.innerWidth : screen.width;\n    }\n\n    /**\n     * Sets the drawer width.\n     */\n    private setDrawerWidth(width: string) {\n        if (this.platformUtil.isBrowser) {\n            requestAnimationFrame(() => {\n                if (this.drawer) {\n                    this.renderer.setStyle(this.drawer, 'width', width);\n                }\n            });\n        } else {\n            this.renderer.setStyle(this.drawer, 'width', width);\n        }\n    }\n\n    /**\n     * Get current Drawer width.\n     */\n    private getDrawerWidth(): number {\n        return this.drawer.offsetWidth;\n    }\n\n    private ensureEvents() {\n        // set listeners for swipe/pan only if needed, but just once\n        if (this.enableGestures && !this.pin && !this._gesturesAttached) {\n            // Built-in manager handler(L20887) causes endless loop and max stack exception.\n            // https://github.com/angular/angular/issues/6993\n            // Use ours for now (until beta.10):\n            // this.renderer.listen(document, \"swipe\", this.swipe);\n            this._touchManager.addGlobalEventListener('document', 'swipe', this.swipe);\n            this._gesturesAttached = true;\n\n            // this.renderer.listen(document, \"panstart\", this.panstart);\n            // this.renderer.listen(document, \"pan\", this.pan);\n            this._touchManager.addGlobalEventListener('document', 'panstart', this.panstart);\n            this._touchManager.addGlobalEventListener('document', 'panmove', this.pan);\n            this._touchManager.addGlobalEventListener('document', 'panend', this.panEnd);\n        }\n        if (!this._resizeObserver && this.platformUtil.isBrowser) {\n            this._resizeObserver = fromEvent(window, 'resize').pipe(debounce(() => interval(150)))\n                .subscribe((value) => {\n                    this.checkPinThreshold(value);\n                });\n        }\n    }\n\n    private updateEdgeZone() {\n        let maxValue;\n\n        if (this.miniTemplate) {\n            maxValue = Math.max(this._maxEdgeZone, this.getExpectedWidth(true) * 1.1);\n            this.set_maxEdgeZone(maxValue);\n        }\n    }\n\n    private checkPinThreshold = (evt?: Event) => {\n        if (!this.platformUtil.isBrowser) {\n            return;\n        }\n        let windowWidth;\n        if (this.pinThreshold) {\n            windowWidth = this.getWindowWidth();\n            if (evt && this._widthCache.windowWidth === windowWidth) {\n                return;\n            }\n            this._widthCache.windowWidth = windowWidth;\n            if (!this.pin && windowWidth >= this.pinThreshold) {\n                this.pin = true;\n                this.pinChange.emit(true);\n            } else if (this.pin && windowWidth < this.pinThreshold) {\n                this.pin = false;\n                this.pinChange.emit(false);\n            }\n        }\n    }\n\n    private swipe = (evt: HammerInput) => {\n        // TODO: Could also force input type: http://stackoverflow.com/a/27108052\n        if (!this.enableGestures || evt.pointerType !== 'touch') {\n            return;\n        }\n\n        // HammerJS swipe is horizontal-only by default, don't check deltaY\n        let deltaX;\n        let startPosition;\n        if (this.position === 'right') {\n            // when on the right use inverse of deltaX\n            deltaX = -evt.deltaX;\n            startPosition = this.getWindowWidth() - (evt.center.x + evt.distance);\n        } else {\n            deltaX = evt.deltaX;\n            startPosition = evt.center.x - evt.distance;\n        }\n        // only accept closing swipe (ignoring minEdgeZone) when the drawer is expanded:\n        if ((this.isOpen && deltaX < 0) ||\n            // positive deltaX from the edge:\n            (deltaX > 0 && startPosition < this.maxEdgeZone)) {\n            this.toggle();\n        }\n    }\n\n    private panstart = (evt: HammerInput) => { // TODO: test code\n        if (!this.enableGestures || this.pin || evt.pointerType !== 'touch') {\n            return;\n        }\n        const startPosition = this.position === 'right' ? this.getWindowWidth() - (evt.center.x + evt.distance)\n            : evt.center.x - evt.distance;\n\n        // cache width during animation, flag to allow further handling\n        if (this.isOpen || (startPosition < this.maxEdgeZone)) {\n            this._panning = true;\n            this._panStartWidth = this.getExpectedWidth(!this.isOpen);\n            this._panLimit = this.getExpectedWidth(this.isOpen);\n\n            this.renderer.addClass(this.overlay, 'panning');\n            this.renderer.addClass(this.drawer, 'panning');\n        }\n    }\n\n    private pan = (evt: HammerInput) => {\n        // TODO: input.deltaX = prevDelta.x + (center.x - offset.x);\n        // get actual delta (not total session one) from event?\n        // pan WILL also fire after a full swipe, only resize on flag\n        if (!this._panning) {\n            return;\n        }\n        const right: boolean = this.position === 'right';\n        // when on the right use inverse of deltaX\n        const deltaX = right ? -evt.deltaX : evt.deltaX;\n        let visibleWidth;\n        let newX;\n        let percent;\n\n        visibleWidth = this._panStartWidth + deltaX;\n\n        if (this.isOpen && deltaX < 0) {\n            // when visibleWidth hits limit - stop animating\n            if (visibleWidth <= this._panLimit) {\n                return;\n            }\n\n            if (this.hasAnimateWidth) {\n                percent = (visibleWidth - this._panLimit) / (this._panStartWidth - this._panLimit);\n                newX = visibleWidth;\n            } else {\n                percent = visibleWidth / this._panStartWidth;\n                newX = evt.deltaX;\n            }\n            this.setXSize(newX, percent.toPrecision(2));\n\n        } else if (!this.isOpen && deltaX > 0) {\n            // when visibleWidth hits limit - stop animating\n            if (visibleWidth >= this._panLimit) {\n                return;\n            }\n\n            if (this.hasAnimateWidth) {\n                percent = (visibleWidth - this._panStartWidth) / (this._panLimit - this._panStartWidth);\n                newX = visibleWidth;\n            } else {\n                percent = visibleWidth / this._panLimit;\n                newX = (this._panLimit - visibleWidth) * (right ? 1 : -1);\n            }\n            this.setXSize(newX, percent.toPrecision(2));\n        }\n    }\n\n    private panEnd = (evt: HammerInput) => {\n        if (this._panning) {\n            const deltaX = this.position === 'right' ? -evt.deltaX : evt.deltaX;\n            const visibleWidth: number = this._panStartWidth + deltaX;\n            this.resetPan();\n\n            // check if pan brought the drawer to 50%\n            if (this.isOpen && visibleWidth <= this._panStartWidth / 2) {\n                this.close();\n            } else if (!this.isOpen && visibleWidth >= this._panLimit / 2) {\n                this.open();\n            }\n            this._panStartWidth = null;\n        }\n    }\n\n    private resetPan() {\n        this._panning = false;\n        /* styles fail to apply when set on parent due to extra attributes, prob ng bug */\n        /* styles fail to apply when set on parent due to extra attributes, prob ng bug */\n        this.renderer.removeClass(this.overlay, 'panning');\n        this.renderer.removeClass(this.drawer, 'panning');\n        this.setXSize(0, '');\n    }\n\n    /**\n     * Sets the absolute position or width in case the drawer doesn't change position.\n     * @param x the number pixels to translate on the X axis or the width to set. 0 width will clear the style instead.\n     * @param opacity optional value to apply to the overlay\n     */\n    private setXSize(x: number, opacity?: string) {\n        // Angular polyfills patches window.requestAnimationFrame, but switch to DomAdapter API (TODO)\n        window.requestAnimationFrame(() => {\n            if (this.hasAnimateWidth) {\n                this.renderer.setStyle(this.drawer, 'width', x ? Math.abs(x) + 'px' : '');\n            } else {\n                this.renderer.setStyle(this.drawer, 'transform', x ? 'translate3d(' + x + 'px,0,0)' : '');\n                this.renderer.setStyle(this.drawer, '-webkit-transform', x ? 'translate3d(' + x + 'px,0,0)' : '');\n            }\n            if (opacity !== undefined) {\n                this.renderer.setStyle(this.overlay, 'opacity', opacity);\n            }\n        });\n    }\n\n    private toggleOpenedEvent = (evt?) => {\n        this.elementRef.nativeElement.removeEventListener('transitionend', this.toggleOpenedEvent, false);\n        this.opened.emit();\n    }\n\n    private toggleClosedEvent = (evt?) => {\n        this.elementRef.nativeElement.removeEventListener('transitionend', this.toggleClosedEvent, false);\n        this.closed.emit();\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IgxNavigationDrawerComponent } from './navigation-drawer.component';\nimport {\n    IgxNavDrawerItemDirective,\n    IgxNavDrawerMiniTemplateDirective,\n    IgxNavDrawerTemplateDirective\n} from './navigation-drawer.directives';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxNavigationDrawerComponent,\n        IgxNavDrawerItemDirective,\n        IgxNavDrawerMiniTemplateDirective,\n        IgxNavDrawerTemplateDirective\n    ],\n    exports: [\n        IgxNavigationDrawerComponent,\n        IgxNavDrawerItemDirective,\n        IgxNavDrawerMiniTemplateDirective,\n        IgxNavDrawerTemplateDirective\n    ],\n    imports: [CommonModule]\n})\nexport class IgxNavigationDrawerModule {}\n","import { Directive } from '@angular/core';\nimport { IBaseEventArgs } from '../core/utils';\n\n/**\n * Template directive that allows you to set a custom template representing the lower label value of the {@link IgxSliderComponent}\n *\n * ```html\n * <igx-slider>\n *  <ng-template igxSliderThumbFrom let-value let-labels>{{value}}</ng-template>\n * </igx-slider>\n * ```\n *\n * @context {@link IgxSliderComponent.context}\n */\n@Directive({\n    selector: '[igxSliderThumbFrom]'\n})\nexport class IgxThumbFromTemplateDirective {}\n\n/**\n * Template directive that allows you to set a custom template representing the upper label value of the {@link IgxSliderComponent}\n *\n * ```html\n * <igx-slider>\n *  <ng-template igxSliderThumbTo let-value let-labels>{{value}}</ng-template>\n * </igx-slider>\n * ```\n *\n * @context {@link IgxSliderComponent.context}\n */\n@Directive({\n    selector: '[igxSliderThumbTo]'\n})\nexport class IgxThumbToTemplateDirective {}\n\n/**\n * Template directive that allows you to set a custom template, represeting primary/secondary tick labels of the {@link IgxSliderComponent}\n *\n * @context {@link IgxTicksComponent.context}\n */\n@Directive({\n    selector: '[igxSliderTickLabel]'\n})\nexport class IgxTickLabelTemplateDirective {}\n\nexport interface IRangeSliderValue {\n    lower: number;\n    upper: number;\n}\n\nexport interface ISliderValueChangeEventArgs {\n    oldValue: number | IRangeSliderValue;\n    value: number | IRangeSliderValue;\n}\n\nexport enum IgxSliderType {\n    /**\n     * Slider with single thumb.\n     */\n    SLIDER,\n    /**\n     *  Range slider with multiple thumbs, that can mark the range.\n     */\n    RANGE\n}\n\nexport enum SliderHandle {\n    FROM,\n    TO\n}\n\n/**\n * Slider Tick labels Orientation\n */\nexport enum TickLabelsOrientation {\n    Horizontal,\n    TopToBottom,\n    BottomToTop\n}\n\n/**\n * Slider Ticks orientation\n */\nexport enum TicksOrientation {\n    Top,\n    Bottom,\n    Mirror\n}\n","import {\n    Component,\n    Input,\n    HostListener,\n    ElementRef,\n    HostBinding,\n    Output,\n    EventEmitter,\n    OnInit,\n    OnDestroy,\n    TemplateRef\n} from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { SliderHandle } from '../slider.common';\nimport { Subject } from 'rxjs';\nimport { IgxDirectionality } from '../../services/direction/directionality';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-thumb',\n    templateUrl: 'thumb-slider.component.html',\n})\nexport class IgxSliderThumbComponent implements OnInit, OnDestroy {\n\n    private _isActive = false;\n    private _isPressed = false;\n    private _destroy$ = new Subject<boolean>();\n\n    private get thumbPositionX() {\n        const thumbBounderies = this.nativeElement.getBoundingClientRect();\n        const thumbCenter = (thumbBounderies.right - thumbBounderies.left) / 2;\n        return thumbBounderies.left + thumbCenter;\n    }\n\n    public isActive = false;\n\n    @Input()\n    public value: number;\n\n    @Input()\n    public continuous: boolean;\n\n    @Input()\n    public thumbLabelVisibilityDuration;\n\n    @Input()\n    public disabled: boolean;\n\n    @Input()\n    public onPan: Subject<number>;\n\n    @Input()\n    public stepDistance: number;\n\n    @Input()\n    public step: number;\n\n    @Input()\n    public templateRef: TemplateRef<any>;\n\n    @Input()\n    public context: any;\n\n    @Input()\n    public type: SliderHandle;\n\n    @Input()\n    public deactiveState: boolean;\n\n    @Output()\n    public onThumbValueChange = new EventEmitter<number>();\n\n    @Output()\n    public onChange = new EventEmitter<any>();\n\n    @Output()\n    public onHoverChange = new EventEmitter<boolean>();\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('attr.z-index')\n    public zIndex = 0;\n\n    @HostBinding('class.igx-slider__thumb-from')\n    public get thumbFromClass() {\n        return this.type === SliderHandle.FROM;\n    }\n\n    @HostBinding('class.igx-slider__thumb-to')\n    public get thumbToClass() {\n        return this.type === SliderHandle.TO;\n    }\n\n    @HostBinding('class.igx-slider__thumb-from--active')\n    public get thumbFromActiveClass() {\n        return this.type === SliderHandle.FROM && this._isActive;\n    }\n\n    @HostBinding('class.igx-slider__thumb-to--active')\n    public get thumbToActiveClass() {\n        return this.type === SliderHandle.TO && this._isActive;\n    }\n\n    @HostBinding('class.igx-slider__thumb--pressed')\n    public get thumbPressedClass() {\n        return this.isActive && this._isPressed;\n    }\n\n    public get nativeElement() {\n        return this._elementRef.nativeElement;\n    }\n\n    public get destroy(): Subject<boolean> {\n        return this._destroy$;\n    }\n\n    constructor(private _elementRef: ElementRef, private _dir: IgxDirectionality) { }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.onPan\n            .pipe(takeUntil(this._destroy$))\n            .subscribe(mouseX =>\n                this.updateThumbValue(mouseX)\n            );\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n\n    @HostListener('pointerenter')\n    public onPinterEnter() {\n        this.onHoverChange.emit(true);\n    }\n\n    @HostListener('pointerleave')\n    public onPointerLeave() {\n        this.onHoverChange.emit(false);\n    }\n\n    @HostListener('keydown', ['$event'])\n    public onKeyDown(event: KeyboardEvent) {\n        if (this.disabled) {\n            return;\n        }\n\n        let increment = 0;\n        if (event.key.endsWith('Left')) {\n            increment = this.step * - 1;\n        } else if (event.key.endsWith('Right')) {\n            increment = this.step;\n        } else {\n            return;\n        }\n\n        this.onChange.emit();\n        this.onThumbValueChange.emit(increment);\n    }\n\n    @HostListener('blur')\n    public onBlur() {\n        this.isActive = false;\n        this.zIndex = 0;\n    }\n\n    @HostListener('focus')\n    public onFocusListener() {\n        this.isActive = true;\n        this.zIndex = 1;\n    }\n\n    /**\n     * Show thumb label and ripple.\n     */\n    public showThumbIndicators() {\n        this.toggleThumbIndicators(true);\n    }\n\n    /**\n     * Hide thumb label and ripple.\n     */\n    public hideThumbIndicators() {\n        this.toggleThumbIndicators(false);\n    }\n\n    private updateThumbValue(mouseX: number) {\n        const updateValue = this.calculateTrackUpdate(mouseX);\n        if (this.isActive && updateValue !== 0) {\n            this.onThumbValueChange.emit(updateValue);\n        }\n    }\n\n    private calculateTrackUpdate(mouseX: number): number {\n        const scaleX = this._dir.rtl ? this.thumbPositionX - mouseX : mouseX - this.thumbPositionX;\n        const stepDistanceCenter = this.stepDistance / 2;\n\n        // If the thumb scale range (slider update) is less thn a half step,\n        // the position stays the same.\n        const scaleXPositive = Math.abs(scaleX);\n        if (scaleXPositive < stepDistanceCenter) {\n            return 0;\n        }\n\n        return this.stepToProceed(scaleX, this.stepDistance);\n    }\n\n    private stepToProceed(scaleX, stepDist) {\n        return Math.round(scaleX / stepDist) * this.step;\n    }\n\n    private toggleThumbIndicators(visible: boolean) {\n        this._isPressed = visible;\n\n        if (this.continuous || this.deactiveState) {\n            this._isActive = false;\n        } else {\n            this._isActive = visible;\n        }\n\n    }\n}\n","import { Component, Input, TemplateRef, HostBinding, ElementRef } from '@angular/core';\nimport { SliderHandle } from '../slider.common';\nimport { IgxSliderThumbComponent } from '../thumb/thumb-slider.component';\n\n@Component({\n    selector: 'igx-thumb-label',\n    templateUrl: 'thumb-label.component.html'\n})\nexport class IgxThumbLabelComponent {\n    private _active: boolean;\n\n    @Input()\n    public value: number;\n\n    @Input()\n    public templateRef: TemplateRef<any>;\n\n    @Input()\n    public context: any;\n\n    @Input()\n    public type: SliderHandle;\n\n    @Input()\n    public continuous: boolean;\n\n    @Input()\n    public deactiveState: boolean;\n\n    @Input()\n    public thumb: IgxSliderThumbComponent;\n\n\n    @HostBinding('class.igx-slider__label-from')\n    public get thumbFromClass() {\n        return this.type === SliderHandle.FROM;\n    }\n\n    @HostBinding('class.igx-slider__label-to')\n    public get thumbToClass() {\n        return this.type === SliderHandle.TO;\n    }\n\n    @HostBinding('class.igx-slider__label-from--active')\n    public get thumbFromActiveClass() {\n        return this.type === SliderHandle.FROM && this.active;\n    }\n\n    @HostBinding('class.igx-slider__label-to--active')\n    public get thumbToActiveClass() {\n        return this.type === SliderHandle.TO && this.active;\n    }\n\n    @HostBinding('class.igx-slider__label--pressed')\n    public get labelPressedClass() {\n        return this.thumb?.thumbPressedClass;\n    }\n\n    constructor(private _elementRef: ElementRef) { }\n\n    public get nativeElement() {\n        return this._elementRef.nativeElement;\n    }\n\n    public get active() {\n        return this._active;\n    }\n\n    public set active(val: boolean) {\n        if (this.continuous || this.deactiveState) {\n            this._active = false;\n        } else {\n            this._active = val;\n        }\n    }\n}\n","import { Component, Input, TemplateRef, HostBinding } from '@angular/core';\nimport { TicksOrientation, TickLabelsOrientation } from '../slider.common';\n\n/**\n * @hidden\n */\n@Component({\n    selector: 'igx-ticks',\n    templateUrl: 'ticks.component.html',\n})\nexport class IgxTicksComponent {\n    @Input()\n    public primaryTicks: number;\n\n    @Input()\n    public secondaryTicks: number;\n\n    @Input()\n    public primaryTickLabels: boolean;\n\n    @Input()\n    public secondaryTickLabels: boolean;\n\n    @Input()\n    public ticksOrientation: TicksOrientation;\n\n    @Input()\n    public tickLabelsOrientation: TickLabelsOrientation;\n\n    @Input()\n    public maxValue: number;\n\n    @Input()\n    public minValue: number;\n\n    @Input()\n    public labelsViewEnabled: boolean;\n\n    @Input()\n    public labels: Array<number | string | boolean | null | undefined>;\n\n    @Input()\n    public tickLabelTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__ticks')\n    public ticksClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__ticks--top')\n    public get ticksTopClass() {\n        return this.ticksOrientation === TicksOrientation.Top;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__ticks--tall')\n    public get hasPrimaryClass() {\n        return this.primaryTicks > 0;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__tick-labels--top-bottom')\n    public get labelsTopToBottomClass() {\n        return this.tickLabelsOrientation === TickLabelsOrientation.TopToBottom;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider__tick-labels--bottom-top')\n    public get labelsBottomToTopClass() {\n        return this.tickLabelsOrientation === TickLabelsOrientation.BottomToTop;\n    }\n\n    /**\n     * Returns the template context corresponding to\n     * {@link IgxTickLabelTemplateDirective}\n     *\n     * ```typescript\n     * return {\n     *  $implicit //returns the value per each tick label.\n     *  isPrimery //returns if the tick is primary.\n     *  labels // returns the {@link labels} collection.\n     *  index // returns the index per each tick of the whole sequence.\n     * }\n     * ```\n     *\n     * @param idx the index per each tick label.\n     */\n    public context(idx: number): any {\n        return {\n            $implicit: this.tickLabel(idx),\n            isPrimary: this.isPrimary(idx),\n            labels: this.labels,\n            index: idx\n        };\n    }\n\n    /**\n     * @hidden\n     */\n    public get ticksLength() {\n        return this.primaryTicks > 0 ?\n                ((this.primaryTicks - 1) * this.secondaryTicks) + this.primaryTicks :\n                this.secondaryTicks > 0 ? this.secondaryTicks : 0;\n    }\n\n    public hiddenTickLabels(idx: number) {\n        return this.isPrimary(idx) ? this.primaryTickLabels : this.secondaryTickLabels;\n    }\n\n    /**\n     * @hidden\n     */\n    public isPrimary(idx: number) {\n        return this.primaryTicks <= 0 ? false :\n            idx % (this.secondaryTicks + 1) === 0;\n    }\n\n    /**\n     * @hidden\n     */\n    public tickLabel(idx: number) {\n        if (this.labelsViewEnabled) {\n            return this.labels[idx];\n        }\n\n        const labelStep = (Math.max(this.minValue, this.maxValue) - Math.min(this.minValue, this.maxValue)) / (this.ticksLength - 1);\n        const labelVal = labelStep * idx;\n\n        return (this.minValue + labelVal).toFixed(2);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'spreadTickLabels'\n})\nexport class IgxTickLabelsPipe implements PipeTransform {\n\n\n    public transform(labels: Array<string | number | boolean | null | undefined>, secondaryTicks: number) {\n        if (!labels) {\n            return;\n        }\n\n        const result = [];\n        labels.forEach(item => {\n            result.push(item);\n            for (let i = 0; i < secondaryTicks; i++) {\n                result.push('');\n            }\n        });\n\n        return result;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit, Component, ElementRef, EventEmitter,\n    HostBinding, Input, NgModule, OnInit, Output, Renderer2,\n    ViewChild,\n    TemplateRef,\n    ContentChild,\n    OnDestroy,\n    HostListener,\n    ViewChildren,\n    QueryList,\n    ChangeDetectorRef,\n    OnChanges,\n    NgZone,\n    AfterContentInit\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxSliderThumbComponent } from './thumb/thumb-slider.component';\nimport { Subject, merge, Observable, timer, pipe } from 'rxjs';\nimport { takeUntil, throttleTime } from 'rxjs/operators';\nimport {\n    SliderHandle,\n    IgxThumbFromTemplateDirective,\n    IgxThumbToTemplateDirective,\n    IRangeSliderValue,\n    IgxSliderType,\n    ISliderValueChangeEventArgs,\n    TicksOrientation,\n    TickLabelsOrientation,\n    IgxTickLabelTemplateDirective\n} from './slider.common';\nimport { IgxThumbLabelComponent } from './label/thumb-label.component';\nimport { IgxTicksComponent } from './ticks/ticks.component';\nimport { IgxTickLabelsPipe } from './ticks/tick.pipe';\nimport { isIE, resizeObservable } from '../core/utils';\nimport { IgxDirectionality } from '../services/direction/directionality';\n\nconst noop = () => {\n};\n\nlet NEXT_ID = 0;\n\n/**\n * **Ignite UI for Angular Slider** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/slider/slider)\n *\n * The Ignite UI Slider allows selection in a given range by moving the thumb along the track. The track\n * can be defined as continuous or stepped, and you can choose between single and range slider types.\n *\n * Example:\n * ```html\n * <igx-slider id=\"slider\"\n *            [minValue]=\"0\" [maxValue]=\"100\"\n *            [continuous]=true [(ngModel)]=\"volume\">\n * </igx-slider>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxSliderComponent, multi: true }],\n    selector: 'igx-slider',\n    templateUrl: 'slider.component.html'\n})\nexport class IgxSliderComponent implements\n    ControlValueAccessor,\n    EditorProvider,\n    OnInit,\n    AfterViewInit,\n    AfterContentInit,\n    OnChanges,\n    OnDestroy {\n\n    // Limit handle travel zone\n    private _pMin = 0;\n    private _pMax = 1;\n\n    // From/upperValue in percent values\n    private _hasViewInit = false;\n    private _minValue = 0;\n    private _maxValue = 100;\n    private _lowerBound?: number;\n    private _upperBound?: number;\n    private _lowerValue?: number;\n    private _upperValue?: number;\n    private _continuous = false;\n    private _disabled = false;\n    private _step = 1;\n    private _value: number | IRangeSliderValue = 0;\n\n    // ticks\n    private _primaryTicks = 0;\n    private _secondaryTicks = 0;\n\n    private _labels = new Array<number | string | boolean | null | undefined>();\n    private _type = IgxSliderType.SLIDER;\n\n    private _destroyer$ = new Subject<boolean>();\n    private _indicatorsDestroyer$ = new Subject<boolean>();\n    private _indicatorsTimer: Observable<any>;\n\n    private _onChangeCallback: (_: any) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('ticks', { static: true })\n    private ticks: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxSliderThumbComponent)\n    private thumbs: QueryList<IgxSliderThumbComponent> = new QueryList<IgxSliderThumbComponent>();\n\n    /**\n     * @hidden\n     */\n    @ViewChildren(IgxThumbLabelComponent)\n    private labelRefs: QueryList<IgxThumbLabelComponent> = new QueryList<IgxThumbLabelComponent>();\n\n    /**\n     * @hidden\n     */\n    public get thumbFrom(): IgxSliderThumbComponent {\n        return this.thumbs.find(thumb => thumb.type === SliderHandle.FROM);\n    }\n\n    /**\n     * @hidden\n     */\n    public get thumbTo(): IgxSliderThumbComponent {\n        return this.thumbs.find(thumb => thumb.type === SliderHandle.TO);\n    }\n\n    private get labelFrom(): IgxThumbLabelComponent {\n        return this.labelRefs.find(label => label.type === SliderHandle.FROM);\n    }\n\n    private get labelTo(): IgxThumbLabelComponent {\n        return this.labelRefs.find(label => label.type === SliderHandle.TO);\n    }\n\n    /**\n     * @hidden\n     */\n    @ViewChild('track', { static: true })\n    public trackRef: ElementRef;\n\n    /**\n     * @hidden\n     */\n    public stepDistance = this._step;\n\n    /**\n     * @hidden\n     */\n    public onPan: Subject<number> = new Subject<number>();\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxThumbFromTemplateDirective, { read: TemplateRef })\n    public thumbFromTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxThumbToTemplateDirective, { read: TemplateRef })\n    public thumbToTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTickLabelTemplateDirective, { read: TemplateRef, static: false })\n    public tickLabelTemplateRef: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.role`)\n    public role = 'slider';\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.aria-valuemin`)\n    public get valuemin() {\n        return this.minValue;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.aria-valuemax`)\n    public get valuemax() {\n        return this.maxValue;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding(`attr.aria-readonly`)\n    public get readonly() {\n        return this.disabled;\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider')\n    public slierClass = true;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-slider--disabled')\n    public get disabledClass() {\n        return this.disabled;\n    }\n\n    /**\n     * An @Input property that sets the value of the `id` attribute.\n     * If not provided it will be automatically generated.\n     * ```html\n     * <igx-slider [id]=\"'igx-slider-32'\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-slider-${NEXT_ID++}`;\n\n    /**\n     * An @Input property that gets the type of the `IgxSliderComponent`.\n     * The slider can be IgxSliderType.SLIDER(default) or IgxSliderType.RANGE.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let type = this.slider.type;\n     * }\n     */\n    @Input()\n    public get type() {\n        return this._type;\n    }\n\n    /**\n     * An @Input property that sets the type of the `IgxSliderComponent`.\n     * The slider can be IgxSliderType.SLIDER(default) or IgxSliderType.RANGE.\n     * ```typescript\n     * sliderType: IgxSliderType = IgxSliderType.RANGE;\n     * ```\n     * ```html\n     * <igx-slider #slider2 [type]=\"sliderType\" [(ngModel)]=\"rangeValue\" [minValue]=\"0\" [maxValue]=\"100\">\n     * ```\n     */\n    public set type(type: IgxSliderType) {\n        this._type = type;\n\n        if (type === IgxSliderType.SLIDER) {\n            this.lowerValue = 0;\n        }\n\n        if (this.labelsViewEnabled && this.upperValue > this.maxValue) {\n            this.upperValue = this.labels.length - 1;\n        }\n\n        if (this._hasViewInit) {\n            this.updateTrack();\n        }\n    }\n\n    /**\n     * An @Input property that sets the duration visibility of thumbs labels. The default value is 750 milliseconds.\n     * ```html\n     * <igx-slider #slider [thumbLabelVisibilityDuration]=\"3000\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Input()\n    public thumbLabelVisibilityDuration = 750;\n\n\n    /**\n     * Enables `labelView`, by accepting a collection of primitive values with more than one element.\n     * Each element will be equally spread over the slider and it will serve as a thumb label.\n     * Once the property is set, it will precendence over {@link maxValue}, {@link minValue}, {@link step}.\n     * This means that the manipulation for those properties won't be allowed.\n     */\n    @Input()\n    public get labels() {\n        return this._labels;\n    }\n\n    public set labels(labels: Array<number | string | boolean | null | undefined>) {\n        this._labels = labels;\n\n        this._pMax = this.valueToFraction(this.upperBound, 0, 1);\n        this._pMin = this.valueToFraction(this.lowerBound, 0, 1);\n\n        this.positionHandlersAndUpdateTrack();\n\n        if (this._hasViewInit) {\n            this.stepDistance = this.calculateStepDistance();\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the template context corresponding\n     * to {@link IgxThumbFromTemplateDirective} and {@link IgxThumbToTemplateDirective} templates.\n     *\n     * ```typescript\n     * return {\n     *  $implicit // returns the value of the label,\n     *  labels // returns the labels collection the user has passed.\n     * }\n     * ```\n     */\n    public get context(): any {\n        return {\n            $implicit: this.value,\n            labels: this.labels\n        };\n    }\n\n    /**\n     * An @Input property that sets the incremental/decremental step of the value when dragging the thumb.\n     * The default step is 1, and step should not be less or equal than 0.\n     * ```html\n     * <igx-slider #slider [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Input()\n    public set step(step: number) {\n        this._step = step;\n\n        if (this._hasViewInit) {\n            this.stepDistance = this.calculateStepDistance();\n            this.normalizeByStep(this.value);\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the incremental/decremental dragging step of the {@link IgxSliderComponent}.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let step = this.slider.step;\n     * }\n     * ```\n     */\n    public get step() {\n        return this.labelsViewEnabled ? 1 : this._step;\n    }\n\n    /**\n     * Returns if the {@link IgxSliderComponent} is disabled.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let isDisabled = this.slider.disabled;\n     * }\n     * ```\n     */\n    @Input()\n    public get disabled(): boolean {\n        return this._disabled;\n    }\n\n    /**\n     * An @Input property that disables or enables UI interaction.\n     * ```html\n     * <igx-slider #slider [disabled]=\"'true'\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    public set disabled(disable: boolean) {\n        this._disabled = disable;\n\n        if (this._hasViewInit) {\n            this.changeThumbFocusableState(disable);\n        }\n    }\n\n    /**\n     * Returns if the {@link IgxSliderComponent} is set as continuous.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let continuous = this.slider.continuous;\n     * }\n     * ```\n     */\n    @Input()\n    public get continuous(): boolean {\n        return this._continuous;\n    }\n\n    /**\n     * An @Input property that marks the {@link IgxSliderComponent} as continuous.\n     * By default is considered that the {@link IgxSliderComponent} is discrete.\n     * Discrete {@link IgxSliderComponent} does not have ticks and does not show bubble labels for values.\n     * ```html\n     * <igx-slider #slider [continuous]=\"'true'\" [(ngModel)]=\"task.percentCompleted\" [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    public set continuous(continuous: boolean) {\n        this._continuous = continuous;\n        if (this._hasViewInit) {\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the minimal value of the `IgxSliderComponent`.\n     * ```typescript\n     *  @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let sliderMin = this.slider.minValue;\n     * }\n     * ```\n     */\n    public get minValue(): number {\n        if (this.labelsViewEnabled) {\n            return 0;\n        }\n\n        return this._minValue;\n    }\n\n    /**\n     * Sets the minimal value for the `IgxSliderComponent`.\n     * The default minimal value is 0.\n     * ```html\n     * <igx-slider [type]=\"sliderType\" [minValue]=\"56\" [maxValue]=\"100\">\n     * ```\n     */\n    @Input()\n    public set minValue(value: number) {\n        if (value >= this.maxValue) {\n            return;\n        } else {\n            this._minValue = value;\n        }\n\n        if (value > this.upperBound) {\n            this.updateUpperBoundAndMaxTravelZone();\n            this.lowerBound = value;\n        }\n\n        // Refresh min travel zone limit.\n        this._pMin = 0;\n        // Recalculate step distance.\n        this.positionHandlersAndUpdateTrack();\n        if (this._hasViewInit) {\n            this.stepDistance = this.calculateStepDistance();\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the maximum value for the {@link IgxSliderComponent}.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let sliderMax = this.slider.maxValue;\n     * }\n     *  ```\n     */\n    public get maxValue(): number {\n        return this.labelsViewEnabled ?\n            this.labels.length - 1 :\n            this._maxValue;\n    }\n\n    /**\n     * Sets the maximal value for the `IgxSliderComponent`.\n     * The default maximum value is 100.\n     * ```html\n     * <igx-slider [type]=\"sliderType\" [minValue]=\"56\" [maxValue]=\"256\">\n     * ```\n     */\n    @Input()\n    public set maxValue(value: number) {\n        if (value <= this._minValue) {\n            return;\n        } else {\n            this._maxValue = value;\n        }\n\n        if (value < this.lowerBound) {\n            this.updateLowerBoundAndMinTravelZone();\n            this.upperBound = value;\n        }\n\n        // refresh max travel zone limits.\n        this._pMax = 1;\n        // recalculate step distance.\n        this.positionHandlersAndUpdateTrack();\n        if (this._hasViewInit) {\n            this.stepDistance = this.calculateStepDistance();\n            this.setTickInterval();\n        }\n    }\n\n    /**\n     * Returns the lower boundary of the `IgxSliderComponent`.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let sliderLowBound = this.slider.lowerBound;\n     * }\n     * ```\n     */\n    public get lowerBound(): number {\n        if (!Number.isNaN(this._lowerBound) && this._lowerBound !== undefined) {\n            return this.valueInRange(this._lowerBound, this.minValue, this.maxValue);\n        }\n\n        return this.minValue;\n    }\n\n    /**\n     * Sets the lower boundary of the `IgxSliderComponent`.\n     * If not set is the same as min value.\n     * ```html\n     * <igx-slider [step]=\"5\" [lowerBound]=\"20\">\n     * ```\n     */\n    @Input()\n    public set lowerBound(value: number) {\n        if (value >= this.upperBound || (this.labelsViewEnabled && value < 0)) {\n            return;\n        }\n\n        this._lowerBound = this.valueInRange(value, this.minValue, this.maxValue);\n\n        // Refresh min travel zone.\n        this._pMin = this.valueToFraction(this._lowerBound, 0, 1);\n        this.positionHandlersAndUpdateTrack();\n    }\n\n    /**\n     * Returns the upper boundary of the `IgxSliderComponent`.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *    let sliderUpBound = this.slider.upperBound;\n     * }\n     * ```\n     */\n    public get upperBound(): number {\n        if (!Number.isNaN(this._upperBound) && this._upperBound !== undefined) {\n            return this.valueInRange(this._upperBound, this.minValue, this.maxValue);\n        }\n\n        return this.maxValue;\n    }\n\n    /**\n     * Sets the upper boundary of the `IgxSliderComponent`.\n     * If not set is the same as max value.\n     * ```html\n     * <igx-slider [step]=\"5\" [upperBound]=\"20\">\n     * ```\n     */\n    @Input()\n    public set upperBound(value: number) {\n        if (value <= this.lowerBound || (this.labelsViewEnabled && value > this.labels.length - 1)) {\n            return;\n        }\n\n        this._upperBound = this.valueInRange(value, this.minValue, this.maxValue);\n        // Refresh time travel zone.\n        this._pMax = this.valueToFraction(this._upperBound, 0, 1);\n        this.positionHandlersAndUpdateTrack();\n    }\n\n    /**\n     * Returns the slider value. If the slider is of type {@link IgxSliderType.SLIDER} the returned value is number.\n     * If the slider type is {@link IgxSliderType.RANGE}.\n     * The returned value represents an object of {@link lowerValue} and {@link upperValue}.\n     * ```typescript\n     * @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * public sliderValue(event){\n     *     let sliderVal = this.slider.value;\n     * }\n     * ```\n     */\n    public get value(): number | IRangeSliderValue {\n        if (this.isRange) {\n            return {\n                lower: this.valueInRange(this.lowerValue, this.lowerBound, this.upperBound),\n                upper: this.valueInRange(this.upperValue, this.lowerBound, this.upperBound)\n            };\n        } else {\n            return this.valueInRange(this.upperValue, this.lowerBound, this.upperBound);\n        }\n    }\n\n    /**\n     * Sets the slider value.\n     * If the slider is of type {@link IgxSliderType.SLIDER}.\n     * The argument is number. By default the {@link value} gets the {@link lowerBound}.\n     * If the slider type is {@link IgxSliderType.RANGE} the argument\n     * represents an object of {@link lowerValue} and {@link upperValue} properties.\n     * By default the object is associated with the {@link lowerBound} and {@link upperBound} property values.\n     * ```typescript\n     * rangeValue = {\n     *   lower: 30,\n     *   upper: 60\n     * };\n     * ```\n     * ```html\n     * <igx-slider [type]=\"sliderType\" [(ngModel)]=\"rangeValue\" [minValue]=\"56\" [maxValue]=\"256\">\n     * ```\n     */\n    @Input()\n    public set value(value: number | IRangeSliderValue) {\n        if (this._hasViewInit) {\n            this.setValue(value, true);\n            this.positionHandlersAndUpdateTrack();\n        } else {\n            this._value = value;\n        }\n    }\n\n    /**\n     * Returns the number of the presented primary ticks.\n     * ```typescript\n     * const primaryTicks = this.slider.primaryTicks;\n     * ```\n     */\n    @Input()\n    public get primaryTicks() {\n        if (this.labelsViewEnabled) {\n            return this._primaryTicks = this.labels.length;\n        }\n        return this._primaryTicks;\n    }\n\n    /**\n     * Sets the number of primary ticks. If {@link @labels} is enabled, this property won't function.\n     * Insted enable ticks by {@link showTicks} property.\n     * ```typescript\n     * this.slider.primaryTicks = 5;\n     * ```\n     */\n    public set primaryTicks(val: number) {\n        if (val <= 1) {\n            return;\n        }\n\n        this._primaryTicks = val;\n    }\n\n    /**\n     * Returns the number of the presented secondary ticks.\n     * ```typescript\n     * const secondaryTicks = this.slider.secondaryTicks;\n     * ```\n     */\n    @Input()\n    public get secondaryTicks() {\n        return this._secondaryTicks;\n    }\n\n    /**\n     * Sets the number of secondary ticks. The property functions even when {@link labels} is enabled,\n     * but all secondary ticks won't present any tick labels.\n     * ```typescript\n     * this.slider.secondaryTicks = 5;\n     * ```\n     */\n    public set secondaryTicks(val: number) {\n        if (val < 1) {\n            return;\n        }\n\n        this._secondaryTicks = val;\n    }\n\n    /**\n     * Show/hide slider ticks\n     * ```html\n     * <igx-slier [showTicks]=\"true\" [primaryTicks]=\"5\"></igx-slier>\n     * ```\n     */\n    @Input()\n    public showTicks = false;\n\n    /**\n     * show/hide primary tick labels\n     * ```html\n     * <igx-slider [primaryTicks]=\"5\" [primaryTickLabels]=\"false\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public primaryTickLabels = true;\n\n    /**\n     * show/hide secondary tick labels\n     * ```html\n     * <igx-slider [secondaryTicks]=\"5\" [secondaryTickLabels]=\"false\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public secondaryTickLabels = true;\n\n    /**\n     * Changes ticks orientation:\n     * bottom - The default orienation, below the slider track.\n     * top - Above the slider track\n     * mirror - combines top and bottom orientation.\n     * ```html\n     * <igx-slider [primaryTicks]=\"5\" [ticksOrientation]=\"ticksOrientation\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public ticksOrientation: TicksOrientation = TicksOrientation.Bottom;\n\n    /**\n     * Changes tick labels rotation:\n     * horizontal - The default rotation\n     * toptobottom - Rotates tick labels vertically to 90deg\n     * bottomtotop - Rotate tick labels vertically to -90deg\n     * ```html\n     * <igx-slider [primaryTicks]=\"5\" [secondaryTicks]=\"3\" [tickLabelsOrientation]=\"tickLabelsOrientaiton\"></igx-slider>\n     * ```\n     */\n    @Input()\n    public tickLabelsOrientation = TickLabelsOrientation.Horizontal;\n\n    /**\n     * @hidden\n     */\n    public get deactivateThumbLabel() {\n        return ((this.primaryTicks && this.primaryTickLabels) || (this.secondaryTicks && this.secondaryTickLabels)) &&\n            (this.ticksOrientation === TicksOrientation.Top || this.ticksOrientation === TicksOrientation.Mirror);\n    }\n\n    /**\n     * This event is emitted every time the value is changed.\n     * ```typescript\n     * public change(event){\n     *    alert(\"The value has been changed!\");\n     * }\n     * ```\n     * ```html\n     * <igx-slider (onValueChange)=\"change($event)\" #slider [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Output()\n    public onValueChange = new EventEmitter<ISliderValueChangeEventArgs>();\n\n    /**\n     * This event is emitted at the end of every slide interaction.\n     * ```typescript\n     * public change(event){\n     *    alert(\"The value has been changed!\");\n     * }\n     * ```\n     * ```html\n     * <igx-slider (onValueChanged)=\"change($event)\" #slider [(ngModel)]=\"task.percentCompleted\" [step]=\"5\">\n     * ```\n     */\n    @Output()\n    public onValueChanged = new EventEmitter<number | IRangeSliderValue>();\n\n\n    constructor(\n        private renderer: Renderer2,\n        private _el: ElementRef,\n        private _cdr: ChangeDetectorRef,\n        private _ngZone: NgZone,\n        private _dir: IgxDirectionality) { }\n\n    /**\n     * @hidden\n     */\n    @HostListener('pointerdown', ['$event'])\n    public onPointerDown($event: PointerEvent) {\n        this.findClosestThumb($event);\n\n        if (!this.thumbTo.isActive && this.thumbFrom === undefined) {\n            return;\n        }\n\n        const activeThumb = this.thumbTo.isActive ? this.thumbTo : this.thumbFrom;\n        activeThumb.nativeElement.setPointerCapture($event.pointerId);\n        this.showSliderIndicators();\n\n        $event.preventDefault();\n    }\n\n\n    /**\n     * @hidden\n     */\n    @HostListener('pointerup', ['$event'])\n    public onPointerUp($event: PointerEvent) {\n        if (!this.thumbTo.isActive && this.thumbFrom === undefined) {\n            return;\n        }\n\n        const activeThumb = this.thumbTo.isActive ? this.thumbTo : this.thumbTo;\n        activeThumb.nativeElement.releasePointerCapture($event.pointerId);\n\n        this.hideSliderIndicators();\n        this.onValueChanged.emit(this.value);\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('focus')\n    public onFocus() {\n        this.toggleSliderIndicators();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('pan', ['$event'])\n    public onPanListener($event) {\n        this.update($event.srcEvent.clientX);\n    }\n\n    /**\n     * Returns whether the `IgxSliderComponent` type is RANGE.\n     * ```typescript\n     *  @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * ngAfterViewInit(){\n     *     let sliderRange = this.slider.isRange;\n     * }\n     * ```\n     */\n    public get isRange(): boolean {\n        return this.type === IgxSliderType.RANGE;\n    }\n\n    /**\n     * Returns the lower value of the `IgxSliderComponent`.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * public lowValue(event){\n     *    let sliderLowValue = this.slider.lowerValue;\n     * }\n     * ```\n     */\n    public get lowerValue(): number {\n        if (!Number.isNaN(this._lowerValue) && this._lowerValue !== undefined && this._lowerValue >= this.lowerBound) {\n            return this._lowerValue;\n        }\n\n        return this.lowerBound;\n    }\n\n    /**\n     * Sets the lower value of the `IgxSliderComponent`.\n     * ```typescript\n     *  @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * public lowValue(event){\n     *     this.slider.lowerValue = 120;\n     * }\n     * ```\n     */\n    public set lowerValue(value: number) {\n        value = this.valueInRange(value, this.lowerBound, this.upperBound);\n        this._lowerValue = value;\n\n    }\n\n    /**\n     * Returns the upper value of the `IgxSliderComponent`.\n     * ```typescript\n     *  @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * public upperValue(event){\n     *     let upperValue = this.slider.upperValue;\n     * }\n     * ```\n     */\n    public get upperValue() {\n        if (!Number.isNaN(this._upperValue) && this._upperValue !== undefined && this._upperValue <= this.upperBound) {\n            return this._upperValue;\n        }\n\n        return this.upperBound;\n    }\n\n    /**\n     * Sets the upper value of the `IgxSliderComponent`.\n     * ```typescript\n     *  @ViewChild(\"slider2\")\n     * public slider: IgxSliderComponent;\n     * public upperValue(event){\n     *     this.slider.upperValue = 120;\n     * }\n     * ```\n     */\n    public set upperValue(value: number) {\n        value = this.valueInRange(value, this.lowerBound, this.upperBound);\n        this._upperValue = value;\n    }\n\n    /**\n     * Returns the value corresponding the lower label.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * let label = this.slider.lowerLabel;\n     * ```\n     */\n    public get lowerLabel() {\n        return this.labelsViewEnabled ?\n            this.labels[this.lowerValue] :\n            this.lowerValue;\n    }\n\n    /**\n     * Returns the value corresponding the upper label.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * let label = this.slider.upperLabel;\n     * ```\n     */\n    public get upperLabel() {\n        return this.labelsViewEnabled ?\n            this.labels[this.upperValue] :\n            this.upperValue;\n    }\n\n    /**\n     * Returns if label view is enabled.\n     * If the {@link labels} is set, the view is automatically activated.\n     * ```typescript\n     * @ViewChild(\"slider\")\n     * public slider: IgxSliderComponent;\n     * let labelView = this.slider.labelsViewEnabled;\n     * ```\n     */\n    public get labelsViewEnabled(): boolean {\n        return !!(this.labels && this.labels.length > 1);\n    }\n\n    /**\n     * @hidden\n     */\n    public get showTopTicks() {\n        return this.ticksOrientation === TicksOrientation.Top ||\n            this.ticksOrientation === TicksOrientation.Mirror;\n    }\n\n    /**\n     * @hidden\n     */\n    public get showBottomTicks() {\n        return this.ticksOrientation === TicksOrientation.Bottom ||\n            this.ticksOrientation === TicksOrientation.Mirror;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnChanges(changes) {\n        if (changes.minValue && changes.maxValue &&\n            changes.minValue.currentValue < changes.maxValue.currentValue) {\n            this._maxValue = changes.maxValue.currentValue;\n            this._minValue = changes.minValue.currentValue;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit() {\n        this.sliderSetup();\n\n        // Set track travel zone\n        this._pMin = this.valueToFraction(this.lowerBound) || 0;\n        this._pMax = this.valueToFraction(this.upperBound) || 1;\n    }\n\n    public ngAfterContentInit() {\n        this.setValue(this._value, false);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        this._hasViewInit = true;\n        this.stepDistance = this.calculateStepDistance();\n        this.positionHandlersAndUpdateTrack();\n        this.setTickInterval();\n        this.changeThumbFocusableState(this.disabled);\n\n        this.subscribeTo(this.thumbFrom, this.thumbChanged.bind(this));\n        this.subscribeTo(this.thumbTo, this.thumbChanged.bind(this));\n\n        this.thumbs.changes.pipe(takeUntil(this._destroyer$)).subscribe(change => {\n            const thumbFrom = change.find((thumb: IgxSliderThumbComponent) => thumb.type === SliderHandle.FROM);\n            this.positionHandler(thumbFrom, null, this.lowerValue);\n            this.subscribeTo(thumbFrom, this.thumbChanged.bind(this));\n            this.changeThumbFocusableState(this.disabled);\n        });\n\n        this.labelRefs.changes.pipe(takeUntil(this._destroyer$)).subscribe(change => {\n            const labelFrom = this.labelRefs.find((label: IgxThumbLabelComponent) => label.type === SliderHandle.FROM);\n            this.positionHandler(null, labelFrom, this.lowerValue);\n        });\n\n        this._ngZone.runOutsideAngular(() => {\n            resizeObservable(this._el.nativeElement).pipe(\n                throttleTime(40),\n                takeUntil(this._destroyer$)).subscribe(() => this._ngZone.run(() => {\n                    this.stepDistance = this.calculateStepDistance();\n                }));\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy() {\n        this._destroyer$.next(true);\n        this._destroyer$.complete();\n\n        this._indicatorsDestroyer$.next(true);\n        this._indicatorsDestroyer$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    public writeValue(value: IRangeSliderValue | number): void {\n        if (!value) {\n            return;\n        }\n\n        this.normalizeByStep(value);\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnChange(fn: any): void {\n        this._onChangeCallback = fn;\n    }\n\n    /**\n     * @hidden\n     */\n    public registerOnTouched(fn: any): void {\n        this._onTouchedCallback = fn;\n    }\n\n    /** @hidden */\n    public getEditElement() {\n        return this.isRange ? this.thumbFrom.nativeElement : this.thumbTo.nativeElement;\n    }\n\n    /**\n     *\n     * @hidden\n     */\n    public update(mouseX) {\n        if (this.disabled) {\n            return;\n        }\n\n        // Update To/From Values\n        this.onPan.next(mouseX);\n\n        // Finally do positionHandlersAndUpdateTrack the DOM\n        // based on data values\n        this.positionHandlersAndUpdateTrack();\n        this._onTouchedCallback();\n    }\n\n    /**\n     * @hidden\n     */\n    public thumbChanged(value: number, thumbType: number) {\n        const oldValue = this.value;\n\n        let newVal: IRangeSliderValue;\n        if (this.isRange) {\n            if (thumbType === SliderHandle.FROM) {\n                newVal = {\n                    lower: (this.value as IRangeSliderValue).lower + value,\n                    upper: (this.value as IRangeSliderValue).upper\n                };\n            } else {\n                newVal = {\n                    lower: (this.value as IRangeSliderValue).lower,\n                    upper: (this.value as IRangeSliderValue).upper + value\n                };\n            }\n\n            // Swap the thumbs if a collision appears.\n            if (newVal.lower >= newVal.upper) {\n                this.value = this.swapThumb(newVal);\n            } else {\n                this.value = newVal;\n            }\n\n        } else {\n            this.value = this.value as number + value;\n        }\n\n        if (this.hasValueChanged(oldValue)) {\n            this.emitValueChanged(oldValue);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onThumbChange() {\n        this.toggleSliderIndicators();\n    }\n\n    /**\n     * @hidden\n     */\n    public onHoverChange(state: boolean) {\n        return state ? this.showSliderIndicators() : this.hideSliderIndicators();\n    }\n\n\n\n    private swapThumb(value: IRangeSliderValue) {\n        if (this.thumbFrom.isActive) {\n            value.upper = this.upperValue;\n            value.lower = this.upperValue;\n        } else {\n            value.upper = this.lowerValue;\n            value.lower = this.lowerValue;\n        }\n\n        this.toggleThumb();\n        return value;\n    }\n\n    private findClosestThumb(event: PointerEvent) {\n        if (this.isRange) {\n            this.closestHandle(event);\n        } else {\n            this.thumbTo.nativeElement.focus();\n        }\n\n        this.update(event.clientX);\n    }\n\n    private updateLowerBoundAndMinTravelZone() {\n        this.lowerBound = this.minValue;\n        this._pMin = 0;\n    }\n\n    private updateUpperBoundAndMaxTravelZone() {\n        this.upperBound = this.maxValue;\n        this._pMax = 1;\n    }\n\n    private sliderSetup() {\n        /**\n         * if {@link SliderType.SLIDER} than the initial value shold be the lowest one.\n         */\n        if (!this.isRange && this._upperValue === undefined) {\n            this._upperValue = this.lowerBound;\n        }\n    }\n\n    private calculateStepDistance() {\n        return this._el.nativeElement.getBoundingClientRect().width / (this.maxValue - this.minValue) * this.step;\n    }\n\n    private toggleThumb() {\n        return this.thumbFrom.isActive ?\n            this.thumbTo.nativeElement.focus() :\n            this.thumbFrom.nativeElement.focus();\n    }\n\n    private valueInRange(value, min = 0, max = 100) {\n        return Math.max(Math.min(value, max), min);\n    }\n\n    private generateTickMarks(color: string, interval: number) {\n        return interval !== null ? `repeating-linear-gradient(\n            ${'to left'},\n            ${color},\n            ${color} 1.5px,\n            transparent 1.5px,\n            transparent ${interval}%\n        ), repeating-linear-gradient(\n            ${'to right'},\n            ${color},\n            ${color} 1.5px,\n            transparent 1.5px,\n            transparent ${interval}%\n        )` : interval;\n    }\n\n    private positionHandler(thumbHandle: ElementRef, labelHandle: ElementRef, position: number) {\n        const percent = `${this.valueToFraction(position) * 100}%`;\n        const dir = this._dir.rtl ? 'right' : 'left';\n\n        if (thumbHandle) {\n            thumbHandle.nativeElement.style[dir] = percent;\n        }\n\n        if (labelHandle) {\n            labelHandle.nativeElement.style[dir] = percent;\n        }\n    }\n\n    private positionHandlersAndUpdateTrack() {\n        if (!this.isRange) {\n            this.positionHandler(this.thumbTo, this.labelTo, this.value as number);\n        } else {\n            this.positionHandler(this.thumbTo, this.labelTo, (this.value as IRangeSliderValue).upper);\n            this.positionHandler(this.thumbFrom, this.labelFrom, (this.value as IRangeSliderValue).lower);\n        }\n\n        if (this._hasViewInit) {\n            this.updateTrack();\n        }\n    }\n\n    private closestHandle(event: PointerEvent) {\n        const fromOffset = this.thumbFrom.nativeElement.offsetLeft + this.thumbFrom.nativeElement.offsetWidth / 2;\n        const toOffset = this.thumbTo.nativeElement.offsetLeft + this.thumbTo.nativeElement.offsetWidth / 2;\n        const xPointer = event.clientX - this._el.nativeElement.getBoundingClientRect().left;\n        const match = this.closestTo(xPointer, [fromOffset, toOffset]);\n\n        if (fromOffset === toOffset && toOffset < xPointer) {\n            this.thumbTo.nativeElement.focus();\n        } else if (fromOffset === toOffset && toOffset > xPointer) {\n            this.thumbFrom.nativeElement.focus();\n        } else if (match === fromOffset) {\n            this.thumbFrom.nativeElement.focus();\n        } else {\n            this.thumbTo.nativeElement.focus();\n        }\n    }\n\n    private setTickInterval() {\n        let interval;\n        const trackProgress = 100;\n        if (this.labelsViewEnabled) {\n            // Calc ticks depending on the labels length;\n            interval = ((trackProgress / (this.labels.length - 1) * 10)) / 10;\n        } else {\n            const trackRange = this.maxValue - this.minValue;\n            interval = this.step > 1 ?\n                (trackProgress / ((trackRange / this.step)) * 10) / 10\n                : null;\n        }\n\n        const renderCallbackExecution = !this.continuous ? this.generateTickMarks(\n            isIE() ? 'white' : 'var(--igx-slider-track-step-color, white)', interval) : null;\n        this.renderer.setStyle(this.ticks.nativeElement, 'background', renderCallbackExecution);\n    }\n\n    private showSliderIndicators() {\n        if (this.disabled) {\n            return;\n        }\n\n        if (this._indicatorsTimer) {\n            this._indicatorsDestroyer$.next(true);\n            this._indicatorsTimer = null;\n        }\n\n        this.thumbTo.showThumbIndicators();\n        this.labelTo.active = true;\n        if (this.thumbFrom) {\n            this.thumbFrom.showThumbIndicators();\n        }\n\n        if (this.labelFrom) {\n            this.labelFrom.active = true;\n        }\n\n    }\n\n    private hideSliderIndicators() {\n        if (this.disabled) {\n            return;\n        }\n\n        this._indicatorsTimer = timer(this.thumbLabelVisibilityDuration);\n        this._indicatorsTimer.pipe(takeUntil(this._indicatorsDestroyer$)).subscribe(() => {\n            this.thumbTo.hideThumbIndicators();\n            this.labelTo.active = false;\n            if (this.thumbFrom) {\n                this.thumbFrom.hideThumbIndicators();\n            }\n\n            if (this.labelFrom) {\n                this.labelFrom.active = false;\n            }\n        });\n    }\n\n    private toggleSliderIndicators() {\n        this.showSliderIndicators();\n        this.hideSliderIndicators();\n    }\n\n    private changeThumbFocusableState(state: boolean) {\n        const value = state ? -1 : 1;\n\n        if (this.isRange) {\n            this.thumbFrom.tabindex = value;\n        }\n\n        this.thumbTo.tabindex = value;\n\n        this._cdr.detectChanges();\n    }\n\n    private closestTo(goal: number, positions: number[]): number {\n        return positions.reduce((previous, current) => {\n            return (Math.abs(goal - current) < Math.abs(goal - previous) ? current : previous);\n        });\n    }\n\n    private valueToFraction(value: number, pMin = this._pMin, pMax = this._pMax) {\n        return this.valueInRange((value - this.minValue) / (this.maxValue - this.minValue), pMin, pMax);\n    }\n\n    /**\n     * @hidden\n     * Normaliz the value when two-way data bind is used and {@link this.step} is set.\n     * @param value\n     */\n    private normalizeByStep(value: IRangeSliderValue | number) {\n        if (this.isRange) {\n            this.value = {\n                lower: (value as IRangeSliderValue).lower - ((value as IRangeSliderValue).lower % this.step),\n                upper: (value as IRangeSliderValue).upper - ((value as IRangeSliderValue).upper % this.step)\n            };\n        } else {\n            this.value = (value as number) - ((value as number) % this.step);\n        }\n\n        this._cdr.detectChanges();\n    }\n\n    private updateTrack() {\n        const fromPosition = this.valueToFraction(this.lowerValue);\n        const toPosition = this.valueToFraction(this.upperValue);\n        const positionGap = toPosition - fromPosition;\n\n        let trackLeftIndention = fromPosition;\n        if (this.isRange) {\n            if (positionGap) {\n                trackLeftIndention = Math.round((1 / positionGap * fromPosition) * 100);\n            }\n\n            trackLeftIndention = this._dir.rtl ? -trackLeftIndention : trackLeftIndention;\n            this.renderer.setStyle(this.trackRef.nativeElement, 'transform', `scaleX(${positionGap}) translateX(${trackLeftIndention}%)`);\n        } else {\n            this.renderer.setStyle(this.trackRef.nativeElement, 'transform', `scaleX(${toPosition})`);\n        }\n    }\n\n    private validateInitialValue(value: IRangeSliderValue) {\n        if (value.lower < this.lowerBound && value.upper < this.lowerBound) {\n            value.upper = this.lowerBound;\n            value.lower = this.lowerBound;\n        }\n\n        if (value.lower > this.upperBound && value.upper > this.upperBound) {\n            value.upper = this.upperBound;\n            value.lower = this.upperBound;\n        }\n\n        if (value.upper < value.lower) {\n            value.upper = this.upperValue;\n            value.lower = this.lowerValue;\n        }\n\n        return value;\n    }\n\n    private subscribeTo(thumb: IgxSliderThumbComponent, callback: (a: number, b: number) => void) {\n        if (!thumb) {\n            return;\n        }\n\n        thumb.onThumbValueChange\n            .pipe(takeUntil(this.unsubscriber(thumb)))\n            .subscribe(value => callback(value, thumb.type));\n    }\n\n    private unsubscriber(thumb: IgxSliderThumbComponent) {\n        return merge(this._destroyer$, thumb.destroy);\n    }\n\n    private hasValueChanged(oldValue) {\n        const isSliderWithDifferentValue: boolean = !this.isRange && oldValue !== this.value;\n        const isRangeWithOneDifferentValue: boolean = this.isRange &&\n            ((oldValue as IRangeSliderValue).lower !== (this.value as IRangeSliderValue).lower ||\n                (oldValue as IRangeSliderValue).upper !== (this.value as IRangeSliderValue).upper);\n\n        return isSliderWithDifferentValue || isRangeWithOneDifferentValue;\n    }\n\n    public setValue(value: number | IRangeSliderValue, triggerChange: boolean) {\n        let res;\n        if (!this.isRange) {\n            this.upperValue = value as number - (value as number % this.step);\n            res = this.upperValue;\n        } else {\n            value = this.validateInitialValue(value as IRangeSliderValue);\n            this.upperValue = (value as IRangeSliderValue).upper;\n            this.lowerValue = (value as IRangeSliderValue).lower;\n            res = { lower: this.lowerValue, upper: this.upperValue };\n        }\n\n        if (triggerChange) {\n            this._onChangeCallback(res);\n        }\n    }\n\n    private emitValueChanged(oldValue: number | IRangeSliderValue) {\n        this.onValueChange.emit({ oldValue, value: this.value });\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxSliderComponent,\n        IgxThumbFromTemplateDirective,\n        IgxThumbToTemplateDirective,\n        IgxTickLabelTemplateDirective,\n        IgxSliderThumbComponent,\n        IgxThumbLabelComponent,\n        IgxTicksComponent,\n        IgxTickLabelsPipe],\n    exports: [\n        IgxSliderComponent,\n        IgxThumbFromTemplateDirective,\n        IgxThumbToTemplateDirective,\n        IgxTickLabelTemplateDirective,\n        IgxSliderThumbComponent,\n        IgxThumbLabelComponent,\n        IgxTicksComponent],\n    imports: [CommonModule, FormsModule]\n})\nexport class IgxSliderModule {\n}\n","import {\n    Component,\n    Directive,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    Provider,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { CheckboxRequiredValidator, ControlValueAccessor, NG_VALIDATORS, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { isIE, IBaseEventArgs, mkenum } from '../core/utils';\nimport { EditorProvider } from '../core/edit-provider';\n\nexport const SwitchLabelPosition = mkenum({\n    BEFORE: 'before',\n    AFTER: 'after'\n});\nexport type SwitchLabelPosition = (typeof SwitchLabelPosition)[keyof typeof SwitchLabelPosition];\n\nexport interface IChangeSwitchEventArgs extends IBaseEventArgs {\n    checked: boolean;\n    switch: IgxSwitchComponent;\n}\n\nconst noop = () => { };\nlet nextId = 0;\n/**\n *\n * The Switch component is a binary choice selection component.\n *\n * @igxModule IgxSwitchModule\n *\n * @igxTheme igx-switch-theme, igx-tooltip-theme\n *\n * @igxKeywords switch, states, tooltip\n *\n * @igxGroup Data Entry & Display\n *\n * @remarks\n *\n * The Ignite UI Switch lets the user toggle between on/off or true/false states.\n *\n * @example\n * ```html\n * <igx-switch [checked]=\"true\">\n *   Simple switch\n * </igx-switch>\n * ```\n */\n@Component({\n    providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: IgxSwitchComponent, multi: true }],\n    selector: 'igx-switch',\n    templateUrl: 'switch.component.html'\n})\nexport class IgxSwitchComponent implements ControlValueAccessor, EditorProvider {\n    /**\n     * @hidden\n     * @internal\n     */\n    protected _value: any;\n    /**\n     * Returns a reference to the native checkbox element.\n     *\n     * @example\n     * ```typescript\n     * let checkboxElement =  this.switch.nativeCheckbox;\n     * ```\n     */\n    @ViewChild('checkbox', { static: true }) public nativeCheckbox: ElementRef;\n    /**\n     * Returns reference to the native label element.\n     *\n     * @example\n     * ```typescript\n     * let labelElement =  this.switch.nativeLabel;\n     * ```\n     */\n    @ViewChild('label', { static: true }) public nativeLabel;\n    /**\n     * Returns reference to the label placeholder element.\n     *\n     * @example\n     * ```typescript\n     * let labelPlaceholder = this.switch.placeholderLabel;\n     * ```\n     */\n    @ViewChild('placeholderLabel', { static: true }) public placeholderLabel;\n\n    /**\n     * Sets/gets the `id` of the switch component.\n     * If not set, the `id` of the first switch component will be `\"igx-switch-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-switch id=\"my-first-switch\"></igx-switch>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input() public id = `igx-switch-${nextId++}`;\n    /**\n     * Sets/gets the id of the `label` element of the switch component.\n     * If not set, the label of the first switch component will have value `\"igx-switch-0-label\"`.\n     *\n     * @example\n     * ```html\n     * <igx-switch labelId=\"Label1\"></igx-switch>\n     * ```\n     */\n    @Input() public labelId = `${this.id}-label`;\n    /**\n     * Sets/gets the `value` attribute of the switch component.\n     *\n     * @example\n     * ```html\n     * <igx-switch [value]=\"switchValue\"></igx-switch>\n     * ```\n     */\n    @Input() public value: any;\n    /**\n     * Sets/gets the `name` attribute of the switch component.\n     *\n     * @example\n     * ```html\n     * <igx-switch name=\"Switch1\"></igx-switch>\n     * ```\n     */\n    @Input() public name: string;\n    /**\n     * Sets/gets the value of the `tabindex` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-switch [tabindex]=\"1\"></igx-switch>\n     * ```\n     */\n    @Input() public tabindex: number = null;\n    /**\n     * Sets/gets the position of the `label` in the switch component.\n     * If not set, `labelPosition` will have value `\"after\"`.\n     *\n     * @example\n     * ```html\n     * <igx-switch labelPosition=\"before\"></igx-switch>\n     * ```\n     */\n    @Input() public labelPosition: SwitchLabelPosition | string = 'after';\n    /**\n     * Enables/Disables the ripple effect\n     * If not set, `disableRipple` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-switch [disableRipple]=\"true\"></igx-switch>\n     * ```\n     */\n    @Input() public disableRipple = false;\n    /**\n     * Sets/gets whether switch is required.\n     * If not set, `required` will have value `false`.\n     *\n     * @example\n     * ```html\n     * <igx-switch [required]=\"true\"></igx-switch>\n     * ```\n     */\n    @Input() public required = false;\n    /**\n     * Sets/gets the `aria-labelledBy` attribute.\n     * If not set, the  value of `aria-labelledBy` will be equal to the value of `labelId` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-switch aria-labelledby = \"Label1\"></igx-switch>\n     * ```\n     */\n    @Input('aria-labelledby')\n    public ariaLabelledBy = this.labelId;\n    /**\n     * Sets/gets the value of the `aria-label` attribute.\n     *\n     * @example\n     * ```html\n     * <igx-switch aria-label=\"Label1\"></igx-switch>\n     * ```\n     */\n    @Input('aria-label')\n    public ariaLabel: string | null = null;\n    /**\n     * An event that is emitted after the switch state is changed.\n     * Provides references to the `IgxSwitchComponent` and the `checked` property as event arguments.\n     */\n    @Output()\n    readonly change: EventEmitter<IChangeSwitchEventArgs> = new EventEmitter<IChangeSwitchEventArgs>();\n    /**\n     * @hidden\n     * @internal\n     */\n    private _onTouchedCallback: () => void = noop;\n    /**\n     * @hidden\n     * @internal\n     */\n    private _onChangeCallback: (_: any) => void = noop;\n    /**\n     * Returns the class of the switch component.\n     *\n     * @example\n     * ```typescript\n     * let switchClass = this.switch.cssClass;\n     * ```\n     */\n    @HostBinding('class.igx-switch')\n    public cssClass = 'igx-switch';\n    /**\n     * Sets/gets whether the switch is on or off.\n     * Default value is 'false'.\n     *\n     * @example\n     * ```html\n     *  <igx-switch [checked]=\"true\"></igx-switch>\n     * ```\n     */\n    @HostBinding('class.igx-switch--checked')\n    @Input() public checked = false;\n    /**\n     * Sets/gets the `disabled` attribute.\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-switch [disabled]=\"true\"><igx-switch>\n     * ```\n     */\n    @HostBinding('class.igx-switch--disabled')\n    @Input() public disabled = false;\n    /**\n     * Sets/gets whether the switch component is on focus.\n     * Default value is `false`.\n     *\n     * @example\n     * ```typescript\n     * this.switch.focused = true;\n     * ```\n     */\n    @HostBinding('class.igx-switch--focused')\n    public focused = false;\n    /**\n     * @hidden\n     * @internal\n     */\n    public inputId = `${this.id}-input`;\n    /**\n     * Toggles the checked state of the switch.\n     *\n     * @example\n     * ```typescript\n     * this.switch.toggle();\n     * ```\n     */\n    public toggle() {\n        if (this.disabled) {\n            return;\n        }\n\n        this.checked = !this.checked;\n        this.focused = false;\n        this.change.emit({ checked: this.checked, switch: this });\n        this._onChangeCallback(this.checked);\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public _onSwitchChange(event) {\n        event.stopPropagation();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public _onSwitchClick(event) {\n        event.stopPropagation();\n        this.toggle();\n\n        if (isIE()) {\n            this.nativeCheckbox.nativeElement.blur();\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public _onLabelClick(event) {\n        this.toggle();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public onFocus(event) {\n        this.focused = true;\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public onBlur(event) {\n        this.focused = false;\n        this._onTouchedCallback();\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public writeValue(value) {\n        this._value = value;\n        this.checked = !!this._value;\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public getEditElement() {\n        return this.nativeCheckbox.nativeElement;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get labelClass(): string {\n        switch (this.labelPosition) {\n            case SwitchLabelPosition.BEFORE:\n                return `${this.cssClass}__label--before`;\n            case SwitchLabelPosition.AFTER:\n            default:\n                return `${this.cssClass}__label`;\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    public registerOnChange(fn: (_: any) => void) { this._onChangeCallback = fn; }\n    /**\n     * @hidden\n     * @internal\n     */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n}\n\nexport const IGX_SWITCH_REQUIRED_VALIDATOR: Provider = {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => IgxSwitchRequiredDirective),\n    multi: true\n};\n\n/* tslint:disable directive-selector */\n@Directive({\n    selector: `igx-switch[required][formControlName],\n    igx-switch[required][formControl],\n    igx-switch[required][ngModel]`,\n    providers: [IGX_SWITCH_REQUIRED_VALIDATOR]\n})\nexport class IgxSwitchRequiredDirective extends CheckboxRequiredValidator { }\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxSwitchComponent, IgxSwitchRequiredDirective],\n    exports: [IgxSwitchComponent, IgxSwitchRequiredDirective],\n    imports: [IgxRippleModule]\n})\nexport class IgxSwitchModule { }\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterContentInit,\n    AfterViewInit,\n    Component,\n    ContentChild,\n    ContentChildren,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    Output,\n    QueryList,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n    OnDestroy\n} from '@angular/core';\nimport { IgxBadgeModule } from '../badge/badge.component';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IBaseEventArgs } from '../core/utils';\nimport { Subscription } from 'rxjs';\n\nexport interface ISelectTabEventArgs extends IBaseEventArgs {\n    tab: IgxTabComponent;\n    panel: IgxTabPanelComponent;\n}\n\nlet NEXT_ID = 0;\n\n@Directive({\n    selector: '[igxTab]'\n})\nexport class IgxTabTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n    }\n}\n/**\n * **Ignite UI for Angular Tab Bar** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/tabbar)\n *\n * The Ignite UI Tab Bar enables the user to navigate among a number of content panels displayed in a single view.\n *\n * Example:\n * ```html\n * <igx-bottom-nav>\n *   <igx-tab-panel label=\"Tab 1\">Tab 1 Content</igx-tab-panel>\n *   <igx-tab-panel label=\"Tab 2\">Tab 2 Content</igx-tab-panel>\n *   <igx-tab-panel label=\"Tab 3\">Tab 3 Content</igx-tab-panel>\n * </igx-bottom-nav>\n * ```\n */\n@Component({\n    selector: 'igx-bottom-nav',\n    templateUrl: 'tab-bar-content.component.html',\n    styles: [`\n        :host {\n            display: block;\n        }\n    `]\n})\nexport class IgxBottomNavComponent implements AfterViewInit, OnDestroy {\n    private _currentBottomNavId = NEXT_ID++;\n    private _panelsChanges$: Subscription;\n\n    /**\n     * Gets the `IgxTabComponent` elements in the tab bar component created based on the provided panels.\n     * ```typescript\n     * let tabs: QueryList<IgxTabComponent> =  this.tabBar.viewTabs;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @ViewChildren(forwardRef(() => IgxTabComponent))\n    public viewTabs: QueryList<IgxTabComponent>;\n\n    /**\n     * Gets the `IgxTabComponent` elements in the tab bar component defined as content child.\n     * ```typescript\n     * let tabs: QueryList<IgxTabComponent> =  this.tabBar.contentTabs;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @ContentChildren(forwardRef(() => IgxTabComponent))\n    public contentTabs: QueryList<IgxTabComponent>;\n\n    /**\n     * Gets the `IgxTabComponent` elements for this bottom navigation component.\n     * First try to get them as content children if not available get them as view children.\n     * ```typescript\n     * let tabs: QueryList<IgxTabComponent> =  this.tabBar.tabs;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    public get tabs(): QueryList<IgxTabComponent> {\n        return this.hasContentTabs ? this.contentTabs : this.viewTabs;\n    }\n\n    /**\n     * Gets the `IgxTabPanelComponent` elements in the tab bar component.\n     * ```typescript\n     * let tabPanels: QueryList<IgxTabPanelComponent> = this.tabBar.panels;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @ContentChildren(forwardRef(() => IgxTabPanelComponent))\n    public panels: QueryList<IgxTabPanelComponent>;\n\n    /**\n     * Sets/gets the `id` of the tab bar.\n     * If not set, the `id` of the first tab bar component will be `\"igx-bottom-nav-0\"`.\n     * ```html\n     * <igx-bottom-nav id = \"my-first-tab-bar\"></igx-bottom-nav>\n     * ```\n     * ```typescript\n     * let tabBarId =  this.tabBar.id;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-bottom-nav-${this._currentBottomNavId}`;\n\n    /**\n     * Emits an event when a new tab is selected.\n     * Provides references to the `IgxTabComponent` and `IgxTabPanelComponent` as event arguments.\n     * ```html\n     * <igx-bottom-nav (onTableSelected) = \"onTabSelected($event)\"><igx-bottom-nav>\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @Output() public onTabSelected = new EventEmitter<ISelectTabEventArgs>();\n\n    /**\n     * Emits an event when a tab is deselected.\n     * Provides references to the `IgxTabComponent` and `IgxTabPanelComponent` as event arguments.\n     * ```html\n     * <igx-bottom-nav (onTabDeselected) = \"onTabDeselected($event)\"><igx-bottom-nav>\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    @Output() public onTabDeselected = new EventEmitter<ISelectTabEventArgs>();\n\n    /**\n     * Gets the `index` of selected tab/panel in the respective collection.\n     * ```typescript\n     * let index =  this.tabBar.selectedIndex;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    public selectedIndex = -1;\n\n    /**\n     * Gets the `itemStyle` of the tab bar.\n     * ```typescript\n     * let itemStyle =  this.tabBar.itemStyle;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    public get itemStyle(): string {\n        return this._itemStyle;\n    }\n\n    /**\n     * @hidden\n     */\n    public get hasContentTabs(): boolean {\n        return (this.contentTabs && this.contentTabs.length > 0);\n    }\n\n    /**\n     * @hidden\n     */\n    private _itemStyle = 'igx-bottom-nav';\n\n    /**\n     * Gets the selected tab in the tab bar.\n     * ```typescript\n     * let tab =  this.tabBar.selectedTab;\n     * ```\n     * @memberof IgxBottomNavComponent\n     */\n    get selectedTab(): IgxTabComponent {\n        if (this.tabs && this.selectedIndex !== undefined) {\n            return this.tabs.toArray()[this.selectedIndex];\n        }\n    }\n\n    constructor(private _element: ElementRef) {\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        this.setPanelsAttributes();\n        this._panelsChanges$ = this.panels.changes.subscribe(() => {\n            this.setPanelsAttributes();\n        });\n\n        // initial selection\n        setTimeout(() => {\n            if (this.selectedIndex === -1) {\n                const selectablePanels = this.panels.filter((p) => !p.disabled);\n                const panel = selectablePanels[0];\n                if (panel) {\n                    panel.select();\n                }\n            }\n        }, 0);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy(): void {\n        if (this._panelsChanges$) {\n            this._panelsChanges$.unsubscribe();\n        }\n    }\n\n    private setPanelsAttributes() {\n        const panelsArray = Array.from(this.panels);\n        for (let index = 0; index < this.panels.length; index++) {\n            const tabPanels = panelsArray[index] as IgxTabPanelComponent;\n            tabPanels.nativeElement.setAttribute('id', this.getTabPanelId(index));\n            tabPanels.nativeElement.setAttribute('aria-labelledby', this.getTabId(index));\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('onTabSelected', ['$event'])\n    public _selectedPanelHandler(args) {\n        if (this.hasContentTabs) {\n            this.selectedIndex = args.tab.index;\n            this.contentTabs.forEach((t) => {\n                if (t !== args.tab) {\n                    this._deselectTab(t);\n                }\n            });\n        } else {\n            if (args.panel) {\n                this.selectedIndex = args.panel.index;\n                this.panels.forEach((p) => {\n                    if (p.index !== this.selectedIndex) {\n                        this._deselectPanel(p);\n                    }\n                });\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    private _deselectPanel(panel: IgxTabPanelComponent) {\n        // Cannot deselect the selected tab - this will mean that there will be not selected tab left\n        if (panel.disabled || this.selectedTab.index === panel.index) {\n            return;\n        }\n\n        panel.isSelected = false;\n        this.onTabDeselected.emit({ tab: this.tabs[panel.index], panel });\n    }\n\n    private _deselectTab(aTab: IgxTabComponent) {\n        aTab.isSelected = false;\n        this.onTabDeselected.emit({ tab: aTab, panel: null });\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabId(index: number): string {\n        return `igx-tab-${this._currentBottomNavId}-${index}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabPanelId(index: number): string {\n        return `igx-tab-panel-${this._currentBottomNavId}-${index}`;\n    }\n}\n\n// ================================= IgxTabPanelComponent ======================================\n\n@Component({\n    selector: 'igx-tab-panel',\n    templateUrl: 'tab-panel.component.html'\n})\nexport class IgxTabPanelComponent implements AfterContentInit {\n\n    /**\n     * @hidden\n     */\n    private _itemStyle = 'igx-tab-panel';\n\n    /**\n     * @hidden\n     */\n    private _isSelected = false;\n\n    /**\n     * Sets/gets the `label` of the tab panel.\n     * ```html\n     * <igx-tab-panel [label] = \"'Tab panel label'\"><igx-tab-panel>\n     * ```\n     * ```typescript\n     * let tabPanelLabel = this.tabPanel.label;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @Input() public label: string;\n\n    /**\n     * Sets/gets  the `icon` of the tab panel.\n     * ```html\n     * <igx-tab-panel [icon] = \"panel_icon\"><igx-tab-panel>\n     * ```\n     * ```typescript\n     * let tabPanelIcon =  this.tabPanel.icon;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @Input() public icon: string;\n\n    /**\n     * Sets/gets whether the tab panel is disabled.\n     * ```html\n     * <igx-tab-panel [disabled] = \"true\"><igx-tab-panel>\n     * ```\n     * ```typescript\n     * let isDisabled = this.tabPanel.disabled;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @Input() public disabled: boolean;\n\n    /**\n     * Gets the role of the tab panel.\n     * ```typescript\n     * let tabPanelRole = this.tabPanel.role;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @HostBinding('attr.role') public role = 'tabpanel';\n\n    /**\n     * Gets whether a tab panel will have `igx-bottom-nav__panel` class.\n     * ```typescript\n     * let styleClass = this.tabPanel.styleClass;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @HostBinding('class.igx-bottom-nav__panel')\n    get styleClass(): boolean {\n        return (!this.isSelected);\n    }\n\n    /**\n     * Sets/gets whether a tab panel is selected.\n     * ```typescript\n     * this.tabPanel.isSelected = true;\n     * ```\n     * ```typescript\n     * let isSelected =  this.tabPanel.isSelected;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    @HostBinding('class.igx-bottom-nav__panel--selected')\n    public get isSelected(): boolean {\n        return this._isSelected;\n    }\n    public set isSelected(newValue: boolean) {\n        if (this._isSelected !== newValue) {\n            if (newValue) {\n                this.select();\n            } else {\n                this._isSelected = newValue;\n            }\n        }\n    }\n\n    /**\n     * Gets the `itemStyle` of the tab panel.\n     * ```typescript\n     * let itemStyle = this.tabPanel.itemStyle;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    public get itemStyle(): string {\n        return this._itemStyle;\n    }\n\n    /**\n     * Returns the native element of the tab-panel component\n     * ```typescript\n     *  const mytabPanelElement: HTMLElement = tabPanel.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * Gets the tab associated with the panel.\n     * ```typescript\n     * let tab = this.tabPanel.relatedTab;\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    get relatedTab(): IgxTabComponent {\n        if (this._tabBar.tabs) {\n            return this._tabBar.tabs.toArray()[this.index];\n        }\n    }\n\n    /**\n     * Gets the changes and updates accordingly applied to the tab/panel.\n     *\n     * @memberof IgxTabComponent\n     */\n    get changesCount(): number {\n        return this.relatedTab ? this.relatedTab.changesCount : 0;\n    }\n\n    /**\n     * Gets the index of a panel in the panels collection.\n     * ```typescript\n     * let panelIndex =  this.tabPanel.index\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    get index() {\n        if (this._tabBar.panels) {\n            return this._tabBar.panels.toArray().indexOf(this);\n        }\n    }\n\n    /**\n     * Gets the tab template.\n     * ```typescript\n     * let tabTemplate = this.tabPanel.customTabTemplate\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    get customTabTemplate(): TemplateRef<any> {\n        return this._tabTemplate;\n    }\n\n    /**\n     * Sets the tab template.\n     * ```typescript\n     * this.tabPanel.customTabTemplate(tabTemplate);\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    set customTabTemplate(template: TemplateRef<any>) {\n        this._tabTemplate = template;\n    }\n\n    /**\n     * @hidden\n     */\n    private _tabTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTabTemplateDirective, { read: IgxTabTemplateDirective })\n    protected tabTemplate: IgxTabTemplateDirective;\n\n    constructor(private _tabBar: IgxBottomNavComponent, private _element: ElementRef) {\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit(): void {\n        if (this.tabTemplate) {\n            this._tabTemplate = this.tabTemplate.template;\n        }\n    }\n\n\n    /**\n     * Selects the current tab and the tab panel.\n     * ```typescript\n     * this.tabPanel.select();\n     * ```\n     * @memberof IgxTabPanelComponent\n     */\n    public select() {\n        if (this.disabled || this._tabBar.selectedIndex === this.index) {\n            return;\n        }\n\n        this._isSelected = true;\n        this._tabBar.onTabSelected.emit({ tab: this._tabBar.tabs.toArray()[this.index], panel: this });\n    }\n}\n\n// ======================================= IgxTabComponent ==========================================\n\n@Component({\n    selector: 'igx-tab',\n    templateUrl: 'tab.component.html'\n})\nexport class IgxTabComponent {\n    /**\n     * Gets the `role` attribute.\n     * ```typescript\n     * let tabRole = this.tab.role;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @HostBinding('attr.role')\n    public role = 'tab';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = this.label;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-disabled')\n    public ariaDisabled = this.disabled;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-selected')\n    public ariaSelected = this.isSelected;\n\n\n    /**\n     * Gets the panel associated with the tab.\n     * ```typescript\n     * let tabPanel =  this.tab.relatedPanel;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    public relatedPanel: IgxTabPanelComponent;\n\n    /**\n     * @hidden\n     */\n    private _label: string;\n\n    /**\n     * Sets/gets the `label` of the tab panel.\n     * ```html\n     * <igx-tab [label] = \"'Tab label'\"><igx-tab>\n     * ```\n     * ```typescript\n     * let tabLabel = this.tab.label;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    public get label(): string {\n        return this.relatedPanel ? this.relatedPanel.label : this._label;\n    }\n    public set label(newValue: string) {\n        if (this.relatedPanel) {\n            this.relatedPanel.label = newValue;\n        }\n        this._label = newValue;\n    }\n\n    /**\n     * @hidden\n     */\n    private _icon: string;\n\n    /**\n     * Sets/gets  the `icon` of the tab panel.\n     * ```html\n     * <igx-tab [icon] = \"tab_icon\"><igx-tab>\n     * ```\n     * ```typescript\n     * let tabIcon =  this.tab.icon;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    public get icon(): string {\n        return this.relatedPanel ? this.relatedPanel.icon : this._icon;\n    }\n    public set icon(newValue: string) {\n        if (this.relatedPanel) {\n            this.relatedPanel.icon = newValue;\n        }\n        this._icon = newValue;\n    }\n\n    /**\n     * @hidden\n     */\n    private _changesCount = 0; // changes and updates accordingly applied to the tab.\n\n    /**\n     * Gets the changes and updates accordingly applied to the tab.\n     *\n     * @memberof IgxTabComponent\n     */\n    get changesCount(): number {\n        return this._changesCount;\n    }\n\n    private _disabled = false;\n\n    /**\n     * Gets whether the tab is disabled.\n     * ```typescript\n     * let isDisabled = this.tab.disabled;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    get disabled(): boolean {\n        return this.relatedPanel ? this.relatedPanel.disabled : this._disabled;\n    }\n    set disabled(newValue: boolean) {\n        if (this.relatedPanel) {\n            this.relatedPanel.disabled = newValue;\n        } else {\n            this._disabled = newValue;\n        }\n    }\n\n    public _selected = false;\n\n    /**\n     * Gets whether the tab is selected.\n     * ```typescript\n     * let isSelected  = this.tab.isSelected;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    @Input()\n    set isSelected(newValue: boolean) {\n        if (this.relatedPanel) {\n            this.relatedPanel.isSelected = newValue;\n        } else if (this._selected !== newValue) {\n            this._selected = newValue;\n            if (this._selected) {\n                this._tabBar.onTabSelected.emit({ tab: this, panel: null });\n            }\n        }\n    }\n    get isSelected(): boolean {\n        return this.relatedPanel ? this.relatedPanel.isSelected : this._selected;\n    }\n\n    /**\n     * @hidden @internal\n     * Set to true when the tab is automatically generated from the IgxBottomNavComponent when tab panels are defined.\n     */\n    @Input()\n    public autoGenerated: boolean;\n\n    @HostBinding('class.igx-bottom-nav__menu-item--selected')\n    public get cssClassSelected(): boolean {\n        return this.isSelected;\n    }\n\n    @HostBinding('class.igx-bottom-nav__menu-item--disabled')\n    public get cssClassDisabled(): boolean {\n        return this.disabled;\n    }\n\n    @HostBinding('class.igx-bottom-nav__menu-item')\n    public get cssClass(): boolean {\n        return (!this.disabled && !this.isSelected);\n    }\n\n    /**\n     * Gets the `index` of the tab.\n     * ```typescript\n     * let tabIndex = this.tab.index;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    public get index(): number {\n        if (this._tabBar.tabs) {\n            return this._tabBar.tabs.toArray().indexOf(this);\n        }\n    }\n\n    /** @hidden */\n    @ViewChild('defaultTabTemplate', { read: TemplateRef, static: true })\n    protected defaultTabTemplate: TemplateRef<any>;\n\n    /** @hidden */\n    @ContentChild(IgxTabTemplateDirective, { read: IgxTabTemplateDirective })\n    protected customTabTemplateDir: IgxTabTemplateDirective;\n\n    /**\n     * Returns the `template` for this IgxTabComponent.\n     * ```typescript\n     * let tabItemTemplate = this.tabItem.template;\n     * ```\n     * @memberof IgxTabComponent\n     */\n    public get template(): TemplateRef<any> {\n        if (this.relatedPanel && this.relatedPanel.customTabTemplate) {\n            return this.relatedPanel.customTabTemplate;\n        }\n        if (this.customTabTemplateDir) {\n            return this.customTabTemplateDir.template;\n        }\n        return this.defaultTabTemplate;\n    }\n\n    /**\n     * Returns the `context` object for the template of this `IgxTabComponent`.\n     * ```typescript\n     * let tabItemContext = this.tabItem.context;\n     * ```\n     */\n    public get context(): any {\n        return this.relatedPanel ? this.relatedPanel : this;\n    }\n\n    constructor(private _tabBar: IgxBottomNavComponent, private _element: ElementRef) {\n    }\n\n    /**\n     * Selects the current tab and the associated panel.\n     * ```typescript\n     * this.tab.select();\n     * ```\n     * @memberof IgxTabComponent\n     */\n    public select() {\n        if (this.relatedPanel) {\n            this.relatedPanel.select();\n        } else {\n            this._selected = true;\n            this._tabBar.onTabSelected.emit({ tab: this, panel: null });\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click')\n    public onClick() {\n        if (this.autoGenerated) {\n            this.select();\n        }\n    }\n\n    public elementRef(): ElementRef {\n        return this._element;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxBottomNavComponent, IgxTabPanelComponent, IgxTabComponent, IgxTabTemplateDirective],\n    exports: [IgxBottomNavComponent, IgxTabPanelComponent, IgxTabComponent, IgxTabTemplateDirective],\n    imports: [CommonModule, IgxBadgeModule, IgxIconModule]\n})\nexport class IgxBottomNavModule {\n}\n","import {\n    Directive,\n    HostBinding,\n    TemplateRef\n} from '@angular/core';\nimport { IgxTabsBase } from './tabs.common';\n\nenum ButtonStyle {\n    VISIBLE = 'visible',\n    HIDDEN = 'hidden',\n    NOT_DISPLAYED = 'not_displayed'\n}\n\n@Directive({\n    selector: '[igxRightButtonStyle]'\n})\n\nexport class IgxRightButtonStyleDirective {\n    constructor(public tabs: IgxTabsBase) {\n    }\n\n    @HostBinding('class.igx-tabs__header-button')\n    get visibleCSS(): boolean {\n        return (this.getRightButtonStyle() === ButtonStyle.VISIBLE) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--hidden')\n    get hiddenCSS(): boolean {\n        return (this.getRightButtonStyle() === ButtonStyle.HIDDEN) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--none')\n    get notDisplayedCSS(): boolean {\n        return (this.getRightButtonStyle() === ButtonStyle.NOT_DISPLAYED) ? true : false;\n    }\n\n    private getRightButtonStyle(): string {\n        const viewPortWidth = this.tabs.viewPort.nativeElement.offsetWidth;\n\n        // We use this hacky way to get the width of the itemsContainer,\n        // because there is inconsistency in IE we cannot use offsetWidth or scrollOffset.\n        const itemsContainerChildrenCount = this.tabs.itemsContainer.nativeElement.children.length;\n        let itemsContainerWidth = 0;\n        if (itemsContainerChildrenCount > 1) {\n            const lastTab = this.tabs.itemsContainer.nativeElement.children[itemsContainerChildrenCount - 2];\n            itemsContainerWidth = lastTab.offsetLeft + lastTab.offsetWidth;\n        }\n        const headerContainerWidth = this.tabs.headerContainer.nativeElement.offsetWidth;\n        const offset = this.tabs.offset;\n        const total = offset + viewPortWidth;\n\n        // Fix for IE 11, a difference is accumulated from the widths calculations.\n        if (itemsContainerWidth - headerContainerWidth <= 1 && offset === 0) {\n            return ButtonStyle.NOT_DISPLAYED;\n        }\n\n        if (itemsContainerWidth > total) {\n            return ButtonStyle.VISIBLE;\n        } else {\n            return ButtonStyle.HIDDEN;\n        }\n    }\n}\n\n@Directive({\n    selector: '[igxLeftButtonStyle]'\n})\n\nexport class IgxLeftButtonStyleDirective {\n    constructor(public tabs: IgxTabsBase) {\n    }\n\n    @HostBinding('class.igx-tabs__header-button')\n    get visibleCSS(): boolean {\n        return (this.getLeftButtonStyle() === ButtonStyle.VISIBLE) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--hidden')\n    get hiddenCSS(): boolean {\n        return (this.getLeftButtonStyle() === ButtonStyle.HIDDEN) ? true : false;\n    }\n\n    @HostBinding('class.igx-tabs__header-button--none')\n    get notDisplayedCSS(): boolean {\n        return (this.getLeftButtonStyle() === ButtonStyle.NOT_DISPLAYED) ? true : false;\n    }\n\n    private getLeftButtonStyle(): string {\n        // We use this hacky way to get the width of the itemsContainer,\n        // because there is inconsistency in IE we cannot use offsetWidth or scrollOffset.\n        const itemsContainerChildrenCount = this.tabs.itemsContainer.nativeElement.children.length;\n        let itemsContainerWidth = 0;\n        if (itemsContainerChildrenCount > 1) {\n            const lastTab = this.tabs.itemsContainer.nativeElement.children[itemsContainerChildrenCount - 2];\n            itemsContainerWidth = lastTab.offsetLeft + lastTab.offsetWidth;\n        }\n        const headerContainerWidth = this.tabs.headerContainer.nativeElement.offsetWidth;\n        const offset = this.tabs.offset;\n        if (offset === 0) {\n            // Fix for IE 11, a difference is accumulated from the widths calculations.\n            if (itemsContainerWidth - headerContainerWidth <= 1) {\n                return ButtonStyle.NOT_DISPLAYED;\n            }\n            return ButtonStyle.HIDDEN;\n        } else {\n            return ButtonStyle.VISIBLE;\n        }\n    }\n}\n\n@Directive({\n    selector: '[igxTab]'\n})\nexport class IgxTabItemTemplateDirective {\n\n    constructor(public template: TemplateRef<any>) {\n    }\n}\n","import { ElementRef, QueryList, EventEmitter } from '@angular/core';\n\n/** @hidden */\nexport abstract class IgxTabsBase {\n    selectedIndicator: ElementRef<any>;\n    tabs: QueryList<IgxTabItemBase>;\n    groups: QueryList<IgxTabsGroupBase>;\n    offset: number;\n    selectedIndex: number;\n    viewPort: ElementRef;\n    contentsContainer: ElementRef;\n    tabsContainer: ElementRef;\n    itemsContainer: ElementRef;\n    headerContainer: ElementRef;\n    onTabItemSelected: EventEmitter<{}>; // TODO: Define event arg interface!\n    hasContentTabs: boolean;\n    scrollElement(element: any, scrollRight: boolean) {}\n    performSelectionChange(newTab: IgxTabItemBase) {}\n    transformContentAnimation(tab: IgxTabItemBase, duration: number) {}\n    transformIndicatorAnimation(element: HTMLElement, duration?: number) {}\n}\n\n/** @hidden */\nexport abstract class IgxTabItemBase {\n    abstract readonly nativeTabItem: ElementRef;\n    get index(): number { return 0; }\n    select(): void {}\n    setSelectedInternal(newValue: boolean) {}\n}\n\n/** @hidden */\nexport abstract class IgxTabsGroupBase {\n    select(): void {}\n    setSelectedInternal(newValue: boolean) {}\n}\n","import {\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    TemplateRef,\n    ViewChild,\n    NgZone,\n    AfterViewInit,\n    OnDestroy\n} from '@angular/core';\nimport { KEYS } from '../core/utils';\nimport { IgxTabsGroupComponent } from './tabs-group.component';\nimport { IgxTabItemBase, IgxTabsBase } from './tabs.common';\nimport { IgxTabItemTemplateDirective } from './tabs.directives';\nimport ResizeObserver from 'resize-observer-polyfill';\n\n@Component({\n    selector: 'igx-tab-item',\n    templateUrl: 'tab-item.component.html'\n})\n\nexport class IgxTabItemComponent extends IgxTabItemBase implements AfterViewInit, OnDestroy {\n    /**\n     * Gets the group associated with the tab.\n     * ```html\n     * const relatedGroup = this.tabbar.tabs.toArray()[1].relatedGroup;\n     * ```\n     */\n    @Input()\n    public relatedGroup: IgxTabsGroupComponent;\n\n    /** @hidden */\n    private _icon: string;\n\n    /**\n     * An @Input property that sets the value of the `icon`.\n     * The value should be valid icon name from {@link https://material.io/tools/icons/?style=baseline}.\n     * ```html\n     * <igx-tab-item label=\"Tab 1\" icon=\"home\">\n     * ```\n     */\n    @Input()\n    public get icon(): string {\n        return this.relatedGroup ? this.relatedGroup.icon : this._icon;\n    }\n    public set icon(newValue: string) {\n        if (this.relatedGroup) {\n            this.relatedGroup.icon = newValue;\n        }\n        this._icon = newValue;\n    }\n\n    /** @hidden */\n    private _label: string;\n\n    /**\n     * An @Input property that sets the value of the `label`.\n     * ```html\n     * <igx-tabs-item label=\"Tab 2\" icon=\"folder\">\n     * ```\n     */\n    @Input()\n    public get label(): string {\n        return this.relatedGroup ? this.relatedGroup.label : this._label;\n    }\n    public set label(newValue: string) {\n        if (this.relatedGroup) {\n            this.relatedGroup.label = newValue;\n        }\n        this._label = newValue;\n    }\n\n    /**\n     * @hidden @internal\n     * Set to true when the tab item is automatically generated from the IgxTabsComponent when tab groups are defined.\n     */\n    @Input()\n    public autoGenerated: boolean;\n\n    /** @hidden */\n    @ViewChild('defaultTabTemplate', { read: TemplateRef, static: true })\n    protected defaultTabTemplate: TemplateRef<any>;\n\n    /** @hidden */\n    @ContentChild(IgxTabItemTemplateDirective, { read: IgxTabItemTemplateDirective })\n    protected customTabTemplateDir: IgxTabItemTemplateDirective;\n\n    private _nativeTabItem: ElementRef;\n    private _changesCount = 0; // changes and updates accordingly applied to the tab.\n    private _isSelected = false;\n    private _disabled = false;\n    private _resizeObserver: ResizeObserver;\n\n    constructor(private _tabs: IgxTabsBase, private _element: ElementRef, private _ngZone: NgZone) {\n        super();\n        this._nativeTabItem = _element;\n    }\n\n    @HostBinding('class.igx-tabs__header-menu-item--selected')\n    public get provideCssClassSelected(): boolean {\n        return this.isSelected;\n    }\n\n    @HostBinding('class.igx-tabs__header-menu-item--disabled')\n    public get provideCssClassDisabled(): boolean {\n        return this.disabled;\n    }\n\n    @HostBinding('class.igx-tabs__header-menu-item')\n    public get provideCssClass(): boolean {\n        return (!this.disabled && !this.isSelected);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.role')\n    public role = 'tab';\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.tabindex')\n    public tabindex = -1;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-label')\n    public ariaLabel = this.label;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-disabled')\n    public ariaDisabled = this.disabled;\n\n    /**\n     * @hidden @internal\n     */\n    @HostBinding('attr.aria-selected')\n    public ariaSelected = this.isSelected;\n\n    ngAfterViewInit(): void {\n        this._ngZone.runOutsideAngular(() => {\n            this._resizeObserver = new ResizeObserver(() => {\n                this._tabs.transformIndicatorAnimation(this._nativeTabItem.nativeElement, 0);\n            });\n        });\n    }\n\n    ngOnDestroy(): void {\n        this._ngZone.runOutsideAngular(() => {\n            this._resizeObserver.disconnect();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('click', ['$event'])\n    public onClick(event) {\n        if (this.autoGenerated) {\n            this.select();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown', ['$event'])\n    public onKeydown(event: KeyboardEvent) {\n        const tabsArray = this._tabs.tabs.toArray();\n        const startIndex = tabsArray.indexOf(this);\n        let finalIndex = -1;\n        let currentIndex = startIndex;\n\n        switch (event.key) {\n            case KEYS.RIGHT_ARROW:\n            case KEYS.RIGHT_ARROW_IE:\n                do {\n                    currentIndex++;\n                    if (currentIndex === tabsArray.length) {\n                        currentIndex = -1;\n                        continue;\n                    } else if ((tabsArray[currentIndex] as IgxTabItemComponent).disabled === false) {\n                        finalIndex = currentIndex;\n                        break;\n                    }\n                }\n                while (currentIndex !== startIndex);\n                break;\n            case KEYS.LEFT_ARROW:\n            case KEYS.LEFT_ARROW_IE:\n                do {\n                    currentIndex--;\n                    if (currentIndex === -1) {\n                        currentIndex = tabsArray.length;\n                        continue;\n                    } else if ((tabsArray[currentIndex] as IgxTabItemComponent).disabled === false) {\n                        finalIndex = currentIndex;\n                        break;\n                    }\n                }\n                while (currentIndex !== startIndex);\n                break;\n            case KEYS.HOME:\n                event.preventDefault();\n                finalIndex = tabsArray.find(t => (t as IgxTabItemComponent).disabled === false).index;\n                break;\n            case KEYS.END:\n                event.preventDefault();\n                finalIndex = tabsArray.slice().reverse().find(t => (t as IgxTabItemComponent).disabled === false).index;\n                break;\n            case KEYS.ENTER:\n                if (!this.autoGenerated) {\n                    this.nativeTabItem.nativeElement.click();\n                }\n                break;\n            case KEYS.SPACE:\n            case KEYS.SPACE_IE:\n                event.preventDefault();\n                if (!this.autoGenerated) {\n                    this.nativeTabItem.nativeElement.click();\n                }\n                break;\n            default:\n                break;\n        }\n\n        if (finalIndex > -1) {\n            const tab = tabsArray[finalIndex];\n            tab.nativeTabItem.nativeElement.focus();\n\n            if (this.autoGenerated) {\n                tab.select();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get changesCount(): number {\n        return this._changesCount;\n    }\n\n    /**\n     * @hidden\n     */\n    get nativeTabItem(): ElementRef {\n        return this._nativeTabItem;\n    }\n\n    /**\n     * \tGets whether the tab is disabled.\n     * ```\n     * const disabledItem = this.myTabComponent.tabs.first.disabled;\n     * ```\n     */\n    @Input()\n    get disabled(): boolean {\n        return this.relatedGroup ? this.relatedGroup.disabled : this._disabled;\n    }\n    set disabled(newValue: boolean) {\n        if (this.relatedGroup) {\n            this.relatedGroup.disabled = newValue;\n        } else {\n            this._disabled = newValue;\n        }\n    }\n\n    /**\n     * Gets whether the tab is selected.\n     * ```typescript\n     * const selectedItem = this.myTabComponent.tabs.first.isSelected;\n     * ```\n     */\n    @Input()\n    get isSelected(): boolean {\n        return this.relatedGroup ? this.relatedGroup.isSelected : this._isSelected;\n    }\n    set isSelected(newValue: boolean) {\n        if (!this.disabled && this.isSelected !== newValue) {\n            this._tabs.performSelectionChange(newValue ? this : null);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public select(): void {\n        if (!this.disabled && !this.isSelected) {\n            this._tabs.performSelectionChange(this);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    get index(): number {\n        if (this._tabs.tabs) {\n            return this._tabs.tabs.toArray().indexOf(this);\n        }\n        return -1;\n    }\n\n    /**\n     * @hidden\n     */\n    public setSelectedInternal(newValue: boolean) {\n        this._isSelected = newValue;\n        this._ngZone.runOutsideAngular(() => {\n            if (this._resizeObserver) {\n                if (this._isSelected) {\n                    this._resizeObserver.observe(this._element.nativeElement);\n                } else {\n                    this._resizeObserver.disconnect();\n                }\n            }\n        });\n        this.tabindex = newValue ? 0 : -1;\n    }\n\n    /**\n     * @hidden\n     */\n    public get template(): TemplateRef<any> {\n        if (this.relatedGroup && this.relatedGroup.customTabTemplate) {\n            return this.relatedGroup.customTabTemplate;\n        }\n        if (this.customTabTemplateDir) {\n            return this.customTabTemplateDir.template;\n        }\n        return this.defaultTabTemplate;\n    }\n\n    /**\n     * @hidden\n     */\n    public get context(): any {\n        return this.relatedGroup ? this.relatedGroup : this;\n    }\n}\n","import {\n    AfterContentInit,\n    Component,\n    ContentChild,\n    ElementRef,\n    HostBinding,\n    Input,\n    TemplateRef,\n} from '@angular/core';\n\nimport { IgxTabItemComponent } from './tab-item.component';\nimport { IgxTabItemTemplateDirective } from './tabs.directives';\nimport { IgxTabsBase, IgxTabsGroupBase } from './tabs.common';\n\n@Component({\n    selector: 'igx-tabs-group',\n    templateUrl: 'tabs-group.component.html'\n})\n\nexport class IgxTabsGroupComponent extends IgxTabsGroupBase implements AfterContentInit {\n    /**\n     * An @Input property that allows you to enable/disable the `IgxTabGroupComponent`.\n     * ```html\n     * <igx-tabs-group label=\"Tab 2  Lorem ipsum dolor sit\" icon=\"home\" [disabled]=\"true\">\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * An @Input property that sets the value of the `icon`.\n     * The value should be valid icon name from {@link https://material.io/tools/icons/?style=baseline}.\n     * ```html\n     * <igx-tabs-group label=\"Tab 1\" icon=\"home\">\n     * ```\n     */\n    @Input()\n    public icon: string;\n\n    /**\n     * An @Input property that sets the value of the `label`.\n     * ```html\n     * <igx-tabs-group label=\"Tab 1\" icon=\"folder\">\n     * ```\n     */\n    @Input()\n    public label: string;\n\n    /**\n     * Sets/gets whether a tab group is selected.\n     * ```typescript\n     * this.tabGroup.isSelected = true;\n     * ```\n     * ```typescript\n     * let isSelected = this.tabGroup.isSelected;\n     * ```\n     * @memberof IgxTabsGroupComponent\n     */\n    public get isSelected(): boolean {\n        return this._isSelected;\n    }\n    public set isSelected(newValue: boolean) {\n        if (!this.disabled && this.isSelected !== newValue) {\n            this._tabs.performSelectionChange(newValue ? this.relatedTab : null);\n        }\n    }\n\n    /**\n     * Returns the native element of the tabs-group component\n     * ```typescript\n     *  const mytabsGroupElement: HTMLElement = tabsGroup.nativeElement;\n     * ```\n     */\n    public get nativeElement() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTabItemTemplateDirective, { read: IgxTabItemTemplateDirective })\n    protected tabTemplate: IgxTabItemTemplateDirective;\n\n    private _tabTemplate: TemplateRef<any>;\n    private _isSelected = false;\n\n    constructor(private _tabs: IgxTabsBase, private _element: ElementRef) {\n        super();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.role')\n    public role = 'tabpanel';\n\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-tabs__group')\n    public styleClass = true;\n\n    /**\n     * An accessor that returns the `IgxTabItemComponent` component.\n     * ```typescript\n     * @ViewChild(\"MyTabsGroup\")\n     * public tab: IgxTabsGroupComponent;\n     * ngAfterViewInIt(){\n     *    let tabComponent = this.tab.relatedTab;\n     * }\n     * ```\n     */\n    get relatedTab(): IgxTabItemComponent {\n        if (this._tabs.tabs) {\n            return this._tabs.tabs.toArray()[this.index] as IgxTabItemComponent;\n        }\n    }\n\n    /**\n     * An accessor that returns the value of the index of the `IgxTabsGroupComponent`.\n     * ```typescript\n     * @ViewChild(\"MyTabsGroup\")\n     * public tab: IgxTabsGroupComponent;\n     * ngAfterViewInIt(){\n     *    let tabIndex = this.tab.index;\n     * }\n     * ```\n     */\n    get index(): number {\n        if (this._tabs.groups) {\n            return this._tabs.groups.toArray().indexOf(this);\n        }\n        return -1;\n    }\n\n    /**\n     * @hidden\n     */\n    get customTabTemplate(): TemplateRef<any> {\n        return this._tabTemplate;\n    }\n\n    /**\n     * @hidden\n     */\n    set customTabTemplate(template: TemplateRef<any>) {\n        this._tabTemplate = template;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterContentInit(): void {\n        if (this.tabTemplate) {\n            this._tabTemplate = this.tabTemplate.template;\n        }\n    }\n\n    /**\n     * A method that sets the focus on a tab.\n     * @memberof {@link IgxTabsGroupComponent}\n     * ```typescript\n     *  @ViewChild(\"MyChild\")\n     * public tab : IgxTabsGroupComponent;\n     * ngAfterViewInit(){\n     *     this.tab.select();\n     * }\n     * ```\n     */\n    public select(): void {\n        if (!this.disabled && !this.isSelected) {\n            this._tabs.performSelectionChange(this.relatedTab);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public setSelectedInternal(newValue: boolean) {\n        this._isSelected = newValue;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n    AfterViewInit,\n    Component,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Input,\n    NgModule,\n    Output,\n    QueryList,\n    ViewChild,\n    ViewChildren,\n    OnDestroy,\n    NgZone\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IgxBadgeModule } from '../badge/badge.component';\nimport { IgxRippleModule } from '../directives/ripple/ripple.directive';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxTabItemComponent } from './tab-item.component';\nimport { IgxTabsGroupComponent } from './tabs-group.component';\nimport { IgxLeftButtonStyleDirective, IgxRightButtonStyleDirective, IgxTabItemTemplateDirective } from './tabs.directives';\nimport { IgxTabsBase, IgxTabItemBase } from './tabs.common';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { mkenum, PlatformUtil } from '../core/utils';\n\nexport const IgxTabsType = mkenum({\n    FIXED: 'fixed',\n    CONTENTFIT: 'contentfit'\n});\nexport type IgxTabsType = (typeof IgxTabsType)[keyof typeof IgxTabsType];\n\nlet NEXT_TABS_ID = 0;\n\n@Component({\n    selector: 'igx-tabs',\n    templateUrl: 'tabs.component.html',\n    providers: [{ provide: IgxTabsBase, useExisting: IgxTabsComponent }]\n})\n\nexport class IgxTabsComponent implements IgxTabsBase, AfterViewInit, OnDestroy {\n    private _currentTabsId = NEXT_TABS_ID++;\n\n    /**\n     * Provides an observable collection of all `IgxTabsGroupComponent`s.\n     * ```typescript\n     * const groupItems = this.myTabComponent.groups;\n     * ```\n     */\n    @ContentChildren(forwardRef(() => IgxTabsGroupComponent))\n    public groups: QueryList<IgxTabsGroupComponent>;\n\n    /**\n     * Provides an observable collection of all `IgxTabItemComponent`s defined in the page.\n     * ```typescript\n     * const tabItems = this.myTabComponent.contentTabs;\n     * ```\n     */\n    @ContentChildren(forwardRef(() => IgxTabItemComponent))\n    public contentTabs: QueryList<IgxTabItemComponent>;\n\n    /**\n     * An @Input property that sets the value of the `selectedIndex`.\n     * Default value is 0.\n     * ```html\n     * <igx-tabs selectedIndex=\"1\">\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-tabs [(selectedIndex)]=\"model.selectedIndex\">\n     * ```\n     */\n    @Input()\n    public get selectedIndex(): number {\n        return this._selectedIndex;\n    }\n\n    public set selectedIndex(index: number) {\n        const newIndex = typeof index !== 'number' ? parseInt(index, 10) : index;\n        if (this._selectedIndex !== newIndex) {\n            if (this.tabs && this.tabs.length > 0) {\n                const newTab = this.tabs.toArray()[newIndex];\n                if (newTab) {\n                   this.performSelectionChange(newTab);\n                }\n            } else {\n                this._selectedIndex = newIndex;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public selectedIndexChange = new EventEmitter<number>();\n\n    /**\n     * Defines the tab header sizing mode. You can choose between `contentfit` or `fixed`.\n     * By default the header sizing mode is `contentfit`.\n     * ```html\n     * <igx-tabs type=\"fixed\">\n     *     <igx-tabs-group label=\"HOME\">Home</igx-tabs-group>\n     * </igx-tabs>\n     * ```\n     */\n    @Input('type')\n    public type: string | IgxTabsType = 'contentfit';\n\n    /**\n     * Sets/gets the `id` of the tabs.\n     *\n     * @remarks\n     * If not set, the `id` will have value `\"igx-tabs-0\"`.\n     *\n     * @example\n     * ```html\n     * <igx-tabs id=\"my-first-tabs\"></igx-tabs>\n     * ```\n     * @memberof IgxTabsComponent\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-tabs-${this._currentTabsId}`;\n\n    /**\n     * @hidden\n     */\n    @Input()\n    public class = '';\n\n    /**\n     * Emitted when a tab item is deselected.\n     * ```html\n     * <igx-tabs (onTabItemDeselected)=\"itemDeselected($event)\">\n     *      <igx-tabs-group label=\"Tab 1\">This is Tab 1 content.</igx-tabs-group>\n     *      <igx-tabs-group label=\"Tab 2\">This is Tab 2 content.</igx-tabs-group>\n     * </igx-tabs>\n     * ```\n     * ```typescript\n     * itemDeselected(e){\n     *      const tabGroup = e.group;\n     *      const tabItem = e.tab;\n     * }\n     * ```\n     */\n    @Output()\n    public onTabItemDeselected = new EventEmitter();\n\n    /**\n     * Emitted when a tab item is selected.\n     * ```html\n     * <igx-tabs (onTabItemSelected)=\"itemSelected($event)\">\n     *      <igx-tabs-group label=\"Tab 1\">This is Tab 1 content.</igx-tabs-group>\n     *      <igx-tabs-group label=\"Tab 2\">This is Tab 2 content.</igx-tabs-group>\n     * </igx-tabs>\n     * ```\n     * ```typescript\n     * itemSelected(e){\n     *      const tabGroup = e.group;\n     *      const tabItem = e.tab;\n     * }\n     * ```\n     */\n    @Output()\n    public onTabItemSelected = new EventEmitter();\n\n    /**\n     * @hidden\n     */\n    @ViewChild('contentsContainer', { static: true })\n    public contentsContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('headerContainer', { static: true })\n    public headerContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('itemsContainer', { static: true })\n    public itemsContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('selectedIndicator')\n    public selectedIndicator: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('tabsContainer', { static: true })\n    public tabsContainer: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('viewPort', { static: true })\n    public viewPort: ElementRef;\n\n    /**\n     * Provides an observable collection of all `IgxTabItemComponent`s.\n     * ```typescript\n     * const tabItems = this.myTabComponent.viewTabs;\n     * ```\n     */\n    @ViewChildren(forwardRef(() => IgxTabItemComponent))\n    public viewTabs: QueryList<IgxTabItemComponent>;\n\n    /**\n     * Provides an observable collection of all `IgxTabItemComponent`s.\n     * First try to get them as content children if not available get them as view children.\n     * ```typescript\n     * const tabItems = this.myTabComponent.tabs;\n     * ```\n     */\n    public get tabs(): QueryList<IgxTabItemComponent> {\n        if (this.hasContentTabs) {\n            return this.contentTabs;\n        }\n        return this.viewTabs;\n    }\n\n    /**\n     * @hidden\n     */\n    public get hasContentTabs(): boolean {\n        return (this.contentTabs && this.contentTabs.length > 0);\n    }\n\n    /**\n     * @hidden\n     */\n    public calculatedWidth: number;\n\n    /**\n     * @hidden\n     */\n    public visibleItemsWidth: number;\n\n    /**\n     * Enables/disables the transition animation of the tabs' content. Set to `false` by default.\n     * ````html\n     * <igx-tabs [disableAnimation]=\"true\"></igx-tabs>\n     */\n    @Input()\n    public disableAnimation = false;\n\n    /**\n     * @hidden\n     */\n    public offset = 0;\n\n    private _groupChanges$: Subscription;\n    private _selectedIndex = -1;\n    private _resizeObserver: ResizeObserver;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('attr.class')\n    public get cssClass() {\n        const defaultStyle = `igx-tabs`;\n        const fixedStyle = `igx-tabs--fixed`;\n        const iconStyle = `igx-tabs--icons`;\n        const iconLabelFoundInGroups = this.groups.find((group) => group.icon != null && group.label != null);\n        const iconLabelFoundInTabs = this.contentTabs.find((tab) => tab.icon != null && tab.label != null);\n        let css: string;\n        switch (IgxTabsType[this.type.toUpperCase()]) {\n            case IgxTabsType.FIXED: {\n                css = fixedStyle;\n                break;\n            }\n            default: {\n                css = defaultStyle;\n                break;\n            }\n        }\n\n        // Layout fix for items with icons\n        if (iconLabelFoundInGroups !== undefined || iconLabelFoundInTabs !== undefined) {\n            css = `${css} ${iconStyle}`;\n        }\n\n        return `${css} ${this.class}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public scrollLeft(event): void {\n        this.scroll(false);\n    }\n\n    /**\n     * @hidden\n     */\n    public scrollRight(event): void {\n        this.scroll(true);\n    }\n\n    /**\n     * @hidden\n     */\n    public scrollElement(element: any, scrollRight: boolean): void {\n        const viewPortWidth = this.viewPort.nativeElement.offsetWidth;\n\n        this.offset = (scrollRight) ? element.offsetWidth + element.offsetLeft - viewPortWidth : element.offsetLeft;\n        this.itemsContainer.nativeElement.style.transform = `translate(${-this.offset}px)`;\n    }\n\n    /**\n     * Gets the selected `IgxTabItemComponent`.\n     * ```\n     * const selectedItem = this.myTabComponent.selectedTabItem;\n     * ```\n     */\n    get selectedTabItem(): IgxTabItemComponent {\n        if (this.tabs && this.selectedIndex !== undefined) {\n            return this.tabs.toArray()[this.selectedIndex];\n        }\n    }\n\n    constructor(private _element: ElementRef, private _ngZone: NgZone, private platformUtil: PlatformUtil) { }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit() {\n        if (this._selectedIndex === -1) {\n            this.tabs.forEach((t) => {\n                if (t.isSelected) {\n                    this._selectedIndex = t.index;\n                }\n            });\n        }\n\n        if (!this.hasContentTabs && (this.selectedIndex < 0 || this.selectedIndex >= this.groups.length)) {\n            this._selectedIndex = 0;\n        }\n\n        if (this.platformUtil.isBrowser) {\n            requestAnimationFrame(() => {\n                const newTab = this.tabs.toArray()[this._selectedIndex];\n                if (newTab) {\n                    this.performSelection(newTab);\n                } else {\n                    this.hideIndicator();\n                }\n            });\n            this._ngZone.runOutsideAngular(() => {\n                this._resizeObserver = new ResizeObserver(() => {\n                    if (!this.hasContentTabs && this._selectedIndex >= 0 && this._selectedIndex < this.tabs.length) {\n                        const newTab = this.tabs.toArray()[this._selectedIndex];\n                        this.transformContentAnimation(newTab, 0);\n                    }\n                });\n\n                this._resizeObserver.observe(this.tabsContainer.nativeElement);\n            });\n        }\n\n        this.setGroupsAttributes();\n        this._groupChanges$ = this.groups.changes.subscribe(() => {\n            this.setGroupsAttributes();\n            this.resetSelectionOnCollectionChanged();\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy(): void {\n        if (this._groupChanges$) {\n            this._groupChanges$.unsubscribe();\n        }\n        if (this._resizeObserver) {\n            this._ngZone.runOutsideAngular(() => {\n                this._resizeObserver.disconnect();\n            });\n        }\n    }\n\n    private setGroupsAttributes() {\n        const groupsArray = Array.from(this.groups);\n        for (let index = 0; index < this.groups.length; index++) {\n            const tabsGroup = groupsArray[index] as IgxTabsGroupComponent;\n            tabsGroup.nativeElement.setAttribute('id', this.getTabsGroupId(index));\n            tabsGroup.nativeElement.setAttribute('aria-labelledby', this.getTabItemId(index));\n        }\n    }\n\n    private resetSelectionOnCollectionChanged(): void {\n        requestAnimationFrame(() => {\n            const currentTab = this.tabs.toArray()[this.selectedIndex];\n            if (currentTab) {\n                this.performSelectionChange(currentTab);\n            } else if (this.selectedIndex >= this.tabs.length) {\n                this.performSelectionChange(this.tabs.last);\n            } else {\n                this.hideIndicator();\n            }\n        });\n    }\n\n    private scroll(scrollRight: boolean): void {\n        const tabsArray = this.tabs.toArray();\n        for (const tab of tabsArray) {\n            const element = tab.nativeTabItem.nativeElement;\n            if (scrollRight) {\n                if (element.offsetWidth + element.offsetLeft > this.viewPort.nativeElement.offsetWidth + this.offset) {\n                    this.scrollElement(element, scrollRight);\n                    break;\n                }\n            } else {\n                if (element.offsetWidth + element.offsetLeft >= this.offset) {\n                    this.scrollElement(element, scrollRight);\n                    break;\n                }\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public performSelectionChange(newTab: IgxTabItemBase): void {\n        const oldTab = this.selectedTabItem;\n        if (oldTab) {\n            this.performDeselection(oldTab);\n        }\n        if (newTab) {\n            this.performSelection(newTab);\n        } else {\n            // if there is no new selected tab hide the selection indicator\n            this.hideIndicator();\n        }\n        this.selectedIndexChange.emit(this._selectedIndex);\n    }\n\n    private performDeselection(oldTab: IgxTabItemBase): void {\n        oldTab.setSelectedInternal(false);\n        const oldTabRelatedGroup = this.groups.toArray()[oldTab.index];\n        if (oldTabRelatedGroup) {\n            oldTabRelatedGroup.setSelectedInternal(false);\n        }\n        this._selectedIndex = -1;\n        this.onTabItemDeselected.emit({ tab: oldTab, group: oldTabRelatedGroup });\n    }\n\n    private performSelection(newTab: IgxTabItemBase): void {\n        newTab.setSelectedInternal(true);\n        this._selectedIndex = newTab.index;\n\n        let newTabRelatedGroup = null;\n        if (!this.hasContentTabs && this.groups) {\n            newTabRelatedGroup = this.groups.toArray()[newTab.index];\n            if (newTabRelatedGroup) {\n                newTabRelatedGroup.setSelectedInternal(true);\n            }\n        }\n\n        this.onTabItemSelected.emit({ tab: newTab, group: newTabRelatedGroup });\n\n        requestAnimationFrame(() => {\n            const transitionDuration  =  this.disableAnimation ? 0 : 0.2;\n            // bring the new selected tab into view if it is not\n            this.bringNewTabIntoView(newTab);\n            // animate the new selection indicator\n            this.transformIndicatorAnimation(newTab.nativeTabItem.nativeElement);\n            // animate the new tab's group content\n            if (!this.hasContentTabs) {\n                this.transformContentAnimation(newTab, transitionDuration);\n            }\n        });\n    }\n\n    private bringNewTabIntoView(newTab: IgxTabItemBase): void {\n        const tabNativeElement = newTab.nativeTabItem.nativeElement;\n\n        // Scroll left if there is need\n        if (tabNativeElement.offsetLeft < this.offset) {\n            this.scrollElement(tabNativeElement, false);\n        }\n\n        // Scroll right if there is need\n        const viewPortOffsetWidth = this.viewPort.nativeElement.offsetWidth;\n        const delta = (tabNativeElement.offsetLeft + tabNativeElement.offsetWidth) - (viewPortOffsetWidth + this.offset);\n\n        // Fix for IE 11, a difference is accumulated from the widths calculations\n        if (delta > 1) {\n            this.scrollElement(tabNativeElement, true);\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabItemId(index: number): string {\n        return `igx-tab-item-${this._currentTabsId}-${index}`;\n    }\n\n    /**\n     * @hidden\n     */\n    public getTabsGroupId(index: number): string {\n        return `igx-tabs-group-${this._currentTabsId}-${index}`;\n    }\n\n    /**\n     * @hidden\n     */\n    // animation for the new panel/group (not needed for tab only mode)\n    public transformContentAnimation(tab: IgxTabItemBase, duration: number): void {\n        const contentOffset = this.tabsContainer.nativeElement.offsetWidth * tab.index;\n        this.contentsContainer.nativeElement.style.transitionDuration = duration > 0 ? `${duration}s` : 'initial';\n        this.contentsContainer.nativeElement.style.transform = `translate(${-contentOffset}px)`;\n    }\n\n    /**\n     * @hidden\n     */\n    public transformIndicatorAnimation(element: HTMLElement, duration = 0.3): void {\n        if (this.selectedIndicator) {\n            this.selectedIndicator.nativeElement.style.visibility = 'visible';\n            this.selectedIndicator.nativeElement.style.transitionDuration = duration > 0 ? `${duration}s` : 'initial';\n            this.selectedIndicator.nativeElement.style.width = `${element.offsetWidth}px`;\n            this.selectedIndicator.nativeElement.style.transform = `translate(${element.offsetLeft}px)`;\n        }\n    }\n\n    public hideIndicator(): void {\n        if (this.selectedIndicator) {\n            this.selectedIndicator.nativeElement.style.visibility = 'hidden';\n        }\n    }\n\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxTabsComponent,\n        IgxTabsGroupComponent,\n        IgxTabItemComponent,\n        IgxTabItemTemplateDirective,\n        IgxRightButtonStyleDirective,\n        IgxLeftButtonStyleDirective],\n    exports: [IgxTabsComponent,\n        IgxTabsGroupComponent,\n        IgxTabItemComponent,\n        IgxTabItemTemplateDirective,\n        IgxRightButtonStyleDirective,\n        IgxLeftButtonStyleDirective],\n    imports: [CommonModule, IgxBadgeModule, IgxIconModule, IgxRippleModule]\n})\n\nexport class IgxTabsModule {\n}\n","import { ElementRef } from '@angular/core';\nimport { InteractionMode } from '../core/enums';\n\n/** @hidden */\nexport const IGX_TIME_PICKER_COMPONENT = 'IgxTimePickerComponentToken';\n\n/** @hidden */\nexport enum TimeParts {\n    Hour = 'hour',\n    Minute = 'minute',\n    Seconds = 'seconds',\n    amPM = 'ampm'\n}\n\n/** @hidden */\nexport interface IgxTimePickerBase {\n    hourList: ElementRef;\n    minuteList: ElementRef;\n    secondsList: ElementRef;\n    ampmList: ElementRef;\n    selectedHour: string;\n    selectedMinute: string;\n    selectedSeconds: string;\n    selectedAmPm: string;\n    format: string;\n    promptChar: string;\n    cleared: boolean;\n    mode: InteractionMode;\n    showHoursList: boolean;\n    showMinutesList: boolean;\n    showSecondsList: boolean;\n    showAmPmList: boolean;\n    nextHour();\n    prevHour();\n    nextMinute();\n    prevMinute();\n    nextSeconds();\n    prevSeconds();\n    nextAmPm();\n    prevAmPm();\n    okButtonClick(): boolean;\n    cancelButtonClick(): void;\n    scrollHourIntoView(item: string): void;\n    scrollMinuteIntoView(item: string): void;\n    scrollSecondsIntoView(item: string): void;\n    scrollAmPmIntoView(item: string): void;\n    close(): void;\n    parseMask(preserveAmPm?: boolean): string;\n}\n\n","/**\n * This file contains all the directives used by the @link IgxTimePickerComponent.\n * You should generally not use them directly.\n * @preferred\n */\nimport {\n    Directive,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n    TemplateRef\n} from '@angular/core';\nimport { IGX_TIME_PICKER_COMPONENT, IgxTimePickerBase } from './time-picker.common';\nimport { InteractionMode } from '../core/enums';\n\n/** @hidden */\n@Directive({\n    selector: '[igxItemList]'\n})\nexport class IgxItemListDirective {\n\n    @Input('igxItemList')\n    public type: string;\n\n    public isActive: boolean;\n\n    constructor(\n        @Inject(IGX_TIME_PICKER_COMPONENT) public timePicker: IgxTimePickerBase,\n        private elementRef: ElementRef\n    ) { }\n\n    @HostBinding('attr.tabindex')\n    public tabindex = 0;\n\n    @HostBinding('class.igx-time-picker__column')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__hourList')\n    get hourCSS(): boolean {\n        return this.type === 'hourList';\n    }\n\n    @HostBinding('class.igx-time-picker__minuteList')\n    get minuteCSS(): boolean {\n        return this.type === 'minuteList';\n    }\n\n    @HostBinding('class.igx-time-picker__secondsList')\n    get secondsCSS(): boolean {\n        return this.type === 'secondsList';\n    }\n\n    @HostBinding('class.igx-time-picker__ampmList')\n    get ampmCSS(): boolean {\n        return this.type === 'ampmList';\n    }\n\n    @HostListener('focus')\n    public onFocus() {\n        this.isActive = true;\n    }\n\n    @HostListener('blur')\n    public onBlur() {\n        this.isActive = false;\n    }\n\n    private nextItem(): void {\n        switch (this.type) {\n            case 'hourList': {\n                this.timePicker.nextHour();\n                break;\n            }\n            case 'minuteList': {\n                this.timePicker.nextMinute();\n                break;\n            }\n            case 'secondsList': {\n                this.timePicker.nextSeconds();\n                break;\n            }\n            case 'ampmList': {\n                this.timePicker.nextAmPm();\n                break;\n            }\n        }\n    }\n\n    private prevItem(): void {\n        switch (this.type) {\n            case 'hourList': {\n                this.timePicker.prevHour();\n                break;\n            }\n            case 'minuteList': {\n                this.timePicker.prevMinute();\n                break;\n            }\n            case 'secondsList': {\n                this.timePicker.prevSeconds();\n                break;\n            }\n            case 'ampmList': {\n                this.timePicker.prevAmPm();\n                break;\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowdown', ['$event'])\n    public onKeydownArrowDown(event: KeyboardEvent) {\n        event.preventDefault();\n\n        this.nextItem();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowup', ['$event'])\n    public onKeydownArrowUp(event: KeyboardEvent) {\n        event.preventDefault();\n\n        this.prevItem();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowright', ['$event'])\n    public onKeydownArrowRight(event: KeyboardEvent) {\n        event.preventDefault();\n\n        const listName = (event.target as HTMLElement).className;\n\n        if (listName.indexOf('hourList') !== -1 && this.timePicker.minuteList) {\n            this.timePicker.minuteList.nativeElement.focus();\n        } else if ((listName.indexOf('hourList') !== -1 || listName.indexOf('minuteList') !== -1) && this.timePicker.secondsList) {\n            this.timePicker.secondsList.nativeElement.focus();\n        } else if ((listName.indexOf('hourList') !== -1 || listName.indexOf('minuteList') !== -1 ||\n            listName.indexOf('secondsList') !== -1) && this.timePicker.ampmList) {\n            this.timePicker.ampmList.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.arrowleft', ['$event'])\n    public onKeydownArrowLeft(event: KeyboardEvent) {\n        event.preventDefault();\n        const listName = (event.target as HTMLElement).className;\n\n        if (listName.indexOf('ampmList') !== -1 && this.timePicker.secondsList) {\n            this.timePicker.secondsList.nativeElement.focus();\n        } else if (listName.indexOf('secondsList') !== -1 && this.timePicker.secondsList\n            && listName.indexOf('minutesList') && this.timePicker.minuteList) {\n            this.timePicker.minuteList.nativeElement.focus();\n        } else if (listName.indexOf('ampmList') !== -1 && this.timePicker.minuteList) {\n            this.timePicker.minuteList.nativeElement.focus();\n        } else if ((listName.indexOf('ampmList') !== -1 || listName.indexOf('secondsList') !== -1 ||\n            listName.indexOf('minuteList') !== -1) && this.timePicker.hourList) {\n            this.timePicker.hourList.nativeElement.focus();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.enter', ['$event'])\n    public onKeydownEnter(event: KeyboardEvent) {\n        event.preventDefault();\n\n        if (this.timePicker.mode === InteractionMode.DropDown) {\n            this.timePicker.close();\n            return;\n        }\n        this.timePicker.okButtonClick();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.escape', ['$event'])\n    public onKeydownEscape(event: KeyboardEvent) {\n        event.preventDefault();\n\n        this.timePicker.cancelButtonClick();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('mouseover')\n    public onHover() {\n        this.elementRef.nativeElement.focus();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('wheel', ['$event'])\n    public onScroll(event) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        if (event.deltaY > 0) {\n            this.nextItem();\n        } else if (event.deltaY < 0) {\n            this.prevItem();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('panmove', ['$event'])\n    public onPanMove(event) {\n        if (event.deltaY < 0) {\n            this.nextItem();\n        } else if (event.deltaY > 0) {\n            this.prevItem();\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxHourItem]'\n})\nexport class IgxHourItemDirective {\n\n    @Input('igxHourItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedHour;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedHour && this.itemList.isActive;\n    }\n\n    get isSelectedHour(): boolean {\n        return this.timePicker.selectedHour === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollHourIntoView(item);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxMinuteItem]'\n})\nexport class IgxMinuteItemDirective {\n\n    @Input('igxMinuteItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedMinute;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedMinute && this.itemList.isActive;\n    }\n\n    get isSelectedMinute(): boolean {\n        return this.timePicker.selectedMinute === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollMinuteIntoView(item);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxSecondsItem]'\n})\nexport class IgxSecondsItemDirective {\n\n    @Input('igxSecondsItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedSeconds;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedSeconds && this.itemList.isActive;\n    }\n\n    get isSelectedSeconds(): boolean {\n        return this.timePicker.selectedSeconds === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollSecondsIntoView(item);\n        }\n    }\n}\n\n/**\n * @hidden\n */\n@Directive({\n    selector: '[igxAmPmItem]'\n})\nexport class IgxAmPmItemDirective {\n\n    @Input('igxAmPmItem')\n    public value: string;\n\n    @HostBinding('class.igx-time-picker__item')\n    get defaultCSS(): boolean {\n        return true;\n    }\n\n    @HostBinding('class.igx-time-picker__item--selected')\n    get selectedCSS(): boolean {\n        return this.isSelectedAmPm;\n    }\n\n    @HostBinding('class.igx-time-picker__item--active')\n    get activeCSS(): boolean {\n        return this.isSelectedAmPm && this.itemList.isActive;\n    }\n\n    get isSelectedAmPm(): boolean {\n        return this.timePicker.selectedAmPm === this.value;\n    }\n\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT)\n    public timePicker: IgxTimePickerBase,\n        private itemList: IgxItemListDirective) { }\n\n    @HostListener('click', ['value'])\n    public onClick(item) {\n        if (item !== '') {\n            this.timePicker.scrollAmPmIntoView(item);\n        }\n    }\n}\n\n/**\n * This directive should be used to mark which ng-template will be used from IgxTimePicker when re-templating its input group.\n */\n@Directive({\n    selector: '[igxTimePickerTemplate]'\n})\nexport class IgxTimePickerTemplateDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n\n/**\n * This directive can be used to add custom action buttons to the dropdownb/dialog.\n */\n@Directive({\n    selector: '[igxTimePickerActions]'\n})\nexport class IgxTimePickerActionsDirective {\n    constructor(public template: TemplateRef<any>) { }\n}\n","import { Pipe, PipeTransform, Inject } from '@angular/core';\nimport { IGX_TIME_PICKER_COMPONENT, IgxTimePickerBase } from './time-picker.common';\n\n\n/**\n * Formats `IgxTimePickerComponent` display value according to the `format` property,\n * when the input element loses focus.\n */\n@Pipe({ name: 'displayFormat' })\nexport class TimeDisplayFormatPipe implements PipeTransform {\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT) private timePicker: IgxTimePickerBase) { }\n\n    transform(value: any): string {\n        let hour, minutes, seconds, amPM;\n\n        const maskAmPM = this.timePicker.parseMask();\n        const mask = this.timePicker.parseMask(false);\n        if (!value || value === mask || value === maskAmPM) {\n            return '';\n        }\n\n        const sections = value.split(/[\\s:]+/);\n\n        if (this.timePicker.showHoursList) {\n            hour = sections[0];\n        }\n\n        if (this.timePicker.showMinutesList) {\n            minutes = this.timePicker.showHoursList ? sections[1] : sections[0];\n        }\n\n        if (this.timePicker.showSecondsList) {\n            seconds = sections[sections.length - (this.timePicker.showAmPmList ? 2 : 1)];\n        }\n\n        if (this.timePicker.showAmPmList) {\n            amPM = sections[sections.length - 1];\n        }\n\n        const format = this.timePicker.format;\n        const prompt = this.timePicker.promptChar;\n        const regExp = new RegExp(this.timePicker.promptChar, 'g');\n\n        if (format.indexOf('hh') !== -1 || format.indexOf('HH') !== -1 && hour.indexOf(prompt) !== -1) {\n            hour = hour === prompt + prompt ? '00' : hour.replace(regExp, '0');\n        }\n\n        if (format.indexOf('mm') !== -1 && minutes.indexOf(prompt) !== -1) {\n            minutes = minutes === prompt + prompt ? '00' : minutes.replace(regExp, '0');\n        }\n\n        if (format.indexOf('ss') !== -1 && seconds.indexOf(prompt) !== -1) {\n            seconds = seconds === prompt + prompt ? '00' : seconds.replace(regExp, '0');\n        }\n\n        if (format.indexOf('hh') === -1 && format.indexOf('HH') === -1 && hour !== undefined) {\n            hour = hour.indexOf(prompt) !== -1 ? hour.replace(regExp, '') : hour;\n            const hourVal = parseInt(hour, 10);\n            hour = !hourVal ? '0' : hourVal < 10 && hourVal !== 0 ? hour.replace('0', '') : hour;\n        }\n\n        if (format.indexOf('mm') === -1 && minutes !== undefined) {\n            minutes = minutes.indexOf(prompt) !== -1 ? minutes.replace(regExp, '') : minutes;\n            const minutesVal = parseInt(minutes, 10);\n            minutes = !minutesVal ? '0' : minutesVal < 10 && minutesVal !== 0 ? minutes.replace('0', '') : minutes;\n        }\n\n        if (format.indexOf('ss') === -1 && seconds !== undefined) {\n            seconds = seconds.indexOf(prompt) !== -1 ? seconds.replace(regExp, '') : seconds;\n            const secondsVal = parseInt(seconds, 10);\n            seconds = !secondsVal ? '0' : secondsVal < 10 && secondsVal !== 0 ? seconds.replace('0', '') : seconds;\n        }\n\n        if (format.indexOf('tt') !== -1 && (amPM !== 'AM' || amPM !== 'PM')) {\n            amPM = amPM.indexOf('p') !== -1 || amPM.indexOf('P') !== -1 ? 'PM' : 'AM';\n        }\n\n        let result = `${hour}:${minutes}:${seconds}`;\n        if (!hour) {\n            // remove the hours\n            result = result.slice(result.indexOf(':') + 1);\n        }\n        if (!minutes) {\n            if (hour) {\n                // get the hours and seconds and concat them\n                result = result.slice(0, result.indexOf(':')) +\n                    result.slice(result.lastIndexOf(':'), result.length);\n            } else {\n                // remove the minutes\n                result = result.slice(result.indexOf(':') + 1);\n            }\n        }\n        if (!seconds) {\n            // remove the seconds\n            result = result.slice(0, result.lastIndexOf(':'));\n        }\n\n        return amPM ? `${result} ${amPM}` : result;\n    }\n}\n\n/**\n * Formats `IgxTimePickerComponent` display value according to the `format` property,\n * when the input element gets focus.\n */\n@Pipe({ name: 'inputFormat' })\nexport class TimeInputFormatPipe implements PipeTransform {\n    constructor(@Inject(IGX_TIME_PICKER_COMPONENT) private timePicker: IgxTimePickerBase) { }\n\n    transform(value: any): string {\n        const prompt = this.timePicker.promptChar;\n        const regExp = new RegExp(prompt, 'g');\n\n        let mask, hour, minutes, seconds, amPM;\n\n        if (this.timePicker.cleared) {\n            this.timePicker.cleared = false;\n            mask = this.timePicker.parseMask(false);\n        } else {\n            mask = this.timePicker.parseMask();\n        }\n\n        // TODO: Pending refactoring.\n        value = (this.timePicker as any).displayValue;\n        if (!value || value === mask) {\n            return mask;\n        }\n\n        const sections = value.split(/[\\s:]+/);\n\n        if (this.timePicker.showHoursList) {\n            hour = sections[0];\n            hour = hour.replace(regExp, '');\n\n            const leadZeroHour = (parseInt(hour, 10) < 10 && !hour.startsWith('0')) || hour === '0';\n            hour = leadZeroHour ? '0' + hour : hour;\n        }\n\n        if (this.timePicker.showMinutesList) {\n            minutes = this.timePicker.showHoursList ? sections[1] : sections[0];\n            minutes = minutes.replace(regExp, '');\n\n            const leadZeroMinutes = (parseInt(minutes, 10) < 10 && !minutes.startsWith('0')) || minutes === '0';\n            minutes = leadZeroMinutes ? '0' + minutes : minutes;\n        }\n\n        if (this.timePicker.showSecondsList) {\n            seconds = sections[sections.length - (this.timePicker.showAmPmList ? 2 : 1)];\n            seconds = seconds.replace(regExp, '');\n\n            const leadZeroSeconds = (parseInt(seconds, 10) < 10 && !seconds.startsWith('0')) || seconds === '0';\n            seconds = leadZeroSeconds ? '0' + seconds : seconds;\n        }\n\n        if (this.timePicker.showAmPmList) {\n            amPM = sections[sections.length - 1];\n        }\n\n        let result = `${hour}:${minutes}:${seconds}`;\n        if (!hour) {\n            // remove the hours\n            result = result.slice(result.indexOf(':') + 1);\n        }\n        if (!minutes) {\n            if (hour) {\n                // get the hours and seconds and concat them\n                result = result.slice(0, result.indexOf(':')) +\n                    result.slice(result.lastIndexOf(':'), result.length);\n            } else {\n                // remove the minutes\n                result = result.slice(result.indexOf(':') + 1);\n            }\n        }\n        if (!seconds) {\n            // remove the seconds\n            result = result.slice(0, result.lastIndexOf(':'));\n        }\n\n        return amPM ? `${result} ${amPM}` : result;\n    }\n}\n","import {\n    CommonModule\n} from '@angular/common';\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Output,\n    TemplateRef,\n    ViewChild,\n    ContentChild,\n    Injectable,\n    AfterViewInit,\n    Injector,\n    ChangeDetectorRef,\n    AfterViewChecked\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, AbstractControl } from '@angular/forms';\nimport { HAMMER_GESTURE_CONFIG, HammerGestureConfig } from '@angular/platform-browser';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxInputGroupModule, IgxInputGroupComponent } from '../input-group/input-group.component';\nimport { IgxInputDirective, IgxInputState } from '../directives/input/input.directive';\nimport {\n    IgxAmPmItemDirective,\n    IgxHourItemDirective,\n    IgxMinuteItemDirective,\n    IgxSecondsItemDirective,\n    IgxItemListDirective,\n    IgxTimePickerTemplateDirective,\n    IgxTimePickerActionsDirective\n} from './time-picker.directives';\nimport { Subject, fromEvent, interval, animationFrameScheduler, Subscription } from 'rxjs';\nimport { EditorProvider } from '../core/edit-provider';\nimport { IgxTimePickerBase, IGX_TIME_PICKER_COMPONENT, TimeParts } from './time-picker.common';\nimport { AbsoluteScrollStrategy } from '../services/overlay/scroll';\nimport { AutoPositionStrategy } from '../services/overlay/position';\nimport { OverlaySettings } from '../services/overlay/utilities';\nimport { takeUntil, throttle } from 'rxjs/operators';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxMaskModule } from '../directives/mask/mask.directive';\nimport { IgxOverlayOutletDirective, IgxToggleModule, IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { TimeDisplayFormatPipe, TimeInputFormatPipe } from './time-picker.pipes';\nimport { ITimePickerResourceStrings } from '../core/i18n/time-picker-resources';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { KEYS, IBaseEventArgs, IBaseCancelableBrowserEventArgs } from '../core/utils';\nimport { InteractionMode } from '../core/enums';\nimport { IgxTextSelectionModule } from '../directives/text-selection/text-selection.directive';\nimport { IgxLabelDirective } from '../directives/label/label.directive';\n\n\nlet NEXT_ID = 0;\nconst ITEMS_COUNT = 7;\n\n@Injectable()\nexport class TimePickerHammerConfig extends HammerGestureConfig {\n    public overrides = {\n        pan: { direction: Hammer.DIRECTION_VERTICAL, threshold: 1 }\n    };\n}\n\nexport interface IgxTimePickerValueChangedEventArgs extends IBaseEventArgs {\n    oldValue: Date;\n    newValue: Date;\n}\n\nexport interface IgxTimePickerValidationFailedEventArgs extends IBaseEventArgs {\n    timePicker: IgxTimePickerComponent;\n    currentValue: Date;\n    setThroughUI: boolean;\n}\n\nconst noop = () => { };\n\n@Component({\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: IgxTimePickerComponent,\n            multi: true\n        },\n        {\n            provide: HAMMER_GESTURE_CONFIG,\n            useClass: TimePickerHammerConfig\n        },\n        {\n            provide: IGX_TIME_PICKER_COMPONENT,\n            useExisting: IgxTimePickerComponent\n        }\n    ],\n    selector: 'igx-time-picker',\n    templateUrl: 'time-picker.component.html',\n    styles: [\n        `:host {\n            display: block;\n        }`\n    ]\n})\n\nexport class IgxTimePickerComponent implements\n    IgxTimePickerBase,\n    ControlValueAccessor,\n    EditorProvider,\n    OnInit,\n    OnDestroy,\n    AfterViewInit,\n    AfterViewChecked {\n\n    /**\n     * An @Input property that sets the value of the `id` attribute.\n     * ```html\n     * <igx-time-picker [id]=\"'igx-time-picker-5'\" format=\"h:mm tt\" ></igx-time-picker>\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-time-picker-${NEXT_ID++}`;\n\n    /**\n     * An accessor that allows you to set a time using the `value` input.\n     * ```html\n     * public date: Date = new Date(Date.now());\n     *  //...\n     * <igx-time-picker [value]=\"date\" format=\"h:mm tt\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set value(value: Date) {\n        if (this._isValueValid(value)) {\n            const oldVal = this._value;\n\n            this._value = value;\n            this._onChangeCallback(value);\n\n            const dispVal = this._formatTime(this.value, this.format);\n            if (this.mode === InteractionMode.DropDown && this._displayValue !== dispVal) {\n                this.displayValue = dispVal;\n            }\n\n            const args: IgxTimePickerValueChangedEventArgs = {\n                oldValue: oldVal,\n                newValue: value\n            };\n            this.onValueChanged.emit(args);\n        } else {\n            const args: IgxTimePickerValidationFailedEventArgs = {\n                timePicker: this,\n                currentValue: value,\n                setThroughUI: false\n            };\n            this.onValidationFailed.emit(args);\n        }\n    }\n    /**\n     * @hidden @internal\n     */\n    timeParts: any = Object.assign({}, TimeParts);\n\n    /**\n     * An accessor that returns the value of `igx-time-picker` component.\n     * ```html\n     * @ViewChild(\"MyPick\")\n     * public pick: IgxTimePickerComponent;\n     * ngAfterViewInit(){\n     *    let pickSelect = this.pick.value;\n     * }\n     * ```\n     */\n    get value(): Date {\n        return this._value;\n    }\n\n    /**\n     * An @Input property that allows you to disable the `igx-time-picker` component. By default `disabled` is set to false.\n     * ```html\n     * <igx-time-picker [disabled]=\"'true'\" [vertical]=\"true\" format=\"h:mm tt\" ></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * An accessor that sets the resource strings.\n     * By default it uses EN resources.\n     */\n    @Input()\n    set resourceStrings(value: ITimePickerResourceStrings) {\n        this._resourceStrings = Object.assign({}, this._resourceStrings, value);\n    }\n\n    /**\n     * An accessor that returns the resource strings.\n     */\n    get resourceStrings(): ITimePickerResourceStrings {\n        return this._resourceStrings;\n    }\n\n    /**\n     * An @Input property that renders OK button with custom text. By default `okButtonLabel` is set to OK.\n     * ```html\n     * <igx-time-picker okButtonLabel='SET' [value]=\"date\" format=\"h:mm tt\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set okButtonLabel(value: string) {\n        this._okButtonLabel = value;\n    }\n\n    /**\n     * An accessor that returns the label of ok button.\n     */\n    get okButtonLabel(): string {\n        if (this._okButtonLabel === null) {\n            return this.resourceStrings.igx_time_picker_ok;\n        }\n        return this._okButtonLabel;\n    }\n\n    /**\n     * An @Input property that renders cancel button with custom text.\n     * By default `cancelButtonLabel` is set to Cancel.\n     * ```html\n     * <igx-time-picker cancelButtonLabel='Exit' [value]=\"date\" format=\"h:mm tt\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set cancelButtonLabel(value: string) {\n        this._cancelButtonLabel = value;\n    }\n\n    /**\n     * An accessor that returns the label of cancel button.\n     */\n    get cancelButtonLabel(): string {\n        if (this._cancelButtonLabel === null) {\n            return this.resourceStrings.igx_time_picker_cancel;\n        }\n        return this._cancelButtonLabel;\n    }\n\n    /**\n     * An @Input property that gets/sets the delta by which hour and minute items would be changed <br>\n     * when the user presses the Up/Down keys.\n     * By default `itemsDelta` is set to `{hours: 1, minutes: 1, seconds: 1}`\n     * ```html\n     * <igx-time-picker [itemsDelta]=\"{hours:3, minutes:5, seconds:10}\" id=\"time-picker\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    set itemsDelta(value) {\n        this._itemsDelta = { hours: 1, minutes: 1, seconds: 1, ...value };\n    }\n\n    get itemsDelta(): { hours: number, minutes: number, seconds: number } {\n        return this._itemsDelta;\n    }\n\n    /**\n     * An @Input property that allows you to set the `minValue` to limit the user input.\n     * ```html\n     * public min: string = \"09:00\";\n     *  //..\n     * <igx-time-picker format=\"HH:mm\" [vertical]=\"true\" [minValue]=\"min\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public minValue: string;\n\n    /**\n     * An @Input property that allows you to set the `maxValue` to limit the user input.\n     * ```html\n     * public max: string = \"18:00\";\n     *  //..\n     * <igx-time-picker format=\"HH:mm\" [vertical]=\"true\" [maxValue]=\"max\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public maxValue: string;\n\n    /**\n     * An @Input property that determines the spin behavior. By default `isSpinLoop` is set to true.\n     * The seconds, minutes and hour spinning will wrap around by default.\n     * ```html\n     * <igx-time-picker [isSpinLoop]=\"false\" id=\"time-picker\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public isSpinLoop = true;\n\n    /**\n     * An @Input property that Gets/Sets the orientation of the `igxTimePicker`. By default `vertical` is set to false.\n     * ```html\n     * <igx-time-picker [vertical]=\"true\" id=\"time-picker\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    public vertical = false;\n\n    /**\n     * An @Input property that Gets/Sets format of time while `igxTimePicker` does not have focus. <br>\n     * By default `format` is set to hh:mm tt. <br>\n     * List of time-flags: <br>\n     * `h` : hours field in 12-hours format without leading zero <br>\n     * `hh` : hours field in 12-hours format with leading zero <br>\n     * `H` : hours field in 24-hours format without leading zero <br>\n     * `HH` : hours field in 24-hours format with leading zero <br>\n     * `m` : minutes field without leading zero <br>\n     * `mm` : minutes field with leading zero <br>\n     * `s` : seconds field without leading zero <br>\n     * `ss` : seconds field with leading zero <br>\n     * `tt` : 2 character string which represents AM/PM field <br>\n     * ```html\n     * <igx-time-picker format=\"HH:m\" id=\"time-picker\"></igx-time-picker>\n     * ```\n     */\n    @Input()\n    get format() {\n        return this._format || 'hh:mm tt';\n    }\n\n    set format(formatValue: string) {\n        this._format = formatValue;\n        this.mask = this._format.indexOf('tt') !== -1 ? '00:00:00 LL' : '00:00:00';\n\n        if (!this.showHoursList || !this.showMinutesList) {\n            this.trimMask();\n        }\n\n        if (!this.showSecondsList) {\n            this.trimMask();\n        }\n\n        if (this.displayValue) {\n            this.displayValue = this._formatTime(this.value, this._format);\n        }\n\n        this.determineCursorPos();\n    }\n\n    /**\n     * Sets the character used to prompt the user for input.\n     * Default value is \"'-'\".\n     * ```html\n     * <igx-time-picker [promptChar] = \"'_'\">\n     * ```\n     * @memberof IgxTimePickerComponent\n     */\n    @Input()\n    public promptChar = '-';\n\n    /**\n     * An @Input property that allows you to switch the interaction mode between\n     * a dialog picker or dropdown with editable masked input.\n     * Deafult is dialog picker.\n     * ```html\n     * public mode = InteractionMode.DROPDOWN;\n     *  //..\n     * <igx-time-picker [mode]=\"mode\"></igx-time-picker>\n     * ```\n     * @memberof IgxTimePickerComponent\n     */\n    @Input()\n    public mode = InteractionMode.Dialog;\n\n    /**\n     * Determines the container the popup element should be attached to.\n     *\n     * ```html\n     * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n     * //..\n     * <igx-time-picker [outlet]=\"outlet\"></igx-time-picker>\n     * //..\n     * ```\n     * Where `outlet` is an instance of `IgxOverlayOutletDirective` or an `ElementRef`.\n     */\n    @Input()\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n     * An @Input property that allows you to modify overlay positioning, interaction and scroll behavior.\n     * ```typescript\n     * const settings: OverlaySettings = {\n     *      closeOnOutsideClick: true,\n     *      modal: false\n     *  }\n     * ```\n     * ---\n     * ```html\n     * <igx-time-picker [overlaySettings]=\"settings\"></igx-time-picker>\n     * ```\n     * @memberof IgxTimePickerComponent\n     */\n    @Input()\n    public set overlaySettings(value: OverlaySettings) {\n        this._overlaySettings = value;\n    }\n\n    public get overlaySettings(): OverlaySettings {\n        return this._overlaySettings ? this._overlaySettings :\n            (this.mode === InteractionMode.Dialog ? this._dialogOverlaySettings : this._dropDownOverlaySettings);\n    }\n\n    /**\n     * Emitted when selection is made. The event contains the selected value. Returns {`oldValue`: `Date`, `newValue`: `Date`}.\n     * ```typescript\n     *  @ViewChild(\"toast\")\n     * private toast: IgxToastComponent;\n     * public onValueChanged(timepicker){\n     *     this.toast.show()\n     * }\n     *  //...\n     *  ```\n     *  ```html\n     * <igx-time-picker (onValueChanged)=\"onValueChanged($event)\"></igx-time-picker>\n     * <igx-toast #toast message=\"The value has been changed!\"></igx-toast>\n     * ```\n     */\n    @Output()\n    public onValueChanged = new EventEmitter<IgxTimePickerValueChangedEventArgs>();\n\n    /**\n     * Emitted when an invalid value is being set. Returns {`timePicker`: `any`, `currentValue`: `Date`, `setThroughUI`: `boolean`}\n     * ```typescript\n     * public min: string = \"09:00\";\n     * public max: string = \"18:00\";\n     *  @ViewChild(\"toast\")\n     * private toast: IgxToastComponent;\n     * public onValidationFailed(timepicker){\n     *     this.toast.show();\n     * }\n     *  //...\n     *  ```\n     *  ```html\n     * <igx-time-picker [minValue]=\"min\" [maxValue]=\"max\" (onValidationFailed)=\"onValidationFailed($event)\"></igx-time-picker>\n     * <igx-toast #toast message=\"Value must be between 09:00 and 18:00!\"></igx-toast>\n     * ```\n     */\n    @Output()\n    public onValidationFailed = new EventEmitter<IgxTimePickerValidationFailedEventArgs>();\n\n    /**\n     * Emitted when a timePicker is opened.\n     */\n    @Output()\n    public onOpened = new EventEmitter<IgxTimePickerComponent>();\n\n    /**\n     * Emitted when a timePicker is closed.\n     */\n    @Output()\n    public onClosed = new EventEmitter<IgxTimePickerComponent>();\n\n    /**\n     * Emitted when a timePicker is being closed.\n     */\n    @Output()\n    public onClosing = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * @hidden\n     */\n    @ViewChild('hourList')\n    public hourList: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('minuteList')\n    public minuteList: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('secondsList')\n    public secondsList: ElementRef;\n\n    /**\n     * @hidden\n     */\n    @ViewChild('ampmList')\n    public ampmList: ElementRef;\n\n    /*\n     * @hidden\n     */\n    @ViewChild('defaultTimePickerTemplate', { read: TemplateRef, static: true })\n    protected defaultTimePickerTemplate: TemplateRef<any>;\n\n    @ViewChild('dropdownInputTemplate', { read: TemplateRef, static: true })\n    private dropdownInputTemplate: TemplateRef<any>;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTimePickerTemplateDirective, { read: IgxTimePickerTemplateDirective })\n    protected timePickerTemplateDirective: IgxTimePickerTemplateDirective;\n\n    /**\n     * @hidden\n     */\n    @ContentChild(IgxTimePickerActionsDirective, { read: IgxTimePickerActionsDirective })\n    public timePickerActionsDirective: IgxTimePickerActionsDirective;\n\n    /**\n     * @hidden @internal\n     */\n    @ContentChild(IgxLabelDirective)\n    public labelDirective: IgxLabelDirective;\n\n    /**\n     * @hidden\n     */\n    @ViewChild(IgxToggleDirective, { static: true })\n    public toggleRef: IgxToggleDirective;\n\n    @ViewChild(IgxInputDirective, { read: ElementRef })\n    private _inputElementRef: ElementRef;\n\n    @ViewChild(IgxInputDirective, { read: IgxInputDirective })\n    private _inputDirective: IgxInputDirective;\n\n    @ContentChild(IgxInputDirective, { read: IgxInputDirective })\n    private _inputDirectiveUserTemplate: IgxInputDirective;\n\n    @ViewChild(IgxInputGroupComponent, { read: IgxInputGroupComponent })\n    private _inputGroup: IgxInputGroupComponent;\n\n    private _overlaySettings: OverlaySettings;\n\n    /**\n     * @hidden\n     */\n    public _hourItems = [];\n\n    /**\n     * @hidden\n     */\n    public _minuteItems = [];\n\n    /**\n     * @hidden\n     */\n    public _secondsItems = [];\n\n    /**\n     * @hidden\n     */\n    public _ampmItems = [];\n\n    /**\n     * @hidden\n     */\n    public cleared = false;\n\n    /**\n     * @hidden\n     */\n    public isNotEmpty = false;\n\n    /**\n     * @hidden\n     */\n    public displayFormat = new TimeDisplayFormatPipe(this);\n\n    /**\n     * @hidden\n     */\n    public inputFormat = new TimeInputFormatPipe(this);\n\n    /**\n     * @hidden\n     */\n    public selectedHour: string;\n\n    /**\n     * @hidden\n     */\n    public selectedMinute: string;\n\n    /**\n     * @hidden\n     */\n    public selectedSeconds: string;\n\n    /**\n     * @hidden\n     */\n    public selectedAmPm: string;\n\n    /** @hidden @internal */\n    private _value: Date;\n    private _resourceStrings = CurrentResourceStrings.TimePickerResStrings;\n    private _okButtonLabel = null;\n    private _cancelButtonLabel = null;\n    private _format: string;\n    private _mask: string;\n    private _displayValue: string;\n    private _itemsDelta: { hours: number, minutes: number, seconds: number } = { hours: 1, minutes: 1, seconds: 1 };\n\n    private _isHourListLoop = this.isSpinLoop;\n    private _isMinuteListLoop = this.isSpinLoop;\n    private _isSecondsListLoop = this.isSpinLoop;\n\n    private _hourView = [];\n    private _minuteView = [];\n    private _secondsView = [];\n    private _ampmView = [];\n\n    private _dateFromModel: Date;\n    private _destroy$ = new Subject<boolean>();\n    private _statusChanges$: Subscription;\n    private _dropDownOverlaySettings: OverlaySettings;\n    private _dialogOverlaySettings: OverlaySettings;\n\n    private _prevSelectedHour: string;\n    private _prevSelectedMinute: string;\n    private _prevSelectedSeconds: string;\n    private _prevSelectedAmPm: string;\n\n    private _onOpen = new EventEmitter<IgxTimePickerComponent>();\n    private _onClose = new EventEmitter<IgxTimePickerComponent>();\n\n    private _hoursPos = new Set();\n    private _minutesPos = new Set();\n    private _secondsPos = new Set();\n    private _amPmPos = new Set();\n    private _ngControl: NgControl = null;\n\n    //#region ControlValueAccessor\n\n    private _onChangeCallback: (_: Date) => void = noop;\n    private _onTouchedCallback: () => void = noop;\n\n    /** @hidden @internal */\n    public writeValue(value: Date) {\n        // use this flag to make sure that min/maxValue are checked (in _convertMinMaxValue() method)\n        // against the real value when initializing the component and value is bound via ngModel\n        this._dateFromModel = value;\n\n        this._value = value;\n\n        if (this.mode === InteractionMode.DropDown) {\n            this.displayValue = this._formatTime(this.value, this.format);\n        }\n    }\n\n    /** @hidden @internal */\n    applyDisabledStyleForItem(period: string, value: string) {\n        if (!this.minValue || !this.maxValue) {\n            return false;\n        }\n        const minValueDate: Date = this.convertMinMaxValue(this.minValue);\n        const maxValueDate: Date = this.convertMinMaxValue(this.maxValue);\n        let hour: number = parseInt(this.selectedHour, 10);\n        let minute: number = parseInt(this.selectedMinute, 10);\n        let seconds: number = parseInt(this.selectedSeconds, 10);\n        let amPM: string = this.selectedAmPm;\n        const date = new Date(minValueDate);\n        switch (period) {\n            case TimeParts.Hour:\n                hour = parseInt(value, 10);\n                break;\n\n            case TimeParts.Minute:\n                minute = parseInt(value, 10);\n                break;\n\n            case TimeParts.Seconds:\n                seconds = parseInt(value, 10);\n                break;\n\n            case TimeParts.amPM:\n                amPM = value;\n                break;\n        }\n\n        if (amPM === 'PM') {\n            hour += 12;\n        }\n        date.setHours(hour);\n        date.setMinutes(minute);\n        date.setSeconds(seconds);\n        return date < minValueDate || date > maxValueDate;\n\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: (_: Date) => void) { this._onChangeCallback = fn; }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: () => void) { this._onTouchedCallback = fn; }\n\n    /** @hidden @internal */\n    public setDisabledState(isDisabled: boolean): void { this.disabled = isDisabled; }\n\n    //#endregion\n\n    private trimMask(): void {\n        this.mask = this.mask.slice(this.mask.indexOf(':') + 1, this.mask.length);\n    }\n\n    /**\n     * @hidden\n     */\n    get mask(): string {\n        return this._mask || '00:00 LL';\n    }\n\n    set mask(val: string) {\n        this._mask = val;\n    }\n\n    /**\n     * @hidden\n     */\n    get displayValue(): string {\n        if (this._displayValue === undefined) {\n            return this._formatTime(this.value, this.format);\n        }\n        return this._displayValue;\n    }\n\n    set displayValue(value: string) {\n        this._displayValue = value;\n    }\n\n    /**\n     * Returns the current time formatted as string using the `format` option.\n     * If there is no set time the return is an empty string.\n     * ```typescript\n     * @ViewChild(\"MyChild\")\n     * private picker: IgxTimePickerComponent;\n     * ngAfterViewInit(){\n     *    let time = this.picker.displayTime;\n     * }\n     * ```\n     */\n    public get displayTime(): string {\n        if (this.value) {\n            return this._formatTime(this.value, this.format);\n        }\n        return '';\n    }\n\n    /**\n     * @hidden\n     */\n    get hourView(): string[] {\n        return this._hourView;\n    }\n\n    /**\n     * @hidden\n     */\n    get minuteView(): string[] {\n        return this._minuteView;\n    }\n\n    /**\n     * @hidden\n     */\n    get secondsView(): string[] {\n        return this._secondsView;\n    }\n\n    /**\n     * @hidden\n     */\n    get ampmView(): string[] {\n        return this._ampmView;\n    }\n\n    /**\n     * @hidden\n     */\n    get showClearButton(): boolean {\n        return (this.displayValue && this.displayValue !== this.parseMask(false)) || this.isNotEmpty;\n    }\n\n    /**\n     * @hidden\n     */\n    get showHoursList(): boolean {\n        return this.format.indexOf('h') !== - 1 || this.format.indexOf('H') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get showMinutesList(): boolean {\n        return this.format.indexOf('m') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get showSecondsList(): boolean {\n        return this.format.indexOf('s') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get showAmPmList(): boolean {\n        return this.format.indexOf('t') !== - 1;\n    }\n\n    /**\n     * @hidden\n     */\n    get validSecondsEntries(): any[] {\n        const secondsEntries = [];\n        for (let i = 0; i < 60; i++) {\n            secondsEntries.push(i);\n        }\n        return secondsEntries;\n    }\n\n    /**\n     * @hidden\n     */\n    get validMinuteEntries(): any[] {\n        const minuteEntries = [];\n        for (let i = 0; i < 60; i++) {\n            minuteEntries.push(i);\n        }\n        return minuteEntries;\n    }\n\n    /**\n     * @hidden\n     */\n    get validHourEntries(): any[] {\n        const hourEntries = [];\n        const index = this.format.indexOf('h') !== -1 ? 13 : 24;\n        for (let i = 0; i < index; i++) {\n            hourEntries.push(i);\n        }\n        return hourEntries;\n    }\n\n    /**\n     * Gets the input group template.\n     * ```typescript\n     * let template = this.template();\n     * ```\n     * @memberof IgxTimePickerComponent\n     */\n    get template(): TemplateRef<any> {\n        if (this.timePickerTemplateDirective) {\n            return this.timePickerTemplateDirective.template;\n        }\n        return this.mode === InteractionMode.Dialog ? this.defaultTimePickerTemplate : this.dropdownInputTemplate;\n    }\n\n    /**\n     * Gets the context passed to the input group template.\n     * @memberof IgxTimePickerComponent\n     */\n    get context() {\n        return {\n            value: this.value,\n            displayTime: this.displayTime,\n            displayValue: this.displayValue,\n            openDialog: (target?: HTMLElement) => this.openDialog(target)\n        };\n    }\n\n    private get required(): boolean {\n        if (this._ngControl && this._ngControl.control && this._ngControl.control.validator) {\n            // Run the validation with empty object to check if required is enabled.\n            const error = this._ngControl.control.validator({} as AbstractControl);\n            return error && error.required;\n        }\n\n        return false;\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnInit(): void {\n        this._generateHours();\n        this._generateMinutes();\n        this._generateSeconds();\n        if (this.format.indexOf('tt') !== -1) {\n            this._generateAmPm();\n        }\n\n        this._dropDownOverlaySettings = {\n            modal: false,\n            closeOnOutsideClick: true,\n            scrollStrategy: new AbsoluteScrollStrategy(),\n            positionStrategy: new AutoPositionStrategy()\n        };\n        this._dialogOverlaySettings = {};\n        this._ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /**\n     * @hidden\n     */\n    public ngAfterViewInit(): void {\n        if (this.mode === InteractionMode.DropDown && this._inputElementRef) {\n            fromEvent(this._inputElementRef.nativeElement, 'keydown').pipe(\n                throttle(() => interval(0, animationFrameScheduler)),\n                takeUntil(this._destroy$)\n            ).subscribe((event: KeyboardEvent) => {\n                if (event.key === KEYS.UP_ARROW || event.key === KEYS.UP_ARROW_IE ||\n                    event.key === KEYS.DOWN_ARROW || event.key === KEYS.DOWN_ARROW_IE) {\n                    this.spinOnEdit(event);\n                }\n            });\n        }\n\n        if (this.toggleRef && this._inputGroup) {\n            this.toggleRef.element.style.width = this._inputGroup.element.nativeElement.getBoundingClientRect().width + 'px';\n        }\n\n        if (this.toggleRef) {\n            this.toggleRef.onClosed.pipe(takeUntil(this._destroy$)).subscribe(() => {\n                if (this.mode === InteractionMode.DropDown) {\n                    this._onDropDownClosed();\n                }\n\n                this.onClosed.emit(this);\n            });\n\n            this.toggleRef.onOpened.pipe(takeUntil(this._destroy$)).subscribe(() => {\n                this.onOpened.emit(this);\n            });\n\n            this.toggleRef.onClosing.pipe(takeUntil(this._destroy$)).subscribe((event) => {\n                this.onClosing.emit(event);\n                // If canceled in a user onClosing handler\n                if (event.cancel) {\n                    return;\n                }\n                // Do not focus the input if clicking outside in dropdown mode\n                const input = this.getEditElement();\n                if (input && !(event.event && this.mode === InteractionMode.DropDown)) {\n                    input.focus();\n                } else {\n                    this._updateValidityOnBlur();\n                }\n            });\n\n            this.determineCursorPos();\n\n            if (this._ngControl) {\n                this._statusChanges$ = this._ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n            }\n        }\n    }\n\n    public ngAfterViewChecked() {\n        // if one sets mode at run time this forces initialization of new igxInputGroup\n        // As a result a new igxInputDirective is initialized too. In ngAfterViewInit of\n        // the new directive isRequired of the igxInputGroup is set again. However\n        // ngAfterViewInit of the time picker is not called again and we may finish with wrong\n        // isRequired in igxInputGroup. This is why we should set it her, only when needed\n        if (this._inputGroup && this._inputGroup.isRequired !== this.required) {\n            this._inputGroup.isRequired = this.required;\n            this._cdr.detectChanges();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public ngOnDestroy(): void {\n        this._destroy$.next(true);\n        this._destroy$.complete();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.spacebar', ['$event'])\n    @HostListener('keydown.space', ['$event'])\n    public onKeydownSpace(event) {\n        this.openDialog(this.getInputGroupElement());\n        event.preventDefault();\n    }\n\n    /**\n     * @hidden\n     */\n    @HostListener('keydown.Alt.ArrowDown')\n    public onAltArrowDown() {\n        this.openDialog(this.getInputGroupElement());\n    }\n\n    constructor(\n        private _injector: Injector,\n        private _cdr: ChangeDetectorRef) { }\n\n    private determineCursorPos(): void {\n        this.clearCursorPos();\n        for (const char of this.format) {\n            switch (char) {\n                case 'H':\n                case 'h':\n                    this._hoursPos.size === 0 ? this._hoursPos.add(this.format.indexOf(char)) :\n                        this._hoursPos.add(this.format.lastIndexOf(char));\n                    this._hoursPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n                case 'M':\n                case 'm':\n                    this._minutesPos.size === 0 ? this._minutesPos.add(this.format.indexOf(char)) :\n                        this._minutesPos.add(this.format.lastIndexOf(char));\n                    this._minutesPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n                case 'S':\n                case 's':\n                    this._secondsPos.size === 0 ? this._secondsPos.add(this.format.indexOf(char)) :\n                        this._secondsPos.add(this.format.lastIndexOf(char));\n                    this._secondsPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n                case 'T':\n                case 't':\n                    this._amPmPos.size === 0 ? this._amPmPos.add(this.format.indexOf(char)) :\n                        this._amPmPos.add(this.format.lastIndexOf(char));\n                    this._amPmPos.add(this.format.lastIndexOf(char) + 1);\n                    break;\n            }\n        }\n    }\n\n    private clearCursorPos() {\n        this._hoursPos.forEach(v => this._hoursPos.delete(v));\n        this._minutesPos.forEach(v => this._minutesPos.delete(v));\n        this._secondsPos.forEach(v => this._secondsPos.delete(v));\n        this._amPmPos.forEach(v => this._amPmPos.delete(v));\n    }\n\n    private _scrollItemIntoView(item: string, items: any[], selectedItem: string, isListLoop: boolean, viewType: string): any {\n        let itemIntoView;\n        if (items) {\n            const index = (item === 'AM' || item === 'PM') ? items.indexOf(item) : items.indexOf(parseInt(item, 10));\n            let view;\n\n            if (index !== -1) {\n                if (isListLoop) {\n                    if (index > 0) {\n                        selectedItem = this._itemToString(items[index - 1], viewType);\n                        itemIntoView = this._nextItem(items, selectedItem, isListLoop, viewType);\n                    } else {\n                        selectedItem = this._itemToString(items[1], viewType);\n                        itemIntoView = this._prevItem(items, selectedItem, isListLoop, viewType);\n                    }\n                } else {\n                    view = items.slice(index - 3, index + 4);\n                    selectedItem = this._itemToString(items[index], viewType);\n                    itemIntoView = { selectedItem, view };\n                }\n                itemIntoView.view = this._viewToString(itemIntoView.view, viewType);\n            }\n        }\n        return itemIntoView;\n    }\n\n    private _viewToString(view: any, viewType: string): any {\n        for (let i = 0; i < view.length; i++) {\n            if (typeof (view[i]) !== 'string') {\n                view[i] = this._itemToString(view[i], viewType);\n            }\n        }\n        return view;\n    }\n\n    private _itemToString(item: any, viewType: string): string {\n        if (item === null) {\n            item = '';\n        } else if (viewType && typeof (item) !== 'string') {\n            const leadZeroHour = (item < 10 && (this.format.indexOf('hh') !== -1 || this.format.indexOf('HH') !== -1));\n            const leadZeroMinute = (item < 10 && this.format.indexOf('mm') !== -1);\n            const leadZeroSeconds = (item < 10 && this.format.indexOf('ss') !== -1);\n\n            const leadZero = {\n                hour: leadZeroHour,\n                minute: leadZeroMinute,\n                seconds: leadZeroSeconds\n            }[viewType];\n\n            item = (leadZero) ? '0' + item : `${item}`;\n        }\n        return item;\n    }\n\n    private _prevItem(items: any[], selectedItem: string, isListLoop: boolean, viewType: string): any {\n        const selectedIndex = items.indexOf(parseInt(selectedItem, 10));\n        const itemsCount = items.length;\n        let view;\n\n        if (selectedIndex === -1) {\n            view = items.slice(0, 7);\n            selectedItem = items[3];\n        } else if (isListLoop) {\n            if (selectedIndex - 4 < 0) {\n                view = items.slice(itemsCount - (4 - selectedIndex), itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 3));\n            } else if (selectedIndex + 4 > itemsCount) {\n                view = items.slice(selectedIndex - 4, itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 3 - itemsCount));\n            } else {\n                view = items.slice(selectedIndex - 4, selectedIndex + 3);\n            }\n\n            selectedItem = (selectedIndex === 0) ? items[itemsCount - 1] : items[selectedIndex - 1];\n        } else if (selectedIndex > 3) {\n            view = items.slice(selectedIndex - 4, selectedIndex + 3);\n            selectedItem = items[selectedIndex - 1];\n        } else if (selectedIndex === 3) {\n            view = items.slice(0, 7);\n        }\n        view = this._viewToString(view, viewType);\n        selectedItem = this._itemToString(selectedItem, viewType);\n        return {\n            selectedItem,\n            view\n        };\n    }\n\n    private _nextItem(items: any[], selectedItem: string, isListLoop: boolean, viewType: string): any {\n        const selectedIndex = items.indexOf(parseInt(selectedItem, 10));\n        const itemsCount = items.length;\n        let view;\n\n        if (selectedIndex === -1) {\n            view = items.slice(0, 7);\n            selectedItem = items[3];\n        } else if (isListLoop) {\n            if (selectedIndex < 2) {\n                view = items.slice(itemsCount - (2 - selectedIndex), itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 5));\n            } else if (selectedIndex + 4 >= itemsCount) {\n                view = items.slice(selectedIndex - 2, itemsCount);\n                view = view.concat(items.slice(0, selectedIndex + 5 - itemsCount));\n            } else {\n                view = items.slice(selectedIndex - 2, selectedIndex + 5);\n            }\n\n            selectedItem = (selectedIndex === itemsCount - 1) ? items[0] : items[selectedIndex + 1];\n        } else if (selectedIndex + 1 < itemsCount - 3) {\n            view = items.slice(selectedIndex - 2, selectedIndex + 5);\n            selectedItem = items[selectedIndex + 1];\n        } else if (selectedIndex === itemsCount - 4) {\n            view = items.slice(selectedIndex - 3, itemsCount);\n        }\n        view = this._viewToString(view, viewType);\n        selectedItem = this._itemToString(selectedItem, viewType);\n        return {\n            selectedItem,\n            view\n        };\n    }\n\n    private _formatTime(value: Date, format: string): string {\n        if (!value) {\n            return '';\n        } else {\n            let hour = value.getHours();\n            let formattedSeconds, formattedMinute, formattedHour;\n\n            const minute = value.getMinutes();\n            const seconds = value.getSeconds();\n            const amPM = (hour > 11) ? 'PM' : 'AM';\n\n            if (format.indexOf('h') !== -1) {\n                if (hour > 12) {\n                    hour -= 12;\n                    formattedHour = hour < 10 && format.indexOf('hh') !== -1 ? '0' + hour : `${hour}`;\n                } else if (hour === 0) {\n                    formattedHour = '12';\n                } else if (hour < 10 && format.indexOf('hh') !== -1) {\n                    formattedHour = '0' + hour;\n                } else {\n                    formattedHour = `${hour}`;\n                }\n            } else {\n                if (hour < 10 && format.indexOf('HH') !== -1) {\n                    formattedHour = '0' + hour;\n                } else {\n                    formattedHour = `${hour}`;\n                }\n            }\n\n            formattedMinute = minute < 10 && format.indexOf('mm') !== -1 ? '0' + minute : `${minute}`;\n\n            formattedSeconds = seconds < 10 && format.indexOf('ss') !== -1 ? '0' + seconds : `${seconds}`;\n\n            return format.replace('hh', formattedHour).replace('h', formattedHour)\n                .replace('HH', formattedHour).replace('H', formattedHour)\n                .replace('mm', formattedMinute).replace('m', formattedMinute)\n                .replace('ss', formattedSeconds).replace('s', formattedSeconds)\n                .replace('tt', amPM);\n        }\n    }\n\n    private _updateHourView(start: any, end: any): void {\n        this._hourView = this._viewToString(this._hourItems.slice(start, end), 'hour');\n    }\n\n    private _updateMinuteView(start: any, end: any): void {\n        this._minuteView = this._viewToString(this._minuteItems.slice(start, end), 'minute');\n    }\n\n    private _updateSecondsView(start: any, end: any): void {\n        this._secondsView = this._viewToString(this._secondsItems.slice(start, end), 'seconds');\n    }\n\n    private _updateAmPmView(start: any, end: any): void {\n        this._ampmView = this._ampmItems.slice(start, end);\n    }\n\n    private _addEmptyItems(items: string[]): void {\n        for (let i = 0; i < 3; i++) {\n            items.push(null);\n        }\n    }\n\n    private _generateHours(): void {\n        let hourItemsCount = 24;\n        if (this.format.indexOf('h') !== -1) {\n            hourItemsCount = 13;\n        }\n\n        hourItemsCount /= this.itemsDelta.hours;\n\n        let i = this.format.indexOf('H') !== -1 ? 0 : 1;\n\n        if (hourItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._hourItems);\n            this._isHourListLoop = false;\n        }\n\n        if (hourItemsCount > 1) {\n            for (i; i < hourItemsCount; i++) {\n                this._hourItems.push(i * this.itemsDelta.hours);\n            }\n        } else {\n            this._hourItems.push(0);\n        }\n\n        if (hourItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._hourItems);\n        }\n    }\n\n    private _generateMinutes(): void {\n        const minuteItemsCount = 60 / this.itemsDelta.minutes;\n\n        if (minuteItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._minuteItems);\n            this._isMinuteListLoop = false;\n        }\n\n        for (let i = 0; i < minuteItemsCount; i++) {\n            this._minuteItems.push(i * this.itemsDelta.minutes);\n        }\n\n        if (minuteItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._minuteItems);\n        }\n    }\n\n    private _generateSeconds(): void {\n        const secondsItemsCount = 60 / this.itemsDelta.seconds;\n\n        if (secondsItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._secondsItems);\n            this._isSecondsListLoop = false;\n        }\n\n        for (let i = 0; i < secondsItemsCount; i++) {\n            this._secondsItems.push(i * this.itemsDelta.seconds);\n        }\n\n        if (secondsItemsCount < 7 || !this.isSpinLoop) {\n            this._addEmptyItems(this._secondsItems);\n        }\n    }\n\n    private _generateAmPm(): void {\n\n        this._addEmptyItems(this._ampmItems);\n\n        this._ampmItems.push('AM');\n        this._ampmItems.push('PM');\n\n        this._addEmptyItems(this._ampmItems);\n    }\n\n    private _getSelectedTime(): Date {\n        const date = this.value ? new Date(this.value) : new Date();\n        if (this.selectedHour) {\n            date.setHours(parseInt(this.selectedHour, 10));\n        }\n        if (this.selectedMinute) {\n            date.setMinutes(parseInt(this.selectedMinute, 10));\n        }\n        if (this.selectedSeconds) {\n            date.setSeconds(parseInt(this.selectedSeconds, 10));\n        }\n        if (((this.showHoursList && this.selectedHour !== '12') || (!this.showHoursList && this.selectedHour <= '11')) &&\n            this.selectedAmPm === 'PM') {\n            date.setHours(date.getHours() + 12);\n        }\n        if (!this.showHoursList && this.selectedAmPm === 'AM' && this.selectedHour > '11') {\n            date.setHours(date.getHours() - 12);\n        }\n        if (this.selectedAmPm === 'AM' && this.selectedHour === '12') {\n            date.setHours(0);\n        }\n        return date;\n    }\n\n    /** @hidden @internal */\n    public convertMinMaxValue(value: string): Date {\n        if (!value) {\n            return;\n        }\n        const date = this.value ? new Date(this.value) : this._dateFromModel ? new Date(this._dateFromModel) : new Date();\n        const sections = value.split(/[\\s:]+/);\n        let hour, minutes, seconds, amPM;\n\n        date.setSeconds(0);\n\n        if (this.showHoursList) {\n            hour = sections[0];\n            date.setHours(parseInt(hour, 10));\n        }\n\n        if (this.showMinutesList) {\n            minutes = this.showHoursList ? sections[1] : sections[0];\n            date.setMinutes(parseInt(minutes, 10));\n        }\n\n        if (this.showSecondsList) {\n            seconds = sections[sections.length - (this.showAmPmList ? 2 : 1)];\n            date.setSeconds(parseInt(seconds, 10));\n        }\n\n        if (this.showAmPmList) {\n            amPM = sections[sections.length - 1].toUpperCase();\n\n            if (((this.showHoursList && date.getHours().toString() !== '12') ||\n                (!this.showHoursList && date.getHours().toString() <= '11')) && amPM === 'PM') {\n                date.setHours(date.getHours() + 12);\n            }\n\n            if (!this.showHoursList && amPM === 'AM' && date.getHours().toString() > '11') {\n                date.setHours(date.getHours() - 12);\n            }\n\n            if (this.showHoursList && date.getHours() === 12 && amPM === 'AM') {\n                date.setHours(0);\n            }\n        }\n\n        return date;\n    }\n\n    private _isValueValid(value: Date): boolean {\n        if (this.maxValue && value > this.convertMinMaxValue(this.maxValue)) {\n            return false;\n        } else if (this.minValue && value < this.convertMinMaxValue(this.minValue)) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    private _isEntryValid(val: string): boolean {\n        let validH = true;\n        let validM = true;\n        let validS = true;\n\n        const sections = val.split(/[\\s:]+/);\n        const re = new RegExp(this.promptChar, 'g');\n\n        if (this.showHoursList) {\n            validH = this.validHourEntries.indexOf(parseInt(sections[0].replace(re, ''), 10)) !== -1;\n        }\n\n        if (this.showMinutesList) {\n            const minutes = this.showHoursList ? sections[1] : sections[0];\n            validM = this.validMinuteEntries.indexOf(parseInt(minutes.replace(re, ''), 10)) !== -1;\n        }\n\n        if (this.showSecondsList) {\n            const seconds = sections[sections.length - (this.showAmPmList ? 2 : 1)];\n            validS = this.validSecondsEntries.indexOf(parseInt(seconds.replace(re, ''), 10)) !== -1;\n        }\n\n        return validH && validM && validS;\n    }\n\n    private _getCursorPosition(): number {\n        return this._inputElementRef.nativeElement.selectionStart;\n    }\n\n    private _setCursorPosition(start: number, end: number = start): void {\n        this._inputElementRef.nativeElement.setSelectionRange(start, end);\n    }\n\n    private _updateEditableInput(): void {\n        if (this.mode === InteractionMode.DropDown) {\n            this.displayValue = this._formatTime(this._getSelectedTime(), this.format);\n        }\n    }\n\n    private _spinHours(currentVal: Date, minVal: Date, maxVal: Date, hDelta: number, sign: number): Date {\n        const oldVal = new Date(currentVal);\n\n        currentVal.setMinutes(sign * hDelta);\n        if (currentVal.getDate() !== oldVal.getDate() && this.isSpinLoop) {\n            currentVal.setDate(oldVal.getDate());\n        }\n\n        let minutes = currentVal.getMinutes();\n        if (currentVal.getTime() > maxVal.getTime()) {\n            if (this.isSpinLoop) {\n                minutes = minutes < minVal.getMinutes() ? 60 + minutes : minutes;\n                minVal.setMinutes(sign * minutes);\n                return minVal;\n            } else {\n                return oldVal;\n            }\n        } else if (currentVal.getTime() < minVal.getTime()) {\n            if (this.isSpinLoop) {\n                minutes = minutes <= maxVal.getMinutes() ? minutes : minutes - 60;\n                maxVal.setMinutes(minutes);\n                return maxVal;\n            } else {\n                return oldVal;\n            }\n        } else {\n            return currentVal;\n        }\n    }\n\n    private _spinMinutes(currentVal: Date, mDelta: number, sign: number) {\n        let minutes = currentVal.getMinutes() + (sign * mDelta);\n\n        if (minutes < 0 || minutes >= 60) {\n            minutes = this.isSpinLoop ? minutes - (sign * 60) : currentVal.getMinutes();\n        }\n\n        currentVal.setMinutes(minutes);\n        return currentVal;\n    }\n\n    private _spinSeconds(currentVal: Date, sDelta: number, sign: number) {\n        let seconds = currentVal.getSeconds() + (sign * sDelta);\n\n        if (seconds < 0 || seconds >= 60) {\n            seconds = this.isSpinLoop ? seconds - (sign * 60) : currentVal.getSeconds();\n        }\n\n        currentVal.setSeconds(seconds);\n        return currentVal;\n    }\n\n    private _initializeContainer() {\n        if (this.value) {\n            const formttedTime = this._formatTime(this.value, this.format);\n            const sections = formttedTime.split(/[\\s:]+/);\n\n            if (this.showHoursList) {\n                this.selectedHour = sections[0];\n            }\n\n            if (this.showMinutesList) {\n                this.selectedMinute = this.showHoursList ? sections[1] : sections[0];\n            }\n\n            if (this.showSecondsList) {\n                this.selectedSeconds = sections[sections.length - (this.showAmPmList ? 2 : 1)];\n            }\n\n            if (this.showAmPmList && this._ampmItems !== null) {\n                this.selectedAmPm = sections[sections.length - 1];\n            }\n        }\n\n        if (this.selectedHour === undefined) {\n            this.selectedHour = !this.showHoursList && this.value ? this.value.getHours().toString() :\n                this.showHoursList ? `${this._hourItems[3]}` : '0';\n        }\n        if (this.selectedMinute === undefined) {\n            this.selectedMinute = !this.showMinutesList && this.value ? this.value.getMinutes().toString() : '0';\n        }\n        if (this.selectedSeconds === undefined) {\n            this.selectedSeconds = !this.showSecondsList && this.value ? this.value.getSeconds().toString() : '0';\n        }\n        if (this.selectedAmPm === undefined && this._ampmItems !== null) {\n            this.selectedAmPm = this._ampmItems[3];\n        }\n\n        this._prevSelectedHour = this.selectedHour;\n        this._prevSelectedMinute = this.selectedMinute;\n        this._prevSelectedSeconds = this.selectedSeconds;\n        this._prevSelectedAmPm = this.selectedAmPm;\n\n        this._onTouchedCallback();\n\n        this._updateHourView(0, ITEMS_COUNT);\n        this._updateMinuteView(0, ITEMS_COUNT);\n        this._updateSecondsView(0, ITEMS_COUNT);\n        this._updateAmPmView(0, ITEMS_COUNT);\n\n        if (this.selectedHour) {\n            this.scrollHourIntoView(this.selectedHour);\n        }\n        if (this.selectedMinute) {\n            this.scrollMinuteIntoView(this.selectedMinute);\n        }\n        if (this.selectedSeconds) {\n            this.scrollSecondsIntoView(this.selectedSeconds);\n        }\n        if (this.selectedAmPm) {\n            this.scrollAmPmIntoView(this.selectedAmPm);\n        }\n\n        requestAnimationFrame(() => {\n            if (this.hourList) {\n                this.hourList.nativeElement.focus();\n            } else if (this.minuteList) {\n                this.minuteList.nativeElement.focus();\n            } else if (this.secondsList) {\n                this.secondsList.nativeElement.focus();\n            }\n        });\n    }\n\n    private _onDropDownClosed(): void {\n        const oldValue = this.value;\n        const newVal = this.convertMinMaxValue(this.displayValue);\n\n        if (this.displayValue === this.parseMask(false)) {\n            return;\n        }\n\n        if (this._isValueValid(newVal)) {\n            if (!this.value || oldValue.getTime() !== newVal.getTime()) {\n                this.value = newVal;\n            }\n        } else {\n            this.displayValue = this.inputFormat.transform(this._formatTime(oldValue, this.format));\n\n            const args: IgxTimePickerValidationFailedEventArgs = {\n                timePicker: this,\n                currentValue: newVal,\n                setThroughUI: true\n            };\n            this.onValidationFailed.emit(args);\n        }\n    }\n\n    protected onStatusChanged() {\n        if ((this._ngControl.control.touched || this._ngControl.control.dirty) &&\n            (this._ngControl.control.validator || this._ngControl.control.asyncValidator)) {\n            const input = this._inputDirective || this._inputDirectiveUserTemplate;\n            if (this._inputGroup.isFocused) {\n                input.valid = this._ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n            } else {\n                input.valid = this._ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n            }\n        }\n\n        if (this._inputGroup && this._inputGroup.isRequired !== this.required) {\n            this._inputGroup.isRequired = this.required;\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    getEditElement() {\n        return this._inputElementRef ? this._inputElementRef.nativeElement : null;\n    }\n\n    /**\n     * @hidden\n     */\n    public getInputGroupElement() {\n        return this._inputGroup ? this._inputGroup.element.nativeElement : null;\n    }\n\n\n    /**\n     * opens the dialog.\n     * @param target HTMLElement - the target element to use for positioning the drop down container according to\n     * ```html\n     * <igx-time-picker [value]=\"date\" mode=\"dropdown\" #retemplated>\n     *   <ng-template igxTimePickerTemplate let-openDialog=\"openDialog\"\n     *                let-displayTime=\"displayTime\">\n     *     <igx-input-group>\n     *       <input #dropDownTarget igxInput [value]=\"displayTime\" />\n     *       <igx-suffix (click)=\"openDialog(dropDownTarget)\">\n     *         <igx-icon>alarm</igx-icon>\n     *       </igx-suffix>\n     *     </igx-input-group>\n     *   </ng-template>\n     * </igx-time-picker>\n     * ```\n     */\n    public openDialog(target?: HTMLElement): void {\n        if (!this.toggleRef.collapsed) {\n            return this._onDropDownClosed();\n        }\n        const settings = this.overlaySettings;\n\n        if (target && settings && settings.positionStrategy) {\n            settings.target = target;\n        }\n        if (this.outlet) {\n            settings.outlet = this.outlet;\n        }\n\n        this.toggleRef.open(settings);\n        this._initializeContainer();\n    }\n\n    /**\n     * Scrolls a hour item into view.\n     * ```typescript\n     * scrhintoView(picker) {\n     * picker.scrollHourIntoView('2');\n     * }\n     *  ```\n     * ```html\n     * <igx-time-picker #picker format=\"h:mm tt\" (onOpened)=\"scrhintoView(picker)\"></igx-time-picker>\n     * ```\n     * @param item to be scrolled in view.\n     */\n    public scrollHourIntoView(item: string): void {\n        if (this.showHoursList) {\n            const hourIntoView = this._scrollItemIntoView(item, this._hourItems, this.selectedHour, this._isHourListLoop, 'hour');\n            if (hourIntoView) {\n                this._hourView = hourIntoView.view;\n                this.selectedHour = hourIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * Scrolls a minute item into view.\n     * ```typescript\n     * scrMintoView(picker) {\n     * picker.scrollMinuteIntoView('3');\n     * }\n     *  ```\n     * ```html\n     * <igx-time-picker #picker format=\"h:mm tt\" (onOpened)=\"scrMintoView(picker)\"></igx-time-picker>\n     * ```\n     * @param item to be scrolled in view.\n     */\n    public scrollMinuteIntoView(item: string): void {\n        if (this.showMinutesList) {\n            const minuteIntoView = this._scrollItemIntoView(item, this._minuteItems, this.selectedMinute, this._isMinuteListLoop, 'minute');\n            if (minuteIntoView) {\n                this._minuteView = minuteIntoView.view;\n                this.selectedMinute = minuteIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * Scrolls a seconds item into view.\n     * ```typescript\n     * scrMintoView(picker) {\n     * picker.scrollSecondsIntoView('4');\n     * }\n     *  ```\n     * ```html\n     * <igx-time-picker #picker format=\"h:mm tt\" (onOpened)=\"scrMintoView(picker)\"></igx-time-picker>\n     * ```\n     * @param item to be scrolled in view.\n     */\n    public scrollSecondsIntoView(item: string): void {\n        if (this.showSecondsList) {\n            const secondsIntoView = this._scrollItemIntoView(item,\n                this._secondsItems, this.selectedSeconds, this._isSecondsListLoop, 'seconds');\n            if (secondsIntoView) {\n                this._secondsView = secondsIntoView.view;\n                this.selectedSeconds = secondsIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * Scrolls an ampm item into view.\n     * ```typescript\n     * scrAmPmIntoView(picker) {\n     * picker.scrollAmPmIntoView('PM');\n     * }\n     *  ```\n     * ```html\n     * <igx-time-picker #picker format=\"h:mm tt\" (onOpened)=\"scrAmPmIntoView(picker)\"></igx-time-picker>\n     * ```\n     * @param item to be scrolled in view.\n     */\n    public scrollAmPmIntoView(item: string): void {\n        if (this.showAmPmList) {\n            const ampmIntoView = this._scrollItemIntoView(item, this._ampmItems, this.selectedAmPm, false, null);\n            if (ampmIntoView) {\n                this._ampmView = ampmIntoView.view;\n                this.selectedAmPm = ampmIntoView.selectedItem;\n                this._updateEditableInput();\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public nextHour() {\n        const nextHour = this._nextItem(this._hourItems, this.selectedHour, this._isHourListLoop, 'hour');\n        this._hourView = nextHour.view;\n        this.selectedHour = nextHour.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public prevHour() {\n        const prevHour = this._prevItem(this._hourItems, this.selectedHour, this._isHourListLoop, 'hour');\n        this._hourView = prevHour.view;\n        this.selectedHour = prevHour.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public nextMinute() {\n        const nextMinute = this._nextItem(this._minuteItems, this.selectedMinute, this._isMinuteListLoop, 'minute');\n        this._minuteView = nextMinute.view;\n        this.selectedMinute = nextMinute.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public prevMinute() {\n        const prevMinute = this._prevItem(this._minuteItems, this.selectedMinute, this._isMinuteListLoop, 'minute');\n        this._minuteView = prevMinute.view;\n        this.selectedMinute = prevMinute.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public nextSeconds() {\n        const nextSeconds = this._nextItem(this._secondsItems, this.selectedSeconds, this._isSecondsListLoop, 'seconds');\n        this._secondsView = nextSeconds.view;\n        this.selectedSeconds = nextSeconds.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public prevSeconds() {\n        const prevSeconds = this._prevItem(this._secondsItems, this.selectedSeconds, this._isSecondsListLoop, 'seconds');\n        this._secondsView = prevSeconds.view;\n        this.selectedSeconds = prevSeconds.selectedItem;\n\n        this._updateEditableInput();\n    }\n\n    /**\n     * @hidden\n     */\n    public nextAmPm() {\n        const selectedIndex = this._ampmItems.indexOf(this.selectedAmPm);\n\n        if (selectedIndex + 1 < this._ampmItems.length - 3) {\n            this._updateAmPmView(selectedIndex - 2, selectedIndex + 5);\n            this.selectedAmPm = this._ampmItems[selectedIndex + 1];\n\n            this._updateEditableInput();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public prevAmPm() {\n        const selectedIndex = this._ampmItems.indexOf(this.selectedAmPm);\n\n        if (selectedIndex > 3) {\n            this._updateAmPmView(selectedIndex - 4, selectedIndex + 3);\n            this.selectedAmPm = this._ampmItems[selectedIndex - 1];\n\n            this._updateEditableInput();\n        }\n    }\n\n    /**\n     * If current value is valid selects it, closes the dialog and returns true, otherwise returns false.\n     * ```html\n     * <igx-dialog class=\"igx-time-picker__dialog-popup\" [rightButtonLabel]=\"okButtonLabel\" (onRightButtonSelect)=\"okButtonClick()\">\n     * //..\n     * </igx-dialog>\n     * ```\n     */\n    public okButtonClick(): boolean {\n        const time = this._getSelectedTime();\n        if (this._isValueValid(time)) {\n            this.close();\n            this.value = time;\n            return true;\n        } else {\n            const args: IgxTimePickerValidationFailedEventArgs = {\n                timePicker: this,\n                currentValue: time,\n                setThroughUI: true\n            };\n            this.onValidationFailed.emit(args);\n            return false;\n        }\n    }\n\n    /**\n     * Closes the dialog without selecting the current value.\n     * ```html\n     * <igx-dialog class=\"igx-time-picker__dialog-popup\" [leftButtonLabel]=\"cancelButtonLabel\" (onLeftButtonSelect)=\"cancelButtonClick()\">\n     * //...\n     * </igx-dialog>\n     * ```\n     */\n    public cancelButtonClick(): void {\n        if (this.mode === InteractionMode.DropDown) {\n            this.displayValue = this.value ? this._formatTime(this.value, this.format) : this.parseMask(false);\n        }\n\n        this.close();\n\n        this.selectedHour = this._prevSelectedHour;\n        this.selectedMinute = this._prevSelectedMinute;\n        this.selectedSeconds = this._prevSelectedSeconds;\n        this.selectedAmPm = this._prevSelectedAmPm;\n    }\n\n    /**\n     * Returns an array of the hours currently in view.\n     * ```html\n     *  @ViewChild(\"MyChild\")\n     * private picker: IgxTimePickerComponent;\n     * ngAfterViewInit(){\n     *     let hInView = this.picker.hoursInView;\n     * }\n     * ```\n     */\n    public hoursInView(): string[] {\n        return this._hourView.filter((hour) => hour !== '');\n    }\n\n    /**\n     * Returns an array of the minutes currently in view.\n     * ```html\n     *  @ViewChild(\"MyChild\")\n     * private picker: IgxTimePickerComponent;\n     * ngAfterViewInit(){\n     *     let minInView = this.picker.minutesInView;\n     * }\n     * ```\n     */\n    public minutesInView(): string[] {\n        return this._minuteView.filter((minute) => minute !== '');\n    }\n\n    /**\n     * Returns an array of the seconds currently in view.\n     * ```html\n     *  @ViewChild(\"MyChild\")\n     * private picker: IgxTimePickerComponent;\n     * ngAfterViewInit(){\n     *     let minInView = this.picker.secondsInView;\n     * }\n     * ```\n     */\n    public secondsInView(): string[] {\n        return this._secondsView.filter((seconds) => seconds !== '');\n    }\n\n    /**\n     * Returns an array of the AM/PM currently in view.\n     * ```html\n     *  @ViewChild(\"MyChild\")\n     * private picker: IgxTimePickerComponent;\n     * ngAfterViewInit(){\n     *     let ApInView = this.picker.ampmInView;\n     * }\n     * ```\n     */\n    public ampmInView(): string[] {\n        return this._ampmView.filter((ampm) => ampm !== '');\n    }\n\n    /**\n     * Closes the dropdown/dialog.\n     * ```html\n     * <igx-time-picker #timePicker></igx-time-picker>\n     * ```\n     * ```typescript\n     * @ViewChild('timePicker', { read: IgxTimePickerComponent }) picker: IgxTimePickerComponent;\n     * picker.close();\n     * ```\n     */\n    public close(): void {\n        this.toggleRef.close();\n    }\n\n    /**\n     * @hidden\n     */\n    public parseMask(preserveAmPm = true): string {\n        const maskWithAmPm = this.mask.replace(new RegExp('0', 'g'), this.promptChar).replace('LL', 'AM');\n        const pureMask = this.mask.replace(new RegExp('0', 'g'), this.promptChar).replace(new RegExp('L', 'g'), this.promptChar);\n\n        return preserveAmPm ? maskWithAmPm : pureMask;\n    }\n\n    /**\n     * @hidden\n     */\n    public clear(): void {\n        if (this.toggleRef.collapsed) {\n            this.cleared = true;\n            this.isNotEmpty = false;\n\n            const oldVal = new Date(this.value);\n            this.displayValue = this.parseMask(false);\n            requestAnimationFrame(() => {\n                this._setCursorPosition(0);\n            });\n            // TODO: refactoring - this.value should be null #6585\n            this.value?.setHours(0, 0, 0);\n\n            if (oldVal.getTime() !== this.value?.getTime() || this.isReset()) {\n                const args: IgxTimePickerValueChangedEventArgs = {\n                    oldValue: oldVal,\n                    newValue: this.value\n                };\n                this.onValueChanged.emit(args);\n            }\n        } else {\n            this.close();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onInput(event): void {\n        const inputMask: string = event.target.value;\n        const oldVal = new Date(this.value);\n\n        this.isNotEmpty = inputMask !== this.parseMask(false);\n\n        // handle cases where all empty positions (promts) are filled and we want to update\n        // timepicker own value property if it is a valid Date\n        if (inputMask.indexOf(this.promptChar) === -1) {\n            if (this._isEntryValid(inputMask)) {\n                const newVal = this.convertMinMaxValue(inputMask);\n                if (oldVal.getTime() !== newVal.getTime()) {\n                    this.value = newVal;\n                }\n            } else {\n                const args: IgxTimePickerValidationFailedEventArgs = {\n                    timePicker: this,\n                    currentValue: new Date(inputMask),\n                    setThroughUI: false\n                };\n                this.onValidationFailed.emit(args);\n            }\n            // handle cases where the user deletes the display value (when pressing backspace or delete)\n        } else if (!this.value || inputMask.length === 0 || !this.isNotEmpty) {\n            this.isNotEmpty = false;\n            // TODO: refactoring - this.value should be null #6585\n            this.value?.setHours(0, 0, 0);\n            this.displayValue = inputMask;\n            if (oldVal.getTime() !== this.value?.getTime() || this.isReset()) {\n                // TODO: Do not emit event when the editor is empty #6482\n                const args: IgxTimePickerValueChangedEventArgs = {\n                    oldValue: oldVal,\n                    newValue: this.value\n                };\n                this.onValueChanged.emit(args);\n            }\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public onFocus(event): void {\n        this.isNotEmpty = event.target.value !== this.parseMask(false);\n    }\n\n    /**\n     * @hidden\n     */\n    public onBlur(event): void {\n        if (this.mode === InteractionMode.DropDown) {\n            const value = event.target.value;\n\n            this.isNotEmpty = value !== '';\n            this.displayValue = value;\n\n            if (value && (value !== this.parseMask() || value !== this.parseMask(false))) {\n                if (this._isEntryValid(value)) {\n                    const newVal = this.convertMinMaxValue(value);\n                    if (!this.value || this.value.getTime() !== newVal.getTime()) {\n                        this.value = newVal;\n                    }\n                } else {\n                    const args: IgxTimePickerValidationFailedEventArgs = {\n                        timePicker: this,\n                        currentValue: value,\n                        setThroughUI: false\n                    };\n                    this.onValidationFailed.emit(args);\n                }\n            }\n        }\n\n        if (this.toggleRef.collapsed) {\n            this._updateValidityOnBlur();\n        }\n    }\n\n    public mouseDown(event: MouseEvent): void {\n        // if the click is not on the input but in input group\n        // e.g. on prefix or suffix, prevent default and this way prevent blur\n        if (event.target !== this.getEditElement()) {\n            event.preventDefault();\n        }\n    }\n\n    /**\n     * @hidden\n     */\n    public spinOnEdit(event): void {\n        event.preventDefault();\n\n        let sign: number;\n        let displayVal: string;\n        const currentVal = new Date(this.value);\n        const min = this.minValue ? this.convertMinMaxValue(this.minValue) : this.convertMinMaxValue('00:00');\n        const max = this.maxValue ? this.convertMinMaxValue(this.maxValue) : this.convertMinMaxValue('24:00');\n\n        const cursor = this._getCursorPosition();\n\n        if (event.key) {\n            const key = event.key;\n            sign = key === KEYS.DOWN_ARROW || key === KEYS.DOWN_ARROW_IE ? -1 : 1;\n        }\n\n        if (event.deltaY) {\n            sign = event.deltaY < 0 ? 1 : -1;\n        }\n\n        if (!this.displayValue) {\n            this.value = min;\n            displayVal = this._formatTime(this.value, this.format);\n        } else {\n            const hDelta = this.itemsDelta.hours * 60 + (sign * this.value.getMinutes());\n            const mDelta = this.itemsDelta.minutes;\n            const sDelta = this.itemsDelta.seconds;\n\n            if (this.cursorOnHours(cursor, this.showHoursList)) {\n                this.value = this._spinHours(currentVal, min, max, hDelta, sign);\n            }\n            if (this.cursorOnMinutes(cursor, this.showHoursList, this.showMinutesList)) {\n                this.value = this._spinMinutes(currentVal, mDelta, sign);\n            }\n            if (this.cursorOnSeconds(cursor, this.showHoursList, this.showMinutesList, this.showSecondsList)) {\n                this.value = this._spinSeconds(currentVal, sDelta, sign);\n            }\n            if (this.cursorOnAmPm(cursor, this.showHoursList, this.showMinutesList, this.showSecondsList, this.showAmPmList)) {\n                const sections = this.displayValue.split(/[\\s:]+/);\n                sign = sections[sections.length - 1] === 'AM' ? 1 : -1;\n                currentVal.setHours(currentVal.getHours() + (sign * 12));\n\n                this.value = currentVal;\n            }\n\n            displayVal = this._formatTime(this.value, this.format);\n        }\n\n        // minor hack for preventing cursor jumping in IE\n        this._displayValue = this.inputFormat.transform(displayVal);\n        this._inputElementRef.nativeElement.value = this._displayValue;\n        this._setCursorPosition(cursor);\n\n        requestAnimationFrame(() => {\n            this._setCursorPosition(cursor);\n        });\n    }\n\n    private cursorOnHours(cursor: number, showHours: boolean): boolean {\n        return showHours && this._hoursPos.has(cursor);\n    }\n\n    private cursorOnMinutes(cursor: number, showHours: boolean, showMinutes: boolean): boolean {\n        return showMinutes &&\n            (showHours && this._minutesPos.has(cursor)) ||\n            (!showHours && this._minutesPos.has(cursor));\n    }\n\n    private cursorOnSeconds(cursor: number, showHours: boolean, showMinutes: boolean, showSeconds: boolean): boolean {\n        return showSeconds &&\n            (showHours && showMinutes && this._secondsPos.has(cursor)) ||\n            ((!showHours || !showMinutes) && this._secondsPos.has(cursor)) ||\n            (!showHours && !showMinutes && this._secondsPos.has(cursor));\n    }\n\n    private cursorOnAmPm(cursor: number, showHours: boolean, showMinutes: boolean,\n        showSeconds: boolean, showAmPm: boolean): boolean {\n        return showAmPm &&\n            (showHours && showMinutes && showSeconds && this._amPmPos.has(cursor)) ||\n            ((!showHours || !showMinutes || !showSeconds) && this._amPmPos.has(cursor)) ||\n            (!showHours && (!showMinutes || !showSeconds) && this._amPmPos.has(cursor));\n    }\n\n    private _updateValidityOnBlur() {\n        this._onTouchedCallback();\n        const input = this._inputDirective || this._inputDirectiveUserTemplate;\n        if (this._ngControl && !this._ngControl.valid) {\n            input.valid = IgxInputState.INVALID;\n        } else {\n            input.valid = IgxInputState.INITIAL;\n        }\n    }\n\n    // Workaround method for #8135\n    // TODO: It must be removed in #6482\n    private isReset(): boolean {\n        return this.value?.getHours() === 0\n            && this.value?.getMinutes() === 0\n            && this.value?.getSeconds() === 0;\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxTimePickerComponent,\n        IgxHourItemDirective,\n        IgxMinuteItemDirective,\n        IgxSecondsItemDirective,\n        IgxItemListDirective,\n        IgxAmPmItemDirective,\n        IgxTimePickerTemplateDirective,\n        IgxTimePickerActionsDirective,\n        TimeDisplayFormatPipe,\n        TimeInputFormatPipe\n    ],\n    exports: [\n        IgxTimePickerComponent,\n        IgxTimePickerTemplateDirective,\n        IgxTimePickerActionsDirective,\n        TimeDisplayFormatPipe,\n        TimeInputFormatPipe,\n        IgxInputGroupModule\n    ],\n    imports: [\n        CommonModule,\n        IgxInputGroupModule,\n        IgxIconModule,\n        IgxButtonModule,\n        IgxMaskModule,\n        IgxToggleModule,\n        IgxTextSelectionModule\n    ],\n    providers: []\n})\nexport class IgxTimePickerModule { }\n","import { CommonModule } from '@angular/common';\nimport { DeprecateProperty } from '../core/deprecateDecorators';\nimport {\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    NgModule,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n} from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IgxNavigationService, IToggleView } from '../core/navigation';\nimport { IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { IgxOverlayOutletDirective } from '../directives/toggle/toggle.directive';\nimport {\n    OverlaySettings,\n    IgxOverlayService,\n    HorizontalAlignment,\n    VerticalAlignment,\n    GlobalPositionStrategy,\n} from '../services/public_api';\nimport { mkenum } from '../core/utils';\n\nlet NEXT_ID = 0;\n\n/**\n * Enumeration for toast position\n * Can be:\n * Bottom\n * Middle\n * Top\n */\nexport const IgxToastPosition = mkenum({\n    Bottom: 'bottom',\n    Middle: 'middle',\n    Top: 'top'\n});\n\nexport type IgxToastPosition = (typeof IgxToastPosition)[keyof typeof IgxToastPosition];\n\n/**\n * **Ignite UI for Angular Toast** -\n * [Documentation](https://www.infragistics.com/products/ignite-ui-angular/angular/components/toast)\n *\n * The Ignite UI Toast provides information and warning messages that are non-interactive and cannot\n * be dismissed by the user. Toasts can be displayed at the bottom, middle, or top of the page.\n *\n * Example:\n * ```html\n * <button (click)=\"toast.show()\">Show notification</button>\n * <igx-toast #toast\n *           message=\"Notification displayed\"\n *           displayTime=\"1000\">\n * </igx-toast>\n * ```\n */\n@Component({\n    selector: 'igx-toast',\n    templateUrl: 'toast.component.html',\n})\nexport class IgxToastComponent extends IgxToggleDirective\n    implements IToggleView, OnInit, OnDestroy {\n    private d$ = new Subject<boolean>();\n    private _isVisible = false;\n\n    /**\n     * @hidden\n     */\n    @HostBinding('class.igx-toast')\n    public cssClass = 'igx-toast';\n\n    /**\n     * Sets/gets the `id` of the toast.\n     * If not set, the `id` will have value `\"igx-toast-0\"`.\n     * ```html\n     * <igx-toast id = \"my-first-toast\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastId = this.toast.id;\n     * ```\n     */\n    @HostBinding('attr.id')\n    @Input()\n    public id = `igx-toast-${NEXT_ID++}`;\n\n    /**\n     * Emits an event prior the toast is shown.\n     * Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onShowing) = \"onShowing($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onShowing = new EventEmitter<IgxToastComponent>();\n\n    /**\n     * Emits an event when the toast is shown.\n     * Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onShown)=\"onShown($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onShown = new EventEmitter<IgxToastComponent>();\n\n    /**\n     * Emits an event prior the toast is hidden.\n     * Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onHiding)=\"onHiding($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onHiding = new EventEmitter<IgxToastComponent>();\n\n    /**\n     *  Emits an event when the toast is hidden.\n     *  Provides reference to the `IgxToastComponent` as event argument.\n     * ```html\n     * <igx-toast (onHidden)=\"onHidden($event)\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Output()\n    public onHidden = new EventEmitter<IgxToastComponent>();\n\n    /**\n     * Sets/gets the `role` attribute.\n     * If not set, `role` will have value `\"alert\"`.\n     * ```html\n     * <igx-toast [role] = \"'notify'\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastRole = this.toast.role;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public role = 'alert';\n\n    /**\n     * Sets/gets whether the toast will be hidden after the `displayTime` is over.\n     * Default value is `true`.\n     * ```html\n     * <igx-toast [autoHide] = \"false\"></igx-toast>\n     * ```\n     * ```typescript\n     * let autoHide = this.toast.autoHide;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public autoHide = true;\n\n    /**\n     * Sets/gets the duration of time span(in milliseconds) which the toast will be visible\n     * after it is being shown.\n     * Default value is `4000`.\n     * ```html\n     * <igx-toast [displayTime] = \"2500\"></igx-toast>\n     * ```\n     * ```typescript\n     * let displayTime = this.toast.displayTime;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public displayTime = 4000;\n\n    /**\n     * Gets/Sets the container used for the toast element.\n     * @remarks\n     *  `outlet` is an instance of `IgxOverlayOutletDirective` or an `ElementRef`.\n     * @example\n     * ```html\n     * <div igxOverlayOutlet #outlet=\"overlay-outlet\"></div>\n     * //..\n     * <igx-toast [outlet]=\"outlet\"></igx-toast>\n     * //..\n     * ```\n     */\n    @Input()\n    public outlet: IgxOverlayOutletDirective | ElementRef;\n\n    /**\n     * Enables/Disables the visibility of the toast.\n     * If not set, the `isVisible` attribute will have value `false`.\n     * ```html\n     * <igx-toast [isVisible]=\"true\"></igx-toast>\n     * ```\n     * ```typescript\n     * let isVisible = this.toast.isVisible;\n     * ```\n     *\n     * Two-way data binding.\n     * ```html\n     * <igx-toast [(isVisible)]=\"model.isVisible\"></igx-toast>\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public get isVisible() {\n        return this._isVisible;\n    }\n\n    public set isVisible(value) {\n        this._isVisible = value;\n        this.isVisibleChange.emit(this._isVisible);\n    }\n\n    /**\n     * @hidden\n     */\n    @Output()\n    public isVisibleChange = new EventEmitter<boolean>();\n\n    /**\n     * @deprecated Place your message in the toast content instead.\n     * Sets/gets the message that will be shown by the toast.\n     * ```html\n     * <igx-toast [message] = \"Notification\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastMessage = this.toast.message;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @DeprecateProperty(`'message' property is deprecated.\n    You can use place the message in the toast content or pass it as parameter to the show method instead.`)\n    @Input()\n    public set message(value: string) {\n        this.toastMessage = value;\n    }\n\n    public get message() {\n        return this.toastMessage;\n    }\n\n    /**\n     * Sets/gets the position of the toast.\n     * If not set, the `position` attribute will have value `IgxToastPosition.Bottom`.\n     * ```html\n     * <igx-toast [position]=\"top\"></igx-toast>\n     * ```\n     * ```typescript\n     * let toastPosition = this.toast.position;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    @Input()\n    public position: IgxToastPosition = 'bottom';\n\n    /**\n     * Gets the nativeElement of the toast.\n     * ```typescript\n     * let nativeElement = this.toast.element;\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public get element() {\n        return this._element.nativeElement;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    toastMessage = '';\n\n    /**\n     * @hidden\n     */\n    private timeoutId: number;\n\n    constructor(\n        private _element: ElementRef,\n        cdr: ChangeDetectorRef,\n        @Optional() navService: IgxNavigationService,\n        @Inject(IgxOverlayService) overlayService: IgxOverlayService\n    ) {\n        super(_element, cdr, overlayService, navService);\n    }\n\n    /**\n     * Shows the toast.\n     * If `autoHide` is enabled, the toast will hide after `displayTime` is over.\n     * ```typescript\n     * this.toast.show();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public show(message?: string): void {\n        clearInterval(this.timeoutId);\n\n        const overlaySettings: OverlaySettings = {\n            positionStrategy: new GlobalPositionStrategy({\n                horizontalDirection: HorizontalAlignment.Center,\n                verticalDirection:\n                    this.position === 'bottom'\n                        ? VerticalAlignment.Bottom\n                        : this.position === 'middle'\n                        ? VerticalAlignment.Middle\n                        : VerticalAlignment.Top,\n            }),\n            closeOnEscape: false,\n            closeOnOutsideClick: false,\n            modal: false,\n            outlet: this.outlet,\n        };\n\n        if (message !== undefined) {\n            this.toastMessage = message;\n        }\n\n        this.onShowing.emit(this);\n        super.open(overlaySettings);\n\n        if (this.autoHide) {\n            this.timeoutId = window.setTimeout(() => {\n                this.hide();\n            }, this.displayTime);\n        }\n    }\n\n    /**\n     * Hides the toast.\n     * ```typescript\n     * this.toast.hide();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public hide(): void {\n        clearInterval(this.timeoutId);\n        this.onHiding.emit(this);\n        super.close();\n    }\n\n    /**\n     * Wraps @show() method due @IToggleView interface implementation.\n     * @hidden\n     */\n    public open() {\n        this.show();\n    }\n\n    /**\n     * Wraps @hide() method due @IToggleView interface implementation.\n     * @hidden\n     */\n    public close() {\n        this.hide();\n    }\n\n    /**\n     * Toggles the visible state of the toast.\n     * ```typescript\n     * this.toast.toggle();\n     * ```\n     * @memberof IgxToastComponent\n     */\n    public toggle() {\n        super.toggle();\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnInit() {\n        this.onOpened.pipe(takeUntil(this.d$)).subscribe(() => {\n            this.onShown.emit(this);\n            this.isVisible = true;\n        });\n\n        this.onClosed.pipe(takeUntil(this.d$)).subscribe(() => {\n            this.onHidden.emit(this);\n            this.isVisible = false;\n        });\n    }\n\n    /**\n     * @hidden\n     */\n    ngOnDestroy() {\n        this.d$.next(true);\n        this.d$.complete();\n    }\n}\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [IgxToastComponent],\n    exports: [IgxToastComponent],\n    imports: [CommonModule],\n})\nexport class IgxToastModule {}\n","import { Component, QueryList, Input, ContentChildren, AfterContentInit, HostBinding, Output, EventEmitter, Inject, ElementRef } from '@angular/core';\nimport { IgxSplitterPaneComponent } from './splitter-pane/splitter-pane.component';\nimport { DOCUMENT } from '@angular/common';\n\n/**\n * An enumeration that defines the `SplitterComponent` panes orientation.\n */\nexport enum SplitterType {\n    Horizontal,\n    Vertical\n}\n\n/**\n * Provides a framework for a simple layout, splitting the view horizontally or vertically\n * into multiple smaller resizable and collapsible areas.\n * @igxModule IgxSplitterModule\n *\n * @igxParent Layouts\n *\n * @igxTheme igx-splitter-theme\n *\n * @igxKeywords splitter panes layout\n *\n * @igxGroup presentation\n *\n * @example\n * ```html\n * <igx-splitter>\n *  <igx-splitter-pane>\n *      ...\n *  </igx-splitter-pane>\n *  <igx-splitter-pane>\n *      ...\n *  </igx-splitter-pane>\n * </igx-splitter>\n * ```\n */\n@Component({\n    selector: 'igx-splitter',\n    templateUrl: './splitter.component.html'\n})\nexport class IgxSplitterComponent implements AfterContentInit {\n    private _type: SplitterType = SplitterType.Horizontal;\n\n    constructor(@Inject(DOCUMENT) public document, private elementRef: ElementRef) {}\n    /**\n     * Gets/Sets the splitter orientation.\n     * @example\n     * ```html\n     * <igx-splitter [type]=\"type\">...</igx-splitter>\n     * ```\n     */\n    @Input()\n    get type() {\n        return this._type;\n    }\n    set type(value) {\n        this._type = value;\n        if (this.panes) {\n            // if type is changed runtime, should reset sizes.\n            this.panes.forEach(x => x.size = 'auto');\n        }\n    }\n\n    /**\n     * Gets the list of splitter panes.\n     * @example\n     * ```typescript\n     * const panes = this.splitter.panes;\n     * ```\n     */\n    @ContentChildren(IgxSplitterPaneComponent, { read: IgxSplitterPaneComponent })\n    public panes!: QueryList<IgxSplitterPaneComponent>;\n\n    /**\n     * @hidden @internal\n     * Gets the `flex-direction` property of the current `SplitterComponent`.\n     */\n    @HostBinding('style.flex-direction')\n    public get direction(): string {\n        return this.type === SplitterType.Horizontal ? 'row' : 'column';\n    }\n\n    /**\n     * @hidden @internal\n     * Gets/Sets the `overflow` property of the current splitter.\n     */\n    @HostBinding('style.overflow')\n    public overflow = 'hidden';\n\n    /**\n     * @hidden @internal\n     * Sets/Gets the `display` property of the current splitter.\n     */\n    @HostBinding('style.display')\n    public display = 'flex';\n\n    /**\n     * @hidden @internal\n     * A field that holds the initial size of the main `IgxSplitterPaneComponent` in each pair of panes divided by a splitter bar.\n     */\n    private initialPaneSize!: number;\n\n    /**\n     * @hidden @internal\n     * A field that holds the initial size of the sibling pane in each pair of panes divided by a gripper.\n     * @memberof SplitterComponent\n     */\n    private initialSiblingSize!: number;\n\n    /**\n     * @hidden @internal\n     * The main pane in each pair of panes divided by a gripper.\n     */\n    private pane!: IgxSplitterPaneComponent;\n\n    /**\n     * The sibling pane in each pair of panes divided by a splitter bar.\n     */\n    private sibling!: IgxSplitterPaneComponent;\n\n    /** @hidden @internal */\n    public ngAfterContentInit(): void {\n        this.panes.forEach(pane => pane.owner = this);\n        this.assignFlexOrder();\n        this.panes.changes.subscribe(() => {\n            this.panes.forEach(pane => pane.owner = this);\n            this.assignFlexOrder();\n        });\n    }\n\n    /**\n     * @hidden @internal\n     * This method performs  initialization logic when the user starts dragging the splitter bar between each pair of panes.\n     * @param pane - the main pane associated with the currently dragged bar.\n     */\n    public onMoveStart(pane: IgxSplitterPaneComponent) {\n        const panes = this.panes.toArray();\n        this.pane = pane;\n        this.sibling = panes[panes.indexOf(this.pane) + 1];\n\n        const paneRect = this.pane.element.getBoundingClientRect();\n        this.initialPaneSize = this.type === SplitterType.Horizontal ? paneRect.width : paneRect.height;\n\n        const siblingRect = this.sibling.element.getBoundingClientRect();\n        this.initialSiblingSize = this.type === SplitterType.Horizontal ? siblingRect.width : siblingRect.height;\n    }\n\n    /**\n     * @hidden @internal\n     * This method performs calculations concerning the sizes of each pair of panes when the bar between them is dragged.\n     * @param delta - The difference along the X (or Y) axis between the initial and the current point when dragging the bar.\n     */\n    public onMoving(delta: number) {\n        const min = parseInt(this.pane.minSize, 10) || 0;\n        const max = parseInt(this.pane.maxSize, 10) || this.initialPaneSize + this.initialSiblingSize;\n        const minSibling = parseInt(this.sibling.minSize, 10) || 0;\n        const maxSibling = parseInt(this.sibling.maxSize, 10) || this.initialPaneSize + this.initialSiblingSize;\n\n        const paneSize = this.initialPaneSize - delta;\n        const siblingSize = this.initialSiblingSize + delta;\n        if (paneSize < min || paneSize > max || siblingSize < minSibling || siblingSize > maxSibling) {\n            return;\n        }\n        this.pane.dragSize = paneSize + 'px';\n        this.sibling.dragSize = siblingSize + 'px';\n    }\n\n    public onMoveEnd(delta: number) {\n        const paneSize = this.initialPaneSize - delta;\n        const siblingSize = this.initialSiblingSize + delta;\n        if (this.pane.isPercentageSize) {\n            // handle % resizes\n            const totalSize = this.getTotalSize();\n            const percentPaneSize = (paneSize / totalSize) * 100;\n            this.pane.size = percentPaneSize + '%';\n        } else {\n            // px resize\n            this.pane.size = paneSize + 'px';\n        }\n\n        if (this.sibling.isPercentageSize) {\n            // handle % resizes\n            const totalSize = this.getTotalSize();\n            const percentSiblingPaneSize =  (siblingSize / totalSize) * 100;\n            this.sibling.size = percentSiblingPaneSize + '%';\n        } else {\n            // px resize\n            this.sibling.size = siblingSize + 'px';\n        }\n        this.pane.dragSize = null;\n        this.sibling.dragSize = null;\n    }\n\n    private getTotalSize() {\n        const computed = this.document.defaultView.getComputedStyle(this.elementRef.nativeElement);\n        const totalSize = this.type === SplitterType.Horizontal ? computed.getPropertyValue('width') : computed.getPropertyValue('height');\n        return parseFloat(totalSize);\n    }\n\n\n    /**\n     * @hidden @internal\n     * This method assigns the order of each pane.\n     */\n    private assignFlexOrder() {\n        let k = 0;\n        this.panes.forEach((pane: IgxSplitterPaneComponent) => {\n            pane.order = k;\n            k += 2;\n        });\n    }\n\n    /** @hidden @internal */\n    public getPaneSiblingsByOrder(order: number, barIndex: number): Array<IgxSplitterPaneComponent> {\n        const panes = this.panes.toArray();\n        const prevPane = panes[order - barIndex - 1];\n        const nextPane = panes[order - barIndex];\n        const siblings = [prevPane, nextPane];\n        return siblings;\n    }\n}\n","import { Component, HostBinding, Input, ElementRef, Output, EventEmitter } from '@angular/core';\n\n/**\n * Represents individual resizable/collapsible panes.\n * @igxModule IgxSplitterModule\n *\n * @igxParent IgxSplitterComponent\n *\n * @igxKeywords pane\n *\n * @igxGroup presentation\n *\n * @remarks\n *  Users can control the resize behavior via the min and max size properties.\n */\n@Component({\n    selector: 'igx-splitter-pane',\n    templateUrl: './splitter-pane.component.html'\n})\nexport class IgxSplitterPaneComponent {\n\n    private _size = 'auto';\n    private _dragSize;\n    private _collapsed = false;\n\n    /** @hidden @internal */\n    public owner;\n\n    /**\n     * Gets/Sets the size of the current pane.\n     *  * @example\n     * ```html\n     * <igx-splitter>\n     *  <igx-splitter-pane [size]='size'>...</igx-splitter-pane>\n     * </igx-splitter>\n     * ```\n     */\n    @Input()\n    get size() {\n        return this._size;\n    }\n\n    set size(value) {\n        this._size = value;\n        this.el.nativeElement.style.flex = this.flex;\n    }\n\n    /** @hidden @internal */\n    get isPercentageSize() {\n        return this.size === 'auto' || this.size.indexOf('%') !== -1;\n    }\n\n    /** @hidden @internal */\n    get dragSize() {\n        return this._dragSize;\n    }\n    set dragSize(val) {\n        this._dragSize = val;\n        this.el.nativeElement.style.flex = this.flex;\n    }\n\n    /**\n     * Gets/Sets the minimum allowed size of the current pane.\n     * @example\n     * ```html\n     * <igx-splitter>\n     *  <igx-splitter-pane [minSize]='minSize'>...</igx-splitter-pane>\n     * </igx-splitter>\n     * ```\n     */\n    @Input()\n    public minSize!: string;\n\n    /**\n     * Gets/Set the maximum allowed size of the current pane.\n     * @example\n     * ```html\n     * <igx-splitter>\n     *  <igx-splitter-pane [maxSize]='maxSize'>...</igx-splitter-pane>\n     * </igx-splitter>\n     * ```\n     */\n    @Input()\n    public maxSize!: string;\n\n    /**\n     * Gets/Sets whether pane is resizable.\n     * @example\n     * ```html\n     * <igx-splitter>\n     *  <igx-splitter-pane [resizable]='false'>...</igx-splitter-pane>\n     * </igx-splitter>\n     * ```\n     * @remarks\n     * If pane is not resizable its related splitter bar cannot be dragged.\n     */\n    @Input()\n    public resizable = true;\n\n    /**\n     * Event fired when collapsed state of pane is changed.\n     * @example\n     * ```html\n     * <igx-splitter>\n     *  <igx-splitter-pane (onToggle)='onPaneToggle($event)'>...</igx-splitter-pane>\n     * </igx-splitter>\n     * ```\n     */\n    @Output()\n    public onToggle = new EventEmitter<IgxSplitterPaneComponent>();\n\n\n    /** @hidden @internal */\n    @HostBinding('style.order')\n    public order!: number;\n\n    /**\n     *\n     * @hidden @internal\n     * Gets the host native element.\n     */\n    public get element(): any {\n        return this.el.nativeElement;\n    }\n\n    /**\n     * @hidden @internal\n     * Gets/Sets the `overflow`.\n     */\n    @HostBinding('style.overflow')\n    public overflow = 'auto';\n\n    /**\n     * @hidden @internal\n     * Gets/Sets the `minHeight` and `minWidth` properties of the current pane.\n     */\n    @HostBinding('style.min-height')\n    @HostBinding('style.min-width')\n    public minHeight = 0;\n\n    /**\n     * @hidden @internal\n     * Gets/Sets the `maxHeight` and `maxWidth` properties of the current `IgxSplitterPaneComponent`.\n     */\n    @HostBinding('style.max-height')\n    @HostBinding('style.max-width')\n    public maxHeight = '100%';\n\n    /**\n     * @hidden @internal\n     * Gets the `flex` property of the current `IgxSplitterPaneComponent`.\n     */\n    @HostBinding('style.flex')\n    public get flex() {\n        const isAuto = this.size === 'auto' && !this.dragSize;\n        const grow = !isAuto ? 0 : 1;\n        const size = this.dragSize || this.size;\n        return `${grow} ${grow} ${size}`;\n    }\n\n    /**\n     * @hidden @internal\n     * Gets/Sets the 'display' property of the current pane.\n     */\n    @HostBinding('style.display')\n    public display = 'flex';\n\n    /**\n     * Gets/Sets whether current pane is collapsed.\n     * @example\n     * ```typescript\n     * const isCollapsed = pane.collapsed;\n     * ```\n     */\n    @Input()\n    public set collapsed(value) {\n        this._collapsed = value;\n        this.display = this._collapsed ? 'none' : 'flex' ;\n    }\n\n    public get collapsed() {\n        return this._collapsed;\n    }\n\n    /** @hidden @internal */\n    private _getSiblings() {\n        const panes = this.owner.panes.toArray();\n        const index = panes.indexOf(this);\n        const siblings = [];\n        if (index !== 0) {\n            siblings.push(panes[index - 1]);\n        }\n        if (index !== panes.length - 1) {\n            siblings.push(panes[index + 1]);\n        }\n        return siblings;\n    }\n\n    /**\n     * Toggles the collapsed state of the pane.\n     * @example\n     * ```typescript\n     * pane.toggle();\n     * ```\n     */\n    public toggle() {\n        // reset sibling sizes when pane collapse state changes.\n        this._getSiblings().forEach(sibling => sibling.size = 'auto');\n        this.collapsed = !this.collapsed;\n        this.onToggle.emit(this);\n    }\n\n    constructor(private el: ElementRef) { }\n}\n","import {Component, EventEmitter, HostBinding, HostListener, Input, Output} from '@angular/core';\nimport {SplitterType} from '../splitter.component';\nimport {IgxSplitterPaneComponent} from '../splitter-pane/splitter-pane.component';\nimport {DragDirection, IDragMoveEventArgs, IDragStartEventArgs} from '../../directives/drag-drop/drag-drop.directive';\n\n\nexport const SPLITTER_INTERACTION_KEYS = new Set('right down left up arrowright arrowdown arrowleft arrowup'.split(' '));\n\n/**\n * @hidden @internal\n * Represents the draggable bar that visually separates panes and allows for changing their sizes.\n */\n@Component({\n    selector: 'igx-splitter-bar',\n    templateUrl: './splitter-bar.component.html'\n})\nexport class IgxSplitBarComponent {\n    /**\n     * Set css class to the host element.\n     */\n    @HostBinding('class.igx-splitter-bar-host')\n    public cssClass = 'igx-splitter-bar-host';\n\n    /**\n     * Gets/Sets the orientation.\n     */\n    @Input()\n    public type: SplitterType = SplitterType.Horizontal;\n\n    /**\n     * Sets/gets the element order.\n     */\n    @HostBinding('style.order')\n    @Input()\n    public order!: number;\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.tabindex')\n    public get tabindex() {\n        return this.resizeDisallowed ? null : 0;\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    @HostBinding('attr.aria-orientation')\n    public get orientation() {\n        return this.type === SplitterType.Horizontal ? 'horizontal' : 'vertical';\n    }\n\n    /**\n     * @hidden\n     * @internal\n     */\n    public get cursor() {\n        if (this.resizeDisallowed) {\n            return '';\n        }\n        return this.type === SplitterType.Horizontal ? 'col-resize' : 'row-resize';\n    }\n\n    /**\n     * Sets/gets the `SplitPaneComponent` associated with the current `SplitBarComponent`.\n     * @memberof SplitBarComponent\n     */\n    @Input()\n    public pane!: IgxSplitterPaneComponent;\n\n    /**\n     * Sets/Gets the `SplitPaneComponent` sibling components associated with the current `SplitBarComponent`.\n     */\n    @Input()\n    public siblings!: Array<IgxSplitterPaneComponent>;\n\n    /**\n     * An event that is emitted whenever we start dragging the current `SplitBarComponent`.\n     */\n    @Output()\n    public moveStart = new EventEmitter<IgxSplitterPaneComponent>();\n\n    /**\n     * An event that is emitted while we are dragging the current `SplitBarComponent`.\n     */\n    @Output()\n    public moving = new EventEmitter<number>();\n\n    @Output()\n    public movingEnd = new EventEmitter<number>();\n\n    /**\n     * A temporary holder for the pointer coordinates.\n     */\n    private startPoint!: number;\n\n    /**\n     * @hidden @internal\n     */\n    public get prevButtonHidden() {\n        return this.siblings[0].collapsed && !this.siblings[1].collapsed;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    @HostListener('keydown', ['$event'])\n    keyEvent(event: KeyboardEvent) {\n        const key = event.key.toLowerCase();\n        const ctrl = event.ctrlKey;\n        event.stopPropagation();\n        if (SPLITTER_INTERACTION_KEYS.has(key)) {\n            event.preventDefault();\n        }\n            switch (key) {\n                case 'arrowup':\n                case 'up':\n                    if (this.type === SplitterType.Vertical) {\n                        if (ctrl) {\n                            this.onCollapsing(false);\n                            break;\n                        }\n                        if (!this.resizeDisallowed) {\n                            event.preventDefault();\n                            this.moveStart.emit(this.pane);\n                            this.moving.emit(10);\n                        }\n                    }\n                    break;\n                case 'arrowdown':\n                case 'down':\n                    if (this.type === SplitterType.Vertical) {\n                        if (ctrl) {\n                            this.onCollapsing(true);\n                            break;\n                        }\n                        if (!this.resizeDisallowed) {\n                            event.preventDefault();\n                            this.moveStart.emit(this.pane);\n                            this.moving.emit(-10);\n                        }\n                    }\n                    break;\n                case 'arrowleft':\n                case 'left':\n                    if (this.type === SplitterType.Horizontal) {\n                        if (ctrl) {\n                            this.onCollapsing(false);\n                            break;\n                        }\n                        if (!this.resizeDisallowed) {\n                            event.preventDefault();\n                            this.moveStart.emit(this.pane);\n                            this.moving.emit(10);\n                        }\n                    }\n                    break;\n                case 'arrowright':\n                case 'right':\n                    if (this.type === SplitterType.Horizontal) {\n                        if (ctrl) {\n                            this.onCollapsing(true);\n                            break;\n                        }\n                        if (!this.resizeDisallowed) {\n                            event.preventDefault();\n                            this.moveStart.emit(this.pane);\n                            this.moving.emit(-10);\n                        }\n                    }\n                    break;\n                default:\n                    break;\n            }\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get dragDir() {\n        return this.type === SplitterType.Horizontal ? DragDirection.VERTICAL : DragDirection.HORIZONTAL;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public get nextButtonHidden() {\n        return this.siblings[1].collapsed && !this.siblings[0].collapsed;\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onDragStart(event: IDragStartEventArgs) {\n        if (this.resizeDisallowed) {\n            event.cancel = true;\n            return;\n        }\n        this.startPoint = this.type === SplitterType.Horizontal ? event.startX : event.startY;\n        this.moveStart.emit(this.pane);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onDragMove(event: IDragMoveEventArgs) {\n        const isHorizontal = this.type === SplitterType.Horizontal;\n        const curr =  isHorizontal ? event.pageX : event.pageY;\n        const delta = this.startPoint - curr;\n        if (delta !== 0) {\n            this.moving.emit(delta);\n            event.cancel = true;\n            event.owner.element.nativeElement.style.transform = '';\n        }\n    }\n\n    public onDragEnd(event: any) {\n        const isHorizontal = this.type === SplitterType.Horizontal;\n        const curr =  isHorizontal ? event.pageX : event.pageY;\n        const delta = this.startPoint - curr;\n        if (delta !== 0) {\n            this.movingEnd.emit(delta);\n        }\n    }\n\n    protected get resizeDisallowed() {\n        const relatedTabs = this.siblings;\n        return !!relatedTabs.find(x => x.resizable === false || x.collapsed === true);\n    }\n\n    /**\n     * @hidden @internal\n     */\n    public onCollapsing(next: boolean) {\n        const prevSibling = this.siblings[0];\n        const nextSibling = this.siblings[1];\n        let target;\n        if (next) {\n            // if next is clicked when prev pane is hidden, show prev pane, else hide next pane.\n            target = prevSibling.collapsed ? prevSibling : nextSibling;\n        } else {\n            // if prev is clicked when next pane is hidden, show next pane, else hide prev pane.\n            target = nextSibling.collapsed ? nextSibling : prevSibling;\n        }\n        target.toggle();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IgxSplitBarComponent } from './splitter-bar/splitter-bar.component';\nimport { IgxSplitterPaneComponent } from './splitter-pane/splitter-pane.component';\nimport { IgxSplitterComponent } from './splitter.component';\nimport { IgxIconModule } from '../icon/public_api';\nimport { IgxDragDropModule } from '../directives/drag-drop/drag-drop.directive';\n\n@NgModule({\n    imports: [\n        CommonModule, IgxIconModule, IgxDragDropModule\n    ],\n    declarations: [\n        IgxSplitterComponent,\n        IgxSplitterPaneComponent,\n        IgxSplitBarComponent\n    ],\n    exports: [\n        IgxSplitterComponent,\n        IgxSplitterPaneComponent\n    ]\n})\nexport class IgxSplitterModule { }\n","import { Component, ContentChild, Pipe, PipeTransform, Output, EventEmitter, HostListener, Directive } from '@angular/core';\nimport { NgControl } from '@angular/forms';\nimport { IgxInputDirective, IgxInputState } from '../input-group/public_api';\nimport { IgxInputGroupComponent } from '../input-group/input-group.component';\nimport { IgxInputGroupBase } from '../input-group/input-group.common';\nimport { DatePickerUtil } from '../date-picker/date-picker.utils';\nimport { IgxDateTimeEditorDirective } from '../directives/date-time-editor/public_api';\n\n/**\n * Represents a range between two dates.\n */\nexport interface DateRange {\n    start: Date;\n    end: Date;\n}\n\n/** @hidden @internal */\n@Pipe({ name: 'dateRange' })\nexport class DateRangePickerFormatPipe implements PipeTransform {\n    public transform(values: DateRange, appliedFormat?: string,\n        locale?: string, formatter?: (_: DateRange) => string): string {\n        if (!values || !values.start && !values.end) {\n            return '';\n        }\n        if (formatter) {\n            return formatter(values);\n        }\n        const { start, end } = values;\n        const startDate = appliedFormat ? DatePickerUtil.formatDate(start, appliedFormat, locale || 'en') : start?.toLocaleDateString();\n        const endDate = appliedFormat ? DatePickerUtil.formatDate(end, appliedFormat, locale || 'en') : end?.toLocaleDateString();\n        let formatted;\n        if (start) {\n            formatted = `${startDate} - `;\n            if (end) {\n                formatted += endDate;\n            }\n        }\n\n        return formatted ? formatted : '';\n    }\n}\n\n/** @hidden @internal */\n@Component({\n    template: ``,\n    selector: `igx-date-range-base`,\n    providers: [{ provide: IgxInputGroupBase, useExisting: IgxDateRangeInputsBaseComponent }]\n})\nexport class IgxDateRangeInputsBaseComponent extends IgxInputGroupComponent {\n    @ContentChild(NgControl)\n    protected ngControl: NgControl;\n\n    @ContentChild(IgxDateTimeEditorDirective)\n    public dateTimeEditor: IgxDateTimeEditorDirective;\n\n    @ContentChild(IgxInputDirective)\n    public inputDirective: IgxInputDirective;\n\n    /** @hidden @internal */\n    public get nativeElement() {\n        return this.element.nativeElement;\n    }\n\n    /** @hidden @internal */\n    public setFocus(): void {\n        this.input.focus();\n    }\n\n    /** @hidden @internal */\n    public updateInputValue(value: Date) {\n        if (this.ngControl) {\n            this.ngControl.control.setValue(value);\n        } else {\n            this.dateTimeEditor.value = value;\n        }\n    }\n\n    /** @hidden @internal */\n    public updateInputValidity(state: IgxInputState) {\n        this.inputDirective.valid = state;\n    }\n}\n\n/**\n * Templates the default icon in the `IgxDateRangePicker`.\n *\n * @igxModule IgxDateRangePickerModule\n *\n * @igxKeyWords date range icon, date picker icon\n *\n * @igxGroup scheduling\n *\n * @example\n * ```html\n * <igx-date-range-picker>\n *   <igx-picker-toggle igxSuffix>\n *      <igx-icon>calendar_view_day</igx-icon>\n *   </igx-picker-toggle>\n * </igx-date-range-picker>\n * ```\n */\n@Component({\n    template: `<ng-content></ng-content>`,\n    selector: 'igx-picker-toggle'\n})\nexport class IgxPickerToggleComponent {\n    @Output()\n    public clicked = new EventEmitter();\n\n    @HostListener('click', ['$event'])\n    public onClick(event: MouseEvent) {\n        // do not focus input on click\n        event.stopPropagation();\n        this.clicked.emit();\n    }\n}\n\n/**\n * Defines the start input for a date range picker\n *\n * @igxModule IgxDateRangePickerModule\n *\n * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme\n *\n * @igxKeywords date, range, date range, date picker\n *\n * @igxGroup scheduling\n *\n * @remarks\n * When templating, start input has to be templated separately\n *\n * @example\n * ```html\n * <igx-date-range-picker mode=\"dropdown\">\n *      <igx-date-range-start>\n *          <input igxInput igxDateTimeEditor type=\"text\">\n *      </igx-date-range-start>\n *      ...\n * </igx-date-range-picker>\n * ```\n */\n@Component({\n    selector: 'igx-date-range-start',\n    templateUrl: '../input-group/input-group.component.html',\n    providers: [\n        { provide: IgxInputGroupBase, useExisting: IgxDateRangeStartComponent },\n        { provide: IgxDateRangeInputsBaseComponent, useExisting: IgxDateRangeStartComponent }\n    ]\n})\nexport class IgxDateRangeStartComponent extends IgxDateRangeInputsBaseComponent { }\n\n/**\n * Defines the end input for a date range picker\n *\n * @igxModule IgxDateRangeModule\n *\n * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme\n *\n * @igxKeywords date, range, date range, date picker\n *\n * @igxGroup scheduling\n *\n * @remarks\n * When templating, end input has to be template separately\n *\n * @example\n * ```html\n * <igx-date-range-picker mode=\"dropdown\">\n *      <igx-date-range-end>\n *          <input igxInput igxDateTimeEditor type=\"text\">\n *      </igx-date-range-end>\n *      ...\n * </igx-date-range-picker>\n * ```\n */\n@Component({\n    selector: 'igx-date-range-end',\n    templateUrl: '../input-group/input-group.component.html',\n    providers: [\n        { provide: IgxInputGroupBase, useExisting: IgxDateRangeEndComponent },\n        { provide: IgxDateRangeInputsBaseComponent, useExisting: IgxDateRangeEndComponent }\n    ]\n})\nexport class IgxDateRangeEndComponent extends IgxDateRangeInputsBaseComponent { }\n\n@Directive({\n    selector: '[igxDateRangeSeparator]'\n})\nexport class IgxDateRangeSeparatorDirective {\n}\n","import {\n    AfterViewInit, Component, ContentChild, ContentChildren, ElementRef,\n    EventEmitter, HostBinding, Inject, Injector, Input, LOCALE_ID,\n    OnChanges, OnDestroy, OnInit, Optional, Output, QueryList,\n    SimpleChanges, TemplateRef, ViewChild\n} from '@angular/core';\nimport {\n    AbstractControl, ControlValueAccessor, NgControl,\n    NG_VALIDATORS, NG_VALUE_ACCESSOR, ValidationErrors, Validator\n} from '@angular/forms';\nimport { fromEvent, Subject, Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { fadeIn, fadeOut } from '../animations/fade';\nimport { IgxCalendarComponent, WEEKDAYS } from '../calendar/public_api';\nimport { DateRangeType } from '../core/dates';\nimport { DisplayDensityBase, DisplayDensityToken, IDisplayDensityOptions } from '../core/density';\nimport { InteractionMode } from '../core/enums';\nimport { CurrentResourceStrings } from '../core/i18n/resources';\nimport { IToggleView } from '../core/navigation';\nimport { IBaseCancelableBrowserEventArgs, IBaseEventArgs, KEYS } from '../core/utils';\nimport { DatePickerUtil } from '../date-picker/date-picker.utils';\nimport { IgxToggleDirective } from '../directives/toggle/toggle.directive';\nimport { IgxInputDirective, IgxInputGroupComponent, IgxInputState, IgxLabelDirective } from '../input-group/public_api';\nimport { AutoPositionStrategy, OverlaySettings, PositionSettings } from '../services/public_api';\nimport {\n    DateRange, IgxDateRangeEndComponent, IgxDateRangeInputsBaseComponent,\n    IgxDateRangeSeparatorDirective, IgxDateRangeStartComponent, IgxPickerToggleComponent\n} from './date-range-picker-inputs.common';\n\nconst SingleInputDatesConcatenationString = ' - ';\n\n/**\n * Provides the ability to select a range of dates from a calendar UI or editable inputs.\n *\n * @igxModule IgxDateRangeModule\n *\n * @igxTheme igx-input-group-theme, igx-calendar-theme, igx-date-range-picker-theme\n *\n * @igxKeywords date, range, date range, date picker\n *\n * @igxGroup scheduling\n *\n * @remarks\n * It displays the range selection in a single or two input fields.\n * The default template displays a single *readonly* input field\n * while projecting `igx-date-range-start` and `igx-date-range-end`\n * displays two *editable* input fields.\n *\n * @example\n * ```html\n * <igx-date-range-picker mode=\"dropdown\"></igx-date-range-picker>\n * ```\n */\n@Component({\n    selector: 'igx-date-range-picker',\n    templateUrl: './date-range-picker.component.html',\n    providers: [\n        { provide: NG_VALUE_ACCESSOR, useExisting: IgxDateRangePickerComponent, multi: true },\n        { provide: NG_VALIDATORS, useExisting: IgxDateRangePickerComponent, multi: true }\n    ]\n})\nexport class IgxDateRangePickerComponent extends DisplayDensityBase\n    implements IToggleView, OnChanges, OnInit, AfterViewInit, OnDestroy, ControlValueAccessor, Validator {\n    /**\n     * Display calendar in either `dialog` or `dropdown` mode.\n     * @remarks\n     * Default mode is `dialog`\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker mode=\"dropdown\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public mode = InteractionMode.Dialog;\n\n    /**\n     * The number of displayed month views.\n     *\n     * @remarks\n     * Default is `2`.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker [monthsViewNumber]=\"3\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public monthsViewNumber = 2;\n\n    /**\n     * Gets/Sets whether dates that are not part of the current month will be displayed.\n     *\n     * @remarks\n     * Default value is `false`.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker [hideOutsideDays]=\"true\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public hideOutsideDays: boolean;\n\n    /**\n     * The start day of the week.\n     *\n     * @remarks\n     * Can be assigned to a numeric value or to `WEEKDAYS` enum value.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker [weekStart]=\"1\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public weekStart = WEEKDAYS.SUNDAY;\n\n    /**\n     * Locale settings used for value formatting and calendar.\n     *\n     * @remarks\n     * Uses Angular's `LOCALE_ID` by default. Affects both input mask and display format if those are not set.\n     * If a `locale` is set, it must be registered via `registerLocaleData`.\n     * Please refer to https://angular.io/guide/i18n#i18n-pipes.\n     * If it is not registered, `Intl` will be used for formatting.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker locale=\"jp\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public locale: string;\n\n    /**\n     * A custom formatter function, applied on the selected or passed in date.\n     *\n     * @example\n     * ```typescript\n     * private dayFormatter = new Intl.DateTimeFormat(\"en\", { weekday: \"long\" });\n     * private monthFormatter = new Intl.DateTimeFormat(\"en\", { month: \"long\" });\n     *\n     * public formatter(date: Date): string {\n     *  return `${this.dayFormatter.format(date)} - ${this.monthFormatter.format(date)} - ${date.getFullYear()}`;\n     * }\n     * ```\n     * ```html\n     * <igx-date-range-picker [formatter]=\"formatter\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public formatter: (val: DateRange) => string;\n\n    /**\n     * The default text of the calendar dialog `done` button.\n     *\n     * @remarks\n     * Default value is `Done`.\n     * The button will only show up in `dialog` mode.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker doneButtonText=\"\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public doneButtonText = 'Done';\n\n    /**\n     * Custom overlay settings that should be used to display the calendar.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker [overlaySettings]=\"customOverlaySettings\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public overlaySettings: OverlaySettings;\n\n    /**\n     * The format used when editable inputs are not focused.\n     *\n     * @remarks\n     * Uses Angular's DatePipe.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker displayFormat=\"EE/M/yy\"></igx-date-range-picker>\n     * ```\n     *\n     */\n    @Input()\n    public displayFormat: string;\n\n    /**\n     * The expected user input format and placeholder.\n     *\n     * @remarks\n     * Default is `\"'MM/dd/yyyy'\"`\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker inputFormat=\"dd/MM/yy\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public inputFormat: string;\n\n    /**\n     * The minimum value in a valid range.\n     *\n     * @example\n     * <igx-date-range-picker [minValue]=\"minDate\"></igx-date-range-picker>\n     */\n    @Input()\n    public set minValue(value: Date | string) {\n        this._minValue = value;\n        this.onValidatorChange();\n    }\n\n    public get minValue(): Date | string {\n        return this._minValue;\n    }\n\n    /**\n     * The maximum value in a valid range.\n     *\n     * @example\n     * <igx-date-range-picker [maxValue]=\"maxDate\"></igx-date-range-picker>\n     */\n    @Input()\n    public set maxValue(value: Date | string) {\n        this._maxValue = value;\n        this.onValidatorChange();\n    }\n\n    public get maxValue(): Date | string {\n        return this._maxValue;\n    }\n\n    /**\n     * Enables/Disables the `IgxDateRangePickerComponent`.\n     *  @example\n     * ```html\n     * <igx-date-range-picker [disabled]=\"'true'\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public disabled = false;\n\n    /**\n     * Sets the `placeholder` for single-input `IgxDateRangePickerComponent`.\n     *   @example\n     * ```html\n     * <igx-date-range-picker [placeholder]=\"'Choose your dates'\"></igx-date-range-picker>\n     * ```\n     */\n    @Input()\n    public placeholder = '';\n\n    /**\n     * Emitted when a range is selected.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker (rangeSelected)=\"handleSelected($event)\"></igx-date-range-picker>\n     * ```\n     */\n    @Output()\n    public rangeSelected = new EventEmitter<DateRange>();\n\n    /**\n     * Emitted when the calendar starts opening, cancelable.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker (onOpening)=\"handleOpening($event)\"></igx-date-range-picker>\n     * ```\n     */\n    @Output()\n    public onOpening = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted when the `IgxDateRangeComponent` is opened.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker (onOpened)=\"handleOpened($event)\"></igx-date-range-picker>\n     * ```\n     */\n    @Output()\n    public onOpened = new EventEmitter<IBaseEventArgs>();\n\n    /**\n     * Emitted when the calendar starts closing, cancelable.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker (onClosing)=\"handleClosing($event)\"></igx-date-range-picker>\n     * ```\n     */\n    @Output()\n    public onClosing = new EventEmitter<IBaseCancelableBrowserEventArgs>();\n\n    /**\n     * Emitted when the `IgxDateRangeComponent` is closed.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker (onClosed)=\"handleClosed($event)\"></igx-date-range-picker>\n     * ```\n     */\n    @Output()\n    public onClosed = new EventEmitter<IBaseEventArgs>();\n\n    /** @hidden @internal */\n    @HostBinding('class.igx-date-range-picker')\n    public cssClass = 'igx-date-range-picker';\n\n    /** @hidden @internal */\n    @ViewChild(IgxCalendarComponent)\n    public calendar: IgxCalendarComponent;\n\n    /** @hidden @internal */\n    @ViewChild(IgxInputGroupComponent)\n    public inputGroup: IgxInputGroupComponent;\n\n    /** @hidden @internal */\n    @ViewChild(IgxInputDirective)\n    public inputDirective: IgxInputDirective;\n\n    /** @hidden @internal */\n    @ViewChild(IgxToggleDirective)\n    public toggleDirective: IgxToggleDirective;\n\n    /** @hidden @internal */\n    @ContentChildren(IgxPickerToggleComponent, { descendants: true })\n    public toggleComponents: QueryList<IgxPickerToggleComponent>;\n\n    /** @hidden @internal */\n    @ContentChildren(IgxDateRangeInputsBaseComponent)\n    public projectedInputs: QueryList<IgxDateRangeInputsBaseComponent>;\n\n    @ContentChild(IgxLabelDirective)\n    public label: IgxLabelDirective;\n\n    /** @hidden @internal */\n    @ContentChild(IgxDateRangeSeparatorDirective, { read: TemplateRef })\n    public dateSeparatorTemplate: TemplateRef<any>;\n\n    /** @hidden @internal */\n    public dateSeparator = CurrentResourceStrings.DateRangePickerResStrings.igx_date_range_picker_date_separator;\n\n    /** @hidden @internal */\n    public get appliedFormat(): string {\n        return DatePickerUtil.getLocaleDateFormat(this.locale, this.displayFormat)\n            || DatePickerUtil.DEFAULT_INPUT_FORMAT;\n    }\n\n    /** @hidden @internal */\n    public get singleInputFormat(): string {\n        if (this.placeholder !== '') {\n            return this.placeholder;\n        }\n\n        const format = this.appliedFormat;\n        return `${format}${SingleInputDatesConcatenationString}${format}`;\n    }\n\n    /** @hidden @internal */\n    public get hasProjectedInputs(): boolean {\n        return this.projectedInputs?.length > 0;\n    }\n\n    private get dropdownOverlaySettings(): OverlaySettings {\n        return Object.assign({}, this._dropDownOverlaySettings, this.overlaySettings);\n    }\n\n    private get dialogOverlaySettings(): OverlaySettings {\n        return Object.assign({}, this._dialogOverlaySettings, this.overlaySettings);\n    }\n\n    private get required(): boolean {\n        if (this._ngControl && this._ngControl.control && this._ngControl.control.validator) {\n            const error = this._ngControl.control.validator({} as AbstractControl);\n            return (error && error.required) ? true : false;\n        }\n\n        return false;\n    }\n\n    private _value: DateRange;\n    private _collapsed = true;\n    private _ngControl: NgControl;\n    private $destroy = new Subject();\n    private _statusChanges$: Subscription;\n    private $toggleClickNotifier = new Subject();\n    private _minValue: Date | string;\n    private _maxValue: Date | string;\n    private _positionSettings: PositionSettings;\n    private _focusedInput: IgxDateRangeInputsBaseComponent;\n    private _dialogOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: true\n    };\n    private _dropDownOverlaySettings: OverlaySettings = {\n        closeOnOutsideClick: true,\n        modal: false\n    };\n    private onChangeCallback = (dateRange: DateRange) => { };\n    private onTouchCallback = () => { };\n    private onValidatorChange = () => { };\n\n    constructor(public element: ElementRef,\n        @Optional() @Inject(DisplayDensityToken) protected _displayDensityOptions: IDisplayDensityOptions,\n        @Inject(LOCALE_ID) private localeId: any,\n        private _injector: Injector) {\n        super(_displayDensityOptions);\n        this.locale = this.locale || this.localeId;\n    }\n\n    /**\n     * Opens the date range picker's dropdown or dialog.\n     *\n     * @example\n     * ```html\n     * <igx-date-range-picker #dateRange></igx-date-range-picker>\n     *\n     * <button (click)=\"dateRange.open()\">Open Dialog</button\n     * ```\n     */\n    public open(overlaySettings?: OverlaySettings): void {\n        if (!this.collapsed || this.disabled) { return; }\n\n        this.updateCalendar();\n        const settings = this.mode === InteractionMode.Dialog ? this.dialogOverlaySettings : this.dropdownOverlaySettings;\n        this.toggleDirective.open(Object.assign(settings, overlaySettings));\n    }\n\n    /**\n     * Closes the date range picker's dropdown or dialog.\n     *\n     * @example\n     * html```\n     * <igx-date-range-picker #dateRange></igx-date-range-picker>\n     *\n     * <button (click)=\"dateRange.close()\">Close Dialog</button>\n     * ```\n     */\n    public close(): void {\n        if (!this.collapsed) {\n            this.toggleDirective.close();\n        }\n    }\n\n    /**\n     * Toggles the date range picker's dropdown or dialog\n     *\n     * @example\n     * html```\n     * <igx-date-range-picker #dateRange></igx-date-range-picker>\n     *\n     * <button (click)=\"dateRange.toggle()\">Toggle Dialog</button>\n     * ```\n     */\n    public toggle(overlaySettings?: OverlaySettings): void {\n        if (!this.collapsed) {\n            this.close();\n        } else {\n            this.open(overlaySettings);\n        }\n    }\n\n    /**\n     * Gets calendar state.\n     *\n     * ```typescript\n     * let state = this.dateRange.collapsed;\n     * ```\n     */\n    public get collapsed(): boolean {\n        return this._collapsed;\n    }\n\n    /**\n     * The currently selected value / range from the calendar\n     *\n     * @remarks\n     * The current value is of type `DateRange`\n     *\n     * @example\n     * ```typescript\n     * const newValue: DateRange = { start: new Date(\"2/2/2012\"), end: new Date(\"3/3/2013\")};\n     * this.dateRangePicker.value = newValue;\n     * ```\n     */\n    public get value(): DateRange {\n        return this._value;\n    }\n\n    @Input()\n    public set value(value: DateRange) {\n        this.updateValue(value);\n        this.onChangeCallback(value);\n    }\n\n    private updateValue(value: DateRange) {\n        this._value = value ? value : null;\n        this.updateInputs();\n    }\n\n    /**\n     * Selects a range of dates. If no `endDate` is passed, range is 1 day (only `startDate`)\n     *\n     * @example\n     * ```typescript\n     * public selectFiveDayRange() {\n     *  const inFiveDays = new Date(new Date().setDate(today.getDate() + 5));\n     *  const today = new Date();\n     *  this.dateRange.selectRange(today, inFiveDays);\n     * }\n     * ```\n     */\n    public selectRange(startDate: Date, endDate?: Date): void {\n        endDate = endDate ?? startDate;\n        const dateRange = [startDate, endDate];\n        this.calendar.selectDate(dateRange);\n        this.handleSelection(dateRange);\n    }\n\n    /** @hidden @internal */\n    public writeValue(value: DateRange): void {\n        this.updateValue(value);\n    }\n\n    /** @hidden @internal */\n    public registerOnChange(fn: any): void {\n        this.onChangeCallback = fn;\n    }\n\n    /** @hidden @internal */\n    public registerOnTouched(fn: any): void {\n        this.onTouchCallback = fn;\n    }\n\n    /** @hidden @internal */\n    public validate(control: AbstractControl): ValidationErrors | null {\n        const value: DateRange = control.value;\n        const errors = {};\n        if (value) {\n            if (this.hasProjectedInputs) {\n                const startInput = this.projectedInputs.find(i => i instanceof IgxDateRangeStartComponent) as IgxDateRangeStartComponent;\n                const endInput = this.projectedInputs.find(i => i instanceof IgxDateRangeEndComponent) as IgxDateRangeEndComponent;\n                if (!startInput.dateTimeEditor.value) {\n                    Object.assign(errors, { 'startValue': true });\n                }\n                if (!endInput.dateTimeEditor.value) {\n                    Object.assign(errors, { 'endValue': true });\n                }\n            }\n\n            const min = DatePickerUtil.parseDate(this.minValue);\n            const max = DatePickerUtil.parseDate(this.maxValue);\n            const start = DatePickerUtil.parseDate(value.start);\n            const end = DatePickerUtil.parseDate(value.end);\n            if ((min && start && DatePickerUtil.lessThanMinValue(start, min, false))\n                || (min && end && DatePickerUtil.lessThanMinValue(end, min, false))) {\n                Object.assign(errors, { 'minValue': true });\n            }\n            if ((max && start && DatePickerUtil.greaterThanMaxValue(start, max, false))\n                || (max && end && DatePickerUtil.greaterThanMaxValue(end, max, false))) {\n                Object.assign(errors, { 'maxValue': true });\n            }\n        }\n\n        return Object.keys(errors).length > 0 ? errors : null;\n    }\n\n    /** @hidden @internal */\n    public registerOnValidatorChange?(fn: any): void {\n        this.onValidatorChange = fn;\n    }\n\n    /** @hidden @internal */\n    public setDisabledState?(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n\n    /** @hidden @internal */\n    get separatorClass(): string {\n        return this.getComponentDensityClass('igx-date-range-picker__label');\n    }\n\n    /** @hidden */\n    public ngOnInit(): void {\n        this._ngControl = this._injector.get<NgControl>(NgControl, null);\n    }\n\n    /** @hidden */\n    public ngAfterViewInit(): void {\n        if (this.mode === InteractionMode.DropDown) {\n            this.attachOnKeydown();\n        }\n        this.subscribeToDateEditorEvents();\n        this.configPositionStrategy();\n        this.configOverlaySettings();\n        this.cacheFocusedInput();\n        this.attachOnTouched();\n\n        const subsToClicked = () => {\n            this.$toggleClickNotifier.next();\n            this.toggleComponents.forEach(toggle => {\n                toggle.clicked.pipe(takeUntil(this.$toggleClickNotifier)).subscribe(() => this.open());\n            });\n        };\n        this.toggleComponents.changes.pipe(takeUntil(this.$destroy)).subscribe(() => subsToClicked());\n        subsToClicked();\n\n        this.setRequiredToInputs();\n\n        if (this._ngControl) {\n            this._statusChanges$ = this._ngControl.statusChanges.subscribe(this.onStatusChanged.bind(this));\n        }\n\n        // delay invocations until the current change detection cycle has completed\n        Promise.resolve().then(() => {\n            this.updateDisabledState();\n            this.initialSetValue();\n            this.updateInputs();\n        });\n        this.updateDisplayFormat();\n        this.updateInputFormat();\n    }\n\n    /** @hidden @internal */\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes['locale']) {\n            this.inputFormat = DatePickerUtil.getDefaultInputFormat(this.locale || 'en') || DatePickerUtil.DEFAULT_INPUT_FORMAT;\n        }\n        if (changes['displayFormat'] && this.hasProjectedInputs) {\n            this.updateDisplayFormat();\n        }\n        if (changes['inputFormat'] && this.hasProjectedInputs) {\n            this.updateInputFormat();\n        }\n        if (changes['disabled']) {\n            this.updateDisabledState();\n        }\n    }\n\n    /** @hidden @internal */\n    public ngOnDestroy(): void {\n        this.$destroy.next();\n        this.$destroy.complete();\n        this.$toggleClickNotifier.next();\n        this.$toggleClickNotifier.complete();\n    }\n\n    /** @hidden @internal */\n    public handleOpening(event: IBaseCancelableBrowserEventArgs): void {\n        const args = { owner: this, cancel: event.cancel, event: event.event };\n        this.onOpening.emit(args);\n        event.cancel = args.cancel;\n        if (!args.cancel) {\n            this._collapsed = false;\n        }\n    }\n\n    /** @hidden @internal */\n    public handleOpened(): void {\n        this.calendar.daysView.focusActiveDate();\n        this.onOpened.emit({ owner: this });\n    }\n\n    /** @hidden @internal */\n    public handleClosing(event: IBaseCancelableBrowserEventArgs): void {\n        if (this.value && !this.value.start && !this.value.end) {\n            this.value = null;\n        }\n\n        const args = { owner: this, cancel: event.cancel, event: event.event };\n        this.onClosing.emit(args);\n        event.cancel = args.cancel;\n        if (args.cancel) {\n            return;\n        }\n\n        if (this.mode === InteractionMode.DropDown && event.event && !this.element.nativeElement.contains(event.event.target)) {\n            // outside click\n            this.updateValidityOnBlur();\n        } else {\n            // input click\n            if (this.hasProjectedInputs && this._focusedInput) {\n                this._focusedInput.setFocus();\n                this._focusedInput = null;\n            }\n            if (this.inputDirective) {\n                this.inputDirective.focus();\n            }\n        }\n    }\n\n    private updateValidityOnBlur() {\n        this.onTouchCallback();\n        if (this._ngControl) {\n            if (this.hasProjectedInputs) {\n                this.projectedInputs.forEach(i => {\n                    if (!this._ngControl.valid) {\n                        i.updateInputValidity(IgxInputState.INVALID);\n                    } else {\n                        i.updateInputValidity(IgxInputState.INITIAL);\n                    }\n                });\n            }\n\n            if (this.inputDirective) {\n                if (!this._ngControl.valid) {\n                    this.inputDirective.valid = IgxInputState.INVALID;\n                } else {\n                    this.inputDirective.valid = IgxInputState.INITIAL;\n                }\n            }\n        }\n    }\n\n    /** @hidden @internal */\n    public handleClosed(): void {\n        this._collapsed = true;\n        this.onClosed.emit({ owner: this });\n    }\n\n    /** @hidden @internal */\n    public onKeyDown(event: KeyboardEvent): void {\n        switch (event.key) {\n            case KEYS.UP_ARROW:\n            case KEYS.UP_ARROW_IE:\n                if (event.altKey) {\n                    this.close();\n                }\n                break;\n            case KEYS.DOWN_ARROW:\n            case KEYS.DOWN_ARROW_IE:\n                if (event.altKey) {\n                    this.open();\n                }\n                break;\n            case KEYS.ESCAPE:\n            case KEYS.ESCAPE_IE:\n                this.close();\n                break;\n        }\n    }\n\n    /** @hidden @internal */\n    public handleSelection(selectionData: Date[]): void {\n        this.value = this.extractRange(selectionData);\n        this.rangeSelected.emit(this.value);\n    }\n\n    protected onStatusChanged = () => {\n        if ((this._ngControl.control.touched || this._ngControl.control.dirty) &&\n            (this._ngControl.control.validator || this._ngControl.control.asyncValidator)) {\n            if (this.inputGroup) {\n                this.inputDirective.valid = this.getInputState(this.inputGroup.isFocused);\n            } else if (this.hasProjectedInputs) {\n                this.projectedInputs\n                    .forEach(i => { i.inputDirective.valid = this.getInputState(i.isFocused); });\n            }\n        }\n        this.setRequiredToInputs();\n    }\n\n    private updateDisabledState() {\n        if (this.hasProjectedInputs) {\n            const start = this.projectedInputs.find(i => i instanceof IgxDateRangeStartComponent) as IgxDateRangeStartComponent;\n            const end = this.projectedInputs.find(i => i instanceof IgxDateRangeEndComponent) as IgxDateRangeEndComponent;\n            start.inputDirective.disabled = this.disabled;\n            end.inputDirective.disabled = this.disabled;\n            return;\n        }\n        if (this.inputDirective) {\n            this.inputDirective.disabled = this.disabled;\n        }\n    }\n\n    private getInputState(focused: boolean): IgxInputState {\n        if (focused) {\n            return this._ngControl.valid ? IgxInputState.VALID : IgxInputState.INVALID;\n        } else {\n            return this._ngControl.valid ? IgxInputState.INITIAL : IgxInputState.INVALID;\n        }\n    }\n\n    private setRequiredToInputs(): void {\n        // workaround for igxInput setting required\n        Promise.resolve().then(() => {\n            const isRequired = this.required;\n            if (this.inputGroup && this.inputGroup.isRequired !== isRequired) {\n                this.inputGroup.isRequired = isRequired;\n            } else if (this.hasProjectedInputs && this._ngControl) {\n                this.projectedInputs.forEach(i => i.isRequired = isRequired);\n            }\n        });\n    }\n\n    private parseMinValue(value: string | Date): Date | null {\n        let minValue: Date = DatePickerUtil.parseDate(value);\n        if (!minValue && this.hasProjectedInputs) {\n            const start = this.projectedInputs.filter(i => i instanceof IgxDateRangeStartComponent)[0];\n            if (start) {\n                minValue = DatePickerUtil.parseDate(start.dateTimeEditor.minValue);\n            }\n        }\n\n        return minValue;\n    }\n\n    private parseMaxValue(value: string | Date): Date | null {\n        let maxValue: Date = DatePickerUtil.parseDate(value);\n        if (!maxValue && this.projectedInputs) {\n            const end = this.projectedInputs.filter(i => i instanceof IgxDateRangeEndComponent)[0];\n            if (end) {\n                maxValue = DatePickerUtil.parseDate(end.dateTimeEditor.maxValue);\n            }\n        }\n\n        return maxValue;\n    }\n\n    private updateCalendar(): void {\n        this.calendar.disabledDates = [];\n        const minValue = this.parseMinValue(this.minValue);\n        if (minValue) {\n            this.calendar.disabledDates.push({ type: DateRangeType.Before, dateRange: [minValue] });\n        }\n        const maxValue = this.parseMaxValue(this.maxValue);\n        if (maxValue) {\n            this.calendar.disabledDates.push({ type: DateRangeType.After, dateRange: [maxValue] });\n        }\n\n        const range: Date[] = [];\n        if (this.value?.start && this.value?.end) {\n            if (DatePickerUtil.greaterThanMaxValue(this.value.start, this.value.end)) {\n                this.swapEditorDates();\n            }\n            if (this.valueInRange(this.value, minValue, maxValue)) {\n                range.push(this.value.start, this.value.end);\n            }\n        }\n\n        if (range.length > 0) {\n            this.calendar.selectDate(range);\n        } else {\n            this.calendar.deselectDate();\n        }\n        this.calendar.viewDate = range[0] || new Date();\n    }\n\n    private swapEditorDates(): void {\n        if (this.hasProjectedInputs) {\n            const start = this.projectedInputs.find(i => i instanceof IgxDateRangeStartComponent) as IgxDateRangeStartComponent;\n            const end = this.projectedInputs.find(i => i instanceof IgxDateRangeEndComponent) as IgxDateRangeEndComponent;\n            [start.dateTimeEditor.value, end.dateTimeEditor.value] = [end.dateTimeEditor.value, start.dateTimeEditor.value];\n            [this.value.start, this.value.end] = [this.value.end, this.value.start];\n        }\n    }\n\n    private valueInRange(value: DateRange, minValue?: Date, maxValue?: Date): boolean {\n        if (minValue && DatePickerUtil.lessThanMinValue(value.start, minValue, false)) {\n            return false;\n        }\n        if (maxValue && DatePickerUtil.greaterThanMaxValue(value.end, maxValue, false)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private extractRange(selection: Date[]): DateRange {\n        return {\n            start: selection[0],\n            end: selection.length > 0 ? selection[selection.length - 1] : null\n        };\n    }\n\n    private attachOnKeydown(): void {\n        fromEvent(this.element.nativeElement, 'keydown')\n            .pipe(takeUntil(this.$destroy))\n            .subscribe((evt: KeyboardEvent) => this.onKeyDown(evt));\n    }\n\n    private subscribeToDateEditorEvents(): void {\n        if (this.hasProjectedInputs) {\n            const start = this.projectedInputs.find(i => i instanceof IgxDateRangeStartComponent) as IgxDateRangeStartComponent;\n            const end = this.projectedInputs.find(i => i instanceof IgxDateRangeEndComponent) as IgxDateRangeEndComponent;\n            if (start && end) {\n                start.dateTimeEditor.valueChange\n                    .pipe(takeUntil(this.$destroy))\n                    .subscribe(value => {\n                        if (this.value) {\n                            this.value = { start: value, end: this.value.end };\n                        } else {\n                            this.value = { start: value, end: null };\n                        }\n                    });\n                end.dateTimeEditor.valueChange\n                    .pipe(takeUntil(this.$destroy))\n                    .subscribe(value => {\n                        if (this.value) {\n                            this.value = { start: this.value.start, end: value };\n                        } else {\n                            this.value = { start: null, end: value };\n                        }\n                    });\n            }\n        }\n    }\n\n    private attachOnTouched(): void {\n        if (this.hasProjectedInputs) {\n            this.projectedInputs.forEach(i => {\n                fromEvent(i.dateTimeEditor.nativeElement, 'blur')\n                    .pipe(takeUntil(this.$destroy))\n                    .subscribe(() => {\n                        if (this.collapsed) {\n                            this.updateValidityOnBlur();\n                        }\n                    });\n            });\n        } else {\n            fromEvent(this.inputDirective.nativeElement, 'blur')\n                .pipe(takeUntil(this.$destroy))\n                .subscribe(() => {\n                    if (this.collapsed) {\n                        this.updateValidityOnBlur();\n                    }\n                });\n        }\n    }\n\n    private cacheFocusedInput(): void {\n        if (this.hasProjectedInputs) {\n            this.projectedInputs.forEach(i => {\n                fromEvent(i.dateTimeEditor.nativeElement, 'focus')\n                    .pipe(takeUntil(this.$destroy))\n                    .subscribe(() => this._focusedInput = i);\n            });\n        }\n    }\n\n    private configPositionStrategy(): void {\n        this._positionSettings = {\n            openAnimation: fadeIn,\n            closeAnimation: fadeOut\n        };\n        this._dropDownOverlaySettings.positionStrategy = new AutoPositionStrategy(this._positionSettings);\n        this.dropdownOverlaySettings.target = this.element.nativeElement;\n    }\n\n    private configOverlaySettings(): void {\n        if (this.overlaySettings !== null) {\n            this._dropDownOverlaySettings = Object.assign({}, this._dropDownOverlaySettings, this.overlaySettings);\n            this._dialogOverlaySettings = Object.assign({}, this._dialogOverlaySettings, this.overlaySettings);\n        }\n    }\n\n    private initialSetValue() {\n        // if there is no value and no ngControl on the picker but we have inputs we may have value set through\n        // their ngModels - we should generate our initial control value\n        if ((!this.value || (!this.value.start && !this.value.end)) && this.hasProjectedInputs && !this._ngControl) {\n            const start = this.projectedInputs.find(i => i instanceof IgxDateRangeStartComponent);\n            const end = this.projectedInputs.find(i => i instanceof IgxDateRangeEndComponent);\n            this._value = {\n                start: start.dateTimeEditor.value,\n                end: end.dateTimeEditor.value\n            };\n        }\n    }\n\n    private updateInputs(): void {\n        const start = this.projectedInputs?.find(i => i instanceof IgxDateRangeStartComponent) as IgxDateRangeStartComponent;\n        const end = this.projectedInputs?.find(i => i instanceof IgxDateRangeEndComponent) as IgxDateRangeEndComponent;\n        if (start && end) {\n            start.updateInputValue(this.value?.start ?? null);\n            end.updateInputValue(this.value?.end ?? null);\n        }\n    }\n\n    private updateDisplayFormat(): void {\n        this.projectedInputs.forEach(i => {\n            const input = i as IgxDateRangeInputsBaseComponent;\n            input.dateTimeEditor.displayFormat = this.displayFormat;\n        });\n    }\n\n    private updateInputFormat(): void {\n        this.projectedInputs.forEach(i => {\n            const input = i as IgxDateRangeInputsBaseComponent;\n            if (input.dateTimeEditor.inputFormat !== this.inputFormat) {\n                input.dateTimeEditor.inputFormat = this.inputFormat;\n            }\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { IgxDateRangePickerComponent } from './date-range-picker.component';\nimport { IgxCalendarModule } from '../calendar/public_api';\nimport { IgxToggleModule } from '../directives/toggle/toggle.directive';\nimport { CommonModule } from '@angular/common';\nimport { IgxButtonModule } from '../directives/button/button.directive';\nimport { IgxInputGroupModule } from '../input-group/public_api';\nimport { IgxIconModule } from '../icon/public_api';\nimport {\n    IgxDateRangeStartComponent, IgxDateRangeEndComponent,\n    DateRangePickerFormatPipe,\n    IgxPickerToggleComponent,\n    IgxDateRangeSeparatorDirective,\n    IgxDateRangeInputsBaseComponent\n} from './date-range-picker-inputs.common';\nimport { IgxDateTimeEditorModule } from '../directives/date-time-editor/public_api';\n\n/**\n * @hidden\n */\n@NgModule({\n    declarations: [\n        IgxDateRangePickerComponent,\n        IgxDateRangeStartComponent,\n        IgxDateRangeEndComponent,\n        IgxDateRangeInputsBaseComponent,\n        DateRangePickerFormatPipe,\n        IgxPickerToggleComponent,\n        IgxDateRangeSeparatorDirective\n    ],\n    imports: [\n        CommonModule,\n        IgxIconModule,\n        IgxButtonModule,\n        IgxToggleModule,\n        IgxCalendarModule,\n        IgxInputGroupModule,\n        IgxDateTimeEditorModule\n    ],\n    exports: [\n        IgxDateRangePickerComponent,\n        IgxDateRangeStartComponent,\n        IgxDateRangeEndComponent,\n        IgxDateRangeSeparatorDirective,\n        IgxDateTimeEditorModule,\n        IgxPickerToggleComponent,\n        IgxInputGroupModule\n    ]\n})\nexport class IgxDateRangePickerModule { }\n"]}